function __vite_legacy_guard(){import.meta.url,import("_").catch(()=>1);async function*i(){}}function _mergeNamespaces(i,o){for(var s=0;s<o.length;s++){const $=o[s];if(typeof $!="string"&&!Array.isArray($)){for(const tt in $)if(tt!=="default"&&!(tt in i)){const rt=Object.getOwnPropertyDescriptor($,tt);rt&&Object.defineProperty(i,tt,rt.get?rt:{enumerable:!0,get:()=>$[tt]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const tt of document.querySelectorAll('link[rel="modulepreload"]'))$(tt);new MutationObserver(tt=>{for(const rt of tt)if(rt.type==="childList")for(const st of rt.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&$(st)}).observe(document,{childList:!0,subtree:!0});function s(tt){const rt={};return tt.integrity&&(rt.integrity=tt.integrity),tt.referrerPolicy&&(rt.referrerPolicy=tt.referrerPolicy),tt.crossOrigin==="use-credentials"?rt.credentials="include":tt.crossOrigin==="anonymous"?rt.credentials="omit":rt.credentials="same-origin",rt}function $(tt){if(tt.ep)return;tt.ep=!0;const rt=s(tt);fetch(tt.href,rt)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var o=i.default;if(typeof o=="function"){var s=function $(){if(this instanceof $){var tt=[null];tt.push.apply(tt,arguments);var rt=Function.bind.apply(o,tt);return new rt}return o.apply(this,arguments)};s.prototype=o.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function($){var tt=Object.getOwnPropertyDescriptor(i,$);Object.defineProperty(s,$,tt.get?tt:{enumerable:!0,get:function(){return i[$]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$6=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(i){return i===null||typeof i!="object"?null:(i=z$3&&i[z$3]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,o){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,o,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}var H$3=G$1.prototype=new F;H$3.constructor=G$1;C$1(H$3,E$1.prototype);H$3.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,o,s){var $,tt={},rt=null,st=null;if(o!=null)for($ in o.ref!==void 0&&(st=o.ref),o.key!==void 0&&(rt=""+o.key),o)J.call(o,$)&&!L$1.hasOwnProperty($)&&(tt[$]=o[$]);var _=arguments.length-2;if(_===1)tt.children=s;else if(1<_){for(var ut=Array(_),mt=0;mt<_;mt++)ut[mt]=arguments[mt+2];tt.children=ut}if(i&&i.defaultProps)for($ in _=i.defaultProps,_)tt[$]===void 0&&(tt[$]=_[$]);return{$$typeof:l$3,type:i,key:rt,ref:st,props:tt,_owner:K$1.current}}function N$1(i,o){return{$$typeof:l$3,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$3}function escape$1(i){var o={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return o[s]})}var P$1=/\/+/g;function Q$1(i,o){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):o.toString(36)}function R$2(i,o,s,$,tt){var rt=typeof i;(rt==="undefined"||rt==="boolean")&&(i=null);var st=!1;if(i===null)st=!0;else switch(rt){case"string":case"number":st=!0;break;case"object":switch(i.$$typeof){case l$3:case n$3:st=!0}}if(st)return st=i,tt=tt(st),i=$===""?"."+Q$1(st,0):$,I$1(tt)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$2(tt,o,s,"",function(mt){return mt})):tt!=null&&(O$1(tt)&&(tt=N$1(tt,s+(!tt.key||st&&st.key===tt.key?"":(""+tt.key).replace(P$1,"$&/")+"/")+i)),o.push(tt)),1;if(st=0,$=$===""?".":$+":",I$1(i))for(var _=0;_<i.length;_++){rt=i[_];var ut=$+Q$1(rt,_);st+=R$2(rt,o,s,ut,tt)}else if(ut=A$3(i),typeof ut=="function")for(i=ut.call(i),_=0;!(rt=i.next()).done;)rt=rt.value,ut=$+Q$1(rt,_++),st+=R$2(rt,o,s,ut,tt);else if(rt==="object")throw o=String(i),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return st}function S$1(i,o,s){if(i==null)return i;var $=[],tt=0;return R$2(i,$,"","",function(rt){return o.call(s,rt,tt++)}),$}function T$1(i){if(i._status===-1){var o=i._result;o=o(),o.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=o)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(i,o,s){S$1(i,function(){o.apply(this,arguments)},s)},count:function(i){var o=0;return S$1(i,function(){o++}),o},toArray:function(i){return S$1(i,function(o){return o})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(i,o,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var $=C$1({},i.props),tt=i.key,rt=i.ref,st=i._owner;if(o!=null){if(o.ref!==void 0&&(rt=o.ref,st=K$1.current),o.key!==void 0&&(tt=""+o.key),i.type&&i.type.defaultProps)var _=i.type.defaultProps;for(ut in o)J.call(o,ut)&&!L$1.hasOwnProperty(ut)&&($[ut]=o[ut]===void 0&&_!==void 0?_[ut]:o[ut])}var ut=arguments.length-2;if(ut===1)$.children=s;else if(1<ut){_=Array(ut);for(var mt=0;mt<ut;mt++)_[mt]=arguments[mt+2];$.children=_}return{$$typeof:l$3,type:i.type,key:tt,ref:rt,props:$,_owner:st}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t$2,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var o=M$1.bind(null,i);return o.type=i,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$6,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y$2,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,o){return{$$typeof:x$2,type:i,compare:o===void 0?null:o}};react_production_min.startTransition=function(i){var o=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,o){return U$1.current.useCallback(i,o)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,o){return U$1.current.useEffect(i,o)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,o,s){return U$1.current.useImperativeHandle(i,o,s)};react_production_min.useInsertionEffect=function(i,o){return U$1.current.useInsertionEffect(i,o)};react_production_min.useLayoutEffect=function(i,o){return U$1.current.useLayoutEffect(i,o)};react_production_min.useMemo=function(i,o){return U$1.current.useMemo(i,o)};react_production_min.useReducer=function(i,o,s){return U$1.current.useReducer(i,o,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,o,s){return U$1.current.useSyncExternalStore(i,o,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$2(i,o,s){var $,tt={},rt=null,st=null;s!==void 0&&(rt=""+s),o.key!==void 0&&(rt=""+o.key),o.ref!==void 0&&(st=o.ref);for($ in o)m$3.call(o,$)&&!p$3.hasOwnProperty($)&&(tt[$]=o[$]);if(i&&i.defaultProps)for($ in o=i.defaultProps,o)tt[$]===void 0&&(tt[$]=o[$]);return{$$typeof:k$2,type:i,key:rt,ref:st,props:tt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(Nt,Wt){var or=Nt.length;Nt.push(Wt);e:for(;0<or;){var ar=or-1>>>1,Fr=Nt[ar];if(0<tt(Fr,Wt))Nt[ar]=Wt,Nt[or]=Fr,or=ar;else break e}}function s(Nt){return Nt.length===0?null:Nt[0]}function $(Nt){if(Nt.length===0)return null;var Wt=Nt[0],or=Nt.pop();if(or!==Wt){Nt[0]=or;e:for(var ar=0,Fr=Nt.length,Yr=Fr>>>1;ar<Yr;){var hn=2*(ar+1)-1,mn=Nt[hn],En=hn+1,Ln=Nt[En];if(0>tt(mn,or))En<Fr&&0>tt(Ln,mn)?(Nt[ar]=Ln,Nt[En]=or,ar=En):(Nt[ar]=mn,Nt[hn]=or,ar=hn);else if(En<Fr&&0>tt(Ln,or))Nt[ar]=Ln,Nt[En]=or,ar=En;else break e}}return Wt}function tt(Nt,Wt){var or=Nt.sortIndex-Wt.sortIndex;return or!==0?or:Nt.id-Wt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var rt=performance;i.unstable_now=function(){return rt.now()}}else{var st=Date,_=st.now();i.unstable_now=function(){return st.now()-_}}var ut=[],mt=[],vt=1,wt=null,bt=3,Mt=!1,At=!1,Lt=!1,Ht=typeof setTimeout=="function"?setTimeout:null,Tt=typeof clearTimeout=="function"?clearTimeout:null,Ct=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function St(Nt){for(var Wt=s(mt);Wt!==null;){if(Wt.callback===null)$(mt);else if(Wt.startTime<=Nt)$(mt),Wt.sortIndex=Wt.expirationTime,o(ut,Wt);else break;Wt=s(mt)}}function It(Nt){if(Lt=!1,St(Nt),!At)if(s(ut)!==null)At=!0,hr(Bt);else{var Wt=s(mt);Wt!==null&&Er(It,Wt.startTime-Nt)}}function Bt(Nt,Wt){At=!1,Lt&&(Lt=!1,Tt(Xt),Xt=-1),Mt=!0;var or=bt;try{for(St(Wt),wt=s(ut);wt!==null&&(!(wt.expirationTime>Wt)||Nt&&!Tr());){var ar=wt.callback;if(typeof ar=="function"){wt.callback=null,bt=wt.priorityLevel;var Fr=ar(wt.expirationTime<=Wt);Wt=i.unstable_now(),typeof Fr=="function"?wt.callback=Fr:wt===s(ut)&&$(ut),St(Wt)}else $(ut);wt=s(ut)}if(wt!==null)var Yr=!0;else{var hn=s(mt);hn!==null&&Er(It,hn.startTime-Wt),Yr=!1}return Yr}finally{wt=null,bt=or,Mt=!1}}var Ft=!1,Gt=null,Xt=-1,ir=5,$r=-1;function Tr(){return!(i.unstable_now()-$r<ir)}function xr(){if(Gt!==null){var Nt=i.unstable_now();$r=Nt;var Wt=!0;try{Wt=Gt(!0,Nt)}finally{Wt?Xr():(Ft=!1,Gt=null)}}else Ft=!1}var Xr;if(typeof Ct=="function")Xr=function(){Ct(xr)};else if(typeof MessageChannel<"u"){var ln=new MessageChannel,zr=ln.port2;ln.port1.onmessage=xr,Xr=function(){zr.postMessage(null)}}else Xr=function(){Ht(xr,0)};function hr(Nt){Gt=Nt,Ft||(Ft=!0,Xr())}function Er(Nt,Wt){Xt=Ht(function(){Nt(i.unstable_now())},Wt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Nt){Nt.callback=null},i.unstable_continueExecution=function(){At||Mt||(At=!0,hr(Bt))},i.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ir=0<Nt?Math.floor(1e3/Nt):5},i.unstable_getCurrentPriorityLevel=function(){return bt},i.unstable_getFirstCallbackNode=function(){return s(ut)},i.unstable_next=function(Nt){switch(bt){case 1:case 2:case 3:var Wt=3;break;default:Wt=bt}var or=bt;bt=Wt;try{return Nt()}finally{bt=or}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Nt,Wt){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var or=bt;bt=Nt;try{return Wt()}finally{bt=or}},i.unstable_scheduleCallback=function(Nt,Wt,or){var ar=i.unstable_now();switch(typeof or=="object"&&or!==null?(or=or.delay,or=typeof or=="number"&&0<or?ar+or:ar):or=ar,Nt){case 1:var Fr=-1;break;case 2:Fr=250;break;case 5:Fr=1073741823;break;case 4:Fr=1e4;break;default:Fr=5e3}return Fr=or+Fr,Nt={id:vt++,callback:Wt,priorityLevel:Nt,startTime:or,expirationTime:Fr,sortIndex:-1},or>ar?(Nt.sortIndex=or,o(mt,Nt),s(ut)===null&&Nt===s(mt)&&(Lt?(Tt(Xt),Xt=-1):Lt=!0,Er(It,or-ar))):(Nt.sortIndex=Fr,o(ut,Nt),At||Mt||(At=!0,hr(Bt))),Nt},i.unstable_shouldYield=Tr,i.unstable_wrapCallback=function(Nt){var Wt=bt;return function(){var or=bt;bt=Wt;try{return Nt.apply(this,arguments)}finally{bt=or}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,o){ha(i,o),ha(i+"Capture",o)}function ha(i,o){for(ea[i]=o,i=0;i<o.length;i++)da.add(o[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,o,s,$){if(s!==null&&s.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return $?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,o,s,$){if(o===null||typeof o>"u"||pa(i,o,s,$))return!0;if($)return!1;if(s!==null)switch(s.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$5(i,o,s,$,tt,rt,st){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=$,this.attributeNamespace=tt,this.mustUseProperty=s,this.propertyName=i,this.type=o,this.sanitizeURL=rt,this.removeEmptyString=st}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$2[i]=new v$5(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];z$2[o]=new v$5(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$2[i]=new v$5(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$2[i]=new v$5(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$2[i]=new v$5(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$2[i]=new v$5(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$2[i]=new v$5(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$2[i]=new v$5(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$2[i]=new v$5(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$2[o]=new v$5(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$2[o]=new v$5(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(ra,sa);z$2[o]=new v$5(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$2[i]=new v$5(i,1,!1,i.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$5("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$2[i]=new v$5(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,o,s,$){var tt=z$2.hasOwnProperty(o)?z$2[o]:null;(tt!==null?tt.type!==0:$||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,s,tt,$)&&(s=null),$||tt===null?oa(o)&&(s===null?i.removeAttribute(o):i.setAttribute(o,""+s)):tt.mustUseProperty?i[tt.propertyName]=s===null?tt.type===3?!1:"":s:(o=tt.attributeName,$=tt.attributeNamespace,s===null?i.removeAttribute(o):(tt=tt.type,s=tt===3||tt===4&&s===!0?"":""+s,$?i.setAttributeNS($,o,s):i.setAttribute(o,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$2=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+i}var Na=!1;function Oa(i,o){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(mt){var $=mt}Reflect.construct(i,[],o)}else{try{o.call()}catch(mt){$=mt}i.call(o.prototype)}else{try{throw Error()}catch(mt){$=mt}i()}}catch(mt){if(mt&&$&&typeof mt.stack=="string"){for(var tt=mt.stack.split(`
`),rt=$.stack.split(`
`),st=tt.length-1,_=rt.length-1;1<=st&&0<=_&&tt[st]!==rt[_];)_--;for(;1<=st&&0<=_;st--,_--)if(tt[st]!==rt[_]){if(st!==1||_!==1)do if(st--,_--,0>_||tt[st]!==rt[_]){var ut=`
`+tt[st].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=st&&0<=_);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return o=i.displayName||null,o!==null?o:Qa(i.type)||"Memo";case Ha:o=i._payload,i=i._init;try{return Qa(i(o))}catch(s){}}return null}function Ra(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(i){var o=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),$=""+i[o];if(!i.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var tt=s.get,rt=s.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return tt.call(this)},set:function(st){$=""+st,rt.call(this,st)}}),Object.defineProperty(i,o,{enumerable:s.enumerable}),{getValue:function(){return $},setValue:function(st){$=""+st},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var s=o.getValue(),$="";return i&&($=Ta(i)?i.checked?"true":"false":i.value),i=$,i!==s?(o.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(o){return i.body}}function Ya(i,o){var s=o.checked;return A$2({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s!=null?s:i._wrapperState.initialChecked})}function Za(i,o){var s=o.defaultValue==null?"":o.defaultValue,$=o.checked!=null?o.checked:o.defaultChecked;s=Sa(o.value!=null?o.value:s),i._wrapperState={initialChecked:$,initialValue:s,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(i,o){o=o.checked,o!=null&&ta(i,"checked",o,!1)}function bb(i,o){ab(i,o);var s=Sa(o.value),$=o.type;if(s!=null)$==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if($==="submit"||$==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?cb(i,o.type,s):o.hasOwnProperty("defaultValue")&&cb(i,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function db(i,o,s){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var $=o.type;if(!($!=="submit"&&$!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,s||o===i.value||(i.value=o),i.defaultValue=o}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,o,s){(o!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,o,s,$){if(i=i.options,o){o={};for(var tt=0;tt<s.length;tt++)o["$"+s[tt]]=!0;for(s=0;s<i.length;s++)tt=o.hasOwnProperty("$"+i[s].value),i[s].selected!==tt&&(i[s].selected=tt),tt&&$&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),o=null,tt=0;tt<i.length;tt++){if(i[tt].value===s){i[tt].selected=!0,$&&(i[tt].defaultSelected=!0);return}o!==null||i[tt].disabled||(o=i[tt])}o!==null&&(o.selected=!0)}}function gb(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$2({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,o){var s=o.value;if(s==null){if(s=o.children,o=o.defaultValue,s!=null){if(o!=null)throw Error(p$2(92));if(eb(s)){if(1<s.length)throw Error(p$2(93));s=s[0]}o=s}o==null&&(o=""),s=o}i._wrapperState={initialValue:Sa(s)}}function ib(i,o){var s=Sa(o.value),$=Sa(o.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),o.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),$!=null&&(i.defaultValue=""+$)}function jb(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,s,$,tt){MSApp.execUnsafeLocalFunction(function(){return i(o,s,$,tt)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ob(i,o){if(o){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=o;return}}i.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),pb[o]=pb[i]})});function rb(i,o,s){return o==null||typeof o=="boolean"||o===""?"":s||typeof o!="number"||o===0||pb.hasOwnProperty(i)&&pb[i]?(""+o).trim():o+"px"}function sb(i,o){i=i.style;for(var s in o)if(o.hasOwnProperty(s)){var $=s.indexOf("--")===0,tt=rb(s,o[s],$);s==="float"&&(s="cssFloat"),$?i.setProperty(s,tt):i[s]=tt}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,o){if(o){if(tb[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$2(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$2(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$2(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$2(62))}}function vb(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p$2(280));var o=i.stateNode;o&&(o=Db(o),yb(i.stateNode,i.type,o))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,o=Ab;if(Ab=zb=null,Bb(i),o)for(i=0;i<o.length;i++)Bb(o[i])}}function Gb(i,o){return i(o)}function Hb(){}var Ib=!1;function Jb(i,o,s){if(Ib)return i(o,s);Ib=!0;try{return Gb(i,o,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,o){var s=i.stateNode;if(s===null)return null;var $=Db(s);if($===null)return null;s=$[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":($=!$.disabled)||(i=i.type,$=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!$;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p$2(231,o,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch(i){Lb=!1}function Nb(i,o,s,$,tt,rt,st,_,ut){var mt=Array.prototype.slice.call(arguments,3);try{o.apply(s,mt)}catch(vt){this.onError(vt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,o,s,$,tt,rt,st,_,ut){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,o,s,$,tt,rt,st,_,ut){if(Tb.apply(this,arguments),Ob){if(Ob){var mt=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=mt)}}function Vb(i){var o=i,s=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(s=o.return),i=o.return;while(i)}return o.tag===3?s:null}function Wb(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p$2(188))}function Yb(i){var o=i.alternate;if(!o){if(o=Vb(i),o===null)throw Error(p$2(188));return o!==i?null:i}for(var s=i,$=o;;){var tt=s.return;if(tt===null)break;var rt=tt.alternate;if(rt===null){if($=tt.return,$!==null){s=$;continue}break}if(tt.child===rt.child){for(rt=tt.child;rt;){if(rt===s)return Xb(tt),i;if(rt===$)return Xb(tt),o;rt=rt.sibling}throw Error(p$2(188))}if(s.return!==$.return)s=tt,$=rt;else{for(var st=!1,_=tt.child;_;){if(_===s){st=!0,s=tt,$=rt;break}if(_===$){st=!0,$=tt,s=rt;break}_=_.sibling}if(!st){for(_=rt.child;_;){if(_===s){st=!0,s=rt,$=tt;break}if(_===$){st=!0,$=rt,s=tt;break}_=_.sibling}if(!st)throw Error(p$2(189))}}if(s.alternate!==$)throw Error(p$2(190))}if(s.tag!==3)throw Error(p$2(188));return s.stateNode.current===s?i:o}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=$b(i);if(o!==null)return o;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch(o){}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,o){var s=i.pendingLanes;if(s===0)return 0;var $=0,tt=i.suspendedLanes,rt=i.pingedLanes,st=s&268435455;if(st!==0){var _=st&~tt;_!==0?$=tc(_):(rt&=st,rt!==0&&($=tc(rt)))}else st=s&~tt,st!==0?$=tc(st):rt!==0&&($=tc(rt));if($===0)return 0;if(o!==0&&o!==$&&!(o&tt)&&(tt=$&-$,rt=o&-o,tt>=rt||tt===16&&(rt&4194240)!==0))return o;if($&4&&($|=s&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=$;0<o;)s=31-oc(o),tt=1<<s,$|=i[s],o&=~tt;return $}function vc(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,o){for(var s=i.suspendedLanes,$=i.pingedLanes,tt=i.expirationTimes,rt=i.pendingLanes;0<rt;){var st=31-oc(rt),_=1<<st,ut=tt[st];ut===-1?(!(_&s)||_&$)&&(tt[st]=vc(_,o)):ut<=o&&(i.expiredLanes|=_),rt&=~_}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var o=[],s=0;31>s;s++)o.push(i);return o}function Ac(i,o,s){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-oc(o),i[o]=s}function Bc(i,o){var s=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var $=i.eventTimes;for(i=i.expirationTimes;0<s;){var tt=31-oc(s),rt=1<<tt;o[tt]=0,$[tt]=-1,i[tt]=-1,s&=~rt}}function Cc(i,o){var s=i.entangledLanes|=o;for(i=i.entanglements;s;){var $=31-oc(s),tt=1<<$;tt&o|i[$]&o&&(i[$]|=o),s&=~tt}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,o){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(i,o,s,$,tt,rt){return i===null||i.nativeEvent!==rt?(i={blockedOn:o,domEventName:s,eventSystemFlags:$,nativeEvent:rt,targetContainers:[tt]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),i):(i.eventSystemFlags|=$,o=i.targetContainers,tt!==null&&o.indexOf(tt)===-1&&o.push(tt),i)}function Uc(i,o,s,$,tt){switch(o){case"focusin":return Lc=Tc(Lc,i,o,s,$,tt),!0;case"dragenter":return Mc=Tc(Mc,i,o,s,$,tt),!0;case"mouseover":return Nc=Tc(Nc,i,o,s,$,tt),!0;case"pointerover":var rt=tt.pointerId;return Oc.set(rt,Tc(Oc.get(rt)||null,i,o,s,$,tt)),!0;case"gotpointercapture":return rt=tt.pointerId,Pc.set(rt,Tc(Pc.get(rt)||null,i,o,s,$,tt)),!0}return!1}function Vc(i){var o=Wc(i.target);if(o!==null){var s=Vb(o);if(s!==null){if(o=s.tag,o===13){if(o=Wb(s),o!==null){i.blockedOn=o,Ic(i.priority,function(){Gc(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var s=Yc(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var $=new s.constructor(s.type,s);wb=$,s.target.dispatchEvent($),wb=null}else return o=Cb(s),o!==null&&Fc(o),i.blockedOn=s,!1;o.shift()}return!0}function Zc(i,o,s){Xc(i)&&s.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,o){i.blockedOn===o&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function o(tt){return ad(tt,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var $=Kc[s];$.blockedOn===i&&($.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(o),Pc.forEach(o),s=0;s<Qc.length;s++)$=Qc[s],$.blockedOn===i&&($.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,o,s,$){var tt=C,rt=cd.transition;cd.transition=null;try{C=1,fd(i,o,s,$)}finally{C=tt,cd.transition=rt}}function gd(i,o,s,$){var tt=C,rt=cd.transition;cd.transition=null;try{C=4,fd(i,o,s,$)}finally{C=tt,cd.transition=rt}}function fd(i,o,s,$){if(dd){var tt=Yc(i,o,s,$);if(tt===null)hd(i,o,$,id,s),Sc(i,$);else if(Uc(tt,i,o,s,$))$.stopPropagation();else if(Sc(i,$),o&4&&-1<Rc.indexOf(i)){for(;tt!==null;){var rt=Cb(tt);if(rt!==null&&Ec(rt),rt=Yc(i,o,s,$),rt===null&&hd(i,o,$,id,s),rt===tt)break;tt=rt}tt!==null&&$.stopPropagation()}else hd(i,o,$,null,s)}}var id=null;function Yc(i,o,s,$){if(id=null,i=xb($),i=Wc(i),i!==null)if(o=Vb(i),o===null)i=null;else if(s=o.tag,s===13){if(i=Wb(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,o=ld,s=o.length,$,tt="value"in kd?kd.value:kd.textContent,rt=tt.length;for(i=0;i<s&&o[i]===tt[i];i++);var st=s-i;for($=1;$<=st&&o[s-$]===tt[rt-$];$++);return md=tt.slice(i,1<$?1-$:void 0)}function od(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function o(s,$,tt,rt,st){this._reactName=s,this._targetInst=tt,this.type=$,this.nativeEvent=rt,this.target=st,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(s=i[_],this[_]=s?s(rt):rt[_]);return this.isDefaultPrevented=(rt.defaultPrevented!=null?rt.defaultPrevented:rt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Od[i])?!!o[i]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(i){if(i.key){var o=Md[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(i,o){switch(i){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,o){switch(i){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return i=o.data,i===ee&&fe?null:i;default:return null}}function ke(i,o){if(ie)return i==="compositionend"||!ae&&ge(i,o)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!le[i.type]:o==="textarea"}function ne(i,o,s,$){Eb($),o=oe(o,"onChange"),0<o.length&&(s=new td("onChange","change",null,s,$),i.push({event:s,listeners:o}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var o=ue(i);if(Wa(o))return i}function ve(i,o){if(i==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,i,xb(i)),Jb(re,o)}}function Ce(i,o,s){i==="focusin"?(Ae(),pe=o,qe=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,o){if(i==="click")return te(o)}function Fe(i,o){if(i==="input"||i==="change")return te(o)}function Ge(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,o){if(He(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var s=Object.keys(i),$=Object.keys(o);if(s.length!==$.length)return!1;for($=0;$<s.length;$++){var tt=s[$];if(!ja.call(o,tt)||!He(i[tt],o[tt]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,o){var s=Je(i);i=0;for(var $;s;){if(s.nodeType===3){if($=i+s.textContent.length,i<=o&&$>=o)return{node:s,offset:o-i};i=$}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Le(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var i=window,o=Xa();o instanceof i.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch($){s=!1}if(s)i=o.contentWindow;else break;o=Xa(i.document)}return o}function Ne(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Oe(i){var o=Me(),s=i.focusedElem,$=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if($!==null&&Ne(s)){if(o=$.start,i=$.end,i===void 0&&(i=o),"selectionStart"in s)s.selectionStart=o,s.selectionEnd=Math.min(i,s.value.length);else if(i=(o=s.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var tt=s.textContent.length,rt=Math.min($.start,tt);$=$.end===void 0?rt:Math.min($.end,tt),!i.extend&&rt>$&&(tt=$,$=rt,rt=tt),tt=Ke(s,rt);var st=Ke(s,$);tt&&st&&(i.rangeCount!==1||i.anchorNode!==tt.node||i.anchorOffset!==tt.offset||i.focusNode!==st.node||i.focusOffset!==st.offset)&&(o=o.createRange(),o.setStart(tt.node,tt.offset),i.removeAllRanges(),rt>$?(i.addRange(o),i.extend(st.node,st.offset)):(o.setEnd(st.node,st.offset),i.addRange(o)))}}for(o=[],i=s;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<o.length;s++)i=o[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,o,s){var $=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa($)||($=Qe,"selectionStart"in $&&Ne($)?$={start:$.selectionStart,end:$.selectionEnd}:($=($.ownerDocument&&$.ownerDocument.defaultView||window).getSelection(),$={anchorNode:$.anchorNode,anchorOffset:$.anchorOffset,focusNode:$.focusNode,focusOffset:$.focusOffset}),Se&&Ie(Se,$)||(Se=$,$=oe(Re,"onSelect"),0<$.length&&(o=new td("onSelect","select",null,o,s),i.push({event:o,listeners:$}),o.target=Qe)))}function Ve(i,o){var s={};return s[i.toLowerCase()]=o.toLowerCase(),s["Webkit"+i]="webkit"+o,s["Moz"+i]="moz"+o,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var o=We[i],s;for(s in o)if(o.hasOwnProperty(s)&&s in Ye)return Xe[i]=o[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,o){df.set(i,o),fa(o,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,o,s){var $=i.type||"unknown-event";i.currentTarget=s,Ub($,o,void 0,i),i.currentTarget=null}function se(i,o){o=(o&4)!==0;for(var s=0;s<i.length;s++){var $=i[s],tt=$.event;$=$.listeners;e:{var rt=void 0;if(o)for(var st=$.length-1;0<=st;st--){var _=$[st],ut=_.instance,mt=_.currentTarget;if(_=_.listener,ut!==rt&&tt.isPropagationStopped())break e;nf(tt,_,mt),rt=ut}else for(st=0;st<$.length;st++){if(_=$[st],ut=_.instance,mt=_.currentTarget,_=_.listener,ut!==rt&&tt.isPropagationStopped())break e;nf(tt,_,mt),rt=ut}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,o){var s=o[of];s===void 0&&(s=o[of]=new Set);var $=i+"__bubble";s.has($)||(pf(o,i,2,!1),s.add($))}function qf(i,o,s){var $=0;o&&($|=4),pf(s,i,$,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(i,o,s,$){switch(jd(o)){case 1:var tt=ed;break;case 4:tt=gd;break;default:tt=fd}s=tt.bind(null,o,s,i),tt=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(tt=!0),$?tt!==void 0?i.addEventListener(o,s,{capture:!0,passive:tt}):i.addEventListener(o,s,!0):tt!==void 0?i.addEventListener(o,s,{passive:tt}):i.addEventListener(o,s,!1)}function hd(i,o,s,$,tt){var rt=$;if(!(o&1)&&!(o&2)&&$!==null)e:for(;;){if($===null)return;var st=$.tag;if(st===3||st===4){var _=$.stateNode.containerInfo;if(_===tt||_.nodeType===8&&_.parentNode===tt)break;if(st===4)for(st=$.return;st!==null;){var ut=st.tag;if((ut===3||ut===4)&&(ut=st.stateNode.containerInfo,ut===tt||ut.nodeType===8&&ut.parentNode===tt))return;st=st.return}for(;_!==null;){if(st=Wc(_),st===null)return;if(ut=st.tag,ut===5||ut===6){$=rt=st;continue e}_=_.parentNode}}$=$.return}Jb(function(){var mt=rt,vt=xb(s),wt=[];e:{var bt=df.get(i);if(bt!==void 0){var Mt=td,At=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":Mt=Rd;break;case"focusin":At="focus",Mt=Fd;break;case"focusout":At="blur",Mt=Fd;break;case"beforeblur":case"afterblur":Mt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=Vd;break;case $e:case af:case bf:Mt=Hd;break;case cf:Mt=Xd;break;case"scroll":Mt=vd;break;case"wheel":Mt=Zd;break;case"copy":case"cut":case"paste":Mt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=Td}var Lt=(o&4)!==0,Ht=!Lt&&i==="scroll",Tt=Lt?bt!==null?bt+"Capture":null:bt;Lt=[];for(var Ct=mt,St;Ct!==null;){St=Ct;var It=St.stateNode;if(St.tag===5&&It!==null&&(St=It,Tt!==null&&(It=Kb(Ct,Tt),It!=null&&Lt.push(tf(Ct,It,St)))),Ht)break;Ct=Ct.return}0<Lt.length&&(bt=new Mt(bt,At,null,s,vt),wt.push({event:bt,listeners:Lt}))}}if(!(o&7)){e:{if(bt=i==="mouseover"||i==="pointerover",Mt=i==="mouseout"||i==="pointerout",bt&&s!==wb&&(At=s.relatedTarget||s.fromElement)&&(Wc(At)||At[uf]))break e;if((Mt||bt)&&(bt=vt.window===vt?vt:(bt=vt.ownerDocument)?bt.defaultView||bt.parentWindow:window,Mt?(At=s.relatedTarget||s.toElement,Mt=mt,At=At?Wc(At):null,At!==null&&(Ht=Vb(At),At!==Ht||At.tag!==5&&At.tag!==6)&&(At=null)):(Mt=null,At=mt),Mt!==At)){if(Lt=Bd,It="onMouseLeave",Tt="onMouseEnter",Ct="mouse",(i==="pointerout"||i==="pointerover")&&(Lt=Td,It="onPointerLeave",Tt="onPointerEnter",Ct="pointer"),Ht=Mt==null?bt:ue(Mt),St=At==null?bt:ue(At),bt=new Lt(It,Ct+"leave",Mt,s,vt),bt.target=Ht,bt.relatedTarget=St,It=null,Wc(vt)===mt&&(Lt=new Lt(Tt,Ct+"enter",At,s,vt),Lt.target=St,Lt.relatedTarget=Ht,It=Lt),Ht=It,Mt&&At)t:{for(Lt=Mt,Tt=At,Ct=0,St=Lt;St;St=vf(St))Ct++;for(St=0,It=Tt;It;It=vf(It))St++;for(;0<Ct-St;)Lt=vf(Lt),Ct--;for(;0<St-Ct;)Tt=vf(Tt),St--;for(;Ct--;){if(Lt===Tt||Tt!==null&&Lt===Tt.alternate)break t;Lt=vf(Lt),Tt=vf(Tt)}Lt=null}else Lt=null;Mt!==null&&wf(wt,bt,Mt,Lt,!1),At!==null&&Ht!==null&&wf(wt,Ht,At,Lt,!0)}}e:{if(bt=mt?ue(mt):window,Mt=bt.nodeName&&bt.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&bt.type==="file")var Bt=ve;else if(me(bt))if(we)Bt=Fe;else{Bt=De;var Ft=Ce}else(Mt=bt.nodeName)&&Mt.toLowerCase()==="input"&&(bt.type==="checkbox"||bt.type==="radio")&&(Bt=Ee);if(Bt&&(Bt=Bt(i,mt))){ne(wt,Bt,s,vt);break e}Ft&&Ft(i,bt,mt),i==="focusout"&&(Ft=bt._wrapperState)&&Ft.controlled&&bt.type==="number"&&cb(bt,"number",bt.value)}switch(Ft=mt?ue(mt):window,i){case"focusin":(me(Ft)||Ft.contentEditable==="true")&&(Qe=Ft,Re=mt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(wt,s,vt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(wt,s,vt)}var Gt;if(ae)e:{switch(i){case"compositionstart":var Xt="onCompositionStart";break e;case"compositionend":Xt="onCompositionEnd";break e;case"compositionupdate":Xt="onCompositionUpdate";break e}Xt=void 0}else ie?ge(i,s)&&(Xt="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(Xt="onCompositionStart");Xt&&(de&&s.locale!=="ko"&&(ie||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&ie&&(Gt=nd()):(kd=vt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Ft=oe(mt,Xt),0<Ft.length&&(Xt=new Ld(Xt,i,null,s,vt),wt.push({event:Xt,listeners:Ft}),Gt?Xt.data=Gt:(Gt=he(s),Gt!==null&&(Xt.data=Gt)))),(Gt=ce?je(i,s):ke(i,s))&&(mt=oe(mt,"onBeforeInput"),0<mt.length&&(vt=new Ld("onBeforeInput","beforeinput",null,s,vt),wt.push({event:vt,listeners:mt}),vt.data=Gt))}se(wt,o)})}function tf(i,o,s){return{instance:i,listener:o,currentTarget:s}}function oe(i,o){for(var s=o+"Capture",$=[];i!==null;){var tt=i,rt=tt.stateNode;tt.tag===5&&rt!==null&&(tt=rt,rt=Kb(i,s),rt!=null&&$.unshift(tf(i,rt,tt)),rt=Kb(i,o),rt!=null&&$.push(tf(i,rt,tt))),i=i.return}return $}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,o,s,$,tt){for(var rt=o._reactName,st=[];s!==null&&s!==$;){var _=s,ut=_.alternate,mt=_.stateNode;if(ut!==null&&ut===$)break;_.tag===5&&mt!==null&&(_=mt,tt?(ut=Kb(s,rt),ut!=null&&st.unshift(tf(s,ut,_))):tt||(ut=Kb(s,rt),ut!=null&&st.push(tf(s,ut,_)))),s=s.return}st.length!==0&&i.push({event:o,listeners:st})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,o,s){if(o=zf(o),zf(i)!==o&&s)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,o){var s=o,$=0;do{var tt=s.nextSibling;if(i.removeChild(s),tt&&tt.nodeType===8)if(s=tt.data,s==="/$"){if($===0){i.removeChild(tt),bd(o);return}$--}else s!=="$"&&s!=="$?"&&s!=="$!"||$++;s=tt}while(s);bd(o)}function Lf(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return i;o--}else s==="/$"&&o++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var o=i[Of];if(o)return o;for(var s=i.parentNode;s;){if(o=s[uf]||s[Of]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return o}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p$2(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,o){Tf++,Sf[Tf]=i.current,i.current=o}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,o){var s=i.type.contextTypes;if(!s)return Vf;var $=i.stateNode;if($&&$.__reactInternalMemoizedUnmaskedChildContext===o)return $.__reactInternalMemoizedMaskedChildContext;var tt={},rt;for(rt in s)tt[rt]=o[rt];return $&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=tt),tt}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H$2)}function ag(i,o,s){if(H$2.current!==Vf)throw Error(p$2(168));G(H$2,o),G(Wf,s)}function bg(i,o,s){var $=i.stateNode;if(o=o.childContextTypes,typeof $.getChildContext!="function")return s;$=$.getChildContext();for(var tt in $)if(!(tt in o))throw Error(p$2(108,Ra(i)||"Unknown",tt));return A$2({},s,$)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G(H$2,i),G(Wf,Wf.current),!0}function dg(i,o,s){var $=i.stateNode;if(!$)throw Error(p$2(169));s?(i=bg(i,o,Xf),$.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H$2),G(H$2,i)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,o=C;try{var s=eg;for(C=1;i<s.length;i++){var $=s[i];do $=$(!0);while($!==null)}eg=null,fg=!1}catch(tt){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),tt}finally{C=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,o){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=o}function ug(i,o,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var $=rg;i=sg;var tt=32-oc($)-1;$&=~(1<<tt),s+=1;var rt=32-oc(o)+tt;if(30<rt){var st=tt-tt%5;rt=($&(1<<st)-1).toString(32),$>>=st,tt-=st,rg=1<<32-oc(o)+tt|s<<tt|$,sg=rt+i}else rg=1<<rt|s<<tt|$,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,o){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=o,s.return=i,o=i.deletions,o===null?(i.deletions=[s],i.flags|=16):o.push(s)}function Cg(i,o){switch(i.tag){case 5:var s=i.type;return o=o.nodeType!==1||s.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,xg=i,yg=Lf(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,xg=i,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:o,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=o,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var o=yg;if(o){var s=o;if(!Cg(i,o)){if(Dg(i))throw Error(p$2(418));o=Lf(s.nextSibling);var $=xg;o&&Cg(i,o)?Ag($,s):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p$2(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ef(i.type,i.memoizedProps)),o&&(o=yg)){if(Dg(i))throw Hg(),Error(p$2(418));for(;o;)Ag(i,o),o=Lf(o.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p$2(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(o===0){yg=Lf(i.nextSibling);break e}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,o){if(i&&i.defaultProps){o=A$2({},o),i=i.defaultProps;for(var s in i)o[s]===void 0&&(o[s]=i[s]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var o=Mg.current;E(Mg),i._currentValue=o}function Sg(i,o,s){for(;i!==null;){var $=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,$!==null&&($.childLanes|=o)):$!==null&&($.childLanes&o)!==o&&($.childLanes|=o),i===s)break;i=i.return}}function Tg(i,o){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ug=!0),i.firstContext=null)}function Vg(i){var o=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return o}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,o,s,$){var tt=o.interleaved;return tt===null?(s.next=s,Xg(o)):(s.next=tt.next,tt.next=s),o.interleaved=s,Zg(i,$)}function Zg(i,o){i.lanes|=o;var s=i.alternate;for(s!==null&&(s.lanes|=o),s=i,i=i.return;i!==null;)i.childLanes|=o,s=i.alternate,s!==null&&(s.childLanes|=o),s=i,i=i.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(i,o,s){var $=i.updateQueue;if($===null)return null;if($=$.shared,K&2){var tt=$.pending;return tt===null?o.next=o:(o.next=tt.next,tt.next=o),$.pending=o,Zg(i,s)}return tt=$.interleaved,tt===null?(o.next=o,Xg($)):(o.next=tt.next,tt.next=o),$.interleaved=o,Zg(i,s)}function eh(i,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194240)!==0)){var $=o.lanes;$&=i.pendingLanes,s|=$,o.lanes=s,Cc(i,s)}}function fh(i,o){var s=i.updateQueue,$=i.alternate;if($!==null&&($=$.updateQueue,s===$)){var tt=null,rt=null;if(s=s.firstBaseUpdate,s!==null){do{var st={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};rt===null?tt=rt=st:rt=rt.next=st,s=s.next}while(s!==null);rt===null?tt=rt=o:rt=rt.next=o}else tt=rt=o;s={baseState:$.baseState,firstBaseUpdate:tt,lastBaseUpdate:rt,shared:$.shared,effects:$.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=o:i.next=o,s.lastBaseUpdate=o}function gh(i,o,s,$){var tt=i.updateQueue;$g=!1;var rt=tt.firstBaseUpdate,st=tt.lastBaseUpdate,_=tt.shared.pending;if(_!==null){tt.shared.pending=null;var ut=_,mt=ut.next;ut.next=null,st===null?rt=mt:st.next=mt,st=ut;var vt=i.alternate;vt!==null&&(vt=vt.updateQueue,_=vt.lastBaseUpdate,_!==st&&(_===null?vt.firstBaseUpdate=mt:_.next=mt,vt.lastBaseUpdate=ut))}if(rt!==null){var wt=tt.baseState;st=0,vt=mt=ut=null,_=rt;do{var bt=_.lane,Mt=_.eventTime;if(($&bt)===bt){vt!==null&&(vt=vt.next={eventTime:Mt,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var At=i,Lt=_;switch(bt=o,Mt=s,Lt.tag){case 1:if(At=Lt.payload,typeof At=="function"){wt=At.call(Mt,wt,bt);break e}wt=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Lt.payload,bt=typeof At=="function"?At.call(Mt,wt,bt):At,bt==null)break e;wt=A$2({},wt,bt);break e;case 2:$g=!0}}_.callback!==null&&_.lane!==0&&(i.flags|=64,bt=tt.effects,bt===null?tt.effects=[_]:bt.push(_))}else Mt={eventTime:Mt,lane:bt,tag:_.tag,payload:_.payload,callback:_.callback,next:null},vt===null?(mt=vt=Mt,ut=wt):vt=vt.next=Mt,st|=bt;if(_=_.next,_===null){if(_=tt.shared.pending,_===null)break;bt=_,_=bt.next,bt.next=null,tt.lastBaseUpdate=bt,tt.shared.pending=null}}while(1);if(vt===null&&(ut=wt),tt.baseState=ut,tt.firstBaseUpdate=mt,tt.lastBaseUpdate=vt,o=tt.shared.interleaved,o!==null){tt=o;do st|=tt.lane,tt=tt.next;while(tt!==o)}else rt===null&&(tt.shared.lanes=0);hh|=st,i.lanes=st,i.memoizedState=wt}}function ih(i,o,s){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var $=i[o],tt=$.callback;if(tt!==null){if($.callback=null,$=s,typeof tt!="function")throw Error(p$2(191,tt));tt.call($)}}}var jh=new aa.Component().refs;function kh(i,o,s,$){o=i.memoizedState,s=s($,o),s=s==null?o:A$2({},o,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,o,s){i=i._reactInternals;var $=L(),tt=lh(i),rt=ch($,tt);rt.payload=o,s!=null&&(rt.callback=s),o=dh(i,rt,tt),o!==null&&(mh(o,i,tt,$),eh(o,i,tt))},enqueueReplaceState:function(i,o,s){i=i._reactInternals;var $=L(),tt=lh(i),rt=ch($,tt);rt.tag=1,rt.payload=o,s!=null&&(rt.callback=s),o=dh(i,rt,tt),o!==null&&(mh(o,i,tt,$),eh(o,i,tt))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var s=L(),$=lh(i),tt=ch(s,$);tt.tag=2,o!=null&&(tt.callback=o),o=dh(i,tt,$),o!==null&&(mh(o,i,$,s),eh(o,i,$))}};function oh(i,o,s,$,tt,rt,st){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate($,rt,st):o.prototype&&o.prototype.isPureReactComponent?!Ie(s,$)||!Ie(tt,rt):!0}function ph(i,o,s){var $=!1,tt=Vf,rt=o.contextType;return typeof rt=="object"&&rt!==null?rt=Vg(rt):(tt=Zf(o)?Xf:H$2.current,$=o.contextTypes,rt=($=$!=null)?Yf(i,tt):Vf),o=new o(s,rt),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,i.stateNode=o,o._reactInternals=i,$&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=tt,i.__reactInternalMemoizedMaskedChildContext=rt),o}function qh(i,o,s,$){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,$),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,$),o.state!==i&&nh.enqueueReplaceState(o,o.state,null)}function rh(i,o,s,$){var tt=i.stateNode;tt.props=s,tt.state=i.memoizedState,tt.refs=jh,ah(i);var rt=o.contextType;typeof rt=="object"&&rt!==null?tt.context=Vg(rt):(rt=Zf(o)?Xf:H$2.current,tt.context=Yf(i,rt)),tt.state=i.memoizedState,rt=o.getDerivedStateFromProps,typeof rt=="function"&&(kh(i,o,rt,s),tt.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof tt.getSnapshotBeforeUpdate=="function"||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(o=tt.state,typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount(),o!==tt.state&&nh.enqueueReplaceState(tt,tt.state,null),gh(i,s,tt,$),tt.state=i.memoizedState),typeof tt.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,o,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$2(309));var $=s.stateNode}if(!$)throw Error(p$2(147,i));var tt=$,rt=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===rt?o.ref:(o=function(st){var _=tt.refs;_===jh&&(_=tt.refs={}),st===null?delete _[rt]:_[rt]=st},o._stringRef=rt,o)}if(typeof i!="string")throw Error(p$2(284));if(!s._owner)throw Error(p$2(290,i))}return i}function th(i,o){throw i=Object.prototype.toString.call(o),Error(p$2(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function uh(i){var o=i._init;return o(i._payload)}function vh(i){function o(Tt,Ct){if(i){var St=Tt.deletions;St===null?(Tt.deletions=[Ct],Tt.flags|=16):St.push(Ct)}}function s(Tt,Ct){if(!i)return null;for(;Ct!==null;)o(Tt,Ct),Ct=Ct.sibling;return null}function $(Tt,Ct){for(Tt=new Map;Ct!==null;)Ct.key!==null?Tt.set(Ct.key,Ct):Tt.set(Ct.index,Ct),Ct=Ct.sibling;return Tt}function tt(Tt,Ct){return Tt=wh(Tt,Ct),Tt.index=0,Tt.sibling=null,Tt}function rt(Tt,Ct,St){return Tt.index=St,i?(St=Tt.alternate,St!==null?(St=St.index,St<Ct?(Tt.flags|=2,Ct):St):(Tt.flags|=2,Ct)):(Tt.flags|=1048576,Ct)}function st(Tt){return i&&Tt.alternate===null&&(Tt.flags|=2),Tt}function _(Tt,Ct,St,It){return Ct===null||Ct.tag!==6?(Ct=xh(St,Tt.mode,It),Ct.return=Tt,Ct):(Ct=tt(Ct,St),Ct.return=Tt,Ct)}function ut(Tt,Ct,St,It){var Bt=St.type;return Bt===ya?vt(Tt,Ct,St.props.children,It,St.key):Ct!==null&&(Ct.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Ha&&uh(Bt)===Ct.type)?(It=tt(Ct,St.props),It.ref=sh(Tt,Ct,St),It.return=Tt,It):(It=yh(St.type,St.key,St.props,null,Tt.mode,It),It.ref=sh(Tt,Ct,St),It.return=Tt,It)}function mt(Tt,Ct,St,It){return Ct===null||Ct.tag!==4||Ct.stateNode.containerInfo!==St.containerInfo||Ct.stateNode.implementation!==St.implementation?(Ct=zh(St,Tt.mode,It),Ct.return=Tt,Ct):(Ct=tt(Ct,St.children||[]),Ct.return=Tt,Ct)}function vt(Tt,Ct,St,It,Bt){return Ct===null||Ct.tag!==7?(Ct=Ah(St,Tt.mode,It,Bt),Ct.return=Tt,Ct):(Ct=tt(Ct,St),Ct.return=Tt,Ct)}function wt(Tt,Ct,St){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Ct=xh(""+Ct,Tt.mode,St),Ct.return=Tt,Ct;if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va:return St=yh(Ct.type,Ct.key,Ct.props,null,Tt.mode,St),St.ref=sh(Tt,null,Ct),St.return=Tt,St;case wa:return Ct=zh(Ct,Tt.mode,St),Ct.return=Tt,Ct;case Ha:var It=Ct._init;return wt(Tt,It(Ct._payload),St)}if(eb(Ct)||Ka(Ct))return Ct=Ah(Ct,Tt.mode,St,null),Ct.return=Tt,Ct;th(Tt,Ct)}return null}function bt(Tt,Ct,St,It){var Bt=Ct!==null?Ct.key:null;if(typeof St=="string"&&St!==""||typeof St=="number")return Bt!==null?null:_(Tt,Ct,""+St,It);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return St.key===Bt?ut(Tt,Ct,St,It):null;case wa:return St.key===Bt?mt(Tt,Ct,St,It):null;case Ha:return Bt=St._init,bt(Tt,Ct,Bt(St._payload),It)}if(eb(St)||Ka(St))return Bt!==null?null:vt(Tt,Ct,St,It,null);th(Tt,St)}return null}function Mt(Tt,Ct,St,It,Bt){if(typeof It=="string"&&It!==""||typeof It=="number")return Tt=Tt.get(St)||null,_(Ct,Tt,""+It,Bt);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case va:return Tt=Tt.get(It.key===null?St:It.key)||null,ut(Ct,Tt,It,Bt);case wa:return Tt=Tt.get(It.key===null?St:It.key)||null,mt(Ct,Tt,It,Bt);case Ha:var Ft=It._init;return Mt(Tt,Ct,St,Ft(It._payload),Bt)}if(eb(It)||Ka(It))return Tt=Tt.get(St)||null,vt(Ct,Tt,It,Bt,null);th(Ct,It)}return null}function At(Tt,Ct,St,It){for(var Bt=null,Ft=null,Gt=Ct,Xt=Ct=0,ir=null;Gt!==null&&Xt<St.length;Xt++){Gt.index>Xt?(ir=Gt,Gt=null):ir=Gt.sibling;var $r=bt(Tt,Gt,St[Xt],It);if($r===null){Gt===null&&(Gt=ir);break}i&&Gt&&$r.alternate===null&&o(Tt,Gt),Ct=rt($r,Ct,Xt),Ft===null?Bt=$r:Ft.sibling=$r,Ft=$r,Gt=ir}if(Xt===St.length)return s(Tt,Gt),I&&tg(Tt,Xt),Bt;if(Gt===null){for(;Xt<St.length;Xt++)Gt=wt(Tt,St[Xt],It),Gt!==null&&(Ct=rt(Gt,Ct,Xt),Ft===null?Bt=Gt:Ft.sibling=Gt,Ft=Gt);return I&&tg(Tt,Xt),Bt}for(Gt=$(Tt,Gt);Xt<St.length;Xt++)ir=Mt(Gt,Tt,Xt,St[Xt],It),ir!==null&&(i&&ir.alternate!==null&&Gt.delete(ir.key===null?Xt:ir.key),Ct=rt(ir,Ct,Xt),Ft===null?Bt=ir:Ft.sibling=ir,Ft=ir);return i&&Gt.forEach(function(Tr){return o(Tt,Tr)}),I&&tg(Tt,Xt),Bt}function Lt(Tt,Ct,St,It){var Bt=Ka(St);if(typeof Bt!="function")throw Error(p$2(150));if(St=Bt.call(St),St==null)throw Error(p$2(151));for(var Ft=Bt=null,Gt=Ct,Xt=Ct=0,ir=null,$r=St.next();Gt!==null&&!$r.done;Xt++,$r=St.next()){Gt.index>Xt?(ir=Gt,Gt=null):ir=Gt.sibling;var Tr=bt(Tt,Gt,$r.value,It);if(Tr===null){Gt===null&&(Gt=ir);break}i&&Gt&&Tr.alternate===null&&o(Tt,Gt),Ct=rt(Tr,Ct,Xt),Ft===null?Bt=Tr:Ft.sibling=Tr,Ft=Tr,Gt=ir}if($r.done)return s(Tt,Gt),I&&tg(Tt,Xt),Bt;if(Gt===null){for(;!$r.done;Xt++,$r=St.next())$r=wt(Tt,$r.value,It),$r!==null&&(Ct=rt($r,Ct,Xt),Ft===null?Bt=$r:Ft.sibling=$r,Ft=$r);return I&&tg(Tt,Xt),Bt}for(Gt=$(Tt,Gt);!$r.done;Xt++,$r=St.next())$r=Mt(Gt,Tt,Xt,$r.value,It),$r!==null&&(i&&$r.alternate!==null&&Gt.delete($r.key===null?Xt:$r.key),Ct=rt($r,Ct,Xt),Ft===null?Bt=$r:Ft.sibling=$r,Ft=$r);return i&&Gt.forEach(function(xr){return o(Tt,xr)}),I&&tg(Tt,Xt),Bt}function Ht(Tt,Ct,St,It){if(typeof St=="object"&&St!==null&&St.type===ya&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case va:e:{for(var Bt=St.key,Ft=Ct;Ft!==null;){if(Ft.key===Bt){if(Bt=St.type,Bt===ya){if(Ft.tag===7){s(Tt,Ft.sibling),Ct=tt(Ft,St.props.children),Ct.return=Tt,Tt=Ct;break e}}else if(Ft.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Ha&&uh(Bt)===Ft.type){s(Tt,Ft.sibling),Ct=tt(Ft,St.props),Ct.ref=sh(Tt,Ft,St),Ct.return=Tt,Tt=Ct;break e}s(Tt,Ft);break}else o(Tt,Ft);Ft=Ft.sibling}St.type===ya?(Ct=Ah(St.props.children,Tt.mode,It,St.key),Ct.return=Tt,Tt=Ct):(It=yh(St.type,St.key,St.props,null,Tt.mode,It),It.ref=sh(Tt,Ct,St),It.return=Tt,Tt=It)}return st(Tt);case wa:e:{for(Ft=St.key;Ct!==null;){if(Ct.key===Ft)if(Ct.tag===4&&Ct.stateNode.containerInfo===St.containerInfo&&Ct.stateNode.implementation===St.implementation){s(Tt,Ct.sibling),Ct=tt(Ct,St.children||[]),Ct.return=Tt,Tt=Ct;break e}else{s(Tt,Ct);break}else o(Tt,Ct);Ct=Ct.sibling}Ct=zh(St,Tt.mode,It),Ct.return=Tt,Tt=Ct}return st(Tt);case Ha:return Ft=St._init,Ht(Tt,Ct,Ft(St._payload),It)}if(eb(St))return At(Tt,Ct,St,It);if(Ka(St))return Lt(Tt,Ct,St,It);th(Tt,St)}return typeof St=="string"&&St!==""||typeof St=="number"?(St=""+St,Ct!==null&&Ct.tag===6?(s(Tt,Ct.sibling),Ct=tt(Ct,St),Ct.return=Tt,Tt=Ct):(s(Tt,Ct),Ct=xh(St,Tt.mode,It),Ct.return=Tt,Tt=Ct),st(Tt)):s(Tt,Ct)}return Ht}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p$2(174));return i}function Ih(i,o){switch(G(Gh,o),G(Fh,i),G(Eh,Dh),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=lb(o,i)}E(Eh),G(Eh,o)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(i){Hh(Gh.current);var o=Hh(Eh.current),s=lb(o,i.type);o!==s&&(G(Fh,i),G(Eh,s))}function Lh(i){Fh.current===i&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(i){for(var o=i;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$2(321))}function Wh(i,o){if(o===null)return!1;for(var s=0;s<o.length&&s<i.length;s++)if(!He(i[s],o[s]))return!1;return!0}function Xh(i,o,s,$,tt,rt){if(Rh=rt,N=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=s($,tt),Th){rt=0;do{if(Th=!1,Uh=0,25<=rt)throw Error(p$2(301));rt+=1,P=O=null,o.updateQueue=null,Ph.current=$h,i=s($,tt)}while(Th)}if(Ph.current=ai,o=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,o)throw Error(p$2(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=i:P=P.next=i,P}function di(){if(O===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O.next;var o=P===null?N.memoizedState:P.next;if(o!==null)P=o,O=i;else{if(i===null)throw Error(p$2(310));O=i,i={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=i:P=P.next=i}return P}function ei(i,o){return typeof o=="function"?o(i):o}function fi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$2(311));s.lastRenderedReducer=i;var $=O,tt=$.baseQueue,rt=s.pending;if(rt!==null){if(tt!==null){var st=tt.next;tt.next=rt.next,rt.next=st}$.baseQueue=tt=rt,s.pending=null}if(tt!==null){rt=tt.next,$=$.baseState;var _=st=null,ut=null,mt=rt;do{var vt=mt.lane;if((Rh&vt)===vt)ut!==null&&(ut=ut.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),$=mt.hasEagerState?mt.eagerState:i($,mt.action);else{var wt={lane:vt,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};ut===null?(_=ut=wt,st=$):ut=ut.next=wt,N.lanes|=vt,hh|=vt}mt=mt.next}while(mt!==null&&mt!==rt);ut===null?st=$:ut.next=_,He($,o.memoizedState)||(Ug=!0),o.memoizedState=$,o.baseState=st,o.baseQueue=ut,s.lastRenderedState=$}if(i=s.interleaved,i!==null){tt=i;do rt=tt.lane,N.lanes|=rt,hh|=rt,tt=tt.next;while(tt!==i)}else tt===null&&(s.lanes=0);return[o.memoizedState,s.dispatch]}function gi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$2(311));s.lastRenderedReducer=i;var $=s.dispatch,tt=s.pending,rt=o.memoizedState;if(tt!==null){s.pending=null;var st=tt=tt.next;do rt=i(rt,st.action),st=st.next;while(st!==tt);He(rt,o.memoizedState)||(Ug=!0),o.memoizedState=rt,o.baseQueue===null&&(o.baseState=rt),s.lastRenderedState=rt}return[rt,$]}function hi(){}function ii(i,o){var s=N,$=di(),tt=o(),rt=!He($.memoizedState,tt);if(rt&&($.memoizedState=tt,Ug=!0),$=$.queue,ji(ki.bind(null,s,$,i),[i]),$.getSnapshot!==o||rt||P!==null&&P.memoizedState.tag&1){if(s.flags|=2048,li(9,mi.bind(null,s,$,tt,o),void 0,null),R$1===null)throw Error(p$2(349));Rh&30||ni(s,o,tt)}return tt}function ni(i,o,s){i.flags|=16384,i={getSnapshot:o,value:s},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.stores=[i]):(s=o.stores,s===null?o.stores=[i]:s.push(i))}function mi(i,o,s,$){o.value=s,o.getSnapshot=$,oi(o)&&pi(i)}function ki(i,o,s){return s(function(){oi(o)&&pi(i)})}function oi(i){var o=i.getSnapshot;i=i.value;try{var s=o();return!He(i,s)}catch($){return!0}}function pi(i){var o=Zg(i,1);o!==null&&mh(o,i,1,-1)}function qi(i){var o=ci();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},o.queue=i,i=i.dispatch=ri.bind(null,N,i),[o.memoizedState,i]}function li(i,o,s,$){return i={tag:i,create:o,destroy:s,deps:$,next:null},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.lastEffect=i.next=i):(s=o.lastEffect,s===null?o.lastEffect=i.next=i:($=s.next,s.next=i,i.next=$,o.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,o,s,$){var tt=ci();N.flags|=i,tt.memoizedState=li(1|o,s,void 0,$===void 0?null:$)}function ui(i,o,s,$){var tt=di();$=$===void 0?null:$;var rt=void 0;if(O!==null){var st=O.memoizedState;if(rt=st.destroy,$!==null&&Wh($,st.deps)){tt.memoizedState=li(o,s,rt,$);return}}N.flags|=i,tt.memoizedState=li(1|o,s,rt,$)}function vi(i,o){return ti(8390656,8,i,o)}function ji(i,o){return ui(2048,8,i,o)}function wi(i,o){return ui(4,2,i,o)}function xi(i,o){return ui(4,4,i,o)}function yi(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function zi(i,o,s){return s=s!=null?s.concat([i]):null,ui(4,4,yi.bind(null,o,i),s)}function Ai(){}function Bi(i,o){var s=di();o=o===void 0?null:o;var $=s.memoizedState;return $!==null&&o!==null&&Wh(o,$[1])?$[0]:(s.memoizedState=[i,o],i)}function Ci(i,o){var s=di();o=o===void 0?null:o;var $=s.memoizedState;return $!==null&&o!==null&&Wh(o,$[1])?$[0]:(i=i(),s.memoizedState=[i,o],i)}function Di(i,o,s){return Rh&21?(He(s,o)||(s=yc(),N.lanes|=s,hh|=s,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=s)}function Ei(i,o){var s=C;C=s!==0&&4>s?s:4,i(!0);var $=Qh.transition;Qh.transition={};try{i(!1),o()}finally{C=s,Qh.transition=$}}function Fi(){return di().memoizedState}function Gi(i,o,s){var $=lh(i);if(s={lane:$,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(o,s);else if(s=Yg(i,o,s,$),s!==null){var tt=L();mh(s,i,$,tt),Ji(s,o,$)}}function ri(i,o,s){var $=lh(i),tt={lane:$,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(o,tt);else{var rt=i.alternate;if(i.lanes===0&&(rt===null||rt.lanes===0)&&(rt=o.lastRenderedReducer,rt!==null))try{var st=o.lastRenderedState,_=rt(st,s);if(tt.hasEagerState=!0,tt.eagerState=_,He(_,st)){var ut=o.interleaved;ut===null?(tt.next=tt,Xg(o)):(tt.next=ut.next,ut.next=tt),o.interleaved=tt;return}}catch(mt){}finally{}s=Yg(i,o,tt,$),s!==null&&(tt=L(),mh(s,i,$,tt),Ji(s,o,$))}}function Hi(i){var o=i.alternate;return i===N||o!==null&&o===N}function Ii(i,o){Th=Sh=!0;var s=i.pending;s===null?o.next=o:(o.next=s.next,s.next=o),i.pending=o}function Ji(i,o,s){if(s&4194240){var $=o.lanes;$&=i.pendingLanes,s|=$,o.lanes=s,Cc(i,s)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,o){return ci().memoizedState=[i,o===void 0?null:o],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,o,s){return s=s!=null?s.concat([i]):null,ti(4194308,4,yi.bind(null,o,i),s)},useLayoutEffect:function(i,o){return ti(4194308,4,i,o)},useInsertionEffect:function(i,o){return ti(4,2,i,o)},useMemo:function(i,o){var s=ci();return o=o===void 0?null:o,i=i(),s.memoizedState=[i,o],i},useReducer:function(i,o,s){var $=ci();return o=s!==void 0?s(o):o,$.memoizedState=$.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},$.queue=i,i=i.dispatch=Gi.bind(null,N,i),[$.memoizedState,i]},useRef:function(i){var o=ci();return i={current:i},o.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),o=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,s){var $=N,tt=ci();if(I){if(s===void 0)throw Error(p$2(407));s=s()}else{if(s=o(),R$1===null)throw Error(p$2(349));Rh&30||ni($,o,s)}tt.memoizedState=s;var rt={value:s,getSnapshot:o};return tt.queue=rt,vi(ki.bind(null,$,rt,i),[i]),$.flags|=2048,li(9,mi.bind(null,$,rt,s,o),void 0,null),s},useId:function(){var i=ci(),o=R$1.identifierPrefix;if(I){var s=sg,$=rg;s=($&~(1<<32-oc($)-1)).toString(32)+s,o=":"+o+"R"+s,s=Uh++,0<s&&(o+="H"+s.toString(32)),o+=":"}else s=Vh++,o=":"+o+"r"+s.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return Di(o,O.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return O===null?o.memoizedState=i:Di(o,O.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,o){try{var s="",$=o;do s+=Pa($),$=$.return;while($);var tt=s}catch(rt){tt=`
Error generating stack: `+rt.message+`
`+rt.stack}return{value:i,source:o,stack:tt,digest:null}}function Li(i,o,s){return{value:i,source:null,stack:s!=null?s:null,digest:o!=null?o:null}}function Mi(i,o){try{console.error(o.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,o,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var $=o.value;return s.callback=function(){Pi||(Pi=!0,Qi=$),Mi(i,o)},s}function Ri(i,o,s){s=ch(-1,s),s.tag=3;var $=i.type.getDerivedStateFromError;if(typeof $=="function"){var tt=o.value;s.payload=function(){return $(tt)},s.callback=function(){Mi(i,o)}}var rt=i.stateNode;return rt!==null&&typeof rt.componentDidCatch=="function"&&(s.callback=function(){Mi(i,o),typeof $!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var st=o.stack;this.componentDidCatch(o.value,{componentStack:st!==null?st:""})}),s}function Ti(i,o,s){var $=i.pingCache;if($===null){$=i.pingCache=new Ni;var tt=new Set;$.set(o,tt)}else tt=$.get(o),tt===void 0&&(tt=new Set,$.set(o,tt));tt.has(s)||(tt.add(s),i=Ui.bind(null,i,o,s),o.then(i,i))}function Vi(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Wi(i,o,s,$,tt){return i.mode&1?(i.flags|=65536,i.lanes=tt,i):(i===o?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(o=ch(-1,1),o.tag=2,dh(s,o,1))),s.lanes|=1),i)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(i,o,s,$){o.child=i===null?Ch(o,null,s,$):Bh(o,i.child,s,$)}function Zi(i,o,s,$,tt){s=s.render;var rt=o.ref;return Tg(o,tt),$=Xh(i,o,s,$,rt,tt),s=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~tt,$i(i,o,tt)):(I&&s&&vg(o),o.flags|=1,Yi(i,o,$,tt),o.child)}function aj(i,o,s,$,tt){if(i===null){var rt=s.type;return typeof rt=="function"&&!bj(rt)&&rt.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(o.tag=15,o.type=rt,cj(i,o,rt,$,tt)):(i=yh(s.type,null,$,o,o.mode,tt),i.ref=o.ref,i.return=o,o.child=i)}if(rt=i.child,!(i.lanes&tt)){var st=rt.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(st,$)&&i.ref===o.ref)return $i(i,o,tt)}return o.flags|=1,i=wh(rt,$),i.ref=o.ref,i.return=o,o.child=i}function cj(i,o,s,$,tt){if(i!==null){var rt=i.memoizedProps;if(Ie(rt,$)&&i.ref===o.ref)if(Ug=!1,o.pendingProps=$=rt,(i.lanes&tt)!==0)i.flags&131072&&(Ug=!0);else return o.lanes=i.lanes,$i(i,o,tt)}return dj(i,o,s,$,tt)}function ej(i,o,s){var $=o.pendingProps,tt=$.children,rt=i!==null?i.memoizedState:null;if($.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=s;else{if(!(s&1073741824))return i=rt!==null?rt.baseLanes|s:s,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,G(fj,gj),gj|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},$=rt!==null?rt.baseLanes:s,G(fj,gj),gj|=$}else rt!==null?($=rt.baseLanes|s,o.memoizedState=null):$=s,G(fj,gj),gj|=$;return Yi(i,o,tt,s),o.child}function hj(i,o){var s=o.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(o.flags|=512,o.flags|=2097152)}function dj(i,o,s,$,tt){var rt=Zf(s)?Xf:H$2.current;return rt=Yf(o,rt),Tg(o,tt),s=Xh(i,o,s,$,rt,tt),$=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~tt,$i(i,o,tt)):(I&&$&&vg(o),o.flags|=1,Yi(i,o,s,tt),o.child)}function ij(i,o,s,$,tt){if(Zf(s)){var rt=!0;cg(o)}else rt=!1;if(Tg(o,tt),o.stateNode===null)jj(i,o),ph(o,s,$),rh(o,s,$,tt),$=!0;else if(i===null){var st=o.stateNode,_=o.memoizedProps;st.props=_;var ut=st.context,mt=s.contextType;typeof mt=="object"&&mt!==null?mt=Vg(mt):(mt=Zf(s)?Xf:H$2.current,mt=Yf(o,mt));var vt=s.getDerivedStateFromProps,wt=typeof vt=="function"||typeof st.getSnapshotBeforeUpdate=="function";wt||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(_!==$||ut!==mt)&&qh(o,st,$,mt),$g=!1;var bt=o.memoizedState;st.state=bt,gh(o,$,st,tt),ut=o.memoizedState,_!==$||bt!==ut||Wf.current||$g?(typeof vt=="function"&&(kh(o,s,vt,$),ut=o.memoizedState),(_=$g||oh(o,s,_,$,bt,ut,mt))?(wt||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(o.flags|=4194308)):(typeof st.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=$,o.memoizedState=ut),st.props=$,st.state=ut,st.context=mt,$=_):(typeof st.componentDidMount=="function"&&(o.flags|=4194308),$=!1)}else{st=o.stateNode,bh(i,o),_=o.memoizedProps,mt=o.type===o.elementType?_:Lg(o.type,_),st.props=mt,wt=o.pendingProps,bt=st.context,ut=s.contextType,typeof ut=="object"&&ut!==null?ut=Vg(ut):(ut=Zf(s)?Xf:H$2.current,ut=Yf(o,ut));var Mt=s.getDerivedStateFromProps;(vt=typeof Mt=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(_!==wt||bt!==ut)&&qh(o,st,$,ut),$g=!1,bt=o.memoizedState,st.state=bt,gh(o,$,st,tt);var At=o.memoizedState;_!==wt||bt!==At||Wf.current||$g?(typeof Mt=="function"&&(kh(o,s,Mt,$),At=o.memoizedState),(mt=$g||oh(o,s,mt,$,bt,At,ut)||!1)?(vt||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate($,At,ut),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate($,At,ut)),typeof st.componentDidUpdate=="function"&&(o.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof st.componentDidUpdate!="function"||_===i.memoizedProps&&bt===i.memoizedState||(o.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&bt===i.memoizedState||(o.flags|=1024),o.memoizedProps=$,o.memoizedState=At),st.props=$,st.state=At,st.context=ut,$=mt):(typeof st.componentDidUpdate!="function"||_===i.memoizedProps&&bt===i.memoizedState||(o.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&bt===i.memoizedState||(o.flags|=1024),$=!1)}return kj(i,o,s,$,rt,tt)}function kj(i,o,s,$,tt,rt){hj(i,o);var st=(o.flags&128)!==0;if(!$&&!st)return tt&&dg(o,s,!1),$i(i,o,rt);$=o.stateNode,Xi.current=o;var _=st&&typeof s.getDerivedStateFromError!="function"?null:$.render();return o.flags|=1,i!==null&&st?(o.child=Bh(o,i.child,null,rt),o.child=Bh(o,null,_,rt)):Yi(i,o,_,rt),o.memoizedState=$.state,tt&&dg(o,s,!0),o.child}function lj(i){var o=i.stateNode;o.pendingContext?ag(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(i,o.context,!1),Ih(i,o.containerInfo)}function mj(i,o,s,$,tt){return Ig(),Jg(tt),o.flags|=256,Yi(i,o,s,$),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,o,s){var $=o.pendingProps,tt=M.current,rt=!1,st=(o.flags&128)!==0,_;if((_=st)||(_=i!==null&&i.memoizedState===null?!1:(tt&2)!==0),_?(rt=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(tt|=1),G(M,tt&1),i===null)return Eg(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(st=$.children,i=$.fallback,rt?($=o.mode,rt=o.child,st={mode:"hidden",children:st},!($&1)&&rt!==null?(rt.childLanes=0,rt.pendingProps=st):rt=qj(st,$,0,null),i=Ah(i,$,s,null),rt.return=o,i.return=o,rt.sibling=i,o.child=rt,o.child.memoizedState=oj(s),o.memoizedState=nj,i):rj(o,st));if(tt=i.memoizedState,tt!==null&&(_=tt.dehydrated,_!==null))return sj(i,o,st,$,_,tt,s);if(rt){rt=$.fallback,st=o.mode,tt=i.child,_=tt.sibling;var ut={mode:"hidden",children:$.children};return!(st&1)&&o.child!==tt?($=o.child,$.childLanes=0,$.pendingProps=ut,o.deletions=null):($=wh(tt,ut),$.subtreeFlags=tt.subtreeFlags&14680064),_!==null?rt=wh(_,rt):(rt=Ah(rt,st,s,null),rt.flags|=2),rt.return=o,$.return=o,$.sibling=rt,o.child=$,$=rt,rt=o.child,st=i.child.memoizedState,st=st===null?oj(s):{baseLanes:st.baseLanes|s,cachePool:null,transitions:st.transitions},rt.memoizedState=st,rt.childLanes=i.childLanes&~s,o.memoizedState=nj,$}return rt=i.child,i=rt.sibling,$=wh(rt,{mode:"visible",children:$.children}),!(o.mode&1)&&($.lanes=s),$.return=o,$.sibling=null,i!==null&&(s=o.deletions,s===null?(o.deletions=[i],o.flags|=16):s.push(i)),o.child=$,o.memoizedState=null,$}function rj(i,o){return o=qj({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function tj(i,o,s,$){return $!==null&&Jg($),Bh(o,i.child,null,s),i=rj(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function sj(i,o,s,$,tt,rt,st){if(s)return o.flags&256?(o.flags&=-257,$=Li(Error(p$2(422))),tj(i,o,st,$)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(rt=$.fallback,tt=o.mode,$=qj({mode:"visible",children:$.children},tt,0,null),rt=Ah(rt,tt,st,null),rt.flags|=2,$.return=o,rt.return=o,$.sibling=rt,o.child=$,o.mode&1&&Bh(o,i.child,null,st),o.child.memoizedState=oj(st),o.memoizedState=nj,rt);if(!(o.mode&1))return tj(i,o,st,null);if(tt.data==="$!"){if($=tt.nextSibling&&tt.nextSibling.dataset,$)var _=$.dgst;return $=_,rt=Error(p$2(419)),$=Li(rt,$,void 0),tj(i,o,st,$)}if(_=(st&i.childLanes)!==0,Ug||_){if($=R$1,$!==null){switch(st&-st){case 4:tt=2;break;case 16:tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tt=32;break;case 536870912:tt=268435456;break;default:tt=0}tt=tt&($.suspendedLanes|st)?0:tt,tt!==0&&tt!==rt.retryLane&&(rt.retryLane=tt,Zg(i,tt),mh($,i,tt,-1))}return uj(),$=Li(Error(p$2(421))),tj(i,o,st,$)}return tt.data==="$?"?(o.flags|=128,o.child=i.child,o=vj.bind(null,i),tt._reactRetry=o,null):(i=rt.treeContext,yg=Lf(tt.nextSibling),xg=o,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=o),o=rj(o,$.children),o.flags|=4096,o)}function wj(i,o,s){i.lanes|=o;var $=i.alternate;$!==null&&($.lanes|=o),Sg(i.return,o,s)}function xj(i,o,s,$,tt){var rt=i.memoizedState;rt===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:$,tail:s,tailMode:tt}:(rt.isBackwards=o,rt.rendering=null,rt.renderingStartTime=0,rt.last=$,rt.tail=s,rt.tailMode=tt)}function yj(i,o,s){var $=o.pendingProps,tt=$.revealOrder,rt=$.tail;if(Yi(i,o,$.children,s),$=M.current,$&2)$=$&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,s,o);else if(i.tag===19)wj(i,s,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}$&=1}if(G(M,$),!(o.mode&1))o.memoizedState=null;else switch(tt){case"forwards":for(s=o.child,tt=null;s!==null;)i=s.alternate,i!==null&&Mh(i)===null&&(tt=s),s=s.sibling;s=tt,s===null?(tt=o.child,o.child=null):(tt=s.sibling,s.sibling=null),xj(o,!1,tt,s,rt);break;case"backwards":for(s=null,tt=o.child,o.child=null;tt!==null;){if(i=tt.alternate,i!==null&&Mh(i)===null){o.child=tt;break}i=tt.sibling,tt.sibling=s,s=tt,tt=i}xj(o,!0,s,null,rt);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function $i(i,o,s){if(i!==null&&(o.dependencies=i.dependencies),hh|=o.lanes,!(s&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(p$2(153));if(o.child!==null){for(i=o.child,s=wh(i,i.pendingProps),o.child=s,s.return=o;i.sibling!==null;)i=i.sibling,s=s.sibling=wh(i,i.pendingProps),s.return=o;s.sibling=null}return o.child}function zj(i,o,s){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var $=o.type._context,tt=o.memoizedProps.value;G(Mg,$._currentValue),$._currentValue=tt;break;case 13:if($=o.memoizedState,$!==null)return $.dehydrated!==null?(G(M,M.current&1),o.flags|=128,null):s&o.child.childLanes?pj(i,o,s):(G(M,M.current&1),i=$i(i,o,s),i!==null?i.sibling:null);G(M,M.current&1);break;case 19:if($=(s&o.childLanes)!==0,i.flags&128){if($)return yj(i,o,s);o.flags|=128}if(tt=o.memoizedState,tt!==null&&(tt.rendering=null,tt.tail=null,tt.lastEffect=null),G(M,M.current),$)break;return null;case 22:case 23:return o.lanes=0,ej(i,o,s)}return $i(i,o,s)}var Aj,Bj,Cj,Dj;Aj=function(i,o){for(var s=o.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(i,o,s,$){var tt=i.memoizedProps;if(tt!==$){i=o.stateNode,Hh(Eh.current);var rt=null;switch(s){case"input":tt=Ya(i,tt),$=Ya(i,$),rt=[];break;case"select":tt=A$2({},tt,{value:void 0}),$=A$2({},$,{value:void 0}),rt=[];break;case"textarea":tt=gb(i,tt),$=gb(i,$),rt=[];break;default:typeof tt.onClick!="function"&&typeof $.onClick=="function"&&(i.onclick=Bf)}ub(s,$);var st;s=null;for(mt in tt)if(!$.hasOwnProperty(mt)&&tt.hasOwnProperty(mt)&&tt[mt]!=null)if(mt==="style"){var _=tt[mt];for(st in _)_.hasOwnProperty(st)&&(s||(s={}),s[st]="")}else mt!=="dangerouslySetInnerHTML"&&mt!=="children"&&mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&mt!=="autoFocus"&&(ea.hasOwnProperty(mt)?rt||(rt=[]):(rt=rt||[]).push(mt,null));for(mt in $){var ut=$[mt];if(_=tt!=null?tt[mt]:void 0,$.hasOwnProperty(mt)&&ut!==_&&(ut!=null||_!=null))if(mt==="style")if(_){for(st in _)!_.hasOwnProperty(st)||ut&&ut.hasOwnProperty(st)||(s||(s={}),s[st]="");for(st in ut)ut.hasOwnProperty(st)&&_[st]!==ut[st]&&(s||(s={}),s[st]=ut[st])}else s||(rt||(rt=[]),rt.push(mt,s)),s=ut;else mt==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,_=_?_.__html:void 0,ut!=null&&_!==ut&&(rt=rt||[]).push(mt,ut)):mt==="children"?typeof ut!="string"&&typeof ut!="number"||(rt=rt||[]).push(mt,""+ut):mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(mt)?(ut!=null&&mt==="onScroll"&&D("scroll",i),rt||_===ut||(rt=[])):(rt=rt||[]).push(mt,ut))}s&&(rt=rt||[]).push("style",s);var mt=rt;(o.updateQueue=mt)&&(o.flags|=4)}};Dj=function(i,o,s,$){s!==$&&(o.flags|=4)};function Ej(i,o){if(!I)switch(i.tailMode){case"hidden":o=i.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var $=null;s!==null;)s.alternate!==null&&($=s),s=s.sibling;$===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:$.sibling=null}}function S(i){var o=i.alternate!==null&&i.alternate.child===i.child,s=0,$=0;if(o)for(var tt=i.child;tt!==null;)s|=tt.lanes|tt.childLanes,$|=tt.subtreeFlags&14680064,$|=tt.flags&14680064,tt.return=i,tt=tt.sibling;else for(tt=i.child;tt!==null;)s|=tt.lanes|tt.childLanes,$|=tt.subtreeFlags,$|=tt.flags,tt.return=i,tt=tt.sibling;return i.subtreeFlags|=$,i.childLanes=s,o}function Fj(i,o,s){var $=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(o),null;case 1:return Zf(o.type)&&$f(),S(o),null;case 3:return $=o.stateNode,Jh(),E(Wf),E(H$2),Oh(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(i===null||i.child===null)&&(Gg(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,o),S(o),null;case 5:Lh(o);var tt=Hh(Gh.current);if(s=o.type,i!==null&&o.stateNode!=null)Cj(i,o,s,$,tt),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!$){if(o.stateNode===null)throw Error(p$2(166));return S(o),null}if(i=Hh(Eh.current),Gg(o)){$=o.stateNode,s=o.type;var rt=o.memoizedProps;switch($[Of]=o,$[Pf]=rt,i=(o.mode&1)!==0,s){case"dialog":D("cancel",$),D("close",$);break;case"iframe":case"object":case"embed":D("load",$);break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D(lf[tt],$);break;case"source":D("error",$);break;case"img":case"image":case"link":D("error",$),D("load",$);break;case"details":D("toggle",$);break;case"input":Za($,rt),D("invalid",$);break;case"select":$._wrapperState={wasMultiple:!!rt.multiple},D("invalid",$);break;case"textarea":hb($,rt),D("invalid",$)}ub(s,rt),tt=null;for(var st in rt)if(rt.hasOwnProperty(st)){var _=rt[st];st==="children"?typeof _=="string"?$.textContent!==_&&(rt.suppressHydrationWarning!==!0&&Af($.textContent,_,i),tt=["children",_]):typeof _=="number"&&$.textContent!==""+_&&(rt.suppressHydrationWarning!==!0&&Af($.textContent,_,i),tt=["children",""+_]):ea.hasOwnProperty(st)&&_!=null&&st==="onScroll"&&D("scroll",$)}switch(s){case"input":Va($),db($,rt,!0);break;case"textarea":Va($),jb($);break;case"select":case"option":break;default:typeof rt.onClick=="function"&&($.onclick=Bf)}$=tt,o.updateQueue=$,$!==null&&(o.flags|=4)}else{st=tt.nodeType===9?tt:tt.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=st.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof $.is=="string"?i=st.createElement(s,{is:$.is}):(i=st.createElement(s),s==="select"&&(st=i,$.multiple?st.multiple=!0:$.size&&(st.size=$.size))):i=st.createElementNS(i,s),i[Of]=o,i[Pf]=$,Aj(i,o,!1,!1),o.stateNode=i;e:{switch(st=vb(s,$),s){case"dialog":D("cancel",i),D("close",i),tt=$;break;case"iframe":case"object":case"embed":D("load",i),tt=$;break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D(lf[tt],i);tt=$;break;case"source":D("error",i),tt=$;break;case"img":case"image":case"link":D("error",i),D("load",i),tt=$;break;case"details":D("toggle",i),tt=$;break;case"input":Za(i,$),tt=Ya(i,$),D("invalid",i);break;case"option":tt=$;break;case"select":i._wrapperState={wasMultiple:!!$.multiple},tt=A$2({},$,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,$),tt=gb(i,$),D("invalid",i);break;default:tt=$}ub(s,tt),_=tt;for(rt in _)if(_.hasOwnProperty(rt)){var ut=_[rt];rt==="style"?sb(i,ut):rt==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,ut!=null&&nb(i,ut)):rt==="children"?typeof ut=="string"?(s!=="textarea"||ut!=="")&&ob(i,ut):typeof ut=="number"&&ob(i,""+ut):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?ut!=null&&rt==="onScroll"&&D("scroll",i):ut!=null&&ta(i,rt,ut,st))}switch(s){case"input":Va(i),db(i,$,!1);break;case"textarea":Va(i),jb(i);break;case"option":$.value!=null&&i.setAttribute("value",""+Sa($.value));break;case"select":i.multiple=!!$.multiple,rt=$.value,rt!=null?fb(i,!!$.multiple,rt,!1):$.defaultValue!=null&&fb(i,!!$.multiple,$.defaultValue,!0);break;default:typeof tt.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":$=!!$.autoFocus;break e;case"img":$=!0;break e;default:$=!1}}$&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S(o),null;case 6:if(i&&o.stateNode!=null)Dj(i,o,i.memoizedProps,$);else{if(typeof $!="string"&&o.stateNode===null)throw Error(p$2(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(o)){if($=o.stateNode,s=o.memoizedProps,$[Of]=o,(rt=$.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af($.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af($.nodeValue,s,(i.mode&1)!==0)}rt&&(o.flags|=4)}else $=(s.nodeType===9?s:s.ownerDocument).createTextNode($),$[Of]=o,o.stateNode=$}return S(o),null;case 13:if(E(M),$=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,rt=!1;else if(rt=Gg(o),$!==null&&$.dehydrated!==null){if(i===null){if(!rt)throw Error(p$2(318));if(rt=o.memoizedState,rt=rt!==null?rt.dehydrated:null,!rt)throw Error(p$2(317));rt[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S(o),rt=!1}else zg!==null&&(Gj(zg),zg=null),rt=!0;if(!rt)return o.flags&65536?o:null}return o.flags&128?(o.lanes=s,o):($=$!==null,$!==(i!==null&&i.memoizedState!==null)&&$&&(o.child.flags|=8192,o.mode&1&&(i===null||M.current&1?T===0&&(T=3):uj())),o.updateQueue!==null&&(o.flags|=4),S(o),null);case 4:return Jh(),Bj(i,o),i===null&&sf(o.stateNode.containerInfo),S(o),null;case 10:return Rg(o.type._context),S(o),null;case 17:return Zf(o.type)&&$f(),S(o),null;case 19:if(E(M),rt=o.memoizedState,rt===null)return S(o),null;if($=(o.flags&128)!==0,st=rt.rendering,st===null)if($)Ej(rt,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(st=Mh(i),st!==null){for(o.flags|=128,Ej(rt,!1),$=st.updateQueue,$!==null&&(o.updateQueue=$,o.flags|=4),o.subtreeFlags=0,$=s,s=o.child;s!==null;)rt=s,i=$,rt.flags&=14680066,st=rt.alternate,st===null?(rt.childLanes=0,rt.lanes=i,rt.child=null,rt.subtreeFlags=0,rt.memoizedProps=null,rt.memoizedState=null,rt.updateQueue=null,rt.dependencies=null,rt.stateNode=null):(rt.childLanes=st.childLanes,rt.lanes=st.lanes,rt.child=st.child,rt.subtreeFlags=0,rt.deletions=null,rt.memoizedProps=st.memoizedProps,rt.memoizedState=st.memoizedState,rt.updateQueue=st.updateQueue,rt.type=st.type,i=st.dependencies,rt.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(M,M.current&1|2),o.child}i=i.sibling}rt.tail!==null&&B()>Hj&&(o.flags|=128,$=!0,Ej(rt,!1),o.lanes=4194304)}else{if(!$)if(i=Mh(st),i!==null){if(o.flags|=128,$=!0,s=i.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),Ej(rt,!0),rt.tail===null&&rt.tailMode==="hidden"&&!st.alternate&&!I)return S(o),null}else 2*B()-rt.renderingStartTime>Hj&&s!==1073741824&&(o.flags|=128,$=!0,Ej(rt,!1),o.lanes=4194304);rt.isBackwards?(st.sibling=o.child,o.child=st):(s=rt.last,s!==null?s.sibling=st:o.child=st,rt.last=st)}return rt.tail!==null?(o=rt.tail,rt.rendering=o,rt.tail=o.sibling,rt.renderingStartTime=B(),o.sibling=null,s=M.current,G(M,$?s&1|2:s&1),o):(S(o),null);case 22:case 23:return Ij(),$=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==$&&(o.flags|=8192),$&&o.mode&1?gj&1073741824&&(S(o),o.subtreeFlags&6&&(o.flags|=8192)):S(o),null;case 24:return null;case 25:return null}throw Error(p$2(156,o.tag))}function Jj(i,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Jh(),E(Wf),E(H$2),Oh(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E(M),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(p$2(340));Ig()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,o){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch($){W(i,o,$)}else s.current=null}function Nj(i,o,s){try{s()}catch($){W(i,o,$)}}var Oj=!1;function Pj(i,o){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var $=s.getSelection&&s.getSelection();if($&&$.rangeCount!==0){s=$.anchorNode;var tt=$.anchorOffset,rt=$.focusNode;$=$.focusOffset;try{s.nodeType,rt.nodeType}catch(It){s=null;break e}var st=0,_=-1,ut=-1,mt=0,vt=0,wt=i,bt=null;t:for(;;){for(var Mt;wt!==s||tt!==0&&wt.nodeType!==3||(_=st+tt),wt!==rt||$!==0&&wt.nodeType!==3||(ut=st+$),wt.nodeType===3&&(st+=wt.nodeValue.length),(Mt=wt.firstChild)!==null;)bt=wt,wt=Mt;for(;;){if(wt===i)break t;if(bt===s&&++mt===tt&&(_=st),bt===rt&&++vt===$&&(ut=st),(Mt=wt.nextSibling)!==null)break;wt=bt,bt=wt.parentNode}wt=Mt}s=_===-1||ut===-1?null:{start:_,end:ut}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=o;V!==null;)if(o=V,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,V=i;else for(;V!==null;){o=V;try{var At=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(At!==null){var Lt=At.memoizedProps,Ht=At.memoizedState,Tt=o.stateNode,Ct=Tt.getSnapshotBeforeUpdate(o.elementType===o.type?Lt:Lg(o.type,Lt),Ht);Tt.__reactInternalSnapshotBeforeUpdate=Ct}break;case 3:var St=o.stateNode.containerInfo;St.nodeType===1?St.textContent="":St.nodeType===9&&St.documentElement&&St.removeChild(St.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(It){W(o,o.return,It)}if(i=o.sibling,i!==null){i.return=o.return,V=i;break}V=o.return}return At=Oj,Oj=!1,At}function Qj(i,o,s){var $=o.updateQueue;if($=$!==null?$.lastEffect:null,$!==null){var tt=$=$.next;do{if((tt.tag&i)===i){var rt=tt.destroy;tt.destroy=void 0,rt!==void 0&&Nj(o,s,rt)}tt=tt.next}while(tt!==$)}}function Rj(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&i)===i){var $=s.create;s.destroy=$()}s=s.next}while(s!==o)}}function Sj(i){var o=i.ref;if(o!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof o=="function"?o(i):o.current=i}}function Tj(i){var o=i.alternate;o!==null&&(i.alternate=null,Tj(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,o,s){var $=i.tag;if($===5||$===6)i=i.stateNode,o?s.nodeType===8?s.parentNode.insertBefore(i,o):s.insertBefore(i,o):(s.nodeType===8?(o=s.parentNode,o.insertBefore(i,s)):(o=s,o.appendChild(i)),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=Bf));else if($!==4&&(i=i.child,i!==null))for(Wj(i,o,s),i=i.sibling;i!==null;)Wj(i,o,s),i=i.sibling}function Xj(i,o,s){var $=i.tag;if($===5||$===6)i=i.stateNode,o?s.insertBefore(i,o):s.appendChild(i);else if($!==4&&(i=i.child,i!==null))for(Xj(i,o,s),i=i.sibling;i!==null;)Xj(i,o,s),i=i.sibling}var X=null,Yj=!1;function Zj(i,o,s){for(s=s.child;s!==null;)ak(i,o,s),s=s.sibling}function ak(i,o,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch(_){}switch(s.tag){case 5:U||Mj(s,o);case 6:var $=X,tt=Yj;X=null,Zj(i,o,s),X=$,Yj=tt,X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X,s.stateNode));break;case 4:$=X,tt=Yj,X=s.stateNode.containerInfo,Yj=!0,Zj(i,o,s),X=$,Yj=tt;break;case 0:case 11:case 14:case 15:if(!U&&($=s.updateQueue,$!==null&&($=$.lastEffect,$!==null))){tt=$=$.next;do{var rt=tt,st=rt.destroy;rt=rt.tag,st!==void 0&&(rt&2||rt&4)&&Nj(s,o,st),tt=tt.next}while(tt!==$)}Zj(i,o,s);break;case 1:if(!U&&(Mj(s,o),$=s.stateNode,typeof $.componentWillUnmount=="function"))try{$.props=s.memoizedProps,$.state=s.memoizedState,$.componentWillUnmount()}catch(_){W(s,o,_)}Zj(i,o,s);break;case 21:Zj(i,o,s);break;case 22:s.mode&1?(U=($=U)||s.memoizedState!==null,Zj(i,o,s),U=$):Zj(i,o,s);break;default:Zj(i,o,s)}}function bk(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Lj),o.forEach(function($){var tt=ck.bind(null,i,$);s.has($)||(s.add($),$.then(tt,tt))})}}function dk(i,o){var s=o.deletions;if(s!==null)for(var $=0;$<s.length;$++){var tt=s[$];try{var rt=i,st=o,_=st;e:for(;_!==null;){switch(_.tag){case 5:X=_.stateNode,Yj=!1;break e;case 3:X=_.stateNode.containerInfo,Yj=!0;break e;case 4:X=_.stateNode.containerInfo,Yj=!0;break e}_=_.return}if(X===null)throw Error(p$2(160));ak(rt,st,tt),X=null,Yj=!1;var ut=tt.alternate;ut!==null&&(ut.return=null),tt.return=null}catch(mt){W(tt,o,mt)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,i),o=o.sibling}function ek(i,o){var s=i.alternate,$=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(o,i),fk(i),$&4){try{Qj(3,i,i.return),Rj(3,i)}catch(Lt){W(i,i.return,Lt)}try{Qj(5,i,i.return)}catch(Lt){W(i,i.return,Lt)}}break;case 1:dk(o,i),fk(i),$&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(o,i),fk(i),$&512&&s!==null&&Mj(s,s.return),i.flags&32){var tt=i.stateNode;try{ob(tt,"")}catch(Lt){W(i,i.return,Lt)}}if($&4&&(tt=i.stateNode,tt!=null)){var rt=i.memoizedProps,st=s!==null?s.memoizedProps:rt,_=i.type,ut=i.updateQueue;if(i.updateQueue=null,ut!==null)try{_==="input"&&rt.type==="radio"&&rt.name!=null&&ab(tt,rt),vb(_,st);var mt=vb(_,rt);for(st=0;st<ut.length;st+=2){var vt=ut[st],wt=ut[st+1];vt==="style"?sb(tt,wt):vt==="dangerouslySetInnerHTML"?nb(tt,wt):vt==="children"?ob(tt,wt):ta(tt,vt,wt,mt)}switch(_){case"input":bb(tt,rt);break;case"textarea":ib(tt,rt);break;case"select":var bt=tt._wrapperState.wasMultiple;tt._wrapperState.wasMultiple=!!rt.multiple;var Mt=rt.value;Mt!=null?fb(tt,!!rt.multiple,Mt,!1):bt!==!!rt.multiple&&(rt.defaultValue!=null?fb(tt,!!rt.multiple,rt.defaultValue,!0):fb(tt,!!rt.multiple,rt.multiple?[]:"",!1))}tt[Pf]=rt}catch(Lt){W(i,i.return,Lt)}}break;case 6:if(dk(o,i),fk(i),$&4){if(i.stateNode===null)throw Error(p$2(162));tt=i.stateNode,rt=i.memoizedProps;try{tt.nodeValue=rt}catch(Lt){W(i,i.return,Lt)}}break;case 3:if(dk(o,i),fk(i),$&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(Lt){W(i,i.return,Lt)}break;case 4:dk(o,i),fk(i);break;case 13:dk(o,i),fk(i),tt=i.child,tt.flags&8192&&(rt=tt.memoizedState!==null,tt.stateNode.isHidden=rt,!rt||tt.alternate!==null&&tt.alternate.memoizedState!==null||(gk=B())),$&4&&bk(i);break;case 22:if(vt=s!==null&&s.memoizedState!==null,i.mode&1?(U=(mt=U)||vt,dk(o,i),U=mt):dk(o,i),fk(i),$&8192){if(mt=i.memoizedState!==null,(i.stateNode.isHidden=mt)&&!vt&&i.mode&1)for(V=i,vt=i.child;vt!==null;){for(wt=V=vt;V!==null;){switch(bt=V,Mt=bt.child,bt.tag){case 0:case 11:case 14:case 15:Qj(4,bt,bt.return);break;case 1:Mj(bt,bt.return);var At=bt.stateNode;if(typeof At.componentWillUnmount=="function"){$=bt,s=bt.return;try{o=$,At.props=o.memoizedProps,At.state=o.memoizedState,At.componentWillUnmount()}catch(Lt){W($,s,Lt)}}break;case 5:Mj(bt,bt.return);break;case 22:if(bt.memoizedState!==null){hk(wt);continue}}Mt!==null?(Mt.return=bt,V=Mt):hk(wt)}vt=vt.sibling}e:for(vt=null,wt=i;;){if(wt.tag===5){if(vt===null){vt=wt;try{tt=wt.stateNode,mt?(rt=tt.style,typeof rt.setProperty=="function"?rt.setProperty("display","none","important"):rt.display="none"):(_=wt.stateNode,ut=wt.memoizedProps.style,st=ut!=null&&ut.hasOwnProperty("display")?ut.display:null,_.style.display=rb("display",st))}catch(Lt){W(i,i.return,Lt)}}}else if(wt.tag===6){if(vt===null)try{wt.stateNode.nodeValue=mt?"":wt.memoizedProps}catch(Lt){W(i,i.return,Lt)}}else if((wt.tag!==22&&wt.tag!==23||wt.memoizedState===null||wt===i)&&wt.child!==null){wt.child.return=wt,wt=wt.child;continue}if(wt===i)break e;for(;wt.sibling===null;){if(wt.return===null||wt.return===i)break e;vt===wt&&(vt=null),wt=wt.return}vt===wt&&(vt=null),wt.sibling.return=wt.return,wt=wt.sibling}}break;case 19:dk(o,i),fk(i),$&4&&bk(i);break;case 21:break;default:dk(o,i),fk(i)}}function fk(i){var o=i.flags;if(o&2){try{e:{for(var s=i.return;s!==null;){if(Uj(s)){var $=s;break e}s=s.return}throw Error(p$2(160))}switch($.tag){case 5:var tt=$.stateNode;$.flags&32&&(ob(tt,""),$.flags&=-33);var rt=Vj(i);Xj(i,rt,tt);break;case 3:case 4:var st=$.stateNode.containerInfo,_=Vj(i);Wj(i,_,st);break;default:throw Error(p$2(161))}}catch(ut){W(i,i.return,ut)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ik(i,o,s){V=i,jk(i)}function jk(i,o,s){for(var $=(i.mode&1)!==0;V!==null;){var tt=V,rt=tt.child;if(tt.tag===22&&$){var st=tt.memoizedState!==null||Kj;if(!st){var _=tt.alternate,ut=_!==null&&_.memoizedState!==null||U;_=Kj;var mt=U;if(Kj=st,(U=ut)&&!mt)for(V=tt;V!==null;)st=V,ut=st.child,st.tag===22&&st.memoizedState!==null?kk(tt):ut!==null?(ut.return=st,V=ut):kk(tt);for(;rt!==null;)V=rt,jk(rt),rt=rt.sibling;V=tt,Kj=_,U=mt}lk(i)}else tt.subtreeFlags&8772&&rt!==null?(rt.return=tt,V=rt):lk(i)}}function lk(i){for(;V!==null;){var o=V;if(o.flags&8772){var s=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U||Rj(5,o);break;case 1:var $=o.stateNode;if(o.flags&4&&!U)if(s===null)$.componentDidMount();else{var tt=o.elementType===o.type?s.memoizedProps:Lg(o.type,s.memoizedProps);$.componentDidUpdate(tt,s.memoizedState,$.__reactInternalSnapshotBeforeUpdate)}var rt=o.updateQueue;rt!==null&&ih(o,rt,$);break;case 3:var st=o.updateQueue;if(st!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}ih(o,st,s)}break;case 5:var _=o.stateNode;if(s===null&&o.flags&4){s=_;var ut=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ut.autoFocus&&s.focus();break;case"img":ut.src&&(s.src=ut.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var mt=o.alternate;if(mt!==null){var vt=mt.memoizedState;if(vt!==null){var wt=vt.dehydrated;wt!==null&&bd(wt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||o.flags&512&&Sj(o)}catch(bt){W(o,o.return,bt)}}if(o===i){V=null;break}if(s=o.sibling,s!==null){s.return=o.return,V=s;break}V=o.return}}function hk(i){for(;V!==null;){var o=V;if(o===i){V=null;break}var s=o.sibling;if(s!==null){s.return=o.return,V=s;break}V=o.return}}function kk(i){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var s=o.return;try{Rj(4,o)}catch(ut){W(o,s,ut)}break;case 1:var $=o.stateNode;if(typeof $.componentDidMount=="function"){var tt=o.return;try{$.componentDidMount()}catch(ut){W(o,tt,ut)}}var rt=o.return;try{Sj(o)}catch(ut){W(o,rt,ut)}break;case 5:var st=o.return;try{Sj(o)}catch(ut){W(o,st,ut)}}}catch(ut){W(o,o.return,ut)}if(o===i){V=null;break}var _=o.sibling;if(_!==null){_.return=o.return,V=_;break}V=o.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R$1=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,o,s,$){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(i,s,$),(!(K&2)||i!==R$1)&&(i===R$1&&(!(K&2)&&(rk|=s),T===4&&Dk(i,Z)),Ek(i,$),s===1&&K===0&&!(o.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(i,o){var s=i.callbackNode;wc(i,o);var $=uc(i,i===R$1?Z:0);if($===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(o=$&-$,i.callbackPriority!==o){if(s!=null&&bc(s),o===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc($)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Gk(s,Hk.bind(null,i))}i.callbackPriority=o,i.callbackNode=s}}function Hk(i,o){if(Bk=-1,Ck=0,K&6)throw Error(p$2(327));var s=i.callbackNode;if(Ik()&&i.callbackNode!==s)return null;var $=uc(i,i===R$1?Z:0);if($===0)return null;if($&30||$&i.expiredLanes||o)o=Jk(i,$);else{o=$;var tt=K;K|=2;var rt=Kk();(R$1!==i||Z!==o)&&(vk=null,Hj=B()+500,Lk(i,o));do try{Mk();break}catch(_){Nk(i,_)}while(1);Qg(),nk.current=rt,K=tt,Y!==null?o=0:(R$1=null,Z=0,o=T)}if(o!==0){if(o===2&&(tt=xc(i),tt!==0&&($=tt,o=Ok(i,tt))),o===1)throw s=qk,Lk(i,0),Dk(i,$),Ek(i,B()),s;if(o===6)Dk(i,$);else{if(tt=i.current.alternate,!($&30)&&!Pk(tt)&&(o=Jk(i,$),o===2&&(rt=xc(i),rt!==0&&($=rt,o=Ok(i,rt))),o===1))throw s=qk,Lk(i,0),Dk(i,$),Ek(i,B()),s;switch(i.finishedWork=tt,i.finishedLanes=$,o){case 0:case 1:throw Error(p$2(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,$),($&130023424)===$&&(o=gk+500-B(),10<o)){if(uc(i,0)!==0)break;if(tt=i.suspendedLanes,(tt&$)!==$){L(),i.pingedLanes|=i.suspendedLanes&tt;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),o);break}Qk(i,uk,vk);break;case 4:if(Dk(i,$),($&4194240)===$)break;for(o=i.eventTimes,tt=-1;0<$;){var st=31-oc($);rt=1<<st,st=o[st],st>tt&&(tt=st),$&=~rt}if($=tt,$=B()-$,$=(120>$?120:480>$?480:1080>$?1080:1920>$?1920:3e3>$?3e3:4320>$?4320:1960*mk($/1960))-$,10<$){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),$);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(i,B()),i.callbackNode===s?Hk.bind(null,i):null}function Ok(i,o){var s=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,o).flags|=256),i=Jk(i,o),i!==2&&(o=uk,uk=s,o!==null&&Gj(o)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var o=i;;){if(o.flags&16384){var s=o.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var $=0;$<s.length;$++){var tt=s[$],rt=tt.getSnapshot;tt=tt.value;try{if(!He(rt(),tt))return!1}catch(st){return!1}}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(i,o){for(o&=~sk,o&=~rk,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var s=31-oc(o),$=1<<s;i[s]=-1,o&=~$}}function Fk(i){if(K&6)throw Error(p$2(327));Ik();var o=uc(i,0);if(!(o&1))return Ek(i,B()),null;var s=Jk(i,o);if(i.tag!==0&&s===2){var $=xc(i);$!==0&&(o=$,s=Ok(i,$))}if(s===1)throw s=qk,Lk(i,0),Dk(i,o),Ek(i,B()),s;if(s===6)throw Error(p$2(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Qk(i,uk,vk),Ek(i,B()),null}function Rk(i,o){var s=K;K|=1;try{return i(o)}finally{K=s,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var o=K;K|=1;var s=pk.transition,$=C;try{if(pk.transition=null,C=1,i)return i()}finally{C=$,pk.transition=s,K=o,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(i,o){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var $=s;switch(wg($),$.tag){case 1:$=$.type.childContextTypes,$!=null&&$f();break;case 3:Jh(),E(Wf),E(H$2),Oh();break;case 5:Lh($);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg($.type._context);break;case 22:case 23:Ij()}s=s.return}if(R$1=i,Y=i=wh(i.current,null),Z=gj=o,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(s=Wg[o],$=s.interleaved,$!==null){s.interleaved=null;var tt=$.next,rt=s.pending;if(rt!==null){var st=rt.next;rt.next=tt,$.next=st}s.pending=$}Wg=null}return i}function Nk(i,o){do{var s=Y;try{if(Qg(),Ph.current=ai,Sh){for(var $=N.memoizedState;$!==null;){var tt=$.queue;tt!==null&&(tt.pending=null),$=$.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T=1,qk=o,Y=null;break}e:{var rt=i,st=s.return,_=s,ut=o;if(o=Z,_.flags|=32768,ut!==null&&typeof ut=="object"&&typeof ut.then=="function"){var mt=ut,vt=_,wt=vt.tag;if(!(vt.mode&1)&&(wt===0||wt===11||wt===15)){var bt=vt.alternate;bt?(vt.updateQueue=bt.updateQueue,vt.memoizedState=bt.memoizedState,vt.lanes=bt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Mt=Vi(st);if(Mt!==null){Mt.flags&=-257,Wi(Mt,st,_,rt,o),Mt.mode&1&&Ti(rt,mt,o),o=Mt,ut=mt;var At=o.updateQueue;if(At===null){var Lt=new Set;Lt.add(ut),o.updateQueue=Lt}else At.add(ut);break e}else{if(!(o&1)){Ti(rt,mt,o),uj();break e}ut=Error(p$2(426))}}else if(I&&_.mode&1){var Ht=Vi(st);if(Ht!==null){!(Ht.flags&65536)&&(Ht.flags|=256),Wi(Ht,st,_,rt,o),Jg(Ki(ut,_));break e}}rt=ut=Ki(ut,_),T!==4&&(T=2),tk===null?tk=[rt]:tk.push(rt),rt=st;do{switch(rt.tag){case 3:rt.flags|=65536,o&=-o,rt.lanes|=o;var Tt=Oi(rt,ut,o);fh(rt,Tt);break e;case 1:_=ut;var Ct=rt.type,St=rt.stateNode;if(!(rt.flags&128)&&(typeof Ct.getDerivedStateFromError=="function"||St!==null&&typeof St.componentDidCatch=="function"&&(Si===null||!Si.has(St)))){rt.flags|=65536,o&=-o,rt.lanes|=o;var It=Ri(rt,_,o);fh(rt,It);break e}}rt=rt.return}while(rt!==null)}Tk(s)}catch(Bt){o=Bt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(1)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T===0||T===3||T===2)&&(T=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z)}function Jk(i,o){var s=K;K|=2;var $=Kk();(R$1!==i||Z!==o)&&(vk=null,Lk(i,o));do try{Uk();break}catch(tt){Nk(i,tt)}while(1);if(Qg(),K=s,nk.current=$,Y!==null)throw Error(p$2(261));return R$1=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(i){var o=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,o===null?Tk(i):Y=o,ok.current=null}function Tk(i){var o=i;do{var s=o.alternate;if(i=o.return,o.flags&32768){if(s=Jj(s,o),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(s=Fj(s,o,gj),s!==null){Y=s;return}if(o=o.sibling,o!==null){Y=o;return}Y=o=i}while(o!==null);T===0&&(T=5)}function Qk(i,o,s){var $=C,tt=pk.transition;try{pk.transition=null,C=1,Xk(i,o,s,$)}finally{pk.transition=tt,C=$}return null}function Xk(i,o,s,$){do Ik();while(xk!==null);if(K&6)throw Error(p$2(327));s=i.finishedWork;var tt=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p$2(177));i.callbackNode=null,i.callbackPriority=0;var rt=s.lanes|s.childLanes;if(Bc(i,rt),i===R$1&&(Y=R$1=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),rt=(s.flags&15990)!==0,s.subtreeFlags&15990||rt){rt=pk.transition,pk.transition=null;var st=C;C=1;var _=K;K|=4,ok.current=null,Pj(i,s),ek(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,ik(s),dc(),K=_,C=st,pk.transition=rt}else i.current=s;if(wk&&(wk=!1,xk=i,yk=tt),rt=i.pendingLanes,rt===0&&(Si=null),mc(s.stateNode),Ek(i,B()),o!==null)for($=i.onRecoverableError,s=0;s<o.length;s++)tt=o[s],$(tt.value,{componentStack:tt.stack,digest:tt.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),rt=i.pendingLanes,rt&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),o=pk.transition,s=C;try{if(pk.transition=null,C=16>i?16:i,xk===null)var $=!1;else{if(i=xk,xk=null,yk=0,K&6)throw Error(p$2(331));var tt=K;for(K|=4,V=i.current;V!==null;){var rt=V,st=rt.child;if(V.flags&16){var _=rt.deletions;if(_!==null){for(var ut=0;ut<_.length;ut++){var mt=_[ut];for(V=mt;V!==null;){var vt=V;switch(vt.tag){case 0:case 11:case 15:Qj(8,vt,rt)}var wt=vt.child;if(wt!==null)wt.return=vt,V=wt;else for(;V!==null;){vt=V;var bt=vt.sibling,Mt=vt.return;if(Tj(vt),vt===mt){V=null;break}if(bt!==null){bt.return=Mt,V=bt;break}V=Mt}}}var At=rt.alternate;if(At!==null){var Lt=At.child;if(Lt!==null){At.child=null;do{var Ht=Lt.sibling;Lt.sibling=null,Lt=Ht}while(Lt!==null)}}V=rt}}if(rt.subtreeFlags&2064&&st!==null)st.return=rt,V=st;else e:for(;V!==null;){if(rt=V,rt.flags&2048)switch(rt.tag){case 0:case 11:case 15:Qj(9,rt,rt.return)}var Tt=rt.sibling;if(Tt!==null){Tt.return=rt.return,V=Tt;break e}V=rt.return}}var Ct=i.current;for(V=Ct;V!==null;){st=V;var St=st.child;if(st.subtreeFlags&2064&&St!==null)St.return=st,V=St;else e:for(st=Ct;V!==null;){if(_=V,_.flags&2048)try{switch(_.tag){case 0:case 11:case 15:Rj(9,_)}}catch(Bt){W(_,_.return,Bt)}if(_===st){V=null;break e}var It=_.sibling;if(It!==null){It.return=_.return,V=It;break e}V=_.return}}if(K=tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch(Bt){}$=!0}return $}finally{C=s,pk.transition=o}}return!1}function Yk(i,o,s){o=Ki(s,o),o=Oi(i,o,1),i=dh(i,o,1),o=L(),i!==null&&(Ac(i,1,o),Ek(i,o))}function W(i,o,s){if(i.tag===3)Yk(i,i,s);else for(;o!==null;){if(o.tag===3){Yk(o,i,s);break}else if(o.tag===1){var $=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(Si===null||!Si.has($))){i=Ki(s,i),i=Ri(o,i,1),o=dh(o,i,1),i=L(),o!==null&&(Ac(o,1,i),Ek(o,i));break}}o=o.return}}function Ui(i,o,s){var $=i.pingCache;$!==null&&$.delete(o),o=L(),i.pingedLanes|=i.suspendedLanes&s,R$1===i&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(i,0):sk|=s),Ek(i,o)}function Zk(i,o){o===0&&(i.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var s=L();i=Zg(i,o),i!==null&&(Ac(i,o,s),Ek(i,s))}function vj(i){var o=i.memoizedState,s=0;o!==null&&(s=o.retryLane),Zk(i,s)}function ck(i,o){var s=0;switch(i.tag){case 13:var $=i.stateNode,tt=i.memoizedState;tt!==null&&(s=tt.retryLane);break;case 19:$=i.stateNode;break;default:throw Error(p$2(314))}$!==null&&$.delete(o),Zk(i,s)}var Wk;Wk=function(i,o,s){if(i!==null)if(i.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&s)&&!(o.flags&128))return Ug=!1,zj(i,o,s);Ug=!!(i.flags&131072)}else Ug=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var $=o.type;jj(i,o),i=o.pendingProps;var tt=Yf(o,H$2.current);Tg(o,s),tt=Xh(null,o,$,i,tt,s);var rt=bi();return o.flags|=1,typeof tt=="object"&&tt!==null&&typeof tt.render=="function"&&tt.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf($)?(rt=!0,cg(o)):rt=!1,o.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,ah(o),tt.updater=nh,o.stateNode=tt,tt._reactInternals=o,rh(o,$,i,s),o=kj(null,o,$,!0,rt,s)):(o.tag=0,I&&rt&&vg(o),Yi(null,o,tt,s),o=o.child),o;case 16:$=o.elementType;e:{switch(jj(i,o),i=o.pendingProps,tt=$._init,$=tt($._payload),o.type=$,tt=o.tag=$k($),i=Lg($,i),tt){case 0:o=dj(null,o,$,i,s);break e;case 1:o=ij(null,o,$,i,s);break e;case 11:o=Zi(null,o,$,i,s);break e;case 14:o=aj(null,o,$,Lg($.type,i),s);break e}throw Error(p$2(306,$,""))}return o;case 0:return $=o.type,tt=o.pendingProps,tt=o.elementType===$?tt:Lg($,tt),dj(i,o,$,tt,s);case 1:return $=o.type,tt=o.pendingProps,tt=o.elementType===$?tt:Lg($,tt),ij(i,o,$,tt,s);case 3:e:{if(lj(o),i===null)throw Error(p$2(387));$=o.pendingProps,rt=o.memoizedState,tt=rt.element,bh(i,o),gh(o,$,null,s);var st=o.memoizedState;if($=st.element,rt.isDehydrated)if(rt={element:$,isDehydrated:!1,cache:st.cache,pendingSuspenseBoundaries:st.pendingSuspenseBoundaries,transitions:st.transitions},o.updateQueue.baseState=rt,o.memoizedState=rt,o.flags&256){tt=Ki(Error(p$2(423)),o),o=mj(i,o,$,s,tt);break e}else if($!==tt){tt=Ki(Error(p$2(424)),o),o=mj(i,o,$,s,tt);break e}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,s=Ch(o,null,$,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),$===tt){o=$i(i,o,s);break e}Yi(i,o,$,s)}o=o.child}return o;case 5:return Kh(o),i===null&&Eg(o),$=o.type,tt=o.pendingProps,rt=i!==null?i.memoizedProps:null,st=tt.children,Ef($,tt)?st=null:rt!==null&&Ef($,rt)&&(o.flags|=32),hj(i,o),Yi(i,o,st,s),o.child;case 6:return i===null&&Eg(o),null;case 13:return pj(i,o,s);case 4:return Ih(o,o.stateNode.containerInfo),$=o.pendingProps,i===null?o.child=Bh(o,null,$,s):Yi(i,o,$,s),o.child;case 11:return $=o.type,tt=o.pendingProps,tt=o.elementType===$?tt:Lg($,tt),Zi(i,o,$,tt,s);case 7:return Yi(i,o,o.pendingProps,s),o.child;case 8:return Yi(i,o,o.pendingProps.children,s),o.child;case 12:return Yi(i,o,o.pendingProps.children,s),o.child;case 10:e:{if($=o.type._context,tt=o.pendingProps,rt=o.memoizedProps,st=tt.value,G(Mg,$._currentValue),$._currentValue=st,rt!==null)if(He(rt.value,st)){if(rt.children===tt.children&&!Wf.current){o=$i(i,o,s);break e}}else for(rt=o.child,rt!==null&&(rt.return=o);rt!==null;){var _=rt.dependencies;if(_!==null){st=rt.child;for(var ut=_.firstContext;ut!==null;){if(ut.context===$){if(rt.tag===1){ut=ch(-1,s&-s),ut.tag=2;var mt=rt.updateQueue;if(mt!==null){mt=mt.shared;var vt=mt.pending;vt===null?ut.next=ut:(ut.next=vt.next,vt.next=ut),mt.pending=ut}}rt.lanes|=s,ut=rt.alternate,ut!==null&&(ut.lanes|=s),Sg(rt.return,s,o),_.lanes|=s;break}ut=ut.next}}else if(rt.tag===10)st=rt.type===o.type?null:rt.child;else if(rt.tag===18){if(st=rt.return,st===null)throw Error(p$2(341));st.lanes|=s,_=st.alternate,_!==null&&(_.lanes|=s),Sg(st,s,o),st=rt.sibling}else st=rt.child;if(st!==null)st.return=rt;else for(st=rt;st!==null;){if(st===o){st=null;break}if(rt=st.sibling,rt!==null){rt.return=st.return,st=rt;break}st=st.return}rt=st}Yi(i,o,tt.children,s),o=o.child}return o;case 9:return tt=o.type,$=o.pendingProps.children,Tg(o,s),tt=Vg(tt),$=$(tt),o.flags|=1,Yi(i,o,$,s),o.child;case 14:return $=o.type,tt=Lg($,o.pendingProps),tt=Lg($.type,tt),aj(i,o,$,tt,s);case 15:return cj(i,o,o.type,o.pendingProps,s);case 17:return $=o.type,tt=o.pendingProps,tt=o.elementType===$?tt:Lg($,tt),jj(i,o),o.tag=1,Zf($)?(i=!0,cg(o)):i=!1,Tg(o,s),ph(o,$,tt),rh(o,$,tt,s),kj(null,o,$,!0,i,s);case 19:return yj(i,o,s);case 22:return ej(i,o,s)}throw Error(p$2(156,o.tag))};function Gk(i,o){return ac(i,o)}function al(i,o,s,$){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,o,s,$){return new al(i,o,s,$)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,o){var s=i.alternate;return s===null?(s=Bg(i.tag,o,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=o,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,o=i.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function yh(i,o,s,$,tt,rt){var st=2;if($=i,typeof i=="function")bj(i)&&(st=1);else if(typeof i=="string")st=5;else e:switch(i){case ya:return Ah(s.children,tt,rt,o);case za:st=8,tt|=8;break;case Aa:return i=Bg(12,s,o,tt|2),i.elementType=Aa,i.lanes=rt,i;case Ea:return i=Bg(13,s,o,tt),i.elementType=Ea,i.lanes=rt,i;case Fa:return i=Bg(19,s,o,tt),i.elementType=Fa,i.lanes=rt,i;case Ia:return qj(s,tt,rt,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:st=10;break e;case Ca:st=9;break e;case Da:st=11;break e;case Ga:st=14;break e;case Ha:st=16,$=null;break e}throw Error(p$2(130,i==null?i:typeof i,""))}return o=Bg(st,s,o,tt),o.elementType=i,o.type=$,o.lanes=rt,o}function Ah(i,o,s,$){return i=Bg(7,i,$,o),i.lanes=s,i}function qj(i,o,s,$){return i=Bg(22,i,$,o),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function xh(i,o,s){return i=Bg(6,i,null,o),i.lanes=s,i}function zh(i,o,s){return o=Bg(4,i.children!==null?i.children:[],i.key,o),o.lanes=s,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function bl(i,o,s,$,tt){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=$,this.onRecoverableError=tt,this.mutableSourceEagerHydrationData=null}function cl(i,o,s,$,tt,rt,st,_,ut){return i=new bl(i,o,s,_,ut),o===1?(o=1,rt===!0&&(o|=8)):o=0,rt=Bg(3,null,null,o),i.current=rt,rt.stateNode=i,rt.memoizedState={element:$,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(rt),i}function dl(i,o,s){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:$==null?null:""+$,children:i,containerInfo:o,implementation:s}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p$2(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p$2(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,o)}return o}function fl(i,o,s,$,tt,rt,st,_,ut){return i=cl(s,$,!0,i,tt,rt,st,_,ut),i.context=el(null),s=i.current,$=L(),tt=lh(s),rt=ch($,tt),rt.callback=o!=null?o:null,dh(s,rt,tt),i.current.lanes=tt,Ac(i,tt,$),Ek(i,$),i}function gl(i,o,s,$){var tt=o.current,rt=L(),st=lh(tt);return s=el(s),o.context===null?o.context=s:o.pendingContext=s,o=ch(rt,st),o.payload={element:i},$=$===void 0?null:$,$!==null&&(o.callback=$),i=dh(tt,o,st),i!==null&&(mh(i,tt,st,rt),eh(i,tt,st)),st}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<o?s:o}}function jl(i,o){il(i,o),(i=i.alternate)&&il(i,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(p$2(409));gl(i,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Sk(function(){gl(null,i,null,null)}),o[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var o=Hc();i={blockedOn:null,target:i,priority:o};for(var s=0;s<Qc.length&&o!==0&&o<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,o,s,$,tt){if(tt){if(typeof $=="function"){var rt=$;$=function(){var mt=hl(st);rt.call(mt)}}var st=fl(o,$,i,0,null,!1,!1,"",ql);return i._reactRootContainer=st,i[uf]=st.current,sf(i.nodeType===8?i.parentNode:i),Sk(),st}for(;tt=i.lastChild;)i.removeChild(tt);if(typeof $=="function"){var _=$;$=function(){var mt=hl(ut);_.call(mt)}}var ut=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=ut,i[uf]=ut.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(o,ut,s,$)}),ut}function sl(i,o,s,$,tt){var rt=s._reactRootContainer;if(rt){var st=rt;if(typeof tt=="function"){var _=tt;tt=function(){var ut=hl(st);_.call(ut)}}gl(o,st,i,tt)}else st=rl(s,o,i,tt,$);return hl(st)}Ec=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var s=tc(o.pendingLanes);s!==0&&(Cc(o,s|1),Ek(o,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var $=Zg(i,1);if($!==null){var tt=L();mh($,i,1,tt)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var o=Zg(i,134217728);if(o!==null){var s=L();mh(o,i,134217728,s)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var o=lh(i),s=Zg(i,o);if(s!==null){var $=L();mh(s,i,o,$)}jl(i,o)}};Hc=function(){return C};Ic=function(i,o){var s=C;try{return C=i,o()}finally{C=s}};yb=function(i,o,s){switch(o){case"input":if(bb(i,s),o=s.name,s.type==="radio"&&o!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<s.length;o++){var $=s[o];if($!==i&&$.form===i.form){var tt=Db($);if(!tt)throw Error(p$2(90));Wa($),bb($,tt)}}}break;case"textarea":ib(i,s);break;case"select":o=s.value,o!=null&&fb(i,!!s.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch(i){}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,o){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$2(200));return dl(i,o,null,s)};reactDom_production_min.createRoot=function(i,o){if(!ol(i))throw Error(p$2(299));var s=!1,$="",tt=ll;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&($=o.identifierPrefix),o.onRecoverableError!==void 0&&(tt=o.onRecoverableError)),o=cl(i,1,!1,null,null,s,!1,$,tt),i[uf]=o.current,sf(i.nodeType===8?i.parentNode:i),new ml(o)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(p$2(188)):(i=Object.keys(i).join(","),Error(p$2(268,i)));return i=Zb(o),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,o,s){if(!pl(o))throw Error(p$2(200));return sl(null,i,o,!0,s)};reactDom_production_min.hydrateRoot=function(i,o,s){if(!ol(i))throw Error(p$2(405));var $=s!=null&&s.hydratedSources||null,tt=!1,rt="",st=ll;if(s!=null&&(s.unstable_strictMode===!0&&(tt=!0),s.identifierPrefix!==void 0&&(rt=s.identifierPrefix),s.onRecoverableError!==void 0&&(st=s.onRecoverableError)),o=fl(o,null,i,1,s!=null?s:null,tt,!1,rt,st),i[uf]=o.current,sf(i),$)for(i=0;i<$.length;i++)s=$[i],tt=s._getVersion,tt=tt(s._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[s,tt]:o.mutableSourceEagerHydrationData.push(s,tt);return new nl(o)};reactDom_production_min.render=function(i,o,s){if(!pl(o))throw Error(p$2(200));return sl(null,i,o,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p$2(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,o,s,$){if(!pl(s))throw Error(p$2(200));if(i==null||i._reactInternals===void 0)throw Error(p$2(38));return sl(i,o,s,!1,$)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function(o,s,$){if(!s||s.length===0)return o();const tt=document.getElementsByTagName("link");return Promise.all(s.map(rt=>{if(rt=assetsURL(rt),rt in seen)return;seen[rt]=!0;const st=rt.endsWith(".css"),_=st?'[rel="stylesheet"]':"";if(!!$)for(let vt=tt.length-1;vt>=0;vt--){const wt=tt[vt];if(wt.href===rt&&(!st||wt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${rt}"]${_}`))return;const mt=document.createElement("link");if(mt.rel=st?"stylesheet":scriptRel,st||(mt.as="script",mt.crossOrigin=""),mt.href=rt,document.head.appendChild(mt),st)return new Promise((vt,wt)=>{mt.addEventListener("load",vt),mt.addEventListener("error",()=>wt(new Error(`Unable to preload CSS for ${rt}`)))})})).then(()=>o())},BUILD$1={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let scopeId$1,contentRef$1,hostTagName$1,useNativeShadowDom$1=!1,checkSlotFallbackVisibility$1=!1,checkSlotRelocate$1=!1,isSvgMode$1=!1,renderingRef$1=null,queuePending$1=!1;const Build={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},createTime$1=(i,o="")=>()=>{},XLINK_NS$1="http://www.w3.org/1999/xlink",EMPTY_OBJ$1={},SVG_NS$1="http://www.w3.org/2000/svg",HTML_NS$1="http://www.w3.org/1999/xhtml",isDef$1=i=>i!=null,isComplexType$1=i=>(i=typeof i,i==="object"||i==="function");function queryNonceMetaTagContent$1(i){var o,s,$;return($=(s=(o=i.head)===null||o===void 0?void 0:o.querySelector('meta[name="csp-nonce"]'))===null||s===void 0?void 0:s.getAttribute("content"))!==null&&$!==void 0?$:void 0}const h$3=(i,o,...s)=>{let $=null,tt=null,rt=null,st=!1,_=!1;const ut=[],mt=wt=>{for(let bt=0;bt<wt.length;bt++)$=wt[bt],Array.isArray($)?mt($):$!=null&&typeof $!="boolean"&&((st=typeof i!="function"&&!isComplexType$1($))&&($=String($)),st&&_?ut[ut.length-1].$text$+=$:ut.push(st?newVNode$1(null,$):$),_=st)};if(mt(s),o){o.key&&(tt=o.key),o.name&&(rt=o.name);{const wt=o.className||o.class;wt&&(o.class=typeof wt!="object"?wt:Object.keys(wt).filter(bt=>wt[bt]).join(" "))}}if(typeof i=="function")return i(o===null?{}:o,ut,vdomFnUtils$1);const vt=newVNode$1(i,null);return vt.$attrs$=o,ut.length>0&&(vt.$children$=ut),vt.$key$=tt,vt.$name$=rt,vt},newVNode$1=(i,o)=>{const s={$flags$:0,$tag$:i,$text$:o,$elm$:null,$children$:null};return s.$attrs$=null,s.$key$=null,s.$name$=null,s},Host$1={},isHost$1=i=>i&&i.$tag$===Host$1,vdomFnUtils$1={forEach:(i,o)=>i.map(convertToPublic$1).forEach(o),map:(i,o)=>i.map(convertToPublic$1).map(o).map(convertToPrivate$1)},convertToPublic$1=i=>({vattrs:i.$attrs$,vchildren:i.$children$,vkey:i.$key$,vname:i.$name$,vtag:i.$tag$,vtext:i.$text$}),convertToPrivate$1=i=>{if(typeof i.vtag=="function"){const s=Object.assign({},i.vattrs);return i.vkey&&(s.key=i.vkey),i.vname&&(s.name=i.vname),h$3(i.vtag,s,...i.vchildren||[])}const o=newVNode$1(i.vtag,i.vtext);return o.$attrs$=i.vattrs,o.$children$=i.vchildren,o.$key$=i.vkey,o.$name$=i.vname,o},computeMode$1=i=>modeResolutionChain$1.map(o=>o(i)).find(o=>!!o),setMode=i=>modeResolutionChain$1.push(i),getMode=i=>getHostRef$1(i).$modeName$,parsePropertyValue$1=(i,o)=>i!=null&&!isComplexType$1(i)?o&4?i==="false"?!1:i===""||!!i:o&2?parseFloat(i):o&1?String(i):i:i,getElement=i=>i,createEvent=(i,o,s)=>{const $=getElement(i);return{emit:tt=>emitEvent($,o,{bubbles:!!(s&4),composed:!!(s&2),cancelable:!!(s&1),detail:tt})}},emitEvent=(i,o,s)=>{const $=plt$1.ce(o,s);return i.dispatchEvent($),$},rootAppliedStyles$1=new WeakMap,registerStyle$1=(i,o,s)=>{let $=styles$1.get(i);supportsConstructableStylesheets$1&&s?($=$||new CSSStyleSheet,typeof $=="string"?$=o:$.replaceSync(o)):$=o,styles$1.set(i,$)},addStyle$1=(i,o,s,$)=>{var tt;let rt=getScopeId$1(o,s);const st=styles$1.get(rt);if(i=i.nodeType===11?i:doc$2,st)if(typeof st=="string"){i=i.head||i;let _=rootAppliedStyles$1.get(i),ut;if(_||rootAppliedStyles$1.set(i,_=new Set),!_.has(rt)){{ut=doc$2.createElement("style"),ut.innerHTML=st;const mt=(tt=plt$1.$nonce$)!==null&&tt!==void 0?tt:queryNonceMetaTagContent$1(doc$2);mt!=null&&ut.setAttribute("nonce",mt),i.insertBefore(ut,i.querySelector("link"))}_&&_.add(rt)}}else i.adoptedStyleSheets.includes(st)||(i.adoptedStyleSheets=[...i.adoptedStyleSheets,st]);return rt},attachStyles$1=i=>{const o=i.$cmpMeta$,s=i.$hostElement$,$=o.$flags$,tt=createTime$1("attachStyles",o.$tagName$),rt=addStyle$1(s.shadowRoot?s.shadowRoot:s.getRootNode(),o,i.$modeName$);$&10&&(s["s-sc"]=rt,s.classList.add(rt+"-h"),$&2&&s.classList.add(rt+"-s")),tt()},getScopeId$1=(i,o)=>"sc-"+(o&&i.$flags$&32?i.$tagName$+"-"+o:i.$tagName$),setAccessor$1=(i,o,s,$,tt,rt)=>{if(s!==$){let st=isMemberInElement$1(i,o),_=o.toLowerCase();if(o==="class"){const ut=i.classList,mt=parseClassList$1(s),vt=parseClassList$1($);ut.remove(...mt.filter(wt=>wt&&!vt.includes(wt))),ut.add(...vt.filter(wt=>wt&&!mt.includes(wt)))}else if(o==="style"){for(const ut in s)(!$||$[ut]==null)&&(ut.includes("-")?i.style.removeProperty(ut):i.style[ut]="");for(const ut in $)(!s||$[ut]!==s[ut])&&(ut.includes("-")?i.style.setProperty(ut,$[ut]):i.style[ut]=$[ut])}else if(o!=="key")if(o==="ref")$&&$(i);else if(!i.__lookupSetter__(o)&&o[0]==="o"&&o[1]==="n")o[2]==="-"?o=o.slice(3):isMemberInElement$1(win$3,_)?o=_.slice(2):o=_[2]+o.slice(3),s&&plt$1.rel(i,o,s,!1),$&&plt$1.ael(i,o,$,!1);else{const ut=isComplexType$1($);if((st||ut&&$!==null)&&!tt)try{if(i.tagName.includes("-"))i[o]=$;else{const vt=$==null?"":$;o==="list"?st=!1:(s==null||i[o]!=vt)&&(i[o]=vt)}}catch(vt){}let mt=!1;_!==(_=_.replace(/^xlink\:?/,""))&&(o=_,mt=!0),$==null||$===!1?($!==!1||i.getAttribute(o)==="")&&(mt?i.removeAttributeNS(XLINK_NS$1,o):i.removeAttribute(o)):(!st||rt&4||tt)&&!ut&&($=$===!0?"":$,mt?i.setAttributeNS(XLINK_NS$1,o,$):i.setAttribute(o,$))}}},parseClassListRegex$1=/\s/,parseClassList$1=i=>i?i.split(parseClassListRegex$1):[],updateElement$1=(i,o,s,$)=>{const tt=o.$elm$.nodeType===11&&o.$elm$.host?o.$elm$.host:o.$elm$,rt=i&&i.$attrs$||EMPTY_OBJ$1,st=o.$attrs$||EMPTY_OBJ$1;for($ in rt)$ in st||setAccessor$1(tt,$,rt[$],void 0,s,o.$flags$);for($ in st)setAccessor$1(tt,$,rt[$],st[$],s,o.$flags$)},createElm$1=(i,o,s,$)=>{const tt=o.$children$[s];let rt=0,st,_,ut;if(useNativeShadowDom$1||(checkSlotRelocate$1=!0,tt.$tag$==="slot"&&(scopeId$1&&$.classList.add(scopeId$1+"-s"),tt.$flags$|=tt.$children$?2:1)),tt.$text$!==null)st=tt.$elm$=doc$2.createTextNode(tt.$text$);else if(tt.$flags$&1)st=tt.$elm$=doc$2.createTextNode("");else{if(isSvgMode$1||(isSvgMode$1=tt.$tag$==="svg"),st=tt.$elm$=doc$2.createElementNS(isSvgMode$1?SVG_NS$1:HTML_NS$1,tt.$flags$&2?"slot-fb":tt.$tag$),isSvgMode$1&&tt.$tag$==="foreignObject"&&(isSvgMode$1=!1),updateElement$1(null,tt,isSvgMode$1),isDef$1(scopeId$1)&&st["s-si"]!==scopeId$1&&st.classList.add(st["s-si"]=scopeId$1),tt.$children$)for(rt=0;rt<tt.$children$.length;++rt)_=createElm$1(i,tt,rt,st),_&&st.appendChild(_);tt.$tag$==="svg"?isSvgMode$1=!1:st.tagName==="foreignObject"&&(isSvgMode$1=!0)}return st["s-hn"]=hostTagName$1,tt.$flags$&3&&(st["s-sr"]=!0,st["s-cr"]=contentRef$1,st["s-sn"]=tt.$name$||"",ut=i&&i.$children$&&i.$children$[s],ut&&ut.$tag$===tt.$tag$&&i.$elm$&&putBackInOriginalLocation$1(i.$elm$,!1)),st},putBackInOriginalLocation$1=(i,o)=>{plt$1.$flags$|=1;const s=i.childNodes;for(let $=s.length-1;$>=0;$--){const tt=s[$];tt["s-hn"]!==hostTagName$1&&tt["s-ol"]&&(parentReferenceNode$1(tt).insertBefore(tt,referenceNode$1(tt)),tt["s-ol"].remove(),tt["s-ol"]=void 0,checkSlotRelocate$1=!0),o&&putBackInOriginalLocation$1(tt,o)}plt$1.$flags$&=-2},addVnodes$1=(i,o,s,$,tt,rt)=>{let st=i["s-cr"]&&i["s-cr"].parentNode||i,_;for(st.shadowRoot&&st.tagName===hostTagName$1&&(st=st.shadowRoot);tt<=rt;++tt)$[tt]&&(_=createElm$1(null,s,tt,i),_&&($[tt].$elm$=_,st.insertBefore(_,referenceNode$1(o))))},removeVnodes$1=(i,o,s)=>{for(let $=o;$<=s;++$){const tt=i[$];if(tt){const rt=tt.$elm$;nullifyVNodeRefs(tt),rt&&(checkSlotFallbackVisibility$1=!0,rt["s-ol"]?rt["s-ol"].remove():putBackInOriginalLocation$1(rt,!0),rt.remove())}}},updateChildren$1=(i,o,s,$)=>{let tt=0,rt=0,st=0,_=0,ut=o.length-1,mt=o[0],vt=o[ut],wt=$.length-1,bt=$[0],Mt=$[wt],At,Lt;for(;tt<=ut&&rt<=wt;)if(mt==null)mt=o[++tt];else if(vt==null)vt=o[--ut];else if(bt==null)bt=$[++rt];else if(Mt==null)Mt=$[--wt];else if(isSameVnode$1(mt,bt))patch$1(mt,bt),mt=o[++tt],bt=$[++rt];else if(isSameVnode$1(vt,Mt))patch$1(vt,Mt),vt=o[--ut],Mt=$[--wt];else if(isSameVnode$1(mt,Mt))(mt.$tag$==="slot"||Mt.$tag$==="slot")&&putBackInOriginalLocation$1(mt.$elm$.parentNode,!1),patch$1(mt,Mt),i.insertBefore(mt.$elm$,vt.$elm$.nextSibling),mt=o[++tt],Mt=$[--wt];else if(isSameVnode$1(vt,bt))(mt.$tag$==="slot"||Mt.$tag$==="slot")&&putBackInOriginalLocation$1(vt.$elm$.parentNode,!1),patch$1(vt,bt),i.insertBefore(vt.$elm$,mt.$elm$),vt=o[--ut],bt=$[++rt];else{for(st=-1,_=tt;_<=ut;++_)if(o[_]&&o[_].$key$!==null&&o[_].$key$===bt.$key$){st=_;break}st>=0?(Lt=o[st],Lt.$tag$!==bt.$tag$?At=createElm$1(o&&o[rt],s,st,i):(patch$1(Lt,bt),o[st]=void 0,At=Lt.$elm$),bt=$[++rt]):(At=createElm$1(o&&o[rt],s,rt,i),bt=$[++rt]),At&&parentReferenceNode$1(mt.$elm$).insertBefore(At,referenceNode$1(mt.$elm$))}tt>ut?addVnodes$1(i,$[wt+1]==null?null:$[wt+1].$elm$,s,$,rt,wt):rt>wt&&removeVnodes$1(o,tt,ut)},isSameVnode$1=(i,o)=>i.$tag$===o.$tag$?i.$tag$==="slot"?i.$name$===o.$name$:i.$key$===o.$key$:!1,referenceNode$1=i=>i&&i["s-ol"]||i,parentReferenceNode$1=i=>(i["s-ol"]?i["s-ol"]:i).parentNode,patch$1=(i,o)=>{const s=o.$elm$=i.$elm$,$=i.$children$,tt=o.$children$,rt=o.$tag$,st=o.$text$;let _;st===null?(isSvgMode$1=rt==="svg"?!0:rt==="foreignObject"?!1:isSvgMode$1,rt==="slot"||updateElement$1(i,o,isSvgMode$1),$!==null&&tt!==null?updateChildren$1(s,$,o,tt):tt!==null?(i.$text$!==null&&(s.textContent=""),addVnodes$1(s,null,o,tt,0,tt.length-1)):$!==null&&removeVnodes$1($,0,$.length-1),isSvgMode$1&&rt==="svg"&&(isSvgMode$1=!1)):(_=s["s-cr"])?_.parentNode.textContent=st:i.$text$!==st&&(s.data=st)},updateFallbackSlotVisibility$1=i=>{const o=i.childNodes;let s,$,tt,rt,st,_;for($=0,tt=o.length;$<tt;$++)if(s=o[$],s.nodeType===1){if(s["s-sr"]){for(st=s["s-sn"],s.hidden=!1,rt=0;rt<tt;rt++)if(_=o[rt].nodeType,o[rt]["s-hn"]!==s["s-hn"]||st!==""){if(_===1&&st===o[rt].getAttribute("slot")){s.hidden=!0;break}}else if(_===1||_===3&&o[rt].textContent.trim()!==""){s.hidden=!0;break}}updateFallbackSlotVisibility$1(s)}},relocateNodes$1=[],relocateSlotContent$1=i=>{let o,s,$,tt,rt,st,_=0;const ut=i.childNodes,mt=ut.length;for(;_<mt;_++){if(o=ut[_],o["s-sr"]&&(s=o["s-cr"])&&s.parentNode)for($=s.parentNode.childNodes,tt=o["s-sn"],st=$.length-1;st>=0;st--)s=$[st],!s["s-cn"]&&!s["s-nr"]&&s["s-hn"]!==o["s-hn"]&&(isNodeLocatedInSlot$1(s,tt)?(rt=relocateNodes$1.find(vt=>vt.$nodeToRelocate$===s),checkSlotFallbackVisibility$1=!0,s["s-sn"]=s["s-sn"]||tt,rt?rt.$slotRefNode$=o:relocateNodes$1.push({$slotRefNode$:o,$nodeToRelocate$:s}),s["s-sr"]&&relocateNodes$1.map(vt=>{isNodeLocatedInSlot$1(vt.$nodeToRelocate$,s["s-sn"])&&(rt=relocateNodes$1.find(wt=>wt.$nodeToRelocate$===s),rt&&!vt.$slotRefNode$&&(vt.$slotRefNode$=rt.$slotRefNode$))})):relocateNodes$1.some(vt=>vt.$nodeToRelocate$===s)||relocateNodes$1.push({$nodeToRelocate$:s}));o.nodeType===1&&relocateSlotContent$1(o)}},isNodeLocatedInSlot$1=(i,o)=>i.nodeType===1?i.getAttribute("slot")===null&&o===""||i.getAttribute("slot")===o:i["s-sn"]===o?!0:o==="",nullifyVNodeRefs=i=>{i.$attrs$&&i.$attrs$.ref&&i.$attrs$.ref(null),i.$children$&&i.$children$.map(nullifyVNodeRefs)},renderVdom$1=(i,o)=>{const s=i.$hostElement$,$=i.$cmpMeta$,tt=i.$vnode$||newVNode$1(null,null),rt=isHost$1(o)?o:h$3(null,null,o);hostTagName$1=s.tagName,$.$attrsToReflect$&&(rt.$attrs$=rt.$attrs$||{},$.$attrsToReflect$.map(([st,_])=>rt.$attrs$[_]=s[st])),rt.$tag$=null,rt.$flags$|=4,i.$vnode$=rt,rt.$elm$=tt.$elm$=s.shadowRoot||s,scopeId$1=s["s-sc"],contentRef$1=s["s-cr"],useNativeShadowDom$1=($.$flags$&1)!==0,checkSlotFallbackVisibility$1=!1,patch$1(tt,rt);{if(plt$1.$flags$|=1,checkSlotRelocate$1){relocateSlotContent$1(rt.$elm$);let st,_,ut,mt,vt,wt,bt=0;for(;bt<relocateNodes$1.length;bt++)st=relocateNodes$1[bt],_=st.$nodeToRelocate$,_["s-ol"]||(ut=doc$2.createTextNode(""),ut["s-nr"]=_,_.parentNode.insertBefore(_["s-ol"]=ut,_));for(bt=0;bt<relocateNodes$1.length;bt++)if(st=relocateNodes$1[bt],_=st.$nodeToRelocate$,st.$slotRefNode$){for(mt=st.$slotRefNode$.parentNode,vt=st.$slotRefNode$.nextSibling,ut=_["s-ol"];ut=ut.previousSibling;)if(wt=ut["s-nr"],wt&&wt["s-sn"]===_["s-sn"]&&mt===wt.parentNode&&(wt=wt.nextSibling,!wt||!wt["s-nr"])){vt=wt;break}(!vt&&mt!==_.parentNode||_.nextSibling!==vt)&&_!==vt&&(!_["s-hn"]&&_["s-ol"]&&(_["s-hn"]=_["s-ol"].parentNode.nodeName),mt.insertBefore(_,vt))}else _.nodeType===1&&(_.hidden=!0)}checkSlotFallbackVisibility$1&&updateFallbackSlotVisibility$1(rt.$elm$),plt$1.$flags$&=-2,relocateNodes$1.length=0}},attachToAncestor$1=(i,o)=>{},scheduleUpdate$1=(i,o)=>(i.$flags$|=16,attachToAncestor$1(i,i.$ancestorComponent$),writeTask$1(()=>dispatchHooks$1(i,o))),dispatchHooks$1=(i,o)=>{const s=i.$hostElement$,$=createTime$1("scheduleUpdate",i.$cmpMeta$.$tagName$),tt=s;let rt;return o?rt=safeCall$2(tt,"componentWillLoad"):rt=safeCall$2(tt,"componentWillUpdate"),rt=enqueue(rt,()=>safeCall$2(tt,"componentWillRender")),$(),enqueue(rt,()=>updateComponent$1(i,tt,o))},enqueue=(i,o)=>i instanceof Promise?i.then(o):o(),updateComponent$1=async(i,o,s)=>{const $=i.$hostElement$,tt=createTime$1("update",i.$cmpMeta$.$tagName$);$["s-rc"],s&&attachStyles$1(i);const rt=createTime$1("render",i.$cmpMeta$.$tagName$);callRender$1(i,o,$),rt(),tt(),postUpdateComponent$1(i)},callRender$1=(i,o,s)=>{try{renderingRef$1=o,o=o.render&&o.render(),i.$flags$&=-17,i.$flags$|=2,(BUILD$1.hasRenderFn||BUILD$1.reflect)&&(BUILD$1.vdomRender||BUILD$1.reflect)&&(BUILD$1.hydrateServerSide||renderVdom$1(i,o))}catch(_){consoleError$1(_,i.$hostElement$)}return renderingRef$1=null,null},postUpdateComponent$1=i=>{const o=i.$cmpMeta$.$tagName$,s=i.$hostElement$,$=createTime$1("postUpdate",o),tt=s;i.$ancestorComponent$,safeCall$2(tt,"componentDidRender"),i.$flags$&64?(safeCall$2(tt,"componentDidUpdate"),$()):(i.$flags$|=64,safeCall$2(tt,"componentDidLoad"),$())},forceUpdate=i=>{{const o=getHostRef$1(i),s=o.$hostElement$.isConnected;return s&&(o.$flags$&18)===2&&scheduleUpdate$1(o,!1),s}},safeCall$2=(i,o,s)=>{if(i&&i[o])try{return i[o](s)}catch($){consoleError$1($)}},getValue$1=(i,o)=>getHostRef$1(i).$instanceValues$.get(o),setValue$1=(i,o,s,$)=>{const tt=getHostRef$1(i),rt=i,st=tt.$instanceValues$.get(o),_=tt.$flags$,ut=rt;s=parsePropertyValue$1(s,$.$members$[o][0]);const mt=Number.isNaN(st)&&Number.isNaN(s);if(s!==st&&!mt){tt.$instanceValues$.set(o,s);{if($.$watchers$&&_&128){const wt=$.$watchers$[o];wt&&wt.map(bt=>{try{ut[bt](s,st,o)}catch(Mt){consoleError$1(Mt,rt)}})}if((_&18)===2){if(ut.componentShouldUpdate&&ut.componentShouldUpdate(s,st,o)===!1)return;scheduleUpdate$1(tt,!1)}}}},proxyComponent$1=(i,o,s)=>{if(o.$members$){i.watchers&&(o.$watchers$=i.watchers);const $=Object.entries(o.$members$),tt=i.prototype;$.map(([rt,[st]])=>{(st&31||st&32)&&Object.defineProperty(tt,rt,{get(){return getValue$1(this,rt)},set(_){setValue$1(this,rt,_,o)},configurable:!0,enumerable:!0})});{const rt=new Map;tt.attributeChangedCallback=function(st,_,ut){plt$1.jmp(()=>{const mt=rt.get(st);if(this.hasOwnProperty(mt))ut=this[mt],delete this[mt];else if(tt.hasOwnProperty(mt)&&typeof this[mt]=="number"&&this[mt]==ut)return;this[mt]=ut===null&&typeof this[mt]=="boolean"?!1:ut})},i.observedAttributes=$.filter(([st,_])=>_[0]&15).map(([st,_])=>{const ut=_[1]||st;return rt.set(ut,st),_[0]&512&&o.$attrsToReflect$.push([st,ut]),ut})}}return i},initializeComponent$1=async(i,o,s,$,tt)=>{if(!(o.$flags$&32)&&(o.$flags$|=32,tt=i.constructor,customElements.whenDefined(s.$tagName$).then(()=>o.$flags$|=128),tt.style)){let st=tt.style;typeof st!="string"&&(st=st[o.$modeName$=computeMode$1(i)]);const _=getScopeId$1(s,o.$modeName$);if(!styles$1.has(_)){const ut=createTime$1("registerStyles",s.$tagName$);registerStyle$1(_,st,!!(s.$flags$&1)),ut()}}o.$ancestorComponent$,(()=>scheduleUpdate$1(o,!0))()},fireConnectedCallback$1=i=>{},connectedCallback$1=i=>{if(!(plt$1.$flags$&1)){const o=getHostRef$1(i),s=o.$cmpMeta$,$=createTime$1("connectedCallback",s.$tagName$);o.$flags$&1?(addHostEventListeners$1(i,o,s.$listeners$),fireConnectedCallback$1(o.$lazyInstance$)):(o.$flags$|=1,s.$flags$&12&&setContentReference$1(i),s.$members$&&Object.entries(s.$members$).map(([tt,[rt]])=>{if(rt&31&&i.hasOwnProperty(tt)){const st=i[tt];delete i[tt],i[tt]=st}}),initializeComponent$1(i,o,s)),$()}},setContentReference$1=i=>{const o=i["s-cr"]=doc$2.createComment("");o["s-cn"]=!0,i.insertBefore(o,i.firstChild)},disconnectedCallback$1=i=>{if(!(plt$1.$flags$&1)){const o=getHostRef$1(i);o.$rmListeners$&&(o.$rmListeners$.map(s=>s()),o.$rmListeners$=void 0)}},proxyCustomElement$1=(i,o)=>{const s={$flags$:o[0],$tagName$:o[1]};s.$members$=o[2],s.$listeners$=o[3],s.$watchers$=i.$watchers$,s.$attrsToReflect$=[];const $=i.prototype.connectedCallback,tt=i.prototype.disconnectedCallback;return Object.assign(i.prototype,{__registerHost(){registerHost$1(this,s)},connectedCallback(){connectedCallback$1(this),$&&$.call(this)},disconnectedCallback(){disconnectedCallback$1(this),tt&&tt.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(s.$flags$&16)})}}),i.is=s.$tagName$,proxyComponent$1(i,s)},addHostEventListeners$1=(i,o,s,$)=>{s&&s.map(([tt,rt,st])=>{const _=getHostListenerTarget$1(i,tt),ut=hostListenerProxy$1(o,st),mt=hostListenerOpts$1(tt);plt$1.ael(_,rt,ut,mt),(o.$rmListeners$=o.$rmListeners$||[]).push(()=>plt$1.rel(_,rt,ut,mt))})},hostListenerProxy$1=(i,o)=>s=>{try{BUILD$1.lazyLoad||i.$hostElement$[o](s)}catch($){consoleError$1($)}},getHostListenerTarget$1=(i,o)=>o&4?doc$2:o&8?win$3:o&16?doc$2.body:i,hostListenerOpts$1=i=>supportsListenerOptions$1?{passive:(i&1)!==0,capture:(i&2)!==0}:(i&2)!==0,hostRefs$1=new WeakMap,getHostRef$1=i=>hostRefs$1.get(i),registerHost$1=(i,o)=>{const s={$flags$:0,$hostElement$:i,$cmpMeta$:o,$instanceValues$:new Map};return addHostEventListeners$1(i,s,o.$listeners$),hostRefs$1.set(i,s)},isMemberInElement$1=(i,o)=>o in i,consoleError$1=(i,o)=>(0,console.error)(i,o),styles$1=new Map,modeResolutionChain$1=[],win$3=typeof window<"u"?window:{},doc$2=win$3.document||{head:{}},H$1=win$3.HTMLElement||class{},plt$1={$flags$:0,$resourcesUrl$:"",jmp:i=>i(),raf:i=>requestAnimationFrame(i),ael:(i,o,s,$)=>i.addEventListener(o,s,$),rel:(i,o,s,$)=>i.removeEventListener(o,s,$),ce:(i,o)=>new CustomEvent(i,o)},setPlatformHelpers=i=>{Object.assign(plt$1,i)},supportsListenerOptions$1=(()=>{let i=!1;try{doc$2.addEventListener("e",null,Object.defineProperty({},"passive",{get(){i=!0}}))}catch(o){}return i})(),promiseResolve$1=i=>Promise.resolve(i),supportsConstructableStylesheets$1=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(i){}return!1})(),queueDomReads$1=[],queueDomWrites$1=[],queueTask$1=(i,o)=>s=>{i.push(s),queuePending$1||(queuePending$1=!0,o&&plt$1.$flags$&4?nextTick$1(flush$1):plt$1.raf(flush$1))},consume$1=i=>{for(let o=0;o<i.length;o++)try{i[o](performance.now())}catch(s){consoleError$1(s)}i.length=0},flush$1=()=>{consume$1(queueDomReads$1),consume$1(queueDomWrites$1),(queuePending$1=queueDomReads$1.length>0)&&plt$1.raf(flush$1)},nextTick$1=i=>promiseResolve$1().then(i),readTask=queueTask$1(queueDomReads$1,!1),writeTask$1=queueTask$1(queueDomWrites$1,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const win$2=typeof window<"u"?window:void 0,doc$1=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const componentOnReady=(i,o)=>{i.componentOnReady?i.componentOnReady().then(s=>o(s)):raf(()=>o(i))},hasLazyBuild=i=>i.componentOnReady!==void 0,inheritAttributes$1=(i,o=[])=>{const s={};return o.forEach($=>{i.hasAttribute($)&&(i.getAttribute($)!==null&&(s[$]=i.getAttribute($)),i.removeAttribute($))}),s},ariaAttributes=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],inheritAriaAttributes=(i,o)=>{let s=ariaAttributes;return o&&o.length>0&&(s=s.filter($=>!o.includes($))),inheritAttributes$1(i,s)},addEventListener$1=(i,o,s,$)=>{var tt;if(typeof window<"u"){const rt=window,st=(tt=rt==null?void 0:rt.Ionic)===null||tt===void 0?void 0:tt.config;if(st){const _=st.get("_ael");if(_)return _(i,o,s,$);if(st._ael)return st._ael(i,o,s,$)}}return i.addEventListener(o,s,$)},removeEventListener=(i,o,s,$)=>{var tt;if(typeof window<"u"){const rt=window,st=(tt=rt==null?void 0:rt.Ionic)===null||tt===void 0?void 0:tt.config;if(st){const _=st.get("_rel");if(_)return _(i,o,s,$);if(st._rel)return st._rel(i,o,s,$)}}return i.removeEventListener(o,s,$)},getElementRoot=(i,o=i)=>i.shadowRoot||o,raf=i=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(i):typeof requestAnimationFrame=="function"?requestAnimationFrame(i):setTimeout(i),focusElement=i=>{if(i.focus(),i.classList.contains("ion-focusable")){const o=i.closest("ion-app");o&&o.setFocus([i])}},clamp$1=(i,o,s)=>Math.max(i,Math.min(o,s)),assert=(i,o)=>{if(!i){const s="ASSERT: "+o;console.error(s);debugger;throw new Error(s)}},now$2=i=>i.timeStamp||Date.now(),pointerCoord=i=>{if(i){const o=i.changedTouches;if(o&&o.length>0){const s=o[0];return{x:s.clientX,y:s.clientY}}if(i.pageX!==void 0)return{x:i.pageX,y:i.pageY}}return{x:0,y:0}},shallowEqualStringMap=(i,o)=>{if(i!=null||(i={}),o!=null||(o={}),i===o)return!0;const s=Object.keys(i);if(s.length!==Object.keys(o).length)return!1;for(const $ of s)if(!($ in o)||i[$]!==o[$])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let animationPrefix;const processKeyframes=i=>(i.forEach(o=>{for(const s in o)if(o.hasOwnProperty(s)){const $=o[s];if(s==="easing"){const tt="animation-timing-function";o[tt]=$,delete o[s]}else{const tt=convertCamelCaseToHypen(s);tt!==s&&(o[tt]=$,delete o[s])}}}),i),convertCamelCaseToHypen=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),getAnimationPrefix=i=>{if(animationPrefix===void 0){const o=i.style.animationName!==void 0,s=i.style.webkitAnimationName!==void 0;animationPrefix=!o&&s?"-webkit-":""}return animationPrefix},setStyleProperty=(i,o,s)=>{const $=o.startsWith("animation")?getAnimationPrefix(i):"";i.style.setProperty($+o,s)},removeStyleProperty=(i,o)=>{const s=o.startsWith("animation")?getAnimationPrefix(i):"";i.style.removeProperty(s+o)},animationEnd=(i,o)=>{let s;const $={passive:!0},tt=()=>{s&&s()},rt=st=>{i===st.target&&(tt(),o(st))};return i&&(i.addEventListener("webkitAnimationEnd",rt,$),i.addEventListener("animationend",rt,$),s=()=>{i.removeEventListener("webkitAnimationEnd",rt,$),i.removeEventListener("animationend",rt,$)}),tt},generateKeyframeRules=(i=[])=>i.map(o=>{const s=o.offset,$=[];for(const tt in o)o.hasOwnProperty(tt)&&tt!=="offset"&&$.push(`${tt}: ${o[tt]};`);return`${s*100}% { ${$.join(" ")} }`}).join(" "),keyframeIds=[],generateKeyframeName=i=>{let o=keyframeIds.indexOf(i);return o<0&&(o=keyframeIds.push(i)-1),`ion-animation-${o}`},getStyleContainer=i=>{const o=i.getRootNode!==void 0?i.getRootNode():i;return o.head||o},createKeyframeStylesheet=(i,o,s)=>{var $;const tt=getStyleContainer(s),rt=getAnimationPrefix(s),st=tt.querySelector("#"+i);if(st)return st;const _=(($=s.ownerDocument)!==null&&$!==void 0?$:document).createElement("style");return _.id=i,_.textContent=`@${rt}keyframes ${i} { ${o} } @${rt}keyframes ${i}-alt { ${o} }`,tt.appendChild(_),_},addClassToArray=(i=[],o)=>{if(o!==void 0){const s=Array.isArray(o)?o:[o];return[...i,...s]}return i},createAnimation=i=>{let o,s,$,tt,rt,st,_=[],ut=[],mt=[],vt=!1,wt,bt={},Mt=[],At=[],Lt={},Ht=0,Tt=!1,Ct=!1,St,It,Bt,Ft,Gt=!0,Xt=!1,ir=!0,$r,Tr,xr=!1;const Xr=i,ln=[],zr=[],hr=[],Er=[],Nt=[],Wt=[],or=[],ar=[],Fr=[],Yr=[],hn=typeof AnimationEffect=="function"||win$2!==void 0&&typeof win$2.AnimationEffect=="function",mn=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&hn,En=100,Ln=()=>Yr,wo=Vr=>(Er.forEach(un=>{un.destroy(Vr)}),Po(Vr),hr.length=0,Er.length=0,_.length=0,jn(),vt=!1,ir=!0,Tr),Po=Vr=>{bn(),Vr&&Xn()},Ao=()=>{Tt=!1,Ct=!1,ir=!0,It=void 0,Bt=void 0,Ft=void 0,Ht=0,Xt=!1,Gt=!0,xr=!1},An=()=>Ht!==0&&!xr,Eo=(Vr,un)=>((un!=null&&un.oneTimeCallback?zr:ln).push({c:Vr,o:un}),Tr),jn=()=>(ln.length=0,zr.length=0,Tr),bn=()=>{if(mn)Yr.forEach(Vr=>{Vr.cancel()}),Yr.length=0;else{const Vr=hr.slice();raf(()=>{Vr.forEach(un=>{removeStyleProperty(un,"animation-name"),removeStyleProperty(un,"animation-duration"),removeStyleProperty(un,"animation-timing-function"),removeStyleProperty(un,"animation-iteration-count"),removeStyleProperty(un,"animation-delay"),removeStyleProperty(un,"animation-play-state"),removeStyleProperty(un,"animation-fill-mode"),removeStyleProperty(un,"animation-direction")})})}},Xn=()=>{Nt.forEach(Vr=>{Vr!=null&&Vr.parentNode&&Vr.parentNode.removeChild(Vr)}),Nt.length=0},Io=Vr=>(Wt.push(Vr),Tr),gs=Vr=>(or.push(Vr),Tr),zo=Vr=>(ar.push(Vr),Tr),So=Vr=>(Fr.push(Vr),Tr),hs=Vr=>(ut=addClassToArray(ut,Vr),Tr),Mo=Vr=>(mt=addClassToArray(mt,Vr),Tr),ys=(Vr={})=>(bt=Vr,Tr),Jo=(Vr=[])=>{for(const un of Vr)bt[un]="";return Tr},Ko=Vr=>(Mt=addClassToArray(Mt,Vr),Tr),ws=Vr=>(At=addClassToArray(At,Vr),Tr),is=(Vr={})=>(Lt=Vr,Tr),Oo=(Vr=[])=>{for(const un of Vr)Lt[un]="";return Tr},es=()=>rt!==void 0?rt:wt?wt.getFill():"both",us=()=>It!==void 0?It:st!==void 0?st:wt?wt.getDirection():"normal",rs=()=>Tt?"linear":$!==void 0?$:wt?wt.getEasing():"linear",ns=()=>Ct?0:Bt!==void 0?Bt:s!==void 0?s:wt?wt.getDuration():0,Ss=()=>tt!==void 0?tt:wt?wt.getIterations():1,Ts=()=>Ft!==void 0?Ft:o!==void 0?o:wt?wt.getDelay():0,na=()=>_,Sl=Vr=>(st=Vr,Mn(!0),Tr),Tl=Vr=>(rt=Vr,Mn(!0),Tr),Wl=Vr=>(o=Vr,Mn(!0),Tr),wu=Vr=>($=Vr,Mn(!0),Tr),dr=Vr=>(!mn&&Vr===0&&(Vr=1),s=Vr,Mn(!0),Tr),qt=Vr=>(tt=Vr,Mn(!0),Tr),Zt=Vr=>(wt=Vr,Tr),cr=Vr=>{if(Vr!=null)if(Vr.nodeType===1)hr.push(Vr);else if(Vr.length>=0)for(let un=0;un<Vr.length;un++)hr.push(Vr[un]);else console.error("Invalid addElement value");return Tr},gr=Vr=>{if(Vr!=null)if(Array.isArray(Vr))for(const un of Vr)un.parent(Tr),Er.push(un);else Vr.parent(Tr),Er.push(Vr);return Tr},wr=Vr=>{const un=_!==Vr;return _=Vr,un&&Pr(_),Tr},Pr=Vr=>{mn?Ln().forEach(un=>{if(un.effect.setKeyframes)un.effect.setKeyframes(Vr);else{const kn=new KeyframeEffect(un.effect.target,Vr,un.effect.getTiming());un.effect=kn}}):on()},Cr=()=>{Wt.forEach(Ro=>Ro()),or.forEach(Ro=>Ro());const Vr=ut,un=mt,kn=bt;hr.forEach(Ro=>{const To=Ro.classList;Vr.forEach(Vo=>To.add(Vo)),un.forEach(Vo=>To.remove(Vo));for(const Vo in kn)kn.hasOwnProperty(Vo)&&setStyleProperty(Ro,Vo,kn[Vo])})},br=()=>{Fo(),ar.forEach(To=>To()),Fr.forEach(To=>To());const Vr=Gt?1:0,un=Mt,kn=At,Ro=Lt;hr.forEach(To=>{const Vo=To.classList;un.forEach(Ds=>Vo.add(Ds)),kn.forEach(Ds=>Vo.remove(Ds));for(const Ds in Ro)Ro.hasOwnProperty(Ds)&&setStyleProperty(To,Ds,Ro[Ds])}),ln.forEach(To=>To.c(Vr,Tr)),zr.forEach(To=>To.c(Vr,Tr)),zr.length=0,ir=!0,Gt&&(Xt=!0),Gt=!0},Dr=()=>{Ht!==0&&(Ht--,Ht===0&&(br(),wt&&wt.animationFinish()))},on=(Vr=!0)=>{Xn();const un=processKeyframes(_);hr.forEach(kn=>{if(un.length>0){const Ro=generateKeyframeRules(un);$r=i!==void 0?i:generateKeyframeName(Ro);const To=createKeyframeStylesheet($r,Ro,kn);Nt.push(To),setStyleProperty(kn,"animation-duration",`${ns()}ms`),setStyleProperty(kn,"animation-timing-function",rs()),setStyleProperty(kn,"animation-delay",`${Ts()}ms`),setStyleProperty(kn,"animation-fill-mode",es()),setStyleProperty(kn,"animation-direction",us());const Vo=Ss()===1/0?"infinite":Ss().toString();setStyleProperty(kn,"animation-iteration-count",Vo),setStyleProperty(kn,"animation-play-state","paused"),Vr&&setStyleProperty(kn,"animation-name",`${To.id}-alt`),raf(()=>{setStyleProperty(kn,"animation-name",To.id||null)})}})},cn=()=>{hr.forEach(Vr=>{const un=Vr.animate(_,{id:Xr,delay:Ts(),duration:ns(),easing:rs(),iterations:Ss(),fill:es(),direction:us()});un.pause(),Yr.push(un)}),Yr.length>0&&(Yr[0].onfinish=()=>{Dr()})},tn=(Vr=!0)=>{Cr(),_.length>0&&(mn?cn():on(Vr)),vt=!0},Rn=Vr=>{if(Vr=Math.min(Math.max(Vr,0),.9999),mn)Yr.forEach(un=>{un.currentTime=un.effect.getComputedTiming().delay+ns()*Vr,un.pause()});else{const un=`-${ns()*Vr}ms`;hr.forEach(kn=>{_.length>0&&(setStyleProperty(kn,"animation-delay",un),setStyleProperty(kn,"animation-play-state","paused"))})}},Nn=Vr=>{Yr.forEach(un=>{un.effect.updateTiming({delay:Ts(),duration:ns(),easing:rs(),iterations:Ss(),fill:es(),direction:us()})}),Vr!==void 0&&Rn(Vr)},$n=(Vr=!0,un)=>{raf(()=>{hr.forEach(kn=>{setStyleProperty(kn,"animation-name",$r||null),setStyleProperty(kn,"animation-duration",`${ns()}ms`),setStyleProperty(kn,"animation-timing-function",rs()),setStyleProperty(kn,"animation-delay",un!==void 0?`-${un*ns()}ms`:`${Ts()}ms`),setStyleProperty(kn,"animation-fill-mode",es()||null),setStyleProperty(kn,"animation-direction",us()||null);const Ro=Ss()===1/0?"infinite":Ss().toString();setStyleProperty(kn,"animation-iteration-count",Ro),Vr&&setStyleProperty(kn,"animation-name",`${$r}-alt`),raf(()=>{setStyleProperty(kn,"animation-name",$r||null)})})})},Mn=(Vr=!1,un=!0,kn)=>(Vr&&Er.forEach(Ro=>{Ro.update(Vr,un,kn)}),mn?Nn(kn):$n(un,kn),Tr),Wn=(Vr=!1,un)=>(Er.forEach(kn=>{kn.progressStart(Vr,un)}),ts(),Tt=Vr,vt||tn(),Mn(!1,!0,un),Tr),vo=Vr=>(Er.forEach(un=>{un.progressStep(Vr)}),Rn(Vr),Tr),Lo=(Vr,un,kn)=>(Tt=!1,Er.forEach(Ro=>{Ro.progressEnd(Vr,un,kn)}),kn!==void 0&&(Bt=kn),Xt=!1,Gt=!0,Vr===0?(It=us()==="reverse"?"normal":"reverse",It==="reverse"&&(Gt=!1),mn?(Mn(),Rn(1-un)):(Ft=(1-un)*ns()*-1,Mn(!1,!1))):Vr===1&&(mn?(Mn(),Rn(un)):(Ft=un*ns()*-1,Mn(!1,!1))),Vr!==void 0&&(Eo(()=>{Bt=void 0,It=void 0,Ft=void 0},{oneTimeCallback:!0}),wt||Yn()),Tr),ts=()=>{vt&&(mn?Yr.forEach(Vr=>{Vr.pause()}):hr.forEach(Vr=>{setStyleProperty(Vr,"animation-play-state","paused")}),xr=!0)},Bo=()=>(Er.forEach(Vr=>{Vr.pause()}),ts(),Tr),Bs=()=>{St=void 0,Dr()},Fo=()=>{St&&clearTimeout(St)},ds=()=>{if(Fo(),raf(()=>{hr.forEach(Vr=>{_.length>0&&setStyleProperty(Vr,"animation-play-state","running")})}),_.length===0||hr.length===0)Dr();else{const Vr=Ts()||0,un=ns()||0,kn=Ss()||1;isFinite(kn)&&(St=setTimeout(Bs,Vr+un*kn+En)),animationEnd(hr[0],()=>{Fo(),raf(()=>{Zl(),raf(Dr)})})}},Zl=()=>{hr.forEach(Vr=>{removeStyleProperty(Vr,"animation-duration"),removeStyleProperty(Vr,"animation-delay"),removeStyleProperty(Vr,"animation-play-state")})},$m=()=>{Yr.forEach(Vr=>{Vr.play()}),(_.length===0||hr.length===0)&&Dr()},Bp=()=>{mn?(Rn(0),Nn()):$n()},Yn=Vr=>new Promise(un=>{Vr!=null&&Vr.sync&&(Ct=!0,Eo(()=>Ct=!1,{oneTimeCallback:!0})),vt||tn(),Xt&&(Bp(),Xt=!1),ir&&(Ht=Er.length+1,ir=!1),Eo(()=>un(),{oneTimeCallback:!0}),Er.forEach(kn=>{kn.play()}),mn?$m():ds(),xr=!1}),Qu=()=>{Er.forEach(Vr=>{Vr.stop()}),vt&&(bn(),vt=!1),Ao()},Xl=(Vr,un)=>{const kn=_[0];return kn!==void 0&&(kn.offset===void 0||kn.offset===0)?kn[Vr]=un:_=[{offset:0,[Vr]:un},..._],Tr};return Tr={parentAnimation:wt,elements:hr,childAnimations:Er,id:Xr,animationFinish:Dr,from:Xl,to:(Vr,un)=>{const kn=_[_.length-1];return kn!==void 0&&(kn.offset===void 0||kn.offset===1)?kn[Vr]=un:_=[..._,{offset:1,[Vr]:un}],Tr},fromTo:(Vr,un,kn)=>Xl(Vr,un).to(Vr,kn),parent:Zt,play:Yn,pause:Bo,stop:Qu,destroy:wo,keyframes:wr,addAnimation:gr,addElement:cr,update:Mn,fill:Tl,direction:Sl,iterations:qt,duration:dr,easing:wu,delay:Wl,getWebAnimations:Ln,getKeyframes:na,getFill:es,getDirection:us,getDelay:Ts,getIterations:Ss,getEasing:rs,getDuration:ns,afterAddRead:zo,afterAddWrite:So,afterClearStyles:Oo,afterStyles:is,afterRemoveClass:ws,afterAddClass:Ko,beforeAddRead:Io,beforeAddWrite:gs,beforeClearStyles:Jo,beforeStyles:ys,beforeRemoveClass:Mo,beforeAddClass:hs,onFinish:Eo,isRunning:An,progressStart:Wn,progressStep:vo,progressEnd:Lo}},LIFECYCLE_WILL_ENTER="ionViewWillEnter",LIFECYCLE_DID_ENTER="ionViewDidEnter",LIFECYCLE_WILL_LEAVE="ionViewWillLeave",LIFECYCLE_DID_LEAVE="ionViewDidLeave",LIFECYCLE_WILL_UNLOAD="ionViewWillUnload",iosTransitionAnimation=()=>__vitePreload(()=>import("./ios.transition-d5f5aded.js"),[]),mdTransitionAnimation=()=>__vitePreload(()=>import("./md.transition-39b51941.js"),[]),transition=i=>new Promise((o,s)=>{writeTask$1(()=>{beforeTransition(i),runTransition(i).then($=>{$.animation&&$.animation.destroy(),afterTransition(i),o($)},$=>{afterTransition(i),s($)})})}),beforeTransition=i=>{const o=i.enteringEl,s=i.leavingEl;setZIndex(o,s,i.direction),i.showGoBack?o.classList.add("can-go-back"):o.classList.remove("can-go-back"),setPageHidden(o,!1),o.style.setProperty("pointer-events","none"),s&&(setPageHidden(s,!1),s.style.setProperty("pointer-events","none"))},runTransition=async i=>{const o=await getAnimationBuilder(i);return o&&Build.isBrowser?animation(o,i):noAnimation(i)},afterTransition=i=>{const o=i.enteringEl,s=i.leavingEl;o.classList.remove("ion-page-invisible"),o.style.removeProperty("pointer-events"),s!==void 0&&(s.classList.remove("ion-page-invisible"),s.style.removeProperty("pointer-events"))},getAnimationBuilder=async i=>!i.leavingEl||!i.animated||i.duration===0?void 0:i.animationBuilder?i.animationBuilder:i.mode==="ios"?(await iosTransitionAnimation()).iosTransitionAnimation:(await mdTransitionAnimation()).mdTransitionAnimation,animation=async(i,o)=>{await waitForReady(o,!0);const s=i(o.baseEl,o);fireWillEvents(o.enteringEl,o.leavingEl);const $=await playTransition(s,o);return o.progressCallback&&o.progressCallback(void 0),$&&fireDidEvents(o.enteringEl,o.leavingEl),{hasCompleted:$,animation:s}},noAnimation=async i=>{const o=i.enteringEl,s=i.leavingEl;return await waitForReady(i,!1),fireWillEvents(o,s),fireDidEvents(o,s),{hasCompleted:!0}},waitForReady=async(i,o)=>{(i.deepWait!==void 0?i.deepWait:o)&&await Promise.all([deepReady(i.enteringEl),deepReady(i.leavingEl)]),await notifyViewReady(i.viewIsReady,i.enteringEl)},notifyViewReady=async(i,o)=>{i&&await i(o)},playTransition=(i,o)=>{const s=o.progressCallback,$=new Promise(tt=>{i.onFinish(rt=>tt(rt===1))});return s?(i.progressStart(!0),s(i)):i.play(),$},fireWillEvents=(i,o)=>{lifecycle(o,LIFECYCLE_WILL_LEAVE),lifecycle(i,LIFECYCLE_WILL_ENTER)},fireDidEvents=(i,o)=>{lifecycle(i,LIFECYCLE_DID_ENTER),lifecycle(o,LIFECYCLE_DID_LEAVE)},lifecycle=(i,o)=>{if(i){const s=new CustomEvent(o,{bubbles:!1,cancelable:!1});i.dispatchEvent(s)}},waitForMount=()=>new Promise(i=>raf(()=>raf(()=>i()))),deepReady=async i=>{const o=i;if(o){if(o.componentOnReady!=null){if(await o.componentOnReady()!=null)return}else if(o.__registerHost!=null){await new Promise($=>raf($));return}await Promise.all(Array.from(o.children).map(deepReady))}},setPageHidden=(i,o)=>{o?(i.setAttribute("aria-hidden","true"),i.classList.add("ion-page-hidden")):(i.hidden=!1,i.removeAttribute("aria-hidden"),i.classList.remove("ion-page-hidden"))},setZIndex=(i,o,s)=>{i!==void 0&&(i.style.zIndex=s==="back"?"99":"101"),o!==void 0&&(o.style.zIndex="100")},getIonPageElement=i=>{if(i.classList.contains("ion-page"))return i;const o=i.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return o||i};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const getTimeGivenProgression=(i,o,s,$,tt)=>solveCubicBezier(i[1],o[1],s[1],$[1],tt).map(rt=>solveCubicParametricEquation(i[0],o[0],s[0],$[0],rt)),solveCubicParametricEquation=(i,o,s,$,tt)=>{const rt=3*o*Math.pow(tt-1,2),st=-3*s*tt+3*s+$*tt,_=i*Math.pow(tt-1,3);return tt*(rt+tt*st)-_},solveCubicBezier=(i,o,s,$,tt)=>(i-=tt,o-=tt,s-=tt,$-=tt,solveCubicEquation($-3*s+3*o-i,3*s-6*o+3*i,3*o-3*i,i).filter(st=>st>=0&&st<=1)),solveQuadraticEquation=(i,o,s)=>{const $=o*o-4*i*s;return $<0?[]:[(-o+Math.sqrt($))/(2*i),(-o-Math.sqrt($))/(2*i)]},solveCubicEquation=(i,o,s,$)=>{if(i===0)return solveQuadraticEquation(o,s,$);o/=i,s/=i,$/=i;const tt=(3*s-o*o)/3,rt=(2*o*o*o-9*o*s+27*$)/27;if(tt===0)return[Math.pow(-rt,1/3)];if(rt===0)return[Math.sqrt(-tt),-Math.sqrt(-tt)];const st=Math.pow(rt/2,2)+Math.pow(tt/3,3);if(st===0)return[Math.pow(rt/2,1/2)-o/3];if(st>0)return[Math.pow(-(rt/2)+Math.sqrt(st),1/3)-Math.pow(rt/2+Math.sqrt(st),1/3)-o/3];const _=Math.sqrt(Math.pow(-(tt/3),3)),ut=Math.acos(-(rt/(2*Math.sqrt(Math.pow(-(tt/3),3))))),mt=2*Math.pow(_,1/3);return[mt*Math.cos(ut/3)-o/3,mt*Math.cos((ut+2*Math.PI)/3)-o/3,mt*Math.cos((ut+4*Math.PI)/3)-o/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class GestureController{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(o){var s;return new GestureDelegate(this,this.newID(),o.name,(s=o.priority)!==null&&s!==void 0?s:0,!!o.disableScroll)}createBlocker(o={}){return new BlockerDelegate(this,this.newID(),o.disable,!!o.disableScroll)}start(o,s,$){return this.canStart(o)?(this.requestedStart.set(s,$),!0):(this.requestedStart.delete(s),!1)}capture(o,s,$){if(!this.start(o,s,$))return!1;const tt=this.requestedStart;let rt=-1e4;if(tt.forEach(st=>{rt=Math.max(rt,st)}),rt===$){this.capturedId=s,tt.clear();const st=new CustomEvent("ionGestureCaptured",{detail:{gestureName:o}});return document.dispatchEvent(st),!0}return tt.delete(s),!1}release(o){this.requestedStart.delete(o),this.capturedId===o&&(this.capturedId=void 0)}disableGesture(o,s){let $=this.disabledGestures.get(o);$===void 0&&($=new Set,this.disabledGestures.set(o,$)),$.add(s)}enableGesture(o,s){const $=this.disabledGestures.get(o);$!==void 0&&$.delete(s)}disableScroll(o){this.disabledScroll.add(o),this.disabledScroll.size===1&&document.body.classList.add(BACKDROP_NO_SCROLL)}enableScroll(o){this.disabledScroll.delete(o),this.disabledScroll.size===0&&document.body.classList.remove(BACKDROP_NO_SCROLL)}canStart(o){return!(this.capturedId!==void 0||this.isDisabled(o))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(o){const s=this.disabledGestures.get(o);return!!(s&&s.size>0)}newID(){return this.gestureId++,this.gestureId}}class GestureDelegate{constructor(o,s,$,tt,rt){this.id=s,this.name=$,this.disableScroll=rt,this.priority=tt*1e6+s,this.ctrl=o}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const o=this.ctrl.capture(this.name,this.id,this.priority);return o&&this.disableScroll&&this.ctrl.disableScroll(this.id),o}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class BlockerDelegate{constructor(o,s,$,tt){this.id=s,this.disable=$,this.disableScroll=tt,this.ctrl=o}block(){if(this.ctrl){if(this.disable)for(const o of this.disable)this.ctrl.disableGesture(o,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const o of this.disable)this.ctrl.enableGesture(o,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const BACKDROP_NO_SCROLL="backdrop-no-scroll",GESTURE_CONTROLLER=new GestureController;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const addEventListener=(i,o,s,$)=>{const tt=supportsPassive(i)?{capture:!!$.capture,passive:!!$.passive}:!!$.capture;let rt,st;return i.__zone_symbol__addEventListener?(rt="__zone_symbol__addEventListener",st="__zone_symbol__removeEventListener"):(rt="addEventListener",st="removeEventListener"),i[rt](o,s,tt),()=>{i[st](o,s,tt)}},supportsPassive=i=>{if(_sPassive===void 0)try{const o=Object.defineProperty({},"passive",{get:()=>{_sPassive=!0}});i.addEventListener("optsTest",()=>{},o)}catch(o){_sPassive=!1}return!!_sPassive};let _sPassive;const MOUSE_WAIT=2e3,createPointerEvents=(i,o,s,$,tt)=>{let rt,st,_,ut,mt,vt,wt,bt=0;const Mt=Ft=>{bt=Date.now()+MOUSE_WAIT,o(Ft)&&(!st&&s&&(st=addEventListener(i,"touchmove",s,tt)),_||(_=addEventListener(Ft.target,"touchend",Lt,tt)),ut||(ut=addEventListener(Ft.target,"touchcancel",Lt,tt)))},At=Ft=>{bt>Date.now()||o(Ft)&&(!vt&&s&&(vt=addEventListener(getDocument(i),"mousemove",s,tt)),wt||(wt=addEventListener(getDocument(i),"mouseup",Ht,tt)))},Lt=Ft=>{Tt(),$&&$(Ft)},Ht=Ft=>{Ct(),$&&$(Ft)},Tt=()=>{st&&st(),_&&_(),ut&&ut(),st=_=ut=void 0},Ct=()=>{vt&&vt(),wt&&wt(),vt=wt=void 0},St=()=>{Tt(),Ct()},It=(Ft=!0)=>{Ft?(rt||(rt=addEventListener(i,"touchstart",Mt,tt)),mt||(mt=addEventListener(i,"mousedown",At,tt))):(rt&&rt(),mt&&mt(),rt=mt=void 0,St())};return{enable:It,stop:St,destroy:()=>{It(!1),$=s=o=void 0}}},getDocument=i=>i instanceof Document?i:i.ownerDocument,createPanRecognizer=(i,o,s)=>{const $=s*(Math.PI/180),tt=i==="x",rt=Math.cos($),st=o*o;let _=0,ut=0,mt=!1,vt=0;return{start(wt,bt){_=wt,ut=bt,vt=0,mt=!0},detect(wt,bt){if(!mt)return!1;const Mt=wt-_,At=bt-ut,Lt=Mt*Mt+At*At;if(Lt<st)return!1;const Ht=Math.sqrt(Lt),Tt=(tt?Mt:At)/Ht;return Tt>rt?vt=1:Tt<-rt?vt=-1:vt=0,mt=!1,!0},isGesture(){return vt!==0},getDirection(){return vt}}},createGesture=i=>{let o=!1,s=!1,$=!0,tt=!1;const rt=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},i),st=rt.canStart,_=rt.onWillStart,ut=rt.onStart,mt=rt.onEnd,vt=rt.notCaptured,wt=rt.onMove,bt=rt.threshold,Mt=rt.passive,At=rt.blurOnStart,Lt={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Ht=createPanRecognizer(rt.direction,rt.threshold,rt.maxAngle),Tt=GESTURE_CONTROLLER.createGesture({name:i.gestureName,priority:i.gesturePriority,disableScroll:i.disableScroll}),Ct=xr=>{const Xr=now$1(xr);return s||!$||(updateDetail(xr,Lt),Lt.startX=Lt.currentX,Lt.startY=Lt.currentY,Lt.startTime=Lt.currentTime=Xr,Lt.velocityX=Lt.velocityY=Lt.deltaX=Lt.deltaY=0,Lt.event=xr,st&&st(Lt)===!1)||(Tt.release(),!Tt.start())?!1:(s=!0,bt===0?Bt():(Ht.start(Lt.startX,Lt.startY),!0))},St=xr=>{if(o){!tt&&$&&(tt=!0,calcGestureData(Lt,xr),requestAnimationFrame(It));return}calcGestureData(Lt,xr),Ht.detect(Lt.currentX,Lt.currentY)&&(!Ht.isGesture()||!Bt())&&Tr()},It=()=>{o&&(tt=!1,wt&&wt(Lt))},Bt=()=>Tt.capture()?(o=!0,$=!1,Lt.startX=Lt.currentX,Lt.startY=Lt.currentY,Lt.startTime=Lt.currentTime,_?_(Lt).then(Gt):Gt(),!0):!1,Ft=()=>{if(typeof document<"u"){const xr=document.activeElement;xr!=null&&xr.blur&&xr.blur()}},Gt=()=>{At&&Ft(),ut&&ut(Lt),$=!0},Xt=()=>{o=!1,s=!1,tt=!1,$=!0,Tt.release()},ir=xr=>{const Xr=o,ln=$;if(Xt(),!!ln){if(calcGestureData(Lt,xr),Xr){mt&&mt(Lt);return}vt&&vt(Lt)}},$r=createPointerEvents(rt.el,Ct,St,ir,{capture:!1,passive:Mt}),Tr=()=>{Xt(),$r.stop(),vt&&vt(Lt)};return{enable(xr=!0){xr||(o&&ir(void 0),Xt()),$r.enable(xr)},destroy(){Tt.destroy(),$r.destroy()}}},calcGestureData=(i,o)=>{if(!o)return;const s=i.currentX,$=i.currentY,tt=i.currentTime;updateDetail(o,i);const rt=i.currentX,st=i.currentY,ut=(i.currentTime=now$1(o))-tt;if(ut>0&&ut<100){const mt=(rt-s)/ut,vt=(st-$)/ut;i.velocityX=mt*.7+i.velocityX*.3,i.velocityY=vt*.7+i.velocityY*.3}i.deltaX=rt-i.startX,i.deltaY=st-i.startY,i.event=o},updateDetail=(i,o)=>{let s=0,$=0;if(i){const tt=i.changedTouches;if(tt&&tt.length>0){const rt=tt[0];s=rt.clientX,$=rt.clientY}else i.pageX!==void 0&&(s=i.pageX,$=i.pageY)}o.currentX=s,o.currentY=$},now$1=i=>i.timeStamp||Date.now();/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class Config{constructor(){this.m=new Map}reset(o){this.m=new Map(Object.entries(o))}get(o,s){const $=this.m.get(o);return $!==void 0?$:s}getBoolean(o,s=!1){const $=this.m.get(o);return $===void 0?s:typeof $=="string"?$==="true":!!$}getNumber(o,s){const $=parseFloat(this.m.get(o));return isNaN($)?s!==void 0?s:NaN:$}set(o,s){this.m.set(o,s)}}const config=new Config,configFromSession=i=>{try{const o=i.sessionStorage.getItem(IONIC_SESSION_KEY);return o!==null?JSON.parse(o):{}}catch(o){return{}}},saveConfig=(i,o)=>{try{i.sessionStorage.setItem(IONIC_SESSION_KEY,JSON.stringify(o))}catch(s){return}},configFromURL=i=>{const o={};return i.location.search.slice(1).split("&").map(s=>s.split("=")).map(([s,$])=>[decodeURIComponent(s),decodeURIComponent($)]).filter(([s])=>startsWith(s,IONIC_PREFIX)).map(([s,$])=>[s.slice(IONIC_PREFIX.length),$]).forEach(([s,$])=>{o[s]=$}),o},startsWith=(i,o)=>i.substr(0,o.length)===o,IONIC_PREFIX="ionic:",IONIC_SESSION_KEY="ionic-persist-config",getPlatforms=i=>setupPlatforms(i),isPlatform=(i,o)=>(typeof i=="string"&&(o=i,i=void 0),getPlatforms(i).includes(o)),setupPlatforms=(i=window)=>{if(typeof i>"u")return[];i.Ionic=i.Ionic||{};let o=i.Ionic.platforms;return o==null&&(o=i.Ionic.platforms=detectPlatforms(i),o.forEach(s=>i.document.documentElement.classList.add(`plt-${s}`))),o},detectPlatforms=i=>{const o=config.get("platform");return Object.keys(PLATFORMS_MAP).filter(s=>{const $=o==null?void 0:o[s];return typeof $=="function"?$(i):PLATFORMS_MAP[s](i)})},isMobileWeb=i=>isMobile(i)&&!isHybrid(i),isIpad=i=>!!(testUserAgent(i,/iPad/i)||testUserAgent(i,/Macintosh/i)&&isMobile(i)),isIphone=i=>testUserAgent(i,/iPhone/i),isIOS=i=>testUserAgent(i,/iPhone|iPod/i)||isIpad(i),isAndroid=i=>testUserAgent(i,/android|sink/i),isAndroidTablet=i=>isAndroid(i)&&!testUserAgent(i,/mobile/i),isPhablet=i=>{const o=i.innerWidth,s=i.innerHeight,$=Math.min(o,s),tt=Math.max(o,s);return $>390&&$<520&&tt>620&&tt<800},isTablet=i=>{const o=i.innerWidth,s=i.innerHeight,$=Math.min(o,s),tt=Math.max(o,s);return isIpad(i)||isAndroidTablet(i)||$>460&&$<820&&tt>780&&tt<1400},isMobile=i=>matchMedia(i,"(any-pointer:coarse)"),isDesktop=i=>!isMobile(i),isHybrid=i=>isCordova(i)||isCapacitorNative(i),isCordova=i=>!!(i.cordova||i.phonegap||i.PhoneGap),isCapacitorNative=i=>{const o=i.Capacitor;return!!(o!=null&&o.isNative)},isElectron=i=>testUserAgent(i,/electron/i),isPWA=i=>{var o;return!!(!((o=i.matchMedia)===null||o===void 0)&&o.call(i,"(display-mode: standalone)").matches||i.navigator.standalone)},testUserAgent=(i,o)=>o.test(i.navigator.userAgent),matchMedia=(i,o)=>{var s;return(s=i.matchMedia)===null||s===void 0?void 0:s.call(i,o).matches},PLATFORMS_MAP={ipad:isIpad,iphone:isIphone,ios:isIOS,android:isAndroid,phablet:isPhablet,tablet:isTablet,cordova:isCordova,capacitor:isCapacitorNative,electron:isElectron,pwa:isPWA,mobile:isMobile,mobileweb:isMobileWeb,desktop:isDesktop,hybrid:isHybrid};let defaultMode;const getIonMode$1=i=>i&&getMode(i)||defaultMode,initialize=(i={})=>{if(typeof window>"u")return;const o=window.document,s=window,$=s.Ionic=s.Ionic||{},tt={};i._ael&&(tt.ael=i._ael),i._rel&&(tt.rel=i._rel),i._ce&&(tt.ce=i._ce),setPlatformHelpers(tt);const rt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},configFromSession(s)),{persistConfig:!1}),$.config),configFromURL(s)),i);config.reset(rt),config.getBoolean("persistConfig")&&saveConfig(s,rt),setupPlatforms(s),$.config=config,$.mode=defaultMode=config.get("mode",o.documentElement.getAttribute("mode")||(isPlatform(s,"ios")?"ios":"md")),config.set("mode",defaultMode),o.documentElement.setAttribute("mode",defaultMode),o.documentElement.classList.add(defaultMode),config.getBoolean("_testing")&&config.set("animated",!1);const st=ut=>{var mt;return(mt=ut.tagName)===null||mt===void 0?void 0:mt.startsWith("ION-")},_=ut=>["ios","md"].includes(ut);setMode(ut=>{for(;ut;){const mt=ut.mode||ut.getAttribute("mode");if(mt){if(_(mt))return mt;st(ut)&&console.warn('Invalid ionic mode: "'+mt+'", expected: "ios" or "md"')}ut=ut.parentElement}return defaultMode})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const sanitizeDOMString=i=>{try{if(i instanceof IonicSafeString)return i.value;if(!isSanitizerEnabled()||typeof i!="string"||i==="")return i;if(i.includes("onload="))return"";const o=document.createDocumentFragment(),s=document.createElement("div");o.appendChild(s),s.innerHTML=i,blockedTags.forEach(st=>{const _=o.querySelectorAll(st);for(let ut=_.length-1;ut>=0;ut--){const mt=_[ut];mt.parentNode?mt.parentNode.removeChild(mt):o.removeChild(mt);const vt=getElementChildren(mt);for(let wt=0;wt<vt.length;wt++)sanitizeElement(vt[wt])}});const $=getElementChildren(o);for(let st=0;st<$.length;st++)sanitizeElement($[st]);const tt=document.createElement("div");tt.appendChild(o);const rt=tt.querySelector("div");return rt!==null?rt.innerHTML:tt.innerHTML}catch(o){return console.error(o),""}},sanitizeElement=i=>{if(i.nodeType&&i.nodeType!==1)return;if(typeof NamedNodeMap<"u"&&!(i.attributes instanceof NamedNodeMap)){i.remove();return}for(let s=i.attributes.length-1;s>=0;s--){const $=i.attributes.item(s),tt=$.name;if(!allowedAttributes.includes(tt.toLowerCase())){i.removeAttribute(tt);continue}const rt=$.value,st=i[tt];(rt!=null&&rt.toLowerCase().includes("javascript:")||st!=null&&st.toLowerCase().includes("javascript:"))&&i.removeAttribute(tt)}const o=getElementChildren(i);for(let s=0;s<o.length;s++)sanitizeElement(o[s])},getElementChildren=i=>i.children!=null?i.children:i.childNodes,isSanitizerEnabled=()=>{var i;const o=window,s=(i=o==null?void 0:o.Ionic)===null||i===void 0?void 0:i.config;return s?s.get?s.get("sanitizerEnabled",!0):s.sanitizerEnabled===!0||s.sanitizerEnabled===void 0:!0},allowedAttributes=["class","id","href","src","name","slot"],blockedTags=["script","style","iframe","meta","link","object","embed"];class IonicSafeString{constructor(o){this.value=o}}const ENABLE_HTML_CONTENT_DEFAULT=!1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const blockHardwareBackButton=()=>{document.addEventListener("backbutton",()=>{})},startHardwareBackButton=()=>{const i=document;let o=!1;i.addEventListener("backbutton",()=>{if(o)return;let s=0,$=[];const tt=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(_,ut){$.push({priority:_,handler:ut,id:s++})}}});i.dispatchEvent(tt);const rt=async _=>{try{if(_!=null&&_.handler){const ut=_.handler(st);ut!=null&&await ut}}catch(ut){console.error(ut)}},st=()=>{if($.length>0){let _={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};$.forEach(ut=>{ut.priority>=_.priority&&(_=ut)}),o=!0,$=$.filter(ut=>ut.id!==_.id),rt(_).then(()=>o=!1)}};st()})},OVERLAY_BACK_BUTTON_PRIORITY=100,MENU_BACK_BUTTON_PRIORITY=99,hardwareBackButton=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY,OVERLAY_BACK_BUTTON_PRIORITY,blockHardwareBackButton,startHardwareBackButton},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const attachComponent=async(i,o,s,$,tt,rt)=>{var st;if(i)return i.attachViewToDom(o,s,tt,$);if(!rt&&typeof s!="string"&&!(s instanceof HTMLElement))throw new Error("framework delegate is missing");const _=typeof s=="string"?(st=o.ownerDocument)===null||st===void 0?void 0:st.createElement(s):s;return $&&$.forEach(ut=>_.classList.add(ut)),tt&&Object.assign(_,tt),o.appendChild(_),await new Promise(ut=>componentOnReady(_,ut)),_},detachComponent=(i,o)=>{if(o){if(i){const s=o.parentElement;return i.removeViewFromDom(s,o)}o.remove()}return Promise.resolve()},CoreDelegate=()=>{let i,o;return{attachViewToDom:async(tt,rt,st={},_=[])=>{var ut,mt;if(i=tt,rt){const wt=typeof rt=="string"?(ut=i.ownerDocument)===null||ut===void 0?void 0:ut.createElement(rt):rt;_.forEach(bt=>wt.classList.add(bt)),Object.assign(wt,st),i.appendChild(wt),await new Promise(bt=>componentOnReady(wt,bt))}else if(i.children.length>0&&(i.tagName==="ION-MODAL"||i.tagName==="ION-POPOVER")&&!i.children[0].classList.contains("ion-delegate-host")){const bt=(mt=i.ownerDocument)===null||mt===void 0?void 0:mt.createElement("div");bt.classList.add("ion-delegate-host"),_.forEach(Mt=>bt.classList.add(Mt)),bt.append(...i.children),i.appendChild(bt)}const vt=document.querySelector("ion-app")||document.body;return o=document.createComment("ionic teleport"),i.parentNode.insertBefore(o,i),vt.appendChild(i),i},removeViewFromDom:()=>(i&&o&&(o.parentNode.insertBefore(i,o),o.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const printIonWarning=(i,...o)=>console.warn(`[Ionic Warning]: ${i}`,...o),printIonError=(i,...o)=>console.error(`[Ionic Error]: ${i}`,...o),printRequiredElementError=(i,...o)=>console.error(`<${i.tagName.toLowerCase()}> must be used inside ${o.join(" or ")}.`);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let lastOverlayIndex=0,lastId=0;const activeAnimations=new WeakMap,createController=i=>({create(o){return createOverlay(i,o)},dismiss(o,s,$){return dismissOverlay(document,o,s,i,$)},async getTop(){return getOverlay(document,i)}}),alertController=createController("ion-alert"),prepareOverlay=i=>{typeof document<"u"&&connectListeners(document);const o=lastOverlayIndex++;i.overlayIndex=o},setOverlayId=i=>(i.hasAttribute("id")||(i.id=`ion-overlay-${++lastId}`),i.id),createOverlay=(i,o)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(i).then(()=>{const s=document.createElement(i);return s.classList.add("overlay-hidden"),Object.assign(s,Object.assign(Object.assign({},o),{hasController:!0})),getAppRoot(document).appendChild(s),new Promise($=>componentOnReady(s,$))}):Promise.resolve(),focusableQueryString='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',focusFirstDescendant=(i,o)=>{let s=i.querySelector(focusableQueryString);const $=s==null?void 0:s.shadowRoot;$&&(s=$.querySelector(focusableQueryString)||s),s?focusElement(s):o.focus()},isOverlayHidden=i=>i.classList.contains("overlay-hidden"),focusLastDescendant=(i,o)=>{const s=Array.from(i.querySelectorAll(focusableQueryString));let $=s.length>0?s[s.length-1]:null;const tt=$==null?void 0:$.shadowRoot;tt&&($=tt.querySelector(focusableQueryString)||$),$?$.focus():o.focus()},trapKeyboardFocus=(i,o)=>{const s=getOverlay(o,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),$=i.target;if(!s||!$||s.classList.contains("ion-disable-focus-trap"))return;const tt=()=>{if(s===$)s.lastFocus=void 0;else{const st=getElementRoot(s);if(!st.contains($))return;const _=st.querySelector(".ion-overlay-wrapper");if(!_)return;if(_.contains($))s.lastFocus=$;else{const ut=s.lastFocus;focusFirstDescendant(_,s),ut===o.activeElement&&focusLastDescendant(_,s),s.lastFocus=o.activeElement}}},rt=()=>{if(s.contains($))s.lastFocus=$;else{const st=s.lastFocus;focusFirstDescendant(s,s),st===o.activeElement&&focusLastDescendant(s,s),s.lastFocus=o.activeElement}};s.shadowRoot?rt():tt()},connectListeners=i=>{lastOverlayIndex===0&&(lastOverlayIndex=1,i.addEventListener("focus",o=>{trapKeyboardFocus(o,i)},!0),i.addEventListener("ionBackButton",o=>{const s=getOverlay(i);s!=null&&s.backdropDismiss&&o.detail.register(OVERLAY_BACK_BUTTON_PRIORITY,()=>s.dismiss(void 0,BACKDROP))}),i.addEventListener("keydown",o=>{if(o.key==="Escape"){const s=getOverlay(i);s!=null&&s.backdropDismiss&&s.dismiss(void 0,BACKDROP)}}))},dismissOverlay=(i,o,s,$,tt)=>{const rt=getOverlay(i,$,tt);return rt?rt.dismiss(o,s):Promise.reject("overlay does not exist")},getOverlays=(i,o)=>(o===void 0&&(o="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(i.querySelectorAll(o)).filter(s=>s.overlayIndex>0)),getOverlay=(i,o,s)=>{const $=getOverlays(i,o).filter(tt=>!isOverlayHidden(tt));return s===void 0?$[$.length-1]:$.find(tt=>tt.id===s)},setRootAriaHidden=(i=!1)=>{const s=getAppRoot(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");s&&(i?s.setAttribute("aria-hidden","true"):s.removeAttribute("aria-hidden"))},present=async(i,o,s,$,tt)=>{var rt,st;if(i.presented)return;setRootAriaHidden(!0),i.presented=!0,i.willPresent.emit(),(rt=i.willPresentShorthand)===null||rt===void 0||rt.emit();const _=getIonMode$1(i),ut=i.enterAnimation?i.enterAnimation:config.get(o,_==="ios"?s:$);await overlayAnimation(i,ut,i.el,tt)&&(i.didPresent.emit(),(st=i.didPresentShorthand)===null||st===void 0||st.emit()),i.el.tagName!=="ION-TOAST"&&focusPreviousElementOnDismiss(i.el),i.keyboardClose&&(document.activeElement===null||!i.el.contains(document.activeElement))&&i.el.focus()},focusPreviousElementOnDismiss=async i=>{let o=document.activeElement;if(!o)return;const s=o==null?void 0:o.shadowRoot;s&&(o=s.querySelector(focusableQueryString)||o),await i.onDidDismiss(),o.focus()},dismiss=async(i,o,s,$,tt,rt,st)=>{var _,ut;if(!i.presented)return!1;setRootAriaHidden(!1),i.presented=!1;try{i.el.style.setProperty("pointer-events","none"),i.willDismiss.emit({data:o,role:s}),(_=i.willDismissShorthand)===null||_===void 0||_.emit({data:o,role:s});const mt=getIonMode$1(i),vt=i.leaveAnimation?i.leaveAnimation:config.get($,mt==="ios"?tt:rt);s!==GESTURE&&await overlayAnimation(i,vt,i.el,st),i.didDismiss.emit({data:o,role:s}),(ut=i.didDismissShorthand)===null||ut===void 0||ut.emit({data:o,role:s}),activeAnimations.delete(i),i.el.classList.add("overlay-hidden"),i.el.style.removeProperty("pointer-events"),i.el.lastFocus!==void 0&&(i.el.lastFocus=void 0)}catch(mt){console.error(mt)}return i.el.remove(),!0},getAppRoot=i=>i.querySelector("ion-app")||i.body,overlayAnimation=async(i,o,s,$)=>{s.classList.remove("overlay-hidden");const tt=i.el,rt=o(tt,$);(!i.animated||!config.getBoolean("animated",!0))&&rt.duration(0),i.keyboardClose&&rt.beforeAddWrite(()=>{const _=s.ownerDocument.activeElement;_!=null&&_.matches("input,ion-input, ion-textarea")&&_.blur()});const st=activeAnimations.get(i)||[];return activeAnimations.set(i,[...st,rt]),await rt.play(),!0},eventMethod=(i,o)=>{let s;const $=new Promise(tt=>s=tt);return onceEvent(i,o,tt=>{s(tt.detail)}),$},onceEvent=(i,o,s)=>{const $=tt=>{removeEventListener(i,o,$),s(tt)};addEventListener$1(i,o,$)},isCancel=i=>i==="cancel"||i===BACKDROP,defaultGate=i=>i(),safeCall$1=(i,o)=>{if(typeof i=="function")return config.get("_zoneGate",defaultGate)(()=>{try{return i(o)}catch($){throw $}})},BACKDROP="backdrop",GESTURE="gesture",createDelegateController=i=>{let o=!1,s;const $=CoreDelegate(),tt=(_=!1)=>{if(s&&!_)return{delegate:s,inline:o};const{el:ut,hasController:mt,delegate:vt}=i;return o=ut.parentNode!==null&&!mt,s=o?vt||$:vt,{inline:o,delegate:s}};return{attachViewToDom:async _=>{const{delegate:ut}=tt(!0);if(ut)return await ut.attachViewToDom(i.el,_);const{hasController:mt}=i;if(mt&&_!==void 0)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:_}=tt();_&&i.el!==void 0&&_.removeViewFromDom(i.el.parentElement,i.el)}}},createTriggerController=()=>{let i;const o=()=>{i&&(i(),i=void 0)};return{addClickListener:($,tt)=>{o();const rt=tt!==void 0?document.getElementById(tt):null;if(!rt){printIonWarning(`A trigger element with the ID "${tt}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,$);return}i=((_,ut)=>{const mt=()=>{ut.present()};return _.addEventListener("click",mt),()=>{_.removeEventListener("click",mt)}})(rt,$)},removeClickListener:o}};function __rest(i,o){var s={};for(var $ in i)Object.prototype.hasOwnProperty.call(i,$)&&o.indexOf($)<0&&(s[$]=i[$]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,$=Object.getOwnPropertySymbols(i);tt<$.length;tt++)o.indexOf($[tt])<0&&Object.prototype.propertyIsEnumerable.call(i,$[tt])&&(s[$[tt]]=i[$[tt]]);return s}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const chevronForward="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const backdropIosCss=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",backdropMdCss=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",Backdrop=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=createEvent(this,"ionBackdropTap",7),this.blocker=GESTURE_CONTROLLER.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(o){this.emitTap(o)}emitTap(o){this.stopPropagation&&(o.preventDefault(),o.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const o=getIonMode$1(this);return h$3(Host$1,{tabindex:"-1","aria-hidden":"true",class:{[o]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:backdropIosCss,md:backdropMdCss}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function defineCustomElement$r(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(o=>{switch(o){case"ion-backdrop":customElements.get(o)||customElements.define(o,Backdrop);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const hostContext=(i,o)=>o.closest(i)!==null,createColorClasses$1=(i,o)=>typeof i=="string"&&i.length>0?Object.assign({"ion-color":!0,[`ion-color-${i}`]:!0},o):o,getClassList=i=>i!==void 0?(Array.isArray(i)?i:i.split(" ")).filter(s=>s!=null).map(s=>s.trim()).filter(s=>s!==""):[],getClassMap=i=>{const o={};return getClassList(i).forEach(s=>o[s]=!0),o},SCHEME=/^[a-z][a-z0-9+\-.]*:/,openURL=async(i,o,s,$)=>{if(i!=null&&i[0]!=="#"&&!SCHEME.test(i)){const tt=document.querySelector("ion-router");if(tt)return o!=null&&o.preventDefault(),tt.push(i,s,$)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cardContentIosCss="ion-card-content{display:block;position:relative}.card-content-ios{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:20px;font-size:16px;line-height:1.4}.card-content-ios h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.card-content-ios h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.card-content-ios h3,.card-content-ios h4,.card-content-ios h5,.card-content-ios h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal}.card-content-ios p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px}ion-card-header+.card-content-ios{padding-top:0}",cardContentMdCss="ion-card-content{display:block;position:relative}.card-content-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:13px;padding-bottom:13px;font-size:14px;line-height:1.5}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}",CardContent=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost()}render(){const o=getIonMode$1(this);return h$3(Host$1,{class:{[o]:!0,[`card-content-${o}`]:!0}})}static get style(){return{ios:cardContentIosCss,md:cardContentMdCss}}},[32,"ion-card-content"]);function defineCustomElement$1$h(){if(typeof customElements>"u")return;["ion-card-content"].forEach(o=>{switch(o){case"ion-card-content":customElements.get(o)||customElements.define(o,CardContent);break}})}const defineCustomElement$q=defineCustomElement$1$h;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cardHeaderIosCss=":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:16px;-ms-flex-direction:column-reverse;flex-direction:column-reverse}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.card-header-translucent){background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(30px);backdrop-filter:saturate(180%) blur(30px)}}",cardHeaderMdCss=":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:16px;padding-bottom:16px}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}",CardHeader=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.translucent=!1}render(){const o=getIonMode$1(this);return h$3(Host$1,{class:createColorClasses$1(this.color,{"card-header-translucent":this.translucent,"ion-inherit-color":!0,[o]:!0})},h$3("slot",null))}static get style(){return{ios:cardHeaderIosCss,md:cardHeaderMdCss}}},[33,"ion-card-header",{color:[513],translucent:[4]}]);function defineCustomElement$1$g(){if(typeof customElements>"u")return;["ion-card-header"].forEach(o=>{switch(o){case"ion-card-header":customElements.get(o)||customElements.define(o,CardHeader);break}})}const defineCustomElement$p=defineCustomElement$1$g;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cardSubtitleIosCss=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-600, #666666);margin-left:0;margin-right:0;margin-top:0;margin-bottom:4px;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:12px;font-weight:700;letter-spacing:0.4px;text-transform:uppercase}",cardSubtitleMdCss=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-550, #737373);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:14px;font-weight:500}",CardSubtitle=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const o=getIonMode$1(this);return h$3(Host$1,{role:"heading","aria-level":"3",class:createColorClasses$1(this.color,{"ion-inherit-color":!0,[o]:!0})},h$3("slot",null))}static get style(){return{ios:cardSubtitleIosCss,md:cardSubtitleMdCss}}},[33,"ion-card-subtitle",{color:[513]}]);function defineCustomElement$1$f(){if(typeof customElements>"u")return;["ion-card-subtitle"].forEach(o=>{switch(o){case"ion-card-subtitle":customElements.get(o)||customElements.define(o,CardSubtitle);break}})}const defineCustomElement$o=defineCustomElement$1$f;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cardTitleIosCss=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-text-color, #000);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:28px;font-weight:700;line-height:1.2}",cardTitleMdCss=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-850, #262626);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;line-height:1.2}",CardTitle=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const o=getIonMode$1(this);return h$3(Host$1,{role:"heading","aria-level":"2",class:createColorClasses$1(this.color,{"ion-inherit-color":!0,[o]:!0})},h$3("slot",null))}static get style(){return{ios:cardTitleIosCss,md:cardTitleMdCss}}},[33,"ion-card-title",{color:[513]}]);function defineCustomElement$1$e(){if(typeof customElements>"u")return;["ion-card-title"].forEach(o=>{switch(o){case"ion-card-title":customElements.get(o)||customElements.define(o,CardTitle);break}})}const defineCustomElement$n=defineCustomElement$1$e;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const rippleEffectCss=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",RippleEffect=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(o,s){return new Promise($=>{readTask(()=>{const tt=this.el.getBoundingClientRect(),rt=tt.width,st=tt.height,_=Math.sqrt(rt*rt+st*st),ut=Math.max(st,rt),mt=this.unbounded?ut:_+PADDING,vt=Math.floor(ut*INITIAL_ORIGIN_SCALE),wt=mt/vt;let bt=o-tt.left,Mt=s-tt.top;this.unbounded&&(bt=rt*.5,Mt=st*.5);const At=bt-vt*.5,Lt=Mt-vt*.5,Ht=rt*.5-bt,Tt=st*.5-Mt;writeTask$1(()=>{const Ct=document.createElement("div");Ct.classList.add("ripple-effect");const St=Ct.style;St.top=Lt+"px",St.left=At+"px",St.width=St.height=vt+"px",St.setProperty("--final-scale",`${wt}`),St.setProperty("--translate-end",`${Ht}px, ${Tt}px`),(this.el.shadowRoot||this.el).appendChild(Ct),setTimeout(()=>{$(()=>{removeRipple(Ct)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const o=getIonMode$1(this);return h$3(Host$1,{role:"presentation",class:{[o]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return rippleEffectCss}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),removeRipple=i=>{i.classList.add("fade-out"),setTimeout(()=>{i.remove()},200)},PADDING=10,INITIAL_ORIGIN_SCALE=.5;function defineCustomElement$m(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(o=>{switch(o){case"ion-ripple-effect":customElements.get(o)||customElements.define(o,RippleEffect);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const win$1=typeof window<"u"?window:void 0;win$1&&(win$1.CSS&&win$1.CSS.supports&&win$1.CSS.supports("--a: 0"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const isRTL$1=i=>i&&i.dir!==""?i.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const contentCss=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',Content=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=createEvent(this,"ionScrollStart",7),this.ionScroll=createEvent(this,"ionScroll",7),this.ionScrollEnd=createEvent(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:o}=this,s=getIonMode$1(this);return o===void 0?s==="ios"&&isPlatform("ios"):o}resize(){this.fullscreen?readTask(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,forceUpdate(this))}readDimensions(){const o=getPageElement(this.el),s=Math.max(this.el.offsetTop,0),$=Math.max(o.offsetHeight-s-this.el.offsetHeight,0);(s!==this.cTop||$!==this.cBottom)&&(this.cTop=s,this.cBottom=$,forceUpdate(this))}onScroll(o){const s=Date.now(),$=!this.isScrolling;this.lastScroll=s,$&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,readTask(tt=>{this.queued=!1,this.detail.event=o,updateScrollDetail(this.detail,this.scrollEl,tt,$),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(o=>componentOnReady(this.el,o)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(o=>componentOnReady(this.el,o)),Promise.resolve(this.backgroundContentEl)}scrollToTop(o=0){return this.scrollToPoint(void 0,0,o)}async scrollToBottom(o=0){const s=await this.getScrollElement(),$=s.scrollHeight-s.clientHeight;return this.scrollToPoint(void 0,$,o)}async scrollByPoint(o,s,$){const tt=await this.getScrollElement();return this.scrollToPoint(o+tt.scrollLeft,s+tt.scrollTop,$)}async scrollToPoint(o,s,$=0){const tt=await this.getScrollElement();if($<32){s!=null&&(tt.scrollTop=s),o!=null&&(tt.scrollLeft=o);return}let rt,st=0;const _=new Promise(Mt=>rt=Mt),ut=tt.scrollTop,mt=tt.scrollLeft,vt=s!=null?s-ut:0,wt=o!=null?o-mt:0,bt=Mt=>{const At=Math.min(1,(Mt-st)/$)-1,Lt=Math.pow(At,3)+1;vt!==0&&(tt.scrollTop=Math.floor(Lt*vt+ut)),wt!==0&&(tt.scrollLeft=Math.floor(Lt*wt+mt)),Lt<1?requestAnimationFrame(bt):rt()};return requestAnimationFrame(Mt=>{st=Mt,bt(Mt)}),_}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:o,scrollX:s,scrollY:$,el:tt}=this,rt=isRTL$1(tt)?"rtl":"ltr",st=getIonMode$1(this),_=this.shouldForceOverscroll(),ut=st==="ios",mt=o?"main":"div";return this.resize(),h$3(Host$1,{class:createColorClasses$1(this.color,{[st]:!0,"content-sizing":hostContext("ion-popover",this.el),overscroll:_,[`content-${rt}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},h$3("div",{ref:vt=>this.backgroundContentEl=vt,id:"background-content",part:"background"}),h$3(mt,{class:{"inner-scroll":!0,"scroll-x":s,"scroll-y":$,overscroll:(s||$)&&_},ref:vt=>this.scrollEl=vt,onScroll:this.scrollEvents?vt=>this.onScroll(vt):void 0,part:"scroll"},h$3("slot",null)),ut?h$3("div",{class:"transition-effect"},h$3("div",{class:"transition-cover"}),h$3("div",{class:"transition-shadow"})):null,h$3("slot",{name:"fixed"}))}get el(){return this}static get style(){return contentCss}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),getParentElement=i=>{var o;return i.parentElement?i.parentElement:!((o=i.parentNode)===null||o===void 0)&&o.host?i.parentNode.host:null},getPageElement=i=>{const o=i.closest("ion-tabs");if(o)return o;const s=i.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return s||getParentElement(i)},updateScrollDetail=(i,o,s,$)=>{const tt=i.currentX,rt=i.currentY,st=i.currentTime,_=o.scrollLeft,ut=o.scrollTop,mt=s-st;if($&&(i.startTime=s,i.startX=_,i.startY=ut,i.velocityX=i.velocityY=0),i.currentTime=s,i.currentX=i.scrollLeft=_,i.currentY=i.scrollTop=ut,i.deltaX=_-i.startX,i.deltaY=ut-i.startY,mt>0&&mt<100){const vt=(_-tt)/mt,wt=(ut-rt)/mt;i.velocityX=vt*.7+i.velocityX*.3,i.velocityY=wt*.7+i.velocityY*.3}};function defineCustomElement$1$d(){if(typeof customElements>"u")return;["ion-content"].forEach(o=>{switch(o){case"ion-content":customElements.get(o)||customElements.define(o,Content);break}})}const defineCustomElement$l=defineCustomElement$1$d;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const itemIosCss=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--color:var(--ion-item-color, var(--ion-text-color, #000));--highlight-height:0px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--bottom-padding-start:0px;font-size:16px}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-interactive){--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px;--show-inset-highlight:0}.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus) .item-highlight{border-top:none;border-right:none;border-left:none}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:0px;--padding-bottom:0px;--padding-start:.5em;--padding-end:.5em;height:24px;font-size:13px}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:0}',itemMdCss=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:1px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.item-fill-outline){--highlight-height:2px}:host(.item-fill-none.item-interactive.ion-focus) .item-highlight,:host(.item-fill-none.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-none.item-interactive.ion-focus) .item-native,:host(.item-fill-none.item-interactive.item-has-focus) .item-native,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-highlight{border-width:var(--full-highlight-height);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-native{border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-highlight,:host(.item-fill-solid.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-native,:host(.item-fill-solid.item-interactive.item-has-focus) .item-native,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-fill-outline) .item-highlight{--position-offset:calc(-1 * var(--border-width));top:var(--position-offset);width:calc(100% + 2 * var(--border-width));height:calc(100% + 2 * var(--border-width));-webkit-transition:none;transition:none}@supports (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{inset-inline-start:var(--position-offset)}}@supports not (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{left:var(--position-offset)}:host-context([dir=rtl]):host(.item-fill-outline) .item-highlight,:host-context([dir=rtl]).item-fill-outline .item-highlight{left:unset;right:unset;right:var(--position-offset)}@supports selector(:dir(rtl)){:host(.item-fill-outline) .item-highlight:dir(rtl){left:unset;right:unset;right:var(--position-offset)}}}:host(.item-fill-outline.ion-focused) .item-native,:host(.item-fill-outline.item-has-focus) .item-native{border-color:transparent}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted([slot=end]){-webkit-margin-start:32px;margin-inline-start:32px}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){-webkit-margin-end:8px;margin-inline-end:8px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]:not([slot=helper]):not([slot=error])){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){-webkit-padding-end:16px;padding-inline-end:16px}::slotted(ion-note[slot=end]){-webkit-padding-start:16px;padding-inline-start:16px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:8px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:0;--padding-bottom:0;--padding-start:.6em;--padding-end:.6em;height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}:host(.ion-color){--highlight-color-focused:var(--ion-color-contrast)}:host(.item-label-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid.ion-color),:host(.item-fill-outline.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid){--background:var(--ion-color-step-50, #f2f2f2);--background-hover:var(--ion-color-step-100, #e6e6e6);--background-focused:var(--ion-color-step-150, #d9d9d9);--border-width:0 0 1px 0;--inner-border-width:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid),:host-context([dir=rtl]).item-fill-solid{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid):dir(rtl){border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.item-fill-solid) .item-native{--border-color:var(--ion-color-step-500, gray)}:host(.item-fill-solid.ion-focused) .item-native,:host(.item-fill-solid.item-has-focus) .item-native{--background:var(--background-focused)}:host(.item-fill-solid.item-shape-round){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid.item-shape-round),:host-context([dir=rtl]).item-fill-solid.item-shape-round{border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid.item-shape-round):dir(rtl){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}}@media (any-hover: hover){:host(.item-fill-solid:hover) .item-native{--background:var(--background-hover);--border-color:var(--ion-color-step-750, #404040)}}:host(.item-fill-outline){--ripple-color:transparent;--background-focused:transparent;--background-hover:transparent;--border-color:var(--ion-color-step-500, gray);--border-width:1px;border:none;overflow:visible}:host(.item-fill-outline) .item-native{--native-padding-left:16px;border-radius:4px}:host(.item-fill-outline.item-shape-round) .item-native{--inner-padding-start:16px;border-radius:28px}:host(.item-fill-outline.item-shape-round) .item-bottom{-webkit-padding-start:32px;padding-inline-start:32px}:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-textarea:not(:first-child)){-webkit-transform:translateY(-14px);transform:translateY(-14px)}@media (any-hover: hover){:host(.item-fill-outline:hover) .item-native{--border-color:var(--ion-color-step-750, #404040)}}.item-counter{letter-spacing:0.0333333333em}',Item=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=chevronForward,this.disabled=!1,this.download=void 0,this.fill=void 0,this.shape=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.counter=!1,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button",this.counterFormatter=void 0,this.counterString=void 0}counterFormatterChanged(){this.updateCounterOutput(this.getFirstInput())}handleIonInput(o){this.counter&&o.target===this.getFirstInput()&&this.updateCounterOutput(o.target)}labelColorChanged(o){const{color:s}=this;s===void 0&&(this.labelColorStyles=o.detail)}itemStyle(o){o.stopPropagation();const s=o.target.tagName,$=o.detail,tt={},rt=this.itemStyles.get(s)||{};let st=!1;Object.keys($).forEach(_=>{if($[_]){const ut=`item-${_}`;rt[ut]||(st=!0),tt[ut]=!0}}),!st&&Object.keys(tt).length!==Object.keys(rt).length&&(st=!0),st&&(this.itemStyles.set(s,tt),forceUpdate(this))}connectedCallback(){this.counter&&this.updateCounterOutput(this.getFirstInput()),this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=inheritAttributes$1(this.el,["aria-label"])}componentDidLoad(){const{el:o,counter:s,counterFormatter:$,fill:tt,shape:rt}=this;o.querySelector('[slot="helper"]')!==null&&printIonWarning('The "helper" slot has been deprecated in favor of using the "helperText" property on ion-input or ion-textarea.',o),o.querySelector('[slot="error"]')!==null&&printIonWarning('The "error" slot has been deprecated in favor of using the "errorText" property on ion-input or ion-textarea.',o),s===!0&&printIonWarning('The "counter" property has been deprecated in favor of using the "counter" property on ion-input or ion-textarea.',o),$!==void 0&&printIonWarning('The "counterFormatter" property has been deprecated in favor of using the "counterFormatter" property on ion-input or ion-textarea.',o),tt!==void 0&&printIonWarning('The "fill" property has been deprecated in favor of using the "fill" property on ion-input or ion-textarea.',o),rt!==void 0&&printIonWarning('The "shape" property has been deprecated in favor of using the "shape" property on ion-input or ion-textarea.',o),raf(()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()})}setMultipleInputs(){const o=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),s=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),$=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=o.length+s.length>1||o.length+$.length>1||o.length>0&&this.isClickable()}hasCover(){return this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length===1&&!this.multipleInputs}isClickable(){return this.href!==void 0||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const o=this.el.querySelector(".ion-focusable");return this.canActivate()||o!==null}getFirstInput(){return this.el.querySelectorAll("ion-input, ion-textarea")[0]}updateCounterOutput(o){var s,$;const{counter:tt,counterFormatter:rt,defaultCounterFormatter:st}=this;if(tt&&!this.multipleInputs&&(o==null?void 0:o.maxlength)!==void 0){const _=($=(s=o==null?void 0:o.value)===null||s===void 0?void 0:s.toString().length)!==null&&$!==void 0?$:0;if(rt===void 0)this.counterString=st(_,o.maxlength);else try{this.counterString=rt(_,o.maxlength)}catch(ut){printIonError("Exception in provided `counterFormatter`.",ut),this.counterString=st(_,o.maxlength)}}}defaultCounterFormatter(o,s){return`${o} / ${s}`}hasStartEl(){this.el.querySelector('[slot="start"]')!==null&&this.el.classList.add("item-has-start-slot")}render(){const{counterString:o,detail:s,detailIcon:$,download:tt,fill:rt,labelColorStyles:st,lines:_,disabled:ut,href:mt,rel:vt,shape:wt,target:bt,routerAnimation:Mt,routerDirection:At,inheritedAriaAttributes:Lt}=this,Ht={},Tt=getIonMode$1(this),Ct=this.isClickable(),St=this.canActivate(),It=Ct?mt===void 0?"button":"a":"div",Bt=It==="button"?{type:this.type}:{download:tt,href:mt,rel:vt,target:bt},Ft=Ct?{onClick:Tr=>{openURL(mt,Tr,At,Mt)}}:{},Gt=s!==void 0?s:Tt==="ios"&&Ct;this.itemStyles.forEach(Tr=>{Object.assign(Ht,Tr)});const Xt=ut||Ht["item-interactive-disabled"]?"true":null,ir=rt||"none",$r=hostContext("ion-list",this.el);return h$3(Host$1,{"aria-disabled":Xt,class:Object.assign(Object.assign(Object.assign({},Ht),st),createColorClasses$1(this.color,{item:!0,[Tt]:!0,"item-lines-default":_===void 0,[`item-lines-${_}`]:_!==void 0,[`item-fill-${ir}`]:!0,[`item-shape-${wt}`]:wt!==void 0,"item-disabled":ut,"in-list":$r,"item-multiple-inputs":this.multipleInputs,"ion-activatable":St,"ion-focusable":this.focusable,"item-rtl":document.dir==="rtl"})),role:$r?"listitem":null},h$3(It,Object.assign({},Bt,Lt,{class:"item-native",part:"native",disabled:ut},Ft),h$3("slot",{name:"start"}),h$3("div",{class:"item-inner"},h$3("div",{class:"input-wrapper"},h$3("slot",null)),h$3("slot",{name:"end"}),Gt&&h$3("ion-icon",{icon:$,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":$===chevronForward}),h$3("div",{class:"item-inner-highlight"})),St&&Tt==="md"&&h$3("ion-ripple-effect",null),h$3("div",{class:"item-highlight"})),h$3("div",{class:"item-bottom"},h$3("slot",{name:"error"}),h$3("slot",{name:"helper"}),o&&h$3("ion-note",{class:"item-counter"},o)))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{counterFormatter:["counterFormatterChanged"]}}static get style(){return{ios:itemIosCss,md:itemMdCss}}},[49,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[4],download:[1],fill:[1],shape:[1],href:[1],rel:[1],lines:[1],counter:[4],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],counterFormatter:[16],multipleInputs:[32],focusable:[32],counterString:[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const labelIosCss=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",labelMdCss='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',Label=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.ionColor=createEvent(this,"ionColor",7),this.ionStyle=createEvent(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:o}=this;this.ionColor.emit({"item-label-color":o!==void 0,[`ion-color-${o}`]:o!==void 0})}emitStyle(){const{inRange:o,position:s}=this;o||this.ionStyle.emit({label:!0,[`label-${s}`]:s!==void 0})}render(){const o=this.position,s=getIonMode$1(this);return h$3(Host$1,{class:createColorClasses$1(this.color,{[s]:!0,"in-item-color":hostContext("ion-item.ion-color",this.el),[`label-${o}`]:o!==void 0,["label-no-animate"]:this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:labelIosCss,md:labelMdCss}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function defineCustomElement$k(){if(typeof customElements>"u")return;["ion-label"].forEach(o=>{switch(o){case"ion-label":customElements.get(o)||customElements.define(o,Label);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const HapticEngine={getEngine(){var i;const o=window;return o.TapticEngine||((i=o.Capacitor)===null||i===void 0?void 0:i.isPluginAvailable("Haptics"))&&o.Capacitor.Plugins.Haptics},available(){var i;const o=window;return this.getEngine()?((i=o.Capacitor)===null||i===void 0?void 0:i.getPlatform())==="web"?typeof navigator<"u"&&navigator.vibrate!==void 0:!0:!1},isCordova(){return!!window.TapticEngine},isCapacitor(){return!!window.Capacitor},impact(i){const o=this.getEngine();if(!o)return;const s=this.isCapacitor()?i.style.toUpperCase():i.style;o.impact({style:s})},notification(i){const o=this.getEngine();if(!o)return;const s=this.isCapacitor()?i.style.toUpperCase():i.style;o.notification({style:s})},selection(){this.impact({style:"light"})},selectionStart(){const i=this.getEngine();i&&(this.isCapacitor()?i.selectionStart():i.gestureSelectionStart())},selectionChanged(){const i=this.getEngine();i&&(this.isCapacitor()?i.selectionChanged():i.gestureSelectionChanged())},selectionEnd(){const i=this.getEngine();i&&(this.isCapacitor()?i.selectionEnd():i.gestureSelectionEnd())}},hapticAvailable=()=>HapticEngine.available(),hapticSelectionStart=()=>{hapticAvailable()&&HapticEngine.selectionStart()},hapticSelectionChanged=()=>{hapticAvailable()&&HapticEngine.selectionChanged()},hapticSelectionEnd=()=>{hapticAvailable()&&HapticEngine.selectionEnd()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ION_CONTENT_TAG_NAME="ION-CONTENT",ION_CONTENT_ELEMENT_SELECTOR="ion-content",ION_CONTENT_CLASS_SELECTOR=".ion-content-scroll-host",ION_CONTENT_SELECTOR=`${ION_CONTENT_ELEMENT_SELECTOR}, ${ION_CONTENT_CLASS_SELECTOR}`,isIonContent=i=>i.tagName===ION_CONTENT_TAG_NAME,getScrollElement=async i=>isIonContent(i)?(await new Promise(o=>componentOnReady(i,o)),i.getScrollElement()):i,findIonContent=i=>{const o=i.querySelector(ION_CONTENT_CLASS_SELECTOR);return o||i.querySelector(ION_CONTENT_SELECTOR)},findClosestIonContent=i=>i.closest(ION_CONTENT_SELECTOR),scrollToTop=(i,o)=>isIonContent(i)?i.scrollToTop(o):Promise.resolve(i.scrollTo({top:0,left:0,behavior:o>0?"smooth":"auto"})),scrollByPoint=(i,o,s,$)=>isIonContent(i)?i.scrollByPoint(o,s,$):Promise.resolve(i.scrollBy({top:s,left:o,behavior:$>0?"smooth":"auto"})),printIonContentErrorMsg=i=>printRequiredElementError(i,ION_CONTENT_ELEMENT_SELECTOR),disableContentScrollY=i=>{if(isIonContent(i)){const o=i,s=o.scrollY;return o.scrollY=!1,s}else return i.style.setProperty("overflow","hidden"),!0},resetContentScrollY=(i,o)=>{isIonContent(i)?i.scrollY=o:i.style.removeProperty("overflow")};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var KeyboardResize;(function(i){i.Body="body",i.Ionic="ionic",i.Native="native",i.None="none"})(KeyboardResize||(KeyboardResize={}));const Keyboard={getEngine(){var i;return((i=win$2==null?void 0:win$2.Capacitor)===null||i===void 0?void 0:i.isPluginAvailable("Keyboard"))&&(win$2==null?void 0:win$2.Capacitor.Plugins.Keyboard)},getResizeMode(){const i=this.getEngine();return i!=null&&i.getResizeMode?i.getResizeMode().catch(o=>{if(o.code!=="UNIMPLEMENTED")throw o}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const getResizeContainer=i=>{if(doc$1===void 0||i===KeyboardResize.None||i===void 0)return null;const o=doc$1.querySelector("ion-app");return o!=null?o:doc$1.body},getResizeContainerHeight=i=>{const o=getResizeContainer(i);return o===null?0:o.clientHeight},createKeyboardController=async i=>{let o,s,$,tt;const rt=async()=>{const vt=await Keyboard.getResizeMode(),wt=vt===void 0?void 0:vt.mode;o=()=>{tt===void 0&&(tt=getResizeContainerHeight(wt)),$=!0,st($,wt)},s=()=>{$=!1,st($,wt)},win$2==null||win$2.addEventListener("keyboardWillShow",o),win$2==null||win$2.addEventListener("keyboardWillHide",s)},st=(vt,wt)=>{i&&i(vt,_(wt))},_=vt=>{if(tt===0||tt===getResizeContainerHeight(vt))return;const wt=getResizeContainer(vt);if(wt!==null)return new Promise(bt=>{const Mt=()=>{wt.clientHeight===tt&&(At.disconnect(),bt())},At=new ResizeObserver(Mt);At.observe(wt)})},ut=()=>{win$2==null||win$2.removeEventListener("keyboardWillShow",o),win$2==null||win$2.removeEventListener("keyboardWillHide",s),o=s=void 0},mt=()=>$;return await rt(),{init:rt,destroy:ut,isKeyboardVisible:mt}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const TRANSITION="all 0.2s ease-in-out",cloneElement=i=>{const o=document.querySelector(`${i}.ion-cloned-element`);if(o!==null)return o;const s=document.createElement(i);return s.classList.add("ion-cloned-element"),s.style.setProperty("display","none"),document.body.appendChild(s),s},createHeaderIndex=i=>{if(!i)return;const o=i.querySelectorAll("ion-toolbar");return{el:i,toolbars:Array.from(o).map(s=>{const $=s.querySelector("ion-title");return{el:s,background:s.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:$,innerTitleEl:$?$.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(s.querySelectorAll("ion-buttons"))}})}},handleContentScroll=(i,o,s)=>{readTask(()=>{const $=i.scrollTop,tt=clamp$1(1,1+-$/500,1.1);s.querySelector("ion-refresher.refresher-native")===null&&writeTask$1(()=>{scaleLargeTitles(o.toolbars,tt)})})},setToolbarBackgroundOpacity=(i,o)=>{i.collapse!=="fade"&&(o===void 0?i.style.removeProperty("--opacity-scale"):i.style.setProperty("--opacity-scale",o.toString()))},handleToolbarBorderIntersection=(i,o,s)=>{if(!i[0].isIntersecting)return;const $=i[0].intersectionRatio>.9||s<=0?0:(1-i[0].intersectionRatio)*100/75;setToolbarBackgroundOpacity(o.el,$===1?void 0:$)},handleToolbarIntersection=(i,o,s,$)=>{writeTask$1(()=>{const tt=$.scrollTop;handleToolbarBorderIntersection(i,o,tt);const rt=i[0],st=rt.intersectionRect,_=st.width*st.height,ut=rt.rootBounds.width*rt.rootBounds.height,mt=_===0&&ut===0,vt=Math.abs(st.left-rt.boundingClientRect.left),wt=Math.abs(st.right-rt.boundingClientRect.right),bt=_>0&&(vt>=5||wt>=5);mt||bt||(rt.isIntersecting?(setHeaderActive(o,!1),setHeaderActive(s)):(st.x===0&&st.y===0||st.width!==0&&st.height!==0)&&tt>0&&(setHeaderActive(o),setHeaderActive(s,!1),setToolbarBackgroundOpacity(o.el)))})},setHeaderActive=(i,o=!0)=>{const s=i.el;o?(s.classList.remove("header-collapse-condense-inactive"),s.removeAttribute("aria-hidden")):(s.classList.add("header-collapse-condense-inactive"),s.setAttribute("aria-hidden","true"))},scaleLargeTitles=(i=[],o=1,s=!1)=>{i.forEach($=>{const tt=$.ionTitleEl,rt=$.innerTitleEl;!tt||tt.size!=="large"||(rt.style.transition=s?TRANSITION:"",rt.style.transform=`scale3d(${o}, ${o}, 1)`)})},handleHeaderFade=(i,o,s)=>{readTask(()=>{const $=i.scrollTop,tt=o.clientHeight,rt=s?s.clientHeight:0;if(s!==null&&$<rt){o.style.setProperty("--opacity-scale","0"),i.style.setProperty("clip-path",`inset(${tt}px 0px 0px 0px)`);return}const st=$-rt,ut=clamp$1(0,st/10,1);writeTask$1(()=>{i.style.removeProperty("clip-path"),o.style.setProperty("--opacity-scale",ut.toString())})})},headerIosCss="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",headerMdCss='ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md::after{bottom:-5px;background-position:left 0 top -2px;position:absolute;width:100%;height:5px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAHBAMAAADzDtBxAAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABXRSTlMUCS0gBIh/TXEAAAAaSURBVAjXYxCEAgY4UIICBmMogMsgFLtAAQCNSwXZKOdPxgAAAABJRU5ErkJggg==);background-repeat:repeat-x;content:""}@supports (inset-inline-start: 0){.header-md::after{inset-inline-start:0}}@supports not (inset-inline-start: 0){.header-md::after{left:0}:host-context([dir=rtl]) .header-md::after{left:unset;right:unset;right:0}[dir=rtl] .header-md::after{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.header-md::after:dir(rtl){left:unset;right:unset;right:0}}}:host-context([dir=rtl]) .header-md::after{background-position:right 0 top -2px}[dir=rtl] .header-md::after{background-position:right 0 top -2px}@supports selector(:dir(rtl)){.header-md::after:dir(rtl){background-position:right 0 top -2px}}.header-collapse-condense{display:none}.header-md.ion-no-border::after{display:none}',Header=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(o,s)=>{const $=this.scrollEl=await getScrollElement(o);this.contentScrollCallback=()=>{handleHeaderFade(this.scrollEl,this.el,s)},$.addEventListener("scroll",this.contentScrollCallback),handleHeaderFade(this.scrollEl,this.el,s)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=inheritAriaAttributes(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(getIonMode$1(this)!=="ios")return;const{collapse:s}=this,$=s==="condense",tt=s==="fade";if(this.destroyCollapsibleHeader(),$){const rt=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),st=rt?findIonContent(rt):null;writeTask$1(()=>{const _=cloneElement("ion-title");_.size="large",cloneElement("ion-back-button")}),await this.setupCondenseHeader(st,rt)}else if(tt){const rt=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),st=rt?findIonContent(rt):null;if(!st){printIonContentErrorMsg(this.el);return}const _=st.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(st,_)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(o,s){if(!o||!s){printIonContentErrorMsg(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await getScrollElement(o);const $=s.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from($).find(_=>_.collapse!=="condense"),!this.collapsibleMainHeader)return;const tt=createHeaderIndex(this.collapsibleMainHeader),rt=createHeaderIndex(this.el);if(!tt||!rt)return;setHeaderActive(tt,!1),setToolbarBackgroundOpacity(tt.el,0);const st=_=>{handleToolbarIntersection(_,tt,rt,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(st,{root:o,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(rt.toolbars[rt.toolbars.length-1].el),this.contentScrollCallback=()=>{handleContentScroll(this.scrollEl,rt,o)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),writeTask$1(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:o,inheritedAttributes:s}=this,$=getIonMode$1(this),tt=this.collapse||"none",rt=hostContext("ion-menu",this.el)?"none":"banner";return h$3(Host$1,Object.assign({role:rt,class:{[$]:!0,[`header-${$}`]:!0,["header-translucent"]:this.translucent,[`header-collapse-${tt}`]:!0,[`header-translucent-${$}`]:this.translucent}},s),$==="ios"&&o&&h$3("div",{class:"header-background"}),h$3("slot",null))}get el(){return this}static get style(){return{ios:headerIosCss,md:headerMdCss}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function defineCustomElement$1$c(){if(typeof customElements>"u")return;["ion-header"].forEach(o=>{switch(o){case"ion-header":customElements.get(o)||customElements.define(o,Header);break}})}const defineCustomElement$j=defineCustomElement$1$c;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const defineCustomElement$i=defineCustomElement$k;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const listIosCss="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:last-child{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",listMdCss="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}@supports (inset-inline-start: 0){.list-md>.input:last-child::after{inset-inline-start:0}}@supports not (inset-inline-start: 0){.list-md>.input:last-child::after{left:0}:host-context([dir=rtl]) .list-md>.input:last-child::after{left:unset;right:unset;right:0}[dir=rtl] .list-md>.input:last-child::after{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.list-md>.input:last-child::after:dir(rtl){left:unset;right:unset;right:0}}}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:first-child{--border-radius:2px 2px 0 0}.list-md.list-inset ion-item:last-child{--border-radius:0 0 2px, 2px;--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",List$2=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.lines=void 0,this.inset=!1}async closeSlidingItems(){const o=this.el.querySelector("ion-item-sliding");return o!=null&&o.closeOpened?o.closeOpened():!1}render(){const o=getIonMode$1(this),{lines:s,inset:$}=this;return h$3(Host$1,{role:"list",class:{[o]:!0,[`list-${o}`]:!0,"list-inset":$,[`list-lines-${s}`]:s!==void 0,[`list-${o}-lines-${s}`]:s!==void 0}})}get el(){return this}static get style(){return{ios:listIosCss,md:listMdCss}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function defineCustomElement$h(){if(typeof customElements>"u")return;["ion-list"].forEach(o=>{switch(o){case"ion-list":customElements.get(o)||customElements.define(o,List$2);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const defineCustomElement$g=defineCustomElement$h,VIEW_STATE_NEW=1,VIEW_STATE_ATTACHED=2,VIEW_STATE_DESTROYED=3;class ViewController{constructor(o,s){this.component=o,this.params=s,this.state=VIEW_STATE_NEW}async init(o){if(this.state=VIEW_STATE_ATTACHED,!this.element){const s=this.component;this.element=await attachComponent(this.delegate,o,s,["ion-page","ion-page-invisible"],this.params)}}_destroy(){assert(this.state!==VIEW_STATE_DESTROYED,"view state must be ATTACHED");const o=this.element;o&&(this.delegate?this.delegate.removeViewFromDom(o.parentElement,o):o.remove()),this.nav=void 0,this.state=VIEW_STATE_DESTROYED}}const matches=(i,o,s)=>!i||i.component!==o?!1:shallowEqualStringMap(i.params,s),convertToView=(i,o)=>i?i instanceof ViewController?i:new ViewController(i,o):null,convertToViews=i=>i.map(o=>o instanceof ViewController?o:"component"in o?convertToView(o.component,o.componentProps===null?void 0:o.componentProps):convertToView(o,void 0)).filter(o=>o!==null),navCss=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",Nav=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=createEvent(this,"ionNavWillLoad",7),this.ionNavWillChange=createEvent(this,"ionNavWillChange",3),this.ionNavDidChange=createEvent(this,"ionNavDidChange",3),this.transInstr=[],this.animationEnabled=!0,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&(this.useRouter||this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const o=getIonMode$1(this);this.swipeGesture=config.getBoolean("swipeBackEnabled",o==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.rootChanged(),this.gesture=(await __vitePreload(()=>import("./swipe-back-a0b05e87.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const o of this.views)lifecycle(o.element,LIFECYCLE_WILL_UNLOAD),o._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(o,s,$,tt){return this.insert(-1,o,s,$,tt)}insert(o,s,$,tt,rt){return this.insertPages(o,[{component:s,componentProps:$}],tt,rt)}insertPages(o,s,$,tt){return this.queueTrns({insertStart:o,insertViews:s,opts:$},tt)}pop(o,s){return this.removeIndex(-1,1,o,s)}popTo(o,s,$){const tt={removeStart:-1,removeCount:-1,opts:s};return typeof o=="object"&&o.component?(tt.removeView=o,tt.removeStart=1):typeof o=="number"&&(tt.removeStart=o+1),this.queueTrns(tt,$)}popToRoot(o,s){return this.removeIndex(1,-1,o,s)}removeIndex(o,s=1,$,tt){return this.queueTrns({removeStart:o,removeCount:s,opts:$},tt)}setRoot(o,s,$,tt){return this.setPages([{component:o,componentProps:s}],$,tt)}setPages(o,s,$){return s!=null||(s={}),s.animated!==!0&&(s.animated=!1),this.queueTrns({insertStart:0,insertViews:o,removeStart:0,removeCount:-1,opts:s},$)}setRouteId(o,s,$,tt){const rt=this.getActiveSync();if(matches(rt,o,s))return Promise.resolve({changed:!1,element:rt.element});let st;const _=new Promise(vt=>st=vt);let ut;const mt={updateURL:!1,viewIsReady:vt=>{let wt;const bt=new Promise(Mt=>wt=Mt);return st({changed:!0,element:vt,markVisible:async()=>{wt(),await ut}}),bt}};if($==="root")ut=this.setRoot(o,s,mt);else{const vt=this.views.find(wt=>matches(wt,o,s));vt?ut=this.popTo(vt,Object.assign(Object.assign({},mt),{direction:"back",animationBuilder:tt})):$==="forward"?ut=this.push(o,s,Object.assign(Object.assign({},mt),{animationBuilder:tt})):$==="back"&&(ut=this.setRoot(o,s,Object.assign(Object.assign({},mt),{direction:"back",animated:!0,animationBuilder:tt})))}return _}async getRouteId(){const o=this.getActiveSync();if(o)return{id:o.element.tagName,params:o.params,element:o.element}}async getActive(){return this.getActiveSync()}async getByIndex(o){return this.views[o]}async canGoBack(o){return this.canGoBackSync(o)}async getPrevious(o){return this.getPreviousSync(o)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(o=this.getActiveSync()){return!!(o&&this.getPreviousSync(o))}getPreviousSync(o=this.getActiveSync()){if(!o)return;const s=this.views,$=s.indexOf(o);return $>0?s[$-1]:void 0}async queueTrns(o,s){var $,tt;if(this.isTransitioning&&(!(($=o.opts)===null||$===void 0)&&$.skipIfBusy))return!1;const rt=new Promise((st,_)=>{o.resolve=st,o.reject=_});if(o.done=s,o.opts&&o.opts.updateURL!==!1&&this.useRouter){const st=document.querySelector("ion-router");if(st){const _=await st.canTransition();if(_===!1)return!1;if(typeof _=="string")return st.push(_,o.opts.direction||"back"),!1}}return((tt=o.insertViews)===null||tt===void 0?void 0:tt.length)===0&&(o.insertViews=void 0),this.transInstr.push(o),this.nextTrns(),rt}success(o,s){if(this.destroyed){this.fireError("nav controller was destroyed",s);return}if(s.done&&s.done(o.hasCompleted,o.requiresTransition,o.enteringView,o.leavingView,o.direction),s.resolve(o.hasCompleted),s.opts.updateURL!==!1&&this.useRouter){const $=document.querySelector("ion-router");if($){const tt=o.direction==="back"?"back":"forward";$.navChanged(tt)}}}failed(o,s){if(this.destroyed){this.fireError("nav controller was destroyed",s);return}this.transInstr.length=0,this.fireError(o,s)}fireError(o,s){s.done&&s.done(!1,!1,o),s.reject&&!this.destroyed?s.reject(o):s.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const o=this.transInstr.shift();return o?(this.runTransition(o),!0):!1}async runTransition(o){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(o);const s=this.getActiveSync(),$=this.getEnteringView(o,s);if(!s&&!$)throw new Error("no views in the stack to be removed");$&&$.state===VIEW_STATE_NEW&&await $.init(this.el),this.postViewInit($,s,o);const tt=(o.enteringRequiresTransition||o.leavingRequiresTransition)&&$!==s;tt&&o.opts&&s&&(o.opts.direction==="back"&&(o.opts.animationBuilder=o.opts.animationBuilder||($==null?void 0:$.animationBuilder)),s.animationBuilder=o.opts.animationBuilder);let rt;tt?rt=await this.transition($,s,o):rt={hasCompleted:!0,requiresTransition:!1},this.success(rt,o),this.ionNavDidChange.emit()}catch(s){this.failed(s,o)}this.isTransitioning=!1,this.nextTrns()}prepareTI(o){var s,$,tt;const rt=this.views.length;if((s=o.opts)!==null&&s!==void 0||(o.opts={}),($=(tt=o.opts).delegate)!==null&&$!==void 0||(tt.delegate=this.delegate),o.removeView!==void 0){assert(o.removeStart!==void 0,"removeView needs removeStart"),assert(o.removeCount!==void 0,"removeView needs removeCount");const ut=this.views.indexOf(o.removeView);if(ut<0)throw new Error("removeView was not found");o.removeStart+=ut}o.removeStart!==void 0&&(o.removeStart<0&&(o.removeStart=rt-1),o.removeCount<0&&(o.removeCount=rt-o.removeStart),o.leavingRequiresTransition=o.removeCount>0&&o.removeStart+o.removeCount===rt),o.insertViews&&((o.insertStart<0||o.insertStart>rt)&&(o.insertStart=rt),o.enteringRequiresTransition=o.insertStart===rt);const st=o.insertViews;if(!st)return;assert(st.length>0,"length can not be zero");const _=convertToViews(st);if(_.length===0)throw new Error("invalid views to insert");for(const ut of _){ut.delegate=o.opts.delegate;const mt=ut.nav;if(mt&&mt!==this)throw new Error("inserted view was already inserted");if(ut.state===VIEW_STATE_DESTROYED)throw new Error("inserted view was already destroyed")}o.insertViews=_}getEnteringView(o,s){const $=o.insertViews;if($!==void 0)return $[$.length-1];const tt=o.removeStart;if(tt!==void 0){const rt=this.views,st=tt+o.removeCount;for(let _=rt.length-1;_>=0;_--){const ut=rt[_];if((_<tt||_>=st)&&ut!==s)return ut}}}postViewInit(o,s,$){var tt,rt,st;assert(s||o,"Both leavingView and enteringView are null"),assert($.resolve,"resolve must be valid"),assert($.reject,"reject must be valid");const _=$.opts,{insertViews:ut,removeStart:mt,removeCount:vt}=$;let wt;if(mt!==void 0&&vt!==void 0){assert(mt>=0,"removeStart can not be negative"),assert(vt>=0,"removeCount can not be negative"),wt=[];for(let Mt=mt;Mt<mt+vt;Mt++){const At=this.views[Mt];At!==void 0&&At!==o&&At!==s&&wt.push(At)}(tt=_.direction)!==null&&tt!==void 0||(_.direction="back")}const bt=this.views.length+((rt=ut==null?void 0:ut.length)!==null&&rt!==void 0?rt:0)-(vt!=null?vt:0);if(assert(bt>=0,"final balance can not be negative"),bt===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(ut){let Mt=$.insertStart;for(const At of ut)this.insertViewAt(At,Mt),Mt++;$.enteringRequiresTransition&&((st=_.direction)!==null&&st!==void 0||(_.direction="forward"))}if(wt&&wt.length>0){for(const Mt of wt)lifecycle(Mt.element,LIFECYCLE_WILL_LEAVE),lifecycle(Mt.element,LIFECYCLE_DID_LEAVE),lifecycle(Mt.element,LIFECYCLE_WILL_UNLOAD);for(const Mt of wt)this.destroyView(Mt)}}async transition(o,s,$){const tt=$.opts,rt=tt.progressAnimation?wt=>this.sbAni=wt:void 0,st=getIonMode$1(this),_=o.element,ut=s&&s.element,mt=Object.assign(Object.assign({mode:st,showGoBack:this.canGoBackSync(o),baseEl:this.el,progressCallback:rt,animated:this.animated&&config.getBoolean("animated",!0),enteringEl:_,leavingEl:ut},tt),{animationBuilder:tt.animationBuilder||this.animation||config.get("navAnimation")}),{hasCompleted:vt}=await transition(mt);return this.transitionFinish(vt,o,s,tt)}transitionFinish(o,s,$,tt){const rt=o?s:$;return rt&&this.unmountInactiveViews(rt),{hasCompleted:o,requiresTransition:!0,enteringView:s,leavingView:$,direction:tt.direction}}insertViewAt(o,s){const $=this.views,tt=$.indexOf(o);tt>-1?(assert(o.nav===this,"view is not part of the nav"),$.splice(tt,1),$.splice(s,0,o)):(assert(!o.nav,"nav is used"),o.nav=this,$.splice(s,0,o))}removeView(o){assert(o.state===VIEW_STATE_ATTACHED||o.state===VIEW_STATE_DESTROYED,"view state should be loaded or destroyed");const s=this.views,$=s.indexOf(o);assert($>-1,"view must be part of the stack"),$>=0&&s.splice($,1)}destroyView(o){o._destroy(),this.removeView(o)}unmountInactiveViews(o){if(this.destroyed)return;const s=this.views,$=s.indexOf(o);for(let tt=s.length-1;tt>=0;tt--){const rt=s[tt],st=rt.element;st&&(tt>$?(lifecycle(st,LIFECYCLE_WILL_UNLOAD),this.destroyView(rt)):tt<$&&setPageHidden(st,!0))}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.pop({direction:"back",progressAnimation:!0})}onMove(o){this.sbAni&&this.sbAni.progressStep(o)}onEnd(o,s,$){if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish(()=>{this.animationEnabled=!0},{oneTimeCallback:!0});let tt=o?-.001:.001;o?tt+=getTimeGivenProgression([0,0],[.32,.72],[0,1],[1,1],s)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),tt+=getTimeGivenProgression([0,0],[1,0],[.68,.28],[1,1],s)[0]),this.sbAni.progressEnd(o?1:0,tt,$)}}render(){return h$3("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return navCss}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);function defineCustomElement$1$b(){if(typeof customElements>"u")return;["ion-nav"].forEach(o=>{switch(o){case"ion-nav":customElements.get(o)||customElements.define(o,Nav);break}})}const defineCustomElement$f=defineCustomElement$1$b;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const createButtonActiveGesture=(i,o)=>{let s,$;const tt=(_,ut,mt)=>{if(typeof document>"u")return;const vt=document.elementFromPoint(_,ut);if(!vt||!o(vt)){st();return}vt!==s&&(st(),rt(vt,mt))},rt=(_,ut)=>{s=_,$||($=s);const mt=s;writeTask$1(()=>mt.classList.add("ion-activated")),ut()},st=(_=!1)=>{if(!s)return;const ut=s;writeTask$1(()=>ut.classList.remove("ion-activated")),_&&$!==s&&s.click(),s=void 0};return createGesture({el:i,gestureName:"buttonActiveDrag",threshold:0,onStart:_=>tt(_.currentX,_.currentY,hapticSelectionStart),onMove:_=>tt(_.currentX,_.currentY,hapticSelectionChanged),onEnd:()=>{st(!0),hapticSelectionEnd(),$=void 0}})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const iosEnterAnimation$1=i=>{const o=createAnimation(),s=createAnimation(),$=createAnimation();return s.addElement(i.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),$.addElement(i.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),o.addElement(i).easing("ease-in-out").duration(200).addAnimation([s,$])},iosLeaveAnimation$1=i=>{const o=createAnimation(),s=createAnimation(),$=createAnimation();return s.addElement(i.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),$.addElement(i.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),o.addElement(i).easing("ease-in-out").duration(200).addAnimation([s,$])},mdEnterAnimation$1=i=>{const o=createAnimation(),s=createAnimation(),$=createAnimation();return s.addElement(i.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),$.addElement(i.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),o.addElement(i).easing("ease-in-out").duration(150).addAnimation([s,$])},mdLeaveAnimation$1=i=>{const o=createAnimation(),s=createAnimation(),$=createAnimation();return s.addElement(i.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),$.addElement(i.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),o.addElement(i).easing("ease-in-out").duration(150).addAnimation([s,$])},alertIosCss=".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:strict}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, #f9f9f9));--max-width:270px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:14px}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:7px;text-align:center}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:17px;font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, #666666);font-size:14px}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:13px;text-align:center}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:4px;margin-top:10px;-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:6px;padding-bottom:6px;border:0.55px solid var(--ion-color-step-250, #bfbfbf);background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{height:44px}.alert-radio-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #3880ff)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{inset-inline-start:7px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:7px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:7px}}}.alert-checkbox-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px;margin-top:10px;margin-bottom:10px;position:relative;width:24px;height:24px;border-width:1px;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{top:4px;position:absolute;width:5px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:1px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{inset-inline-start:9px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:9px}[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios:dir(rtl){left:unset;right:unset;right:9px}}}.alert-button-group.sc-ion-alert-ios{-webkit-margin-end:-0.55px;margin-inline-end:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:44px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #3880ff);font-size:17px;overflow:hidden}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child{border-right:0}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:first-child:dir(rtl){border-right:0}}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #eb445a)}",alertMdCss=".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:strict}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:14px}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px;padding-top:20px;padding-bottom:15px;text-align:start}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:20px;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:16px}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, #737373)}.alert-message.sc-ion-alert-md{max-height:266px;font-size:16px}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #3880ff)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;max-height:266px;border-top:1px solid var(--ion-color-step-150, #d9d9d9);border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);overflow:auto}.alert-tappable.sc-ion-alert-md{position:relative;height:48px;overflow:hidden}.alert-radio-label.sc-ion-alert-md{-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.alert-radio-icon.sc-ion-alert-md{top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373)}@supports (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-radio-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-radio-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}.alert-radio-inner.sc-ion-alert-md{top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #3880ff)}@supports (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){.alert-radio-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){.alert-radio-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, #262626)}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.alert-checkbox-icon.sc-ion-alert-md{top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373);contain:strict}@supports (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{inset-inline-start:26px}}@supports not (inset-inline-start: 0){.alert-checkbox-icon.sc-ion-alert-md{left:26px}[dir=rtl].sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[dir=rtl].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}@supports selector(:dir(rtl)){.alert-checkbox-icon.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:26px}}}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}@supports (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{inset-inline-start:3px}}@supports not (inset-inline-start: 0){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:3px}[dir=rtl].sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[dir=rtl].sc-ion-alert-md [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}@supports selector(:dir(rtl)){[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md:dir(rtl){left:unset;right:unset;right:3px}}}.alert-button-group.sc-ion-alert-md{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}.alert-button.sc-ion-alert-md{border-radius:2px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:0;margin-bottom:0;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #3880ff);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}",Alert=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.didPresent=createEvent(this,"ionAlertDidPresent",7),this.willPresent=createEvent(this,"ionAlertWillPresent",7),this.willDismiss=createEvent(this,"ionAlertWillDismiss",7),this.didDismiss=createEvent(this,"ionAlertDidDismiss",7),this.didPresentShorthand=createEvent(this,"didPresent",7),this.willPresentShorthand=createEvent(this,"willPresent",7),this.willDismissShorthand=createEvent(this,"willDismiss",7),this.didDismissShorthand=createEvent(this,"didDismiss",7),this.delegateController=createDelegateController(this),this.triggerController=createTriggerController(),this.customHTMLEnabled=config.get("innerHTMLTemplatesEnabled",ENABLE_HTML_CONTENT_DEFAULT),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,BACKDROP)},this.dispatchCancelHandler=o=>{const s=o.detail.role;if(isCancel(s)){const $=this.processedButtons.find(tt=>tt.role==="cancel");this.callButtonHandler($)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.header=void 0,this.subHeader=void 0,this.message=void 0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(o,s){o===!0&&s===!1?this.present():o===!1&&s===!0&&this.dismiss()}triggerChanged(){const{trigger:o,el:s,triggerController:$}=this;o&&$.addClickListener(s,o)}onKeydown(o){if(!new Set(this.processedInputs.map(_=>_.type)).has("radio")||o.target&&!this.el.contains(o.target)||o.target.classList.contains("alert-button"))return;const $=this.el.querySelectorAll(".alert-radio"),tt=Array.from($).filter(_=>!_.disabled),rt=tt.findIndex(_=>_.id===o.target.id);let st;if(["ArrowDown","ArrowRight"].includes(o.key)&&(st=rt===tt.length-1?tt[0]:tt[rt+1]),["ArrowUp","ArrowLeft"].includes(o.key)&&(st=rt===0?tt[tt.length-1]:tt[rt-1]),st&&tt.includes(st)){const _=this.processedInputs.find(ut=>ut.id===(st==null?void 0:st.id));_&&(this.rbClick(_),st.focus())}}buttonsChanged(){const o=this.buttons;this.processedButtons=o.map(s=>typeof s=="string"?{text:s,role:s.toLowerCase()==="cancel"?"cancel":void 0}:s)}inputsChanged(){const o=this.inputs,s=o.find(st=>!st.disabled),tt=o.find(st=>st.checked&&!st.disabled)||s,rt=new Set(o.map(st=>st.type));rt.has("checkbox")&&rt.has("radio")&&console.warn(`Alert cannot mix input types: ${Array.from(rt.values()).join("/")}. Please see alert docs for more info.`),this.inputType=rt.values().next().value,this.processedInputs=o.map((st,_)=>{var ut;return{type:st.type||"text",name:st.name||`${_}`,placeholder:st.placeholder||"",value:st.value,label:st.label,checked:!!st.checked,disabled:!!st.disabled,id:st.id||`alert-input-${this.overlayIndex}-${_}`,handler:st.handler,min:st.min,max:st.max,cssClass:(ut=st.cssClass)!==null&&ut!==void 0?ut:"",attributes:st.attributes||{},tabindex:st.type==="radio"&&st!==tt?-1:0}})}connectedCallback(){prepareOverlay(this.el),this.triggerChanged()}componentWillLoad(){setOverlayId(this.el),this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){this.gesture||getIonMode$1(this)==="md"||!this.wrapperEl||(this.gesture=createButtonActiveGesture(this.wrapperEl,o=>o.classList.contains("alert-button")),this.gesture.enable(!0))}async present(){this.currentTransition!==void 0&&await this.currentTransition,await this.delegateController.attachViewToDom(),this.currentTransition=present(this,"alertEnter",iosEnterAnimation$1,mdEnterAnimation$1),await this.currentTransition,this.currentTransition=void 0}async dismiss(o,s){this.currentTransition=dismiss(this,o,s,"alertLeave",iosLeaveAnimation$1,mdLeaveAnimation$1);const $=await this.currentTransition;return $&&this.delegateController.removeViewFromDom(),$}onDidDismiss(){return eventMethod(this.el,"ionAlertDidDismiss")}onWillDismiss(){return eventMethod(this.el,"ionAlertWillDismiss")}rbClick(o){for(const s of this.processedInputs)s.checked=s===o,s.tabindex=s===o?0:-1;this.activeId=o.id,safeCall$1(o.handler,o),forceUpdate(this)}cbClick(o){o.checked=!o.checked,safeCall$1(o.handler,o),forceUpdate(this)}async buttonClick(o){const s=o.role,$=this.getValues();if(isCancel(s))return this.dismiss({values:$},s);const tt=await this.callButtonHandler(o,$);return tt!==!1?this.dismiss(Object.assign({values:$},tt),o.role):!1}async callButtonHandler(o,s){if(o!=null&&o.handler){const $=await safeCall$1(o.handler,s);if($===!1)return!1;if(typeof $=="object")return $}return{}}getValues(){if(this.processedInputs.length===0)return;if(this.inputType==="radio"){const s=this.processedInputs.find($=>!!$.checked);return s?s.value:void 0}if(this.inputType==="checkbox")return this.processedInputs.filter(s=>s.checked).map(s=>s.value);const o={};return this.processedInputs.forEach(s=>{o[s.name]=s.value||""}),o}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const o=this.processedInputs,s=getIonMode$1(this);return o.length===0?null:h$3("div",{class:"alert-checkbox-group"},o.map($=>h$3("button",{type:"button",onClick:()=>this.cbClick($),"aria-checked":`${$.checked}`,id:$.id,disabled:$.disabled,tabIndex:$.tabindex,role:"checkbox",class:Object.assign(Object.assign({},getClassMap($.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":$.disabled||!1})},h$3("div",{class:"alert-button-inner"},h$3("div",{class:"alert-checkbox-icon"},h$3("div",{class:"alert-checkbox-inner"})),h$3("div",{class:"alert-checkbox-label"},$.label)),s==="md"&&h$3("ion-ripple-effect",null))))}renderRadio(){const o=this.processedInputs;return o.length===0?null:h$3("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},o.map(s=>h$3("button",{type:"button",onClick:()=>this.rbClick(s),"aria-checked":`${s.checked}`,disabled:s.disabled,id:s.id,tabIndex:s.tabindex,class:Object.assign(Object.assign({},getClassMap(s.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":s.disabled||!1}),role:"radio"},h$3("div",{class:"alert-button-inner"},h$3("div",{class:"alert-radio-icon"},h$3("div",{class:"alert-radio-inner"})),h$3("div",{class:"alert-radio-label"},s.label)))))}renderInput(){const o=this.processedInputs;return o.length===0?null:h$3("div",{class:"alert-input-group"},o.map(s=>{var $,tt,rt,st;return s.type==="textarea"?h$3("div",{class:"alert-input-wrapper"},h$3("textarea",Object.assign({placeholder:s.placeholder,value:s.value,id:s.id,tabIndex:s.tabindex},s.attributes,{disabled:(tt=($=s.attributes)===null||$===void 0?void 0:$.disabled)!==null&&tt!==void 0?tt:s.disabled,class:inputClass(s),onInput:_=>{var ut;s.value=_.target.value,!((ut=s.attributes)===null||ut===void 0)&&ut.onInput&&s.attributes.onInput(_)}}))):h$3("div",{class:"alert-input-wrapper"},h$3("input",Object.assign({placeholder:s.placeholder,type:s.type,min:s.min,max:s.max,value:s.value,id:s.id,tabIndex:s.tabindex},s.attributes,{disabled:(st=(rt=s.attributes)===null||rt===void 0?void 0:rt.disabled)!==null&&st!==void 0?st:s.disabled,class:inputClass(s),onInput:_=>{var ut;s.value=_.target.value,!((ut=s.attributes)===null||ut===void 0)&&ut.onInput&&s.attributes.onInput(_)}})))}))}renderAlertButtons(){const o=this.processedButtons,s=getIonMode$1(this),$={"alert-button-group":!0,"alert-button-group-vertical":o.length>2};return h$3("div",{class:$},o.map(tt=>h$3("button",{type:"button",id:tt.id,class:buttonClass(tt),tabIndex:0,onClick:()=>this.buttonClick(tt)},h$3("span",{class:"alert-button-inner"},tt.text),s==="md"&&h$3("ion-ripple-effect",null))))}renderAlertMessage(o){const{customHTMLEnabled:s,message:$}=this;return s?h$3("div",{id:o,class:"alert-message",innerHTML:sanitizeDOMString($)}):h$3("div",{id:o,class:"alert-message"},$)}render(){const{overlayIndex:o,header:s,subHeader:$,message:tt,htmlAttributes:rt}=this,st=getIonMode$1(this),_=`alert-${o}-hdr`,ut=`alert-${o}-sub-hdr`,mt=`alert-${o}-msg`,vt=this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert";return h$3(Host$1,Object.assign({role:vt,"aria-modal":"true","aria-labelledby":s?_:$?ut:null,"aria-describedby":tt!==void 0?mt:null,tabindex:"-1"},rt,{style:{zIndex:`${2e4+o}`},class:Object.assign(Object.assign({},getClassMap(this.cssClass)),{[st]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),h$3("ion-backdrop",{tappable:this.backdropDismiss}),h$3("div",{tabindex:"0"}),h$3("div",{class:"alert-wrapper ion-overlay-wrapper",ref:bt=>this.wrapperEl=bt},h$3("div",{class:"alert-head"},s&&h$3("h2",{id:_,class:"alert-title"},s),$&&h$3("h2",{id:ut,class:"alert-sub-title"},$)),this.renderAlertMessage(mt),this.renderAlertInputs(),this.renderAlertButtons()),h$3("div",{tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:alertIosCss,md:alertMdCss}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]]]),inputClass=i=>{var o,s,$;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":((s=(o=i.attributes)===null||o===void 0?void 0:o.disabled)!==null&&s!==void 0?s:i.disabled)||!1},getClassMap(i.cssClass)),getClassMap(i.attributes?($=i.attributes.class)===null||$===void 0?void 0:$.toString():""))},buttonClass=i=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,[`alert-button-role-${i.role}`]:i.role!==void 0},getClassMap(i.cssClass));function defineCustomElement$e(){if(typeof customElements>"u")return;["ion-alert","ion-backdrop","ion-ripple-effect"].forEach(o=>{switch(o){case"ion-alert":customElements.get(o)||customElements.define(o,Alert);break;case"ion-backdrop":customElements.get(o)||defineCustomElement$r();break;case"ion-ripple-effect":customElements.get(o)||defineCustomElement$m();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const skeletonTextCss=":host{--background:rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065);border-radius:var(--border-radius, inherit);display:block;width:100%;height:inherit;margin-top:4px;margin-bottom:4px;background:var(--background);line-height:10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}span{display:inline-block}:host(.in-media){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;height:100%}:host(.skeleton-text-animated){position:relative;background:-webkit-gradient(linear, left top, right top, color-stop(8%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065)), color-stop(18%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.135)), color-stop(33%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065)));background:linear-gradient(to right, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065) 8%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.135) 18%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065) 33%);background-size:800px 104px;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:shimmer;animation-name:shimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear}@-webkit-keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}",SkeletonText=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.animated=!1}render(){const o=this.animated&&config.getBoolean("animated",!0),s=hostContext("ion-avatar",this.el)||hostContext("ion-thumbnail",this.el),$=getIonMode$1(this);return h$3(Host$1,{class:{[$]:!0,"skeleton-text-animated":o,"in-media":s}},h$3("span",null,""))}get el(){return this}static get style(){return skeletonTextCss}},[1,"ion-skeleton-text",{animated:[4]}]);function defineCustomElement$1$a(){if(typeof customElements>"u")return;["ion-skeleton-text"].forEach(o=>{switch(o){case"ion-skeleton-text":customElements.get(o)||customElements.define(o,SkeletonText);break}})}const defineCustomElement$d=defineCustomElement$1$a;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const splitPaneIosCss=":host{--side-width:100%;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;contain:strict}::slotted(ion-menu.menu-pane-visible){-ms-flex:0 1 auto;flex:0 1 auto;width:var(--side-width);min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.split-pane-visible) ::slotted(.split-pane-side),:host(.split-pane-visible) ::slotted(.split-pane-main){left:0;right:0;top:0;bottom:0;position:relative;-webkit-box-shadow:none !important;box-shadow:none !important;z-index:0}:host(.split-pane-visible) ::slotted(.split-pane-main){-ms-flex:1;flex:1}:host(.split-pane-visible) ::slotted(.split-pane-side:not(ion-menu)),:host(.split-pane-visible) ::slotted(ion-menu.split-pane-side.menu-enabled){display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0}::slotted(.split-pane-side:not(ion-menu)){display:none}:host(.split-pane-visible) ::slotted(.split-pane-side){-ms-flex-order:-1;order:-1}:host(.split-pane-visible) ::slotted(.split-pane-side[side=end]){-ms-flex-order:1;order:1}:host{--border:0.55px solid var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--side-min-width:270px;--side-max-width:28%}:host(.split-pane-visible) ::slotted(.split-pane-side){-webkit-border-start:0;border-inline-start:0;-webkit-border-end:var(--border);border-inline-end:var(--border);border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.split-pane-visible) ::slotted(.split-pane-side[side=end]){-webkit-border-start:var(--border);border-inline-start:var(--border);-webkit-border-end:0;border-inline-end:0;border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}",splitPaneMdCss=":host{--side-width:100%;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;contain:strict}::slotted(ion-menu.menu-pane-visible){-ms-flex:0 1 auto;flex:0 1 auto;width:var(--side-width);min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.split-pane-visible) ::slotted(.split-pane-side),:host(.split-pane-visible) ::slotted(.split-pane-main){left:0;right:0;top:0;bottom:0;position:relative;-webkit-box-shadow:none !important;box-shadow:none !important;z-index:0}:host(.split-pane-visible) ::slotted(.split-pane-main){-ms-flex:1;flex:1}:host(.split-pane-visible) ::slotted(.split-pane-side:not(ion-menu)),:host(.split-pane-visible) ::slotted(ion-menu.split-pane-side.menu-enabled){display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0}::slotted(.split-pane-side:not(ion-menu)){display:none}:host(.split-pane-visible) ::slotted(.split-pane-side){-ms-flex-order:-1;order:-1}:host(.split-pane-visible) ::slotted(.split-pane-side[side=end]){-ms-flex-order:1;order:1}:host{--border:1px solid var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--side-min-width:270px;--side-max-width:28%}:host(.split-pane-visible) ::slotted(.split-pane-side){-webkit-border-start:0;border-inline-start:0;-webkit-border-end:var(--border);border-inline-end:var(--border);border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.split-pane-visible) ::slotted(.split-pane-side[side=end]){-webkit-border-start:var(--border);border-inline-start:var(--border);-webkit-border-end:0;border-inline-end:0;border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}",SPLIT_PANE_MAIN="split-pane-main",SPLIT_PANE_SIDE="split-pane-side",QUERY={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",never:""},SplitPane=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionSplitPaneVisible=createEvent(this,"ionSplitPaneVisible",7),this.visible=!1,this.contentId=void 0,this.disabled=!1,this.when=QUERY.lg}visibleChanged(o){const s={visible:o,isPane:this.isPane.bind(this)};this.ionSplitPaneVisible.emit(s)}async connectedCallback(){typeof customElements<"u"&&customElements!=null&&await customElements.whenDefined("ion-split-pane"),this.styleChildren(),this.updateState()}disconnectedCallback(){this.rmL&&(this.rmL(),this.rmL=void 0)}updateState(){if(this.rmL&&(this.rmL(),this.rmL=void 0),this.disabled){this.visible=!1;return}const o=this.when;if(typeof o=="boolean"){this.visible=o;return}const s=QUERY[o]||o;if(s.length===0){this.visible=!1;return}if(window.matchMedia){const $=rt=>{this.visible=rt.matches},tt=window.matchMedia(s);tt.addListener($),this.rmL=()=>tt.removeListener($),this.visible=tt.matches}}isPane(o){return this.visible?o.parentElement===this.el&&o.classList.contains(SPLIT_PANE_SIDE):!1}styleChildren(){const o=this.contentId,s=this.el.children,$=this.el.childElementCount;let tt=!1;for(let rt=0;rt<$;rt++){const st=s[rt],_=o!==void 0&&st.id===o;if(_){if(tt){console.warn("split pane cannot have more than one main node");return}tt=!0}setPaneClass(st,_)}tt||console.warn("split pane does not have a specified main node")}render(){const o=getIonMode$1(this);return h$3(Host$1,{class:{[o]:!0,[`split-pane-${o}`]:!0,"split-pane-visible":this.visible}},h$3("slot",null))}get el(){return this}static get watchers(){return{visible:["visibleChanged"],disabled:["updateState"],when:["updateState"]}}static get style(){return{ios:splitPaneIosCss,md:splitPaneMdCss}}},[33,"ion-split-pane",{contentId:[513,"content-id"],disabled:[4],when:[8],visible:[32]}]),setPaneClass=(i,o)=>{let s,$;o?(s=SPLIT_PANE_MAIN,$=SPLIT_PANE_SIDE):(s=SPLIT_PANE_SIDE,$=SPLIT_PANE_MAIN);const tt=i.classList;tt.add(s),tt.remove($)};function defineCustomElement$1$9(){if(typeof customElements>"u")return;["ion-split-pane"].forEach(o=>{switch(o){case"ion-split-pane":customElements.get(o)||customElements.define(o,SplitPane);break}})}const defineCustomElement$c=defineCustomElement$1$9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const thumbnailCss=":host{--size:48px;--border-radius:0;border-radius:var(--border-radius);display:block;width:var(--size);height:var(--size)}::slotted(ion-img),::slotted(img){border-radius:var(--border-radius);width:100%;height:100%;-o-object-fit:cover;object-fit:cover;overflow:hidden}",Thumbnail=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return h$3(Host$1,{class:getIonMode$1(this)},h$3("slot",null))}static get style(){return thumbnailCss}},[1,"ion-thumbnail"]);function defineCustomElement$1$8(){if(typeof customElements>"u")return;["ion-thumbnail"].forEach(o=>{switch(o){case"ion-thumbnail":customElements.get(o)||customElements.define(o,Thumbnail);break}})}const defineCustomElement$b=defineCustomElement$1$8;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const titleIosCss=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host:dir(rtl){left:unset;right:unset;right:0}}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;padding-bottom:6px;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large) .toolbar-title:dir(rtl){-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",titleMdCss=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}",ToolbarTitle=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=createEvent(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const o=this.getSize();this.ionStyle.emit({[`title-${o}`]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const o=getIonMode$1(this),s=this.getSize();return h$3(Host$1,{class:createColorClasses$1(this.color,{[o]:!0,[`title-${s}`]:!0,"title-rtl":document.dir==="rtl"})},h$3("div",{class:"toolbar-title"},h$3("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:titleIosCss,md:titleMdCss}}},[33,"ion-title",{color:[513],size:[1]}]);function defineCustomElement$1$7(){if(typeof customElements>"u")return;["ion-title"].forEach(o=>{switch(o){case"ion-title":customElements.get(o)||customElements.define(o,ToolbarTitle);break}})}const defineCustomElement$a=defineCustomElement$1$7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const toolbarIosCss=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",toolbarMdCss=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",Toolbar=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const o=Array.from(this.el.querySelectorAll("ion-buttons")),s=o.find(rt=>rt.slot==="start");s&&s.classList.add("buttons-first-slot");const $=o.reverse(),tt=$.find(rt=>rt.slot==="end")||$.find(rt=>rt.slot==="primary")||$.find(rt=>rt.slot==="secondary");tt&&tt.classList.add("buttons-last-slot")}childrenStyle(o){o.stopPropagation();const s=o.target.tagName,$=o.detail,tt={},rt=this.childrenStyles.get(s)||{};let st=!1;Object.keys($).forEach(_=>{const ut=`toolbar-${_}`,mt=$[_];mt!==rt[ut]&&(st=!0),mt&&(tt[ut]=!0)}),st&&(this.childrenStyles.set(s,tt),forceUpdate(this))}render(){const o=getIonMode$1(this),s={};return this.childrenStyles.forEach($=>{Object.assign(s,$)}),h$3(Host$1,{class:Object.assign(Object.assign({},s),createColorClasses$1(this.color,{[o]:!0,"in-toolbar":hostContext("ion-toolbar",this.el)}))},h$3("div",{class:"toolbar-background"}),h$3("div",{class:"toolbar-container"},h$3("slot",{name:"start"}),h$3("slot",{name:"secondary"}),h$3("div",{class:"toolbar-content"},h$3("slot",null)),h$3("slot",{name:"primary"}),h$3("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:toolbarIosCss,md:toolbarMdCss}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function defineCustomElement$1$6(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(o=>{switch(o){case"ion-toolbar":customElements.get(o)||customElements.define(o,Toolbar);break}})}const defineCustomElement$9=defineCustomElement$1$6;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const IonItem$1=Item;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const defineCustomElement$8=defineCustomElement$e;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const KEYBOARD_DID_OPEN="ionKeyboardDidShow",KEYBOARD_DID_CLOSE="ionKeyboardDidHide",KEYBOARD_THRESHOLD=150;let previousVisualViewport={},currentVisualViewport={},keyboardOpen=!1;const resetKeyboardAssist=()=>{previousVisualViewport={},currentVisualViewport={},keyboardOpen=!1},startKeyboardAssist=i=>{startNativeListeners(i),i.visualViewport&&(currentVisualViewport=copyVisualViewport(i.visualViewport),i.visualViewport.onresize=()=>{trackViewportChanges(i),keyboardDidOpen()||keyboardDidResize(i)?setKeyboardOpen(i):keyboardDidClose(i)&&setKeyboardClose(i)})},startNativeListeners=i=>{i.addEventListener("keyboardDidShow",o=>setKeyboardOpen(i,o)),i.addEventListener("keyboardDidHide",()=>setKeyboardClose(i))},setKeyboardOpen=(i,o)=>{fireKeyboardOpenEvent(i,o),keyboardOpen=!0},setKeyboardClose=i=>{fireKeyboardCloseEvent(i),keyboardOpen=!1},keyboardDidOpen=()=>{const i=(previousVisualViewport.height-currentVisualViewport.height)*currentVisualViewport.scale;return!keyboardOpen&&previousVisualViewport.width===currentVisualViewport.width&&i>KEYBOARD_THRESHOLD},keyboardDidResize=i=>keyboardOpen&&!keyboardDidClose(i),keyboardDidClose=i=>keyboardOpen&&currentVisualViewport.height===i.innerHeight,fireKeyboardOpenEvent=(i,o)=>{const s=o?o.keyboardHeight:i.innerHeight-currentVisualViewport.height,$=new CustomEvent(KEYBOARD_DID_OPEN,{detail:{keyboardHeight:s}});i.dispatchEvent($)},fireKeyboardCloseEvent=i=>{const o=new CustomEvent(KEYBOARD_DID_CLOSE);i.dispatchEvent(o)},trackViewportChanges=i=>{previousVisualViewport=Object.assign({},currentVisualViewport),currentVisualViewport=copyVisualViewport(i.visualViewport)},copyVisualViewport=i=>({width:Math.round(i.width),height:Math.round(i.height),offsetTop:i.offsetTop,offsetLeft:i.offsetLeft,pageTop:i.pageTop,pageLeft:i.pageLeft,scale:i.scale}),keyboard2=Object.freeze(Object.defineProperty({__proto__:null,KEYBOARD_DID_CLOSE,KEYBOARD_DID_OPEN,copyVisualViewport,keyboardDidClose,keyboardDidOpen,keyboardDidResize,resetKeyboardAssist,setKeyboardClose,setKeyboardOpen,startKeyboardAssist,trackViewportChanges},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Style;(function(i){i.Dark="DARK",i.Light="LIGHT",i.Default="DEFAULT"})(Style||(Style={}));const StatusBar={getEngine(){var i;return((i=win$2==null?void 0:win$2.Capacitor)===null||i===void 0?void 0:i.isPluginAvailable("StatusBar"))&&(win$2==null?void 0:win$2.Capacitor.Plugins.StatusBar)},supportsDefaultStatusBarStyle(){var i;return!!(!((i=win$2==null?void 0:win$2.Capacitor)===null||i===void 0)&&i.PluginHeaders)},setStyle(i){const o=this.getEngine();o&&o.setStyle(i)},getStyle:async function(){const i=this.getEngine();if(!i)return Style.Default;const{style:o}=await i.getInfo();return o}},getBackdropValueForSheet=(i,o)=>{if(o===1)return 0;const s=1/(1-o),$=-(o*s);return i*s+$},setCardStatusBarDark=()=>{!win$2||win$2.innerWidth>=768||!StatusBar.supportsDefaultStatusBarStyle()||StatusBar.setStyle({style:Style.Dark})},setCardStatusBarDefault=(i=Style.Default)=>{!win$2||win$2.innerWidth>=768||!StatusBar.supportsDefaultStatusBarStyle()||StatusBar.setStyle({style:i})},handleCanDismiss=async(i,o)=>{typeof i.canDismiss!="function"||!await i.canDismiss(void 0,GESTURE)||(o.isRunning()?o.onFinish(()=>{i.dismiss(void 0,"handler")},{oneTimeCallback:!0}):i.dismiss(void 0,"handler"))},calculateSpringStep=i=>.00255275*2.71828**(-14.9619*i)-1.00255*2.71828**(-.0380968*i)+1,SwipeToCloseDefaults={MIN_PRESENTING_SCALE:.93},createSwipeToCloseGesture=(i,o,s,$)=>{const rt=i.offsetHeight;let st=!1,_=!1,ut=null,mt=null;const vt=.2;let wt=!0,bt=0;const Mt=()=>ut&&isIonContent(ut)?ut.scrollY:!0,Ct=createGesture({el:i,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:St=>{const It=St.event.target;return It===null||!It.closest?!0:(ut=findClosestIonContent(It),ut?(isIonContent(ut)?mt=getElementRoot(ut).querySelector(".inner-scroll"):mt=ut,!!!ut.querySelector("ion-refresher")&&mt.scrollTop===0):It.closest("ion-footer")===null)},onStart:St=>{const{deltaY:It}=St;wt=Mt(),_=i.canDismiss!==void 0&&i.canDismiss!==!0,It>0&&ut&&disableContentScrollY(ut),o.progressStart(!0,st?1:0)},onMove:St=>{const{deltaY:It}=St;It>0&&ut&&disableContentScrollY(ut);const Bt=St.deltaY/rt,Ft=Bt>=0&&_,Gt=Ft?vt:.9999,Xt=Ft?calculateSpringStep(Bt/Gt):Bt,ir=clamp$1(1e-4,Xt,Gt);o.progressStep(ir),ir>=.5&&bt<.5?setCardStatusBarDefault(s):ir<.5&&bt>=.5&&setCardStatusBarDark(),bt=ir},onEnd:St=>{const It=St.velocityY,Bt=St.deltaY/rt,Ft=Bt>=0&&_,Gt=Ft?vt:.9999,Xt=Ft?calculateSpringStep(Bt/Gt):Bt,ir=clamp$1(1e-4,Xt,Gt),$r=(St.deltaY+It*1e3)/rt,Tr=!Ft&&$r>=.5;let xr=Tr?-.001:.001;Tr?(o.easing("cubic-bezier(0.32, 0.72, 0, 1)"),xr+=getTimeGivenProgression([0,0],[.32,.72],[0,1],[1,1],ir)[0]):(o.easing("cubic-bezier(1, 0, 0.68, 0.28)"),xr+=getTimeGivenProgression([0,0],[1,0],[.68,.28],[1,1],ir)[0]);const Xr=computeDuration(Tr?Bt*rt:(1-ir)*rt,It);st=Tr,Ct.enable(!1),ut&&resetContentScrollY(ut,wt),o.onFinish(()=>{Tr||Ct.enable(!0)}).progressEnd(Tr?1:0,xr,Xr),Ft&&ir>Gt/4?handleCanDismiss(i,o):Tr&&$()}});return Ct},computeDuration=(i,o)=>clamp$1(400,i/Math.abs(o*1.1),500),createSheetEnterAnimation=i=>{const{currentBreakpoint:o,backdropBreakpoint:s}=i,$=s===void 0||s<o,tt=$?`calc(var(--backdrop-opacity) * ${o})`:"0",rt=createAnimation("backdropAnimation").fromTo("opacity",0,tt);return $&&rt.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:createAnimation("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:`translateY(${100-o*100}%)`}]),backdropAnimation:rt}},createSheetLeaveAnimation=i=>{const{currentBreakpoint:o,backdropBreakpoint:s}=i,$=`calc(var(--backdrop-opacity) * ${getBackdropValueForSheet(o,s)})`,tt=[{offset:0,opacity:$},{offset:1,opacity:0}],rt=[{offset:0,opacity:$},{offset:s,opacity:0},{offset:1,opacity:0}],st=createAnimation("backdropAnimation").keyframes(s!==0?rt:tt);return{wrapperAnimation:createAnimation("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:`translateY(${100-o*100}%)`},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:st}},createEnterAnimation$1=()=>{const i=createAnimation().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),o=createAnimation().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:i,wrapperAnimation:o}},iosEnterAnimation=(i,o)=>{const{presentingEl:s,currentBreakpoint:$}=o,tt=getElementRoot(i),{wrapperAnimation:rt,backdropAnimation:st}=$!==void 0?createSheetEnterAnimation(o):createEnterAnimation$1();st.addElement(tt.querySelector("ion-backdrop")),rt.addElement(tt.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const _=createAnimation("entering-base").addElement(i).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(rt);if(s){const ut=window.innerWidth<768,mt=s.tagName==="ION-MODAL"&&s.presentingElement!==void 0,vt=getElementRoot(s),wt=createAnimation().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),bt=document.body;if(ut){const Mt=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",At=mt?"-10px":Mt,Lt=SwipeToCloseDefaults.MIN_PRESENTING_SCALE,Ht=`translateY(${At}) scale(${Lt})`;wt.afterStyles({transform:Ht}).beforeAddWrite(()=>bt.style.setProperty("background-color","black")).addElement(s).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:Ht,borderRadius:"10px 10px 0 0"}]),_.addAnimation(wt)}else if(_.addAnimation(st),!mt)rt.fromTo("opacity","0","1");else{const At=`translateY(-10px) scale(${mt?SwipeToCloseDefaults.MIN_PRESENTING_SCALE:1})`;wt.afterStyles({transform:At}).addElement(vt.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:At}]);const Lt=createAnimation().afterStyles({transform:At}).addElement(vt.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:At}]);_.addAnimation([wt,Lt])}}else _.addAnimation(st);return _},createLeaveAnimation$1=()=>{const i=createAnimation().fromTo("opacity","var(--backdrop-opacity)",0),o=createAnimation().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:i,wrapperAnimation:o}},iosLeaveAnimation=(i,o,s=500)=>{const{presentingEl:$,currentBreakpoint:tt}=o,rt=getElementRoot(i),{wrapperAnimation:st,backdropAnimation:_}=tt!==void 0?createSheetLeaveAnimation(o):createLeaveAnimation$1();_.addElement(rt.querySelector("ion-backdrop")),st.addElement(rt.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const ut=createAnimation("leaving-base").addElement(i).easing("cubic-bezier(0.32,0.72,0,1)").duration(s).addAnimation(st);if($){const mt=window.innerWidth<768,vt=$.tagName==="ION-MODAL"&&$.presentingElement!==void 0,wt=getElementRoot($),bt=createAnimation().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(At=>{if(At!==1)return;$.style.setProperty("overflow",""),Array.from(Mt.querySelectorAll("ion-modal")).filter(Ht=>Ht.presentingElement!==void 0).length<=1&&Mt.style.setProperty("background-color","")}),Mt=document.body;if(mt){const At=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",Lt=vt?"-10px":At,Ht=SwipeToCloseDefaults.MIN_PRESENTING_SCALE,Tt=`translateY(${Lt}) scale(${Ht})`;bt.addElement($).keyframes([{offset:0,filter:"contrast(0.85)",transform:Tt,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),ut.addAnimation(bt)}else if(ut.addAnimation(_),!vt)st.fromTo("opacity","1","0");else{const Lt=`translateY(-10px) scale(${vt?SwipeToCloseDefaults.MIN_PRESENTING_SCALE:1})`;bt.addElement(wt.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:Lt},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const Ht=createAnimation().addElement(wt.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:Lt},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);ut.addAnimation([bt,Ht])}}else ut.addAnimation(_);return ut},createEnterAnimation=()=>{const i=createAnimation().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),o=createAnimation().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:i,wrapperAnimation:o}},mdEnterAnimation=(i,o)=>{const{currentBreakpoint:s}=o,$=getElementRoot(i),{wrapperAnimation:tt,backdropAnimation:rt}=s!==void 0?createSheetEnterAnimation(o):createEnterAnimation();return rt.addElement($.querySelector("ion-backdrop")),tt.addElement($.querySelector(".modal-wrapper")),createAnimation().addElement(i).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([rt,tt])},createLeaveAnimation=()=>{const i=createAnimation().fromTo("opacity","var(--backdrop-opacity)",0),o=createAnimation().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:i,wrapperAnimation:o}},mdLeaveAnimation=(i,o)=>{const{currentBreakpoint:s}=o,$=getElementRoot(i),{wrapperAnimation:tt,backdropAnimation:rt}=s!==void 0?createSheetLeaveAnimation(o):createLeaveAnimation();return rt.addElement($.querySelector("ion-backdrop")),tt.addElement($.querySelector(".modal-wrapper")),createAnimation().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([rt,tt])},createSheetGesture=(i,o,s,$,tt,rt,st=[],_,ut,mt)=>{const vt=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}],wt=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-tt,opacity:0},{offset:1,opacity:0}],bt={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:tt!==0?wt:vt},Mt=i.querySelector("ion-content"),At=s.clientHeight;let Lt=$,Ht=0,Tt=!1;const Ct=.95,St=rt.childAnimations.find(zr=>zr.id==="wrapperAnimation"),It=rt.childAnimations.find(zr=>zr.id==="backdropAnimation"),Bt=st[st.length-1],Ft=st[0],Gt=()=>{i.style.setProperty("pointer-events","auto"),o.style.setProperty("pointer-events","auto"),i.classList.remove("ion-disable-focus-trap")},Xt=()=>{i.style.setProperty("pointer-events","none"),o.style.setProperty("pointer-events","none"),i.classList.add("ion-disable-focus-trap")};St&&It&&(St.keyframes([...bt.WRAPPER_KEYFRAMES]),It.keyframes([...bt.BACKDROP_KEYFRAMES]),rt.progressStart(!0,1-Lt),Lt>tt?Gt():Xt()),Mt&&Lt!==Bt&&(Mt.scrollY=!1);const ir=zr=>{const hr=zr.event.target.closest("ion-content");return Lt=_(),!(Lt===1&&hr)},$r=()=>{Tt=i.canDismiss!==void 0&&i.canDismiss!==!0&&Ft===0,Mt&&(Mt.scrollY=!1),raf(()=>{i.focus()}),rt.progressStart(!0,1-Lt)},Tr=zr=>{const hr=1-Lt,Er=st.length>1?1-st[1]:void 0,Nt=hr+zr.deltaY/At,Wt=Er!==void 0&&Nt>=Er&&Tt,or=Wt?Ct:.9999,ar=Wt&&Er!==void 0?Er+calculateSpringStep((Nt-Er)/(or-Er)):Nt;Ht=clamp$1(1e-4,ar,or),rt.progressStep(Ht)},xr=zr=>{const hr=zr.velocityY,Er=(zr.deltaY+hr*350)/At,Nt=Lt-Er,Wt=st.reduce((or,ar)=>Math.abs(ar-Nt)<Math.abs(or-Nt)?ar:or);Xr({breakpoint:Wt,breakpointOffset:Ht,canDismiss:Tt})},Xr=zr=>{const{breakpoint:hr,canDismiss:Er,breakpointOffset:Nt}=zr,Wt=Er&&hr===0,or=Wt?Lt:hr,ar=or!==0;return Lt=0,St&&It&&(St.keyframes([{offset:0,transform:`translateY(${Nt*100}%)`},{offset:1,transform:`translateY(${(1-or)*100}%)`}]),It.keyframes([{offset:0,opacity:`calc(var(--backdrop-opacity) * ${getBackdropValueForSheet(1-Nt,tt)})`},{offset:1,opacity:`calc(var(--backdrop-opacity) * ${getBackdropValueForSheet(or,tt)})`}]),rt.progressStep(0)),ln.enable(!1),Wt?handleCanDismiss(i,rt):ar||ut(),new Promise(Fr=>{rt.onFinish(()=>{ar?St&&It?raf(()=>{St.keyframes([...bt.WRAPPER_KEYFRAMES]),It.keyframes([...bt.BACKDROP_KEYFRAMES]),rt.progressStart(!0,1-or),Lt=or,mt(Lt),Mt&&Lt===st[st.length-1]&&(Mt.scrollY=!0),Lt>tt?Gt():Xt(),ln.enable(!0),Fr()}):(ln.enable(!0),Fr()):Fr()},{oneTimeCallback:!0}).progressEnd(1,0,500)})},ln=createGesture({el:s,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:ir,onStart:$r,onMove:Tr,onEnd:xr});return{gesture:ln,moveSheetToBreakpoint:Xr}},modalIosCss=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-card) .modal-wrapper,:host-context([dir=rtl]).modal-card .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-card) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-sheet) .modal-wrapper,:host-context([dir=rtl]).modal-sheet .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-sheet) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}',modalMdCss=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}',Modal=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=createEvent(this,"ionModalDidPresent",7),this.willPresent=createEvent(this,"ionModalWillPresent",7),this.willDismiss=createEvent(this,"ionModalWillDismiss",7),this.didDismiss=createEvent(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=createEvent(this,"ionBreakpointDidChange",7),this.didPresentShorthand=createEvent(this,"didPresent",7),this.willPresentShorthand=createEvent(this,"willPresent",7),this.willDismissShorthand=createEvent(this,"willDismiss",7),this.didDismissShorthand=createEvent(this,"didDismiss",7),this.ionMount=createEvent(this,"ionMount",7),this.triggerController=createTriggerController(),this.coreDelegate=CoreDelegate(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:o,handleBehavior:s}=this;s!=="cycle"||o!==void 0||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:o}=this;o===void 0&&this.dismiss(void 0,BACKDROP)},this.onLifecycle=o=>{const s=this.usersElement,$=LIFECYCLE_MAP[o.type];if(s&&$){const tt=new CustomEvent($,{bubbles:!1,cancelable:!1,detail:o.detail});s.dispatchEvent(tt)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.canDismiss=!0}onIsOpenChange(o,s){o===!0&&s===!1?this.present():o===!1&&s===!0&&this.dismiss()}triggerChanged(){const{trigger:o,el:s,triggerController:$}=this;o&&$.addClickListener(s,o)}breakpointsChanged(o){o!==void 0&&(this.sortedBreakpoints=o.sort((s,$)=>s-$))}connectedCallback(){const{el:o}=this;prepareOverlay(o),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){const{breakpoints:o,initialBreakpoint:s,el:$}=this,tt=this.isSheetModal=o!==void 0&&s!==void 0;this.inheritedAttributes=inheritAttributes$1($,["aria-label","role"]),tt&&(this.currentBreakpoint=this.initialBreakpoint),o!==void 0&&s!==void 0&&!o.includes(s)&&printIonWarning("Your breakpoints array must include the initialBreakpoint value."),setOverlayId($)}componentDidLoad(){this.isOpen===!0&&raf(()=>this.present()),this.breakpointsChanged(this.breakpoints)}getDelegate(o=!1){if(this.workingDelegate&&!o)return{delegate:this.workingDelegate,inline:this.inline};const s=this.el.parentNode,$=this.inline=s!==null&&!this.hasController,tt=this.workingDelegate=$?this.delegate||this.coreDelegate:this.delegate;return{inline:$,delegate:tt}}async checkCanDismiss(o,s){const{canDismiss:$}=this;return typeof $=="function"?$(o,s):$}async present(){if(this.presented)return;const{presentingElement:o,el:s}=this;this.currentTransition!==void 0&&await this.currentTransition,this.currentBreakpoint=this.initialBreakpoint;const{inline:$,delegate:tt}=this.getDelegate(!0);this.usersElement=await attachComponent(tt,s,this.component,["ion-page"],this.componentProps,$),this.ionMount.emit(),hasLazyBuild(s)?await deepReady(this.usersElement):this.keepContentsMounted||await waitForMount(),writeTask$1(()=>this.el.classList.add("show-modal")),this.currentTransition=present(this,"modalEnter",iosEnterAnimation,mdEnterAnimation,{presentingEl:o,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),typeof window<"u"&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),raf(()=>{this.gesture&&this.gesture.enable(!0)}))},window.addEventListener(KEYBOARD_DID_OPEN,this.keyboardOpenCallback));const rt=o!==void 0;rt&&getIonMode$1(this)==="ios"&&(this.statusBarStyle=await StatusBar.getStyle(),setCardStatusBarDark()),await this.currentTransition,this.isSheetModal?this.initSheetGesture():rt&&this.initSwipeToClose(),this.currentTransition=void 0}initSwipeToClose(){var o;if(getIonMode$1(this)!=="ios")return;const{el:s}=this,$=this.leaveAnimation||config.get("modalLeave",iosLeaveAnimation),tt=this.animation=$(s,{presentingEl:this.presentingElement});if(!findIonContent(s)){printIonContentErrorMsg(s);return}const st=(o=this.statusBarStyle)!==null&&o!==void 0?o:Style.Default;this.gesture=createSwipeToCloseGesture(s,tt,st,()=>{this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{await this.dismiss(void 0,GESTURE),this.gestureAnimationDismissing=!1})}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:o,initialBreakpoint:s,backdropBreakpoint:$}=this;if(!o||s===void 0)return;const tt=this.enterAnimation||config.get("modalEnter",iosEnterAnimation),rt=this.animation=tt(this.el,{presentingEl:this.presentingElement,currentBreakpoint:s,backdropBreakpoint:$});rt.progressStart(!0,1);const{gesture:st,moveSheetToBreakpoint:_}=createSheetGesture(this.el,this.backdropEl,o,s,$,rt,this.sortedBreakpoints,()=>{var ut;return(ut=this.currentBreakpoint)!==null&&ut!==void 0?ut:0},()=>this.sheetOnDismiss(),ut=>{this.currentBreakpoint!==ut&&(this.currentBreakpoint=ut,this.ionBreakpointDidChange.emit({breakpoint:ut}))});this.gesture=st,this.moveSheetToBreakpoint=_,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,GESTURE),this.gestureAnimationDismissing=!1})}async dismiss(o,s){var $;if(this.gestureAnimationDismissing&&s!==GESTURE||s!=="handler"&&!await this.checkCanDismiss(o,s))return!1;const{presentingElement:tt}=this;tt!==void 0&&getIonMode$1(this)==="ios"&&setCardStatusBarDefault(this.statusBarStyle),typeof window<"u"&&this.keyboardOpenCallback&&(window.removeEventListener(KEYBOARD_DID_OPEN,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0),this.currentTransition!==void 0&&await this.currentTransition;const st=activeAnimations.get(this)||[];this.currentTransition=dismiss(this,o,s,"modalLeave",iosLeaveAnimation,mdLeaveAnimation,{presentingEl:tt,currentBreakpoint:($=this.currentBreakpoint)!==null&&$!==void 0?$:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});const _=await this.currentTransition;if(_){const{delegate:ut}=this.getDelegate();await detachComponent(ut,this.usersElement),writeTask$1(()=>this.el.classList.remove("show-modal")),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),st.forEach(mt=>mt.destroy())}return this.currentBreakpoint=void 0,this.currentTransition=void 0,this.animation=void 0,_}onDidDismiss(){return eventMethod(this.el,"ionModalDidDismiss")}onWillDismiss(){return eventMethod(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(o){if(!this.isSheetModal){printIonWarning("setCurrentBreakpoint is only supported on sheet modals.");return}if(!this.breakpoints.includes(o)){printIonWarning(`Attempted to set invalid breakpoint value ${o}. Please double check that the breakpoint value is part of your defined breakpoints.`);return}const{currentBreakpoint:s,moveSheetToBreakpoint:$,canDismiss:tt,breakpoints:rt}=this;s!==o&&$&&(this.sheetTransition=$({breakpoint:o,breakpointOffset:1-s,canDismiss:tt!==void 0&&tt!==!0&&rt[0]===0}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){const{breakpoints:o,currentBreakpoint:s}=this;if(!o||s==null)return!1;const $=o.filter(_=>_!==0),rt=($.indexOf(s)+1)%$.length,st=$[rt];return await this.setCurrentBreakpoint(st),!0}render(){const{handle:o,isSheetModal:s,presentingElement:$,htmlAttributes:tt,handleBehavior:rt,inheritedAttributes:st}=this,_=o!==!1&&s,ut=getIonMode$1(this),mt=$!==void 0&&ut==="ios",vt=rt==="cycle";return h$3(Host$1,Object.assign({"no-router":!0,tabindex:"-1"},tt,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign({[ut]:!0,["modal-default"]:!mt&&!s,["modal-card"]:mt,["modal-sheet"]:s,"overlay-hidden":!0},getClassMap(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),h$3("ion-backdrop",{ref:wt=>this.backdropEl=wt,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),ut==="ios"&&h$3("div",{class:"modal-shadow"}),h$3("div",Object.assign({role:"dialog"},st,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:wt=>this.wrapperEl=wt}),_&&h$3("button",{class:"modal-handle",tabIndex:vt?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:vt?this.onHandleClick:void 0,part:"handle"}),h$3("slot",null)))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:modalIosCss,md:modalMdCss}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]}]),LIFECYCLE_MAP={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};function defineCustomElement$1$5(){if(typeof customElements>"u")return;["ion-modal","ion-backdrop"].forEach(o=>{switch(o){case"ion-modal":customElements.get(o)||customElements.define(o,Modal);break;case"ion-backdrop":customElements.get(o)||defineCustomElement$r();break}})}const defineCustomElement$7=defineCustomElement$1$5,appCss="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",App$1=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost()}componentDidLoad(){rIC(async()=>{const o=isPlatform(window,"hybrid");if(config.getBoolean("_testing")||__vitePreload(()=>import("./index9-5f6b5f8a.js"),[]).then($=>$.startTapClick(config)),config.getBoolean("statusTap",o)&&__vitePreload(()=>import("./status-tap-f526ae7c.js"),[]).then($=>$.startStatusTap()),config.getBoolean("inputShims",needInputShims())){const $=isPlatform(window,"ios")?"ios":"android";__vitePreload(()=>import("./input-shims-08bdba8b.js"),[]).then(tt=>tt.startInputShims(config,$))}const s=await __vitePreload(()=>Promise.resolve().then(()=>hardwareBackButton),void 0);config.getBoolean("hardwareBackButton",o)?s.startHardwareBackButton():s.blockHardwareBackButton(),typeof window<"u"&&__vitePreload(()=>Promise.resolve().then(()=>keyboard2),void 0).then($=>$.startKeyboardAssist(window)),__vitePreload(()=>import("./focus-visible-9c13edeb.js"),[]).then($=>this.focusVisible=$.startFocusVisible())})}async setFocus(o){this.focusVisible&&this.focusVisible.setFocus(o)}render(){const o=getIonMode$1(this);return h$3(Host$1,{class:{[o]:!0,"ion-page":!0,"force-statusbar-padding":config.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return appCss}},[0,"ion-app",{setFocus:[64]}]),needInputShims=()=>!!(isPlatform(window,"ios")&&isPlatform(window,"mobile")||isPlatform(window,"android")&&isPlatform(window,"mobileweb")),rIC=i=>{"requestIdleCallback"in window?window.requestIdleCallback(i):setTimeout(i,32)};function defineCustomElement$1$4(){if(typeof customElements>"u")return;["ion-app"].forEach(o=>{switch(o){case"ion-app":customElements.get(o)||customElements.define(o,App$1);break}})}const defineCustomElement$6=defineCustomElement$1$4,routeOutletCss=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",RouterOutlet=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=createEvent(this,"ionNavWillLoad",7),this.ionNavWillChange=createEvent(this,"ionNavWillChange",3),this.ionNavDidChange=createEvent(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=getIonMode$1(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const o=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await __vitePreload(()=>import("./swipe-back-a0b05e87.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>o(),s=>{var $;return($=this.ani)===null||$===void 0?void 0:$.progressStep(s)},(s,$,tt)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(s)},{oneTimeCallback:!0});let rt=s?-.001:.001;s?rt+=getTimeGivenProgression([0,0],[.32,.72],[0,1],[1,1],$)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),rt+=getTimeGivenProgression([0,0],[1,0],[.68,.28],[1,1],$)[0]),this.ani.progressEnd(s?1:0,rt,tt)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(o,s,$){const tt=await this.lock();let rt=!1;try{rt=await this.transition(o,s,$)}catch(st){console.error(st)}return tt(),rt}async setRouteId(o,s,$,tt){return{changed:await this.setRoot(o,s,{duration:$==="root"?0:void 0,direction:$==="back"?"back":"forward",animationBuilder:tt}),element:this.activeEl}}async getRouteId(){const o=this.activeEl;return o?{id:o.tagName,element:o,params:this.activeParams}:void 0}async setRoot(o,s,$){if(this.activeComponent===o&&shallowEqualStringMap(s,this.activeParams))return!1;const tt=this.activeEl,rt=await attachComponent(this.delegate,this.el,o,["ion-page","ion-page-invisible"],s);return this.activeComponent=o,this.activeEl=rt,this.activeParams=s,await this.commit(rt,tt,$),await detachComponent(this.delegate,tt),!0}async transition(o,s,$={}){if(s===o)return!1;this.ionNavWillChange.emit();const{el:tt,mode:rt}=this,st=this.animated&&config.getBoolean("animated",!0),_=$.animationBuilder||this.animation||config.get("navAnimation");return await transition(Object.assign(Object.assign({mode:rt,animated:st,enteringEl:o,leavingEl:s,baseEl:tt,deepWait:hasLazyBuild(tt),progressCallback:$.progressAnimation?ut=>{ut!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,ut.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),ut.progressEnd(0,0,0)):this.ani=ut}:void 0},$),{animationBuilder:_})),this.ionNavDidChange.emit(),!0}async lock(){const o=this.waitPromise;let s;return this.waitPromise=new Promise($=>s=$),o!==void 0&&await o,s}render(){return h$3("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return routeOutletCss}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);function defineCustomElement$1$3(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(o=>{switch(o){case"ion-router-outlet":customElements.get(o)||customElements.define(o,RouterOutlet);break}})}const defineCustomElement$5=defineCustomElement$1$3;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const tabBarIosCss=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",tabBarMdCss=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",TabBar=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=createEvent(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await createKeyboardController(async(o,s)=>{o===!1&&s!==void 0&&await s,this.keyboardVisible=o})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:o,translucent:s,keyboardVisible:$}=this,tt=getIonMode$1(this),rt=$&&this.el.getAttribute("slot")!=="top";return h$3(Host$1,{role:"tablist","aria-hidden":rt?"true":null,class:createColorClasses$1(o,{[tt]:!0,"tab-bar-translucent":s,"tab-bar-hidden":rt})},h$3("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:tabBarIosCss,md:tabBarMdCss}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);function defineCustomElement$1$2(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(o=>{switch(o){case"ion-tab-bar":customElements.get(o)||customElements.define(o,TabBar);break}})}const defineCustomElement$4=defineCustomElement$1$2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const tabButtonIosCss=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',tabButtonMdCss=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',TabButton=proxyCustomElement$1(class extends H$1{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=createEvent(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=o=>{(o.key==="Enter"||o.key===" ")&&this.selectTab(o)},this.onClick=o=>{this.selectTab(o)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(o){const s=o.target,$=this.el.parentElement;(o.composedPath().includes($)||s!=null&&s.contains(this.el))&&(this.selected=this.tab===o.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},inheritAttributes$1(this.el,["aria-label"])),this.layout===void 0&&(this.layout=config.get("tabButtonLayout","icon-top"))}selectTab(o){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),o.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:o,hasIcon:s,hasLabel:$,href:tt,rel:rt,target:st,layout:_,selected:ut,tab:mt,inheritedAttributes:vt}=this,wt=getIonMode$1(this),bt={download:this.download,href:tt,rel:rt,target:st};return h$3(Host$1,{onClick:this.onClick,onKeyup:this.onKeyUp,id:mt!==void 0?`tab-button-${mt}`:null,class:{[wt]:!0,"tab-selected":ut,"tab-disabled":o,"tab-has-label":$,"tab-has-icon":s,"tab-has-label-only":$&&!s,"tab-has-icon-only":s&&!$,[`tab-layout-${_}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},h$3("a",Object.assign({},bt,{class:"button-native",part:"native",role:"tab","aria-selected":ut?"true":null,"aria-disabled":o?"true":null,tabindex:o?"-1":void 0},vt),h$3("span",{class:"button-inner"},h$3("slot",null)),wt==="md"&&h$3("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:tabButtonIosCss,md:tabButtonMdCss}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function defineCustomElement$1$1(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(o=>{switch(o){case"ion-tab-button":customElements.get(o)||customElements.define(o,TabButton);break;case"ion-ripple-effect":customElements.get(o)||defineCustomElement$m();break}})}const defineCustomElement$3=defineCustomElement$1$1,BUILD={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let scopeId,contentRef,hostTagName,useNativeShadowDom=!1,checkSlotFallbackVisibility=!1,checkSlotRelocate=!1,isSvgMode=!1,renderingRef=null,queuePending=!1;const getAssetPath=i=>{const o=new URL(i,plt.$resourcesUrl$);return o.origin!==win.location.origin?o.href:o.pathname},createTime=(i,o="")=>()=>{},XLINK_NS="http://www.w3.org/1999/xlink",EMPTY_OBJ={},SVG_NS="http://www.w3.org/2000/svg",HTML_NS="http://www.w3.org/1999/xhtml",isDef=i=>i!=null,isComplexType=i=>(i=typeof i,i==="object"||i==="function");function queryNonceMetaTagContent(i){var o,s,$;return($=(s=(o=i.head)===null||o===void 0?void 0:o.querySelector('meta[name="csp-nonce"]'))===null||s===void 0?void 0:s.getAttribute("content"))!==null&&$!==void 0?$:void 0}const h$2=(i,o,...s)=>{let $=null,tt=null,rt=null,st=!1,_=!1;const ut=[],mt=wt=>{for(let bt=0;bt<wt.length;bt++)$=wt[bt],Array.isArray($)?mt($):$!=null&&typeof $!="boolean"&&((st=typeof i!="function"&&!isComplexType($))&&($=String($)),st&&_?ut[ut.length-1].$text$+=$:ut.push(st?newVNode(null,$):$),_=st)};if(mt(s),o){o.key&&(tt=o.key),o.name&&(rt=o.name);{const wt=o.className||o.class;wt&&(o.class=typeof wt!="object"?wt:Object.keys(wt).filter(bt=>wt[bt]).join(" "))}}if(typeof i=="function")return i(o===null?{}:o,ut,vdomFnUtils);const vt=newVNode(i,null);return vt.$attrs$=o,ut.length>0&&(vt.$children$=ut),vt.$key$=tt,vt.$name$=rt,vt},newVNode=(i,o)=>{const s={$flags$:0,$tag$:i,$text$:o,$elm$:null,$children$:null};return s.$attrs$=null,s.$key$=null,s.$name$=null,s},Host={},isHost=i=>i&&i.$tag$===Host,vdomFnUtils={forEach:(i,o)=>i.map(convertToPublic).forEach(o),map:(i,o)=>i.map(convertToPublic).map(o).map(convertToPrivate)},convertToPublic=i=>({vattrs:i.$attrs$,vchildren:i.$children$,vkey:i.$key$,vname:i.$name$,vtag:i.$tag$,vtext:i.$text$}),convertToPrivate=i=>{if(typeof i.vtag=="function"){const s=Object.assign({},i.vattrs);return i.vkey&&(s.key=i.vkey),i.vname&&(s.name=i.vname),h$2(i.vtag,s,...i.vchildren||[])}const o=newVNode(i.vtag,i.vtext);return o.$attrs$=i.vattrs,o.$children$=i.vchildren,o.$key$=i.vkey,o.$name$=i.vname,o},computeMode=i=>modeResolutionChain.map(o=>o(i)).find(o=>!!o),parsePropertyValue=(i,o)=>i!=null&&!isComplexType(i)?o&4?i==="false"?!1:i===""||!!i:o&2?parseFloat(i):o&1?String(i):i:i,rootAppliedStyles=new WeakMap,registerStyle=(i,o,s)=>{let $=styles.get(i);supportsConstructableStylesheets&&s?($=$||new CSSStyleSheet,typeof $=="string"?$=o:$.replaceSync(o)):$=o,styles.set(i,$)},addStyle=(i,o,s,$)=>{var tt;let rt=getScopeId(o,s);const st=styles.get(rt);if(i=i.nodeType===11?i:doc,st)if(typeof st=="string"){i=i.head||i;let _=rootAppliedStyles.get(i),ut;if(_||rootAppliedStyles.set(i,_=new Set),!_.has(rt)){{ut=doc.createElement("style"),ut.innerHTML=st;const mt=(tt=plt.$nonce$)!==null&&tt!==void 0?tt:queryNonceMetaTagContent(doc);mt!=null&&ut.setAttribute("nonce",mt),i.insertBefore(ut,i.querySelector("link"))}_&&_.add(rt)}}else i.adoptedStyleSheets.includes(st)||(i.adoptedStyleSheets=[...i.adoptedStyleSheets,st]);return rt},attachStyles=i=>{const o=i.$cmpMeta$,s=i.$hostElement$,$=o.$flags$,tt=createTime("attachStyles",o.$tagName$),rt=addStyle(s.shadowRoot?s.shadowRoot:s.getRootNode(),o,i.$modeName$);$&10&&(s["s-sc"]=rt,s.classList.add(rt+"-h"),$&2&&s.classList.add(rt+"-s")),tt()},getScopeId=(i,o)=>"sc-"+(o&&i.$flags$&32?i.$tagName$+"-"+o:i.$tagName$),setAccessor=(i,o,s,$,tt,rt)=>{if(s!==$){let st=isMemberInElement(i,o),_=o.toLowerCase();if(o==="class"){const ut=i.classList,mt=parseClassList(s),vt=parseClassList($);ut.remove(...mt.filter(wt=>wt&&!vt.includes(wt))),ut.add(...vt.filter(wt=>wt&&!mt.includes(wt)))}else if(o==="style"){for(const ut in s)(!$||$[ut]==null)&&(ut.includes("-")?i.style.removeProperty(ut):i.style[ut]="");for(const ut in $)(!s||$[ut]!==s[ut])&&(ut.includes("-")?i.style.setProperty(ut,$[ut]):i.style[ut]=$[ut])}else if(o!=="key")if(o==="ref")$&&$(i);else if(!i.__lookupSetter__(o)&&o[0]==="o"&&o[1]==="n")o[2]==="-"?o=o.slice(3):isMemberInElement(win,_)?o=_.slice(2):o=_[2]+o.slice(3),s&&plt.rel(i,o,s,!1),$&&plt.ael(i,o,$,!1);else{const ut=isComplexType($);if((st||ut&&$!==null)&&!tt)try{if(i.tagName.includes("-"))i[o]=$;else{const vt=$==null?"":$;o==="list"?st=!1:(s==null||i[o]!=vt)&&(i[o]=vt)}}catch(vt){}let mt=!1;_!==(_=_.replace(/^xlink\:?/,""))&&(o=_,mt=!0),$==null||$===!1?($!==!1||i.getAttribute(o)==="")&&(mt?i.removeAttributeNS(XLINK_NS,o):i.removeAttribute(o)):(!st||rt&4||tt)&&!ut&&($=$===!0?"":$,mt?i.setAttributeNS(XLINK_NS,o,$):i.setAttribute(o,$))}}},parseClassListRegex=/\s/,parseClassList=i=>i?i.split(parseClassListRegex):[],updateElement=(i,o,s,$)=>{const tt=o.$elm$.nodeType===11&&o.$elm$.host?o.$elm$.host:o.$elm$,rt=i&&i.$attrs$||EMPTY_OBJ,st=o.$attrs$||EMPTY_OBJ;for($ in rt)$ in st||setAccessor(tt,$,rt[$],void 0,s,o.$flags$);for($ in st)setAccessor(tt,$,rt[$],st[$],s,o.$flags$)},createElm=(i,o,s,$)=>{const tt=o.$children$[s];let rt=0,st,_,ut;if(useNativeShadowDom||(checkSlotRelocate=!0,tt.$tag$==="slot"&&(scopeId&&$.classList.add(scopeId+"-s"),tt.$flags$|=tt.$children$?2:1)),tt.$text$!==null)st=tt.$elm$=doc.createTextNode(tt.$text$);else if(tt.$flags$&1)st=tt.$elm$=doc.createTextNode("");else{if(isSvgMode||(isSvgMode=tt.$tag$==="svg"),st=tt.$elm$=doc.createElementNS(isSvgMode?SVG_NS:HTML_NS,tt.$flags$&2?"slot-fb":tt.$tag$),isSvgMode&&tt.$tag$==="foreignObject"&&(isSvgMode=!1),updateElement(null,tt,isSvgMode),isDef(scopeId)&&st["s-si"]!==scopeId&&st.classList.add(st["s-si"]=scopeId),tt.$children$)for(rt=0;rt<tt.$children$.length;++rt)_=createElm(i,tt,rt,st),_&&st.appendChild(_);tt.$tag$==="svg"?isSvgMode=!1:st.tagName==="foreignObject"&&(isSvgMode=!0)}return st["s-hn"]=hostTagName,tt.$flags$&3&&(st["s-sr"]=!0,st["s-cr"]=contentRef,st["s-sn"]=tt.$name$||"",ut=i&&i.$children$&&i.$children$[s],ut&&ut.$tag$===tt.$tag$&&i.$elm$&&putBackInOriginalLocation(i.$elm$,!1)),st},putBackInOriginalLocation=(i,o)=>{plt.$flags$|=1;const s=i.childNodes;for(let $=s.length-1;$>=0;$--){const tt=s[$];tt["s-hn"]!==hostTagName&&tt["s-ol"]&&(parentReferenceNode(tt).insertBefore(tt,referenceNode(tt)),tt["s-ol"].remove(),tt["s-ol"]=void 0,checkSlotRelocate=!0),o&&putBackInOriginalLocation(tt,o)}plt.$flags$&=-2},addVnodes=(i,o,s,$,tt,rt)=>{let st=i["s-cr"]&&i["s-cr"].parentNode||i,_;for(st.shadowRoot&&st.tagName===hostTagName&&(st=st.shadowRoot);tt<=rt;++tt)$[tt]&&(_=createElm(null,s,tt,i),_&&($[tt].$elm$=_,st.insertBefore(_,referenceNode(o))))},removeVnodes=(i,o,s,$,tt)=>{for(;o<=s;++o)($=i[o])&&(tt=$.$elm$,callNodeRefs($),checkSlotFallbackVisibility=!0,tt["s-ol"]?tt["s-ol"].remove():putBackInOriginalLocation(tt,!0),tt.remove())},updateChildren=(i,o,s,$)=>{let tt=0,rt=0,st=0,_=0,ut=o.length-1,mt=o[0],vt=o[ut],wt=$.length-1,bt=$[0],Mt=$[wt],At,Lt;for(;tt<=ut&&rt<=wt;)if(mt==null)mt=o[++tt];else if(vt==null)vt=o[--ut];else if(bt==null)bt=$[++rt];else if(Mt==null)Mt=$[--wt];else if(isSameVnode(mt,bt))patch(mt,bt),mt=o[++tt],bt=$[++rt];else if(isSameVnode(vt,Mt))patch(vt,Mt),vt=o[--ut],Mt=$[--wt];else if(isSameVnode(mt,Mt))(mt.$tag$==="slot"||Mt.$tag$==="slot")&&putBackInOriginalLocation(mt.$elm$.parentNode,!1),patch(mt,Mt),i.insertBefore(mt.$elm$,vt.$elm$.nextSibling),mt=o[++tt],Mt=$[--wt];else if(isSameVnode(vt,bt))(mt.$tag$==="slot"||Mt.$tag$==="slot")&&putBackInOriginalLocation(vt.$elm$.parentNode,!1),patch(vt,bt),i.insertBefore(vt.$elm$,mt.$elm$),vt=o[--ut],bt=$[++rt];else{for(st=-1,_=tt;_<=ut;++_)if(o[_]&&o[_].$key$!==null&&o[_].$key$===bt.$key$){st=_;break}st>=0?(Lt=o[st],Lt.$tag$!==bt.$tag$?At=createElm(o&&o[rt],s,st,i):(patch(Lt,bt),o[st]=void 0,At=Lt.$elm$),bt=$[++rt]):(At=createElm(o&&o[rt],s,rt,i),bt=$[++rt]),At&&parentReferenceNode(mt.$elm$).insertBefore(At,referenceNode(mt.$elm$))}tt>ut?addVnodes(i,$[wt+1]==null?null:$[wt+1].$elm$,s,$,rt,wt):rt>wt&&removeVnodes(o,tt,ut)},isSameVnode=(i,o)=>i.$tag$===o.$tag$?i.$tag$==="slot"?i.$name$===o.$name$:i.$key$===o.$key$:!1,referenceNode=i=>i&&i["s-ol"]||i,parentReferenceNode=i=>(i["s-ol"]?i["s-ol"]:i).parentNode,patch=(i,o)=>{const s=o.$elm$=i.$elm$,$=i.$children$,tt=o.$children$,rt=o.$tag$,st=o.$text$;let _;st===null?(isSvgMode=rt==="svg"?!0:rt==="foreignObject"?!1:isSvgMode,rt==="slot"||updateElement(i,o,isSvgMode),$!==null&&tt!==null?updateChildren(s,$,o,tt):tt!==null?(i.$text$!==null&&(s.textContent=""),addVnodes(s,null,o,tt,0,tt.length-1)):$!==null&&removeVnodes($,0,$.length-1),isSvgMode&&rt==="svg"&&(isSvgMode=!1)):(_=s["s-cr"])?_.parentNode.textContent=st:i.$text$!==st&&(s.data=st)},updateFallbackSlotVisibility=i=>{const o=i.childNodes;let s,$,tt,rt,st,_;for($=0,tt=o.length;$<tt;$++)if(s=o[$],s.nodeType===1){if(s["s-sr"]){for(st=s["s-sn"],s.hidden=!1,rt=0;rt<tt;rt++)if(_=o[rt].nodeType,o[rt]["s-hn"]!==s["s-hn"]||st!==""){if(_===1&&st===o[rt].getAttribute("slot")){s.hidden=!0;break}}else if(_===1||_===3&&o[rt].textContent.trim()!==""){s.hidden=!0;break}}updateFallbackSlotVisibility(s)}},relocateNodes=[],relocateSlotContent=i=>{let o,s,$,tt,rt,st,_=0;const ut=i.childNodes,mt=ut.length;for(;_<mt;_++){if(o=ut[_],o["s-sr"]&&(s=o["s-cr"])&&s.parentNode)for($=s.parentNode.childNodes,tt=o["s-sn"],st=$.length-1;st>=0;st--)s=$[st],!s["s-cn"]&&!s["s-nr"]&&s["s-hn"]!==o["s-hn"]&&(isNodeLocatedInSlot(s,tt)?(rt=relocateNodes.find(vt=>vt.$nodeToRelocate$===s),checkSlotFallbackVisibility=!0,s["s-sn"]=s["s-sn"]||tt,rt?rt.$slotRefNode$=o:relocateNodes.push({$slotRefNode$:o,$nodeToRelocate$:s}),s["s-sr"]&&relocateNodes.map(vt=>{isNodeLocatedInSlot(vt.$nodeToRelocate$,s["s-sn"])&&(rt=relocateNodes.find(wt=>wt.$nodeToRelocate$===s),rt&&!vt.$slotRefNode$&&(vt.$slotRefNode$=rt.$slotRefNode$))})):relocateNodes.some(vt=>vt.$nodeToRelocate$===s)||relocateNodes.push({$nodeToRelocate$:s}));o.nodeType===1&&relocateSlotContent(o)}},isNodeLocatedInSlot=(i,o)=>i.nodeType===1?i.getAttribute("slot")===null&&o===""||i.getAttribute("slot")===o:i["s-sn"]===o?!0:o==="",callNodeRefs=i=>{i.$attrs$&&i.$attrs$.ref&&i.$attrs$.ref(null),i.$children$&&i.$children$.map(callNodeRefs)},renderVdom=(i,o)=>{const s=i.$hostElement$,$=i.$cmpMeta$,tt=i.$vnode$||newVNode(null,null),rt=isHost(o)?o:h$2(null,null,o);hostTagName=s.tagName,$.$attrsToReflect$&&(rt.$attrs$=rt.$attrs$||{},$.$attrsToReflect$.map(([st,_])=>rt.$attrs$[_]=s[st])),rt.$tag$=null,rt.$flags$|=4,i.$vnode$=rt,rt.$elm$=tt.$elm$=s.shadowRoot||s,scopeId=s["s-sc"],contentRef=s["s-cr"],useNativeShadowDom=($.$flags$&1)!==0,checkSlotFallbackVisibility=!1,patch(tt,rt);{if(plt.$flags$|=1,checkSlotRelocate){relocateSlotContent(rt.$elm$);let st,_,ut,mt,vt,wt,bt=0;for(;bt<relocateNodes.length;bt++)st=relocateNodes[bt],_=st.$nodeToRelocate$,_["s-ol"]||(ut=doc.createTextNode(""),ut["s-nr"]=_,_.parentNode.insertBefore(_["s-ol"]=ut,_));for(bt=0;bt<relocateNodes.length;bt++)if(st=relocateNodes[bt],_=st.$nodeToRelocate$,st.$slotRefNode$){for(mt=st.$slotRefNode$.parentNode,vt=st.$slotRefNode$.nextSibling,ut=_["s-ol"];ut=ut.previousSibling;)if(wt=ut["s-nr"],wt&&wt["s-sn"]===_["s-sn"]&&mt===wt.parentNode&&(wt=wt.nextSibling,!wt||!wt["s-nr"])){vt=wt;break}(!vt&&mt!==_.parentNode||_.nextSibling!==vt)&&_!==vt&&(!_["s-hn"]&&_["s-ol"]&&(_["s-hn"]=_["s-ol"].parentNode.nodeName),mt.insertBefore(_,vt))}else _.nodeType===1&&(_.hidden=!0)}checkSlotFallbackVisibility&&updateFallbackSlotVisibility(rt.$elm$),plt.$flags$&=-2,relocateNodes.length=0}},attachToAncestor=(i,o)=>{},scheduleUpdate=(i,o)=>(i.$flags$|=16,attachToAncestor(i,i.$ancestorComponent$),writeTask(()=>dispatchHooks(i,o))),dispatchHooks=(i,o)=>{const s=i.$hostElement$,$=createTime("scheduleUpdate",i.$cmpMeta$.$tagName$),tt=s;let rt;return o?rt=safeCall(tt,"componentWillLoad"):rt=safeCall(tt,"componentWillUpdate"),rt=then(rt,()=>safeCall(tt,"componentWillRender")),$(),then(rt,()=>updateComponent(i,tt,o))},updateComponent=async(i,o,s)=>{const $=i.$hostElement$,tt=createTime("update",i.$cmpMeta$.$tagName$);$["s-rc"],s&&attachStyles(i);const rt=createTime("render",i.$cmpMeta$.$tagName$);callRender(i,o,$),rt(),tt(),postUpdateComponent(i)},callRender=(i,o,s)=>{try{renderingRef=o,o=o.render&&o.render(),i.$flags$&=-17,i.$flags$|=2,(BUILD.hasRenderFn||BUILD.reflect)&&(BUILD.vdomRender||BUILD.reflect)&&(BUILD.hydrateServerSide||renderVdom(i,o))}catch(_){consoleError(_,i.$hostElement$)}return renderingRef=null,null},postUpdateComponent=i=>{const o=i.$cmpMeta$.$tagName$,s=i.$hostElement$,$=createTime("postUpdate",o),tt=s;i.$ancestorComponent$,safeCall(tt,"componentDidRender"),i.$flags$&64?(safeCall(tt,"componentDidUpdate"),$()):(i.$flags$|=64,safeCall(tt,"componentDidLoad"),$())},safeCall=(i,o,s)=>{if(i&&i[o])try{return i[o](s)}catch($){consoleError($)}},then=(i,o)=>i&&i.then?i.then(o):o(),getValue=(i,o)=>getHostRef(i).$instanceValues$.get(o),setValue=(i,o,s,$)=>{const tt=getHostRef(i),rt=i,st=tt.$instanceValues$.get(o),_=tt.$flags$,ut=rt;s=parsePropertyValue(s,$.$members$[o][0]);const mt=Number.isNaN(st)&&Number.isNaN(s);if(s!==st&&!mt){tt.$instanceValues$.set(o,s);{if($.$watchers$&&_&128){const wt=$.$watchers$[o];wt&&wt.map(bt=>{try{ut[bt](s,st,o)}catch(Mt){consoleError(Mt,rt)}})}if((_&18)===2){if(ut.componentShouldUpdate&&ut.componentShouldUpdate(s,st,o)===!1)return;scheduleUpdate(tt,!1)}}}},proxyComponent=(i,o,s)=>{if(o.$members$){i.watchers&&(o.$watchers$=i.watchers);const $=Object.entries(o.$members$),tt=i.prototype;$.map(([rt,[st]])=>{(st&31||st&32)&&Object.defineProperty(tt,rt,{get(){return getValue(this,rt)},set(_){setValue(this,rt,_,o)},configurable:!0,enumerable:!0})});{const rt=new Map;tt.attributeChangedCallback=function(st,_,ut){plt.jmp(()=>{const mt=rt.get(st);if(this.hasOwnProperty(mt))ut=this[mt],delete this[mt];else if(tt.hasOwnProperty(mt)&&typeof this[mt]=="number"&&this[mt]==ut)return;this[mt]=ut===null&&typeof this[mt]=="boolean"?!1:ut})},i.observedAttributes=$.filter(([st,_])=>_[0]&15).map(([st,_])=>{const ut=_[1]||st;return rt.set(ut,st),_[0]&512&&o.$attrsToReflect$.push([st,ut]),ut})}}return i},initializeComponent=async(i,o,s,$,tt)=>{if(!(o.$flags$&32)&&(tt=i.constructor,o.$flags$|=32,customElements.whenDefined(s.$tagName$).then(()=>o.$flags$|=128),tt.style)){let st=tt.style;typeof st!="string"&&(st=st[o.$modeName$=computeMode(i)]);const _=getScopeId(s,o.$modeName$);if(!styles.has(_)){const ut=createTime("registerStyles",s.$tagName$);registerStyle(_,st,!!(s.$flags$&1)),ut()}}o.$ancestorComponent$,(()=>scheduleUpdate(o,!0))()},fireConnectedCallback=i=>{},connectedCallback=i=>{if(!(plt.$flags$&1)){const o=getHostRef(i),s=o.$cmpMeta$,$=createTime("connectedCallback",s.$tagName$);o.$flags$&1?(addHostEventListeners(i,o,s.$listeners$),fireConnectedCallback(o.$lazyInstance$)):(o.$flags$|=1,s.$flags$&12&&setContentReference(i),s.$members$&&Object.entries(s.$members$).map(([tt,[rt]])=>{if(rt&31&&i.hasOwnProperty(tt)){const st=i[tt];delete i[tt],i[tt]=st}}),initializeComponent(i,o,s)),$()}},setContentReference=i=>{const o=i["s-cr"]=doc.createComment("");o["s-cn"]=!0,i.insertBefore(o,i.firstChild)},disconnectedCallback=i=>{if(!(plt.$flags$&1)){const o=getHostRef(i);o.$rmListeners$&&(o.$rmListeners$.map(s=>s()),o.$rmListeners$=void 0)}},proxyCustomElement=(i,o)=>{const s={$flags$:o[0],$tagName$:o[1]};s.$members$=o[2],s.$listeners$=o[3],s.$watchers$=i.$watchers$,s.$attrsToReflect$=[];const $=i.prototype.connectedCallback,tt=i.prototype.disconnectedCallback;return Object.assign(i.prototype,{__registerHost(){registerHost(this,s)},connectedCallback(){connectedCallback(this),$&&$.call(this)},disconnectedCallback(){disconnectedCallback(this),tt&&tt.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(s.$flags$&16)})}}),i.is=s.$tagName$,proxyComponent(i,s)},addHostEventListeners=(i,o,s,$)=>{s&&s.map(([tt,rt,st])=>{const _=getHostListenerTarget(i,tt),ut=hostListenerProxy(o,st),mt=hostListenerOpts(tt);plt.ael(_,rt,ut,mt),(o.$rmListeners$=o.$rmListeners$||[]).push(()=>plt.rel(_,rt,ut,mt))})},hostListenerProxy=(i,o)=>s=>{try{BUILD.lazyLoad||i.$hostElement$[o](s)}catch($){consoleError($)}},getHostListenerTarget=(i,o)=>o&4?doc:o&8?win:o&16?doc.body:i,hostListenerOpts=i=>supportsListenerOptions?{passive:(i&1)!==0,capture:(i&2)!==0}:(i&2)!==0,hostRefs=new WeakMap,getHostRef=i=>hostRefs.get(i),registerHost=(i,o)=>{const s={$flags$:0,$hostElement$:i,$cmpMeta$:o,$instanceValues$:new Map};return addHostEventListeners(i,s,o.$listeners$),hostRefs.set(i,s)},isMemberInElement=(i,o)=>o in i,consoleError=(i,o)=>(0,console.error)(i,o),styles=new Map,modeResolutionChain=[],win=typeof window<"u"?window:{},doc=win.document||{head:{}},H=win.HTMLElement||class{},plt={$flags$:0,$resourcesUrl$:"",jmp:i=>i(),raf:i=>requestAnimationFrame(i),ael:(i,o,s,$)=>i.addEventListener(o,s,$),rel:(i,o,s,$)=>i.removeEventListener(o,s,$),ce:(i,o)=>new CustomEvent(i,o)},supportsListenerOptions=(()=>{let i=!1;try{doc.addEventListener("e",null,Object.defineProperty({},"passive",{get(){i=!0}}))}catch(o){}return i})(),promiseResolve=i=>Promise.resolve(i),supportsConstructableStylesheets=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(i){}return!1})(),queueDomReads=[],queueDomWrites=[],queueTask=(i,o)=>s=>{i.push(s),queuePending||(queuePending=!0,o&&plt.$flags$&4?nextTick(flush):plt.raf(flush))},consume=i=>{for(let o=0;o<i.length;o++)try{i[o](performance.now())}catch(s){consoleError(s)}i.length=0},flush=()=>{consume(queueDomReads),consume(queueDomWrites),(queuePending=queueDomReads.length>0)&&plt.raf(flush)},nextTick=i=>promiseResolve().then(i),writeTask=queueTask(queueDomWrites,!0);let CACHED_MAP;const getIconMap=()=>{if(typeof window>"u")return new Map;if(!CACHED_MAP){const i=window;i.Ionicons=i.Ionicons||{},CACHED_MAP=i.Ionicons.map=i.Ionicons.map||new Map}return CACHED_MAP},getUrl=i=>{let o=getSrc(i.src);return o||(o=getName(i.name,i.icon,i.mode,i.ios,i.md),o?getNamedUrl(o):i.icon&&(o=getSrc(i.icon),o||(o=getSrc(i.icon[i.mode]),o))?o:null)},getNamedUrl=i=>{const o=getIconMap().get(i);return o||getAssetPath(`svg/${i}.svg`)},getName=(i,o,s,$,tt)=>(s=(s&&toLower(s))==="ios"?"ios":"md",$&&s==="ios"?i=toLower($):tt&&s==="md"?i=toLower(tt):(!i&&o&&!isSrc(o)&&(i=o),isStr(i)&&(i=toLower(i))),!isStr(i)||i.trim()===""||i.replace(/[a-z]|-|\d/gi,"")!==""?null:i),getSrc=i=>isStr(i)&&(i=i.trim(),isSrc(i))?i:null,isSrc=i=>i.length>0&&/(\/|\.)/.test(i),isStr=i=>typeof i=="string",toLower=i=>i.toLowerCase(),inheritAttributes=(i,o=[])=>{const s={};return o.forEach($=>{i.hasAttribute($)&&(i.getAttribute($)!==null&&(s[$]=i.getAttribute($)),i.removeAttribute($))}),s},isRTL=i=>i&&i.dir!==""?i.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",validateContent=i=>{const o=document.createElement("div");o.innerHTML=i;for(let $=o.childNodes.length-1;$>=0;$--)o.childNodes[$].nodeName.toLowerCase()!=="svg"&&o.removeChild(o.childNodes[$]);const s=o.firstElementChild;if(s&&s.nodeName.toLowerCase()==="svg"){const $=s.getAttribute("class")||"";if(s.setAttribute("class",($+" s-ion-icon").trim()),isValid(s))return o.innerHTML}return""},isValid=i=>{if(i.nodeType===1){if(i.nodeName.toLowerCase()==="script")return!1;for(let o=0;o<i.attributes.length;o++){const s=i.attributes[o].name;if(isStr(s)&&s.toLowerCase().indexOf("on")===0)return!1}for(let o=0;o<i.childNodes.length;o++)if(!isValid(i.childNodes[o]))return!1}return!0},isSvgDataUrl=i=>i.startsWith("data:image/svg+xml"),isEncodedDataUrl=i=>i.indexOf(";utf8,")!==-1,ioniconContent=new Map,requests=new Map;let parser;const getSvgContent=(i,o)=>{let s=requests.get(i);if(!s)if(typeof fetch<"u"&&typeof document<"u")if(isSvgDataUrl(i)&&isEncodedDataUrl(i)){parser||(parser=new DOMParser);const tt=parser.parseFromString(i,"text/html").querySelector("svg");return tt&&ioniconContent.set(i,tt.outerHTML),Promise.resolve()}else s=fetch(i).then($=>{if($.ok)return $.text().then(tt=>{tt&&o!==!1&&(tt=validateContent(tt)),ioniconContent.set(i,tt||"")});ioniconContent.set(i,"")}),requests.set(i,s);else return ioniconContent.set(i,""),Promise.resolve();return s},iconCss=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",Icon=proxyCustomElement(class extends H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=getIonMode(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=inheritAttributes(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(i,o,s){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const $=this.io=new window.IntersectionObserver(tt=>{tt[0].isIntersecting&&($.disconnect(),this.io=void 0,s())},{rootMargin:o});$.observe(i)}else s()}loadIcon(){if(this.isVisible){const i=getUrl(this);i&&(ioniconContent.has(i)?this.svgContent=ioniconContent.get(i):getSvgContent(i,this.sanitize).then(()=>this.svgContent=ioniconContent.get(i)))}this.iconName=getName(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:i,iconName:o,inheritedAttributes:s,el:$}=this,tt=this.mode||"md",rt=o?(o.includes("arrow")||o.includes("chevron"))&&i!==!1:!1,st=i||rt;return h$2(Host,Object.assign({role:"img",class:Object.assign(Object.assign({[tt]:!0},createColorClasses(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":st,"icon-rtl":st&&isRTL($)})},s),this.svgContent?h$2("div",{class:"icon-inner",innerHTML:this.svgContent}):h$2("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return iconCss}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),getIonMode=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",createColorClasses=i=>i?{"ion-color":!0,[`ion-color-${i}`]:!0}:null;function defineCustomElement$1(){if(typeof customElements>"u")return;["ion-icon"].forEach(o=>{switch(o){case"ion-icon":customElements.get(o)||customElements.define(o,Icon);break}})}const defineCustomElement$2=defineCustomElement$1,IonLifeCycleContext=React.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),DefaultIonLifeCycleContext=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(i){if(i.id){const o=this.ionViewWillEnterCallbacks.findIndex(s=>s.id===i.id);o>-1?this.ionViewWillEnterCallbacks[o]=i:this.ionViewWillEnterCallbacks.push(i)}else this.ionViewWillEnterCallbacks.push(i)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(i=>i())}onIonViewDidEnter(i){if(i.id){const o=this.ionViewDidEnterCallbacks.findIndex(s=>s.id===i.id);o>-1?this.ionViewDidEnterCallbacks[o]=i:this.ionViewDidEnterCallbacks.push(i)}else this.ionViewDidEnterCallbacks.push(i)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(i=>i())}onIonViewWillLeave(i){if(i.id){const o=this.ionViewWillLeaveCallbacks.findIndex(s=>s.id===i.id);o>-1?this.ionViewWillLeaveCallbacks[o]=i:this.ionViewWillLeaveCallbacks.push(i)}else this.ionViewWillLeaveCallbacks.push(i)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(i=>i())}onIonViewDidLeave(i){if(i.id){const o=this.ionViewDidLeaveCallbacks.findIndex(s=>s.id===i.id);o>-1?this.ionViewDidLeaveCallbacks[o]=i:this.ionViewDidLeaveCallbacks.push(i)}else this.ionViewDidLeaveCallbacks.push(i)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(i=>i()),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(i){this.componentCanBeDestroyedCallback=i}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},NavContext=React.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:i=>{typeof window<"u"&&(typeof i=="string"?window.location.pathname=i:window.history.back())},navigate:i=>{typeof window<"u"&&(window.location.pathname=i)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(i,o)=>{typeof window<"u"&&(window.location.pathname=o)},resetTab:(i,o)=>{typeof window<"u"&&(window.location.pathname=o)}}),dashToPascalCase=i=>i.toLowerCase().split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(""),camelToDashCase=i=>i.replace(/([A-Z])/g,o=>`-${o[0].toLowerCase()}`),attachProps=(i,o,s={})=>{if(i instanceof Element){const $=getClassName(i.classList,o,s);$!==""&&(i.className=$),Object.keys(o).forEach(tt=>{if(!(tt==="children"||tt==="style"||tt==="ref"||tt==="class"||tt==="className"||tt==="forwardedRef"))if(tt.indexOf("on")===0&&tt[2]===tt[2].toUpperCase()){const rt=tt.substring(2),st=rt[0].toLowerCase()+rt.substring(1);isCoveredByReact(st)||syncEvent(i,st,o[tt])}else i[tt]=o[tt],typeof o[tt]==="string"&&i.setAttribute(camelToDashCase(tt),o[tt])})}},getClassName=(i,o,s)=>{const $=o.className||o.class,tt=s.className||s.class,rt=arrayToMap(i),st=arrayToMap($?$.split(" "):[]),_=arrayToMap(tt?tt.split(" "):[]),ut=[];return rt.forEach(mt=>{st.has(mt)?(ut.push(mt),st.delete(mt)):_.has(mt)||ut.push(mt)}),st.forEach(mt=>ut.push(mt)),ut.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const isCoveredByReact=i=>{if(typeof document>"u")return!0;{const o="on"+i;let s=o in document;if(!s){const $=document.createElement("div");$.setAttribute(o,"return;"),s=typeof $[o]=="function"}return s}},syncEvent=(i,o,s)=>{const $=i.__events||(i.__events={}),tt=$[o];tt&&i.removeEventListener(o,tt),i.addEventListener(o,$[o]=function(st){s&&s.call(this,st)})},arrayToMap=i=>{const o=new Map;return i.forEach(s=>o.set(s,s)),o},setRef=(i,o)=>{typeof i=="function"?i(o):i!=null&&(i.current=o)},mergeRefs=(...i)=>o=>{i.forEach(s=>{setRef(s,o)})},createForwardRef$1=(i,o)=>{const s=($,tt)=>React.createElement(i,Object.assign({},$,{forwardedRef:tt}));return s.displayName=o,React.forwardRef(s)},defineCustomElement=(i,o)=>{o!==void 0&&typeof customElements<"u"&&!customElements.get(i)&&customElements.define(i,o)},createReactComponent=(i,o,s,$)=>{$!==void 0&&$();const tt=dashToPascalCase(i),rt=class extends React.Component{constructor(st){super(st),this.setComponentElRef=_=>{this.componentEl=_}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(st){attachProps(this.componentEl,this.props,st)}render(){const st=this.props,{children:_,forwardedRef:ut,style:mt,className:vt,ref:wt}=st,bt=__rest(st,["children","forwardedRef","style","className","ref"]);let Mt=Object.keys(bt).reduce((Lt,Ht)=>{const Tt=bt[Ht];if(Ht.indexOf("on")===0&&Ht[2]===Ht[2].toUpperCase()){const Ct=Ht.substring(2).toLowerCase();typeof document<"u"&&isCoveredByReact(Ct)&&(Lt[Ht]=Tt)}else{const Ct=typeof Tt;(Ct==="string"||Ct==="boolean"||Ct==="number")&&(Lt[camelToDashCase(Ht)]=Tt)}return Lt},{});s&&(Mt=s(this.props,Mt));const At=Object.assign(Object.assign({},Mt),{ref:mergeRefs(ut,this.setComponentElRef),style:mt});return reactExports.createElement(i,At,_)}static get displayName(){return tt}};return o&&(rt.contextType=o),createForwardRef$1(rt,tt)},IonCardContent=createReactComponent("ion-card-content",void 0,void 0,defineCustomElement$q),IonCardHeader=createReactComponent("ion-card-header",void 0,void 0,defineCustomElement$p),IonCardSubtitle=createReactComponent("ion-card-subtitle",void 0,void 0,defineCustomElement$o),IonCardTitle=createReactComponent("ion-card-title",void 0,void 0,defineCustomElement$n),IonContent=createReactComponent("ion-content",void 0,void 0,defineCustomElement$l),IonHeader=createReactComponent("ion-header",void 0,void 0,defineCustomElement$j),IonLabel=createReactComponent("ion-label",void 0,void 0,defineCustomElement$i),IonList=createReactComponent("ion-list",void 0,void 0,defineCustomElement$g),IonSkeletonText=createReactComponent("ion-skeleton-text",void 0,void 0,defineCustomElement$d),IonSplitPane=createReactComponent("ion-split-pane",void 0,void 0,defineCustomElement$c),IonThumbnail=createReactComponent("ion-thumbnail",void 0,void 0,defineCustomElement$b),IonTitle=createReactComponent("ion-title",void 0,void 0,defineCustomElement$a),IonToolbar=createReactComponent("ion-toolbar",void 0,void 0,defineCustomElement$9),createForwardRef=(i,o)=>{const s=($,tt)=>React.createElement(i,Object.assign({},$,{forwardedRef:tt}));return s.displayName=o,React.forwardRef(s)},getConfig=()=>{if(typeof window<"u"){const i=window.Ionic;if(i&&i.config)return i.config}return null},createRoutingComponent=(i,o)=>{defineCustomElement(i,o);const s=dashToPascalCase(i),$=class extends React.Component{constructor(tt){super(tt),this.handleClick=rt=>{const{routerLink:st,routerDirection:_,routerOptions:ut,routerAnimation:mt}=this.props;st!==void 0&&(rt.preventDefault(),this.context.navigate(st,_,void 0,mt,ut))},this.ref=React.createRef(),this.stableMergedRefs=mergeRefs(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(tt){const rt=this.ref.current;attachProps(rt,this.props,tt)}render(){const tt=this.props,{children:rt,forwardedRef:st,style:_,className:ut,ref:mt}=tt,vt=__rest(tt,["children","forwardedRef","style","className","ref"]),wt=Object.keys(vt).reduce((Mt,At)=>{if(At.indexOf("on")===0&&At[2]===At[2].toUpperCase()){const Lt=At.substring(2).toLowerCase();isCoveredByReact(Lt)&&(Mt[At]=vt[At])}else["string","boolean","number"].includes(typeof vt[At])&&(Mt[camelToDashCase(At)]=vt[At]);return Mt},{}),bt=Object.assign(Object.assign({},wt),{ref:this.stableMergedRefs,style:_});if(this.props.routerLink&&!this.props.href&&(bt.href=this.props.routerLink),bt.onClick){const Mt=bt.onClick;bt.onClick=At=>{Mt(At),At.defaultPrevented||this.handleClick(At)}}else bt.onClick=this.handleClick;return reactExports.createElement(i,bt,rt)}static get displayName(){return s}static get contextType(){return NavContext}};return createForwardRef($,s)},IonItem=createRoutingComponent("ion-item",IonItem$1),detachProps=(i,o)=>{i instanceof Element&&Object.keys(o).forEach(s=>{if(s.indexOf("on")===0&&s[2]===s[2].toUpperCase()){const $=s.substring(2),tt=$[0].toLowerCase()+$.substring(1);isCoveredByReact(tt)||detachEvent(i,tt)}})},detachEvent=(i,o)=>{const s=i.__events||(i.__events={}),$=s[o];$&&(i.removeEventListener(o,$),s[o]=void 0)},createInlineOverlayComponent=(i,o,s)=>{o&&o();const $=dashToPascalCase(i),tt=class extends React.Component{constructor(rt){super(rt),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=st=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(st)},this.handleDidDismiss=st=>{const _=this.wrapperRef.current,ut=this.ref.current;_&&ut&&(ut.append(_),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(st)},this.ref=React.createRef(),this.stableMergedRefs=mergeRefs(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=React.createRef()}componentDidMount(){var rt,st,_;this.componentDidUpdate(this.props),(rt=this.ref.current)===null||rt===void 0||rt.addEventListener("ionMount",this.handleIonMount),(st=this.ref.current)===null||st===void 0||st.addEventListener("willPresent",this.handleWillPresent),(_=this.ref.current)===null||_===void 0||_.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(rt){const st=this.ref.current;attachProps(st,this.props,rt)}componentWillUnmount(){const rt=this.ref.current;rt&&this.state.isOpen&&(rt.removeEventListener("didDismiss",this.handleDidDismiss),rt.remove(),detachProps(rt,this.props))}render(){const rt=this.props,{children:st,forwardedRef:_,style:ut,className:mt,ref:vt}=rt,wt=__rest(rt,["children","forwardedRef","style","className","ref"]),bt=Object.keys(wt).reduce((Lt,Ht)=>{if(Ht.indexOf("on")===0&&Ht[2]===Ht[2].toUpperCase()){const Tt=Ht.substring(2).toLowerCase();isCoveredByReact(Tt)&&(Lt[Ht]=wt[Ht])}else["string","boolean","number"].includes(typeof wt[Ht])&&(Lt[camelToDashCase(Ht)]=wt[Ht]);return Lt},{}),Mt=Object.assign(Object.assign({},bt),{ref:this.stableMergedRefs,style:ut}),At=()=>s?`${DELEGATE_HOST} ion-page`:DELEGATE_HOST;return reactExports.createElement("template",{},reactExports.createElement(i,Mt,this.state.isOpen||this.props.keepContentsMounted?reactExports.createElement("div",{ref:this.wrapperRef,className:At()},st):null))}static get displayName(){return $}};return createForwardRef(tt,$)},DELEGATE_HOST="ion-delegate-host",IonModal=createInlineOverlayComponent("ion-modal",defineCustomElement$7,!0),IonContext=React.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),IonOverlayManager=({onAddOverlay:i,onRemoveOverlay:o})=>{const[s,$]=reactExports.useState({}),tt=reactExports.useRef({});tt.current=s,reactExports.useEffect(()=>{i(rt),o(st)},[]);const rt=(ut,mt,vt)=>{const wt=Object.assign({},tt.current);wt[ut]={component:mt,containerElement:vt},$(wt)},st=ut=>{const mt=Object.assign({},tt.current);delete mt[ut],$(mt)},_=Object.keys(s);return React.createElement(React.Fragment,null,_.map(ut=>{const mt=s[ut];return ReactDOM.createPortal(mt.component,mt.containerElement,`overlay-${ut}`)}))},IonTabButtonInner=createReactComponent("ion-tab-button",void 0,void 0,defineCustomElement$3),IonTabBarInner=createReactComponent("ion-tab-bar",void 0,void 0,defineCustomElement$4),IonRouterOutletInner=createReactComponent("ion-router-outlet",void 0,void 0,defineCustomElement$5),IonAppInner=createReactComponent("ion-app",void 0,void 0,defineCustomElement$6),IonIconInner=createReactComponent("ion-icon",void 0,void 0,defineCustomElement$2),IonApp=(()=>class extends React.Component{constructor(i){super(i),this.ionContext={addOverlay:(o,s,$)=>{this.addOverlayCallback&&this.addOverlayCallback(o,s,$)},removeOverlay:o=>{this.removeOverlayCallback&&this.removeOverlayCallback(o)}}}render(){return React.createElement(IonContext.Provider,{value:this.ionContext},React.createElement(IonAppInner,Object.assign({},this.props),this.props.children),React.createElement(IonOverlayManager,{onAddOverlay:i=>{this.addOverlayCallback=i},onRemoveOverlay:i=>{this.removeOverlayCallback=i}}))}static get displayName(){return"IonApp"}})(),StackContext=React.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class PageManager extends React.PureComponent{constructor(o){super(o),this.ionPageElementRef=React.createRef(),this.stableMergedRefs=mergeRefs(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const o=this.props,{className:s,children:$,routeInfo:tt,forwardedRef:rt}=o,st=__rest(o,["className","children","routeInfo","forwardedRef"]);return React.createElement(IonLifeCycleContext.Consumer,null,_=>(this.ionLifeCycleContext=_,React.createElement("div",Object.assign({className:s?`${s} ion-page`:"ion-page",ref:this.stableMergedRefs},st),$)))}static get contextType(){return StackContext}}class IonPageInternal extends React.Component{constructor(o){super(o)}render(){const o=this.props,{className:s,children:$,forwardedRef:tt}=o,rt=__rest(o,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?React.createElement(PageManager,Object.assign({className:s?`${s}`:"",routeInfo:this.context.routeInfo,forwardedRef:tt},rt),$):React.createElement("div",Object.assign({className:s?`ion-page ${s}`:"ion-page",ref:tt},rt),$)}static get displayName(){return"IonPage"}static get contextType(){return NavContext}}const IonPage=createForwardRef(IonPageInternal,"IonPage"),ReactDelegate=(i,o)=>{const s=new WeakMap;return{attachViewToDom:async(rt,st,_,ut)=>{const mt=document.createElement("div");ut&&mt.classList.add(...ut),rt.appendChild(mt);const vt=st(_),wt=reactDomExports.createPortal(vt,mt);return s.set(mt,wt),i(wt),Promise.resolve(mt)},removeViewFromDom:(rt,st)=>{const _=s.get(st);return _&&o(_),st.remove(),Promise.resolve()}}},IonNavInner=createReactComponent("ion-nav",void 0,void 0,defineCustomElement$f),IonNavInternal=i=>{var{children:o,forwardedRef:s}=i,$=__rest(i,["children","forwardedRef"]);const[tt,rt]=reactExports.useState([]),st=mt=>rt(vt=>[...vt,mt]),_=mt=>rt(vt=>vt.filter(wt=>wt!==mt)),ut=reactExports.useMemo(()=>ReactDelegate(st,_),[]);return React.createElement(IonNavInner,Object.assign({delegate:ut,ref:s},$),tt)};createForwardRef(IonNavInternal,"IonNav");React.createContext({activeTab:void 0,selectTab:()=>!1});const HTMLElementSSR=typeof HTMLElement<"u"?HTMLElement:class{};class OutletPageManager extends React.Component{constructor(o){super(o),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||componentOnReady(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const o=this.props,{StackManager:s,children:$,routeInfo:tt}=o,rt=__rest(o,["StackManager","children","routeInfo"]);return React.createElement(IonLifeCycleContext.Consumer,null,st=>(this.ionLifeCycleContext=st,React.createElement(s,{routeInfo:tt},React.createElement(IonRouterOutletInner,Object.assign({setRef:_=>this.ionRouterOutlet=_},rt),$))))}static get contextType(){return StackContext}}class IonRouterOutletContainer extends React.Component{constructor(o){super(o)}render(){const o=this.context.getStackManager(),s=this.props,{children:$,forwardedRef:tt}=s,rt=__rest(s,["children","forwardedRef"]);return this.context.hasIonicRouter()?rt.ionPage?React.createElement(OutletPageManager,Object.assign({StackManager:o,routeInfo:this.context.routeInfo},rt),$):React.createElement(o,{routeInfo:this.context.routeInfo},React.createElement(IonRouterOutletInner,Object.assign({},rt,{forwardedRef:tt}),$)):React.createElement(IonRouterOutletInner,Object.assign({ref:tt},this.props),this.props.children)}static get contextType(){return NavContext}}const IonRouterOutlet=createForwardRef(IonRouterOutletContainer,"IonRouterOutlet"),IonTabButton=(()=>class extends React.Component{constructor(i){super(i),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const i=this.props,o=__rest(i,["onClick"]);return React.createElement(IonTabButtonInner,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},o))}static get displayName(){return"IonTabButton"}})();class IonTabBarUnwrapped extends React.PureComponent{constructor(o){super(o),this.setActiveTabOnContext=$=>{};const s={};React.Children.forEach(o.children,$=>{var tt,rt,st,_;$!=null&&typeof $=="object"&&$.props&&($.type===IonTabButton||$.type.isTabButton)&&(s[$.props.tab]={originalHref:$.props.href,currentHref:$.props.href,originalRouteOptions:$.props.href===((tt=o.routeInfo)===null||tt===void 0?void 0:tt.pathname)?(rt=o.routeInfo)===null||rt===void 0?void 0:rt.routeOptions:void 0,currentRouteOptions:$.props.href===((st=o.routeInfo)===null||st===void 0?void 0:st.pathname)?(_=o.routeInfo)===null||_===void 0?void 0:_.routeOptions:void 0})}),this.state={tabs:s},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const o=this.state.tabs,$=Object.keys(o).find(tt=>{const rt=o[tt].originalHref;return this.props.routeInfo.pathname.startsWith(rt)});$&&this.setState({activeTab:$})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(o){const s=this.state.tabs[o];return s?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:s.currentHref,tab:o,selected:o===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(o,s){var $,tt,rt;const st=Object.assign({},s.tabs),ut=Object.keys(s.tabs).find(vt=>{const wt=s.tabs[vt].originalHref;return o.routeInfo.pathname.startsWith(wt)});React.Children.forEach(o.children,vt=>{if(vt!=null&&typeof vt=="object"&&vt.props&&(vt.type===IonTabButton||vt.type.isTabButton)){const wt=st[vt.props.tab];(!wt||wt.originalHref!==vt.props.href)&&(st[vt.props.tab]={originalHref:vt.props.href,currentHref:vt.props.href,originalRouteOptions:vt.props.routeOptions,currentRouteOptions:vt.props.routeOptions})}});const{activeTab:mt}=s;if(ut&&mt){const vt=s.tabs[mt].currentHref,wt=s.tabs[mt].currentRouteOptions;(ut!==mt||vt!==(($=o.routeInfo)===null||$===void 0?void 0:$.pathname)||wt!==((tt=o.routeInfo)===null||tt===void 0?void 0:tt.routeOptions))&&(st[ut]={originalHref:st[ut].originalHref,currentHref:o.routeInfo.pathname+(o.routeInfo.search||""),originalRouteOptions:st[ut].originalRouteOptions,currentRouteOptions:(rt=o.routeInfo)===null||rt===void 0?void 0:rt.routeOptions},o.routeInfo.routeAction==="pop"&&ut!==mt&&(st[mt]={originalHref:st[mt].originalHref,currentHref:st[mt].originalHref,originalRouteOptions:st[mt].originalRouteOptions,currentRouteOptions:st[mt].currentRouteOptions}))}return ut&&o.onSetCurrentTab(ut,o.routeInfo),{activeTab:ut,tabs:st}}onTabButtonClick(o,s){const $=this.state.tabs[o.detail.tab],tt=$.originalHref,rt=o.detail.href,{activeTab:st}=this.state;s&&s(o),st===o.detail.tab?tt!==rt&&this.context.resetTab(o.detail.tab,tt,$.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:o.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:o.detail.tab}})),this.setActiveTabOnContext(o.detail.tab),this.context.changeTab(o.detail.tab,rt,o.detail.routeOptions))}renderTabButton(o){return s=>{var $,tt;if(s!=null&&s.props&&(s.type===IonTabButton||s.type.isTabButton)){const rt=s.props.tab===o?($=this.props.routeInfo)===null||$===void 0?void 0:$.pathname:this.state.tabs[s.props.tab].currentHref,st=s.props.tab===o?(tt=this.props.routeInfo)===null||tt===void 0?void 0:tt.routeOptions:this.state.tabs[s.props.tab].currentRouteOptions;return React.cloneElement(s,{href:rt,routeOptions:st,onClick:_=>this.onTabButtonClick(_,s.props.onClick)})}return null}}render(){const{activeTab:o}=this.state;return React.createElement(IonTabBarInner,Object.assign({},this.props,{selectedTab:o}),React.Children.map(this.props.children,this.renderTabButton(o)))}static get contextType(){return NavContext}}const IonTabBarContainer=React.memo(i=>{var{forwardedRef:o}=i,s=__rest(i,["forwardedRef"]);const $=reactExports.useContext(NavContext);return React.createElement(IonTabBarUnwrapped,Object.assign({ref:o},s,{routeInfo:s.routeInfo||$.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:$.setCurrentTab}),s.children)});createForwardRef(IonTabBarContainer,"IonTabBar");class IonTabsElement extends HTMLElementSSR{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",IonTabsElement));class IonIconContainer extends React.PureComponent{constructor(o){super(o),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var o,s;const $=this.props,{icon:tt,ios:rt,md:st,mode:_}=$,ut=__rest($,["icon","ios","md","mode"]);let mt;const vt=getConfig(),wt=_||(vt==null?void 0:vt.get("mode"));return rt||st?wt==="ios"?mt=(o=rt!=null?rt:st)!==null&&o!==void 0?o:tt:mt=(s=st!=null?st:rt)!==null&&s!==void 0?s:tt:mt=tt,React.createElement(IonIconInner,Object.assign({ref:this.props.forwardedRef,icon:mt},ut),this.props.children)}static get contextType(){return NavContext}}const IonIcon=createForwardRef(IonIconContainer,"IonIcon");class IonRoute extends React.PureComponent{render(){const o=this.context.getIonRoute();return!this.context.hasIonicRouter()||!IonRoute?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):React.createElement(o,Object.assign({},this.props))}static get contextType(){return NavContext}}class IonRedirect extends React.PureComponent{render(){const o=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!IonRedirect?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):React.createElement(o,Object.assign({},this.props))}static get contextType(){return NavContext}}const IonRouterContext=React.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class CreateAnimation extends React.PureComponent{constructor(o){super(o),this.nodes=new Map,this.animation=createAnimation(o.id)}setupAnimation(o){const s=this.animation;this.nodes.size>0&&s.addElement(Array.from(this.nodes.values())),checkConfig(s,o),checkPlayback(s,o)}componentDidMount(){const o=this.props;this.setupAnimation(o)}componentDidUpdate(o){const s=this.animation,$=this.props;checkConfig(s,$,o),checkProgress(s,$,o),checkPlayback(s,$,o)}render(){const{children:o}=this.props;return React.createElement(React.Fragment,null,React.Children.map(o,(s,$)=>React.cloneElement(s,{ref:tt=>this.nodes.set($,tt)})))}}const checkConfig=(i,o={},s={})=>{const $=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const ut in o)o.hasOwnProperty(ut)&&!$.includes(ut)&&o[ut]!==s[ut]&&i[ut](o[ut]);const tt=o.from;tt&&tt!==s.from&&(Array.isArray(tt)?tt:[tt]).forEach(mt=>i.from(mt.property,mt.value));const rt=o.to;rt&&rt!==s.to&&(Array.isArray(rt)?rt:[rt]).forEach(mt=>i.to(mt.property,mt.value));const st=o.fromTo;st&&st!==s.fromTo&&(Array.isArray(st)?st:[st]).forEach(mt=>i.fromTo(mt.property,mt.fromValue,mt.toValue));const _=o.onFinish;_&&_!==s.onFinish&&(Array.isArray(_)?_:[_]).forEach(mt=>i.onFinish(mt.callback,mt.opts))},checkProgress=(i,o={},s={})=>{var $,tt,rt,st,_;const{progressStart:ut,progressStep:mt,progressEnd:vt}=o;ut&&((($=s.progressStart)===null||$===void 0?void 0:$.forceLinearEasing)!==(ut==null?void 0:ut.forceLinearEasing)||((tt=s.progressStart)===null||tt===void 0?void 0:tt.step)!==(ut==null?void 0:ut.step))&&i.progressStart(ut.forceLinearEasing,ut.step),mt&&((rt=s.progressStep)===null||rt===void 0?void 0:rt.step)!==(mt==null?void 0:mt.step)&&i.progressStep(mt.step),vt&&(((st=s.progressEnd)===null||st===void 0?void 0:st.playTo)!==(vt==null?void 0:vt.playTo)||((_=s.progressEnd)===null||_===void 0?void 0:_.step)!==(vt==null?void 0:vt.step)||(s==null?void 0:s.dur)!==(vt==null?void 0:vt.dur))&&i.progressEnd(vt.playTo,vt.step,vt.dur)},checkPlayback=(i,o={},s={})=>{!s.play&&o.play&&i.play(),!s.pause&&o.pause&&i.pause(),!s.stop&&o.stop&&i.stop(),!s.destroy&&o.destroy&&i.destroy()};function useController(i,o,s){const $=reactExports.useRef(),tt=reactExports.useMemo(()=>`on${i}DidDismiss`,[i]),rt=reactExports.useMemo(()=>`on${i}DidPresent`,[i]),st=reactExports.useMemo(()=>`on${i}WillDismiss`,[i]),_=reactExports.useMemo(()=>`on${i}WillPresent`,[i]);s();const ut=reactExports.useCallback(async vt=>{if($.current)return;const{onDidDismiss:wt,onWillDismiss:bt,onDidPresent:Mt,onWillPresent:At}=vt,Lt=__rest(vt,["onDidDismiss","onWillDismiss","onDidPresent","onWillPresent"]),Ht=Tt=>{wt&&wt(Tt),$.current=void 0};$.current=await o.create(Object.assign({},Lt)),attachProps($.current,{[tt]:Ht,[rt]:Tt=>Mt&&Mt(Tt),[st]:Tt=>bt&&bt(Tt),[_]:Tt=>At&&At(Tt)}),$.current.present()},[o]),mt=reactExports.useCallback(async()=>{$.current&&await $.current.dismiss(),$.current=void 0},[]);return{present:ut,dismiss:mt}}function useIonAlert(){const i=useController("IonAlert",alertController,defineCustomElement$8);return[reactExports.useCallback((s,$)=>typeof s=="string"?i.present({message:s,buttons:$!=null?$:[{text:"Ok"}]}):i.present(s),[i.present]),i.dismiss]}const ids={main:0},generateId=(i="main")=>{var o;const s=((o=ids[i])!==null&&o!==void 0?o:0)+1;return ids[i]=s,s.toString()},setupIonicReact=(i={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),initialize(Object.assign({},i))},RouteManagerContext=React.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class ViewLifeCycleManager extends React.Component{constructor(o){super(o),this.ionLifeCycleContext=new DefaultIonLifeCycleContext,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:o}=this.state;return React.createElement(IonLifeCycleContext.Provider,{value:this.ionLifeCycleContext},o&&this.props.children)}}class LocationHistory{constructor(){this.locationHistory=[],this.tabHistory={}}add(o){o.routeAction==="push"||o.routeAction==null?this._add(o):o.routeAction==="pop"?this._pop(o):o.routeAction==="replace"&&this._replace(o),o.routeDirection==="root"&&(this._clear(),this._add(o))}clearTabStack(o){const s=this._getRouteInfosByKey(o);s&&(s.forEach($=>{this.locationHistory=this.locationHistory.filter(tt=>tt.id!==$.id)}),this.tabHistory[o]=[])}update(o){const s=this.locationHistory.findIndex(tt=>tt.id===o.id);s>-1&&this.locationHistory.splice(s,1,o);const $=this.tabHistory[o.tab||""];if($){const tt=$.findIndex(rt=>rt.id===o.id);tt>-1?$.splice(tt,1,o):$.push(o)}else o.tab&&(this.tabHistory[o.tab]=[o])}_add(o){const s=this._getRouteInfosByKey(o.tab);s&&(this._areRoutesEqual(s[s.length-1],o)&&s.pop(),s.push(o)),this.locationHistory.push(o)}_areRoutesEqual(o,s){return!o||!s?!1:o.pathname===s.pathname&&o.search===s.search}_pop(o){const s=this._getRouteInfosByKey(o.tab);s&&(s.pop(),s.pop(),s.push(o)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(o)}_replace(o){const s=this._getRouteInfosByKey(o.tab);s&&s.pop(),this.locationHistory.pop(),this._add(o)}_clear(){Object.keys(this.tabHistory).forEach(s=>this.tabHistory[s]=[]),this.locationHistory=[]}_getRouteInfosByKey(o){let s;return o&&(s=this.tabHistory[o],s||(s=this.tabHistory[o]=[])),s}getFirstRouteInfoForTab(o){const s=this._getRouteInfosByKey(o);if(s)return s[0]}getCurrentRouteInfoForTab(o){const s=this._getRouteInfosByKey(o);if(s)return s[s.length-1]}findLastLocation(o){const s=this._getRouteInfosByKey(o.tab);if(s)for(let $=s.length-2;$>=0;$--){const tt=s[$];if(tt&&tt.pathname===o.pushedByRoute)return tt}for(let $=this.locationHistory.length-2;$>=0;$--){const tt=this.locationHistory[$];if(tt&&tt.pathname===o.pushedByRoute)return tt}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class NavManager extends React.PureComponent{constructor(o){super(o),this.ionRouterContextValue={push:(s,$,tt,rt,st)=>{this.navigate(s,$,tt,st,rt)},back:s=>{this.goBack(void 0,s)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(o){o.detail.register(0,s=>{this.nativeGoBack(),s()})}goBack(o,s){this.props.onNavigateBack(o,s)}nativeGoBack(){this.props.onNativeBack()}navigate(o,s="forward",$="push",tt,rt,st){this.props.onNavigate(o,$,s,tt,rt,st)}getPageManager(){return PageManager}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return React.createElement(NavContext.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},React.createElement(IonRouterContext.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class ViewStacks{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(o){const{outletId:s}=o;this.viewStacks[s]?this.viewStacks[s].push(o):this.viewStacks[s]=[o]}clear(o){return setTimeout(()=>{delete this.viewStacks[o]},500)}getViewItemsForOutlet(o){return this.viewStacks[o]||[]}remove(o){const{outletId:s}=o,$=this.viewStacks[s];if($){const tt=$.find(rt=>rt.id===o.id);tt&&(tt.mount=!1,this.viewStacks[s]=$.filter(rt=>rt.id!==tt.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const o=this.getStackIds(),s=[];return o.forEach($=>{s.push(...this.viewStacks[$])}),s}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var $ in s)Object.prototype.hasOwnProperty.call(s,$)&&(i[$]=s[$])}return i},_extends.apply(this,arguments)}function isAbsolute(i){return i.charAt(0)==="/"}function spliceOne$1(i,o){for(var s=o,$=s+1,tt=i.length;$<tt;s+=1,$+=1)i[s]=i[$];i.pop()}function resolvePathname(i,o){o===void 0&&(o="");var s=i&&i.split("/")||[],$=o&&o.split("/")||[],tt=i&&isAbsolute(i),rt=o&&isAbsolute(o),st=tt||rt;if(i&&isAbsolute(i)?$=s:s.length&&($.pop(),$=$.concat(s)),!$.length)return"/";var _;if($.length){var ut=$[$.length-1];_=ut==="."||ut===".."||ut===""}else _=!1;for(var mt=0,vt=$.length;vt>=0;vt--){var wt=$[vt];wt==="."?spliceOne$1($,vt):wt===".."?(spliceOne$1($,vt),mt++):mt&&(spliceOne$1($,vt),mt--)}if(!st)for(;mt--;mt)$.unshift("..");st&&$[0]!==""&&(!$[0]||!isAbsolute($[0]))&&$.unshift("");var bt=$.join("/");return _&&bt.substr(-1)!=="/"&&(bt+="/"),bt}var isProduction=!0,prefix="Invariant failed";function invariant(i,o){if(!i){if(isProduction)throw new Error(prefix);var s=typeof o=="function"?o():o,$=s?"".concat(prefix,": ").concat(s):prefix;throw new Error($)}}function addLeadingSlash$1(i){return i.charAt(0)==="/"?i:"/"+i}function stripLeadingSlash(i){return i.charAt(0)==="/"?i.substr(1):i}function hasBasename(i,o){return i.toLowerCase().indexOf(o.toLowerCase())===0&&"/?#".indexOf(i.charAt(o.length))!==-1}function stripBasename$1(i,o){return hasBasename(i,o)?i.substr(o.length):i}function stripTrailingSlash(i){return i.charAt(i.length-1)==="/"?i.slice(0,-1):i}function parsePath(i){var o=i||"/",s="",$="",tt=o.indexOf("#");tt!==-1&&($=o.substr(tt),o=o.substr(0,tt));var rt=o.indexOf("?");return rt!==-1&&(s=o.substr(rt),o=o.substr(0,rt)),{pathname:o,search:s==="?"?"":s,hash:$==="#"?"":$}}function createPath(i){var o=i.pathname,s=i.search,$=i.hash,tt=o||"/";return s&&s!=="?"&&(tt+=s.charAt(0)==="?"?s:"?"+s),$&&$!=="#"&&(tt+=$.charAt(0)==="#"?$:"#"+$),tt}function createLocation(i,o,s,$){var tt;typeof i=="string"?(tt=parsePath(i),tt.state=o):(tt=_extends({},i),tt.pathname===void 0&&(tt.pathname=""),tt.search?tt.search.charAt(0)!=="?"&&(tt.search="?"+tt.search):tt.search="",tt.hash?tt.hash.charAt(0)!=="#"&&(tt.hash="#"+tt.hash):tt.hash="",o!==void 0&&tt.state===void 0&&(tt.state=o));try{tt.pathname=decodeURI(tt.pathname)}catch(rt){throw rt instanceof URIError?new URIError('Pathname "'+tt.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):rt}return s&&(tt.key=s),$?tt.pathname?tt.pathname.charAt(0)!=="/"&&(tt.pathname=resolvePathname(tt.pathname,$.pathname)):tt.pathname=$.pathname:tt.pathname||(tt.pathname="/"),tt}function createTransitionManager(){var i=null;function o(st){return i=st,function(){i===st&&(i=null)}}function s(st,_,ut,mt){if(i!=null){var vt=typeof i=="function"?i(st,_):i;typeof vt=="string"?typeof ut=="function"?ut(vt,mt):mt(!0):mt(vt!==!1)}else mt(!0)}var $=[];function tt(st){var _=!0;function ut(){_&&st.apply(void 0,arguments)}return $.push(ut),function(){_=!1,$=$.filter(function(mt){return mt!==ut})}}function rt(){for(var st=arguments.length,_=new Array(st),ut=0;ut<st;ut++)_[ut]=arguments[ut];$.forEach(function(mt){return mt.apply(void 0,_)})}return{setPrompt:o,confirmTransitionTo:s,appendListener:tt,notifyListeners:rt}}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);function getConfirmation(i,o){o(window.confirm(i))}function supportsHistory(){var i=window.navigator.userAgent;return(i.indexOf("Android 2.")!==-1||i.indexOf("Android 4.0")!==-1)&&i.indexOf("Mobile Safari")!==-1&&i.indexOf("Chrome")===-1&&i.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function supportsPopStateOnHashChange(){return window.navigator.userAgent.indexOf("Trident")===-1}function supportsGoWithoutReloadUsingHash(){return window.navigator.userAgent.indexOf("Firefox")===-1}function isExtraneousPopstateEvent(i){return i.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch(i){return{}}}function createBrowserHistory(i){i===void 0&&(i={}),canUseDOM||invariant(!1);var o=window.history,s=supportsHistory(),$=!supportsPopStateOnHashChange(),tt=i,rt=tt.forceRefresh,st=rt===void 0?!1:rt,_=tt.getUserConfirmation,ut=_===void 0?getConfirmation:_,mt=tt.keyLength,vt=mt===void 0?6:mt,wt=i.basename?stripTrailingSlash(addLeadingSlash$1(i.basename)):"";function bt(Wt){var or=Wt||{},ar=or.key,Fr=or.state,Yr=window.location,hn=Yr.pathname,mn=Yr.search,En=Yr.hash,Ln=hn+mn+En;return wt&&(Ln=stripBasename$1(Ln,wt)),createLocation(Ln,Fr,ar)}function Mt(){return Math.random().toString(36).substr(2,vt)}var At=createTransitionManager();function Lt(Wt){_extends(Nt,Wt),Nt.length=o.length,At.notifyListeners(Nt.location,Nt.action)}function Ht(Wt){isExtraneousPopstateEvent(Wt)||St(bt(Wt.state))}function Tt(){St(bt(getHistoryState()))}var Ct=!1;function St(Wt){if(Ct)Ct=!1,Lt();else{var or="POP";At.confirmTransitionTo(Wt,or,ut,function(ar){ar?Lt({action:or,location:Wt}):It(Wt)})}}function It(Wt){var or=Nt.location,ar=Ft.indexOf(or.key);ar===-1&&(ar=0);var Fr=Ft.indexOf(Wt.key);Fr===-1&&(Fr=0);var Yr=ar-Fr;Yr&&(Ct=!0,$r(Yr))}var Bt=bt(getHistoryState()),Ft=[Bt.key];function Gt(Wt){return wt+createPath(Wt)}function Xt(Wt,or){var ar="PUSH",Fr=createLocation(Wt,or,Mt(),Nt.location);At.confirmTransitionTo(Fr,ar,ut,function(Yr){if(Yr){var hn=Gt(Fr),mn=Fr.key,En=Fr.state;if(s)if(o.pushState({key:mn,state:En},null,hn),st)window.location.href=hn;else{var Ln=Ft.indexOf(Nt.location.key),wo=Ft.slice(0,Ln+1);wo.push(Fr.key),Ft=wo,Lt({action:ar,location:Fr})}else window.location.href=hn}})}function ir(Wt,or){var ar="REPLACE",Fr=createLocation(Wt,or,Mt(),Nt.location);At.confirmTransitionTo(Fr,ar,ut,function(Yr){if(Yr){var hn=Gt(Fr),mn=Fr.key,En=Fr.state;if(s)if(o.replaceState({key:mn,state:En},null,hn),st)window.location.replace(hn);else{var Ln=Ft.indexOf(Nt.location.key);Ln!==-1&&(Ft[Ln]=Fr.key),Lt({action:ar,location:Fr})}else window.location.replace(hn)}})}function $r(Wt){o.go(Wt)}function Tr(){$r(-1)}function xr(){$r(1)}var Xr=0;function ln(Wt){Xr+=Wt,Xr===1&&Wt===1?(window.addEventListener(PopStateEvent,Ht),$&&window.addEventListener(HashChangeEvent,Tt)):Xr===0&&(window.removeEventListener(PopStateEvent,Ht),$&&window.removeEventListener(HashChangeEvent,Tt))}var zr=!1;function hr(Wt){Wt===void 0&&(Wt=!1);var or=At.setPrompt(Wt);return zr||(ln(1),zr=!0),function(){return zr&&(zr=!1,ln(-1)),or()}}function Er(Wt){var or=At.appendListener(Wt);return ln(1),function(){ln(-1),or()}}var Nt={length:o.length,action:"POP",location:Bt,createHref:Gt,push:Xt,replace:ir,go:$r,goBack:Tr,goForward:xr,block:hr,listen:Er};return Nt}var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(o){return o.charAt(0)==="!"?o:"!/"+stripLeadingSlash(o)},decodePath:function(o){return o.charAt(0)==="!"?o.substr(1):o}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash$1},slash:{encodePath:addLeadingSlash$1,decodePath:addLeadingSlash$1}};function stripHash(i){var o=i.indexOf("#");return o===-1?i:i.slice(0,o)}function getHashPath(){var i=window.location.href,o=i.indexOf("#");return o===-1?"":i.substring(o+1)}function pushHashPath(i){window.location.hash=i}function replaceHashPath(i){window.location.replace(stripHash(window.location.href)+"#"+i)}function createHashHistory(i){i===void 0&&(i={}),canUseDOM||invariant(!1);var o=window.history;supportsGoWithoutReloadUsingHash();var s=i,$=s.getUserConfirmation,tt=$===void 0?getConfirmation:$,rt=s.hashType,st=rt===void 0?"slash":rt,_=i.basename?stripTrailingSlash(addLeadingSlash$1(i.basename)):"",ut=HashPathCoders[st],mt=ut.encodePath,vt=ut.decodePath;function wt(){var or=vt(getHashPath());return _&&(or=stripBasename$1(or,_)),createLocation(or)}var bt=createTransitionManager();function Mt(or){_extends(Wt,or),Wt.length=o.length,bt.notifyListeners(Wt.location,Wt.action)}var At=!1,Lt=null;function Ht(or,ar){return or.pathname===ar.pathname&&or.search===ar.search&&or.hash===ar.hash}function Tt(){var or=getHashPath(),ar=mt(or);if(or!==ar)replaceHashPath(ar);else{var Fr=wt(),Yr=Wt.location;if(!At&&Ht(Yr,Fr)||Lt===createPath(Fr))return;Lt=null,Ct(Fr)}}function Ct(or){if(At)At=!1,Mt();else{var ar="POP";bt.confirmTransitionTo(or,ar,tt,function(Fr){Fr?Mt({action:ar,location:or}):St(or)})}}function St(or){var ar=Wt.location,Fr=Gt.lastIndexOf(createPath(ar));Fr===-1&&(Fr=0);var Yr=Gt.lastIndexOf(createPath(or));Yr===-1&&(Yr=0);var hn=Fr-Yr;hn&&(At=!0,Tr(hn))}var It=getHashPath(),Bt=mt(It);It!==Bt&&replaceHashPath(Bt);var Ft=wt(),Gt=[createPath(Ft)];function Xt(or){var ar=document.querySelector("base"),Fr="";return ar&&ar.getAttribute("href")&&(Fr=stripHash(window.location.href)),Fr+"#"+mt(_+createPath(or))}function ir(or,ar){var Fr="PUSH",Yr=createLocation(or,void 0,void 0,Wt.location);bt.confirmTransitionTo(Yr,Fr,tt,function(hn){if(hn){var mn=createPath(Yr),En=mt(_+mn),Ln=getHashPath()!==En;if(Ln){Lt=mn,pushHashPath(En);var wo=Gt.lastIndexOf(createPath(Wt.location)),Po=Gt.slice(0,wo+1);Po.push(mn),Gt=Po,Mt({action:Fr,location:Yr})}else Mt()}})}function $r(or,ar){var Fr="REPLACE",Yr=createLocation(or,void 0,void 0,Wt.location);bt.confirmTransitionTo(Yr,Fr,tt,function(hn){if(hn){var mn=createPath(Yr),En=mt(_+mn),Ln=getHashPath()!==En;Ln&&(Lt=mn,replaceHashPath(En));var wo=Gt.indexOf(createPath(Wt.location));wo!==-1&&(Gt[wo]=mn),Mt({action:Fr,location:Yr})}})}function Tr(or){o.go(or)}function xr(){Tr(-1)}function Xr(){Tr(1)}var ln=0;function zr(or){ln+=or,ln===1&&or===1?window.addEventListener(HashChangeEvent$1,Tt):ln===0&&window.removeEventListener(HashChangeEvent$1,Tt)}var hr=!1;function Er(or){or===void 0&&(or=!1);var ar=bt.setPrompt(or);return hr||(zr(1),hr=!0),function(){return hr&&(hr=!1,zr(-1)),ar()}}function Nt(or){var ar=bt.appendListener(or);return zr(1),function(){zr(-1),ar()}}var Wt={length:o.length,action:"POP",location:Ft,createHref:Xt,push:ir,replace:$r,go:Tr,goBack:xr,goForward:Xr,block:Er,listen:Nt};return Wt}function clamp(i,o,s){return Math.min(Math.max(i,o),s)}function createMemoryHistory(i){i===void 0&&(i={});var o=i,s=o.getUserConfirmation,$=o.initialEntries,tt=$===void 0?["/"]:$,rt=o.initialIndex,st=rt===void 0?0:rt,_=o.keyLength,ut=_===void 0?6:_,mt=createTransitionManager();function vt(Xt){_extends(Gt,Xt),Gt.length=Gt.entries.length,mt.notifyListeners(Gt.location,Gt.action)}function wt(){return Math.random().toString(36).substr(2,ut)}var bt=clamp(st,0,tt.length-1),Mt=tt.map(function(Xt){return typeof Xt=="string"?createLocation(Xt,void 0,wt()):createLocation(Xt,void 0,Xt.key||wt())}),At=createPath;function Lt(Xt,ir){var $r="PUSH",Tr=createLocation(Xt,ir,wt(),Gt.location);mt.confirmTransitionTo(Tr,$r,s,function(xr){if(xr){var Xr=Gt.index,ln=Xr+1,zr=Gt.entries.slice(0);zr.length>ln?zr.splice(ln,zr.length-ln,Tr):zr.push(Tr),vt({action:$r,location:Tr,index:ln,entries:zr})}})}function Ht(Xt,ir){var $r="REPLACE",Tr=createLocation(Xt,ir,wt(),Gt.location);mt.confirmTransitionTo(Tr,$r,s,function(xr){xr&&(Gt.entries[Gt.index]=Tr,vt({action:$r,location:Tr}))})}function Tt(Xt){var ir=clamp(Gt.index+Xt,0,Gt.entries.length-1),$r="POP",Tr=Gt.entries[ir];mt.confirmTransitionTo(Tr,$r,s,function(xr){xr?vt({action:$r,location:Tr,index:ir}):vt()})}function Ct(){Tt(-1)}function St(){Tt(1)}function It(Xt){var ir=Gt.index+Xt;return ir>=0&&ir<Gt.entries.length}function Bt(Xt){return Xt===void 0&&(Xt=!1),mt.setPrompt(Xt)}function Ft(Xt){return mt.appendListener(Xt)}var Gt={length:Mt.length,action:"POP",location:Mt[bt],index:bt,entries:Mt,createHref:At,push:Lt,replace:Ht,go:Tt,goBack:Ct,goForward:St,canGo:It,block:Bt,listen:Ft};return Gt}function _setPrototypeOf(i,o){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,tt){return $.__proto__=tt,$},_setPrototypeOf(i,o)}function _inheritsLoose(i,o){i.prototype=Object.create(o.prototype),i.prototype.constructor=i,_setPrototypeOf(i,o)}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function i($,tt,rt,st,_,ut){if(ut!==ReactPropTypesSecret){var mt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw mt.name="Invariant Violation",mt}}i.isRequired=i;function o(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var pathToRegexp$2={exports:{}},isarray$1=Array.isArray||function(i){return Object.prototype.toString.call(i)=="[object Array]"},isarray=isarray$1;pathToRegexp$2.exports=pathToRegexp;pathToRegexp$2.exports.parse=parse;pathToRegexp$2.exports.compile=compile;pathToRegexp$2.exports.tokensToFunction=tokensToFunction;pathToRegexp$2.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(i,o){for(var s=[],$=0,tt=0,rt="",st=o&&o.delimiter||"/",_;(_=PATH_REGEXP.exec(i))!=null;){var ut=_[0],mt=_[1],vt=_.index;if(rt+=i.slice(tt,vt),tt=vt+ut.length,mt){rt+=mt[1];continue}var wt=i[tt],bt=_[2],Mt=_[3],At=_[4],Lt=_[5],Ht=_[6],Tt=_[7];rt&&(s.push(rt),rt="");var Ct=bt!=null&&wt!=null&&wt!==bt,St=Ht==="+"||Ht==="*",It=Ht==="?"||Ht==="*",Bt=_[2]||st,Ft=At||Lt;s.push({name:Mt||$++,prefix:bt||"",delimiter:Bt,optional:It,repeat:St,partial:Ct,asterisk:!!Tt,pattern:Ft?escapeGroup(Ft):Tt?".*":"[^"+escapeString(Bt)+"]+?"})}return tt<i.length&&(rt+=i.substr(tt)),rt&&s.push(rt),s}function compile(i,o){return tokensToFunction(parse(i,o),o)}function encodeURIComponentPretty(i){return encodeURI(i).replace(/[\/?#]/g,function(o){return"%"+o.charCodeAt(0).toString(16).toUpperCase()})}function encodeAsterisk(i){return encodeURI(i).replace(/[?#]/g,function(o){return"%"+o.charCodeAt(0).toString(16).toUpperCase()})}function tokensToFunction(i,o){for(var s=new Array(i.length),$=0;$<i.length;$++)typeof i[$]=="object"&&(s[$]=new RegExp("^(?:"+i[$].pattern+")$",flags(o)));return function(tt,rt){for(var st="",_=tt||{},ut=rt||{},mt=ut.pretty?encodeURIComponentPretty:encodeURIComponent,vt=0;vt<i.length;vt++){var wt=i[vt];if(typeof wt=="string"){st+=wt;continue}var bt=_[wt.name],Mt;if(bt==null)if(wt.optional){wt.partial&&(st+=wt.prefix);continue}else throw new TypeError('Expected "'+wt.name+'" to be defined');if(isarray(bt)){if(!wt.repeat)throw new TypeError('Expected "'+wt.name+'" to not repeat, but received `'+JSON.stringify(bt)+"`");if(bt.length===0){if(wt.optional)continue;throw new TypeError('Expected "'+wt.name+'" to not be empty')}for(var At=0;At<bt.length;At++){if(Mt=mt(bt[At]),!s[vt].test(Mt))throw new TypeError('Expected all "'+wt.name+'" to match "'+wt.pattern+'", but received `'+JSON.stringify(Mt)+"`");st+=(At===0?wt.prefix:wt.delimiter)+Mt}continue}if(Mt=wt.asterisk?encodeAsterisk(bt):mt(bt),!s[vt].test(Mt))throw new TypeError('Expected "'+wt.name+'" to match "'+wt.pattern+'", but received "'+Mt+'"');st+=wt.prefix+Mt}return st}}function escapeString(i){return i.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function escapeGroup(i){return i.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(i,o){return i.keys=o,i}function flags(i){return i&&i.sensitive?"":"i"}function regexpToRegexp(i,o){var s=i.source.match(/\((?!\?)/g);if(s)for(var $=0;$<s.length;$++)o.push({name:$,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return attachKeys(i,o)}function arrayToRegexp(i,o,s){for(var $=[],tt=0;tt<i.length;tt++)$.push(pathToRegexp(i[tt],o,s).source);var rt=new RegExp("(?:"+$.join("|")+")",flags(s));return attachKeys(rt,o)}function stringToRegexp(i,o,s){return tokensToRegExp(parse(i,s),o,s)}function tokensToRegExp(i,o,s){isarray(o)||(s=o||s,o=[]),s=s||{};for(var $=s.strict,tt=s.end!==!1,rt="",st=0;st<i.length;st++){var _=i[st];if(typeof _=="string")rt+=escapeString(_);else{var ut=escapeString(_.prefix),mt="(?:"+_.pattern+")";o.push(_),_.repeat&&(mt+="(?:"+ut+mt+")*"),_.optional?_.partial?mt=ut+"("+mt+")?":mt="(?:"+ut+"("+mt+"))?":mt=ut+"("+mt+")",rt+=mt}}var vt=escapeString(s.delimiter||"/"),wt=rt.slice(-vt.length)===vt;return $||(rt=(wt?rt.slice(0,-vt.length):rt)+"(?:"+vt+"(?=$))?"),tt?rt+="$":rt+=$&&wt?"":"(?="+vt+"|$)",attachKeys(new RegExp("^"+rt,flags(s)),o)}function pathToRegexp(i,o,s){return isarray(o)||(s=o||s,o=[]),s=s||{},i instanceof RegExp?regexpToRegexp(i,o):isarray(i)?arrayToRegexp(i,o,s):stringToRegexp(i,o,s)}var pathToRegexpExports=pathToRegexp$2.exports;const pathToRegexp$1=getDefaultExportFromCjs(pathToRegexpExports);var reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$1=b$1?Symbol.for("react.fragment"):60107,f$1=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$1=b$1?Symbol.for("react.concurrent_mode"):60111,n$1=b$1?Symbol.for("react.forward_ref"):60112,p$1=b$1?Symbol.for("react.suspense"):60113,q$1=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t$1=b$1?Symbol.for("react.lazy"):60116,v$4=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z$1(i){if(typeof i=="object"&&i!==null){var o=i.$$typeof;switch(o){case c$1:switch(i=i.type,i){case l$1:case m$1:case e$1:case g$1:case f$1:case p$1:return i;default:switch(i=i&&i.$$typeof,i){case k$1:case n$1:case t$1:case r$1:case h$1:return i;default:return o}}case d$1:return o}}}function A$1(i){return z$1(i)===m$1}reactIs_production_min$1.AsyncMode=l$1;reactIs_production_min$1.ConcurrentMode=m$1;reactIs_production_min$1.ContextConsumer=k$1;reactIs_production_min$1.ContextProvider=h$1;reactIs_production_min$1.Element=c$1;reactIs_production_min$1.ForwardRef=n$1;reactIs_production_min$1.Fragment=e$1;reactIs_production_min$1.Lazy=t$1;reactIs_production_min$1.Memo=r$1;reactIs_production_min$1.Portal=d$1;reactIs_production_min$1.Profiler=g$1;reactIs_production_min$1.StrictMode=f$1;reactIs_production_min$1.Suspense=p$1;reactIs_production_min$1.isAsyncMode=function(i){return A$1(i)||z$1(i)===l$1};reactIs_production_min$1.isConcurrentMode=A$1;reactIs_production_min$1.isContextConsumer=function(i){return z$1(i)===k$1};reactIs_production_min$1.isContextProvider=function(i){return z$1(i)===h$1};reactIs_production_min$1.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===c$1};reactIs_production_min$1.isForwardRef=function(i){return z$1(i)===n$1};reactIs_production_min$1.isFragment=function(i){return z$1(i)===e$1};reactIs_production_min$1.isLazy=function(i){return z$1(i)===t$1};reactIs_production_min$1.isMemo=function(i){return z$1(i)===r$1};reactIs_production_min$1.isPortal=function(i){return z$1(i)===d$1};reactIs_production_min$1.isProfiler=function(i){return z$1(i)===g$1};reactIs_production_min$1.isStrictMode=function(i){return z$1(i)===f$1};reactIs_production_min$1.isSuspense=function(i){return z$1(i)===p$1};reactIs_production_min$1.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===e$1||i===m$1||i===g$1||i===f$1||i===p$1||i===q$1||typeof i=="object"&&i!==null&&(i.$$typeof===t$1||i.$$typeof===r$1||i.$$typeof===h$1||i.$$typeof===k$1||i.$$typeof===n$1||i.$$typeof===w$1||i.$$typeof===x$1||i.$$typeof===y$1||i.$$typeof===v$4)};reactIs_production_min$1.typeOf=z$1;function _objectWithoutPropertiesLoose(i,o){if(i==null)return{};var s={},$=Object.keys(i),tt,rt;for(rt=0;rt<$.length;rt++)tt=$[rt],!(o.indexOf(tt)>=0)&&(s[tt]=i[tt]);return s}var reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v$3=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(i){if(typeof i=="object"&&i!==null){var o=i.$$typeof;switch(o){case c:switch(i=i.type,i){case l:case m:case e:case g:case f:case p:return i;default:switch(i=i&&i.$$typeof,i){case k:case n:case t:case r:case h:return i;default:return o}}case d:return o}}}function A(i){return z(i)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(i){return A(i)||z(i)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(i){return z(i)===k};reactIs_production_min.isContextProvider=function(i){return z(i)===h};reactIs_production_min.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===c};reactIs_production_min.isForwardRef=function(i){return z(i)===n};reactIs_production_min.isFragment=function(i){return z(i)===e};reactIs_production_min.isLazy=function(i){return z(i)===t};reactIs_production_min.isMemo=function(i){return z(i)===r};reactIs_production_min.isPortal=function(i){return z(i)===d};reactIs_production_min.isProfiler=function(i){return z(i)===g};reactIs_production_min.isStrictMode=function(i){return z(i)===f};reactIs_production_min.isSuspense=function(i){return z(i)===p};reactIs_production_min.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===e||i===m||i===g||i===f||i===p||i===q||typeof i=="object"&&i!==null&&(i.$$typeof===t||i.$$typeof===r||i.$$typeof===h||i.$$typeof===k||i.$$typeof===n||i.$$typeof===w||i.$$typeof===x||i.$$typeof===y||i.$$typeof===v$3)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(i){return reactIs.isMemo(i)?MEMO_STATICS:TYPE_STATICS[i.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(i,o,s){if(typeof o!="string"){if(objectPrototype){var $=getPrototypeOf(o);$&&$!==objectPrototype&&hoistNonReactStatics(i,$,s)}var tt=getOwnPropertyNames(o);getOwnPropertySymbols&&(tt=tt.concat(getOwnPropertySymbols(o)));for(var rt=getStatics(i),st=getStatics(o),_=0;_<tt.length;++_){var ut=tt[_];if(!KNOWN_STATICS[ut]&&!(s&&s[ut])&&!(st&&st[ut])&&!(rt&&rt[ut])){var mt=getOwnPropertyDescriptor(o,ut);try{defineProperty(i,ut,mt)}catch(vt){}}}}return i}var hoistNonReactStatics_cjs=hoistNonReactStatics;const hoistStatics=getDefaultExportFromCjs(hoistNonReactStatics_cjs);var MAX_SIGNED_31_BIT_INT=1073741823,commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function getUniqueId(){var i="__global_unique_id__";return commonjsGlobal[i]=(commonjsGlobal[i]||0)+1}function objectIs(i,o){return i===o?i!==0||1/i===1/o:i!==i&&o!==o}function createEventEmitter(i){var o=[];return{on:function($){o.push($)},off:function($){o=o.filter(function(tt){return tt!==$})},get:function(){return i},set:function($,tt){i=$,o.forEach(function(rt){return rt(i,tt)})}}}function onlyChild(i){return Array.isArray(i)?i[0]:i}function createReactContext(i,o){var s,$,tt="__create-react-context-"+getUniqueId()+"__",rt=function(_){_inheritsLoose(ut,_);function ut(){for(var vt,wt=arguments.length,bt=new Array(wt),Mt=0;Mt<wt;Mt++)bt[Mt]=arguments[Mt];return vt=_.call.apply(_,[this].concat(bt))||this,vt.emitter=createEventEmitter(vt.props.value),vt}var mt=ut.prototype;return mt.getChildContext=function(){var wt;return wt={},wt[tt]=this.emitter,wt},mt.componentWillReceiveProps=function(wt){if(this.props.value!==wt.value){var bt=this.props.value,Mt=wt.value,At;objectIs(bt,Mt)?At=0:(At=typeof o=="function"?o(bt,Mt):MAX_SIGNED_31_BIT_INT,At|=0,At!==0&&this.emitter.set(wt.value,At))}},mt.render=function(){return this.props.children},ut}(React.Component);rt.childContextTypes=(s={},s[tt]=PropTypes.object.isRequired,s);var st=function(_){_inheritsLoose(ut,_);function ut(){for(var vt,wt=arguments.length,bt=new Array(wt),Mt=0;Mt<wt;Mt++)bt[Mt]=arguments[Mt];return vt=_.call.apply(_,[this].concat(bt))||this,vt.observedBits=void 0,vt.state={value:vt.getValue()},vt.onUpdate=function(At,Lt){var Ht=vt.observedBits|0;Ht&Lt&&vt.setState({value:vt.getValue()})},vt}var mt=ut.prototype;return mt.componentWillReceiveProps=function(wt){var bt=wt.observedBits;this.observedBits=bt==null?MAX_SIGNED_31_BIT_INT:bt},mt.componentDidMount=function(){this.context[tt]&&this.context[tt].on(this.onUpdate);var wt=this.props.observedBits;this.observedBits=wt==null?MAX_SIGNED_31_BIT_INT:wt},mt.componentWillUnmount=function(){this.context[tt]&&this.context[tt].off(this.onUpdate)},mt.getValue=function(){return this.context[tt]?this.context[tt].get():i},mt.render=function(){return onlyChild(this.props.children)(this.state.value)},ut}(React.Component);return st.contextTypes=($={},$[tt]=PropTypes.object,$),{Provider:rt,Consumer:st}}var createContext=React.createContext||createReactContext,createNamedContext=function(o){var s=createContext();return s.displayName=o,s},historyContext=createNamedContext("Router-History"),context=createNamedContext("Router"),Router=function(i){_inheritsLoose(o,i),o.computeRootMatch=function(tt){return{path:"/",url:"/",params:{},isExact:tt==="/"}};function o($){var tt;return tt=i.call(this,$)||this,tt.state={location:$.history.location},tt._isMounted=!1,tt._pendingLocation=null,$.staticContext||(tt.unlisten=$.history.listen(function(rt){tt._pendingLocation=rt})),tt}var s=o.prototype;return s.componentDidMount=function(){var tt=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(rt){tt._isMounted&&tt.setState({location:rt})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},s.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},s.render=function(){return React.createElement(context.Provider,{value:{history:this.props.history,location:this.state.location,match:o.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},React.createElement(historyContext.Provider,{children:this.props.children||null,value:this.props.history}))},o}(React.Component);React.Component;React.Component;var cache$1={},cacheLimit$1=1e4,cacheCount$1=0;function compilePath$1(i,o){var s=""+o.end+o.strict+o.sensitive,$=cache$1[s]||(cache$1[s]={});if($[i])return $[i];var tt=[],rt=pathToRegexp$1(i,tt,o),st={regexp:rt,keys:tt};return cacheCount$1<cacheLimit$1&&($[i]=st,cacheCount$1++),st}function matchPath(i,o){o===void 0&&(o={}),(typeof o=="string"||Array.isArray(o))&&(o={path:o});var s=o,$=s.path,tt=s.exact,rt=tt===void 0?!1:tt,st=s.strict,_=st===void 0?!1:st,ut=s.sensitive,mt=ut===void 0?!1:ut,vt=[].concat($);return vt.reduce(function(wt,bt){if(!bt&&bt!=="")return null;if(wt)return wt;var Mt=compilePath$1(bt,{end:rt,strict:_,sensitive:mt}),At=Mt.regexp,Lt=Mt.keys,Ht=At.exec(i);if(!Ht)return null;var Tt=Ht[0],Ct=Ht.slice(1),St=i===Tt;return rt&&!St?null:{path:bt,url:bt==="/"&&Tt===""?"/":Tt,isExact:St,params:Lt.reduce(function(It,Bt,Ft){return It[Bt.name]=Ct[Ft],It},{})}},null)}function isEmptyChildren(i){return React.Children.count(i)===0}var Route=function(i){_inheritsLoose(o,i);function o(){return i.apply(this,arguments)||this}var s=o.prototype;return s.render=function(){var tt=this;return React.createElement(context.Consumer,null,function(rt){rt||invariant(!1);var st=tt.props.location||rt.location,_=tt.props.computedMatch?tt.props.computedMatch:tt.props.path?matchPath(st.pathname,tt.props):rt.match,ut=_extends({},rt,{location:st,match:_}),mt=tt.props,vt=mt.children,wt=mt.component,bt=mt.render;return Array.isArray(vt)&&isEmptyChildren(vt)&&(vt=null),React.createElement(context.Provider,{value:ut},ut.match?vt?typeof vt=="function"?vt(ut):vt:wt?React.createElement(wt,ut):bt?bt(ut):null:typeof vt=="function"?vt(ut):null)})},o}(React.Component);function addLeadingSlash(i){return i.charAt(0)==="/"?i:"/"+i}function addBasename(i,o){return i?_extends({},o,{pathname:addLeadingSlash(i)+o.pathname}):o}function stripBasename(i,o){if(!i)return o;var s=addLeadingSlash(i);return o.pathname.indexOf(s)!==0?o:_extends({},o,{pathname:o.pathname.substr(s.length)})}function createURL(i){return typeof i=="string"?i:createPath(i)}function staticHandler(i){return function(){invariant(!1)}}function noop(){}React.Component;React.Component;function withRouter(i){var o="withRouter("+(i.displayName||i.name)+")",s=function(tt){var rt=tt.wrappedComponentRef,st=_objectWithoutPropertiesLoose(tt,["wrappedComponentRef"]);return React.createElement(context.Consumer,null,function(_){return _||invariant(!1),React.createElement(i,_extends({},st,_,{ref:rt}))})};return s.displayName=o,s.WrappedComponent=i,hoistStatics(s,i)}React.useContext;class IonRouteInner extends React.PureComponent{render(){return React.createElement(Route,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}class ReactRouterViewStack extends ViewStacks{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(o,s,$,tt){const rt={id:generateId("viewItem"),outletId:o,ionPageElement:tt,reactElement:s,mount:!0,ionRoute:!1},st={exact:s.props.exact,path:s.props.path||s.props.from,component:s.props.component},_=matchPath($.pathname,st);return s.type===IonRoute&&(rt.ionRoute=!0,rt.disableIonPageManagement=s.props.disableIonPageManagement),rt.routeData={match:_,childProps:s.props},rt}getChildrenToRender(o,s,$){const tt=this.getViewItemsForOutlet(o);return React.Children.forEach(s.props.children,st=>{const _=tt.find(ut=>matchComponent$1(st,ut.routeData.childProps.path||ut.routeData.childProps.from));_&&(_.reactElement=st)}),tt.map(st=>{let _;if(st.ionRoute&&!st.disableIonPageManagement)_=React.createElement(ViewLifeCycleManager,{key:`view-${st.id}`,mount:st.mount,removeView:()=>this.remove(st)},React.cloneElement(st.reactElement,{computedMatch:st.routeData.match}));else{const ut=matchComponent$1(st.reactElement,$.pathname);_=React.createElement(ViewLifeCycleManager,{key:`view-${st.id}`,mount:st.mount,removeView:()=>this.remove(st)},React.cloneElement(st.reactElement,{computedMatch:st.routeData.match})),!ut&&st.routeData.match&&(st.routeData.match=void 0,st.mount=!1)}return _})}findViewItemByRouteInfo(o,s,$){const{viewItem:tt,match:rt}=this.findViewItemByPath(o.pathname,s);return($===void 0||$===!0)&&tt&&rt&&(tt.routeData.match=rt),tt}findLeavingViewItemByRouteInfo(o,s,$=!0){const{viewItem:tt}=this.findViewItemByPath(o.lastPathname,s,!1,$);return tt}findViewItemByPathname(o,s){const{viewItem:$}=this.findViewItemByPath(o,s);return $}findViewItemByPath(o,s,$,tt){let rt,st,_;if(s)_=this.getViewItemsForOutlet(s),_.some(ut),rt||_.some(mt);else{const vt=this.getAllViewItems();vt.some(ut),rt||vt.some(mt)}return{viewItem:rt,match:st};function ut(vt){if(tt&&!vt.ionRoute)return!1;const wt={exact:$?!0:vt.routeData.childProps.exact,path:vt.routeData.childProps.path||vt.routeData.childProps.from,component:vt.routeData.childProps.component},bt=matchPath(o,wt);return bt?(rt=vt,st=bt,!0):!1}function mt(vt){return!vt.routeData.childProps.path&&!vt.routeData.childProps.from?(st={path:o,url:o,isExact:!0,params:{}},rt=vt,!0):!1}}}function matchComponent$1(i,o,s){const $={exact:s?!0:i.props.exact,path:i.props.path||i.props.from,component:i.props.component};return matchPath(o,$)}function clonePageElement(i){let o;if(typeof i=="string"?o=i:o=i.outerHTML,document){const s=document.createElement("div");s.innerHTML=o,s.style.zIndex="";const $=s.getElementsByTagName("ion-back-button");return $[0]&&$[0].remove(),s.firstChild}}const isViewVisible=i=>!i.classList.contains("ion-page-invisible")&&!i.classList.contains("ion-page-hidden");class StackManager extends React.PureComponent{constructor(o){super(o),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=generateId("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(o){const{pathname:s}=this.props.routeInfo,{pathname:$}=o.routeInfo;s!==$?(this.prevProps=o,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(o){var s,$;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let tt=this.context.findViewItemByRouteInfo(o,this.id),rt=this.context.findLeavingViewItemByRouteInfo(o,this.id);!rt&&o.prevRouteLastPathname&&(rt=this.context.findViewItemByPathname(o.prevRouteLastPathname,this.id)),rt&&(o.routeAction==="replace"?rt.mount=!1:o.routeAction==="push"&&o.routeDirection==="forward"?!((s=o.routeOptions)===null||s===void 0)&&s.unmount&&(rt.mount=!1):o.routeDirection!=="none"&&tt!==rt&&(rt.mount=!1));const st=matchRoute(($=this.ionRouterOutlet)===null||$===void 0?void 0:$.props.children,o);if(tt?tt.reactElement=st:st&&(tt=this.context.createViewItem(this.id,st,o),this.context.addViewItem(tt)),tt&&tt.ionPageElement){if(tt===rt&&tt.routeData.match.url!==o.pathname||(!rt&&this.props.routeInfo.prevRouteLastPathname&&(rt=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),isViewVisible(tt.ionPageElement)&&rt!==void 0&&!isViewVisible(rt.ionPageElement)))return;this.transitionPage(o,tt,rt)}else rt&&!st&&!tt&&rt.ionPageElement&&(rt.ionPageElement.classList.add("ion-page-hidden"),rt.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(o,s){const $=this.context.findViewItemByRouteInfo(s,this.id);if($){const tt=$.ionPageElement;if($.ionPageElement=o,$.ionRoute=!0,tt===o)return}this.handlePageTransition(s)}async setupRouterOutlet(o){const s=()=>{const rt=getConfig();if(!(rt&&rt.get("swipeBackEnabled",o.mode==="ios")))return!1;const{routeInfo:_}=this.props,ut=this.prevProps&&this.prevProps.routeInfo.pathname===_.pushedByRoute?this.prevProps.routeInfo:{pathname:_.pushedByRoute||""},mt=this.context.findViewItemByRouteInfo(ut,this.id,!1);return!!mt&&mt.mount&&mt.routeData.match.path!==_.pathname},$=async()=>{const{routeInfo:rt}=this.props,st=this.prevProps&&this.prevProps.routeInfo.pathname===rt.pushedByRoute?this.prevProps.routeInfo:{pathname:rt.pushedByRoute||""},_=this.context.findViewItemByRouteInfo(st,this.id,!1),ut=this.context.findViewItemByRouteInfo(rt,this.id,!1);return _&&ut&&await this.transitionPage(rt,_,ut,"back",!0),Promise.resolve()},tt=rt=>{if(rt)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:st}=this.props,_=this.prevProps&&this.prevProps.routeInfo.pathname===st.pushedByRoute?this.prevProps.routeInfo:{pathname:st.pushedByRoute||""},ut=this.context.findViewItemByRouteInfo(_,this.id,!1),mt=this.context.findViewItemByRouteInfo(st,this.id,!1);if(ut!==mt&&(ut==null?void 0:ut.ionPageElement)!==void 0){const{ionPageElement:vt}=ut;vt.setAttribute("aria-hidden","true"),vt.classList.add("ion-page-hidden")}}};o.swipeHandler={canStart:s,onStart:$,onEnd:tt}}async transitionPage(o,s,$,tt,rt=!1){const st=async(vt,wt)=>{const bt=this.skipTransition;bt?this.skipTransition=!1:(vt.classList.add("ion-page"),vt.classList.add("ion-page-invisible")),await _.commit(vt,wt,{duration:bt||mt===void 0?0:void 0,direction:mt,showGoBack:!!o.pushedByRoute,progressAnimation:rt,animationBuilder:o.routeAnimation})},_=this.routerOutletElement,ut=o.routeDirection==="none"||o.routeDirection==="root"?void 0:o.routeDirection,mt=tt!=null?tt:ut;if(s&&s.ionPageElement&&this.routerOutletElement)if($&&$.ionPageElement&&s===$)if(matchComponent($.reactElement,o.pathname,!0)){const wt=clonePageElement($.ionPageElement.outerHTML);wt&&(this.routerOutletElement.appendChild(wt),await st(s.ionPageElement,wt),this.routerOutletElement.removeChild(wt))}else await st(s.ionPageElement,void 0);else await st(s.ionPageElement,$==null?void 0:$.ionPageElement),$&&$.ionPageElement&&!rt&&($.ionPageElement.classList.add("ion-page-hidden"),$.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:o}=this.props,s=React.Children.only(o);this.ionRouterOutlet=s;const $=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return React.createElement(StackContext.Provider,{value:this.stackContextValue},React.cloneElement(s,{ref:tt=>{s.props.setRef&&s.props.setRef(tt),s.props.forwardedRef&&(s.props.forwardedRef.current=tt),this.routerOutletElement=tt;const{ref:rt}=s;typeof rt=="function"&&rt(tt)}},$))}static get contextType(){return RouteManagerContext}}function matchRoute(i,o){let s;return React.Children.forEach(i,$=>{const tt={exact:$.props.exact,path:$.props.path||$.props.from,component:$.props.component};matchPath(o.pathname,tt)&&(s=$)}),s||(React.Children.forEach(i,$=>{$.props.path||$.props.from||(s=$)}),s)}function matchComponent(i,o,s){const $={exact:s?!0:i.props.exact,path:i.props.path||i.props.from,component:i.props.component};return matchPath(o,$)}class IonRouterInner extends React.PureComponent{constructor(o){super(o),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new LocationHistory,this.viewStack=new ReactRouterViewStack,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const s={id:generateId("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(s),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:s}}handleChangeTab(o,s,$){if(!s)return;const tt=this.locationHistory.getCurrentRouteInfoForTab(o),[rt,st]=s.split("?");tt?(this.incomingRouteParams=Object.assign(Object.assign({},tt),{routeAction:"push",routeDirection:"none"}),tt.pathname===rt?(this.incomingRouteParams.routeOptions=$,this.props.history.push(tt.pathname+(tt.search||""))):(this.incomingRouteParams.pathname=rt,this.incomingRouteParams.search=st?"?"+st:void 0,this.incomingRouteParams.routeOptions=$,this.props.history.push(rt+(st?"?"+st:"")))):this.handleNavigate(rt,"push","none",void 0,$,o)}handleHistoryChange(o,s){var $,tt,rt;let st;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?st=this.locationHistory.previous():st=this.locationHistory.current():st=this.locationHistory.current(),st.pathname+st.search!==o.pathname){if(!this.incomingRouteParams){if(s==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),s==="POP"){const mt=this.locationHistory.current();if(mt&&mt.pushedByRoute){const vt=this.locationHistory.findLastLocation(mt);this.incomingRouteParams=Object.assign(Object.assign({},vt),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:(($=o.state)===null||$===void 0?void 0:$.direction)||"forward",routeOptions:(tt=o.state)===null||tt===void 0?void 0:tt.routerOptions,tab:this.currentTab})}let ut;if(!((rt=this.incomingRouteParams)===null||rt===void 0)&&rt.id)ut=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:st.pathname}),this.locationHistory.add(ut);else{const mt=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(ut=Object.assign(Object.assign({id:generateId("routeInfo")},this.incomingRouteParams),{lastPathname:st.pathname,pathname:o.pathname,search:o.search,params:this.props.match.params,prevRouteLastPathname:st.lastPathname}),mt)ut.tab=st.tab,ut.pushedByRoute=st.pathname;else if(ut.routeAction==="pop"){const vt=this.locationHistory.findLastLocation(ut);ut.pushedByRoute=vt==null?void 0:vt.pushedByRoute}else if(ut.routeAction==="push"&&ut.tab!==st.tab){const vt=this.locationHistory.getCurrentRouteInfoForTab(ut.tab);ut.pushedByRoute=vt==null?void 0:vt.pushedByRoute}else if(ut.routeAction==="replace"){const vt=this.locationHistory.current(),wt=vt==null?void 0:vt.pushedByRoute,bt=wt!==void 0&&wt!==ut.pathname?wt:ut.pushedByRoute;ut.lastPathname=(vt==null?void 0:vt.pathname)||ut.lastPathname,ut.prevRouteLastPathname=vt==null?void 0:vt.lastPathname,ut.pushedByRoute=bt,ut.routeDirection=(vt==null?void 0:vt.routeDirection)||ut.routeDirection,ut.routeAnimation=(vt==null?void 0:vt.routeAnimation)||ut.routeAnimation}this.locationHistory.add(ut)}this.setState({routeInfo:ut})}this.incomingRouteParams=void 0}handleNativeBack(){const o=this.props.history;(o.goBack||o.back)()}handleNavigate(o,s,$,tt,rt,st){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:s,routeDirection:$,routeOptions:rt,routeAnimation:tt,tab:st}),s==="push"?this.props.history.push(o):this.props.history.replace(o)}handleNavigateBack(o="/",s){const $=getConfig();o=o||$&&$.get("backButtonDefaultHref");const tt=this.locationHistory.current();if(tt&&tt.pushedByRoute){const rt=this.locationHistory.findLastLocation(tt);if(rt)if(this.incomingRouteParams=Object.assign(Object.assign({},rt),{routeAction:"pop",routeDirection:"back",routeAnimation:s||tt.routeAnimation}),tt.lastPathname===tt.pushedByRoute||rt.pathname===tt.pushedByRoute&&tt.tab===""&&rt.tab===""){const st=this.props.history;(st.goBack||st.back)()}else this.handleNavigate(rt.pathname+(rt.search||""),"pop","back");else this.handleNavigate(o,"pop","back")}else this.handleNavigate(o,"pop","back")}handleResetTab(o,s,$){const tt=this.locationHistory.getFirstRouteInfoForTab(o);if(tt){const rt=Object.assign({},tt);rt.pathname=s,rt.routeOptions=$,this.incomingRouteParams=Object.assign(Object.assign({},rt),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(rt.pathname+(rt.search||""))}}handleSetCurrentTab(o){this.currentTab=o;const s=Object.assign({},this.locationHistory.current());s.tab!==o&&(s.tab=o,this.locationHistory.update(s))}render(){return React.createElement(RouteManagerContext.Provider,{value:this.routeMangerContextState},React.createElement(NavManager,{ionRoute:IonRouteInner,ionRedirect:{},stackManager:StackManager,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const IonRouter=withRouter(IonRouterInner);IonRouter.displayName="IonRouter";class IonReactRouter extends React.Component{constructor(o){super(o);const{history:s}=o,$=__rest(o,["history"]);this.history=s||createBrowserHistory($),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(o,s){const $=o.location||o,tt=o.action||s;this.historyListenHandler&&this.historyListenHandler($,tt)}registerHistoryListener(o){this.historyListenHandler=o}render(){const o=this.props,{children:s}=o,$=__rest(o,["children"]);return React.createElement(Router,Object.assign({history:this.history},$),React.createElement(IonRouter,{registerHistoryListener:this.registerHistoryListener},s))}}class IonReactMemoryRouter extends React.Component{constructor(o){super(o),this.history=o.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(o,s){const $=o.location||o,tt=o.action||s;this.historyListenHandler&&this.historyListenHandler($,tt)}registerHistoryListener(o){this.historyListenHandler=o}render(){const o=this.props,{children:s}=o,$=__rest(o,["children"]);return React.createElement(Router,Object.assign({},$),React.createElement(IonRouter,{registerHistoryListener:this.registerHistoryListener},s))}}class IonReactHashRouter extends React.Component{constructor(o){super(o);const{history:s}=o,$=__rest(o,["history"]);this.history=s||createHashHistory($),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(o,s){const $=o.location||o,tt=o.action||s;this.historyListenHandler&&this.historyListenHandler($,tt)}registerHistoryListener(o){this.historyListenHandler=o}render(){const o=this.props,{children:s}=o,$=__rest(o,["children"]);return React.createElement(Router,Object.assign({history:this.history},$),React.createElement(IonRouter,{registerHistoryListener:this.registerHistoryListener},s))}}const core="",normalize="",structure="",typography="",padding="",floatElements="",textAlignment="",textTransformation="",flexUtils="",display="",variables="",Map$2="";var mapboxGl$2={exports:{}};(function(i,o){(function(s,$){i.exports=$()})(commonjsGlobal$1,function(){var s,$,tt;function rt(_,ut){if(!s)s=ut;else if(!$)$=ut;else{var mt="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+s+")(sharedChunk); ("+$+")(sharedChunk); self.onerror = null;",vt={};s(vt),tt=ut(vt),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(tt.workerUrl=window.URL.createObjectURL(new Blob([mt],{type:"text/javascript"})))}}rt(["exports"],function(_){var ut=typeof self<"u"?self:{},mt="2.15.0";let vt;const wt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(vt==null){const j=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{vt={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):j}catch(a){vt=j}}return vt},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!wt.API_URL)return null;try{const j=new URL(wt.API_URL);return j.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":j.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch(j){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},bt={supported:!1,testSupport:function(j){!Lt&&At&&(Ht?Tt(j):Mt=j)}};let Mt,At,Lt=!1,Ht=!1;function Tt(j){const a=j.createTexture();j.bindTexture(j.TEXTURE_2D,a);try{if(j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,At),j.isContextLost())return;bt.supported=!0}catch(_e){}j.deleteTexture(a),Lt=!0}ut.document&&(At=ut.document.createElement("img"),At.onload=function(){Mt&&Tt(Mt),Mt=null,Ht=!0},At.onerror=function(){Lt=!0,Mt=null},At.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ct="01";function St(j){return j&&j.__esModule&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j}var It=Bt;function Bt(j,a,_e,it){this.cx=3*j,this.bx=3*(_e-j)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(it-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=j,this.p1y=a,this.p2x=_e,this.p2y=it}Bt.prototype={sampleCurveX:function(j){return((this.ax*j+this.bx)*j+this.cx)*j},sampleCurveY:function(j){return((this.ay*j+this.by)*j+this.cy)*j},sampleCurveDerivativeX:function(j){return(3*this.ax*j+2*this.bx)*j+this.cx},solveCurveX:function(j,a){if(a===void 0&&(a=1e-6),j<0)return 0;if(j>1)return 1;for(var _e=j,it=0;it<8;it++){var ot=this.sampleCurveX(_e)-j;if(Math.abs(ot)<a)return _e;var lt=this.sampleCurveDerivativeX(_e);if(Math.abs(lt)<1e-6)break;_e-=ot/lt}var ht=0,pt=1;for(_e=j,it=0;it<20&&(ot=this.sampleCurveX(_e),!(Math.abs(ot-j)<a));it++)j>ot?ht=_e:pt=_e,_e=.5*(pt-ht)+ht;return _e},solve:function(j,a){return this.sampleCurveY(this.solveCurveX(j,a))}};var Ft=St(It),Gt=Xt;function Xt(j,a){this.x=j,this.y=a}Xt.prototype={clone:function(){return new Xt(this.x,this.y)},add:function(j){return this.clone()._add(j)},sub:function(j){return this.clone()._sub(j)},multByPoint:function(j){return this.clone()._multByPoint(j)},divByPoint:function(j){return this.clone()._divByPoint(j)},mult:function(j){return this.clone()._mult(j)},div:function(j){return this.clone()._div(j)},rotate:function(j){return this.clone()._rotate(j)},rotateAround:function(j,a){return this.clone()._rotateAround(j,a)},matMult:function(j){return this.clone()._matMult(j)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(j){return this.x===j.x&&this.y===j.y},dist:function(j){return Math.sqrt(this.distSqr(j))},distSqr:function(j){var a=j.x-this.x,_e=j.y-this.y;return a*a+_e*_e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(j){return Math.atan2(this.y-j.y,this.x-j.x)},angleWith:function(j){return this.angleWithSep(j.x,j.y)},angleWithSep:function(j,a){return Math.atan2(this.x*a-this.y*j,this.x*j+this.y*a)},_matMult:function(j){var a=j[2]*this.x+j[3]*this.y;return this.x=j[0]*this.x+j[1]*this.y,this.y=a,this},_add:function(j){return this.x+=j.x,this.y+=j.y,this},_sub:function(j){return this.x-=j.x,this.y-=j.y,this},_mult:function(j){return this.x*=j,this.y*=j,this},_div:function(j){return this.x/=j,this.y/=j,this},_multByPoint:function(j){return this.x*=j.x,this.y*=j.y,this},_divByPoint:function(j){return this.x/=j.x,this.y/=j.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var j=this.y;return this.y=this.x,this.x=-j,this},_rotate:function(j){var a=Math.cos(j),_e=Math.sin(j),it=_e*this.x+a*this.y;return this.x=a*this.x-_e*this.y,this.y=it,this},_rotateAround:function(j,a){var _e=Math.cos(j),it=Math.sin(j),ot=a.y+it*(this.x-a.x)+_e*(this.y-a.y);return this.x=a.x+_e*(this.x-a.x)-it*(this.y-a.y),this.y=ot,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Xt.convert=function(j){return j instanceof Xt?j:Array.isArray(j)?new Xt(j[0],j[1]):j};var ir=St(Gt);const $r=Math.PI/180,Tr=180/Math.PI;function xr(j){return j*$r}function Xr(j){return j*Tr}const ln=[[0,0],[1,0],[1,1],[0,1]];function zr(j){if(j<=0)return 0;if(j>=1)return 1;const a=j*j,_e=a*j;return 4*(j<.5?_e:3*(j-a)+_e-.75)}function hr(j,a,_e,it){const ot=new Ft(j,a,_e,it);return function(lt){return ot.solve(lt)}}const Er=hr(.25,.1,.25,1);function Nt(j,a,_e){return Math.min(_e,Math.max(a,j))}function Wt(j,a,_e){return(_e=Nt((_e-j)/(a-j),0,1))*_e*(3-2*_e)}function or(j,a,_e){const it=_e-a,ot=((j-a)%it+it)%it+a;return ot===a?_e:ot}function ar(j,a,_e){if(!j.length)return _e(null,[]);let it=j.length;const ot=new Array(j.length);let lt=null;j.forEach((ht,pt)=>{a(ht,(gt,yt)=>{gt&&(lt=gt),ot[pt]=yt,--it==0&&_e(lt,ot)})})}function Fr(j){const a=[];for(const _e in j)a.push(j[_e]);return a}function Yr(j,...a){for(const _e of a)for(const it in _e)j[it]=_e[it];return j}let hn=1;function mn(){return hn++}function En(){return function j(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,j)}()}function Ln(j){return j<=1?1:Math.pow(2,Math.ceil(Math.log(j)/Math.LN2))}function wo(j){return!!j&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(j)}function Po(j,a){j.forEach(_e=>{a[_e]&&(a[_e]=a[_e].bind(a))})}function Ao(j,a){return j.indexOf(a,j.length-a.length)!==-1}function An(j,a,_e){const it={};for(const ot in j)it[ot]=a.call(_e||this,j[ot],ot,j);return it}function Eo(j,a,_e){const it={};for(const ot in j)a.call(_e||this,j[ot],ot,j)&&(it[ot]=j[ot]);return it}function jn(j){return Array.isArray(j)?j.map(jn):typeof j=="object"&&j?An(j,jn):j}const bn={};function Xn(j){bn[j]||(typeof console<"u"&&console.warn(j),bn[j]=!0)}function Io(j,a,_e){return(_e.y-j.y)*(a.x-j.x)>(a.y-j.y)*(_e.x-j.x)}function gs(j){let a=0;for(let _e,it,ot=0,lt=j.length,ht=lt-1;ot<lt;ht=ot++)_e=j[ot],it=j[ht],a+=(it.x-_e.x)*(_e.y+it.y);return a}function zo(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function So(j){const a={};if(j.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(_e,it,ot,lt)=>{const ht=ot||lt;return a[it]=!ht||ht.toLowerCase(),""}),a["max-age"]){const _e=parseInt(a["max-age"],10);isNaN(_e)?delete a["max-age"]:a["max-age"]=_e}return a}let hs=null;function Mo(j){if(hs==null){const a=j.navigator?j.navigator.userAgent:null;hs=!!j.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return hs}function ys(j){try{const a=ut[j];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch(a){return!1}}function Jo(j,a){return[j[4*a],j[4*a+1],j[4*a+2],j[4*a+3]]}const Ko="mapbox-tiles";let ws=500,is=50,Oo,es;function us(){try{return ut.caches}catch(j){}}function rs(){us()&&!Oo&&(Oo=ut.caches.open(Ko))}function ns(j){const a=j.indexOf("?");if(a<0)return j;const _e=function(ot){const lt=ot.indexOf("?");return lt>0?ot.slice(lt+1).split("&"):[]}(j),it=_e.filter(ot=>{const lt=ot.split("=");return lt[0]==="language"||lt[0]==="worldview"});return it.length?`${j.slice(0,a)}?${it.join("&")}`:j.slice(0,a)}let Ss=1/0;const Ts={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ts);class na extends Error{constructor(a,_e,it){_e===401&&Pr(it)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=_e,this.url=it}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Sl=zo()?()=>self.worker&&self.worker.referrer:()=>(ut.location.protocol==="blob:"?ut.parent:ut).location.href,Tl=function(j,a){if(!(/^file:/.test(_e=j.url)||/^file:/.test(Sl())&&!/^\w+:/.test(_e))){if(ut.fetch&&ut.Request&&ut.AbortController&&ut.Request.prototype.hasOwnProperty("signal"))return function(it,ot){const lt=new ut.AbortController,ht=new ut.Request(it.url,{method:it.method||"GET",body:it.body,credentials:it.credentials,headers:it.headers,referrer:Sl(),referrerPolicy:it.referrerPolicy,signal:lt.signal});let pt=!1,gt=!1;const yt=(Et=ht.url).indexOf("sku=")>0&&Pr(Et);var Et;it.type==="json"&&ht.headers.set("Accept","application/json");const Pt=(zt,Ot,Ut)=>{if(gt)return;if(zt&&zt.message!=="SecurityError"&&Xn(zt.toString()),Ot&&Ut)return Rt(Ot);const Kt=Date.now();ut.fetch(ht).then(rr=>{if(rr.ok){const pr=yt?rr.clone():null;return Rt(rr,pr,Kt)}return ot(new na(rr.statusText,rr.status,it.url))}).catch(rr=>{rr.name!=="AbortError"&&ot(new Error(`${rr.message} ${it.url}`))})},Rt=(zt,Ot,Ut)=>{(it.type==="arrayBuffer"?zt.arrayBuffer():it.type==="json"?zt.json():zt.text()).then(Kt=>{gt||(Ot&&Ut&&function(rr,pr,nr){if(rs(),!Oo)return;const ur={status:pr.status,statusText:pr.statusText,headers:new ut.Headers};pr.headers.forEach((Rr,Ir)=>ur.headers.set(Ir,Rr));const mr=So(pr.headers.get("Cache-Control")||"");if(mr["no-store"])return;mr["max-age"]&&ur.headers.set("Expires",new Date(nr+1e3*mr["max-age"]).toUTCString());const fr=ur.headers.get("Expires");fr&&(new Date(fr).getTime()-nr<42e4||function(Rr,Ir){if(es===void 0)try{new Response(new ReadableStream),es=!0}catch(Ur){es=!1}es?Ir(Rr.body):Rr.blob().then(Ir)}(pr,Rr=>{const Ir=new ut.Response(Rr,ur);rs(),Oo&&Oo.then(Ur=>Ur.put(ns(rr.url),Ir)).catch(Ur=>Xn(Ur.message))}))}(ht,Ot,Ut),pt=!0,ot(null,Kt,zt.headers.get("Cache-Control"),zt.headers.get("Expires")))}).catch(Kt=>{gt||ot(new Error(Kt.message))})};return yt?function(zt,Ot){if(rs(),!Oo)return Ot(null);const Ut=ns(zt.url);Oo.then(Kt=>{Kt.match(Ut).then(rr=>{const pr=function(nr){if(!nr)return!1;const ur=new Date(nr.headers.get("Expires")||0),mr=So(nr.headers.get("Cache-Control")||"");return ur>Date.now()&&!mr["no-cache"]}(rr);Kt.delete(Ut),pr&&Kt.put(Ut,rr.clone()),Ot(null,rr,pr)}).catch(Ot)}).catch(Ot)}(ht,Pt):Pt(null,null),{cancel:()=>{gt=!0,pt||lt.abort()}}}(j,a);if(zo()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",j,a,void 0,!0)}var _e;return function(it,ot){const lt=new ut.XMLHttpRequest;lt.open(it.method||"GET",it.url,!0),it.type==="arrayBuffer"&&(lt.responseType="arraybuffer");for(const ht in it.headers)lt.setRequestHeader(ht,it.headers[ht]);return it.type==="json"&&(lt.responseType="text",lt.setRequestHeader("Accept","application/json")),lt.withCredentials=it.credentials==="include",lt.onerror=()=>{ot(new Error(lt.statusText))},lt.onload=()=>{if((lt.status>=200&&lt.status<300||lt.status===0)&&lt.response!==null){let ht=lt.response;if(it.type==="json")try{ht=JSON.parse(lt.response)}catch(pt){return ot(pt)}ot(null,ht,lt.getResponseHeader("Cache-Control"),lt.getResponseHeader("Expires"))}else ot(new na(lt.statusText,lt.status,it.url))},lt.send(it.body),{cancel:()=>lt.abort()}}(j,a)},Wl=function(j,a){return Tl(Yr(j,{type:"arrayBuffer"}),a)};function wu(j){const a=ut.document.createElement("a");return a.href=j,a.protocol===ut.document.location.protocol&&a.host===ut.document.location.host}const dr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let qt,Zt;qt=[],Zt=0;const cr=function(j,a){if(bt.supported&&(j.headers||(j.headers={}),j.headers.accept="image/webp,*/*"),Zt>=wt.MAX_PARALLEL_IMAGE_REQUESTS){const lt={requestParameters:j,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return qt.push(lt),lt}Zt++;let _e=!1;const it=()=>{if(!_e)for(_e=!0,Zt--;qt.length&&Zt<wt.MAX_PARALLEL_IMAGE_REQUESTS;){const lt=qt.shift(),{requestParameters:ht,callback:pt,cancelled:gt}=lt;gt||(lt.cancel=cr(ht,pt).cancel)}},ot=Wl(j,(lt,ht,pt,gt)=>{it(),lt?a(lt):ht&&(ut.createImageBitmap?function(yt,Et){const Pt=new ut.Blob([new Uint8Array(yt)],{type:"image/png"});ut.createImageBitmap(Pt).then(Rt=>{Et(null,Rt)}).catch(Rt=>{Et(new Error(`Could not load image because of ${Rt.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ht,(yt,Et)=>a(yt,Et,pt,gt)):function(yt,Et){const Pt=new ut.Image,Rt=ut.URL;Pt.onload=()=>{Et(null,Pt),Rt.revokeObjectURL(Pt.src),Pt.onload=null,ut.requestAnimationFrame(()=>{Pt.src=dr})},Pt.onerror=()=>Et(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const zt=new ut.Blob([new Uint8Array(yt)],{type:"image/png"});Pt.src=yt.byteLength?Rt.createObjectURL(zt):dr}(ht,(yt,Et)=>a(yt,Et,pt,gt)))});return{cancel:()=>{ot.cancel(),it()}}},gr="NO_ACCESS_TOKEN";function wr(j){return j.indexOf("mapbox:")===0}function Pr(j){return wt.API_URL_REGEX.test(j)}function Cr(j){return wt.API_CDN_URL_REGEX.test(j)}function br(j){return wt.API_STYLE_REGEX.test(j)&&!Dr(j)}function Dr(j){return wt.API_SPRITE_REGEX.test(j)}const on=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function cn(j){const a=j.match(on);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function tn(j){const a=j.params.length?`?${j.params.join("&")}`:"";return`${j.protocol}://${j.authority}${j.path}${a}`}const Rn="mapbox.eventData";function Nn(j){if(!j)return null;const a=j.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(decodeURIComponent(ut.atob(a[1]).split("").map(_e=>"%"+("00"+_e.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(_e){return null}}class $n{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const _e=Nn(wt.ACCESS_TOKEN);let it="";return it=_e&&_e.u?ut.btoa(encodeURIComponent(_e.u).replace(/%([0-9A-F]{2})/g,(ot,lt)=>String.fromCharCode(+("0x"+lt)))):wt.ACCESS_TOKEN||"",a?`${Rn}.${a}:${it}`:`${Rn}:${it}`}fetchEventData(){const a=ys("localStorage"),_e=this.getStorageKey(),it=this.getStorageKey("uuid");if(a)try{const ot=ut.localStorage.getItem(_e);ot&&(this.eventData=JSON.parse(ot));const lt=ut.localStorage.getItem(it);lt&&(this.anonId=lt)}catch(ot){Xn("Unable to read from LocalStorage")}}saveEventData(){const a=ys("localStorage"),_e=this.getStorageKey(),it=this.getStorageKey("uuid");if(a)try{ut.localStorage.setItem(it,this.anonId),Object.keys(this.eventData).length>=1&&ut.localStorage.setItem(_e,JSON.stringify(this.eventData))}catch(ot){Xn("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,_e,it,ot){if(!wt.EVENTS_URL)return;const lt=cn(wt.EVENTS_URL);lt.params.push(`access_token=${ot||wt.ACCESS_TOKEN||""}`);const ht={event:this.type,created:new Date(a).toISOString()},pt=_e?Yr(ht,_e):ht,gt={url:tn(lt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([pt])};this.pendingRequest=function(yt,Et){return Tl(Yr(yt,{method:"POST"}),Et)}(gt,yt=>{this.pendingRequest=null,it(yt),this.saveEventData(),this.processRequests(ot)})}queueRequest(a,_e){this.queue.push(a),this.processRequests(_e)}}const Mn=new class extends $n{constructor(j){super("appUserTurnstile"),this._customAccessToken=j}postTurnstileEvent(j,a){wt.EVENTS_URL&&wt.ACCESS_TOKEN&&Array.isArray(j)&&j.some(_e=>wr(_e)||Pr(_e))&&this.queueRequest(Date.now(),a)}processRequests(j){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=Nn(wt.ACCESS_TOKEN),_e=a?a.u:wt.ACCESS_TOKEN;let it=_e!==this.eventData.tokenU;wo(this.anonId)||(this.anonId=En(),it=!0);const ot=this.queue.shift();if(this.eventData.lastSuccess){const lt=new Date(this.eventData.lastSuccess),ht=new Date(ot),pt=(ot-this.eventData.lastSuccess)/864e5;it=it||pt>=1||pt<-1||lt.getDate()!==ht.getDate()}else it=!0;it?this.postEvent(ot,{sdkIdentifier:"mapbox-gl-js",sdkVersion:mt,skuId:Ct,"enabled.telemetry":!1,userId:this.anonId},lt=>{lt||(this.eventData.lastSuccess=ot,this.eventData.tokenU=_e)},j):this.processRequests()}},Wn=Mn.postTurnstileEvent.bind(Mn),vo=new class extends $n{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(j,a,_e,it){this.skuToken=a,this.errorCb=it,wt.EVENTS_URL&&(_e||wt.ACCESS_TOKEN?this.queueRequest({id:j,timestamp:Date.now()},_e):this.errorCb(new Error(gr)))}processRequests(j){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:_e}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),wo(this.anonId)||(this.anonId=En()),this.postEvent(_e,{sdkIdentifier:"mapbox-gl-js",sdkVersion:mt,skuId:Ct,skuToken:this.skuToken,userId:this.anonId},it=>{it?this.errorCb(it):a&&(this.success[a]=!0)},j))}},Lo=vo.postMapLoadEvent.bind(vo),ts=new class extends $n{constructor(){super("gljs.performance")}postPerformanceEvent(j,a){wt.EVENTS_URL&&(j||wt.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},j)}processRequests(j){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:_e}=this.queue.shift(),it=function(ot){const lt=ut.performance.getEntriesByType("resource"),ht=ut.performance.getEntriesByType("mark"),pt=function(Rt){const zt={};if(Rt){for(const Ot in Rt)if(Ot!=="other")for(const Ut of Rt[Ot]){const Kt=`${Ot}ResolveRangeMin`,rr=`${Ot}ResolveRangeMax`,pr=`${Ot}RequestCount`,nr=`${Ot}RequestCachedCount`;zt[Kt]=Math.min(zt[Kt]||1/0,Ut.startTime),zt[rr]=Math.max(zt[rr]||-1/0,Ut.responseEnd);const ur=mr=>{zt[mr]===void 0&&(zt[mr]=0),++zt[mr]};Ut.transferSize!==void 0&&Ut.transferSize===0&&ur(nr),ur(pr)}}return zt}(function(Rt,zt){const Ot={};if(Rt)for(const Ut of Rt){const Kt=zt(Ut);Ot[Kt]===void 0&&(Ot[Kt]=[]),Ot[Kt].push(Ut)}return Ot}(lt,Bp)),gt=ut.devicePixelRatio,yt=ut.navigator.connection||ut.navigator.mozConnection||ut.navigator.webkitConnection,Et={counters:[],metadata:[],attributes:[]},Pt=(Rt,zt,Ot)=>{Ot!=null&&Rt.push({name:zt,value:Ot.toString()})};for(const Rt in pt)Pt(Et.counters,Rt,pt[Rt]);if(ot.interactionRange[0]!==1/0&&ot.interactionRange[1]!==-1/0&&(Pt(Et.counters,"interactionRangeMin",ot.interactionRange[0]),Pt(Et.counters,"interactionRangeMax",ot.interactionRange[1])),ht)for(const Rt of Object.keys(Zl)){const zt=Zl[Rt],Ot=ht.find(Ut=>Ut.name===zt);Ot&&Pt(Et.counters,zt,Ot.startTime)}return Pt(Et.counters,"visibilityHidden",ot.visibilityHidden),Pt(Et.attributes,"style",function(Rt){if(Rt)for(const zt of Rt){const Ot=zt.name.split("?")[0];if(br(Ot)){const Ut=Ot.split("/").slice(-2);if(Ut.length===2)return`mapbox://styles/${Ut[0]}/${Ut[1]}`}}}(lt)),Pt(Et.attributes,"terrainEnabled",ot.terrainEnabled?"true":"false"),Pt(Et.attributes,"fogEnabled",ot.fogEnabled?"true":"false"),Pt(Et.attributes,"projection",ot.projection),Pt(Et.attributes,"zoom",ot.zoom),Pt(Et.metadata,"devicePixelRatio",gt),Pt(Et.metadata,"connectionEffectiveType",yt?yt.effectiveType:void 0),Pt(Et.metadata,"navigatorUserAgent",ut.navigator.userAgent),Pt(Et.metadata,"screenWidth",ut.screen.width),Pt(Et.metadata,"screenHeight",ut.screen.height),Pt(Et.metadata,"windowWidth",ut.innerWidth),Pt(Et.metadata,"windowHeight",ut.innerHeight),Pt(Et.metadata,"mapWidth",ot.width/gt),Pt(Et.metadata,"mapHeight",ot.height/gt),Pt(Et.metadata,"webglRenderer",ot.renderer),Pt(Et.metadata,"webglVendor",ot.vendor),Pt(Et.metadata,"sdkVersion",mt),Pt(Et.metadata,"sdkIdentifier","mapbox-gl-js"),Et}(_e);for(const ot of it.metadata);for(const ot of it.counters);for(const ot of it.attributes);this.postEvent(a,it,()=>{},j)}},Bo=ts.postPerformanceEvent.bind(ts),Bs=new class extends $n{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(j,a,_e,it){if(!wt.API_URL||!wt.SESSION_PATH)return;const ot=cn(wt.API_URL+wt.SESSION_PATH);ot.params.push(`sku=${a||""}`),ot.params.push(`access_token=${it||wt.ACCESS_TOKEN||""}`);const lt={url:tn(ot),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(ht,pt){return Tl(Yr(ht,{method:"GET"}),pt)}(lt,ht=>{this.pendingRequest=null,_e(ht),this.saveEventData(),this.processRequests(it)})}getSessionAPI(j,a,_e,it){this.skuToken=a,this.errorCb=it,wt.SESSION_PATH&&wt.API_URL&&(_e||wt.ACCESS_TOKEN?this.queueRequest({id:j,timestamp:Date.now()},_e):this.errorCb(new Error(gr)))}processRequests(j){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:_e}=this.queue.shift();a&&this.success[a]||this.getSession(_e,this.skuToken,it=>{it?this.errorCb(it):a&&(this.success[a]=!0)},j)}},Fo=Bs.getSessionAPI.bind(Bs),ds=new Set,Zl={create:"create",load:"load",fullLoad:"fullLoad"},$m={mark(j){ut.performance.mark(j)},measure(j,a,_e){ut.performance.measure(j,a,_e)}};function Bp(j){const a=j.name.split("?")[0];return Cr(a)&&a.includes("mapbox-gl.js")?"javascript":Cr(a)&&a.includes("mapbox-gl.css")?"css":function(_e){return wt.API_FONTS_REGEX.test(_e)}(a)?"fontRange":Dr(a)?"sprite":br(a)?"style":function(_e){return wt.API_TILEJSON_REGEX.test(_e)}(a)?"tilejson":"other"}const Yn=ut.performance;function Qu(j){const a=j?j.url.toString():void 0;return Yn.getEntriesByName(a)}let Xl,Fp,Ju,Vr;const un={now:()=>Ju!==void 0?Ju:ut.performance.now(),setNow(j){Ju=j},restoreNow(){Ju=void 0},frame(j){const a=ut.requestAnimationFrame(j);return{cancel:()=>ut.cancelAnimationFrame(a)}},getImageData(j,a=0){const{width:_e,height:it}=j;Vr||(Vr=ut.document.createElement("canvas"));const ot=Vr.getContext("2d",{willReadFrequently:!0});if(!ot)throw new Error("failed to create canvas 2d context");return(_e>Vr.width||it>Vr.height)&&(Vr.width=_e,Vr.height=it),ot.clearRect(-a,-a,_e+2*a,it+2*a),ot.drawImage(j,0,0,_e,it),ot.getImageData(-a,-a,_e+2*a,it+2*a)},resolveURL:j=>(Xl||(Xl=ut.document.createElement("a")),Xl.href=j,Xl.href),get devicePixelRatio(){return ut.devicePixelRatio},get prefersReducedMotion(){return!!ut.matchMedia&&(Fp==null&&(Fp=ut.matchMedia("(prefers-reduced-motion: reduce)")),Fp.matches)}};function kn(j,a,_e){_e[j]&&_e[j].indexOf(a)!==-1||(_e[j]=_e[j]||[],_e[j].push(a))}function Ro(j,a,_e){if(_e&&_e[j]){const it=_e[j].indexOf(a);it!==-1&&_e[j].splice(it,1)}}class To{constructor(a,_e={}){Yr(this,_e),this.type=a}}class Vo extends To{constructor(a,_e={}){super("error",Yr({error:a},_e))}}class Ds{on(a,_e){return this._listeners=this._listeners||{},kn(a,_e,this._listeners),this}off(a,_e){return Ro(a,_e,this._listeners),Ro(a,_e,this._oneTimeListeners),this}once(a,_e){return _e?(this._oneTimeListeners=this._oneTimeListeners||{},kn(a,_e,this._oneTimeListeners),this):new Promise(it=>this.once(a,it))}fire(a,_e){typeof a=="string"&&(a=new To(a,_e||{}));const it=a.type;if(this.listens(it)){a.target=this;const ot=this._listeners&&this._listeners[it]?this._listeners[it].slice():[];for(const pt of ot)pt.call(this,a);const lt=this._oneTimeListeners&&this._oneTimeListeners[it]?this._oneTimeListeners[it].slice():[];for(const pt of lt)Ro(it,pt,this._oneTimeListeners),pt.call(this,a);const ht=this._eventedParent;ht&&(Yr(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ht.fire(a))}else a instanceof Vo&&console.error(a.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,_e){return this._eventedParent=a,this._eventedParentData=_e,this}}var jr=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Cl(j,...a){for(const _e of a)for(const it in _e)j[it]=_e[it];return j}function Uo(j){return j instanceof Number||j instanceof String||j instanceof Boolean?j.valueOf():j}function os(j){if(Array.isArray(j))return j.map(os);if(j instanceof Object&&!(j instanceof Number||j instanceof String||j instanceof Boolean)){const a={};for(const _e in j)a[_e]=os(j[_e]);return a}return Uo(j)}class l0 extends Error{constructor(a,_e){super(_e),this.message=_e,this.key=a}}var ga=l0;class zm{constructor(a,_e=[]){this.parent=a,this.bindings={};for(const[it,ot]of _e)this.bindings[it]=ot}concat(a){return new zm(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}var c0=zm;const Eu={kind:"null"},gn={kind:"number"},Zn={kind:"string"},Gn={kind:"boolean"},$s={kind:"color"},Zs={kind:"object"},Hn={kind:"value"},zs={kind:"collator"},_d={kind:"formatted"},ou={kind:"resolvedImage"};function Fs(j,a){return{kind:"array",itemType:j,N:a}}function xo(j){if(j.kind==="array"){const a=xo(j.itemType);return typeof j.N=="number"?`array<${a}, ${j.N}>`:j.itemType.kind==="value"?"array":`array<${a}>`}return j.kind}const h0=[Eu,gn,Zn,Gn,$s,_d,Zs,Fs(Hn),ou];function Pl(j,a){if(a.kind==="error")return null;if(j.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Pl(j.itemType,a.itemType))&&(typeof j.N!="number"||j.N===a.N))return null}else{if(j.kind===a.kind)return null;if(j.kind==="value"){for(const _e of h0)if(!Pl(_e,a))return null}}return`Expected ${xo(j)} but found ${xo(a)} instead.`}function ep(j,a){return a.some(_e=>_e.kind===j.kind)}function tp(j,a){return a.some(_e=>_e==="null"?j===null:_e==="array"?Array.isArray(j):_e==="object"?j&&!Array.isArray(j)&&typeof j=="object":_e===typeof j)}var Om,u0={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ip(j){return(j=Math.round(j))<0?0:j>255?255:j}function rp(j){return ip(j[j.length-1]==="%"?parseFloat(j)/100*255:parseInt(j))}function Vp(j){return(a=j[j.length-1]==="%"?parseFloat(j)/100:parseFloat(j))<0?0:a>1?1:a;var a}function Su(j,a,_e){return _e<0?_e+=1:_e>1&&(_e-=1),6*_e<1?j+(a-j)*_e*6:2*_e<1?a:3*_e<2?j+(a-j)*(2/3-_e)*6:j}try{Om={}.parseCSSColor=function(j){var a,_e=j.replace(/ /g,"").toLowerCase();if(_e in u0)return u0[_e].slice();if(_e[0]==="#")return _e.length===4?(a=parseInt(_e.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:_e.length===7&&(a=parseInt(_e.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var it=_e.indexOf("("),ot=_e.indexOf(")");if(it!==-1&&ot+1===_e.length){var lt=_e.substr(0,it),ht=_e.substr(it+1,ot-(it+1)).split(","),pt=1;switch(lt){case"rgba":if(ht.length!==4)return null;pt=Vp(ht.pop());case"rgb":return ht.length!==3?null:[rp(ht[0]),rp(ht[1]),rp(ht[2]),pt];case"hsla":if(ht.length!==4)return null;pt=Vp(ht.pop());case"hsl":if(ht.length!==3)return null;var gt=(parseFloat(ht[0])%360+360)%360/360,yt=Vp(ht[1]),Et=Vp(ht[2]),Pt=Et<=.5?Et*(yt+1):Et+yt-Et*yt,Rt=2*Et-Pt;return[ip(255*Su(Rt,Pt,gt+1/3)),ip(255*Su(Rt,Pt,gt)),ip(255*Su(Rt,Pt,gt-1/3)),pt];default:return null}}return null}}catch(j){}class ks{constructor(a,_e,it,ot=1){this.r=a,this.g=_e,this.b=it,this.a=ot}static parse(a){if(!a)return;if(a instanceof ks)return a;if(typeof a!="string")return;const _e=Om(a);return _e?new ks(_e[0]/255*_e[3],_e[1]/255*_e[3],_e[2]/255*_e[3],_e[3]):void 0}toString(){const[a,_e,it,ot]=this.toArray();return`rgba(${Math.round(a)},${Math.round(_e)},${Math.round(it)},${ot})`}toArray(){const{r:a,g:_e,b:it,a:ot}=this;return ot===0?[0,0,0,0]:[255*a/ot,255*_e/ot,255*it/ot,ot]}toArray01(){const{r:a,g:_e,b:it,a:ot}=this;return ot===0?[0,0,0,0]:[a/ot,_e/ot,it/ot,ot]}toArray01PremultipliedAlpha(){const{r:a,g:_e,b:it,a:ot}=this;return[a,_e,it,ot]}}ks.black=new ks(0,0,0,1),ks.white=new ks(1,1,1,1),ks.transparent=new ks(0,0,0,0),ks.red=new ks(1,0,0,1),ks.blue=new ks(0,0,1,1);var No=ks;class Bm{constructor(a,_e,it){this.sensitivity=a?_e?"variant":"case":_e?"accent":"base",this.locale=it,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,_e){return this.collator.compare(a,_e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Fm{constructor(a,_e,it,ot,lt){this.text=a.normalize?a.normalize():a,this.image=_e,this.scale=it,this.fontStack=ot,this.textColor=lt}}class Cs{constructor(a){this.sections=a}static fromString(a){return new Cs([new Fm(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Cs?a:Cs.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const _e of this.sections){if(_e.image){a.push(["image",_e.image.name]);continue}a.push(_e.text);const it={};_e.fontStack&&(it["text-font"]=["literal",_e.fontStack.split(",")]),_e.scale&&(it["font-scale"]=_e.scale),_e.textColor&&(it["text-color"]=["rgba"].concat(_e.textColor.toArray())),a.push(it)}return a}}class Vs{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Vs({name:a,available:!1}):null}serialize(){return["image",this.name]}}function d0(j,a,_e,it){return typeof j=="number"&&j>=0&&j<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof _e=="number"&&_e>=0&&_e<=255?it===void 0||typeof it=="number"&&it>=0&&it<=1?null:`Invalid rgba value [${[j,a,_e,it].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof it=="number"?[j,a,_e,it]:[j,a,_e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function np(j){if(j===null||typeof j=="string"||typeof j=="boolean"||typeof j=="number"||j instanceof No||j instanceof Bm||j instanceof Cs||j instanceof Vs)return!0;if(Array.isArray(j)){for(const a of j)if(!np(a))return!1;return!0}if(typeof j=="object"){for(const a in j)if(!np(j[a]))return!1;return!0}return!1}function Do(j){if(j===null)return Eu;if(typeof j=="string")return Zn;if(typeof j=="boolean")return Gn;if(typeof j=="number")return gn;if(j instanceof No)return $s;if(j instanceof Bm)return zs;if(j instanceof Cs)return _d;if(j instanceof Vs)return ou;if(Array.isArray(j)){const a=j.length;let _e;for(const it of j){const ot=Do(it);if(_e){if(_e===ot)continue;_e=Hn;break}_e=ot}return Fs(_e||Hn,a)}return Zs}function op(j){const a=typeof j;return j===null?"":a==="string"||a==="number"||a==="boolean"?String(j):j instanceof No||j instanceof Cs||j instanceof Vs?j.toString():JSON.stringify(j)}class Vm{constructor(a,_e){this.type=a,this.value=_e}static parse(a,_e){if(a.length!==2)return _e.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!np(a[1]))return _e.error("invalid value");const it=a[1];let ot=Do(it);const lt=_e.expectedType;return ot.kind!=="array"||ot.N!==0||!lt||lt.kind!=="array"||typeof lt.N=="number"&&lt.N!==0||(ot=lt),new Vm(ot,it)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof No?["rgba"].concat(this.value.toArray()):this.value instanceof Cs?this.value.serialize():this.value}}var su=Vm,ps=class{constructor(j){this.name="ExpressionEvaluationError",this.message=j}toJSON(){return this.message}};const Nm={string:Zn,number:gn,boolean:Gn,object:Zs};class jm{constructor(a,_e){this.type=a,this.args=_e}static parse(a,_e){if(a.length<2)return _e.error("Expected at least one argument.");let it,ot=1;const lt=a[0];if(lt==="array"){let pt,gt;if(a.length>2){const yt=a[1];if(typeof yt!="string"||!(yt in Nm)||yt==="object")return _e.error('The item type argument of "array" must be one of string, number, boolean',1);pt=Nm[yt],ot++}else pt=Hn;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return _e.error('The length argument to "array" must be a positive integer literal',2);gt=a[2],ot++}it=Fs(pt,gt)}else it=Nm[lt];const ht=[];for(;ot<a.length;ot++){const pt=_e.parse(a[ot],ot,Hn);if(!pt)return null;ht.push(pt)}return new jm(it,ht)}evaluate(a){for(let _e=0;_e<this.args.length;_e++){const it=this.args[_e].evaluate(a);if(!Pl(this.type,Do(it)))return it;if(_e===this.args.length-1)throw new ps(`Expected value to be of type ${xo(this.type)}, but found ${xo(Do(it))} instead.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,_e=[a.kind];if(a.kind==="array"){const it=a.itemType;if(it.kind==="string"||it.kind==="number"||it.kind==="boolean"){_e.push(it.kind);const ot=a.N;(typeof ot=="number"||this.args.length>1)&&_e.push(ot)}}return _e.concat(this.args.map(it=>it.serialize()))}}var Al=jm;class Yl{constructor(a){this.type=_d,this.sections=a}static parse(a,_e){if(a.length<2)return _e.error("Expected at least one argument.");const it=a[1];if(!Array.isArray(it)&&typeof it=="object")return _e.error("First argument must be an image or text section.");const ot=[];let lt=!1;for(let ht=1;ht<=a.length-1;++ht){const pt=a[ht];if(lt&&typeof pt=="object"&&!Array.isArray(pt)){lt=!1;let gt=null;if(pt["font-scale"]&&(gt=_e.parse(pt["font-scale"],1,gn),!gt))return null;let yt=null;if(pt["text-font"]&&(yt=_e.parse(pt["text-font"],1,Fs(Zn)),!yt))return null;let Et=null;if(pt["text-color"]&&(Et=_e.parse(pt["text-color"],1,$s),!Et))return null;const Pt=ot[ot.length-1];Pt.scale=gt,Pt.font=yt,Pt.textColor=Et}else{const gt=_e.parse(a[ht],1,Hn);if(!gt)return null;const yt=gt.type.kind;if(yt!=="string"&&yt!=="value"&&yt!=="null"&&yt!=="resolvedImage")return _e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");lt=!0,ot.push({content:gt,scale:null,font:null,textColor:null})}}return new Yl(ot)}evaluate(a){return new Cs(this.sections.map(_e=>{const it=_e.content.evaluate(a);return Do(it)===ou?new Fm("",it,null,null,null):new Fm(op(it),null,_e.scale?_e.scale.evaluate(a):null,_e.font?_e.font.evaluate(a).join(","):null,_e.textColor?_e.textColor.evaluate(a):null)}))}eachChild(a){for(const _e of this.sections)a(_e.content),_e.scale&&a(_e.scale),_e.font&&a(_e.font),_e.textColor&&a(_e.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const _e of this.sections){a.push(_e.content.serialize());const it={};_e.scale&&(it["font-scale"]=_e.scale.serialize()),_e.font&&(it["text-font"]=_e.font.serialize()),_e.textColor&&(it["text-color"]=_e.textColor.serialize()),a.push(it)}return a}}class Np{constructor(a){this.type=ou,this.input=a}static parse(a,_e){if(a.length!==2)return _e.error("Expected two arguments.");const it=_e.parse(a[1],1,Zn);return it?new Np(it):_e.error("No image name provided.")}evaluate(a){const _e=this.input.evaluate(a),it=Vs.fromString(_e);return it&&a.availableImages&&(it.available=a.availableImages.indexOf(_e)>-1),it}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Lv={"to-boolean":Gn,"to-color":$s,"to-number":gn,"to-string":Zn};class Um{constructor(a,_e){this.type=a,this.args=_e}static parse(a,_e){if(a.length<2)return _e.error("Expected at least one argument.");const it=a[0];if((it==="to-boolean"||it==="to-string")&&a.length!==2)return _e.error("Expected one argument.");const ot=Lv[it],lt=[];for(let ht=1;ht<a.length;ht++){const pt=_e.parse(a[ht],ht,Hn);if(!pt)return null;lt.push(pt)}return new Um(ot,lt)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let _e,it;for(const ot of this.args){if(_e=ot.evaluate(a),it=null,_e instanceof No)return _e;if(typeof _e=="string"){const lt=a.parseColor(_e);if(lt)return lt}else if(Array.isArray(_e)&&(it=_e.length<3||_e.length>4?`Invalid rbga value ${JSON.stringify(_e)}: expected an array containing either three or four numeric values.`:d0(_e[0],_e[1],_e[2],_e[3]),!it))return new No(_e[0]/255,_e[1]/255,_e[2]/255,_e[3])}throw new ps(it||`Could not parse color from value '${typeof _e=="string"?_e:String(JSON.stringify(_e))}'`)}if(this.type.kind==="number"){let _e=null;for(const it of this.args){if(_e=it.evaluate(a),_e===null)return 0;const ot=Number(_e);if(!isNaN(ot))return ot}throw new ps(`Could not convert ${JSON.stringify(_e)} to number.`)}return this.type.kind==="formatted"?Cs.fromString(op(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Vs.fromString(op(this.args[0].evaluate(a))):op(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Yl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Np(this.args[0]).serialize();const a=[`to-${this.type.kind}`];return this.eachChild(_e=>{a.push(_e.serialize())}),a}}var Tu=Um;const _a=["Unknown","Point","LineString","Polygon"];var Gm=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?_a[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const j=this.featureDistanceData.center,a=this.featureDistanceData.scale,{x:_e,y:it}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(_e*a-j[0])+this.featureDistanceData.bearing[1]*(it*a-j[1])}return 0}parseColor(j){let a=this._parseColorCache[j];return a||(a=this._parseColorCache[j]=No.parse(j)),a}};class au{constructor(a,_e,it,ot){this.name=a,this.type=_e,this._evaluate=it,this.args=ot}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,_e){const it=a[0],ot=au.definitions[it];if(!ot)return _e.error(`Unknown expression "${it}". If you wanted a literal array, use ["literal", [...]].`,0);const lt=Array.isArray(ot)?ot[0]:ot.type,ht=Array.isArray(ot)?[[ot[1],ot[2]]]:ot.overloads,pt=ht.filter(([yt])=>!Array.isArray(yt)||yt.length===a.length-1);let gt=null;for(const[yt,Et]of pt){gt=new Ym(_e.registry,_e.path,null,_e.scope);const Pt=[];let Rt=!1;for(let zt=1;zt<a.length;zt++){const Ot=a[zt],Ut=Array.isArray(yt)?yt[zt-1]:yt.type,Kt=gt.parse(Ot,1+Pt.length,Ut);if(!Kt){Rt=!0;break}Pt.push(Kt)}if(!Rt)if(Array.isArray(yt)&&yt.length!==Pt.length)gt.error(`Expected ${yt.length} arguments, but found ${Pt.length} instead.`);else{for(let zt=0;zt<Pt.length;zt++){const Ot=Array.isArray(yt)?yt[zt]:yt.type,Ut=Pt[zt];gt.concat(zt+1).checkSubtype(Ot,Ut.type)}if(gt.errors.length===0)return new au(it,lt,Et,Pt)}}if(pt.length===1)_e.errors.push(...gt.errors);else{const yt=(pt.length?pt:ht).map(([Pt])=>{return Rt=Pt,Array.isArray(Rt)?`(${Rt.map(xo).join(", ")})`:`(${xo(Rt.type)}...)`;var Rt}).join(" | "),Et=[];for(let Pt=1;Pt<a.length;Pt++){const Rt=_e.parse(a[Pt],1+Et.length);if(!Rt)return null;Et.push(xo(Rt.type))}_e.error(`Expected arguments of type ${yt}, but found (${Et.join(", ")}) instead.`)}return null}static register(a,_e){au.definitions=_e;for(const it in _e)a[it]=au}}var Il=au;class sp{constructor(a,_e,it){this.type=zs,this.locale=it,this.caseSensitive=a,this.diacriticSensitive=_e}static parse(a,_e){if(a.length!==2)return _e.error("Expected one argument.");const it=a[1];if(typeof it!="object"||Array.isArray(it))return _e.error("Collator options argument must be an object.");const ot=_e.parse(it["case-sensitive"]!==void 0&&it["case-sensitive"],1,Gn);if(!ot)return null;const lt=_e.parse(it["diacritic-sensitive"]!==void 0&&it["diacritic-sensitive"],1,Gn);if(!lt)return null;let ht=null;return it.locale&&(ht=_e.parse(it.locale,1,Zn),!ht)?null:new sp(ot,lt,ht)}evaluate(a){return new Bm(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}const Ml=8192;function jp(j,a){j[0]=Math.min(j[0],a[0]),j[1]=Math.min(j[1],a[1]),j[2]=Math.max(j[2],a[0]),j[3]=Math.max(j[3],a[1])}function ku(j,a){return!(j[0]<=a[0]||j[2]>=a[2]||j[1]<=a[1]||j[3]>=a[3])}function ap(j,a){const _e=(180+j[0])/360,it=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+j[1]*Math.PI/360)))/360,ot=Math.pow(2,a.z);return[Math.round(_e*ot*Ml),Math.round(it*ot*Ml)]}function p0(j,a,_e){const it=j[0]-a[0],ot=j[1]-a[1],lt=j[0]-_e[0],ht=j[1]-_e[1];return it*ht-lt*ot==0&&it*lt<=0&&ot*ht<=0}function Up(j,a){let _e=!1;for(let ht=0,pt=a.length;ht<pt;ht++){const gt=a[ht];for(let yt=0,Et=gt.length;yt<Et-1;yt++){if(p0(j,gt[yt],gt[yt+1]))return!1;(ot=gt[yt])[1]>(it=j)[1]!=(lt=gt[yt+1])[1]>it[1]&&it[0]<(lt[0]-ot[0])*(it[1]-ot[1])/(lt[1]-ot[1])+ot[0]&&(_e=!_e)}}var it,ot,lt;return _e}function Hm(j,a){for(let _e=0;_e<a.length;_e++)if(Up(j,a[_e]))return!0;return!1}function qm(j,a,_e,it){const ot=it[0]-_e[0],lt=it[1]-_e[1],ht=(j[0]-_e[0])*lt-ot*(j[1]-_e[1]),pt=(a[0]-_e[0])*lt-ot*(a[1]-_e[1]);return ht>0&&pt<0||ht<0&&pt>0}function Cu(j,a,_e){for(const yt of _e)for(let Et=0;Et<yt.length-1;++Et)if((pt=[(ht=yt[Et+1])[0]-(lt=yt[Et])[0],ht[1]-lt[1]])[0]*(gt=[(ot=a)[0]-(it=j)[0],ot[1]-it[1]])[1]-pt[1]*gt[0]!=0&&qm(it,ot,lt,ht)&&qm(lt,ht,it,ot))return!0;var it,ot,lt,ht,pt,gt;return!1}function io(j,a){for(let _e=0;_e<j.length;++_e)if(!Up(j[_e],a))return!1;for(let _e=0;_e<j.length-1;++_e)if(Cu(j[_e],j[_e+1],a))return!1;return!0}function Rv(j,a){for(let _e=0;_e<a.length;_e++)if(io(j,a[_e]))return!0;return!1}function Wm(j,a,_e){const it=[];for(let ot=0;ot<j.length;ot++){const lt=[];for(let ht=0;ht<j[ot].length;ht++){const pt=ap(j[ot][ht],_e);jp(a,pt),lt.push(pt)}it.push(lt)}return it}function f0(j,a,_e){const it=[];for(let ot=0;ot<j.length;ot++){const lt=Wm(j[ot],a,_e);it.push(lt)}return it}function Zm(j,a,_e,it){if(j[0]<_e[0]||j[0]>_e[2]){const ot=.5*it;let lt=j[0]-_e[0]>ot?-it:_e[0]-j[0]>ot?it:0;lt===0&&(lt=j[0]-_e[2]>ot?-it:_e[2]-j[0]>ot?it:0),j[0]+=lt}jp(a,j)}function m0(j,a,_e,it){const ot=Math.pow(2,it.z)*Ml,lt=[it.x*Ml,it.y*Ml],ht=[];if(!j)return ht;for(const pt of j)for(const gt of pt){const yt=[gt.x+lt[0],gt.y+lt[1]];Zm(yt,a,_e,ot),ht.push(yt)}return ht}function Xm(j,a,_e,it){const ot=Math.pow(2,it.z)*Ml,lt=[it.x*Ml,it.y*Ml],ht=[];if(!j)return ht;for(const gt of j){const yt=[];for(const Et of gt){const Pt=[Et.x+lt[0],Et.y+lt[1]];jp(a,Pt),yt.push(Pt)}ht.push(yt)}if(a[2]-a[0]<=ot/2){(pt=a)[0]=pt[1]=1/0,pt[2]=pt[3]=-1/0;for(const gt of ht)for(const yt of gt)Zm(yt,a,_e,ot)}var pt;return ht}class Pu{constructor(a,_e){this.type=Gn,this.geojson=a,this.geometries=_e}static parse(a,_e){if(a.length!==2)return _e.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(np(a[1])){const it=a[1];if(it.type==="FeatureCollection")for(let ot=0;ot<it.features.length;++ot){const lt=it.features[ot].geometry.type;if(lt==="Polygon"||lt==="MultiPolygon")return new Pu(it,it.features[ot].geometry)}else if(it.type==="Feature"){const ot=it.geometry.type;if(ot==="Polygon"||ot==="MultiPolygon")return new Pu(it,it.geometry)}else if(it.type==="Polygon"||it.type==="MultiPolygon")return new Pu(it,it)}return _e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(_e,it){const ot=[1/0,1/0,-1/0,-1/0],lt=[1/0,1/0,-1/0,-1/0],ht=_e.canonicalID();if(!ht)return!1;if(it.type==="Polygon"){const pt=Wm(it.coordinates,lt,ht),gt=m0(_e.geometry(),ot,lt,ht);if(!ku(ot,lt))return!1;for(const yt of gt)if(!Up(yt,pt))return!1}if(it.type==="MultiPolygon"){const pt=f0(it.coordinates,lt,ht),gt=m0(_e.geometry(),ot,lt,ht);if(!ku(ot,lt))return!1;for(const yt of gt)if(!Hm(yt,pt))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(_e,it){const ot=[1/0,1/0,-1/0,-1/0],lt=[1/0,1/0,-1/0,-1/0],ht=_e.canonicalID();if(!ht)return!1;if(it.type==="Polygon"){const pt=Wm(it.coordinates,lt,ht),gt=Xm(_e.geometry(),ot,lt,ht);if(!ku(ot,lt))return!1;for(const yt of gt)if(!io(yt,pt))return!1}if(it.type==="MultiPolygon"){const pt=f0(it.coordinates,lt,ht),gt=Xm(_e.geometry(),ot,lt,ht);if(!ku(ot,lt))return!1;for(const yt of gt)if(!Rv(yt,pt))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Gp=Pu;function Au(j){if(j instanceof Il&&(j.name==="get"&&j.args.length===1||j.name==="feature-state"||j.name==="has"&&j.args.length===1||j.name==="properties"||j.name==="geometry-type"||j.name==="id"||/^filter-/.test(j.name))||j instanceof Gp)return!1;let a=!0;return j.eachChild(_e=>{a&&!Au(_e)&&(a=!1)}),a}function Ll(j){if(j instanceof Il&&j.name==="feature-state")return!1;let a=!0;return j.eachChild(_e=>{a&&!Ll(_e)&&(a=!1)}),a}function lu(j,a){if(j instanceof Il&&a.indexOf(j.name)>=0)return!1;let _e=!0;return j.eachChild(it=>{_e&&!lu(it,a)&&(_e=!1)}),_e}class Hp{constructor(a,_e){this.type=_e.type,this.name=a,this.boundExpression=_e}static parse(a,_e){if(a.length!==2||typeof a[1]!="string")return _e.error("'var' expression requires exactly one string literal argument.");const it=a[1];return _e.scope.has(it)?new Hp(it,_e.scope.get(it)):_e.error(`Unknown variable "${it}". Make sure "${it}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var g0=Hp;class lp{constructor(a,_e=[],it,ot=new c0,lt=[]){this.registry=a,this.path=_e,this.key=_e.map(ht=>`[${ht}]`).join(""),this.scope=ot,this.errors=lt,this.expectedType=it}parse(a,_e,it,ot,lt={}){return _e?this.concat(_e,it,ot)._parse(a,lt):this._parse(a,lt)}_parse(a,_e){function it(ot,lt,ht){return ht==="assert"?new Al(lt,[ot]):ht==="coerce"?new Tu(lt,[ot]):ot}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ot=a[0];if(typeof ot!="string")return this.error(`Expression name must be a string, but found ${typeof ot} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const lt=this.registry[ot];if(lt){let ht=lt.parse(a,this);if(!ht)return null;if(this.expectedType){const pt=this.expectedType,gt=ht.type;if(pt.kind!=="string"&&pt.kind!=="number"&&pt.kind!=="boolean"&&pt.kind!=="object"&&pt.kind!=="array"||gt.kind!=="value")if(pt.kind!=="color"&&pt.kind!=="formatted"&&pt.kind!=="resolvedImage"||gt.kind!=="value"&&gt.kind!=="string"){if(this.checkSubtype(pt,gt))return null}else ht=it(ht,pt,_e.typeAnnotation||"coerce");else ht=it(ht,pt,_e.typeAnnotation||"assert")}if(!(ht instanceof su)&&ht.type.kind!=="resolvedImage"&&Km(ht)){const pt=new Gm;try{ht=new su(ht.type,ht.evaluate(pt))}catch(gt){return this.error(gt.message),null}}return ht}return this.error(`Unknown expression "${ot}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,_e,it){const ot=typeof a=="number"?this.path.concat(a):this.path,lt=it?this.scope.concat(it):this.scope;return new lp(this.registry,ot,_e||null,lt,this.errors)}error(a,..._e){const it=`${this.key}${_e.map(ot=>`[${ot}]`).join("")}`;this.errors.push(new ga(it,a))}checkSubtype(a,_e){const it=Pl(a,_e);return it&&this.error(it),it}}var Ym=lp;function Km(j){if(j instanceof g0)return Km(j.boundExpression);if(j instanceof Il&&j.name==="error"||j instanceof sp||j instanceof Gp)return!1;const a=j instanceof Tu||j instanceof Al;let _e=!0;return j.eachChild(it=>{_e=a?_e&&Km(it):_e&&it instanceof su}),!!_e&&Au(j)&&lu(j,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function qp(j,a){const _e=j.length-1;let it,ot,lt=0,ht=_e,pt=0;for(;lt<=ht;)if(pt=Math.floor((lt+ht)/2),it=j[pt],ot=j[pt+1],it<=a){if(pt===_e||a<ot)return pt;lt=pt+1}else{if(!(it>a))throw new ps("Input is not a number.");ht=pt-1}return 0}class Wp{constructor(a,_e,it){this.type=a,this.input=_e,this.labels=[],this.outputs=[];for(const[ot,lt]of it)this.labels.push(ot),this.outputs.push(lt)}static parse(a,_e){if(a.length-1<4)return _e.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return _e.error("Expected an even number of arguments.");const it=_e.parse(a[1],1,gn);if(!it)return null;const ot=[];let lt=null;_e.expectedType&&_e.expectedType.kind!=="value"&&(lt=_e.expectedType);for(let ht=1;ht<a.length;ht+=2){const pt=ht===1?-1/0:a[ht],gt=a[ht+1],yt=ht,Et=ht+1;if(typeof pt!="number")return _e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',yt);if(ot.length&&ot[ot.length-1][0]>=pt)return _e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',yt);const Pt=_e.parse(gt,Et,lt);if(!Pt)return null;lt=lt||Pt.type,ot.push([pt,Pt])}return new Wp(lt,it,ot)}evaluate(a){const _e=this.labels,it=this.outputs;if(_e.length===1)return it[0].evaluate(a);const ot=this.input.evaluate(a);if(ot<=_e[0])return it[0].evaluate(a);const lt=_e.length;return ot>=_e[lt-1]?it[lt-1].evaluate(a):it[qp(_e,ot)].evaluate(a)}eachChild(a){a(this.input);for(const _e of this.outputs)a(_e)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let _e=0;_e<this.labels.length;_e++)_e>0&&a.push(this.labels[_e]),a.push(this.outputs[_e].serialize());return a}}var Qm=Wp;function Kn(j,a,_e){return j*(1-_e)+a*_e}var cp=Object.freeze({__proto__:null,array:function(j,a,_e){return j.map((it,ot)=>Kn(it,a[ot],_e))},color:function(j,a,_e){return new No(Kn(j.r,a.r,_e),Kn(j.g,a.g,_e),Kn(j.b,a.b,_e),Kn(j.a,a.a,_e))},number:Kn});const y0=.95047,Jm=1.08883,v0=4/29,cu=6/29,_g=3*cu*cu,Dv=cu*cu*cu,$v=Math.PI/180,zv=180/Math.PI;function ey(j){return j>Dv?Math.pow(j,1/3):j/_g+v0}function ty(j){return j>cu?j*j*j:_g*(j-v0)}function iy(j){return 255*(j<=.0031308?12.92*j:1.055*Math.pow(j,1/2.4)-.055)}function Zp(j){return(j/=255)<=.04045?j/12.92:Math.pow((j+.055)/1.055,2.4)}function _0(j){const a=Zp(j.r),_e=Zp(j.g),it=Zp(j.b),ot=ey((.4124564*a+.3575761*_e+.1804375*it)/y0),lt=ey((.2126729*a+.7151522*_e+.072175*it)/1);return{l:116*lt-16,a:500*(ot-lt),b:200*(lt-ey((.0193339*a+.119192*_e+.9503041*it)/Jm)),alpha:j.a}}function x0(j){let a=(j.l+16)/116,_e=isNaN(j.a)?a:a+j.a/500,it=isNaN(j.b)?a:a-j.b/200;return a=1*ty(a),_e=y0*ty(_e),it=Jm*ty(it),new No(iy(3.2404542*_e-1.5371385*a-.4985314*it),iy(-.969266*_e+1.8760108*a+.041556*it),iy(.0556434*_e-.2040259*a+1.0572252*it),j.alpha)}function Ov(j,a,_e){const it=a-j;return j+_e*(it>180||it<-180?it-360*Math.round(it/360):it)}const hp={forward:_0,reverse:x0,interpolate:function(j,a,_e){return{l:Kn(j.l,a.l,_e),a:Kn(j.a,a.a,_e),b:Kn(j.b,a.b,_e),alpha:Kn(j.alpha,a.alpha,_e)}}},Iu={forward:function(j){const{l:a,a:_e,b:it}=_0(j),ot=Math.atan2(it,_e)*zv;return{h:ot<0?ot+360:ot,c:Math.sqrt(_e*_e+it*it),l:a,alpha:j.a}},reverse:function(j){const a=j.h*$v,_e=j.c;return x0({l:j.l,a:Math.cos(a)*_e,b:Math.sin(a)*_e,alpha:j.alpha})},interpolate:function(j,a,_e){return{h:Ov(j.h,a.h,_e),c:Kn(j.c,a.c,_e),l:Kn(j.l,a.l,_e),alpha:Kn(j.alpha,a.alpha,_e)}}};var ry=Object.freeze({__proto__:null,hcl:Iu,lab:hp});class up{constructor(a,_e,it,ot,lt){this.type=a,this.operator=_e,this.interpolation=it,this.input=ot,this.labels=[],this.outputs=[];for(const[ht,pt]of lt)this.labels.push(ht),this.outputs.push(pt)}static interpolationFactor(a,_e,it,ot){let lt=0;if(a.name==="exponential")lt=ny(_e,a.base,it,ot);else if(a.name==="linear")lt=ny(_e,1,it,ot);else if(a.name==="cubic-bezier"){const ht=a.controlPoints;lt=new Ft(ht[0],ht[1],ht[2],ht[3]).solve(ny(_e,1,it,ot))}return lt}static parse(a,_e){let[it,ot,lt,...ht]=a;if(!Array.isArray(ot)||ot.length===0)return _e.error("Expected an interpolation type expression.",1);if(ot[0]==="linear")ot={name:"linear"};else if(ot[0]==="exponential"){const yt=ot[1];if(typeof yt!="number")return _e.error("Exponential interpolation requires a numeric base.",1,1);ot={name:"exponential",base:yt}}else{if(ot[0]!=="cubic-bezier")return _e.error(`Unknown interpolation type ${String(ot[0])}`,1,0);{const yt=ot.slice(1);if(yt.length!==4||yt.some(Et=>typeof Et!="number"||Et<0||Et>1))return _e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ot={name:"cubic-bezier",controlPoints:yt}}}if(a.length-1<4)return _e.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return _e.error("Expected an even number of arguments.");if(lt=_e.parse(lt,2,gn),!lt)return null;const pt=[];let gt=null;it==="interpolate-hcl"||it==="interpolate-lab"?gt=$s:_e.expectedType&&_e.expectedType.kind!=="value"&&(gt=_e.expectedType);for(let yt=0;yt<ht.length;yt+=2){const Et=ht[yt],Pt=ht[yt+1],Rt=yt+3,zt=yt+4;if(typeof Et!="number")return _e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Rt);if(pt.length&&pt[pt.length-1][0]>=Et)return _e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Rt);const Ot=_e.parse(Pt,zt,gt);if(!Ot)return null;gt=gt||Ot.type,pt.push([Et,Ot])}return gt.kind==="number"||gt.kind==="color"||gt.kind==="array"&&gt.itemType.kind==="number"&&typeof gt.N=="number"?new up(gt,it,ot,lt,pt):_e.error(`Type ${xo(gt)} is not interpolatable.`)}evaluate(a){const _e=this.labels,it=this.outputs;if(_e.length===1)return it[0].evaluate(a);const ot=this.input.evaluate(a);if(ot<=_e[0])return it[0].evaluate(a);const lt=_e.length;if(ot>=_e[lt-1])return it[lt-1].evaluate(a);const ht=qp(_e,ot),pt=up.interpolationFactor(this.interpolation,ot,_e[ht],_e[ht+1]),gt=it[ht].evaluate(a),yt=it[ht+1].evaluate(a);return this.operator==="interpolate"?cp[this.type.kind.toLowerCase()](gt,yt,pt):this.operator==="interpolate-hcl"?Iu.reverse(Iu.interpolate(Iu.forward(gt),Iu.forward(yt),pt)):hp.reverse(hp.interpolate(hp.forward(gt),hp.forward(yt),pt))}eachChild(a){a(this.input);for(const _e of this.outputs)a(_e)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const _e=[this.operator,a,this.input.serialize()];for(let it=0;it<this.labels.length;it++)_e.push(this.labels[it],this.outputs[it].serialize());return _e}}function ny(j,a,_e,it){const ot=it-_e,lt=j-_e;return ot===0?0:a===1?lt/ot:(Math.pow(a,lt)-1)/(Math.pow(a,ot)-1)}var xa=up;class Xp{constructor(a,_e){this.type=a,this.args=_e}static parse(a,_e){if(a.length<2)return _e.error("Expectected at least one argument.");let it=null;const ot=_e.expectedType;ot&&ot.kind!=="value"&&(it=ot);const lt=[];for(const pt of a.slice(1)){const gt=_e.parse(pt,1+lt.length,it,void 0,{typeAnnotation:"omit"});if(!gt)return null;it=it||gt.type,lt.push(gt)}const ht=ot&&lt.some(pt=>Pl(ot,pt.type));return new Xp(ht?Hn:it,lt)}evaluate(a){let _e,it=null,ot=0;for(const lt of this.args){if(ot++,it=lt.evaluate(a),it&&it instanceof Vs&&!it.available&&(_e||(_e=it),it=null,ot===this.args.length))return _e;if(it!==null)break}return it}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(_e=>{a.push(_e.serialize())}),a}}var oy=Xp;class Yp{constructor(a,_e){this.type=_e.type,this.bindings=[].concat(a),this.result=_e}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const _e of this.bindings)a(_e[1]);a(this.result)}static parse(a,_e){if(a.length<4)return _e.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const it=[];for(let lt=1;lt<a.length-1;lt+=2){const ht=a[lt];if(typeof ht!="string")return _e.error(`Expected string, but found ${typeof ht} instead.`,lt);if(/[^a-zA-Z0-9_]/.test(ht))return _e.error("Variable names must contain only alphanumeric characters or '_'.",lt);const pt=_e.parse(a[lt+1],lt+1);if(!pt)return null;it.push([ht,pt])}const ot=_e.parse(a[a.length-1],a.length-1,_e.expectedType,it);return ot?new Yp(it,ot):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[_e,it]of this.bindings)a.push(_e,it.serialize());return a.push(this.result.serialize()),a}}var b0=Yp;class sy{constructor(a,_e,it){this.type=a,this.index=_e,this.input=it}static parse(a,_e){if(a.length!==3)return _e.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const it=_e.parse(a[1],1,gn),ot=_e.parse(a[2],2,Fs(_e.expectedType||Hn));return it&&ot?new sy(ot.type.itemType,it,ot):null}evaluate(a){const _e=this.index.evaluate(a),it=this.input.evaluate(a);if(_e<0)throw new ps(`Array index out of bounds: ${_e} < 0.`);if(_e>=it.length)throw new ps(`Array index out of bounds: ${_e} > ${it.length-1}.`);if(_e!==Math.floor(_e))throw new ps(`Array index must be an integer, but found ${_e} instead.`);return it[_e]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Bv=sy;class ay{constructor(a,_e){this.type=Gn,this.needle=a,this.haystack=_e}static parse(a,_e){if(a.length!==3)return _e.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const it=_e.parse(a[1],1,Hn),ot=_e.parse(a[2],2,Hn);return it&&ot?ep(it.type,[Gn,Zn,gn,Eu,Hn])?new ay(it,ot):_e.error(`Expected first argument to be of type boolean, string, number or null, but found ${xo(it.type)} instead`):null}evaluate(a){const _e=this.needle.evaluate(a),it=this.haystack.evaluate(a);if(it==null)return!1;if(!tp(_e,["boolean","string","number","null"]))throw new ps(`Expected first argument to be of type boolean, string, number or null, but found ${xo(Do(_e))} instead.`);if(!tp(it,["string","array"]))throw new ps(`Expected second argument to be of type array or string, but found ${xo(Do(it))} instead.`);return it.indexOf(_e)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Kp=ay;class dp{constructor(a,_e,it){this.type=gn,this.needle=a,this.haystack=_e,this.fromIndex=it}static parse(a,_e){if(a.length<=2||a.length>=5)return _e.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const it=_e.parse(a[1],1,Hn),ot=_e.parse(a[2],2,Hn);if(!it||!ot)return null;if(!ep(it.type,[Gn,Zn,gn,Eu,Hn]))return _e.error(`Expected first argument to be of type boolean, string, number or null, but found ${xo(it.type)} instead`);if(a.length===4){const lt=_e.parse(a[3],3,gn);return lt?new dp(it,ot,lt):null}return new dp(it,ot)}evaluate(a){const _e=this.needle.evaluate(a),it=this.haystack.evaluate(a);if(!tp(_e,["boolean","string","number","null"]))throw new ps(`Expected first argument to be of type boolean, string, number or null, but found ${xo(Do(_e))} instead.`);if(!tp(it,["string","array"]))throw new ps(`Expected second argument to be of type array or string, but found ${xo(Do(it))} instead.`);if(this.fromIndex){const ot=this.fromIndex.evaluate(a);return it.indexOf(_e,ot)}return it.indexOf(_e)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var w0=dp;class ly{constructor(a,_e,it,ot,lt,ht){this.inputType=a,this.type=_e,this.input=it,this.cases=ot,this.outputs=lt,this.otherwise=ht}static parse(a,_e){if(a.length<5)return _e.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return _e.error("Expected an even number of arguments.");let it,ot;_e.expectedType&&_e.expectedType.kind!=="value"&&(ot=_e.expectedType);const lt={},ht=[];for(let yt=2;yt<a.length-1;yt+=2){let Et=a[yt];const Pt=a[yt+1];Array.isArray(Et)||(Et=[Et]);const Rt=_e.concat(yt);if(Et.length===0)return Rt.error("Expected at least one branch label.");for(const Ot of Et){if(typeof Ot!="number"&&typeof Ot!="string")return Rt.error("Branch labels must be numbers or strings.");if(typeof Ot=="number"&&Math.abs(Ot)>Number.MAX_SAFE_INTEGER)return Rt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ot=="number"&&Math.floor(Ot)!==Ot)return Rt.error("Numeric branch labels must be integer values.");if(it){if(Rt.checkSubtype(it,Do(Ot)))return null}else it=Do(Ot);if(lt[String(Ot)]!==void 0)return Rt.error("Branch labels must be unique.");lt[String(Ot)]=ht.length}const zt=_e.parse(Pt,yt,ot);if(!zt)return null;ot=ot||zt.type,ht.push(zt)}const pt=_e.parse(a[1],1,Hn);if(!pt)return null;const gt=_e.parse(a[a.length-1],a.length-1,ot);return gt?pt.type.kind!=="value"&&_e.concat(1).checkSubtype(it,pt.type)?null:new ly(it,ot,pt,lt,ht,gt):null}evaluate(a){const _e=this.input.evaluate(a);return(Do(_e)===this.inputType&&this.outputs[this.cases[_e]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],_e=Object.keys(this.cases).sort(),it=[],ot={};for(const ht of _e){const pt=ot[this.cases[ht]];pt===void 0?(ot[this.cases[ht]]=it.length,it.push([this.cases[ht],[ht]])):it[pt][1].push(ht)}const lt=ht=>this.inputType.kind==="number"?Number(ht):ht;for(const[ht,pt]of it)a.push(pt.length===1?lt(pt[0]):pt.map(lt)),a.push(this.outputs[ht].serialize());return a.push(this.otherwise.serialize()),a}}var Fv=ly;class cy{constructor(a,_e,it){this.type=a,this.branches=_e,this.otherwise=it}static parse(a,_e){if(a.length<4)return _e.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return _e.error("Expected an odd number of arguments.");let it;_e.expectedType&&_e.expectedType.kind!=="value"&&(it=_e.expectedType);const ot=[];for(let ht=1;ht<a.length-1;ht+=2){const pt=_e.parse(a[ht],ht,Gn);if(!pt)return null;const gt=_e.parse(a[ht+1],ht+1,it);if(!gt)return null;ot.push([pt,gt]),it=it||gt.type}const lt=_e.parse(a[a.length-1],a.length-1,it);return lt?new cy(it,ot,lt):null}evaluate(a){for(const[_e,it]of this.branches)if(_e.evaluate(a))return it.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[_e,it]of this.branches)a(_e),a(it);a(this.otherwise)}outputDefined(){return this.branches.every(([a,_e])=>_e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(_e=>{a.push(_e.serialize())}),a}}var E0=cy;class pp{constructor(a,_e,it,ot){this.type=a,this.input=_e,this.beginIndex=it,this.endIndex=ot}static parse(a,_e){if(a.length<=2||a.length>=5)return _e.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const it=_e.parse(a[1],1,Hn),ot=_e.parse(a[2],2,gn);if(!it||!ot)return null;if(!ep(it.type,[Fs(Hn),Zn,Hn]))return _e.error(`Expected first argument to be of type array or string, but found ${xo(it.type)} instead`);if(a.length===4){const lt=_e.parse(a[3],3,gn);return lt?new pp(it.type,it,ot,lt):null}return new pp(it.type,it,ot)}evaluate(a){const _e=this.input.evaluate(a),it=this.beginIndex.evaluate(a);if(!tp(_e,["string","array"]))throw new ps(`Expected first argument to be of type array or string, but found ${xo(Do(_e))} instead.`);if(this.endIndex){const ot=this.endIndex.evaluate(a);return _e.slice(it,ot)}return _e.slice(it)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var S0=pp;function Qp(j,a){return j==="=="||j==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function T0(j,a,_e,it){return it.compare(a,_e)===0}function Mu(j,a,_e){const it=j!=="=="&&j!=="!=";return class Fw{constructor(lt,ht,pt){this.type=Gn,this.lhs=lt,this.rhs=ht,this.collator=pt,this.hasUntypedArgument=lt.type.kind==="value"||ht.type.kind==="value"}static parse(lt,ht){if(lt.length!==3&&lt.length!==4)return ht.error("Expected two or three arguments.");const pt=lt[0];let gt=ht.parse(lt[1],1,Hn);if(!gt)return null;if(!Qp(pt,gt.type))return ht.concat(1).error(`"${pt}" comparisons are not supported for type '${xo(gt.type)}'.`);let yt=ht.parse(lt[2],2,Hn);if(!yt)return null;if(!Qp(pt,yt.type))return ht.concat(2).error(`"${pt}" comparisons are not supported for type '${xo(yt.type)}'.`);if(gt.type.kind!==yt.type.kind&&gt.type.kind!=="value"&&yt.type.kind!=="value")return ht.error(`Cannot compare types '${xo(gt.type)}' and '${xo(yt.type)}'.`);it&&(gt.type.kind==="value"&&yt.type.kind!=="value"?gt=new Al(yt.type,[gt]):gt.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new Al(gt.type,[yt])));let Et=null;if(lt.length===4){if(gt.type.kind!=="string"&&yt.type.kind!=="string"&&gt.type.kind!=="value"&&yt.type.kind!=="value")return ht.error("Cannot use collator to compare non-string types.");if(Et=ht.parse(lt[3],3,zs),!Et)return null}return new Fw(gt,yt,Et)}evaluate(lt){const ht=this.lhs.evaluate(lt),pt=this.rhs.evaluate(lt);if(it&&this.hasUntypedArgument){const gt=Do(ht),yt=Do(pt);if(gt.kind!==yt.kind||gt.kind!=="string"&&gt.kind!=="number")throw new ps(`Expected arguments for "${j}" to be (string, string) or (number, number), but found (${gt.kind}, ${yt.kind}) instead.`)}if(this.collator&&!it&&this.hasUntypedArgument){const gt=Do(ht),yt=Do(pt);if(gt.kind!=="string"||yt.kind!=="string")return a(lt,ht,pt)}return this.collator?_e(lt,ht,pt,this.collator.evaluate(lt)):a(lt,ht,pt)}eachChild(lt){lt(this.lhs),lt(this.rhs),this.collator&&lt(this.collator)}outputDefined(){return!0}serialize(){const lt=[j];return this.eachChild(ht=>{lt.push(ht.serialize())}),lt}}}const Vv=Mu("==",function(j,a,_e){return a===_e},T0),Nv=Mu("!=",function(j,a,_e){return a!==_e},function(j,a,_e,it){return!T0(0,a,_e,it)}),jv=Mu("<",function(j,a,_e){return a<_e},function(j,a,_e,it){return it.compare(a,_e)<0}),Uv=Mu(">",function(j,a,_e){return a>_e},function(j,a,_e,it){return it.compare(a,_e)>0}),Gv=Mu("<=",function(j,a,_e){return a<=_e},function(j,a,_e,it){return it.compare(a,_e)<=0}),k0=Mu(">=",function(j,a,_e){return a>=_e},function(j,a,_e,it){return it.compare(a,_e)>=0});class Jp{constructor(a,_e,it,ot,lt,ht){this.type=Zn,this.number=a,this.locale=_e,this.currency=it,this.unit=ot,this.minFractionDigits=lt,this.maxFractionDigits=ht}static parse(a,_e){if(a.length!==3)return _e.error("Expected two arguments.");const it=_e.parse(a[1],1,gn);if(!it)return null;const ot=a[2];if(typeof ot!="object"||Array.isArray(ot))return _e.error("NumberFormat options argument must be an object.");let lt=null;if(ot.locale&&(lt=_e.parse(ot.locale,1,Zn),!lt))return null;let ht=null;if(ot.currency&&(ht=_e.parse(ot.currency,1,Zn),!ht))return null;let pt=null;if(ot.unit&&(pt=_e.parse(ot.unit,1,Zn),!pt))return null;let gt=null;if(ot["min-fraction-digits"]&&(gt=_e.parse(ot["min-fraction-digits"],1,gn),!gt))return null;let yt=null;return ot["max-fraction-digits"]&&(yt=_e.parse(ot["max-fraction-digits"],1,gn),!yt)?null:new Jp(it,lt,ht,pt,gt,yt)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class Lu{constructor(a){this.type=gn,this.input=a}static parse(a,_e){if(a.length!==2)return _e.error(`Expected 1 argument, but found ${a.length-1} instead.`);const it=_e.parse(a[1],1);return it?it.type.kind!=="array"&&it.type.kind!=="string"&&it.type.kind!=="value"?_e.error(`Expected argument of type string or array, but found ${xo(it.type)} instead.`):new Lu(it):null}evaluate(a){const _e=this.input.evaluate(a);if(typeof _e=="string"||Array.isArray(_e))return _e.length;throw new ps(`Expected value to be of type string or array, but found ${xo(Do(_e))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(_e=>{a.push(_e.serialize())}),a}}const C0={"==":Vv,"!=":Nv,">":Uv,"<":jv,">=":k0,"<=":Gv,array:Al,at:Bv,boolean:Al,case:E0,coalesce:oy,collator:sp,format:Yl,image:Np,in:Kp,"index-of":w0,interpolate:xa,"interpolate-hcl":xa,"interpolate-lab":xa,length:Lu,let:b0,literal:su,match:Fv,number:Al,"number-format":Jp,object:Al,slice:S0,step:Qm,string:Al,"to-boolean":Tu,"to-color":Tu,"to-number":Tu,"to-string":Tu,var:g0,within:Gp};function P0(j,[a,_e,it,ot]){a=a.evaluate(j),_e=_e.evaluate(j),it=it.evaluate(j);const lt=ot?ot.evaluate(j):1,ht=d0(a,_e,it,lt);if(ht)throw new ps(ht);return new No(a/255*lt,_e/255*lt,it/255*lt,lt)}function Rl(j,a){return j in a}function _f(j,a){const _e=a[j];return _e===void 0?null:_e}function Ns(j){return{type:j}}Il.register(C0,{error:[{kind:"error"},[Zn],(j,[a])=>{throw new ps(a.evaluate(j))}],typeof:[Zn,[Hn],(j,[a])=>xo(Do(a.evaluate(j)))],"to-rgba":[Fs(gn,4),[$s],(j,[a])=>a.evaluate(j).toArray()],rgb:[$s,[gn,gn,gn],P0],rgba:[$s,[gn,gn,gn,gn],P0],has:{type:Gn,overloads:[[[Zn],(j,[a])=>Rl(a.evaluate(j),j.properties())],[[Zn,Zs],(j,[a,_e])=>Rl(a.evaluate(j),_e.evaluate(j))]]},get:{type:Hn,overloads:[[[Zn],(j,[a])=>_f(a.evaluate(j),j.properties())],[[Zn,Zs],(j,[a,_e])=>_f(a.evaluate(j),_e.evaluate(j))]]},"feature-state":[Hn,[Zn],(j,[a])=>_f(a.evaluate(j),j.featureState||{})],properties:[Zs,[],j=>j.properties()],"geometry-type":[Zn,[],j=>j.geometryType()],id:[Hn,[],j=>j.id()],zoom:[gn,[],j=>j.globals.zoom],pitch:[gn,[],j=>j.globals.pitch||0],"distance-from-center":[gn,[],j=>j.distanceFromCenter()],"heatmap-density":[gn,[],j=>j.globals.heatmapDensity||0],"line-progress":[gn,[],j=>j.globals.lineProgress||0],"sky-radial-progress":[gn,[],j=>j.globals.skyRadialProgress||0],accumulated:[Hn,[],j=>j.globals.accumulated===void 0?null:j.globals.accumulated],"+":[gn,Ns(gn),(j,a)=>{let _e=0;for(const it of a)_e+=it.evaluate(j);return _e}],"*":[gn,Ns(gn),(j,a)=>{let _e=1;for(const it of a)_e*=it.evaluate(j);return _e}],"-":{type:gn,overloads:[[[gn,gn],(j,[a,_e])=>a.evaluate(j)-_e.evaluate(j)],[[gn],(j,[a])=>-a.evaluate(j)]]},"/":[gn,[gn,gn],(j,[a,_e])=>a.evaluate(j)/_e.evaluate(j)],"%":[gn,[gn,gn],(j,[a,_e])=>a.evaluate(j)%_e.evaluate(j)],ln2:[gn,[],()=>Math.LN2],pi:[gn,[],()=>Math.PI],e:[gn,[],()=>Math.E],"^":[gn,[gn,gn],(j,[a,_e])=>Math.pow(a.evaluate(j),_e.evaluate(j))],sqrt:[gn,[gn],(j,[a])=>Math.sqrt(a.evaluate(j))],log10:[gn,[gn],(j,[a])=>Math.log(a.evaluate(j))/Math.LN10],ln:[gn,[gn],(j,[a])=>Math.log(a.evaluate(j))],log2:[gn,[gn],(j,[a])=>Math.log(a.evaluate(j))/Math.LN2],sin:[gn,[gn],(j,[a])=>Math.sin(a.evaluate(j))],cos:[gn,[gn],(j,[a])=>Math.cos(a.evaluate(j))],tan:[gn,[gn],(j,[a])=>Math.tan(a.evaluate(j))],asin:[gn,[gn],(j,[a])=>Math.asin(a.evaluate(j))],acos:[gn,[gn],(j,[a])=>Math.acos(a.evaluate(j))],atan:[gn,[gn],(j,[a])=>Math.atan(a.evaluate(j))],min:[gn,Ns(gn),(j,a)=>Math.min(...a.map(_e=>_e.evaluate(j)))],max:[gn,Ns(gn),(j,a)=>Math.max(...a.map(_e=>_e.evaluate(j)))],abs:[gn,[gn],(j,[a])=>Math.abs(a.evaluate(j))],round:[gn,[gn],(j,[a])=>{const _e=a.evaluate(j);return _e<0?-Math.round(-_e):Math.round(_e)}],floor:[gn,[gn],(j,[a])=>Math.floor(a.evaluate(j))],ceil:[gn,[gn],(j,[a])=>Math.ceil(a.evaluate(j))],"filter-==":[Gn,[Zn,Hn],(j,[a,_e])=>j.properties()[a.value]===_e.value],"filter-id-==":[Gn,[Hn],(j,[a])=>j.id()===a.value],"filter-type-==":[Gn,[Zn],(j,[a])=>j.geometryType()===a.value],"filter-<":[Gn,[Zn,Hn],(j,[a,_e])=>{const it=j.properties()[a.value],ot=_e.value;return typeof it==typeof ot&&it<ot}],"filter-id-<":[Gn,[Hn],(j,[a])=>{const _e=j.id(),it=a.value;return typeof _e==typeof it&&_e<it}],"filter->":[Gn,[Zn,Hn],(j,[a,_e])=>{const it=j.properties()[a.value],ot=_e.value;return typeof it==typeof ot&&it>ot}],"filter-id->":[Gn,[Hn],(j,[a])=>{const _e=j.id(),it=a.value;return typeof _e==typeof it&&_e>it}],"filter-<=":[Gn,[Zn,Hn],(j,[a,_e])=>{const it=j.properties()[a.value],ot=_e.value;return typeof it==typeof ot&&it<=ot}],"filter-id-<=":[Gn,[Hn],(j,[a])=>{const _e=j.id(),it=a.value;return typeof _e==typeof it&&_e<=it}],"filter->=":[Gn,[Zn,Hn],(j,[a,_e])=>{const it=j.properties()[a.value],ot=_e.value;return typeof it==typeof ot&&it>=ot}],"filter-id->=":[Gn,[Hn],(j,[a])=>{const _e=j.id(),it=a.value;return typeof _e==typeof it&&_e>=it}],"filter-has":[Gn,[Hn],(j,[a])=>a.value in j.properties()],"filter-has-id":[Gn,[],j=>j.id()!==null&&j.id()!==void 0],"filter-type-in":[Gn,[Fs(Zn)],(j,[a])=>a.value.indexOf(j.geometryType())>=0],"filter-id-in":[Gn,[Fs(Hn)],(j,[a])=>a.value.indexOf(j.id())>=0],"filter-in-small":[Gn,[Zn,Fs(Hn)],(j,[a,_e])=>_e.value.indexOf(j.properties()[a.value])>=0],"filter-in-large":[Gn,[Zn,Fs(Hn)],(j,[a,_e])=>function(it,ot,lt,ht){for(;lt<=ht;){const pt=lt+ht>>1;if(ot[pt]===it)return!0;ot[pt]>it?ht=pt-1:lt=pt+1}return!1}(j.properties()[a.value],_e.value,0,_e.value.length-1)],all:{type:Gn,overloads:[[[Gn,Gn],(j,[a,_e])=>a.evaluate(j)&&_e.evaluate(j)],[Ns(Gn),(j,a)=>{for(const _e of a)if(!_e.evaluate(j))return!1;return!0}]]},any:{type:Gn,overloads:[[[Gn,Gn],(j,[a,_e])=>a.evaluate(j)||_e.evaluate(j)],[Ns(Gn),(j,a)=>{for(const _e of a)if(_e.evaluate(j))return!0;return!1}]]},"!":[Gn,[Gn],(j,[a])=>!a.evaluate(j)],"is-supported-script":[Gn,[Zn],(j,[a])=>{const _e=j.globals&&j.globals.isSupportedScript;return!_e||_e(a.evaluate(j))}],upcase:[Zn,[Zn],(j,[a])=>a.evaluate(j).toUpperCase()],downcase:[Zn,[Zn],(j,[a])=>a.evaluate(j).toLowerCase()],concat:[Zn,Ns(Hn),(j,a)=>a.map(_e=>op(_e.evaluate(j))).join("")],"resolved-locale":[Zn,[zs],(j,[a])=>a.evaluate(j).resolvedLocale()]});var fp=C0;function A0(j){return{result:"success",value:j}}function hu(j){return{result:"error",value:j}}function Ru(j){return j["property-type"]==="data-driven"}function em(j){return!!j.expression&&j.expression.parameters.indexOf("zoom")>-1}function tm(j){return!!j.expression&&j.expression.interpolated}function Qn(j){return j instanceof Number?"number":j instanceof String?"string":j instanceof Boolean?"boolean":Array.isArray(j)?"array":j===null?"null":typeof j}function mp(j){return typeof j=="object"&&j!==null&&!Array.isArray(j)}function I0(j){return j}function im(j,a){const _e=a.type==="color",it=j.stops&&typeof j.stops[0][0]=="object",ot=it||!(it||j.property!==void 0),lt=j.type||(tm(a)?"exponential":"interval");if(_e&&((j=Cl({},j)).stops&&(j.stops=j.stops.map(yt=>[yt[0],No.parse(yt[1])])),j.default=No.parse(j.default?j.default:a.default)),j.colorSpace&&j.colorSpace!=="rgb"&&!ry[j.colorSpace])throw new Error(`Unknown color space: ${j.colorSpace}`);let ht,pt,gt;if(lt==="exponential")ht=Dl;else if(lt==="interval")ht=rm;else if(lt==="categorical"){ht=M0,pt=Object.create(null);for(const yt of j.stops)pt[yt[0]]=yt[1];gt=typeof j.stops[0][0]}else{if(lt!=="identity")throw new Error(`Unknown function type "${lt}"`);ht=L0}if(it){const yt={},Et=[];for(let zt=0;zt<j.stops.length;zt++){const Ot=j.stops[zt],Ut=Ot[0].zoom;yt[Ut]===void 0&&(yt[Ut]={zoom:Ut,type:j.type,property:j.property,default:j.default,stops:[]},Et.push(Ut)),yt[Ut].stops.push([Ot[0].value,Ot[1]])}const Pt=[];for(const zt of Et)Pt.push([yt[zt].zoom,im(yt[zt],a)]);const Rt={name:"linear"};return{kind:"composite",interpolationType:Rt,interpolationFactor:xa.interpolationFactor.bind(void 0,Rt),zoomStops:Pt.map(zt=>zt[0]),evaluate:({zoom:zt},Ot)=>Dl({stops:Pt,base:j.base},a,zt).evaluate(zt,Ot)}}if(ot){const yt=lt==="exponential"?{name:"exponential",base:j.base!==void 0?j.base:1}:null;return{kind:"camera",interpolationType:yt,interpolationFactor:xa.interpolationFactor.bind(void 0,yt),zoomStops:j.stops.map(Et=>Et[0]),evaluate:({zoom:Et})=>ht(j,a,Et,pt,gt)}}return{kind:"source",evaluate(yt,Et){const Pt=Et&&Et.properties?Et.properties[j.property]:void 0;return Pt===void 0?Du(j.default,a.default):ht(j,a,Pt,pt,gt)}}}function Du(j,a,_e){return j!==void 0?j:a!==void 0?a:_e!==void 0?_e:void 0}function M0(j,a,_e,it,ot){return Du(typeof _e===ot?it[_e]:void 0,j.default,a.default)}function rm(j,a,_e){if(Qn(_e)!=="number")return Du(j.default,a.default);const it=j.stops.length;if(it===1||_e<=j.stops[0][0])return j.stops[0][1];if(_e>=j.stops[it-1][0])return j.stops[it-1][1];const ot=qp(j.stops.map(lt=>lt[0]),_e);return j.stops[ot][1]}function Dl(j,a,_e){const it=j.base!==void 0?j.base:1;if(Qn(_e)!=="number")return Du(j.default,a.default);const ot=j.stops.length;if(ot===1||_e<=j.stops[0][0])return j.stops[0][1];if(_e>=j.stops[ot-1][0])return j.stops[ot-1][1];const lt=qp(j.stops.map(Et=>Et[0]),_e),ht=function(Et,Pt,Rt,zt){const Ot=zt-Rt,Ut=Et-Rt;return Ot===0?0:Pt===1?Ut/Ot:(Math.pow(Pt,Ut)-1)/(Math.pow(Pt,Ot)-1)}(_e,it,j.stops[lt][0],j.stops[lt+1][0]),pt=j.stops[lt][1],gt=j.stops[lt+1][1];let yt=cp[a.type]||I0;if(j.colorSpace&&j.colorSpace!=="rgb"){const Et=ry[j.colorSpace];yt=(Pt,Rt)=>Et.reverse(Et.interpolate(Et.forward(Pt),Et.forward(Rt),ht))}return typeof pt.evaluate=="function"?{evaluate(...Et){const Pt=pt.evaluate.apply(void 0,Et),Rt=gt.evaluate.apply(void 0,Et);if(Pt!==void 0&&Rt!==void 0)return yt(Pt,Rt,ht)}}:yt(pt,gt,ht)}function L0(j,a,_e){return a.type==="color"?_e=No.parse(_e):a.type==="formatted"?_e=Cs.fromString(_e.toString()):a.type==="resolvedImage"?_e=Vs.fromString(_e.toString()):Qn(_e)===a.type||a.type==="enum"&&a.values[_e]||(_e=void 0),Du(_e,j.default,a.default)}class nm{constructor(a,_e){this.expression=a,this._warningHistory={},this._evaluator=new Gm,this._defaultValue=_e?function(it){return it.type==="color"&&(mp(it.default)||Array.isArray(it.default))?new No(0,0,0,0):it.type==="color"?No.parse(it.default)||null:it.default===void 0?null:it.default}(_e):null,this._enumValues=_e&&_e.type==="enum"?_e.values:null}evaluateWithoutErrorHandling(a,_e,it,ot,lt,ht,pt,gt){return this._evaluator.globals=a,this._evaluator.feature=_e,this._evaluator.featureState=it,this._evaluator.canonical=ot||null,this._evaluator.availableImages=lt||null,this._evaluator.formattedSection=ht,this._evaluator.featureTileCoord=pt||null,this._evaluator.featureDistanceData=gt||null,this.expression.evaluate(this._evaluator)}evaluate(a,_e,it,ot,lt,ht,pt,gt){this._evaluator.globals=a,this._evaluator.feature=_e||null,this._evaluator.featureState=it||null,this._evaluator.canonical=ot||null,this._evaluator.availableImages=lt||null,this._evaluator.formattedSection=ht||null,this._evaluator.featureTileCoord=pt||null,this._evaluator.featureDistanceData=gt||null;try{const yt=this.expression.evaluate(this._evaluator);if(yt==null||typeof yt=="number"&&yt!=yt)return this._defaultValue;if(this._enumValues&&!(yt in this._enumValues))throw new ps(`Expected value to be one of ${Object.keys(this._enumValues).map(Et=>JSON.stringify(Et)).join(", ")}, but found ${JSON.stringify(yt)} instead.`);return yt}catch(yt){return this._warningHistory[yt.message]||(this._warningHistory[yt.message]=!0,typeof console<"u"&&console.warn(yt.message)),this._defaultValue}}}function $u(j){return Array.isArray(j)&&j.length>0&&typeof j[0]=="string"&&j[0]in fp}function zu(j,a){const _e=new Ym(fp,[],a?function(ot){const lt={color:$s,string:Zn,number:gn,enum:Zn,boolean:Gn,formatted:_d,resolvedImage:ou};return ot.type==="array"?Fs(lt[ot.value]||Hn,ot.length):lt[ot.type]}(a):void 0),it=_e.parse(j,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return it?A0(new nm(it,a)):hu(_e.errors)}class hy{constructor(a,_e){this.kind=a,this._styleExpression=_e,this.isStateDependent=a!=="constant"&&!Ll(_e.expression)}evaluateWithoutErrorHandling(a,_e,it,ot,lt,ht){return this._styleExpression.evaluateWithoutErrorHandling(a,_e,it,ot,lt,ht)}evaluate(a,_e,it,ot,lt,ht){return this._styleExpression.evaluate(a,_e,it,ot,lt,ht)}}class gp{constructor(a,_e,it,ot){this.kind=a,this.zoomStops=it,this._styleExpression=_e,this.isStateDependent=a!=="camera"&&!Ll(_e.expression),this.interpolationType=ot}evaluateWithoutErrorHandling(a,_e,it,ot,lt,ht){return this._styleExpression.evaluateWithoutErrorHandling(a,_e,it,ot,lt,ht)}evaluate(a,_e,it,ot,lt,ht){return this._styleExpression.evaluate(a,_e,it,ot,lt,ht)}interpolationFactor(a,_e,it){return this.interpolationType?xa.interpolationFactor(this.interpolationType,a,_e,it):0}}function yp(j,a){if((j=zu(j,a)).result==="error")return j;const _e=j.value.expression,it=Au(_e);if(!it&&!Ru(a))return hu([new ga("","data expressions not supported")]);const ot=lu(_e,["zoom","pitch","distance-from-center"]);if(!ot&&!em(a))return hu([new ga("","zoom expressions not supported")]);const lt=sm(_e);return lt||ot?lt instanceof ga?hu([lt]):lt instanceof xa&&!tm(a)?hu([new ga("",'"interpolate" expressions cannot be used with this property')]):A0(lt?new gp(it?"camera":"composite",j.value,lt.labels,lt instanceof xa?lt.interpolation:void 0):new hy(it?"constant":"source",j.value)):hu([new ga("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class om{constructor(a,_e){this._parameters=a,this._specification=_e,Cl(this,im(this._parameters,this._specification))}static deserialize(a){return new om(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function sm(j){let a=null;if(j instanceof b0)a=sm(j.result);else if(j instanceof oy){for(const _e of j.args)if(a=sm(_e),a)break}else(j instanceof Qm||j instanceof xa)&&j.input instanceof Il&&j.input.name==="zoom"&&(a=j);return a instanceof ga||j.eachChild(_e=>{const it=sm(_e);it instanceof ga?a=it:!a&&it?a=new ga("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&it&&a!==it&&(a=new ga("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}class yn{constructor(a,_e,it,ot){this.message=(a?`${a}: `:"")+it,ot&&(this.identifier=ot),_e!=null&&_e.__line__&&(this.line=_e.__line__)}}function Xs(j){const a=j.key,_e=j.value,it=j.valueSpec||{},ot=j.objectElementValidators||{},lt=j.style,ht=j.styleSpec;let pt=[];const gt=Qn(_e);if(gt!=="object")return[new yn(a,_e,`object expected, ${gt} found`)];for(const yt in _e){const Et=yt.split(".")[0];let Pt;ot[Et]?Pt=ot[Et]:it[Et]?Pt=vs:ot["*"]?Pt=ot["*"]:it["*"]&&(Pt=vs),Pt?pt=pt.concat(Pt({key:(a&&`${a}.`)+yt,value:_e[yt],valueSpec:it[Et]||it["*"],style:lt,styleSpec:ht,object:_e,objectKey:yt},_e)):pt.push(new yn(a,_e[yt],`unknown property "${yt}"`))}for(const yt in it)ot[yt]||it[yt].required&&it[yt].default===void 0&&_e[yt]===void 0&&pt.push(new yn(a,_e,`missing required property "${yt}"`));return pt}function R0(j){const a=j.value,_e=j.valueSpec,it=j.style,ot=j.styleSpec,lt=j.key,ht=j.arrayElementValidator||vs;if(Qn(a)!=="array")return[new yn(lt,a,`array expected, ${Qn(a)} found`)];if(_e.length&&a.length!==_e.length)return[new yn(lt,a,`array length ${_e.length} expected, length ${a.length} found`)];if(_e["min-length"]&&a.length<_e["min-length"])return[new yn(lt,a,`array length at least ${_e["min-length"]} expected, length ${a.length} found`)];let pt={type:_e.value,values:_e.values,minimum:_e.minimum,maximum:_e.maximum,function:void 0};ot.$version<7&&(pt.function=_e.function),Qn(_e.value)==="object"&&(pt=_e.value);let gt=[];for(let yt=0;yt<a.length;yt++)gt=gt.concat(ht({array:a,arrayIndex:yt,value:a[yt],valueSpec:pt,style:it,styleSpec:ot,key:`${lt}[${yt}]`}));return gt}function vp(j){const a=j.key,_e=j.value,it=j.valueSpec;let ot=Qn(_e);if(ot==="number"&&_e!=_e&&(ot="NaN"),ot!=="number")return[new yn(a,_e,`number expected, ${ot} found`)];if("minimum"in it){let lt=it.minimum;if(Qn(it.minimum)==="array"&&(lt=it.minimum[j.arrayIndex]),_e<lt)return[new yn(a,_e,`${_e} is less than the minimum value ${lt}`)]}if("maximum"in it){let lt=it.maximum;if(Qn(it.maximum)==="array"&&(lt=it.maximum[j.arrayIndex]),_e>lt)return[new yn(a,_e,`${_e} is greater than the maximum value ${lt}`)]}return[]}function _p(j){const a=j.valueSpec,_e=Uo(j.value.type);let it,ot,lt,ht={};const pt=_e!=="categorical"&&j.value.property===void 0,gt=!pt,yt=Qn(j.value.stops)==="array"&&Qn(j.value.stops[0])==="array"&&Qn(j.value.stops[0][0])==="object",Et=Xs({key:j.key,value:j.value,valueSpec:j.styleSpec.function,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{stops:function(zt){if(_e==="identity")return[new yn(zt.key,zt.value,'identity function may not have a "stops" property')];let Ot=[];const Ut=zt.value;return Ot=Ot.concat(R0({key:zt.key,value:Ut,valueSpec:zt.valueSpec,style:zt.style,styleSpec:zt.styleSpec,arrayElementValidator:Pt})),Qn(Ut)==="array"&&Ut.length===0&&Ot.push(new yn(zt.key,Ut,"array must have at least one stop")),Ot},default:function(zt){return vs({key:zt.key,value:zt.value,valueSpec:a,style:zt.style,styleSpec:zt.styleSpec})}}});return _e==="identity"&&pt&&Et.push(new yn(j.key,j.value,'missing required property "property"')),_e==="identity"||j.value.stops||Et.push(new yn(j.key,j.value,'missing required property "stops"')),_e==="exponential"&&j.valueSpec.expression&&!tm(j.valueSpec)&&Et.push(new yn(j.key,j.value,"exponential functions not supported")),j.styleSpec.$version>=8&&(gt&&!Ru(j.valueSpec)?Et.push(new yn(j.key,j.value,"property functions not supported")):pt&&!em(j.valueSpec)&&Et.push(new yn(j.key,j.value,"zoom functions not supported"))),_e!=="categorical"&&!yt||j.value.property!==void 0||Et.push(new yn(j.key,j.value,'"property" property is required')),Et;function Pt(zt){let Ot=[];const Ut=zt.value,Kt=zt.key;if(Qn(Ut)!=="array")return[new yn(Kt,Ut,`array expected, ${Qn(Ut)} found`)];if(Ut.length!==2)return[new yn(Kt,Ut,`array length 2 expected, length ${Ut.length} found`)];if(yt){if(Qn(Ut[0])!=="object")return[new yn(Kt,Ut,`object expected, ${Qn(Ut[0])} found`)];if(Ut[0].zoom===void 0)return[new yn(Kt,Ut,"object stop key must have zoom")];if(Ut[0].value===void 0)return[new yn(Kt,Ut,"object stop key must have value")];const rr=Uo(Ut[0].zoom);if(typeof rr!="number")return[new yn(Kt,Ut[0].zoom,"stop zoom values must be numbers")];if(lt&&lt>rr)return[new yn(Kt,Ut[0].zoom,"stop zoom values must appear in ascending order")];rr!==lt&&(lt=rr,ot=void 0,ht={}),Ot=Ot.concat(Xs({key:`${Kt}[0]`,value:Ut[0],valueSpec:{zoom:{}},style:zt.style,styleSpec:zt.styleSpec,objectElementValidators:{zoom:vp,value:Rt}}))}else Ot=Ot.concat(Rt({key:`${Kt}[0]`,value:Ut[0],valueSpec:{},style:zt.style,styleSpec:zt.styleSpec},Ut));return $u(os(Ut[1]))?Ot.concat([new yn(`${Kt}[1]`,Ut[1],"expressions are not allowed in function stops.")]):Ot.concat(vs({key:`${Kt}[1]`,value:Ut[1],valueSpec:a,style:zt.style,styleSpec:zt.styleSpec}))}function Rt(zt,Ot){const Ut=Qn(zt.value),Kt=Uo(zt.value),rr=zt.value!==null?zt.value:Ot;if(it){if(Ut!==it)return[new yn(zt.key,rr,`${Ut} stop domain type must match previous stop domain type ${it}`)]}else it=Ut;if(Ut!=="number"&&Ut!=="string"&&Ut!=="boolean"&&typeof Kt!="number"&&typeof Kt!="string"&&typeof Kt!="boolean")return[new yn(zt.key,rr,"stop domain value must be a number, string, or boolean")];if(Ut!=="number"&&_e!=="categorical"){let pr=`number expected, ${Ut} found`;return Ru(a)&&_e===void 0&&(pr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yn(zt.key,rr,pr)]}return _e!=="categorical"||Ut!=="number"||typeof Kt=="number"&&isFinite(Kt)&&Math.floor(Kt)===Kt?_e!=="categorical"&&Ut==="number"&&typeof Kt=="number"&&typeof ot=="number"&&ot!==void 0&&Kt<ot?[new yn(zt.key,rr,"stop domain values must appear in ascending order")]:(ot=Kt,_e==="categorical"&&Kt in ht?[new yn(zt.key,rr,"stop domain values must be unique")]:(ht[Kt]=!0,[])):[new yn(zt.key,rr,`integer expected, found ${String(Kt)}`)]}}function ss(j){const a=(j.expressionContext==="property"?yp:zu)(os(j.value),j.valueSpec);if(a.result==="error")return a.value.map(it=>new yn(`${j.key}${it.key}`,j.value,it.message));const _e=a.value.expression||a.value._styleExpression.expression;if(j.expressionContext==="property"&&j.propertyKey==="text-font"&&!_e.outputDefined())return[new yn(j.key,j.value,`Invalid data expression for "${j.propertyKey}". Output values must be contained as literals within the expression.`)];if(j.expressionContext==="property"&&j.propertyType==="layout"&&!Ll(_e))return[new yn(j.key,j.value,'"feature-state" data expressions are not supported with layout properties.')];if(j.expressionContext==="filter")return xp(_e,j);if(j.expressionContext&&j.expressionContext.indexOf("cluster")===0){if(!lu(_e,["zoom","feature-state"]))return[new yn(j.key,j.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(j.expressionContext==="cluster-initial"&&!Au(_e))return[new yn(j.key,j.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xp(j,a){const _e=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const ot of a.valueSpec.expression.parameters)_e.delete(ot);if(_e.size===0)return[];const it=[];return j instanceof Il&&_e.has(j.name)?[new yn(a.key,a.value,`["${j.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(j.eachChild(ot=>{it.push(...xp(ot,a))}),it)}function am(j){const a=j.key,_e=j.value,it=j.valueSpec,ot=[];return Array.isArray(it.values)?it.values.indexOf(Uo(_e))===-1&&ot.push(new yn(a,_e,`expected one of [${it.values.join(", ")}], ${JSON.stringify(_e)} found`)):Object.keys(it.values).indexOf(Uo(_e))===-1&&ot.push(new yn(a,_e,`expected one of [${Object.keys(it.values).join(", ")}], ${JSON.stringify(_e)} found`)),ot}function uy(j){if(j===!0||j===!1)return!0;if(!Array.isArray(j)||j.length===0)return!1;switch(j[0]){case"has":return j.length>=2&&j[1]!=="$id"&&j[1]!=="$type";case"in":return j.length>=3&&(typeof j[1]!="string"||Array.isArray(j[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return j.length!==3||Array.isArray(j[1])||Array.isArray(j[2]);case"any":case"all":for(const a of j.slice(1))if(!uy(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}function lm(j,a="fill"){if(j==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};uy(j)||(j=Bu(j));const _e=j;let it=!0;try{it=function(yt){if(!Ou(yt))return yt;let Et=os(yt);return cm(Et),Et=D0(Et),Et}(_e)}catch(yt){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(_e,null,2)}
        `)}const ot=jr[`filter_${a}`],lt=zu(it,ot);let ht=null;if(lt.result==="error")throw new Error(lt.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));ht=(yt,Et,Pt)=>lt.value.evaluate(yt,Et,{},Pt);let pt=null,gt=null;if(it!==_e){const yt=zu(_e,ot);if(yt.result==="error")throw new Error(yt.value.map(Et=>`${Et.key}: ${Et.message}`).join(", "));pt=(Et,Pt,Rt,zt,Ot)=>yt.value.evaluate(Et,Pt,{},Rt,void 0,void 0,zt,Ot),gt=!Au(yt.value.expression)}return{filter:ht,dynamicFilter:pt||void 0,needGeometry:$0(it),needFeature:!!gt}}function D0(j){if(!Array.isArray(j))return j;const a=function(_e){if(dy.has(_e[0])){for(let it=1;it<_e.length;it++)if(Ou(_e[it]))return!0}return _e}(j);return a===!0?a:a.map(_e=>D0(_e))}function cm(j){let a=!1;const _e=[];if(j[0]==="case"){for(let it=1;it<j.length-1;it+=2)a=a||Ou(j[it]),_e.push(j[it+1]);_e.push(j[j.length-1])}else if(j[0]==="match"){a=a||Ou(j[1]);for(let it=2;it<j.length-1;it+=2)_e.push(j[it+1]);_e.push(j[j.length-1])}else if(j[0]==="step"){a=a||Ou(j[1]);for(let it=1;it<j.length-1;it+=2)_e.push(j[it+1])}a&&(j.length=0,j.push("any",..._e));for(let it=1;it<j.length;it++)cm(j[it])}function Ou(j){if(!Array.isArray(j))return!1;if((a=j[0])==="pitch"||a==="distance-from-center")return!0;var a;for(let _e=1;_e<j.length;_e++)if(Ou(j[_e]))return!0;return!1}const dy=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Hv(j,a){return j<a?-1:j>a?1:0}function $0(j){if(!Array.isArray(j))return!1;if(j[0]==="within")return!0;for(let a=1;a<j.length;a++)if($0(j[a]))return!0;return!1}function Bu(j){if(!j)return!0;const a=j[0];return j.length<=1?a!=="any":a==="=="?py(j[1],j[2],"=="):a==="!="?hm(py(j[1],j[2],"==")):a==="<"||a===">"||a==="<="||a===">="?py(j[1],j[2],a):a==="any"?(_e=j.slice(1),["any"].concat(_e.map(Bu))):a==="all"?["all"].concat(j.slice(1).map(Bu)):a==="none"?["all"].concat(j.slice(1).map(Bu).map(hm)):a==="in"?fy(j[1],j.slice(2)):a==="!in"?hm(fy(j[1],j.slice(2))):a==="has"?my(j[1]):a==="!has"?hm(my(j[1])):a!=="within"||j;var _e}function py(j,a,_e){switch(j){case"$type":return[`filter-type-${_e}`,a];case"$id":return[`filter-id-${_e}`,a];default:return[`filter-${_e}`,j,a]}}function fy(j,a){if(a.length===0)return!1;switch(j){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(_e=>typeof _e!=typeof a[0])?["filter-in-large",j,["literal",a.sort(Hv)]]:["filter-in-small",j,["literal",a]]}}function my(j){switch(j){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",j]}}function hm(j){return["!",j]}function bp(j){return uy(os(j.value))?ss(Cl({},j,{expressionContext:"filter",valueSpec:j.styleSpec[`filter_${j.layerType||"fill"}`]})):wp(j)}function wp(j){const a=j.value,_e=j.key;if(Qn(a)!=="array")return[new yn(_e,a,`array expected, ${Qn(a)} found`)];const it=j.styleSpec;let ot,lt=[];if(a.length<1)return[new yn(_e,a,"filter array must have at least 1 element")];switch(lt=lt.concat(am({key:`${_e}[0]`,value:a[0],valueSpec:it.filter_operator,style:j.style,styleSpec:j.styleSpec})),Uo(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Uo(a[1])==="$type"&&lt.push(new yn(_e,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&lt.push(new yn(_e,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(ot=Qn(a[1]),ot!=="string"&&lt.push(new yn(`${_e}[1]`,a[1],`string expected, ${ot} found`)));for(let ht=2;ht<a.length;ht++)ot=Qn(a[ht]),Uo(a[1])==="$type"?lt=lt.concat(am({key:`${_e}[${ht}]`,value:a[ht],valueSpec:it.geometry_type,style:j.style,styleSpec:j.styleSpec})):ot!=="string"&&ot!=="number"&&ot!=="boolean"&&lt.push(new yn(`${_e}[${ht}]`,a[ht],`string, number, or boolean expected, ${ot} found`));break;case"any":case"all":case"none":for(let ht=1;ht<a.length;ht++)lt=lt.concat(wp({key:`${_e}[${ht}]`,value:a[ht],style:j.style,styleSpec:j.styleSpec}));break;case"has":case"!has":ot=Qn(a[1]),a.length!==2?lt.push(new yn(_e,a,`filter array for "${a[0]}" operator must have 2 elements`)):ot!=="string"&&lt.push(new yn(`${_e}[1]`,a[1],`string expected, ${ot} found`));break;case"within":ot=Qn(a[1]),a.length!==2?lt.push(new yn(_e,a,`filter array for "${a[0]}" operator must have 2 elements`)):ot!=="object"&&lt.push(new yn(`${_e}[1]`,a[1],`object expected, ${ot} found`))}return lt}function gy(j,a){const _e=j.key,it=j.style,ot=j.styleSpec,lt=j.value,ht=j.objectKey,pt=ot[`${a}_${j.layerType}`];if(!pt)return[];const gt=ht.match(/^(.*)-transition$/);if(a==="paint"&&gt&&pt[gt[1]]&&pt[gt[1]].transition)return vs({key:_e,value:lt,valueSpec:ot.transition,style:it,styleSpec:ot});const yt=j.valueSpec||pt[ht];if(!yt)return[new yn(_e,lt,`unknown property "${ht}"`)];let Et;if(Qn(lt)==="string"&&Ru(yt)&&!yt.tokens&&(Et=/^{([^}]+)}$/.exec(lt))){const Rt=`\`{ "type": "identity", "property": ${Et?JSON.stringify(Et[1]):'"_"'} }\``;return[new yn(_e,lt,`"${ht}" does not support interpolation syntax
Use an identity property function instead: ${Rt}.`)]}const Pt=[];return j.layerType==="symbol"&&(ht==="text-field"&&it&&!it.glyphs&&Pt.push(new yn(_e,lt,'use of "text-field" requires a style "glyphs" property')),ht==="text-font"&&mp(os(lt))&&Uo(lt.type)==="identity"&&Pt.push(new yn(_e,lt,'"text-font" does not support identity functions'))),Pt.concat(vs({key:j.key,value:lt,valueSpec:yt,style:it,styleSpec:ot,expressionContext:"property",propertyType:a,propertyKey:ht}))}function z0(j){return gy(j,"paint")}function yy(j){return gy(j,"layout")}function O0(j){let a=[];const _e=j.value,it=j.key,ot=j.style,lt=j.styleSpec;_e.type||_e.ref||a.push(new yn(it,_e,'either "type" or "ref" is required'));let ht=Uo(_e.type);const pt=Uo(_e.ref);if(_e.id){const gt=Uo(_e.id);for(let yt=0;yt<j.arrayIndex;yt++){const Et=ot.layers[yt];Uo(Et.id)===gt&&a.push(new yn(it,_e.id,`duplicate layer id "${_e.id}", previously used at line ${Et.id.__line__}`))}}if("ref"in _e){let gt;["type","source","source-layer","filter","layout"].forEach(yt=>{yt in _e&&a.push(new yn(it,_e[yt],`"${yt}" is prohibited for ref layers`))}),ot.layers.forEach(yt=>{Uo(yt.id)===pt&&(gt=yt)}),gt?gt.ref?a.push(new yn(it,_e.ref,"ref cannot reference another ref layer")):ht=Uo(gt.type):typeof pt=="string"&&a.push(new yn(it,_e.ref,`ref layer "${pt}" not found`))}else if(ht!=="background"&&ht!=="sky")if(_e.source){const gt=ot.sources&&ot.sources[_e.source],yt=gt&&Uo(gt.type);gt?yt==="vector"&&ht==="raster"?a.push(new yn(it,_e.source,`layer "${_e.id}" requires a raster source`)):yt==="raster"&&ht!=="raster"?a.push(new yn(it,_e.source,`layer "${_e.id}" requires a vector source`)):yt!=="vector"||_e["source-layer"]?yt==="raster-dem"&&ht!=="hillshade"?a.push(new yn(it,_e.source,"raster-dem source can only be used with layer type 'hillshade'.")):ht!=="line"||!_e.paint||!_e.paint["line-gradient"]&&!_e.paint["line-trim-offset"]||yt==="geojson"&&gt.lineMetrics||a.push(new yn(it,_e,`layer "${_e.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new yn(it,_e,`layer "${_e.id}" must specify a "source-layer"`)):a.push(new yn(it,_e.source,`source "${_e.source}" not found`))}else a.push(new yn(it,_e,'missing required property "source"'));return a=a.concat(Xs({key:it,value:_e,valueSpec:lt.layer,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":()=>[],type:()=>vs({key:`${it}.type`,value:_e.type,valueSpec:lt.layer.type,style:j.style,styleSpec:j.styleSpec,object:_e,objectKey:"type"}),filter:gt=>bp(Cl({layerType:ht},gt)),layout:gt=>Xs({layer:_e,key:gt.key,value:gt.value,valueSpec:{},style:gt.style,styleSpec:gt.styleSpec,objectElementValidators:{"*":yt=>yy(Cl({layerType:ht},yt))}}),paint:gt=>Xs({layer:_e,key:gt.key,value:gt.value,valueSpec:{},style:gt.style,styleSpec:gt.styleSpec,objectElementValidators:{"*":yt=>z0(Cl({layerType:ht},yt))}})}})),a}function Kl(j){const a=j.value,_e=j.key,it=Qn(a);return it!=="string"?[new yn(_e,a,`string expected, ${it} found`)]:[]}const B0={promoteId:function({key:j,value:a}){if(Qn(a)==="string")return Kl({key:j,value:a});{const _e=[];for(const it in a)_e.push(...Kl({key:`${j}.${it}`,value:a[it]}));return _e}}};function F0(j){const a=j.value,_e=j.key,it=j.styleSpec,ot=j.style;if(!a.type)return[new yn(_e,a,'"type" is required')];const lt=Uo(a.type);let ht;switch(lt){case"vector":case"raster":case"raster-dem":return ht=Xs({key:_e,value:a,valueSpec:it[`source_${lt.replace("-","_")}`],style:j.style,styleSpec:it,objectElementValidators:B0}),ht;case"geojson":if(ht=Xs({key:_e,value:a,valueSpec:it.source_geojson,style:ot,styleSpec:it,objectElementValidators:B0}),a.cluster)for(const pt in a.clusterProperties){const[gt,yt]=a.clusterProperties[pt],Et=typeof gt=="string"?[gt,["accumulated"],["get",pt]]:gt;ht.push(...ss({key:`${_e}.${pt}.map`,value:yt,expressionContext:"cluster-map"})),ht.push(...ss({key:`${_e}.${pt}.reduce`,value:Et,expressionContext:"cluster-reduce"}))}return ht;case"video":return Xs({key:_e,value:a,valueSpec:it.source_video,style:ot,styleSpec:it});case"image":return Xs({key:_e,value:a,valueSpec:it.source_image,style:ot,styleSpec:it});case"canvas":return[new yn(_e,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return am({key:`${_e}.type`,value:a.type,valueSpec:{values:qv(it)},style:ot,styleSpec:it})}}function qv(j){return j.source.reduce((a,_e)=>{const it=j[_e];return it.type.type==="enum"&&(a=a.concat(Object.keys(it.type.values))),a},[])}function V0(j){const a=j.value,_e=j.styleSpec,it=_e.light,ot=j.style;let lt=[];const ht=Qn(a);if(a===void 0)return lt;if(ht!=="object")return lt=lt.concat([new yn("light",a,`object expected, ${ht} found`)]),lt;for(const pt in a){const gt=pt.match(/^(.*)-transition$/);lt=lt.concat(gt&&it[gt[1]]&&it[gt[1]].transition?vs({key:pt,value:a[pt],valueSpec:_e.transition,style:ot,styleSpec:_e}):it[pt]?vs({key:pt,value:a[pt],valueSpec:it[pt],style:ot,styleSpec:_e}):[new yn(pt,a[pt],`unknown property "${pt}"`)])}return lt}function vy(j){const a=j.value,_e=j.key,it=j.style,ot=j.styleSpec,lt=ot.terrain;let ht=[];const pt=Qn(a);if(a===void 0)return ht;if(pt!=="object")return ht=ht.concat([new yn("terrain",a,`object expected, ${pt} found`)]),ht;for(const gt in a){const yt=gt.match(/^(.*)-transition$/);ht=ht.concat(yt&&lt[yt[1]]&&lt[yt[1]].transition?vs({key:gt,value:a[gt],valueSpec:ot.transition,style:it,styleSpec:ot}):lt[gt]?vs({key:gt,value:a[gt],valueSpec:lt[gt],style:it,styleSpec:ot}):[new yn(gt,a[gt],`unknown property "${gt}"`)])}if(a.source){const gt=it.sources&&it.sources[a.source],yt=gt&&Uo(gt.type);gt?yt!=="raster-dem"&&ht.push(new yn(_e,a.source,`terrain cannot be used with a source of type ${String(yt)}, it only be used with a "raster-dem" source type`)):ht.push(new yn(_e,a.source,`source "${a.source}" not found`))}else ht.push(new yn(_e,a,'terrain is missing required property "source"'));return ht}function N0(j){const a=j.value,_e=j.style,it=j.styleSpec,ot=it.fog;let lt=[];const ht=Qn(a);if(a===void 0)return lt;if(ht!=="object")return lt=lt.concat([new yn("fog",a,`object expected, ${ht} found`)]),lt;for(const pt in a){const gt=pt.match(/^(.*)-transition$/);lt=lt.concat(gt&&ot[gt[1]]&&ot[gt[1]].transition?vs({key:pt,value:a[pt],valueSpec:it.transition,style:_e,styleSpec:it}):ot[pt]?vs({key:pt,value:a[pt],valueSpec:ot[pt],style:_e,styleSpec:it}):[new yn(pt,a[pt],`unknown property "${pt}"`)])}return lt}const j0={"*":()=>[],array:R0,boolean:function(j){const a=j.value,_e=j.key,it=Qn(a);return it!=="boolean"?[new yn(_e,a,`boolean expected, ${it} found`)]:[]},number:vp,color:function(j){const a=j.key,_e=j.value,it=Qn(_e);return it!=="string"?[new yn(a,_e,`color expected, ${it} found`)]:Om(_e)===null?[new yn(a,_e,`color expected, "${_e}" found`)]:[]},enum:am,filter:bp,function:_p,layer:O0,object:Xs,source:F0,light:V0,terrain:vy,fog:N0,string:Kl,formatted:function(j){return Kl(j).length===0?[]:ss(j)},resolvedImage:function(j){return Kl(j).length===0?[]:ss(j)},projection:function(j){const a=j.value,_e=j.styleSpec,it=_e.projection,ot=j.style;let lt=[];const ht=Qn(a);if(ht==="object")for(const pt in a)lt=lt.concat(vs({key:pt,value:a[pt],valueSpec:it[pt],style:ot,styleSpec:_e}));else ht!=="string"&&(lt=lt.concat([new yn("projection",a,`object or string expected, ${ht} found`)]));return lt}};function vs(j){const a=j.value,_e=j.valueSpec,it=j.styleSpec;return _e.expression&&mp(Uo(a))?_p(j):_e.expression&&$u(os(a))?ss(j):_e.type&&j0[_e.type]?j0[_e.type](j):Xs(Cl({},j,{valueSpec:_e.type?it[_e.type]:_e}))}function Wv(j){const a=j.value,_e=j.key,it=Kl(j);return it.length||(a.indexOf("{fontstack}")===-1&&it.push(new yn(_e,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&it.push(new yn(_e,a,'"glyphs" url must include a "{range}" token'))),it}function U0(j,a=jr){return js(vs({key:"",value:j,valueSpec:a.$root,styleSpec:a,style:j,objectElementValidators:{glyphs:Wv,"*":()=>[]}}))}const Zv=j=>js(z0(j)),Xv=j=>js(yy(j));function js(j){return j.slice().sort((a,_e)=>a.line&&_e.line?a.line-_e.line:0)}function G0(j,a){let _e=!1;if(a&&a.length)for(const it of a)j.fire(new Vo(new Error(it.message))),_e=!0;return _e}var Yv=ba,Ys=3;function ba(j,a,_e){var it=this.cells=[];if(j instanceof ArrayBuffer){this.arrayBuffer=j;var ot=new Int32Array(this.arrayBuffer);j=ot[0],this.d=(a=ot[1])+2*(_e=ot[2]);for(var lt=0;lt<this.d*this.d;lt++){var ht=ot[Ys+lt],pt=ot[Ys+lt+1];it.push(ht===pt?null:ot.subarray(ht,pt))}var gt=ot[Ys+it.length+1];this.keys=ot.subarray(ot[Ys+it.length],gt),this.bboxes=ot.subarray(gt),this.insert=this._insertReadonly}else{this.d=a+2*_e;for(var yt=0;yt<this.d*this.d;yt++)it.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=j,this.padding=_e,this.scale=a/j,this.uid=0;var Et=_e/a*j;this.min=-Et,this.max=j+Et}ba.prototype.insert=function(j,a,_e,it,ot){this._forEachCell(a,_e,it,ot,this._insertCell,this.uid++),this.keys.push(j),this.bboxes.push(a),this.bboxes.push(_e),this.bboxes.push(it),this.bboxes.push(ot)},ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ba.prototype._insertCell=function(j,a,_e,it,ot,lt){this.cells[ot].push(lt)},ba.prototype.query=function(j,a,_e,it,ot){var lt=this.min,ht=this.max;if(j<=lt&&a<=lt&&ht<=_e&&ht<=it&&!ot)return Array.prototype.slice.call(this.keys);var pt=[];return this._forEachCell(j,a,_e,it,this._queryCell,pt,{},ot),pt},ba.prototype._queryCell=function(j,a,_e,it,ot,lt,ht,pt){var gt=this.cells[ot];if(gt!==null)for(var yt=this.keys,Et=this.bboxes,Pt=0;Pt<gt.length;Pt++){var Rt=gt[Pt];if(ht[Rt]===void 0){var zt=4*Rt;(pt?pt(Et[zt+0],Et[zt+1],Et[zt+2],Et[zt+3]):j<=Et[zt+2]&&a<=Et[zt+3]&&_e>=Et[zt+0]&&it>=Et[zt+1])?(ht[Rt]=!0,lt.push(yt[Rt])):ht[Rt]=!1}}},ba.prototype._forEachCell=function(j,a,_e,it,ot,lt,ht,pt){for(var gt=this._convertToCellCoord(j),yt=this._convertToCellCoord(a),Et=this._convertToCellCoord(_e),Pt=this._convertToCellCoord(it),Rt=gt;Rt<=Et;Rt++)for(var zt=yt;zt<=Pt;zt++){var Ot=this.d*zt+Rt;if((!pt||pt(this._convertFromCellCoord(Rt),this._convertFromCellCoord(zt),this._convertFromCellCoord(Rt+1),this._convertFromCellCoord(zt+1)))&&ot.call(this,j,a,_e,it,Ot,lt,ht,pt))return}},ba.prototype._convertFromCellCoord=function(j){return(j-this.padding)/this.scale},ba.prototype._convertToCellCoord=function(j){return Math.max(0,Math.min(this.d-1,Math.floor(j*this.scale)+this.padding))},ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var j=this.cells,a=Ys+this.cells.length+1+1,_e=0,it=0;it<this.cells.length;it++)_e+=this.cells[it].length;var ot=new Int32Array(a+_e+this.keys.length+this.bboxes.length);ot[0]=this.extent,ot[1]=this.n,ot[2]=this.padding;for(var lt=a,ht=0;ht<j.length;ht++){var pt=j[ht];ot[Ys+ht]=lt,ot.set(pt,lt),lt+=pt.length}return ot[Ys+j.length]=lt,ot.set(this.keys,lt),ot[Ys+j.length+1]=lt+=this.keys.length,ot.set(this.bboxes,lt),lt+=this.bboxes.length,ot.buffer};var uu=St(Yv);const um={};function vn(j,a,_e={}){Object.defineProperty(j,"_classRegistryKey",{value:a,writeable:!1}),um[a]={klass:j,omit:_e.omit||[]}}vn(Object,"Object"),uu.serialize=function(j,a){const _e=j.toArrayBuffer();return a&&a.push(_e),{buffer:_e}},uu.deserialize=function(j){return new uu(j.buffer)},Object.defineProperty(uu,"name",{value:"Grid"}),vn(uu,"Grid"),vn(No,"Color"),vn(Error,"Error"),vn(na,"AJAXError"),vn(Vs,"ResolvedImage"),vn(om,"StylePropertyFunction"),vn(nm,"StyleExpression",{omit:["_evaluator"]}),vn(gp,"ZoomDependentExpression"),vn(hy,"ZoomConstantExpression"),vn(Il,"CompoundExpression",{omit:["_evaluate"]});for(const j in fp)um[fp[j]._classRegistryKey]||vn(fp[j],`Expression${j}`);function _y(j){return j&&typeof ArrayBuffer<"u"&&(j instanceof ArrayBuffer||j.constructor&&j.constructor.name==="ArrayBuffer")}function xy(j){return ut.ImageBitmap&&j instanceof ut.ImageBitmap}function Fu(j,a){if(j==null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||j instanceof Boolean||j instanceof Number||j instanceof String||j instanceof Date||j instanceof RegExp)return j;if(_y(j)||xy(j))return a&&a.push(j),j;if(ArrayBuffer.isView(j)){const _e=j;return a&&a.push(_e.buffer),_e}if(j instanceof ut.ImageData)return a&&a.push(j.data.buffer),j;if(Array.isArray(j)){const _e=[];for(const it of j)_e.push(Fu(it,a));return _e}if(typeof j=="object"){const _e=j.constructor,it=_e._classRegistryKey;if(!it)throw new Error(`can't serialize object of unregistered class ${it}`);const ot=_e.serialize?_e.serialize(j,a):{};if(!_e.serialize){for(const lt in j)j.hasOwnProperty(lt)&&(um[it].omit.indexOf(lt)>=0||(ot[lt]=Fu(j[lt],a)));j instanceof Error&&(ot.message=j.message)}if(ot.$name)throw new Error("$name property is reserved for worker serialization logic.");return it!=="Object"&&(ot.$name=it),ot}throw new Error("can't serialize object of type "+typeof j)}function du(j){if(j==null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||j instanceof Boolean||j instanceof Number||j instanceof String||j instanceof Date||j instanceof RegExp||_y(j)||xy(j)||ArrayBuffer.isView(j)||j instanceof ut.ImageData)return j;if(Array.isArray(j))return j.map(du);if(typeof j=="object"){const a=j.$name||"Object",{klass:_e}=um[a];if(!_e)throw new Error(`can't deserialize unregistered class ${a}`);if(_e.deserialize)return _e.deserialize(j);const it=Object.create(_e.prototype);for(const ot of Object.keys(j))ot!=="$name"&&(it[ot]=du(j[ot]));return it}throw new Error("can't deserialize object of type "+typeof j)}const fn={"Latin-1 Supplement":j=>j>=128&&j<=255,Arabic:j=>j>=1536&&j<=1791,"Arabic Supplement":j=>j>=1872&&j<=1919,"Arabic Extended-A":j=>j>=2208&&j<=2303,"Hangul Jamo":j=>j>=4352&&j<=4607,"Unified Canadian Aboriginal Syllabics":j=>j>=5120&&j<=5759,Khmer:j=>j>=6016&&j<=6143,"Unified Canadian Aboriginal Syllabics Extended":j=>j>=6320&&j<=6399,"General Punctuation":j=>j>=8192&&j<=8303,"Letterlike Symbols":j=>j>=8448&&j<=8527,"Number Forms":j=>j>=8528&&j<=8591,"Miscellaneous Technical":j=>j>=8960&&j<=9215,"Control Pictures":j=>j>=9216&&j<=9279,"Optical Character Recognition":j=>j>=9280&&j<=9311,"Enclosed Alphanumerics":j=>j>=9312&&j<=9471,"Geometric Shapes":j=>j>=9632&&j<=9727,"Miscellaneous Symbols":j=>j>=9728&&j<=9983,"Miscellaneous Symbols and Arrows":j=>j>=11008&&j<=11263,"CJK Radicals Supplement":j=>j>=11904&&j<=12031,"Kangxi Radicals":j=>j>=12032&&j<=12255,"Ideographic Description Characters":j=>j>=12272&&j<=12287,"CJK Symbols and Punctuation":j=>j>=12288&&j<=12351,Hiragana:j=>j>=12352&&j<=12447,Katakana:j=>j>=12448&&j<=12543,Bopomofo:j=>j>=12544&&j<=12591,"Hangul Compatibility Jamo":j=>j>=12592&&j<=12687,Kanbun:j=>j>=12688&&j<=12703,"Bopomofo Extended":j=>j>=12704&&j<=12735,"CJK Strokes":j=>j>=12736&&j<=12783,"Katakana Phonetic Extensions":j=>j>=12784&&j<=12799,"Enclosed CJK Letters and Months":j=>j>=12800&&j<=13055,"CJK Compatibility":j=>j>=13056&&j<=13311,"CJK Unified Ideographs Extension A":j=>j>=13312&&j<=19903,"Yijing Hexagram Symbols":j=>j>=19904&&j<=19967,"CJK Unified Ideographs":j=>j>=19968&&j<=40959,"Yi Syllables":j=>j>=40960&&j<=42127,"Yi Radicals":j=>j>=42128&&j<=42191,"Hangul Jamo Extended-A":j=>j>=43360&&j<=43391,"Hangul Syllables":j=>j>=44032&&j<=55215,"Hangul Jamo Extended-B":j=>j>=55216&&j<=55295,"Private Use Area":j=>j>=57344&&j<=63743,"CJK Compatibility Ideographs":j=>j>=63744&&j<=64255,"Arabic Presentation Forms-A":j=>j>=64336&&j<=65023,"Vertical Forms":j=>j>=65040&&j<=65055,"CJK Compatibility Forms":j=>j>=65072&&j<=65103,"Small Form Variants":j=>j>=65104&&j<=65135,"Arabic Presentation Forms-B":j=>j>=65136&&j<=65279,"Halfwidth and Fullwidth Forms":j=>j>=65280&&j<=65519};function by(j){for(const a of j)if(wy(a.charCodeAt(0)))return!0;return!1}function Kv(j){for(const a of j)if(!H0(a.charCodeAt(0)))return!1;return!0}function H0(j){return!(fn.Arabic(j)||fn["Arabic Supplement"](j)||fn["Arabic Extended-A"](j)||fn["Arabic Presentation Forms-A"](j)||fn["Arabic Presentation Forms-B"](j))}function wy(j){return!(j!==746&&j!==747&&(j<4352||!(fn["Bopomofo Extended"](j)||fn.Bopomofo(j)||fn["CJK Compatibility Forms"](j)&&!(j>=65097&&j<=65103)||fn["CJK Compatibility Ideographs"](j)||fn["CJK Compatibility"](j)||fn["CJK Radicals Supplement"](j)||fn["CJK Strokes"](j)||!(!fn["CJK Symbols and Punctuation"](j)||j>=12296&&j<=12305||j>=12308&&j<=12319||j===12336)||fn["CJK Unified Ideographs Extension A"](j)||fn["CJK Unified Ideographs"](j)||fn["Enclosed CJK Letters and Months"](j)||fn["Hangul Compatibility Jamo"](j)||fn["Hangul Jamo Extended-A"](j)||fn["Hangul Jamo Extended-B"](j)||fn["Hangul Jamo"](j)||fn["Hangul Syllables"](j)||fn.Hiragana(j)||fn["Ideographic Description Characters"](j)||fn.Kanbun(j)||fn["Kangxi Radicals"](j)||fn["Katakana Phonetic Extensions"](j)||fn.Katakana(j)&&j!==12540||!(!fn["Halfwidth and Fullwidth Forms"](j)||j===65288||j===65289||j===65293||j>=65306&&j<=65310||j===65339||j===65341||j===65343||j>=65371&&j<=65503||j===65507||j>=65512&&j<=65519)||!(!fn["Small Form Variants"](j)||j>=65112&&j<=65118||j>=65123&&j<=65126)||fn["Unified Canadian Aboriginal Syllabics"](j)||fn["Unified Canadian Aboriginal Syllabics Extended"](j)||fn["Vertical Forms"](j)||fn["Yijing Hexagram Symbols"](j)||fn["Yi Syllables"](j)||fn["Yi Radicals"](j))))}function q0(j){return!(wy(j)||function(a){return!!(fn["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||fn["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||fn["Letterlike Symbols"](a)||fn["Number Forms"](a)||fn["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||fn["Control Pictures"](a)&&a!==9251||fn["Optical Character Recognition"](a)||fn["Enclosed Alphanumerics"](a)||fn["Geometric Shapes"](a)||fn["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||fn["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||fn["CJK Symbols and Punctuation"](a)||fn.Katakana(a)||fn["Private Use Area"](a)||fn["CJK Compatibility Forms"](a)||fn["Small Form Variants"](a)||fn["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(j))}function W0(j){return j>=1424&&j<=2303||fn["Arabic Presentation Forms-A"](j)||fn["Arabic Presentation Forms-B"](j)}function Qv(j,a){return!(!a&&W0(j)||j>=2304&&j<=3583||j>=3840&&j<=4255||fn.Khmer(j))}function Jv(j){for(const a of j)if(W0(a.charCodeAt(0)))return!0;return!1}const Ey="deferred",Sy="loading",Ty="loaded";let Vu=null,at="unavailable",et=null;const nt=function(j){j&&typeof j=="string"&&j.indexOf("NetworkError")>-1&&(at="error"),Vu&&Vu(j)};function ct(){dt.fire(new To("pluginStateChange",{pluginStatus:at,pluginURL:et}))}const dt=new Ds,ft=function(){return at},_t=function(){if(at!==Ey||!et)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");at=Sy,ct(),et&&Wl({url:et},j=>{j?nt(j):(at=Ty,ct())})},xt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>at===Ty||xt.applyArabicShaping!=null,isLoading:()=>at===Sy,setState(j){at=j.pluginStatus,et=j.pluginURL},isParsed:()=>xt.applyArabicShaping!=null&&xt.processBidirectionalText!=null&&xt.processStyledBidirectionalText!=null,getPluginURL:()=>et};class kt{constructor(a,_e){this.zoom=a,_e?(this.now=_e.now,this.fadeDuration=_e.fadeDuration,this.transition=_e.transition,this.pitch=_e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(a){return function(_e,it){for(const ot of _e)if(!Qv(ot.charCodeAt(0),it))return!1;return!0}(a,xt.isLoaded())}}class $t{constructor(a,_e){this.property=a,this.value=_e,this.expression=function(it,ot){if(mp(it))return new om(it,ot);if($u(it)){const lt=yp(it,ot);if(lt.result==="error")throw new Error(lt.value.map(ht=>`${ht.key}: ${ht.message}`).join(", "));return lt.value}{let lt=it;return typeof it=="string"&&ot.type==="color"&&(lt=No.parse(it)),{kind:"constant",evaluate:()=>lt}}}(_e===void 0?a.specification.default:_e,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,_e,it){return this.property.possiblyEvaluate(this,a,_e,it)}}class Dt{constructor(a){this.property=a,this.value=new $t(a,void 0)}transitioned(a,_e){return new Yt(this.property,this.value,_e,Yr({},a.transition,this.transition),a.now)}untransitioned(){return new Yt(this.property,this.value,null,{},0)}}class Vt{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return jn(this._values[a].value.value)}setValue(a,_e){this._values.hasOwnProperty(a)||(this._values[a]=new Dt(this._values[a].property)),this._values[a].value=new $t(this._values[a].property,_e===null?void 0:jn(_e))}getTransition(a){return jn(this._values[a].transition)}setTransition(a,_e){this._values.hasOwnProperty(a)||(this._values[a]=new Dt(this._values[a].property)),this._values[a].transition=jn(_e)||void 0}serialize(){const a={};for(const _e of Object.keys(this._values)){const it=this.getValue(_e);it!==void 0&&(a[_e]=it);const ot=this.getTransition(_e);ot!==void 0&&(a[`${_e}-transition`]=ot)}return a}transitioned(a,_e){const it=new Jt(this._properties);for(const ot of Object.keys(this._values))it._values[ot]=this._values[ot].transitioned(a,_e._values[ot]);return it}untransitioned(){const a=new Jt(this._properties);for(const _e of Object.keys(this._values))a._values[_e]=this._values[_e].untransitioned();return a}}class Yt{constructor(a,_e,it,ot,lt){const ht=ot.delay||0,pt=ot.duration||0;lt=lt||0,this.property=a,this.value=_e,this.begin=lt+ht,this.end=this.begin+pt,a.specification.transition&&(ot.delay||ot.duration)&&(this.prior=it)}possiblyEvaluate(a,_e,it){const ot=a.now||0,lt=this.value.possiblyEvaluate(a,_e,it),ht=this.prior;if(ht){if(ot>this.end)return this.prior=null,lt;if(this.value.isDataDriven())return this.prior=null,lt;if(ot<this.begin)return ht.possiblyEvaluate(a,_e,it);{const pt=(ot-this.begin)/(this.end-this.begin);return this.property.interpolate(ht.possiblyEvaluate(a,_e,it),lt,zr(pt))}}return lt}}class Jt{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,_e,it){const ot=new tr(this._properties);for(const lt of Object.keys(this._values))ot._values[lt]=this._values[lt].possiblyEvaluate(a,_e,it);return ot}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class er{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return jn(this._values[a].value)}setValue(a,_e){this._values[a]=new $t(this._values[a].property,_e===null?void 0:jn(_e))}serialize(){const a={};for(const _e of Object.keys(this._values)){const it=this.getValue(_e);it!==void 0&&(a[_e]=it)}return a}possiblyEvaluate(a,_e,it){const ot=new tr(this._properties);for(const lt of Object.keys(this._values))ot._values[lt]=this._values[lt].possiblyEvaluate(a,_e,it);return ot}}class _i{constructor(a,_e,it){this.property=a,this.value=_e,this.parameters=it}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,_e,it,ot){return this.property.evaluate(this.value,this.parameters,a,_e,it,ot)}}class tr{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class jt{constructor(a){this.specification=a}possiblyEvaluate(a,_e){return a.expression.evaluate(_e)}interpolate(a,_e,it){const ot=cp[this.specification.type];return ot?ot(a,_e,it):a}}class Qt{constructor(a,_e){this.specification=a,this.overrides=_e}possiblyEvaluate(a,_e,it,ot){return new _i(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(_e,null,{},it,ot)}:a.expression,_e)}interpolate(a,_e,it){if(a.value.kind!=="constant"||_e.value.kind!=="constant")return a;if(a.value.value===void 0||_e.value.value===void 0)return new _i(this,{kind:"constant",value:void 0},a.parameters);const ot=cp[this.specification.type];return ot?new _i(this,{kind:"constant",value:ot(a.value.value,_e.value.value,it)},a.parameters):a}evaluate(a,_e,it,ot,lt,ht){return a.kind==="constant"?a.value:a.evaluate(_e,it,ot,lt,ht)}}class sr{constructor(a){this.specification=a}possiblyEvaluate(a,_e,it,ot){return!!a.expression.evaluate(_e,null,{},it,ot)}interpolate(){return!1}}class lr{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const _e=new kt(0,{});for(const it in a){const ot=a[it];ot.specification.overridable&&this.overridableProperties.push(it);const lt=this.defaultPropertyValues[it]=new $t(ot,void 0),ht=this.defaultTransitionablePropertyValues[it]=new Dt(ot);this.defaultTransitioningPropertyValues[it]=ht.untransitioned(),this.defaultPossiblyEvaluatedValues[it]=lt.possiblyEvaluate(_e)}}}function yr(j,a){return 256*(j=Nt(Math.floor(j),0,255))+Nt(Math.floor(a),0,255)}vn(Qt,"DataDrivenProperty"),vn(jt,"DataConstantProperty"),vn(sr,"ColorRampProperty");const _r={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class vr{constructor(a,_e){this._structArray=a,this._pos1=_e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class kr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,_e){return a._trim(),_e&&(a.isTransferred=!0,_e.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const _e=Object.create(this.prototype);return _e.arrayBuffer=a.arrayBuffer,_e.length=a.length,_e.capacity=a.arrayBuffer.byteLength/_e.bytesPerElement,_e._refreshViews(),_e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const _e=this.uint8;this._refreshViews(),_e&&this.uint8.set(_e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Sr(j,a=1){let _e=0,it=0;return{members:j.map(ot=>{const lt=_r[ot.type].BYTES_PER_ELEMENT,ht=_e=Lr(_e,Math.max(a,lt)),pt=ot.components||1;return it=Math.max(it,lt),_e+=lt*pt,{name:ot.name,type:ot.type,components:pt,offset:ht}}),size:Lr(_e,Math.max(it,a)),alignment:a}}function Lr(j,a){return Math.ceil(j/a)*a}class Jr extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,_e){const it=this.length;return this.resize(it+1),this.emplace(it,a,_e)}emplace(a,_e,it){const ot=2*a;return this.int16[ot+0]=_e,this.int16[ot+1]=it,a}}Jr.prototype.bytesPerElement=4,vn(Jr,"StructArrayLayout2i4");class Ar extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,_e,it){const ot=this.length;return this.resize(ot+1),this.emplace(ot,a,_e,it)}emplace(a,_e,it,ot){const lt=3*a;return this.int16[lt+0]=_e,this.int16[lt+1]=it,this.int16[lt+2]=ot,a}}Ar.prototype.bytesPerElement=6,vn(Ar,"StructArrayLayout3i6");class Hr extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot){const lt=this.length;return this.resize(lt+1),this.emplace(lt,a,_e,it,ot)}emplace(a,_e,it,ot,lt){const ht=4*a;return this.int16[ht+0]=_e,this.int16[ht+1]=it,this.int16[ht+2]=ot,this.int16[ht+3]=lt,a}}Hr.prototype.bytesPerElement=8,vn(Hr,"StructArrayLayout4i8");class Or extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht,pt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,a,_e,it,ot,lt,ht,pt)}emplace(a,_e,it,ot,lt,ht,pt,gt){const yt=6*a,Et=12*a,Pt=3*a;return this.int16[yt+0]=_e,this.int16[yt+1]=it,this.uint8[Et+4]=ot,this.uint8[Et+5]=lt,this.uint8[Et+6]=ht,this.uint8[Et+7]=pt,this.float32[Pt+2]=gt,a}}Or.prototype.bytesPerElement=12,vn(Or,"StructArrayLayout2i4ub1f12");class Qr extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot){const lt=this.length;return this.resize(lt+1),this.emplace(lt,a,_e,it,ot)}emplace(a,_e,it,ot,lt){const ht=4*a;return this.float32[ht+0]=_e,this.float32[ht+1]=it,this.float32[ht+2]=ot,this.float32[ht+3]=lt,a}}Qr.prototype.bytesPerElement=16,vn(Qr,"StructArrayLayout4f16");class Mr extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt){const ht=this.length;return this.resize(ht+1),this.emplace(ht,a,_e,it,ot,lt)}emplace(a,_e,it,ot,lt,ht){const pt=6*a,gt=3*a;return this.uint16[pt+0]=_e,this.uint16[pt+1]=it,this.uint16[pt+2]=ot,this.uint16[pt+3]=lt,this.float32[gt+2]=ht,a}}Mr.prototype.bytesPerElement=12,vn(Mr,"StructArrayLayout4ui1f12");class Gr extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot){const lt=this.length;return this.resize(lt+1),this.emplace(lt,a,_e,it,ot)}emplace(a,_e,it,ot,lt){const ht=4*a;return this.uint16[ht+0]=_e,this.uint16[ht+1]=it,this.uint16[ht+2]=ot,this.uint16[ht+3]=lt,a}}Gr.prototype.bytesPerElement=8,vn(Gr,"StructArrayLayout4ui8");class rn extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht){const pt=this.length;return this.resize(pt+1),this.emplace(pt,a,_e,it,ot,lt,ht)}emplace(a,_e,it,ot,lt,ht,pt){const gt=6*a;return this.int16[gt+0]=_e,this.int16[gt+1]=it,this.int16[gt+2]=ot,this.int16[gt+3]=lt,this.int16[gt+4]=ht,this.int16[gt+5]=pt,a}}rn.prototype.bytesPerElement=12,vn(rn,"StructArrayLayout6i12");class Zr extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt){const zt=this.length;return this.resize(zt+1),this.emplace(zt,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt)}emplace(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt){const Ot=12*a;return this.int16[Ot+0]=_e,this.int16[Ot+1]=it,this.int16[Ot+2]=ot,this.int16[Ot+3]=lt,this.uint16[Ot+4]=ht,this.uint16[Ot+5]=pt,this.uint16[Ot+6]=gt,this.uint16[Ot+7]=yt,this.int16[Ot+8]=Et,this.int16[Ot+9]=Pt,this.int16[Ot+10]=Rt,this.int16[Ot+11]=zt,a}}Zr.prototype.bytesPerElement=24,vn(Zr,"StructArrayLayout4i4ui4i24");class nn extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht){const pt=this.length;return this.resize(pt+1),this.emplace(pt,a,_e,it,ot,lt,ht)}emplace(a,_e,it,ot,lt,ht,pt){const gt=10*a,yt=5*a;return this.int16[gt+0]=_e,this.int16[gt+1]=it,this.int16[gt+2]=ot,this.float32[yt+2]=lt,this.float32[yt+3]=ht,this.float32[yt+4]=pt,a}}nn.prototype.bytesPerElement=20,vn(nn,"StructArrayLayout3i3f20");class Sn extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const _e=this.length;return this.resize(_e+1),this.emplace(_e,a)}emplace(a,_e){return this.uint32[1*a+0]=_e,a}}Sn.prototype.bytesPerElement=4,vn(Sn,"StructArrayLayout1ul4");class Dn extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt)}emplace(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot){const Ut=20*a,Kt=10*a;return this.int16[Ut+0]=_e,this.int16[Ut+1]=it,this.int16[Ut+2]=ot,this.int16[Ut+3]=lt,this.int16[Ut+4]=ht,this.float32[Kt+3]=pt,this.float32[Kt+4]=gt,this.float32[Kt+5]=yt,this.float32[Kt+6]=Et,this.int16[Ut+14]=Pt,this.uint32[Kt+8]=Rt,this.uint16[Ut+18]=zt,this.uint16[Ut+19]=Ot,a}}Dn.prototype.bytesPerElement=40,vn(Dn,"StructArrayLayout5i4f1i1ul2ui40");class _n extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht,pt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,a,_e,it,ot,lt,ht,pt)}emplace(a,_e,it,ot,lt,ht,pt,gt){const yt=8*a;return this.int16[yt+0]=_e,this.int16[yt+1]=it,this.int16[yt+2]=ot,this.int16[yt+4]=lt,this.int16[yt+5]=ht,this.int16[yt+6]=pt,this.int16[yt+7]=gt,a}}_n.prototype.bytesPerElement=16,vn(_n,"StructArrayLayout3i2i2i16");class Pn extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt){const ht=this.length;return this.resize(ht+1),this.emplace(ht,a,_e,it,ot,lt)}emplace(a,_e,it,ot,lt,ht){const pt=4*a,gt=8*a;return this.float32[pt+0]=_e,this.float32[pt+1]=it,this.float32[pt+2]=ot,this.int16[gt+6]=lt,this.int16[gt+7]=ht,a}}Pn.prototype.bytesPerElement=16,vn(Pn,"StructArrayLayout2f1f2i16");class qn extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot){const lt=this.length;return this.resize(lt+1),this.emplace(lt,a,_e,it,ot)}emplace(a,_e,it,ot,lt){const ht=12*a,pt=3*a;return this.uint8[ht+0]=_e,this.uint8[ht+1]=it,this.float32[pt+1]=ot,this.float32[pt+2]=lt,a}}qn.prototype.bytesPerElement=12,vn(qn,"StructArrayLayout2ub2f12");class Un extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e,it){const ot=this.length;return this.resize(ot+1),this.emplace(ot,a,_e,it)}emplace(a,_e,it,ot){const lt=3*a;return this.float32[lt+0]=_e,this.float32[lt+1]=it,this.float32[lt+2]=ot,a}}Un.prototype.bytesPerElement=12,vn(Un,"StructArrayLayout3f12");class wn extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,_e,it){const ot=this.length;return this.resize(ot+1),this.emplace(ot,a,_e,it)}emplace(a,_e,it,ot){const lt=3*a;return this.uint16[lt+0]=_e,this.uint16[lt+1]=it,this.uint16[lt+2]=ot,a}}wn.prototype.bytesPerElement=6,vn(wn,"StructArrayLayout3ui6");class ro extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut,Kt,rr,pr,nr,ur,mr){const fr=this.length;return this.resize(fr+1),this.emplace(fr,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut,Kt,rr,pr,nr,ur,mr)}emplace(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut,Kt,rr,pr,nr,ur,mr,fr){const Rr=30*a,Ir=15*a,Ur=60*a;return this.int16[Rr+0]=_e,this.int16[Rr+1]=it,this.int16[Rr+2]=ot,this.float32[Ir+2]=lt,this.float32[Ir+3]=ht,this.uint16[Rr+8]=pt,this.uint16[Rr+9]=gt,this.uint32[Ir+5]=yt,this.uint32[Ir+6]=Et,this.uint32[Ir+7]=Pt,this.uint16[Rr+16]=Rt,this.uint16[Rr+17]=zt,this.uint16[Rr+18]=Ot,this.float32[Ir+10]=Ut,this.float32[Ir+11]=Kt,this.uint8[Ur+48]=rr,this.uint8[Ur+49]=pr,this.uint8[Ur+50]=nr,this.uint32[Ir+13]=ur,this.int16[Rr+28]=mr,this.uint8[Ur+58]=fr,a}}ro.prototype.bytesPerElement=60,vn(ro,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class no extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut,Kt,rr,pr,nr,ur,mr,fr,Rr,Ir,Ur,en,Br,qr,Wr,Kr){const sn=this.length;return this.resize(sn+1),this.emplace(sn,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut,Kt,rr,pr,nr,ur,mr,fr,Rr,Ir,Ur,en,Br,qr,Wr,Kr)}emplace(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut,Kt,rr,pr,nr,ur,mr,fr,Rr,Ir,Ur,en,Br,qr,Wr,Kr,sn){const Nr=38*a,dn=19*a;return this.int16[Nr+0]=_e,this.int16[Nr+1]=it,this.int16[Nr+2]=ot,this.float32[dn+2]=lt,this.float32[dn+3]=ht,this.int16[Nr+8]=pt,this.int16[Nr+9]=gt,this.int16[Nr+10]=yt,this.int16[Nr+11]=Et,this.int16[Nr+12]=Pt,this.int16[Nr+13]=Rt,this.uint16[Nr+14]=zt,this.uint16[Nr+15]=Ot,this.uint16[Nr+16]=Ut,this.uint16[Nr+17]=Kt,this.uint16[Nr+18]=rr,this.uint16[Nr+19]=pr,this.uint16[Nr+20]=nr,this.uint16[Nr+21]=ur,this.uint16[Nr+22]=mr,this.uint16[Nr+23]=fr,this.uint16[Nr+24]=Rr,this.uint16[Nr+25]=Ir,this.uint16[Nr+26]=Ur,this.uint16[Nr+27]=en,this.uint16[Nr+28]=Br,this.uint32[dn+15]=qr,this.float32[dn+16]=Wr,this.float32[dn+17]=Kr,this.float32[dn+18]=sn,a}}no.prototype.bytesPerElement=76,vn(no,"StructArrayLayout3i2f6i15ui1ul3f76");class oo extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const _e=this.length;return this.resize(_e+1),this.emplace(_e,a)}emplace(a,_e){return this.float32[1*a+0]=_e,a}}oo.prototype.bytesPerElement=4,vn(oo,"StructArrayLayout1f4");class so extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot,lt){const ht=this.length;return this.resize(ht+1),this.emplace(ht,a,_e,it,ot,lt)}emplace(a,_e,it,ot,lt,ht){const pt=5*a;return this.float32[pt+0]=_e,this.float32[pt+1]=it,this.float32[pt+2]=ot,this.float32[pt+3]=lt,this.float32[pt+4]=ht,a}}so.prototype.bytesPerElement=20,vn(so,"StructArrayLayout5f20");class _s extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,_e,it,ot){const lt=this.length;return this.resize(lt+1),this.emplace(lt,a,_e,it,ot)}emplace(a,_e,it,ot,lt){const ht=6*a;return this.uint32[3*a+0]=_e,this.uint16[ht+2]=it,this.uint16[ht+3]=ot,this.uint16[ht+4]=lt,a}}_s.prototype.bytesPerElement=12,vn(_s,"StructArrayLayout1ul3ui12");class as extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,_e){const it=this.length;return this.resize(it+1),this.emplace(it,a,_e)}emplace(a,_e,it){const ot=2*a;return this.uint16[ot+0]=_e,this.uint16[ot+1]=it,a}}as.prototype.bytesPerElement=4,vn(as,"StructArrayLayout2ui4");class Us extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const _e=this.length;return this.resize(_e+1),this.emplace(_e,a)}emplace(a,_e){return this.uint16[1*a+0]=_e,a}}Us.prototype.bytesPerElement=2,vn(Us,"StructArrayLayout1ui2");class $a extends kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,_e){const it=this.length;return this.resize(it+1),this.emplace(it,a,_e)}emplace(a,_e,it){const ot=2*a;return this.float32[ot+0]=_e,this.float32[ot+1]=it,a}}$a.prototype.bytesPerElement=8,vn($a,"StructArrayLayout2f8");class bo extends vr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}bo.prototype.size=40;class ao extends Dn{get(a){return new bo(this,a)}}vn(ao,"CollisionBoxArray");class eo extends vr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}eo.prototype.size=60;class Go extends ro{get(a){return new eo(this,a)}}vn(Go,"PlacedSymbolArray");class Es extends vr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(a){this._structArray.uint32[this._pos4+15]=a}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Es.prototype.size=76;class _o extends no{get(a){return new Es(this,a)}}vn(_o,"SymbolInstanceArray");class Ps extends oo{getoffsetX(a){return this.float32[1*a+0]}}vn(Ps,"GlyphOffsetArray");class dm extends Jr{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}vn(dm,"SymbolLineVertexArray");class pu extends vr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}pu.prototype.size=12;class Ep extends _s{get(a){return new pu(this,a)}}vn(Ep,"FeatureIndexArray");class $l extends as{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}vn($l,"FillExtrusionCentroidArray");const Ql=Sr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),fu=Sr([{name:"a_dash",components:4,type:"Uint16"}]);var pm={exports:{}},Sp={exports:{}};Sp.exports=function(j,a){var _e,it,ot,lt,ht,pt,gt,yt;for(it=j.length-(_e=3&j.length),ot=a,ht=3432918353,pt=461845907,yt=0;yt<it;)gt=255&j.charCodeAt(yt)|(255&j.charCodeAt(++yt))<<8|(255&j.charCodeAt(++yt))<<16|(255&j.charCodeAt(++yt))<<24,++yt,ot=27492+(65535&(lt=5*(65535&(ot=(ot^=gt=(65535&(gt=(gt=(65535&gt)*ht+(((gt>>>16)*ht&65535)<<16)&4294967295)<<15|gt>>>17))*pt+(((gt>>>16)*pt&65535)<<16)&4294967295)<<13|ot>>>19))+((5*(ot>>>16)&65535)<<16)&4294967295))+((58964+(lt>>>16)&65535)<<16);switch(gt=0,_e){case 3:gt^=(255&j.charCodeAt(yt+2))<<16;case 2:gt^=(255&j.charCodeAt(yt+1))<<8;case 1:ot^=gt=(65535&(gt=(gt=(65535&(gt^=255&j.charCodeAt(yt)))*ht+(((gt>>>16)*ht&65535)<<16)&4294967295)<<15|gt>>>17))*pt+(((gt>>>16)*pt&65535)<<16)&4294967295}return ot^=j.length,ot=2246822507*(65535&(ot^=ot>>>16))+((2246822507*(ot>>>16)&65535)<<16)&4294967295,ot=3266489909*(65535&(ot^=ot>>>13))+((3266489909*(ot>>>16)&65535)<<16)&4294967295,(ot^=ot>>>16)>>>0};var ky=Sp.exports,h1={exports:{}};h1.exports=function(j,a){for(var _e,it=j.length,ot=a^it,lt=0;it>=4;)_e=1540483477*(65535&(_e=255&j.charCodeAt(lt)|(255&j.charCodeAt(++lt))<<8|(255&j.charCodeAt(++lt))<<16|(255&j.charCodeAt(++lt))<<24))+((1540483477*(_e>>>16)&65535)<<16),ot=1540483477*(65535&ot)+((1540483477*(ot>>>16)&65535)<<16)^(_e=1540483477*(65535&(_e^=_e>>>24))+((1540483477*(_e>>>16)&65535)<<16)),it-=4,++lt;switch(it){case 3:ot^=(255&j.charCodeAt(lt+2))<<16;case 2:ot^=(255&j.charCodeAt(lt+1))<<8;case 1:ot=1540483477*(65535&(ot^=255&j.charCodeAt(lt)))+((1540483477*(ot>>>16)&65535)<<16)}return ot=1540483477*(65535&(ot^=ot>>>13))+((1540483477*(ot>>>16)&65535)<<16),(ot^=ot>>>15)>>>0};var u1=ky,Vw=h1.exports;pm.exports=u1,pm.exports.murmur3=u1,pm.exports.murmur2=Vw;var e_=St(pm.exports);class Z0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,_e,it,ot){this.ids.push(d1(a)),this.positions.push(_e,it,ot)}getPositions(a){const _e=d1(a);let it=0,ot=this.ids.length-1;for(;it<ot;){const ht=it+ot>>1;this.ids[ht]>=_e?ot=ht:it=ht+1}const lt=[];for(;this.ids[it]===_e;)lt.push({index:this.positions[3*it],start:this.positions[3*it+1],end:this.positions[3*it+2]}),it++;return lt}static serialize(a,_e){const it=new Float64Array(a.ids),ot=new Uint32Array(a.positions);return t_(it,ot,0,it.length-1),_e&&_e.push(it.buffer,ot.buffer),{ids:it,positions:ot}}static deserialize(a){const _e=new Z0;return _e.ids=a.ids,_e.positions=a.positions,_e.indexed=!0,_e}}function d1(j){const a=+j;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:e_(String(j))}function t_(j,a,_e,it){for(;_e<it;){const ot=j[_e+it>>1];let lt=_e-1,ht=it+1;for(;;){do lt++;while(j[lt]<ot);do ht--;while(j[ht]>ot);if(lt>=ht)break;X0(j,lt,ht),X0(a,3*lt,3*ht),X0(a,3*lt+1,3*ht+1),X0(a,3*lt+2,3*ht+2)}ht-_e<it-ht?(t_(j,a,_e,ht),_e=ht+1):(t_(j,a,ht+1,it),it=ht)}}function X0(j,a,_e){const it=j[a];j[a]=j[_e],j[_e]=it}vn(Z0,"FeaturePositionMap");class mu{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,_e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,_e),this.initialized=!0),!!this.location}}class Y0 extends mu{constructor(a){super(a),this.current=0}set(a,_e,it){this.fetchUniformLocation(a,_e)&&this.current!==it&&(this.current=it,this.gl.uniform1f(this.location,it))}}class p1 extends mu{constructor(a){super(a),this.current=[0,0,0,0]}set(a,_e,it){this.fetchUniformLocation(a,_e)&&(it[0]===this.current[0]&&it[1]===this.current[1]&&it[2]===this.current[2]&&it[3]===this.current[3]||(this.current=it,this.gl.uniform4f(this.location,it[0],it[1],it[2],it[3])))}}class f1 extends mu{constructor(a){super(a),this.current=No.transparent}set(a,_e,it){this.fetchUniformLocation(a,_e)&&(it.r===this.current.r&&it.g===this.current.g&&it.b===this.current.b&&it.a===this.current.a||(this.current=it,this.gl.uniform4f(this.location,it.r,it.g,it.b,it.a)))}}const Nw=new Float32Array(16),jw=new Float32Array(9),Uw=new Float32Array(4);function i_(j){return[yr(255*j.r,255*j.g),yr(255*j.b,255*j.a)]}class Cy{constructor(a,_e,it){this.value=a,this.uniformNames=_e.map(ot=>`u_${ot}`),this.type=it}setUniform(a,_e,it,ot,lt){_e.set(a,lt,ot.constantOr(this.value))}getBinding(a,_e){return this.type==="color"?new f1(a):new Y0(a)}}class fm{constructor(a,_e){this.uniformNames=_e.map(it=>`u_${it}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,_e,it,ot,lt){const ht=lt==="u_pattern"||lt==="u_dash"?this.pattern:lt==="u_pixel_ratio"?this.pixelRatio:null;ht&&_e.set(a,lt,ht)}getBinding(a,_e){return _e==="u_pattern"||_e==="u_dash"?new p1(a):new Y0(a)}}class gu{constructor(a,_e,it,ot){this.expression=a,this.type=it,this.maxValue=0,this.paintVertexAttributes=_e.map(lt=>({name:`a_${lt}`,type:"Float32",components:it==="color"?2:1,offset:0})),this.paintVertexArray=new ot}populatePaintArray(a,_e,it,ot,lt,ht){const pt=this.paintVertexArray.length,gt=this.expression.evaluate(new kt(0),_e,{},lt,ot,ht);this.paintVertexArray.resize(a),this._setPaintValue(pt,a,gt)}updatePaintArray(a,_e,it,ot,lt){const ht=this.expression.evaluate({zoom:0},it,ot,void 0,lt);this._setPaintValue(a,_e,ht)}_setPaintValue(a,_e,it){if(this.type==="color"){const ot=i_(it);for(let lt=a;lt<_e;lt++)this.paintVertexArray.emplace(lt,ot[0],ot[1])}else{for(let ot=a;ot<_e;ot++)this.paintVertexArray.emplace(ot,it);this.maxValue=Math.max(this.maxValue,Math.abs(it))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zl{constructor(a,_e,it,ot,lt,ht){this.expression=a,this.uniformNames=_e.map(pt=>`u_${pt}_t`),this.type=it,this.useIntegerZoom=ot,this.zoom=lt,this.maxValue=0,this.paintVertexAttributes=_e.map(pt=>({name:`a_${pt}`,type:"Float32",components:it==="color"?4:2,offset:0})),this.paintVertexArray=new ht}populatePaintArray(a,_e,it,ot,lt,ht){const pt=this.expression.evaluate(new kt(this.zoom),_e,{},lt,ot,ht),gt=this.expression.evaluate(new kt(this.zoom+1),_e,{},lt,ot,ht),yt=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(yt,a,pt,gt)}updatePaintArray(a,_e,it,ot,lt){const ht=this.expression.evaluate({zoom:this.zoom},it,ot,void 0,lt),pt=this.expression.evaluate({zoom:this.zoom+1},it,ot,void 0,lt);this._setPaintValue(a,_e,ht,pt)}_setPaintValue(a,_e,it,ot){if(this.type==="color"){const lt=i_(it),ht=i_(ot);for(let pt=a;pt<_e;pt++)this.paintVertexArray.emplace(pt,lt[0],lt[1],ht[0],ht[1])}else{for(let lt=a;lt<_e;lt++)this.paintVertexArray.emplace(lt,it,ot);this.maxValue=Math.max(this.maxValue,Math.abs(it),Math.abs(ot))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,_e,it,ot,lt){const ht=this.useIntegerZoom?Math.floor(it.zoom):it.zoom,pt=Nt(this.expression.interpolationFactor(ht,this.zoom,this.zoom+1),0,1);_e.set(a,lt,pt)}getBinding(a,_e){return new Y0(a)}}class Nu{constructor(a,_e,it,ot,lt){this.expression=a,this.layerId=lt,this.paintVertexAttributes=(it==="array"?fu:Ql).members;for(let ht=0;ht<_e.length;++ht);this.paintVertexArray=new ot}populatePaintArray(a,_e,it){const ot=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(ot,a,_e.patterns&&_e.patterns[this.layerId],it)}updatePaintArray(a,_e,it,ot,lt,ht){this._setPaintValues(a,_e,it.patterns&&it.patterns[this.layerId],ht)}_setPaintValues(a,_e,it,ot){if(!ot||!it)return;const lt=ot[it];if(!lt)return;const{tl:ht,br:pt,pixelRatio:gt}=lt;for(let yt=a;yt<_e;yt++)this.paintVertexArray.emplace(yt,ht[0],ht[1],pt[0],pt[1],gt)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ju{constructor(a,_e,it=()=>!0){this.binders={},this._buffers=[];const ot=[];for(const lt in a.paint._values){if(!it(lt))continue;const ht=a.paint.get(lt);if(!(ht instanceof _i&&Ru(ht.property.specification)))continue;const pt=Hw(lt,a.type),gt=ht.value,yt=ht.property.specification.type,Et=!!ht.property.useIntegerZoom,Pt=lt==="line-dasharray"||lt.endsWith("pattern"),Rt=lt==="line-dasharray"&&a.layout.get("line-cap").value.kind!=="constant";if(gt.kind!=="constant"||Rt)if(gt.kind==="source"||Rt||Pt){const zt=m1(lt,yt,"source");this.binders[lt]=Pt?new Nu(gt,pt,yt,zt,a.id):new gu(gt,pt,yt,zt),ot.push(`/a_${lt}`)}else{const zt=m1(lt,yt,"composite");this.binders[lt]=new zl(gt,pt,yt,Et,_e,zt),ot.push(`/z_${lt}`)}else this.binders[lt]=Pt?new fm(gt.value,pt):new Cy(gt.value,pt,yt),ot.push(`/u_${lt}`)}this.cacheKey=ot.sort().join("")}getMaxValue(a){const _e=this.binders[a];return _e instanceof gu||_e instanceof zl?_e.maxValue:0}populatePaintArrays(a,_e,it,ot,lt,ht){for(const pt in this.binders){const gt=this.binders[pt];(gt instanceof gu||gt instanceof zl||gt instanceof Nu)&&gt.populatePaintArray(a,_e,it,ot,lt,ht)}}setConstantPatternPositions(a){for(const _e in this.binders){const it=this.binders[_e];it instanceof fm&&it.setConstantPatternPositions(a)}}updatePaintArrays(a,_e,it,ot,lt,ht){let pt=!1;for(const gt in a){const yt=_e.getPositions(gt);for(const Et of yt){const Pt=it.feature(Et.index);for(const Rt in this.binders){const zt=this.binders[Rt];if((zt instanceof gu||zt instanceof zl||zt instanceof Nu)&&zt.expression.isStateDependent===!0){const Ot=ot.paint.get(Rt);zt.expression=Ot.value,zt.updatePaintArray(Et.start,Et.end,Pt,a[gt],lt,ht),pt=!0}}}}return pt}defines(){const a=[];for(const _e in this.binders){const it=this.binders[_e];(it instanceof Cy||it instanceof fm)&&a.push(...it.uniformNames.map(ot=>`#define HAS_UNIFORM_${ot}`))}return a}getBinderAttributes(){const a=[];for(const _e in this.binders){const it=this.binders[_e];if(it instanceof gu||it instanceof zl||it instanceof Nu)for(let ot=0;ot<it.paintVertexAttributes.length;ot++)a.push(it.paintVertexAttributes[ot].name)}return a}getBinderUniforms(){const a=[];for(const _e in this.binders){const it=this.binders[_e];if(it instanceof Cy||it instanceof fm||it instanceof zl)for(const ot of it.uniformNames)a.push(ot)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const _e=[];for(const it in this.binders){const ot=this.binders[it];if(ot instanceof Cy||ot instanceof fm||ot instanceof zl)for(const lt of ot.uniformNames)_e.push({name:lt,property:it,binding:ot.getBinding(a,lt)})}return _e}setUniforms(a,_e,it,ot,lt){for(const{name:ht,property:pt,binding:gt}of it)this.binders[pt].setUniform(a,gt,lt,ot.get(pt),ht)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const _e=this.binders[a];(_e instanceof gu||_e instanceof zl||_e instanceof Nu)&&_e.paintVertexBuffer&&this._buffers.push(_e.paintVertexBuffer)}}upload(a){for(const _e in this.binders){const it=this.binders[_e];(it instanceof gu||it instanceof zl||it instanceof Nu)&&it.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const _e=this.binders[a];(_e instanceof gu||_e instanceof zl||_e instanceof Nu)&&_e.destroy()}}}class Tp{constructor(a,_e,it=()=>!0){this.programConfigurations={};for(const ot of a)this.programConfigurations[ot.id]=new ju(ot,_e,it);this.needsUpload=!1,this._featureMap=new Z0,this._bufferOffset=0}populatePaintArrays(a,_e,it,ot,lt,ht,pt){for(const gt in this.programConfigurations)this.programConfigurations[gt].populatePaintArrays(a,_e,ot,lt,ht,pt);_e.id!==void 0&&this._featureMap.add(_e.id,it,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,_e,it,ot,lt){for(const ht of it)this.needsUpload=this.programConfigurations[ht.id].updatePaintArrays(a,this._featureMap,_e,ht,ot,lt)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const _e in this.programConfigurations)this.programConfigurations[_e].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const Gw={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Hw(j,a){return Gw[j]||[j.replace(`${a}-`,"").replace(/-/g,"_")]}const qw={"line-pattern":{source:Mr,composite:Mr},"fill-pattern":{source:Mr,composite:Mr},"fill-extrusion-pattern":{source:Mr,composite:Mr},"line-dasharray":{source:Gr,composite:Gr}},Ww={color:{source:$a,composite:Qr},number:{source:oo,composite:$a}};function m1(j,a,_e){const it=qw[j];return it&&it[_e]||Ww[a][_e]}vn(Cy,"ConstantBinder"),vn(fm,"PatternConstantBinder"),vn(gu,"SourceExpressionBinder"),vn(Nu,"PatternCompositeBinder"),vn(zl,"CompositeExpressionBinder"),vn(ju,"ProgramConfiguration",{omit:["_buffers"]}),vn(Tp,"ProgramConfigurationSet");const g1="-transition";class Ol extends Ds{constructor(a,_e){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&a.type!=="sky"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),_e.layout&&(this._unevaluatedLayout=new er(_e.layout)),_e.paint)){this._transitionablePaint=new Vt(_e.paint);for(const it in a.paint)this.setPaintProperty(it,a.paint[it],{validate:!1});for(const it in a.layout)this.setLayoutProperty(it,a.layout[it],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tr(_e.paint)}}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,_e,it={}){_e!=null&&this._validate(Xv,`layers.${this.id}.layout.${a}`,a,_e,it)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,_e):this.visibility=_e)}getPaintProperty(a){return Ao(a,g1)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,_e,it={}){if(_e!=null&&this._validate(Zv,`layers.${this.id}.paint.${a}`,a,_e,it))return!1;if(Ao(a,g1))return this._transitionablePaint.setTransition(a.slice(0,-11),_e||void 0),!1;{const ot=this._transitionablePaint._values[a],lt=ot.value.isDataDriven(),ht=ot.value;this._transitionablePaint.setValue(a,_e),this._handleSpecialPaintPropertyUpdate(a);const pt=this._transitionablePaint._values[a].value,gt=pt.isDataDriven(),yt=Ao(a,"pattern")||a==="line-dasharray";return gt||lt||yt||this._handleOverridablePaintPropertyUpdate(a,ht,pt)}}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getProgramConfiguration(a){return null}_handleOverridablePaintPropertyUpdate(a,_e,it){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,_e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,_e)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,_e)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Eo(a,(_e,it)=>!(_e===void 0||it==="layout"&&!Object.keys(_e).length||it==="paint"&&!Object.keys(_e).length))}_validate(a,_e,it,ot,lt={}){return(!lt||lt.validate!==!1)&&G0(this,a.call(U0,{key:_e,layerType:this.type,objectKey:it,value:ot,styleSpec:jr,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const _e=this.paint.get(a);if(_e instanceof _i&&Ru(_e.property.specification)&&(_e.value.kind==="source"||_e.value.kind==="composite")&&_e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=lm(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Zw=Sr([{name:"a_pos",components:2,type:"Int16"}],4),Xw=Sr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ho{constructor(a=[]){this.segments=a}prepareSegment(a,_e,it,ot){let lt=this.segments[this.segments.length-1];return a>Ho.MAX_VERTEX_ARRAY_LENGTH&&Xn(`Max vertices per segment is ${Ho.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!lt||lt.vertexLength+a>Ho.MAX_VERTEX_ARRAY_LENGTH||lt.sortKey!==ot)&&(lt={vertexOffset:_e.length,primitiveOffset:it.length,vertexLength:0,primitiveLength:0},ot!==void 0&&(lt.sortKey=ot),this.segments.push(lt)),lt}get(){return this.segments}destroy(){for(const a of this.segments)for(const _e in a.vaos)a.vaos[_e].destroy()}static simpleSegment(a,_e,it,ot){return new Ho([{vertexOffset:a,primitiveOffset:_e,vertexLength:it,primitiveLength:ot,vaos:{},sortKey:0}])}}Ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,vn(Ho,"SegmentVector");var Cn=8192;class Uu{constructor(a,_e){a&&(_e?this.setSouthWest(a).setNorthEast(_e):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof lo?new lo(a.lng,a.lat):lo.convert(a),this}setSouthWest(a){return this._sw=a instanceof lo?new lo(a.lng,a.lat):lo.convert(a),this}extend(a){const _e=this._sw,it=this._ne;let ot,lt;if(a instanceof lo)ot=a,lt=a;else{if(!(a instanceof Uu))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Uu.convert(a)):this.extend(lo.convert(a)):typeof a=="object"&&a!==null&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(lo.convert(a)):this;if(ot=a._sw,lt=a._ne,!ot||!lt)return this}return _e||it?(_e.lng=Math.min(ot.lng,_e.lng),_e.lat=Math.min(ot.lat,_e.lat),it.lng=Math.max(lt.lng,it.lng),it.lat=Math.max(lt.lat,it.lat)):(this._sw=new lo(ot.lng,ot.lat),this._ne=new lo(lt.lng,lt.lat)),this}getCenter(){return new lo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new lo(this.getWest(),this.getNorth())}getSouthEast(){return new lo(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:_e,lat:it}=lo.convert(a);let ot=this._sw.lng<=_e&&_e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ot=this._sw.lng>=_e&&_e>=this._ne.lng),this._sw.lat<=it&&it<=this._ne.lat&&ot}static convert(a){return!a||a instanceof Uu?a:new Uu(a)}}var K0=1e-6,Gs=typeof Float32Array<"u"?Float32Array:Array;function y1(){var j=new Gs(9);return Gs!=Float32Array&&(j[1]=0,j[2]=0,j[3]=0,j[5]=0,j[6]=0,j[7]=0),j[0]=1,j[4]=1,j[8]=1,j}function v1(j,a,_e){var it=a[0],ot=a[1],lt=a[2],ht=a[3],pt=a[4],gt=a[5],yt=a[6],Et=a[7],Pt=a[8],Rt=_e[0],zt=_e[1],Ot=_e[2],Ut=_e[3],Kt=_e[4],rr=_e[5],pr=_e[6],nr=_e[7],ur=_e[8];return j[0]=Rt*it+zt*ht+Ot*yt,j[1]=Rt*ot+zt*pt+Ot*Et,j[2]=Rt*lt+zt*gt+Ot*Pt,j[3]=Ut*it+Kt*ht+rr*yt,j[4]=Ut*ot+Kt*pt+rr*Et,j[5]=Ut*lt+Kt*gt+rr*Pt,j[6]=pr*it+nr*ht+ur*yt,j[7]=pr*ot+nr*pt+ur*Et,j[8]=pr*lt+nr*gt+ur*Pt,j}function Bl(j){return j[0]=1,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=1,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=1,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j}function r_(j,a){var _e=a[0],it=a[1],ot=a[2],lt=a[3],ht=a[4],pt=a[5],gt=a[6],yt=a[7],Et=a[8],Pt=a[9],Rt=a[10],zt=a[11],Ot=a[12],Ut=a[13],Kt=a[14],rr=a[15],pr=_e*pt-it*ht,nr=_e*gt-ot*ht,ur=_e*yt-lt*ht,mr=it*gt-ot*pt,fr=it*yt-lt*pt,Rr=ot*yt-lt*gt,Ir=Et*Ut-Pt*Ot,Ur=Et*Kt-Rt*Ot,en=Et*rr-zt*Ot,Br=Pt*Kt-Rt*Ut,qr=Pt*rr-zt*Ut,Wr=Rt*rr-zt*Kt,Kr=pr*Wr-nr*qr+ur*Br+mr*en-fr*Ur+Rr*Ir;return Kr?(j[0]=(pt*Wr-gt*qr+yt*Br)*(Kr=1/Kr),j[1]=(ot*qr-it*Wr-lt*Br)*Kr,j[2]=(Ut*Rr-Kt*fr+rr*mr)*Kr,j[3]=(Rt*fr-Pt*Rr-zt*mr)*Kr,j[4]=(gt*en-ht*Wr-yt*Ur)*Kr,j[5]=(_e*Wr-ot*en+lt*Ur)*Kr,j[6]=(Kt*ur-Ot*Rr-rr*nr)*Kr,j[7]=(Et*Rr-Rt*ur+zt*nr)*Kr,j[8]=(ht*qr-pt*en+yt*Ir)*Kr,j[9]=(it*en-_e*qr-lt*Ir)*Kr,j[10]=(Ot*fr-Ut*ur+rr*pr)*Kr,j[11]=(Pt*ur-Et*fr-zt*pr)*Kr,j[12]=(pt*Ur-ht*Br-gt*Ir)*Kr,j[13]=(_e*Br-it*Ur+ot*Ir)*Kr,j[14]=(Ut*nr-Ot*mr-Kt*pr)*Kr,j[15]=(Et*mr-Pt*nr+Rt*pr)*Kr,j):null}function kp(j,a,_e){var it=a[0],ot=a[1],lt=a[2],ht=a[3],pt=a[4],gt=a[5],yt=a[6],Et=a[7],Pt=a[8],Rt=a[9],zt=a[10],Ot=a[11],Ut=a[12],Kt=a[13],rr=a[14],pr=a[15],nr=_e[0],ur=_e[1],mr=_e[2],fr=_e[3];return j[0]=nr*it+ur*pt+mr*Pt+fr*Ut,j[1]=nr*ot+ur*gt+mr*Rt+fr*Kt,j[2]=nr*lt+ur*yt+mr*zt+fr*rr,j[3]=nr*ht+ur*Et+mr*Ot+fr*pr,j[4]=(nr=_e[4])*it+(ur=_e[5])*pt+(mr=_e[6])*Pt+(fr=_e[7])*Ut,j[5]=nr*ot+ur*gt+mr*Rt+fr*Kt,j[6]=nr*lt+ur*yt+mr*zt+fr*rr,j[7]=nr*ht+ur*Et+mr*Ot+fr*pr,j[8]=(nr=_e[8])*it+(ur=_e[9])*pt+(mr=_e[10])*Pt+(fr=_e[11])*Ut,j[9]=nr*ot+ur*gt+mr*Rt+fr*Kt,j[10]=nr*lt+ur*yt+mr*zt+fr*rr,j[11]=nr*ht+ur*Et+mr*Ot+fr*pr,j[12]=(nr=_e[12])*it+(ur=_e[13])*pt+(mr=_e[14])*Pt+(fr=_e[15])*Ut,j[13]=nr*ot+ur*gt+mr*Rt+fr*Kt,j[14]=nr*lt+ur*yt+mr*zt+fr*rr,j[15]=nr*ht+ur*Et+mr*Ot+fr*pr,j}function Py(j,a,_e){var it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut=_e[0],Kt=_e[1],rr=_e[2];return a===j?(j[12]=a[0]*Ut+a[4]*Kt+a[8]*rr+a[12],j[13]=a[1]*Ut+a[5]*Kt+a[9]*rr+a[13],j[14]=a[2]*Ut+a[6]*Kt+a[10]*rr+a[14],j[15]=a[3]*Ut+a[7]*Kt+a[11]*rr+a[15]):(ot=a[1],lt=a[2],ht=a[3],pt=a[4],gt=a[5],yt=a[6],Et=a[7],Pt=a[8],Rt=a[9],zt=a[10],Ot=a[11],j[0]=it=a[0],j[1]=ot,j[2]=lt,j[3]=ht,j[4]=pt,j[5]=gt,j[6]=yt,j[7]=Et,j[8]=Pt,j[9]=Rt,j[10]=zt,j[11]=Ot,j[12]=it*Ut+pt*Kt+Pt*rr+a[12],j[13]=ot*Ut+gt*Kt+Rt*rr+a[13],j[14]=lt*Ut+yt*Kt+zt*rr+a[14],j[15]=ht*Ut+Et*Kt+Ot*rr+a[15]),j}function Cp(j,a,_e){var it=_e[0],ot=_e[1],lt=_e[2];return j[0]=a[0]*it,j[1]=a[1]*it,j[2]=a[2]*it,j[3]=a[3]*it,j[4]=a[4]*ot,j[5]=a[5]*ot,j[6]=a[6]*ot,j[7]=a[7]*ot,j[8]=a[8]*lt,j[9]=a[9]*lt,j[10]=a[10]*lt,j[11]=a[11]*lt,j[12]=a[12],j[13]=a[13],j[14]=a[14],j[15]=a[15],j}function n_(j,a,_e){var it=Math.sin(_e),ot=Math.cos(_e),lt=a[4],ht=a[5],pt=a[6],gt=a[7],yt=a[8],Et=a[9],Pt=a[10],Rt=a[11];return a!==j&&(j[0]=a[0],j[1]=a[1],j[2]=a[2],j[3]=a[3],j[12]=a[12],j[13]=a[13],j[14]=a[14],j[15]=a[15]),j[4]=lt*ot+yt*it,j[5]=ht*ot+Et*it,j[6]=pt*ot+Pt*it,j[7]=gt*ot+Rt*it,j[8]=yt*ot-lt*it,j[9]=Et*ot-ht*it,j[10]=Pt*ot-pt*it,j[11]=Rt*ot-gt*it,j}function Q0(j,a,_e){var it=Math.sin(_e),ot=Math.cos(_e),lt=a[0],ht=a[1],pt=a[2],gt=a[3],yt=a[8],Et=a[9],Pt=a[10],Rt=a[11];return a!==j&&(j[4]=a[4],j[5]=a[5],j[6]=a[6],j[7]=a[7],j[12]=a[12],j[13]=a[13],j[14]=a[14],j[15]=a[15]),j[0]=lt*ot-yt*it,j[1]=ht*ot-Et*it,j[2]=pt*ot-Pt*it,j[3]=gt*ot-Rt*it,j[8]=lt*it+yt*ot,j[9]=ht*it+Et*ot,j[10]=pt*it+Pt*ot,j[11]=gt*it+Rt*ot,j}function _1(j,a){return j[0]=a[0],j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=a[1],j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=a[2],j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j}function x1(j,a,_e){var it,ot,lt,ht=_e[0],pt=_e[1],gt=_e[2],yt=Math.hypot(ht,pt,gt);return yt<K0?null:(ht*=yt=1/yt,pt*=yt,gt*=yt,it=Math.sin(a),ot=Math.cos(a),j[0]=ht*ht*(lt=1-ot)+ot,j[1]=pt*ht*lt+gt*it,j[2]=gt*ht*lt-pt*it,j[3]=0,j[4]=ht*pt*lt-gt*it,j[5]=pt*pt*lt+ot,j[6]=gt*pt*lt+ht*it,j[7]=0,j[8]=ht*gt*lt+pt*it,j[9]=pt*gt*lt-ht*it,j[10]=gt*gt*lt+ot,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j)}Math.hypot||(Math.hypot=function(){for(var j=0,a=arguments.length;a--;)j+=arguments[a]*arguments[a];return Math.sqrt(j)});var Yw=kp;function o_(){var j=new Gs(3);return Gs!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0),j}function b1(j){var a=new Gs(3);return a[0]=j[0],a[1]=j[1],a[2]=j[2],a}function Ay(j){return Math.hypot(j[0],j[1],j[2])}function mm(j,a,_e){var it=new Gs(3);return it[0]=j,it[1]=a,it[2]=_e,it}function yu(j,a,_e){return j[0]=a[0]+_e[0],j[1]=a[1]+_e[1],j[2]=a[2]+_e[2],j}function s_(j,a,_e){return j[0]=a[0]-_e[0],j[1]=a[1]-_e[1],j[2]=a[2]-_e[2],j}function w1(j,a,_e){return j[0]=a[0]*_e[0],j[1]=a[1]*_e[1],j[2]=a[2]*_e[2],j}function Iy(j,a,_e){return j[0]=Math.min(a[0],_e[0]),j[1]=Math.min(a[1],_e[1]),j[2]=Math.min(a[2],_e[2]),j}function My(j,a,_e){return j[0]=Math.max(a[0],_e[0]),j[1]=Math.max(a[1],_e[1]),j[2]=Math.max(a[2],_e[2]),j}function Ks(j,a,_e){return j[0]=a[0]*_e,j[1]=a[1]*_e,j[2]=a[2]*_e,j}function Ly(j,a,_e,it){return j[0]=a[0]+_e[0]*it,j[1]=a[1]+_e[1]*it,j[2]=a[2]+_e[2]*it,j}function As(j,a){var _e=a[0],it=a[1],ot=a[2],lt=_e*_e+it*it+ot*ot;return lt>0&&(lt=1/Math.sqrt(lt)),j[0]=a[0]*lt,j[1]=a[1]*lt,j[2]=a[2]*lt,j}function yl(j,a){return j[0]*a[0]+j[1]*a[1]+j[2]*a[2]}function a_(j,a,_e){var it=a[0],ot=a[1],lt=a[2],ht=_e[0],pt=_e[1],gt=_e[2];return j[0]=ot*gt-lt*pt,j[1]=lt*ht-it*gt,j[2]=it*pt-ot*ht,j}function jo(j,a,_e){var it=a[0],ot=a[1],lt=a[2],ht=_e[3]*it+_e[7]*ot+_e[11]*lt+_e[15];return j[0]=(_e[0]*it+_e[4]*ot+_e[8]*lt+_e[12])/(ht=ht||1),j[1]=(_e[1]*it+_e[5]*ot+_e[9]*lt+_e[13])/ht,j[2]=(_e[2]*it+_e[6]*ot+_e[10]*lt+_e[14])/ht,j}function E1(j,a,_e){var it=_e[0],ot=_e[1],lt=_e[2],ht=a[0],pt=a[1],gt=a[2],yt=ot*gt-lt*pt,Et=lt*ht-it*gt,Pt=it*pt-ot*ht,Rt=ot*Pt-lt*Et,zt=lt*yt-it*Pt,Ot=it*Et-ot*yt,Ut=2*_e[3];return Et*=Ut,Pt*=Ut,zt*=2,Ot*=2,j[0]=ht+(yt*=Ut)+(Rt*=2),j[1]=pt+Et+zt,j[2]=gt+Pt+Ot,j}var Ry,Fl=s_,Kw=w1,Qw=Ay;function S1(j,a,_e){return j[0]=a[0]*_e,j[1]=a[1]*_e,j[2]=a[2]*_e,j[3]=a[3]*_e,j}function T1(j,a){var _e=a[0],it=a[1],ot=a[2],lt=a[3],ht=_e*_e+it*it+ot*ot+lt*lt;return ht>0&&(ht=1/Math.sqrt(ht)),j[0]=_e*ht,j[1]=it*ht,j[2]=ot*ht,j[3]=lt*ht,j}function Pp(j,a,_e){var it=a[0],ot=a[1],lt=a[2],ht=a[3];return j[0]=_e[0]*it+_e[4]*ot+_e[8]*lt+_e[12]*ht,j[1]=_e[1]*it+_e[5]*ot+_e[9]*lt+_e[13]*ht,j[2]=_e[2]*it+_e[6]*ot+_e[10]*lt+_e[14]*ht,j[3]=_e[3]*it+_e[7]*ot+_e[11]*lt+_e[15]*ht,j}function k1(){var j=new Gs(4);return Gs!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0),j[3]=1,j}function C1(j){return j[0]=0,j[1]=0,j[2]=0,j[3]=1,j}function P1(j,a,_e){_e*=.5;var it=a[0],ot=a[1],lt=a[2],ht=a[3],pt=Math.sin(_e),gt=Math.cos(_e);return j[0]=it*gt+ht*pt,j[1]=ot*gt+lt*pt,j[2]=lt*gt-ot*pt,j[3]=ht*gt-it*pt,j}function A1(j,a,_e){_e*=.5;var it=a[0],ot=a[1],lt=a[2],ht=a[3],pt=Math.sin(_e),gt=Math.cos(_e);return j[0]=it*gt-lt*pt,j[1]=ot*gt+ht*pt,j[2]=lt*gt+it*pt,j[3]=ht*gt-ot*pt,j}o_(),Ry=new Gs(4),Gs!=Float32Array&&(Ry[0]=0,Ry[1]=0,Ry[2]=0,Ry[3]=0);var Jw=T1;o_(),mm(1,0,0),mm(0,1,0),k1(),k1(),y1();const eE=Sr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:I1}=eE,M1=Sr([{name:"a_pos_3",components:3,type:"Int16"}]);var Dy=Sr([{name:"a_pos",type:"Int16",components:2}]);class l_{constructor(a,_e){this.pos=a,this.dir=_e}intersectsPlane(a,_e,it){const ot=yl(_e,this.dir);if(Math.abs(ot)<1e-6)return!1;const lt=((a[0]-this.pos[0])*_e[0]+(a[1]-this.pos[1])*_e[1]+(a[2]-this.pos[2])*_e[2])/ot;return it[0]=this.pos[0]+this.dir[0]*lt,it[1]=this.pos[1]+this.dir[1]*lt,it[2]=this.pos[2]+this.dir[2]*lt,!0}closestPointOnSphere(a,_e,it){if(function(zt,Ot){var Ut=zt[0],Kt=zt[1],rr=zt[2],pr=Ot[0],nr=Ot[1],ur=Ot[2];return Math.abs(Ut-pr)<=K0*Math.max(1,Math.abs(Ut),Math.abs(pr))&&Math.abs(Kt-nr)<=K0*Math.max(1,Math.abs(Kt),Math.abs(nr))&&Math.abs(rr-ur)<=K0*Math.max(1,Math.abs(rr),Math.abs(ur))}(this.pos,a)||_e===0)return it[0]=it[1]=it[2]=0,!1;const[ot,lt,ht]=this.dir,pt=this.pos[0]-a[0],gt=this.pos[1]-a[1],yt=this.pos[2]-a[2],Et=ot*ot+lt*lt+ht*ht,Pt=2*(pt*ot+gt*lt+yt*ht),Rt=Pt*Pt-4*Et*(pt*pt+gt*gt+yt*yt-_e*_e);if(Rt<0){const zt=Math.max(-Pt/2,0),Ot=pt+ot*zt,Ut=gt+lt*zt,Kt=yt+ht*zt,rr=Math.hypot(Ot,Ut,Kt);return it[0]=Ot*_e/rr,it[1]=Ut*_e/rr,it[2]=Kt*_e/rr,!1}{const zt=(-Pt-Math.sqrt(Rt))/(2*Et);if(zt<0){const Ot=Math.hypot(pt,gt,yt);return it[0]=pt*_e/Ot,it[1]=gt*_e/Ot,it[2]=yt*_e/Ot,!1}return it[0]=pt+ot*zt,it[1]=gt+lt*zt,it[2]=yt+ht*zt,!0}}}class c_{constructor(a,_e,it,ot,lt){this.TL=a,this.TR=_e,this.BR=it,this.BL=ot,this.horizon=lt}static fromInvProjectionMatrix(a,_e,it){const ot=[-1,1,1],lt=[1,1,1],ht=[1,-1,1],pt=[-1,-1,1],gt=jo(ot,ot,a),yt=jo(lt,lt,a),Et=jo(ht,ht,a),Pt=jo(pt,pt,a);return new c_(gt,yt,Et,Pt,_e/it)}}class h_{constructor(a,_e){this.points=a,this.planes=_e}static fromInvProjectionMatrix(a,_e,it,ot){const lt=Math.pow(2,it),ht=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(gt=>{const yt=Pp([],gt,a),Et=1/yt[3]/_e*lt;return function(Pt,Rt,zt){return Pt[0]=Rt[0]*zt[0],Pt[1]=Rt[1]*zt[1],Pt[2]=Rt[2]*zt[2],Pt[3]=Rt[3]*zt[3],Pt}(yt,yt,[Et,Et,ot?1/yt[3]:Et,Et])}),pt=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(gt=>{const yt=As([],a_([],Fl([],ht[gt[0]],ht[gt[1]]),Fl([],ht[gt[2]],ht[gt[1]]))),Et=-yl(yt,ht[gt[1]]);return yt.concat(Et)});return new h_(ht,pt)}}class Is{static fromPoints(a){const _e=[1/0,1/0,1/0],it=[-1/0,-1/0,-1/0];for(const ot of a)Iy(_e,_e,ot),My(it,it,ot);return new Is(_e,it)}static applyTransform(a,_e){const it=a.getCorners();for(let ot=0;ot<it.length;++ot)jo(it[ot],it[ot],_e);return Is.fromPoints(it)}constructor(a,_e){this.min=a,this.max=_e,this.center=Ks([],yu([],this.min,this.max),.5)}quadrant(a){const _e=[a%2==0,a<2],it=b1(this.min),ot=b1(this.max);for(let lt=0;lt<_e.length;lt++)it[lt]=_e[lt]?this.min[lt]:this.center[lt],ot[lt]=_e[lt]?this.center[lt]:this.max[lt];return ot[2]=this.max[2],new Is(it,ot)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,_e=this.max;return[[a[0],a[1],a[2]],[_e[0],a[1],a[2]],[_e[0],_e[1],a[2]],[a[0],_e[1],a[2]],[a[0],a[1],_e[2]],[_e[0],a[1],_e[2]],[_e[0],_e[1],_e[2]],[a[0],_e[1],_e[2]]]}intersects(a){const _e=this.getCorners();let it=!0;for(let ot=0;ot<a.planes.length;ot++){const lt=a.planes[ot];let ht=0;for(let pt=0;pt<_e.length;pt++)ht+=yl(lt,_e[pt])+lt[3]>=0;if(ht===0)return 0;ht!==_e.length&&(it=!1)}if(it)return 2;for(let ot=0;ot<3;ot++){let lt=Number.MAX_VALUE,ht=-Number.MAX_VALUE;for(let pt=0;pt<a.points.length;pt++){const gt=a.points[pt][ot]-this.min[ot];lt=Math.min(lt,gt),ht=Math.max(ht,gt)}if(ht<0||lt>this.max[ot]-this.min[ot])return 0}return 1}}const u_=5,L1=6,Jl=Cn/Math.PI/2,tE=16383,Ap=64,$y=[Ap,32,16],_l=-Jl,xl=Jl,iE=[new Is([_l,_l,_l],[xl,xl,xl]),new Is([_l,_l,_l],[0,0,xl]),new Is([0,_l,_l],[xl,0,xl]),new Is([_l,0,_l],[0,xl,xl]),new Is([0,0,_l],[xl,xl,xl])];function J0(j){return j*Jl/By}function R1(j,a,_e,it=!0){const ot=Ks([],j._camera.position,j.worldSize),lt=[a,_e,1,1];Pp(lt,lt,j.pixelMatrixInverse),S1(lt,lt,1/lt[3]);const ht=As([],Fl([],lt,ot)),pt=j.globeMatrix,gt=[pt[12],pt[13],pt[14]],yt=Fl([],gt,ot),Et=Ay(yt),Pt=As([],yt),Rt=j.worldSize/(2*Math.PI),zt=yl(Pt,ht),Ot=Math.asin(Rt/Et);if(Ot<Math.acos(zt)){if(!it)return null;const en=[],Br=[];Ks(en,ht,Et/zt),As(Br,Fl(Br,en,yt)),As(ht,yu(ht,yt,Ks(ht,Br,Math.tan(Ot)*Et)))}const Ut=[];new l_(ot,ht).closestPointOnSphere(gt,Rt,Ut);const Kt=As([],Jo(pt,0)),rr=As([],Jo(pt,1)),pr=As([],Jo(pt,2)),nr=yl(Kt,Ut),ur=yl(rr,Ut),mr=yl(pr,Ut),fr=Xr(Math.asin(-ur/Rt));let Rr=Xr(Math.atan2(nr,mr));Rr=j.center.lng+function(en,Br){const qr=(Br-en+180)%360-180;return qr<-180?qr+360:qr}(j.center.lng,Rr);const Ir=_h(Rr),Ur=Nt(eu(fr),0,1);return new _m(Ir,Ur)}class rE{constructor(a,_e,it){this.a=Fl([],a,it),this.b=Fl([],_e,it),this.center=it;const ot=As([],this.a),lt=As([],this.b);this.angle=Math.acos(yl(ot,lt))}}function d_(j,a){if(j.angle===0)return null;let _e;return _e=j.a[a]===0?1/j.angle*.5*Math.PI:1/j.angle*Math.atan(j.b[a]/j.a[a]/Math.sin(j.angle)-1/Math.tan(j.angle)),_e<0||_e>1?null:function(it,ot,lt,ht){const pt=Math.sin(lt);return it*(Math.sin((1-ht)*lt)/pt)+ot*(Math.sin(ht*lt)/pt)}(j.a[a],j.b[a],j.angle,Nt(_e,0,1))+j.center[a]}function _c(j){if(j.z<=1)return iE[j.z+2*j.y+j.x];const a=p_(ev(j));return Is.fromPoints(a)}function Ip(j,a,_e){return Ks(j,j,1-_e),Ly(j,j,a,_e)}function D1(j,a){const _e=vm(a.zoom);if(_e===0)return _c(j);const it=ev(j),ot=p_(it),lt=_h(it.getWest())*a.worldSize,ht=_h(it.getEast())*a.worldSize,pt=eu(it.getNorth())*a.worldSize,gt=eu(it.getSouth())*a.worldSize,yt=[lt,pt,0],Et=[ht,pt,0],Pt=[lt,gt,0],Rt=[ht,gt,0],zt=r_([],a.globeMatrix);return jo(yt,yt,zt),jo(Et,Et,zt),jo(Pt,Pt,zt),jo(Rt,Rt,zt),ot[0]=Ip(ot[0],Pt,_e),ot[1]=Ip(ot[1],Rt,_e),ot[2]=Ip(ot[2],Et,_e),ot[3]=Ip(ot[3],yt,_e),Is.fromPoints(ot)}function $1(j,a,_e){for(const it of j)jo(it,it,a),Ks(it,it,_e)}function nE(j,a,_e){const it=a/j.worldSize,ot=j.globeMatrix;if(_e.z<=1){const Ir=_c(_e).getCorners();return $1(Ir,ot,it),Is.fromPoints(Ir)}const lt=ev(_e),ht=p_(lt);$1(ht,ot,it);const pt=Number.MAX_VALUE,gt=[-pt,-pt,-pt],yt=[pt,pt,pt];if(lt.contains(j.center)){for(const en of ht)Iy(yt,yt,en),My(gt,gt,en);gt[2]=0;const Ir=j.point,Ur=[Ir.x*it,Ir.y*it,0];return Iy(yt,yt,Ur),My(gt,gt,Ur),new Is(yt,gt)}const Et=[ot[12]*it,ot[13]*it,ot[14]*it],Pt=lt.getCenter(),Rt=Nt(j.center.lat,-bs,bs),zt=Nt(Pt.lat,-bs,bs),Ot=_h(j.center.lng),Ut=eu(Rt);let Kt=Ot-_h(Pt.lng);const rr=Ut-eu(zt);Kt>.5?Kt-=1:Kt<-.5&&(Kt+=1);let pr=0;Math.abs(Kt)>Math.abs(rr)?pr=Kt>=0?1:3:(pr=rr>=0?0:2,Ly(Et,Et,[ot[4]*it,ot[5]*it,ot[6]*it],-Math.sin(xr(rr>=0?lt.getSouth():lt.getNorth()))*Jl));const nr=ht[pr],ur=ht[(pr+1)%4],mr=new rE(nr,ur,Et),fr=[d_(mr,0)||nr[0],d_(mr,1)||nr[1],d_(mr,2)||nr[2]],Rr=vm(j.zoom);if(Rr>0){const Ir=function({x:en,y:Br,z:qr},Wr,Kr,sn,Nr){const dn=1/(1<<qr);let xn=en*dn,pn=xn+dn,zn=Br*dn,an=zn+dn,Tn=0;const On=(xn+pn)/2-sn;return On>.5?Tn=-1:On<-.5&&(Tn=1),xn=((xn+Tn)*Wr-(sn*=Wr))*Kr+sn,pn=((pn+Tn)*Wr-sn)*Kr+sn,zn=(zn*Wr-(Nr*=Wr))*Kr+Nr,an=(an*Wr-Nr)*Kr+Nr,[[xn,an,0],[pn,an,0],[pn,zn,0],[xn,zn,0]]}(_e,a,j._pixelsPerMercatorPixel,Ot,Ut);for(let en=0;en<ht.length;en++)Ip(ht[en],Ir[en],Rr);const Ur=yu([],Ir[pr],Ir[(pr+1)%4]);Ks(Ur,Ur,.5),Ip(fr,Ur,Rr)}for(const Ir of ht)Iy(yt,yt,Ir),My(gt,gt,Ir);return yt[2]=Math.min(nr[2],ur[2]),Iy(yt,yt,fr),My(gt,gt,fr),new Is(yt,gt)}function ev({x:j,y:a,z:_e}){const it=1/(1<<_e),ot=new lo(Qs(j*it),xs((a+1)*it)),lt=new lo(Qs((j+1)*it),xs(a*it));return new Uu(ot,lt)}function p_(j){const a=xr(j.getNorth()),_e=xr(j.getSouth()),it=Math.cos(a),ot=Math.cos(_e),lt=Math.sin(a),ht=Math.sin(_e),pt=j.getWest(),gt=j.getEast();return[gm(ot,ht,pt),gm(ot,ht,gt),gm(it,lt,gt),gm(it,lt,pt)]}function gm(j,a,_e,it=Jl){return _e=xr(_e),[j*Math.sin(_e)*it,-a*it,j*Math.cos(_e)*it]}function ym(j,a,_e){return gm(Math.cos(xr(j)),Math.sin(xr(j)),a,_e)}function zy(j,a,_e,it){const ot=1<<_e.z,lt=(j/Cn+_e.x)/ot;return ym(xs((a/Cn+_e.y)/ot),Qs(lt),it)}function tv({min:j,max:a}){return tE/Math.max(a[0]-j[0],a[1]-j[1],a[2]-j[2])}const z1=new Float64Array(16);function Oy(j){const a=tv(j),_e=_1(z1,[a,a,a]);return Py(_e,_e,((it=[])[0]=-(ot=j.min)[0],it[1]=-ot[1],it[2]=-ot[2],it));var it,ot}function f_(j){const a=(it=j.min,(_e=z1)[0]=1,_e[1]=0,_e[2]=0,_e[3]=0,_e[4]=0,_e[5]=1,_e[6]=0,_e[7]=0,_e[8]=0,_e[9]=0,_e[10]=1,_e[11]=0,_e[12]=it[0],_e[13]=it[1],_e[14]=it[2],_e[15]=1,_e);var _e,it;const ot=1/tv(j);return Cp(a,a,[ot,ot,ot])}function O1(j,a,_e,it,ot){const lt=function(gt){const yt=Cn/(2*Math.PI);return gt/(2*Math.PI)/yt}(_e),ht=[j,a,-_e/(2*Math.PI)],pt=Bl(new Float64Array(16));return Py(pt,pt,ht),Cp(pt,pt,[lt,lt,lt]),n_(pt,pt,xr(-ot)),Q0(pt,pt,xr(-it)),pt}function vm(j){return Wt(u_,L1,j)}function B1(j,a){const _e=ym(a.lat,a.lng),it=function(Ot){const Ut=ym(Ot._center.lat,Ot._center.lng);let Kt=a_([],mm(0,1,0),Ut);const rr=x1([],-Ot.angle,Ut);Kt=jo(Kt,Kt,rr),x1(rr,-Ot._pitch,Kt);const pr=As([],Ut);return Ks(pr,pr,J0(Ot.cameraToCenterDistance/Ot.pixelsPerMeter)),jo(pr,pr,rr),yu([],Ut,pr)}(j);return ht=(ot=s_([],it,_e))[0],pt=ot[1],gt=ot[2],yt=(lt=_e)[0],Et=lt[1],Pt=lt[2],zt=(Rt=Math.sqrt(ht*ht+pt*pt+gt*gt)*Math.sqrt(yt*yt+Et*Et+Pt*Pt))&&yl(ot,lt)/Rt,Math.acos(Math.min(Math.max(zt,-1),1));var ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt}function m_(j,a){return B1(j,a)>Math.PI/2*1.01}const F1=xr(85),oE=Math.cos(F1),sE=Math.sin(F1),By=63710088e-1,V1=2*Math.PI*By;class Gu{constructor(a,_e){if(isNaN(a)||isNaN(_e))throw new Error(`Invalid LngLat object: (${a}, ${_e})`);if(this.lng=+a,this.lat=+_e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gu(or(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const _e=Math.PI/180,it=this.lat*_e,ot=a.lat*_e,lt=Math.sin(it)*Math.sin(ot)+Math.cos(it)*Math.cos(ot)*Math.cos((a.lng-this.lng)*_e);return By*Math.acos(Math.min(lt,1))}toBounds(a=0){const _e=360*a/40075017,it=_e/Math.cos(Math.PI/180*this.lat);return new Uu(new Gu(this.lng-it,this.lat-_e),new Gu(this.lng+it,this.lat+_e))}toEcef(a){const _e=J0(a);return ym(this.lat,this.lng,Jl+_e)}static convert(a){if(a instanceof Gu)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Gu(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Gu(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var lo=Gu;function g_(j){return V1*Math.cos(j*Math.PI/180)}function _h(j){return(180+j)/360}function eu(j){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+j*Math.PI/360)))/360}function Vl(j,a){return j/g_(a)}function Qs(j){return 360*j-180}function xs(j){return 360/Math.PI*Math.atan(Math.exp((180-360*j)*Math.PI/180))-90}function N1(j,a){return j*g_(xs(a))}const bs=85.051129;function j1(j){return 1/Math.cos(j*Math.PI/180)}class _m{constructor(a,_e,it=0){this.x=+a,this.y=+_e,this.z=+it}static fromLngLat(a,_e=0){const it=lo.convert(a);return new _m(_h(it.lng),eu(it.lat),Vl(_e,it.lat))}toLngLat(){return new lo(Qs(this.x),xs(this.y))}toAltitude(){return N1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/V1*j1(xs(this.y))}}function y_(j,a,_e,it,ot,lt,ht,pt,gt){const yt=(a+it)/2,Et=(_e+ot)/2,Pt=new ir(yt,Et);pt(Pt),function(Rt,zt,Ot,Ut,Kt,rr){const pr=Ot-Kt,nr=Ut-rr;return Math.abs((Ut-zt)*pr-(Ot-Rt)*nr)/Math.hypot(pr,nr)}(Pt.x,Pt.y,lt.x,lt.y,ht.x,ht.y)>=gt?(y_(j,a,_e,yt,Et,lt,Pt,pt,gt),y_(j,yt,Et,it,ot,Pt,ht,pt,gt)):j.push(ht)}function U1(j,a,_e){let it=j[0],ot=it.x,lt=it.y;a(it);const ht=[it];for(let pt=1;pt<j.length;pt++){const gt=j[pt],{x:yt,y:Et}=gt;a(gt),y_(ht,ot,lt,yt,Et,it,gt,a,_e),ot=yt,lt=Et,it=gt}return ht}function v_(j,a,_e,it){if(it(a,_e)){const ot=a.add(_e)._mult(.5);v_(j,a,ot,it),v_(j,ot,_e,it)}else j.push(_e)}function aE(j,a){let _e=j[0];const it=[_e];for(let ot=1;ot<j.length;ot++){const lt=j[ot];v_(it,_e,lt,a),_e=lt}return it}const __=Math.pow(2,14)-1,G1=-__-1;function lE(j,a){const _e=Math.round(j.x*a),it=Math.round(j.y*a);return j.x=Nt(_e,G1,__),j.y=Nt(it,G1,__),(_e<j.x||_e>j.x+1||it<j.y||it>j.y+1)&&Xn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),j}function vu(j,a,_e){const it=j.loadGeometry(),ot=j.extent,lt=Cn/ot;if(a&&_e&&_e.projection.isReprojectedInTileSpace){const ht=1<<a.z,{scale:pt,x:gt,y:yt,projection:Et}=_e,Pt=Rt=>{const zt=Qs((a.x+Rt.x/ot)/ht),Ot=xs((a.y+Rt.y/ot)/ht),Ut=Et.project(zt,Ot);Rt.x=(Ut.x*pt-gt)*ot,Rt.y=(Ut.y*pt-yt)*ot};for(let Rt=0;Rt<it.length;Rt++)if(j.type!==1)it[Rt]=U1(it[Rt],Pt,1);else{const zt=[];for(const Ot of it[Rt])Ot.x<0||Ot.x>=ot||Ot.y<0||Ot.y>=ot||(Pt(Ot),zt.push(Ot));it[Rt]=zt}}for(const ht of it)for(const pt of ht)lE(pt,lt);return it}function Mp(j,a){return{type:j.type,id:j.id,properties:j.properties,geometry:a?vu(j):[]}}function iv(j,a,_e,it,ot){j.emplaceBack(2*a+(it+1)/2,2*_e+(ot+1)/2)}function rv(j,a,_e){j.emplaceBack(a.x,a.y,a.z,_e[0]*16384,_e[1]*16384,_e[2]*16384)}class x_{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(_e=>_e.id),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new Jr,this.indexArray=new wn,this.segments=new Ho,this.programConfigurations=new Tp(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(_e=>_e.isStateDependent()).map(_e=>_e.id)}populate(a,_e,it,ot){const lt=this.layers[0],ht=[];let pt=null;lt.type==="circle"&&(pt=lt.layout.get("circle-sort-key"));for(const{feature:yt,id:Et,index:Pt,sourceLayerIndex:Rt}of a){const zt=this.layers[0]._featureFilter.needGeometry,Ot=Mp(yt,zt);if(!this.layers[0]._featureFilter.filter(new kt(this.zoom),Ot,it))continue;const Ut=pt?pt.evaluate(Ot,{},it):void 0,Kt={id:Et,properties:yt.properties,type:yt.type,sourceLayerIndex:Rt,index:Pt,geometry:zt?Ot.geometry:vu(yt,it,ot),patterns:{},sortKey:Ut};ht.push(Kt)}pt&&ht.sort((yt,Et)=>yt.sortKey-Et.sortKey);let gt=null;ot.projection.name==="globe"&&(this.globeExtVertexArray=new rn,gt=ot.projection);for(const yt of ht){const{geometry:Et,index:Pt,sourceLayerIndex:Rt}=yt,zt=a[Pt].feature;this.addFeature(yt,Et,Pt,_e.availableImages,it,gt),_e.featureIndex.insert(zt,Et,Pt,Rt,this.index)}}update(a,_e,it,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,_e,this.stateDependentLayers,it,ot)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Zw.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,Xw.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,_e,it,ot,lt,ht){for(const pt of _e)for(const gt of pt){const yt=gt.x,Et=gt.y;if(yt<0||yt>=Cn||Et<0||Et>=Cn)continue;if(ht){const zt=ht.projectTilePoint(yt,Et,lt),Ot=ht.upVector(lt,yt,Et),Ut=this.globeExtVertexArray;rv(Ut,zt,Ot),rv(Ut,zt,Ot),rv(Ut,zt,Ot),rv(Ut,zt,Ot)}const Pt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Rt=Pt.vertexLength;iv(this.layoutVertexArray,yt,Et,-1,-1),iv(this.layoutVertexArray,yt,Et,1,-1),iv(this.layoutVertexArray,yt,Et,1,1),iv(this.layoutVertexArray,yt,Et,-1,1),this.indexArray.emplaceBack(Rt,Rt+1,Rt+2),this.indexArray.emplaceBack(Rt,Rt+2,Rt+3),Pt.vertexLength+=4,Pt.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,it,{},ot,lt)}}function H1(j,a){for(let _e=0;_e<j.length;_e++)if(Lp(a,j[_e]))return!0;for(let _e=0;_e<a.length;_e++)if(Lp(j,a[_e]))return!0;return!!b_(j,a)}function cE(j,a,_e){return!!Lp(j,a)||!!w_(a,j,_e)}function q1(j,a){if(j.length===1)return Z1(a,j[0]);for(let _e=0;_e<a.length;_e++){const it=a[_e];for(let ot=0;ot<it.length;ot++)if(Lp(j,it[ot]))return!0}for(let _e=0;_e<j.length;_e++)if(Z1(a,j[_e]))return!0;for(let _e=0;_e<a.length;_e++)if(b_(j,a[_e]))return!0;return!1}function hE(j,a,_e){if(j.length>1){if(b_(j,a))return!0;for(let it=0;it<a.length;it++)if(w_(a[it],j,_e))return!0}for(let it=0;it<j.length;it++)if(w_(j[it],a,_e))return!0;return!1}function b_(j,a){if(j.length===0||a.length===0)return!1;for(let _e=0;_e<j.length-1;_e++){const it=j[_e],ot=j[_e+1];for(let lt=0;lt<a.length-1;lt++)if(uE(it,ot,a[lt],a[lt+1]))return!0}return!1}function uE(j,a,_e,it){return Io(j,_e,it)!==Io(a,_e,it)&&Io(j,a,_e)!==Io(j,a,it)}function w_(j,a,_e){const it=_e*_e;if(a.length===1)return j.distSqr(a[0])<it;for(let ot=1;ot<a.length;ot++)if(W1(j,a[ot-1],a[ot])<it)return!0;return!1}function W1(j,a,_e){const it=a.distSqr(_e);if(it===0)return j.distSqr(a);const ot=((j.x-a.x)*(_e.x-a.x)+(j.y-a.y)*(_e.y-a.y))/it;return j.distSqr(ot<0?a:ot>1?_e:_e.sub(a)._mult(ot)._add(a))}function Z1(j,a){let _e,it,ot,lt=!1;for(let ht=0;ht<j.length;ht++){_e=j[ht];for(let pt=0,gt=_e.length-1;pt<_e.length;gt=pt++)it=_e[pt],ot=_e[gt],it.y>a.y!=ot.y>a.y&&a.x<(ot.x-it.x)*(a.y-it.y)/(ot.y-it.y)+it.x&&(lt=!lt)}return lt}function Lp(j,a){let _e=!1;for(let it=0,ot=j.length-1;it<j.length;ot=it++){const lt=j[it],ht=j[ot];lt.y>a.y!=ht.y>a.y&&a.x<(ht.x-lt.x)*(a.y-lt.y)/(ht.y-lt.y)+lt.x&&(_e=!_e)}return _e}function X1(j,a,_e,it,ot){for(const ht of j)if(a<=ht.x&&_e<=ht.y&&it>=ht.x&&ot>=ht.y)return!0;const lt=[new ir(a,_e),new ir(a,ot),new ir(it,ot),new ir(it,_e)];if(j.length>2){for(const ht of lt)if(Lp(j,ht))return!0}for(let ht=0;ht<j.length-1;ht++)if(dE(j[ht],j[ht+1],lt))return!0;return!1}function dE(j,a,_e){const it=_e[0],ot=_e[2];if(j.x<it.x&&a.x<it.x||j.x>ot.x&&a.x>ot.x||j.y<it.y&&a.y<it.y||j.y>ot.y&&a.y>ot.y)return!1;const lt=Io(j,a,_e[0]);return lt!==Io(j,a,_e[1])||lt!==Io(j,a,_e[2])||lt!==Io(j,a,_e[3])}function xm(j,a,_e){const it=a.paint.get(j).value;return it.kind==="constant"?it.value:_e.programConfigurations.get(a.id).getMaxValue(j)}function nv(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])}function Y1(j,a,_e,it,ot){if(!a[0]&&!a[1])return j;const lt=ir.convert(a)._mult(ot);_e==="viewport"&&lt._rotate(-it);const ht=[];for(let pt=0;pt<j.length;pt++)ht.push(j[pt].sub(lt));return ht}function K1(j,a,_e,it){const ot=ir.convert(j)._mult(it);return a==="viewport"&&ot._rotate(-_e),ot}vn(x_,"CircleBucket",{omit:["layers"]});const pE=new lr({"circle-sort-key":new Qt(jr.layout_circle["circle-sort-key"])});var fE={paint:new lr({"circle-radius":new Qt(jr.paint_circle["circle-radius"]),"circle-color":new Qt(jr.paint_circle["circle-color"]),"circle-blur":new Qt(jr.paint_circle["circle-blur"]),"circle-opacity":new Qt(jr.paint_circle["circle-opacity"]),"circle-translate":new jt(jr.paint_circle["circle-translate"]),"circle-translate-anchor":new jt(jr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt(jr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt(jr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qt(jr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qt(jr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qt(jr.paint_circle["circle-stroke-opacity"])}),layout:pE};function Q1(j,a,_e,it,ot,lt,ht,pt,gt){if(lt&&j.queryGeometry.isAboveHorizon)return!1;lt&&(gt*=j.pixelToTileUnitsFactor);const yt=j.tileID.canonical,Et=_e.projection.upVectorScale(yt,_e.center.lat,_e.worldSize).metersToTile;for(const Pt of a)for(const Rt of Pt){const zt=Rt.add(pt),Ot=ot&&_e.elevation?_e.elevation.exaggeration()*ot.getElevationAt(zt.x,zt.y,!0):0,Ut=_e.projection.projectTilePoint(zt.x,zt.y,yt);if(Ot>0){const nr=_e.projection.upVector(yt,zt.x,zt.y);Ut.x+=nr[0]*Et*Ot,Ut.y+=nr[1]*Et*Ot,Ut.z+=nr[2]*Et*Ot}const Kt=lt?zt:mE(Ut.x,Ut.y,Ut.z,it),rr=lt?j.tilespaceRays.map(nr=>yE(nr,Ot)):j.queryGeometry.screenGeometry,pr=Pp([],[Ut.x,Ut.y,Ut.z,1],it);if(!ht&&lt?gt*=pr[3]/_e.cameraToCenterDistance:ht&&!lt&&(gt*=_e.cameraToCenterDistance/pr[3]),lt){const nr=xs((Rt.y/Cn+yt.y)/(1<<yt.z));gt/=_e.projection.pixelsPerMeter(nr,1)/Vl(1,nr)}if(cE(rr,Kt,gt))return!0}return!1}function mE(j,a,_e,it){const ot=Pp([],[j,a,_e,1],it);return new ir(ot[0]/ot[3],ot[1]/ot[3])}const J1=mm(0,0,0),gE=mm(0,0,1);function yE(j,a){const _e=o_();return J1[2]=a,j.intersectsPlane(J1,gE,_e),new ir(_e[0],_e[1])}class ex extends x_{}function tx(j,{width:a,height:_e},it,ot){if(ot){if(ot instanceof Uint8ClampedArray)ot=new Uint8Array(ot.buffer);else if(ot.length!==a*_e*it)throw new RangeError("mismatched image size")}else ot=new Uint8Array(a*_e*it);return j.width=a,j.height=_e,j.data=ot,j}function ix(j,a,_e){const{width:it,height:ot}=a;it===j.width&&ot===j.height||(E_(j,a,{x:0,y:0},{x:0,y:0},{width:Math.min(j.width,it),height:Math.min(j.height,ot)},_e),j.width=it,j.height=ot,j.data=a.data)}function E_(j,a,_e,it,ot,lt){if(ot.width===0||ot.height===0)return a;if(ot.width>j.width||ot.height>j.height||_e.x>j.width-ot.width||_e.y>j.height-ot.height)throw new RangeError("out of range source coordinates for image copy");if(ot.width>a.width||ot.height>a.height||it.x>a.width-ot.width||it.y>a.height-ot.height)throw new RangeError("out of range destination coordinates for image copy");const ht=j.data,pt=a.data;for(let gt=0;gt<ot.height;gt++){const yt=((_e.y+gt)*j.width+_e.x)*lt,Et=((it.y+gt)*a.width+it.x)*lt;for(let Pt=0;Pt<ot.width*lt;Pt++)pt[Et+Pt]=ht[yt+Pt]}return a}vn(ex,"HeatmapBucket",{omit:["layers"]});class _u{constructor(a,_e){tx(this,a,1,_e)}resize(a){ix(this,new _u(a),1)}clone(){return new _u({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,_e,it,ot,lt){E_(a,_e,it,ot,lt,1)}}class Hs{constructor(a,_e){tx(this,a,4,_e)}resize(a){ix(this,new Hs(a),4)}replace(a,_e){_e?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Hs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,_e,it,ot,lt){E_(a,_e,it,ot,lt,4)}}vn(_u,"AlphaImage"),vn(Hs,"RGBAImage");var vE={paint:new lr({"heatmap-radius":new Qt(jr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qt(jr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt(jr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new sr(jr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt(jr.paint_heatmap["heatmap-opacity"])})};function S_(j){const a={},_e=j.resolution||256,it=j.clips?j.clips.length:1,ot=j.image||new Hs({width:_e,height:it}),lt=(ht,pt,gt)=>{a[j.evaluationKey]=gt;const yt=j.expression.evaluate(a);ot.data[ht+pt+0]=Math.floor(255*yt.r/yt.a),ot.data[ht+pt+1]=Math.floor(255*yt.g/yt.a),ot.data[ht+pt+2]=Math.floor(255*yt.b/yt.a),ot.data[ht+pt+3]=Math.floor(255*yt.a)};if(j.clips)for(let ht=0,pt=0;ht<it;++ht,pt+=4*_e)for(let gt=0,yt=0;gt<_e;gt++,yt+=4){const Et=gt/(_e-1),{start:Pt,end:Rt}=j.clips[ht];lt(pt,yt,Pt*(1-Et)+Rt*Et)}else for(let ht=0,pt=0;ht<_e;ht++,pt+=4)lt(0,pt,ht/(_e-1));return ot}var _E={paint:new lr({"hillshade-illumination-direction":new jt(jr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new jt(jr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt(jr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt(jr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt(jr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt(jr.paint_hillshade["hillshade-accent-color"])})};const xE=Sr([{name:"a_pos",components:2,type:"Int16"}],4),{members:bE}=xE;var T_={exports:{}};function ov(j,a,_e){_e=_e||2;var it,ot,lt,ht,pt,gt,yt,Et=a&&a.length,Pt=Et?a[0]*_e:j.length,Rt=rx(j,0,Pt,_e,!0),zt=[];if(!Rt||Rt.next===Rt.prev)return zt;if(Et&&(Rt=function(Ut,Kt,rr,pr){var nr,ur,mr,fr=[];for(nr=0,ur=Kt.length;nr<ur;nr++)(mr=rx(Ut,Kt[nr]*pr,nr<ur-1?Kt[nr+1]*pr:Ut.length,pr,!1))===mr.next&&(mr.steiner=!0),fr.push(AE(mr));for(fr.sort(kE),nr=0;nr<fr.length;nr++)rr=CE(fr[nr],rr);return rr}(j,a,Rt,_e)),j.length>80*_e){it=lt=j[0],ot=ht=j[1];for(var Ot=_e;Ot<Pt;Ot+=_e)(pt=j[Ot])<it&&(it=pt),(gt=j[Ot+1])<ot&&(ot=gt),pt>lt&&(lt=pt),gt>ht&&(ht=gt);yt=(yt=Math.max(lt-it,ht-ot))!==0?32767/yt:0}return Fy(Rt,zt,_e,it,ot,yt,0),zt}function rx(j,a,_e,it,ot){var lt,ht;if(ot===P_(j,a,_e,it)>0)for(lt=a;lt<_e;lt+=it)ht=sx(lt,j[lt],j[lt+1],ht);else for(lt=_e-it;lt>=a;lt-=it)ht=sx(lt,j[lt],j[lt+1],ht);return ht&&sv(ht,ht.next)&&(Ny(ht),ht=ht.next),ht}function Rp(j,a){if(!j)return j;a||(a=j);var _e,it=j;do if(_e=!1,it.steiner||!sv(it,it.next)&&qo(it.prev,it,it.next)!==0)it=it.next;else{if(Ny(it),(it=a=it.prev)===it.next)break;_e=!0}while(_e||it!==a);return a}function Fy(j,a,_e,it,ot,lt,ht){if(j){!ht&&lt&&function(Et,Pt,Rt,zt){var Ot=Et;do Ot.z===0&&(Ot.z=k_(Ot.x,Ot.y,Pt,Rt,zt)),Ot.prevZ=Ot.prev,Ot.nextZ=Ot.next,Ot=Ot.next;while(Ot!==Et);Ot.prevZ.nextZ=null,Ot.prevZ=null,function(Ut){var Kt,rr,pr,nr,ur,mr,fr,Rr,Ir=1;do{for(rr=Ut,Ut=null,ur=null,mr=0;rr;){for(mr++,pr=rr,fr=0,Kt=0;Kt<Ir&&(fr++,pr=pr.nextZ);Kt++);for(Rr=Ir;fr>0||Rr>0&&pr;)fr!==0&&(Rr===0||!pr||rr.z<=pr.z)?(nr=rr,rr=rr.nextZ,fr--):(nr=pr,pr=pr.nextZ,Rr--),ur?ur.nextZ=nr:Ut=nr,nr.prevZ=ur,ur=nr;rr=pr}ur.nextZ=null,Ir*=2}while(mr>1)}(Ot)}(j,it,ot,lt);for(var pt,gt,yt=j;j.prev!==j.next;)if(pt=j.prev,gt=j.next,lt?EE(j,it,ot,lt):wE(j))a.push(pt.i/_e|0),a.push(j.i/_e|0),a.push(gt.i/_e|0),Ny(j),j=gt.next,yt=gt.next;else if((j=gt)===yt){ht?ht===1?Fy(j=SE(Rp(j),a,_e),a,_e,it,ot,lt,2):ht===2&&TE(j,a,_e,it,ot,lt):Fy(Rp(j),a,_e,it,ot,lt,1);break}}}function wE(j){var a=j.prev,_e=j,it=j.next;if(qo(a,_e,it)>=0)return!1;for(var ot=a.x,lt=_e.x,ht=it.x,pt=a.y,gt=_e.y,yt=it.y,Et=ot<lt?ot<ht?ot:ht:lt<ht?lt:ht,Pt=pt<gt?pt<yt?pt:yt:gt<yt?gt:yt,Rt=ot>lt?ot>ht?ot:ht:lt>ht?lt:ht,zt=pt>gt?pt>yt?pt:yt:gt>yt?gt:yt,Ot=it.next;Ot!==a;){if(Ot.x>=Et&&Ot.x<=Rt&&Ot.y>=Pt&&Ot.y<=zt&&bm(ot,pt,lt,gt,ht,yt,Ot.x,Ot.y)&&qo(Ot.prev,Ot,Ot.next)>=0)return!1;Ot=Ot.next}return!0}function EE(j,a,_e,it){var ot=j.prev,lt=j,ht=j.next;if(qo(ot,lt,ht)>=0)return!1;for(var pt=ot.x,gt=lt.x,yt=ht.x,Et=ot.y,Pt=lt.y,Rt=ht.y,zt=pt<gt?pt<yt?pt:yt:gt<yt?gt:yt,Ot=Et<Pt?Et<Rt?Et:Rt:Pt<Rt?Pt:Rt,Ut=pt>gt?pt>yt?pt:yt:gt>yt?gt:yt,Kt=Et>Pt?Et>Rt?Et:Rt:Pt>Rt?Pt:Rt,rr=k_(zt,Ot,a,_e,it),pr=k_(Ut,Kt,a,_e,it),nr=j.prevZ,ur=j.nextZ;nr&&nr.z>=rr&&ur&&ur.z<=pr;){if(nr.x>=zt&&nr.x<=Ut&&nr.y>=Ot&&nr.y<=Kt&&nr!==ot&&nr!==ht&&bm(pt,Et,gt,Pt,yt,Rt,nr.x,nr.y)&&qo(nr.prev,nr,nr.next)>=0||(nr=nr.prevZ,ur.x>=zt&&ur.x<=Ut&&ur.y>=Ot&&ur.y<=Kt&&ur!==ot&&ur!==ht&&bm(pt,Et,gt,Pt,yt,Rt,ur.x,ur.y)&&qo(ur.prev,ur,ur.next)>=0))return!1;ur=ur.nextZ}for(;nr&&nr.z>=rr;){if(nr.x>=zt&&nr.x<=Ut&&nr.y>=Ot&&nr.y<=Kt&&nr!==ot&&nr!==ht&&bm(pt,Et,gt,Pt,yt,Rt,nr.x,nr.y)&&qo(nr.prev,nr,nr.next)>=0)return!1;nr=nr.prevZ}for(;ur&&ur.z<=pr;){if(ur.x>=zt&&ur.x<=Ut&&ur.y>=Ot&&ur.y<=Kt&&ur!==ot&&ur!==ht&&bm(pt,Et,gt,Pt,yt,Rt,ur.x,ur.y)&&qo(ur.prev,ur,ur.next)>=0)return!1;ur=ur.nextZ}return!0}function SE(j,a,_e){var it=j;do{var ot=it.prev,lt=it.next.next;!sv(ot,lt)&&nx(ot,it,it.next,lt)&&Vy(ot,lt)&&Vy(lt,ot)&&(a.push(ot.i/_e|0),a.push(it.i/_e|0),a.push(lt.i/_e|0),Ny(it),Ny(it.next),it=j=lt),it=it.next}while(it!==j);return Rp(it)}function TE(j,a,_e,it,ot,lt){var ht=j;do{for(var pt=ht.next.next;pt!==ht.prev;){if(ht.i!==pt.i&&IE(ht,pt)){var gt=ox(ht,pt);return ht=Rp(ht,ht.next),gt=Rp(gt,gt.next),Fy(ht,a,_e,it,ot,lt,0),void Fy(gt,a,_e,it,ot,lt,0)}pt=pt.next}ht=ht.next}while(ht!==j)}function kE(j,a){return j.x-a.x}function CE(j,a){var _e=function(ot,lt){var ht,pt=lt,gt=ot.x,yt=ot.y,Et=-1/0;do{if(yt<=pt.y&&yt>=pt.next.y&&pt.next.y!==pt.y){var Pt=pt.x+(yt-pt.y)*(pt.next.x-pt.x)/(pt.next.y-pt.y);if(Pt<=gt&&Pt>Et&&(Et=Pt,ht=pt.x<pt.next.x?pt:pt.next,Pt===gt))return ht}pt=pt.next}while(pt!==lt);if(!ht)return null;var Rt,zt=ht,Ot=ht.x,Ut=ht.y,Kt=1/0;pt=ht;do gt>=pt.x&&pt.x>=Ot&&gt!==pt.x&&bm(yt<Ut?gt:Et,yt,Ot,Ut,yt<Ut?Et:gt,yt,pt.x,pt.y)&&(Rt=Math.abs(yt-pt.y)/(gt-pt.x),Vy(pt,ot)&&(Rt<Kt||Rt===Kt&&(pt.x>ht.x||pt.x===ht.x&&PE(ht,pt)))&&(ht=pt,Kt=Rt)),pt=pt.next;while(pt!==zt);return ht}(j,a);if(!_e)return a;var it=ox(_e,j);return Rp(it,it.next),Rp(_e,_e.next)}function PE(j,a){return qo(j.prev,j,a.prev)<0&&qo(a.next,j,j.next)<0}function k_(j,a,_e,it,ot){return(j=1431655765&((j=858993459&((j=252645135&((j=16711935&((j=(j-_e)*ot|0)|j<<8))|j<<4))|j<<2))|j<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-it)*ot|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function AE(j){var a=j,_e=j;do(a.x<_e.x||a.x===_e.x&&a.y<_e.y)&&(_e=a),a=a.next;while(a!==j);return _e}function bm(j,a,_e,it,ot,lt,ht,pt){return(ot-ht)*(a-pt)>=(j-ht)*(lt-pt)&&(j-ht)*(it-pt)>=(_e-ht)*(a-pt)&&(_e-ht)*(lt-pt)>=(ot-ht)*(it-pt)}function IE(j,a){return j.next.i!==a.i&&j.prev.i!==a.i&&!function(_e,it){var ot=_e;do{if(ot.i!==_e.i&&ot.next.i!==_e.i&&ot.i!==it.i&&ot.next.i!==it.i&&nx(ot,ot.next,_e,it))return!0;ot=ot.next}while(ot!==_e);return!1}(j,a)&&(Vy(j,a)&&Vy(a,j)&&function(_e,it){var ot=_e,lt=!1,ht=(_e.x+it.x)/2,pt=(_e.y+it.y)/2;do ot.y>pt!=ot.next.y>pt&&ot.next.y!==ot.y&&ht<(ot.next.x-ot.x)*(pt-ot.y)/(ot.next.y-ot.y)+ot.x&&(lt=!lt),ot=ot.next;while(ot!==_e);return lt}(j,a)&&(qo(j.prev,j,a.prev)||qo(j,a.prev,a))||sv(j,a)&&qo(j.prev,j,j.next)>0&&qo(a.prev,a,a.next)>0)}function qo(j,a,_e){return(a.y-j.y)*(_e.x-a.x)-(a.x-j.x)*(_e.y-a.y)}function sv(j,a){return j.x===a.x&&j.y===a.y}function nx(j,a,_e,it){var ot=lv(qo(j,a,_e)),lt=lv(qo(j,a,it)),ht=lv(qo(_e,it,j)),pt=lv(qo(_e,it,a));return ot!==lt&&ht!==pt||!(ot!==0||!av(j,_e,a))||!(lt!==0||!av(j,it,a))||!(ht!==0||!av(_e,j,it))||!(pt!==0||!av(_e,a,it))}function av(j,a,_e){return a.x<=Math.max(j.x,_e.x)&&a.x>=Math.min(j.x,_e.x)&&a.y<=Math.max(j.y,_e.y)&&a.y>=Math.min(j.y,_e.y)}function lv(j){return j>0?1:j<0?-1:0}function Vy(j,a){return qo(j.prev,j,j.next)<0?qo(j,a,j.next)>=0&&qo(j,j.prev,a)>=0:qo(j,a,j.prev)<0||qo(j,j.next,a)<0}function ox(j,a){var _e=new C_(j.i,j.x,j.y),it=new C_(a.i,a.x,a.y),ot=j.next,lt=a.prev;return j.next=a,a.prev=j,_e.next=ot,ot.prev=_e,it.next=_e,_e.prev=it,lt.next=it,it.prev=lt,it}function sx(j,a,_e,it){var ot=new C_(j,a,_e);return it?(ot.next=it.next,ot.prev=it,it.next.prev=ot,it.next=ot):(ot.prev=ot,ot.next=ot),ot}function Ny(j){j.next.prev=j.prev,j.prev.next=j.next,j.prevZ&&(j.prevZ.nextZ=j.nextZ),j.nextZ&&(j.nextZ.prevZ=j.prevZ)}function C_(j,a,_e){this.i=j,this.x=a,this.y=_e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P_(j,a,_e,it){for(var ot=0,lt=a,ht=_e-it;lt<_e;lt+=it)ot+=(j[ht]-j[lt])*(j[lt+1]+j[ht+1]),ht=lt;return ot}T_.exports=ov,T_.exports.default=ov,ov.deviation=function(j,a,_e,it){var ot=a&&a.length,lt=Math.abs(P_(j,0,ot?a[0]*_e:j.length,_e));if(ot)for(var ht=0,pt=a.length;ht<pt;ht++)lt-=Math.abs(P_(j,a[ht]*_e,ht<pt-1?a[ht+1]*_e:j.length,_e));var gt=0;for(ht=0;ht<it.length;ht+=3){var yt=it[ht]*_e,Et=it[ht+1]*_e,Pt=it[ht+2]*_e;gt+=Math.abs((j[yt]-j[Pt])*(j[Et+1]-j[yt+1])-(j[yt]-j[Et])*(j[Pt+1]-j[yt+1]))}return lt===0&&gt===0?0:Math.abs((gt-lt)/lt)},ov.flatten=function(j){for(var a=j[0][0].length,_e={vertices:[],holes:[],dimensions:a},it=0,ot=0;ot<j.length;ot++){for(var lt=0;lt<j[ot].length;lt++)for(var ht=0;ht<a;ht++)_e.vertices.push(j[ot][lt][ht]);ot>0&&_e.holes.push(it+=j[ot-1].length)}return _e};var A_=St(T_.exports);function ME(j,a,_e,it,ot){ax(j,a,_e||0,it||j.length-1,ot||LE)}function ax(j,a,_e,it,ot){for(;it>_e;){if(it-_e>600){var lt=it-_e+1,ht=a-_e+1,pt=Math.log(lt),gt=.5*Math.exp(2*pt/3),yt=.5*Math.sqrt(pt*gt*(lt-gt)/lt)*(ht-lt/2<0?-1:1);ax(j,a,Math.max(_e,Math.floor(a-ht*gt/lt+yt)),Math.min(it,Math.floor(a+(lt-ht)*gt/lt+yt)),ot)}var Et=j[a],Pt=_e,Rt=it;for(jy(j,_e,a),ot(j[it],Et)>0&&jy(j,_e,it);Pt<Rt;){for(jy(j,Pt,Rt),Pt++,Rt--;ot(j[Pt],Et)<0;)Pt++;for(;ot(j[Rt],Et)>0;)Rt--}ot(j[_e],Et)===0?jy(j,_e,Rt):jy(j,++Rt,it),Rt<=a&&(_e=Rt+1),a<=Rt&&(it=Rt-1)}}function jy(j,a,_e){var it=j[a];j[a]=j[_e],j[_e]=it}function LE(j,a){return j<a?-1:j>a?1:0}function I_(j,a){const _e=j.length;if(_e<=1)return[j];const it=[];let ot,lt;for(let ht=0;ht<_e;ht++){const pt=gs(j[ht]);pt!==0&&(j[ht].area=Math.abs(pt),lt===void 0&&(lt=pt<0),lt===pt<0?(ot&&it.push(ot),ot=[j[ht]]):ot.push(j[ht]))}if(ot&&it.push(ot),a>1)for(let ht=0;ht<it.length;ht++)it[ht].length<=a||(ME(it[ht],a,1,it[ht].length-1,RE),it[ht]=it[ht].slice(0,a));return it}function RE(j,a){return a.area-j.area}function M_(j,a,_e){const it=_e.patternDependencies;let ot=!1;for(const lt of a){const ht=lt.paint.get(`${j}-pattern`);ht.isConstant()||(ot=!0);const pt=ht.constantOr(null);pt&&(ot=!0,it[pt]=!0)}return ot}function L_(j,a,_e,it,ot){const lt=ot.patternDependencies;for(const ht of a){const pt=ht.paint.get(`${j}-pattern`).value;if(pt.kind!=="constant"){let gt=pt.evaluate({zoom:it},_e,{},ot.availableImages);gt=gt&&gt.name?gt.name:gt,lt[gt]=!0,_e.patterns[ht.id]=gt}}return _e}class cv{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(_e=>_e.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Jr,this.indexArray=new wn,this.indexArray2=new as,this.programConfigurations=new Tp(a.layers,a.zoom),this.segments=new Ho,this.segments2=new Ho,this.stateDependentLayerIds=this.layers.filter(_e=>_e.isStateDependent()).map(_e=>_e.id),this.projection=a.projection}populate(a,_e,it,ot){this.hasPattern=M_("fill",this.layers,_e);const lt=this.layers[0].layout.get("fill-sort-key"),ht=[];for(const{feature:pt,id:gt,index:yt,sourceLayerIndex:Et}of a){const Pt=this.layers[0]._featureFilter.needGeometry,Rt=Mp(pt,Pt);if(!this.layers[0]._featureFilter.filter(new kt(this.zoom),Rt,it))continue;const zt=lt?lt.evaluate(Rt,{},it,_e.availableImages):void 0,Ot={id:gt,properties:pt.properties,type:pt.type,sourceLayerIndex:Et,index:yt,geometry:Pt?Rt.geometry:vu(pt,it,ot),patterns:{},sortKey:zt};ht.push(Ot)}lt&&ht.sort((pt,gt)=>pt.sortKey-gt.sortKey);for(const pt of ht){const{geometry:gt,index:yt,sourceLayerIndex:Et}=pt;if(this.hasPattern){const Pt=L_("fill",this.layers,pt,this.zoom,_e);this.patternFeatures.push(Pt)}else this.addFeature(pt,gt,yt,it,{},_e.availableImages);_e.featureIndex.insert(a[yt].feature,gt,yt,Et,this.index)}}update(a,_e,it,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,_e,this.stateDependentLayers,it,ot)}addFeatures(a,_e,it,ot,lt){for(const ht of this.patternFeatures)this.addFeature(ht,ht.geometry,ht.index,_e,it,ot)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,bE),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,_e,it,ot,lt,ht=[]){for(const pt of I_(_e,500)){let gt=0;for(const Ot of pt)gt+=Ot.length;const yt=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray),Et=yt.vertexLength,Pt=[],Rt=[];for(const Ot of pt){if(Ot.length===0)continue;Ot!==pt[0]&&Rt.push(Pt.length/2);const Ut=this.segments2.prepareSegment(Ot.length,this.layoutVertexArray,this.indexArray2),Kt=Ut.vertexLength;this.layoutVertexArray.emplaceBack(Ot[0].x,Ot[0].y),this.indexArray2.emplaceBack(Kt+Ot.length-1,Kt),Pt.push(Ot[0].x),Pt.push(Ot[0].y);for(let rr=1;rr<Ot.length;rr++)this.layoutVertexArray.emplaceBack(Ot[rr].x,Ot[rr].y),this.indexArray2.emplaceBack(Kt+rr-1,Kt+rr),Pt.push(Ot[rr].x),Pt.push(Ot[rr].y);Ut.vertexLength+=Ot.length,Ut.primitiveLength+=Ot.length}const zt=A_(Pt,Rt);for(let Ot=0;Ot<zt.length;Ot+=3)this.indexArray.emplaceBack(Et+zt[Ot],Et+zt[Ot+1],Et+zt[Ot+2]);yt.vertexLength+=gt,yt.primitiveLength+=zt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,it,lt,ht,ot)}}vn(cv,"FillBucket",{omit:["layers","patternFeatures"]});const DE=new lr({"fill-sort-key":new Qt(jr.layout_fill["fill-sort-key"])});var $E={paint:new lr({"fill-antialias":new jt(jr.paint_fill["fill-antialias"]),"fill-opacity":new Qt(jr.paint_fill["fill-opacity"]),"fill-color":new Qt(jr.paint_fill["fill-color"]),"fill-outline-color":new Qt(jr.paint_fill["fill-outline-color"]),"fill-translate":new jt(jr.paint_fill["fill-translate"]),"fill-translate-anchor":new jt(jr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qt(jr.paint_fill["fill-pattern"])}),layout:DE};const zE=Sr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),OE=Sr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),BE=Sr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:FE}=zE;var hv={},VE=Gt,lx=wm;function wm(j,a,_e,it,ot){this.properties={},this.extent=_e,this.type=0,this._pbf=j,this._geometry=-1,this._keys=it,this._values=ot,j.readFields(NE,this,a)}function NE(j,a,_e){j==1?a.id=_e.readVarint():j==2?function(it,ot){for(var lt=it.readVarint()+it.pos;it.pos<lt;){var ht=ot._keys[it.readVarint()],pt=ot._values[it.readVarint()];ot.properties[ht]=pt}}(_e,a):j==3?a.type=_e.readVarint():j==4&&(a._geometry=_e.pos)}function jE(j){for(var a,_e,it=0,ot=0,lt=j.length,ht=lt-1;ot<lt;ht=ot++)it+=((_e=j[ht]).x-(a=j[ot]).x)*(a.y+_e.y);return it}wm.types=["Unknown","Point","LineString","Polygon"],wm.prototype.loadGeometry=function(){var j=this._pbf;j.pos=this._geometry;for(var a,_e=j.readVarint()+j.pos,it=1,ot=0,lt=0,ht=0,pt=[];j.pos<_e;){if(ot<=0){var gt=j.readVarint();it=7&gt,ot=gt>>3}if(ot--,it===1||it===2)lt+=j.readSVarint(),ht+=j.readSVarint(),it===1&&(a&&pt.push(a),a=[]),a.push(new VE(lt,ht));else{if(it!==7)throw new Error("unknown command "+it);a&&a.push(a[0].clone())}}return a&&pt.push(a),pt},wm.prototype.bbox=function(){var j=this._pbf;j.pos=this._geometry;for(var a=j.readVarint()+j.pos,_e=1,it=0,ot=0,lt=0,ht=1/0,pt=-1/0,gt=1/0,yt=-1/0;j.pos<a;){if(it<=0){var Et=j.readVarint();_e=7&Et,it=Et>>3}if(it--,_e===1||_e===2)(ot+=j.readSVarint())<ht&&(ht=ot),ot>pt&&(pt=ot),(lt+=j.readSVarint())<gt&&(gt=lt),lt>yt&&(yt=lt);else if(_e!==7)throw new Error("unknown command "+_e)}return[ht,gt,pt,yt]},wm.prototype.toGeoJSON=function(j,a,_e){var it,ot,lt=this.extent*Math.pow(2,_e),ht=this.extent*j,pt=this.extent*a,gt=this.loadGeometry(),yt=wm.types[this.type];function Et(zt){for(var Ot=0;Ot<zt.length;Ot++){var Ut=zt[Ot];zt[Ot]=[360*(Ut.x+ht)/lt-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ut.y+pt)/lt)*Math.PI/180))-90]}}switch(this.type){case 1:var Pt=[];for(it=0;it<gt.length;it++)Pt[it]=gt[it][0];Et(gt=Pt);break;case 2:for(it=0;it<gt.length;it++)Et(gt[it]);break;case 3:for(gt=function(zt){var Ot=zt.length;if(Ot<=1)return[zt];for(var Ut,Kt,rr=[],pr=0;pr<Ot;pr++){var nr=jE(zt[pr]);nr!==0&&(Kt===void 0&&(Kt=nr<0),Kt===nr<0?(Ut&&rr.push(Ut),Ut=[zt[pr]]):Ut.push(zt[pr]))}return Ut&&rr.push(Ut),rr}(gt),it=0;it<gt.length;it++)for(ot=0;ot<gt[it].length;ot++)Et(gt[it][ot])}gt.length===1?gt=gt[0]:yt="Multi"+yt;var Rt={type:"Feature",geometry:{type:yt,coordinates:gt},properties:this.properties};return"id"in this&&(Rt.id=this.id),Rt};var UE=lx,cx=hx;function hx(j,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=j,this._keys=[],this._values=[],this._features=[],j.readFields(GE,this,a),this.length=this._features.length}function GE(j,a,_e){j===15?a.version=_e.readVarint():j===1?a.name=_e.readString():j===5?a.extent=_e.readVarint():j===2?a._features.push(_e.pos):j===3?a._keys.push(_e.readString()):j===4&&a._values.push(function(it){for(var ot=null,lt=it.readVarint()+it.pos;it.pos<lt;){var ht=it.readVarint()>>3;ot=ht===1?it.readString():ht===2?it.readFloat():ht===3?it.readDouble():ht===4?it.readVarint64():ht===5?it.readVarint():ht===6?it.readSVarint():ht===7?it.readBoolean():null}return ot}(_e))}hx.prototype.feature=function(j){if(j<0||j>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[j];var a=this._pbf.readVarint()+this._pbf.pos;return new UE(this._pbf,a,this.extent,this._keys,this._values)};var HE=cx;function qE(j,a,_e){if(j===3){var it=new HE(_e,_e.readVarint()+_e.pos);it.length&&(a[it.name]=it)}}var R_=hv.VectorTile=function(j,a){this.layers=j.readFields(qE,{},a)},uv=hv.VectorTileFeature=lx;function dv(j,a,_e,it){const ot=[],lt=it===0?(ht,pt,gt,yt,Et,Pt)=>{ht.push(new ir(Pt,gt+(Pt-pt)/(yt-pt)*(Et-gt)))}:(ht,pt,gt,yt,Et,Pt)=>{ht.push(new ir(pt+(Pt-gt)/(Et-gt)*(yt-pt),Pt))};for(const ht of j){const pt=[];for(const gt of ht){if(gt.length<=2)continue;const yt=[];for(let Rt=0;Rt<gt.length-1;Rt++){const zt=gt[Rt].x,Ot=gt[Rt].y,Ut=gt[Rt+1].x,Kt=gt[Rt+1].y,rr=it===0?zt:Ot,pr=it===0?Ut:Kt;rr<a?pr>a&&lt(yt,zt,Ot,Ut,Kt,a):rr>_e?pr<_e&&lt(yt,zt,Ot,Ut,Kt,_e):yt.push(gt[Rt]),pr<a&&rr>=a&&lt(yt,zt,Ot,Ut,Kt,a),pr>_e&&rr<=_e&&lt(yt,zt,Ot,Ut,Kt,_e)}let Et=gt[gt.length-1];const Pt=it===0?Et.x:Et.y;Pt>=a&&Pt<=_e&&yt.push(Et),yt.length&&(Et=yt[yt.length-1],yt[0].x===Et.x&&yt[0].y===Et.y||yt.push(yt[0]),pt.push(yt))}pt.length&&ot.push(pt)}return ot}hv.VectorTileLayer=cx;const WE=uv.types,ZE=Math.pow(2,13);function Uy(j,a,_e,it,ot,lt,ht,pt){j.emplaceBack((a<<1)+ht,(_e<<1)+lt,(Math.floor(it*ZE)<<1)+ot,Math.round(pt))}function Gy(j,a,_e){j.emplaceBack(a.x,a.y,a.z,_e[0]*16384,_e[1]*16384,_e[2]*16384)}class ux{constructor(){this.acc=new ir(0,0),this.polyCount=[]}startRing(a){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ir(a.x,a.y),this.max=new ir(a.x,a.y))}append(a,_e){this.currentPolyCount.edges++,this.acc._add(a);const it=this.min,ot=this.max;a.x<it.x?it.x=a.x:a.x>ot.x&&(ot.x=a.x),a.y<it.y?it.y=a.y:a.y>ot.y&&(ot.y=a.y),((a.x===0||a.x===Cn)&&a.x===_e.x)!=((a.y===0||a.y===Cn)&&a.y===_e.y)&&this.processBorderOverlap(a,_e),_e.x<0!=a.x<0&&this.addBorderIntersection(0,Kn(_e.y,a.y,(0-_e.x)/(a.x-_e.x))),_e.x>Cn!=a.x>Cn&&this.addBorderIntersection(1,Kn(_e.y,a.y,(Cn-_e.x)/(a.x-_e.x))),_e.y<0!=a.y<0&&this.addBorderIntersection(2,Kn(_e.x,a.x,(0-_e.y)/(a.y-_e.y))),_e.y>Cn!=a.y>Cn&&this.addBorderIntersection(3,Kn(_e.x,a.x,(Cn-_e.y)/(a.y-_e.y)))}addBorderIntersection(a,_e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const it=this.borders[a];_e<it[0]&&(it[0]=_e),_e>it[1]&&(it[1]=_e)}processBorderOverlap(a,_e){if(a.x===_e.x){if(a.y===_e.y)return;const it=a.x===0?0:1;this.addBorderIntersection(it,_e.y),this.addBorderIntersection(it,a.y)}else{const it=a.y===0?2:3;this.addBorderIntersection(it,_e.x),this.addBorderIntersection(it,a.x)}}centroid(){const a=this.polyCount.reduce((_e,it)=>_e+it.edges,0);return a!==0?this.acc.div(a)._round():new ir(0,0)}span(){return new ir(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((a,_e)=>a+ +(_e[0]!==Number.MAX_VALUE),0)}}class Hy{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(_e=>_e.id),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.layoutVertexArray=new Hr,this.centroidVertexArray=new $l,this.indexArray=new wn,this.programConfigurations=new Tp(a.layers,a.zoom),this.segments=new Ho,this.stateDependentLayerIds=this.layers.filter(_e=>_e.isStateDependent()).map(_e=>_e.id),this.enableTerrain=a.enableTerrain}populate(a,_e,it,ot){this.features=[],this.hasPattern=M_("fill-extrusion",this.layers,_e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(lt){const ht=Math.exp(Math.PI*(1-lt.y/(1<<lt.z)*2));return 80150034*ht/(ht*ht+1)/Cn/(1<<lt.z)}(it),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:lt,id:ht,index:pt,sourceLayerIndex:gt}of a){const yt=this.layers[0]._featureFilter.needGeometry,Et=Mp(lt,yt);if(!this.layers[0]._featureFilter.filter(new kt(this.zoom),Et,it))continue;const Pt={id:ht,sourceLayerIndex:gt,index:pt,geometry:yt?Et.geometry:vu(lt,it,ot),properties:lt.properties,type:lt.type,patterns:{}},Rt=this.layoutVertexArray.length;this.hasPattern?this.features.push(L_("fill-extrusion",this.layers,Pt,this.zoom,_e)):this.addFeature(Pt,Pt.geometry,pt,it,{},_e.availableImages,ot),_e.featureIndex.insert(lt,Pt.geometry,pt,gt,this.index,Rt)}this.sortBorders()}addFeatures(a,_e,it,ot,lt){for(const ht of this.features){const{geometry:pt}=ht;this.addFeature(ht,pt,ht.index,_e,it,ot,lt)}this.sortBorders()}update(a,_e,it,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,_e,this.stateDependentLayers,it,ot)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,FE),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,BE.members,!0))),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,OE.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,_e,it,ot,lt,ht,pt){const gt=[new ir(0,0),new ir(Cn,Cn)],yt=pt.projection,Et=yt.name==="globe",Pt=this.enableTerrain&&!Et?new ux:null,Rt=WE[a.type]==="Polygon";Et&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new rn);const zt=I_(_e,500);for(let rr=zt.length-1;rr>=0;rr--){const pr=zt[rr];(pr.length===0||(Ot=pr[0]).every(nr=>nr.x<=0)||Ot.every(nr=>nr.x>=Cn)||Ot.every(nr=>nr.y<=0)||Ot.every(nr=>nr.y>=Cn))&&zt.splice(rr,1)}var Ot;let Ut;if(Et)Ut=vx(zt,gt,ot);else{Ut=[];for(const rr of zt)Ut.push({polygon:rr,bounds:gt})}const Kt=Rt?this.edgeRadius:0;for(const{polygon:rr,bounds:pr}of Ut){let nr=0,ur=0;for(const fr of rr)Rt&&!fr[0].equals(fr[fr.length-1])&&fr.push(fr[0]),ur+=Rt?fr.length-1:fr.length;const mr=this.segments.prepareSegment((Rt?5:4)*ur,this.layoutVertexArray,this.indexArray);if(Rt){const fr=[],Rr=[];nr=mr.vertexLength;for(const Ur of rr){let en,Br;Ur.length&&Ur!==rr[0]&&Rr.push(fr.length/2),en=Ur[1].sub(Ur[0])._perp()._unit();for(let qr=1;qr<Ur.length;qr++){const Wr=Ur[qr],Kr=Ur[qr===Ur.length-1?1:qr+1];let{x:sn,y:Nr}=Wr;if(Kt){Br=Kr.sub(Wr)._perp()._unit();const dn=en.add(Br)._unit(),xn=Kt*Math.min(4,1/(en.x*dn.x+en.y*dn.y));sn+=xn*dn.x,Nr+=xn*dn.y,en=Br}Uy(this.layoutVertexArray,sn,Nr,0,0,1,1,0),mr.vertexLength++,fr.push(Wr.x,Wr.y),Et&&Gy(this.layoutVertexExtArray,yt.projectTilePoint(sn,Nr,ot),yt.upVector(ot,sn,Nr))}}const Ir=A_(fr,Rr);for(let Ur=0;Ur<Ir.length;Ur+=3)this.indexArray.emplaceBack(nr+Ir[Ur],nr+Ir[Ur+2],nr+Ir[Ur+1]),mr.primitiveLength++}for(const fr of rr){Pt&&fr.length&&Pt.startRing(fr[0]);let Rr,Ir,Ur,en=fr.length>4&&mx(fr[fr.length-2],fr[0],fr[1]),Br=Kt?XE(fr[fr.length-2],fr[0],fr[1],Kt):0;Ir=fr[1].sub(fr[0])._perp()._unit();let qr=!0;for(let Wr=1,Kr=0;Wr<fr.length;Wr++){let sn=fr[Wr-1],Nr=fr[Wr];const dn=fr[Wr===fr.length-1?1:Wr+1];if(Pt&&Rt&&Pt.currentPolyCount.top++,fx(Nr,sn,pr)){Kt&&(Ir=dn.sub(Nr)._perp()._unit(),qr=!qr);continue}Pt&&Pt.append(Nr,sn);const xn=Nr.sub(sn)._perp(),pn=xn.x/(Math.abs(xn.x)+Math.abs(xn.y)),zn=xn.y>0?1:0,an=sn.dist(Nr);if(Kr+an>32768&&(Kr=0),Kt){Ur=dn.sub(Nr)._perp()._unit();let Bn=px(sn,Nr,dn,dx(Ir,Ur),Kt);isNaN(Bn)&&(Bn=0);const In=Nr.sub(sn)._unit();sn=sn.add(In.mult(Br))._round(),Nr=Nr.add(In.mult(-Bn))._round(),Br=Bn,Ir=Ur}const Tn=mr.vertexLength,On=fr.length>4&&mx(sn,Nr,dn);let Jn=gx(Kr,en,qr);if(Uy(this.layoutVertexArray,sn.x,sn.y,pn,zn,0,0,Jn),Uy(this.layoutVertexArray,sn.x,sn.y,pn,zn,0,1,Jn),Kr+=an,Jn=gx(Kr,On,!qr),en=On,Uy(this.layoutVertexArray,Nr.x,Nr.y,pn,zn,0,0,Jn),Uy(this.layoutVertexArray,Nr.x,Nr.y,pn,zn,0,1,Jn),mr.vertexLength+=4,this.indexArray.emplaceBack(Tn+0,Tn+1,Tn+2),this.indexArray.emplaceBack(Tn+1,Tn+3,Tn+2),mr.primitiveLength+=2,Kt){const Bn=nr+(Wr===1?fr.length-2:Wr-2),In=Wr===1?nr:Bn+1;if(this.indexArray.emplaceBack(Tn+1,Bn,Tn+3),this.indexArray.emplaceBack(Bn,In,Tn+3),mr.primitiveLength+=2,Rr===void 0&&(Rr=Tn),!fx(dn,fr[Wr],pr)){const yo=Wr===fr.length-1?Rr:mr.vertexLength;this.indexArray.emplaceBack(Tn+2,Tn+3,yo),this.indexArray.emplaceBack(Tn+3,yo+1,yo),this.indexArray.emplaceBack(Tn+3,In,yo+1),mr.primitiveLength+=3}qr=!qr}if(Et){const Bn=this.layoutVertexExtArray,In=yt.projectTilePoint(sn.x,sn.y,ot),yo=yt.projectTilePoint(Nr.x,Nr.y,ot),Fn=yt.upVector(ot,sn.x,sn.y),Vn=yt.upVector(ot,Nr.x,Nr.y);Gy(Bn,In,Fn),Gy(Bn,In,Fn),Gy(Bn,yo,Vn),Gy(Bn,yo,Vn)}}Rt&&(nr+=fr.length-1)}}if(Pt&&Pt.polyCount.length>0){if(Pt.borders){Pt.vertexArrayOffset=this.centroidVertexArray.length;const rr=Pt.borders,pr=this.featuresOnBorder.push(Pt)-1;for(let nr=0;nr<4;nr++)rr[nr][0]!==Number.MAX_VALUE&&this.borders[nr].push(pr)}this.encodeCentroid(Pt.borders?void 0:Pt.centroid(),Pt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,it,lt,ht,ot)}sortBorders(){for(let a=0;a<4;a++)this.borders[a].sort((_e,it)=>this.featuresOnBorder[_e].borders[a][0]-this.featuresOnBorder[it].borders[a][0])}encodeCentroid(a,_e,it=!0){let ot,lt;if(a)if(a.y!==0){const pt=_e.span()._mult(this.tileToMeter);ot=(Math.max(a.x,1)<<3)+Math.min(7,Math.round(pt.x/10)),lt=(Math.max(a.y,1)<<3)+Math.min(7,Math.round(pt.y/10))}else ot=Math.ceil(7*(a.x+450)),lt=0;else ot=0,lt=+it;let ht=it?this.centroidVertexArray.length:_e.vertexArrayOffset;for(const pt of _e.polyCount){it&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*pt.edges+pt.top);for(let gt=0;gt<pt.top;gt++)this.centroidVertexArray.emplace(ht++,ot,lt);for(let gt=0;gt<2*pt.edges;gt++)this.centroidVertexArray.emplace(ht++,0,lt),this.centroidVertexArray.emplace(ht++,ot,lt)}}}function dx(j,a){const _e=j.add(a)._unit();return j.x*_e.x+j.y*_e.y}function XE(j,a,_e,it){const ot=a.sub(j)._perp()._unit(),lt=_e.sub(a)._perp()._unit();return px(j,a,_e,dx(ot,lt),it)}function px(j,a,_e,it,ot){const lt=Math.sqrt(1-it*it);return Math.min(j.dist(a)/3,a.dist(_e)/3,ot*lt/it)}function fx(j,a,_e){return j.x<_e[0].x&&a.x<_e[0].x||j.x>_e[1].x&&a.x>_e[1].x||j.y<_e[0].y&&a.y<_e[0].y||j.y>_e[1].y&&a.y>_e[1].y}function mx(j,a,_e){if(j.x<0||j.x>=Cn||a.x<0||a.x>=Cn||_e.x<0||_e.x>=Cn)return!1;const it=_e.sub(a),ot=it.perp(),lt=j.sub(a);return(it.x*lt.x+it.y*lt.y)/Math.sqrt((it.x*it.x+it.y*it.y)*(lt.x*lt.x+lt.y*lt.y))>-.866&&ot.x*lt.x+ot.y*lt.y<0}function gx(j,a,_e){const it=a?2|j:-3&j;return _e?1|it:-2&it}function yx(){const j=Math.PI/32,a=Math.tan(j),_e=By;return _e*Math.sqrt(1+2*a*a)-_e}function vx(j,a,_e){const it=1<<_e.z,ot=Qs(_e.x/it),lt=Qs((_e.x+1)/it),ht=xs(_e.y/it),pt=xs((_e.y+1)/it);return function(gt,yt,Et,Pt,Rt=0,zt){const Ot=[];if(!gt.length||!Et||!Pt)return Ot;const Ut=(fr,Rr)=>{for(const Ir of fr)Ot.push({polygon:Ir,bounds:Rr})},Kt=Math.ceil(Math.log2(Et)),rr=Math.ceil(Math.log2(Pt)),pr=Kt-rr,nr=[];for(let fr=0;fr<Math.abs(pr);fr++)nr.push(pr>0?0:1);for(let fr=0;fr<Math.min(Kt,rr);fr++)nr.push(0),nr.push(1);let ur=gt;if(ur=dv(ur,yt[0].y-Rt,yt[1].y+Rt,1),ur=dv(ur,yt[0].x-Rt,yt[1].x+Rt,0),!ur.length)return Ot;const mr=[];for(nr.length?mr.push({polygons:ur,bounds:yt,depth:0}):Ut(ur,yt);mr.length;){const fr=mr.pop(),Rr=fr.depth,Ir=nr[Rr],Ur=fr.bounds[0],en=fr.bounds[1],Br=Ir===0?Ur.x:Ur.y,qr=Ir===0?en.x:en.y,Wr=zt?zt(Ir,Br,qr):.5*(Br+qr),Kr=dv(fr.polygons,Br-Rt,Wr+Rt,Ir),sn=dv(fr.polygons,Wr-Rt,qr+Rt,Ir);if(Kr.length){const Nr=[Ur,new ir(Ir===0?Wr:en.x,Ir===1?Wr:en.y)];nr.length>Rr+1?mr.push({polygons:Kr,bounds:Nr,depth:Rr+1}):Ut(Kr,Nr)}if(sn.length){const Nr=[new ir(Ir===0?Wr:Ur.x,Ir===1?Wr:Ur.y),en];nr.length>Rr+1?mr.push({polygons:sn,bounds:Nr,depth:Rr+1}):Ut(sn,Nr)}}return Ot}(j,a,Math.ceil((lt-ot)/11.25),Math.ceil((ht-pt)/11.25),1,(gt,yt,Et)=>{if(gt===0)return .5*(yt+Et);{const Pt=xs((_e.y+yt/Cn)/it);return(eu(.5*(xs((_e.y+Et/Cn)/it)+Pt))*it-_e.y)*Cn}})}vn(Hy,"FillExtrusionBucket",{omit:["layers","features"]}),vn(ux,"PartMetadata");const YE=new lr({"fill-extrusion-edge-radius":new jt(jr["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var KE={paint:new lr({"fill-extrusion-opacity":new jt(jr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qt(jr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt(jr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt(jr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qt(jr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qt(jr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qt(jr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt(jr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new jt(jr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new jt(jr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new jt(jr["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:YE};function _x(j,a,_e){var it=2*Math.PI*6378137/256/Math.pow(2,_e);return[j*it-2*Math.PI*6378137/2,a*it-2*Math.PI*6378137/2]}class pv{constructor(a,_e,it){this.z=a,this.x=_e,this.y=it,this.key=qy(0,a,a,_e,it)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,_e){const it=function(lt,ht,pt){var gt=_x(256*lt,256*(ht=Math.pow(2,pt)-ht-1),pt),yt=_x(256*(lt+1),256*(ht+1),pt);return gt[0]+","+gt[1]+","+yt[0]+","+yt[1]}(this.x,this.y,this.z),ot=function(lt,ht,pt){let gt,yt="";for(let Et=lt;Et>0;Et--)gt=1<<Et-1,yt+=(ht&gt?1:0)+(pt&gt?2:0);return yt}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_e==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ot).replace("{bbox-epsg-3857}",it)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xx{constructor(a,_e){this.wrap=a,this.canonical=_e,this.key=qy(a,_e.z,_e.z,_e.x,_e.y)}}class Ms{constructor(a,_e,it,ot,lt){this.overscaledZ=a,this.wrap=_e,this.canonical=new pv(it,+ot,+lt),this.key=_e===0&&a===it?this.canonical.key:qy(_e,a,it,ot,lt)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const _e=this.canonical.z-a;return a>this.canonical.z?new Ms(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ms(a,this.wrap,a,this.canonical.x>>_e,this.canonical.y>>_e)}calculateScaledKey(a,_e=!0){if(this.overscaledZ===a&&_e)return this.key;if(a>this.canonical.z)return qy(this.wrap*+_e,a,this.canonical.z,this.canonical.x,this.canonical.y);{const it=this.canonical.z-a;return qy(this.wrap*+_e,a,a,this.canonical.x>>it,this.canonical.y>>it)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const _e=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>_e&&a.canonical.y===this.canonical.y>>_e}children(a){if(this.overscaledZ>=a)return[new Ms(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const _e=this.canonical.z+1,it=2*this.canonical.x,ot=2*this.canonical.y;return[new Ms(_e,this.wrap,_e,it,ot),new Ms(_e,this.wrap,_e,it+1,ot),new Ms(_e,this.wrap,_e,it,ot+1),new Ms(_e,this.wrap,_e,it+1,ot+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Ms(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Ms(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function qy(j,a,_e,it,ot){const lt=1<<Math.min(_e,22);let ht=lt*(ot%lt)+it%lt;return j&&_e<22&&(ht+=lt*lt*((j<0?-2*j-1:2*j)%(1<<2*(22-_e)))),16*(32*ht+_e)+(a-_e)}vn(pv,"CanonicalTileID"),vn(Ms,"OverscaledTileID",{omit:["projMatrix"]});class Em extends ir{constructor(a,_e,it){super(a,_e),this.z=it}}function Wy(j,a){return j.x*a.x+j.y*a.y}function bx(j,a){if(j.length===1){let _e=0;const it=a[_e++];let ot;for(;!ot||it.equals(ot);)if(ot=a[_e++],!ot)return 1/0;for(;_e<a.length;_e++){const lt=a[_e],ht=j[0],pt=ot.sub(it),gt=lt.sub(it),yt=ht.sub(it),Et=Wy(pt,pt),Pt=Wy(pt,gt),Rt=Wy(gt,gt),zt=Wy(yt,pt),Ot=Wy(yt,gt),Ut=Et*Rt-Pt*Pt,Kt=(Rt*zt-Pt*Ot)/Ut,rr=(Et*Ot-Pt*zt)/Ut,pr=it.z*(1-Kt-rr)+ot.z*Kt+lt.z*rr;if(isFinite(pr))return pr}return 1/0}{let _e=1/0;for(const it of a)_e=Math.min(_e,it.z);return _e}}function wx(j,a,_e,it,ot,lt,ht,pt){const gt=ht*ot.getElevationAt(j,a,!0,!0),yt=lt[0]!==0,Et=yt?lt[1]===0?ht*(lt[0]/7-450):ht*function(Pt,Rt,zt){const Ot=Math.floor(Rt[0]/8),Ut=Math.floor(Rt[1]/8),Kt=10*(Rt[0]-8*Ot),rr=10*(Rt[1]-8*Ut),pr=Pt.getElevationAt(Ot,Ut,!0,!0),nr=Pt.getMeterToDEM(zt),ur=Math.floor(.5*(Kt*nr-1)),mr=Math.floor(.5*(rr*nr-1)),fr=Pt.tileCoordToPixel(Ot,Ut),Rr=2*ur+1,Ir=2*mr+1,Ur=function(sn,Nr,dn,xn,pn){return[sn.getElevationAtPixel(Nr,dn,!0),sn.getElevationAtPixel(Nr+pn,dn,!0),sn.getElevationAtPixel(Nr,dn+pn,!0),sn.getElevationAtPixel(Nr+xn,dn+pn,!0)]}(Pt,fr.x-ur,fr.y-mr,Rr,Ir),en=Math.abs(Ur[0]-Ur[1]),Br=Math.abs(Ur[2]-Ur[3]),qr=Math.abs(Ur[0]-Ur[2])+Math.abs(Ur[1]-Ur[3]),Wr=Math.min(.25,.5*nr*(en+Br)/Rr),Kr=Math.min(.25,.5*nr*qr/Ir);return pr+Math.max(Wr*Kt,Kr*rr)}(ot,lt,pt):gt;return{base:gt+(_e===0)?-1:_e,top:yt?Math.max(Et+it,gt+_e+2):gt+it}}const QE=Sr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:JE}=QE,eS=Sr([{name:"a_packed",components:4,type:"Float32"}]),{members:tS}=eS,iS=uv.types,rS=Math.cos(Math.PI/180*37.5);class fv{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(_e=>_e.id),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(_e=>{this.gradients[_e.id]={}}),this.layoutVertexArray=new Or,this.layoutVertexArray2=new Qr,this.indexArray=new wn,this.programConfigurations=new Tp(a.layers,a.zoom),this.segments=new Ho,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(_e=>_e.isStateDependent()).map(_e=>_e.id)}populate(a,_e,it,ot){this.hasPattern=M_("line",this.layers,_e);const lt=this.layers[0].layout.get("line-sort-key"),ht=[];for(const{feature:Et,id:Pt,index:Rt,sourceLayerIndex:zt}of a){const Ot=this.layers[0]._featureFilter.needGeometry,Ut=Mp(Et,Ot);if(!this.layers[0]._featureFilter.filter(new kt(this.zoom),Ut,it))continue;const Kt=lt?lt.evaluate(Ut,{},it):void 0,rr={id:Pt,properties:Et.properties,type:Et.type,sourceLayerIndex:zt,index:Rt,geometry:Ot?Ut.geometry:vu(Et,it,ot),patterns:{},sortKey:Kt};ht.push(rr)}lt&&ht.sort((Et,Pt)=>Et.sortKey-Pt.sortKey);const{lineAtlas:pt,featureIndex:gt}=_e,yt=this.addConstantDashes(pt);for(const Et of ht){const{geometry:Pt,index:Rt,sourceLayerIndex:zt}=Et;if(yt&&this.addFeatureDashes(Et,pt),this.hasPattern){const Ot=L_("line",this.layers,Et,this.zoom,_e);this.patternFeatures.push(Ot)}else this.addFeature(Et,Pt,Rt,it,pt.positions,_e.availableImages);gt.insert(a[Rt].feature,Pt,Rt,zt,this.index)}}addConstantDashes(a){let _e=!1;for(const it of this.layers){const ot=it.paint.get("line-dasharray").value,lt=it.layout.get("line-cap").value;if(ot.kind!=="constant"||lt.kind!=="constant")_e=!0;else{const ht=lt.value,pt=ot.value;if(!pt)continue;a.addDash(pt,ht)}}return _e}addFeatureDashes(a,_e){const it=this.zoom;for(const ot of this.layers){const lt=ot.paint.get("line-dasharray").value,ht=ot.layout.get("line-cap").value;if(lt.kind==="constant"&&ht.kind==="constant")continue;let pt,gt;if(lt.kind==="constant"){if(pt=lt.value,!pt)continue}else pt=lt.evaluate({zoom:it},a);gt=ht.kind==="constant"?ht.value:ht.evaluate({zoom:it},a),_e.addDash(pt,gt),a.patterns[ot.id]=_e.getKey(pt,gt)}}update(a,_e,it,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,_e,this.stateDependentLayers,it,ot)}addFeatures(a,_e,it,ot,lt){for(const ht of this.patternFeatures)this.addFeature(ht,ht.geometry,ht.index,_e,it,ot)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,tS)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,JE),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,_e,it,ot,lt,ht){const pt=this.layers[0].layout,gt=pt.get("line-join").evaluate(a,{}),yt=pt.get("line-cap").evaluate(a,{}),Et=pt.get("line-miter-limit"),Pt=pt.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Rt of _e)this.addLine(Rt,a,gt,yt,Et,Pt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,it,lt,ht,ot)}addLine(a,_e,it,ot,lt,ht){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let rr=0;rr<a.length-1;rr++)this.totalDistance+=a[rr].dist(a[rr+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const pt=iS[_e.type]==="Polygon";let gt=a.length;for(;gt>=2&&a[gt-1].equals(a[gt-2]);)gt--;let yt=0;for(;yt<gt-1&&a[yt].equals(a[yt+1]);)yt++;if(gt<(pt?3:2))return;it==="bevel"&&(lt=1.05);const Et=this.overscaling<=16?15*Cn/(512*this.overscaling):0,Pt=this.segments.prepareSegment(10*gt,this.layoutVertexArray,this.indexArray);let Rt,zt,Ot,Ut,Kt;this.e1=this.e2=-1,pt&&(Rt=a[gt-2],Kt=a[yt].sub(Rt)._unit()._perp());for(let rr=yt;rr<gt;rr++){if(Ot=rr===gt-1?pt?a[yt+1]:void 0:a[rr+1],Ot&&a[rr].equals(Ot))continue;Kt&&(Ut=Kt),Rt&&(zt=Rt),Rt=a[rr],Kt=Ot?Ot.sub(Rt)._unit()._perp():Ut,Ut=Ut||Kt;let pr=Ut.add(Kt);pr.x===0&&pr.y===0||pr._unit();const nr=Ut.x*Kt.x+Ut.y*Kt.y,ur=pr.x*Kt.x+pr.y*Kt.y,mr=ur!==0?1/ur:1/0,fr=2*Math.sqrt(2-2*ur),Rr=ur<rS&&zt&&Ot,Ir=Ut.x*Kt.y-Ut.y*Kt.x>0;if(Rr&&rr>yt){const Br=Rt.dist(zt);if(Br>2*Et){const qr=Rt.sub(Rt.sub(zt)._mult(Et/Br)._round());this.updateDistance(zt,qr),this.addCurrentVertex(qr,Ut,0,0,Pt),zt=qr}}const Ur=zt&&Ot;let en=Ur?it:pt?"butt":ot;if(Ur&&en==="round"&&(mr<ht?en="miter":mr<=2&&(en="fakeround")),en==="miter"&&mr>lt&&(en="bevel"),en==="bevel"&&(mr>2&&(en="flipbevel"),mr<lt&&(en="miter")),zt&&this.updateDistance(zt,Rt),en==="miter")pr._mult(mr),this.addCurrentVertex(Rt,pr,0,0,Pt);else if(en==="flipbevel"){if(mr>100)pr=Kt.mult(-1);else{const Br=mr*Ut.add(Kt).mag()/Ut.sub(Kt).mag();pr._perp()._mult(Br*(Ir?-1:1))}this.addCurrentVertex(Rt,pr,0,0,Pt),this.addCurrentVertex(Rt,pr.mult(-1),0,0,Pt)}else if(en==="bevel"||en==="fakeround"){const Br=-Math.sqrt(mr*mr-1),qr=Ir?Br:0,Wr=Ir?0:Br;if(zt&&this.addCurrentVertex(Rt,Ut,qr,Wr,Pt),en==="fakeround"){const Kr=Math.round(180*fr/Math.PI/20);for(let sn=1;sn<Kr;sn++){let Nr=sn/Kr;if(Nr!==.5){const xn=Nr-.5;Nr+=Nr*xn*(Nr-1)*((1.0904+nr*(nr*(3.55645-1.43519*nr)-3.2452))*xn*xn+(.848013+nr*(.215638*nr-1.06021)))}const dn=Kt.sub(Ut)._mult(Nr)._add(Ut)._unit()._mult(Ir?-1:1);this.addHalfVertex(Rt,dn.x,dn.y,!1,Ir,0,Pt)}}Ot&&this.addCurrentVertex(Rt,Kt,-qr,-Wr,Pt)}else if(en==="butt")this.addCurrentVertex(Rt,pr,0,0,Pt);else if(en==="square"){const Br=zt?1:-1;zt||this.addCurrentVertex(Rt,pr,Br,Br,Pt),this.addCurrentVertex(Rt,pr,0,0,Pt),zt&&this.addCurrentVertex(Rt,pr,Br,Br,Pt)}else en==="round"&&(zt&&(this.addCurrentVertex(Rt,Ut,0,0,Pt),this.addCurrentVertex(Rt,Ut,1,1,Pt,!0)),Ot&&(this.addCurrentVertex(Rt,Kt,-1,-1,Pt,!0),this.addCurrentVertex(Rt,Kt,0,0,Pt)));if(Rr&&rr<gt-1){const Br=Rt.dist(Ot);if(Br>2*Et){const qr=Rt.add(Ot.sub(Rt)._mult(Et/Br)._round());this.updateDistance(Rt,qr),this.addCurrentVertex(qr,Kt,0,0,Pt),Rt=qr}}}}addCurrentVertex(a,_e,it,ot,lt,ht=!1){const pt=_e.y*ot-_e.x,gt=-_e.y-_e.x*ot;this.addHalfVertex(a,_e.x+_e.y*it,_e.y-_e.x*it,ht,!1,it,lt),this.addHalfVertex(a,pt,gt,ht,!0,-ot,lt)}addHalfVertex({x:a,y:_e},it,ot,lt,ht,pt,gt){this.layoutVertexArray.emplaceBack((a<<1)+(lt?1:0),(_e<<1)+(ht?1:0),Math.round(63*it)+128,Math.round(63*ot)+128,1+(pt===0?0:pt<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const yt=gt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,yt),gt.primitiveLength++),ht?this.e2=yt:this.e1=yt}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,_e){this.distance+=a.dist(_e),this.updateScaledDistance()}}vn(fv,"LineBucket",{omit:["layers","patternFeatures"]});const nS=new lr({"line-cap":new Qt(jr.layout_line["line-cap"]),"line-join":new Qt(jr.layout_line["line-join"]),"line-miter-limit":new jt(jr.layout_line["line-miter-limit"]),"line-round-limit":new jt(jr.layout_line["line-round-limit"]),"line-sort-key":new Qt(jr.layout_line["line-sort-key"])});var Ex={paint:new lr({"line-opacity":new Qt(jr.paint_line["line-opacity"]),"line-color":new Qt(jr.paint_line["line-color"]),"line-translate":new jt(jr.paint_line["line-translate"]),"line-translate-anchor":new jt(jr.paint_line["line-translate-anchor"]),"line-width":new Qt(jr.paint_line["line-width"]),"line-gap-width":new Qt(jr.paint_line["line-gap-width"]),"line-offset":new Qt(jr.paint_line["line-offset"]),"line-blur":new Qt(jr.paint_line["line-blur"]),"line-dasharray":new Qt(jr.paint_line["line-dasharray"]),"line-pattern":new Qt(jr.paint_line["line-pattern"]),"line-gradient":new sr(jr.paint_line["line-gradient"]),"line-trim-offset":new jt(jr.paint_line["line-trim-offset"])}),layout:nS};const Sx=new class extends Qt{possiblyEvaluate(j,a){return a=new kt(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,transition:a.transition}),super.possiblyEvaluate(j,a)}evaluate(j,a,_e,it){return a=Yr({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(j,a,_e,it)}}(Ex.paint.properties["line-width"].specification);function Tx(j,a){return a>0?a+2*j:j}Sx.useIntegerZoom=!0;const oS=Sr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sS=Sr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),aS=Sr([{name:"a_projected_pos",components:4,type:"Float32"}],4);Sr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lS=Sr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),cS=Sr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Sr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kx=Sr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hS=Sr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Sr([{name:"triangle",components:3,type:"Uint16"}]),Sr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Sr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Sr([{type:"Float32",name:"offsetX"}]),Sr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var fs=24;const Nl=128;function D_(j,a){const{expression:_e}=a;if(_e.kind==="constant")return{kind:"constant",layoutSize:_e.evaluate(new kt(j+1))};if(_e.kind==="source")return{kind:"source"};{const{zoomStops:it,interpolationType:ot}=_e;let lt=0;for(;lt<it.length&&it[lt]<=j;)lt++;lt=Math.max(0,lt-1);let ht=lt;for(;ht<it.length&&it[ht]<j+1;)ht++;ht=Math.min(it.length-1,ht);const pt=it[lt],gt=it[ht];return _e.kind==="composite"?{kind:"composite",minZoom:pt,maxZoom:gt,interpolationType:ot}:{kind:"camera",minZoom:pt,maxZoom:gt,minSize:_e.evaluate(new kt(pt)),maxSize:_e.evaluate(new kt(gt)),interpolationType:ot}}}function mv(j,{uSize:a,uSizeT:_e},{lowerSize:it,upperSize:ot}){return j.kind==="source"?it/Nl:j.kind==="composite"?Kn(it/Nl,ot/Nl,_e):a}function Sm(j,a){let _e=0,it=0;if(j.kind==="constant")it=j.layoutSize;else if(j.kind!=="source"){const{interpolationType:ot,minZoom:lt,maxZoom:ht}=j,pt=ot?Nt(xa.interpolationFactor(ot,a,lt,ht),0,1):0;j.kind==="camera"?it=Kn(j.minSize,j.maxSize,pt):_e=pt}return{uSizeT:_e,uSize:it}}var uS=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Nl,evaluateSizeForFeature:mv,evaluateSizeForZoom:Sm,getSizeData:D_});function dS(j,a,_e){return j.sections.forEach(it=>{it.text=function(ot,lt,ht){const pt=lt.layout.get("text-transform").evaluate(ht,{});return pt==="uppercase"?ot=ot.toLocaleUpperCase():pt==="lowercase"&&(ot=ot.toLocaleLowerCase()),xt.applyArabicShaping&&(ot=xt.applyArabicShaping(ot)),ot}(it.text,a,_e)}),j}const Zy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function pS(j){return j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""}function fS(j){return j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""||j===""}var Cx=po,Px=function(j,a,_e,it,ot){var lt,ht,pt=8*ot-it-1,gt=(1<<pt)-1,yt=gt>>1,Et=-7,Pt=_e?ot-1:0,Rt=_e?-1:1,zt=j[a+Pt];for(Pt+=Rt,lt=zt&(1<<-Et)-1,zt>>=-Et,Et+=pt;Et>0;lt=256*lt+j[a+Pt],Pt+=Rt,Et-=8);for(ht=lt&(1<<-Et)-1,lt>>=-Et,Et+=it;Et>0;ht=256*ht+j[a+Pt],Pt+=Rt,Et-=8);if(lt===0)lt=1-yt;else{if(lt===gt)return ht?NaN:1/0*(zt?-1:1);ht+=Math.pow(2,it),lt-=yt}return(zt?-1:1)*ht*Math.pow(2,lt-it)},Ax=function(j,a,_e,it,ot,lt){var ht,pt,gt,yt=8*lt-ot-1,Et=(1<<yt)-1,Pt=Et>>1,Rt=ot===23?Math.pow(2,-24)-Math.pow(2,-77):0,zt=it?0:lt-1,Ot=it?1:-1,Ut=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(pt=isNaN(a)?1:0,ht=Et):(ht=Math.floor(Math.log(a)/Math.LN2),a*(gt=Math.pow(2,-ht))<1&&(ht--,gt*=2),(a+=ht+Pt>=1?Rt/gt:Rt*Math.pow(2,1-Pt))*gt>=2&&(ht++,gt/=2),ht+Pt>=Et?(pt=0,ht=Et):ht+Pt>=1?(pt=(a*gt-1)*Math.pow(2,ot),ht+=Pt):(pt=a*Math.pow(2,Pt-1)*Math.pow(2,ot),ht=0));ot>=8;j[_e+zt]=255&pt,zt+=Ot,pt/=256,ot-=8);for(ht=ht<<ot|pt,yt+=ot;yt>0;j[_e+zt]=255&ht,zt+=Ot,ht/=256,yt-=8);j[_e+zt-Ot]|=128*Ut};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function po(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}po.Varint=0,po.Fixed64=1,po.Bytes=2,po.Fixed32=5;var $_=4294967296,Ix=1/$_,Mx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function xu(j){return j.type===po.Bytes?j.readVarint()+j.pos:j.pos+1}function Tm(j,a,_e){return _e?4294967296*a+(j>>>0):4294967296*(a>>>0)+(j>>>0)}function Lx(j,a,_e){var it=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));_e.realloc(it);for(var ot=_e.pos-1;ot>=j;ot--)_e.buf[ot+it]=_e.buf[ot]}function mS(j,a){for(var _e=0;_e<j.length;_e++)a.writeVarint(j[_e])}function gS(j,a){for(var _e=0;_e<j.length;_e++)a.writeSVarint(j[_e])}function yS(j,a){for(var _e=0;_e<j.length;_e++)a.writeFloat(j[_e])}function vS(j,a){for(var _e=0;_e<j.length;_e++)a.writeDouble(j[_e])}function _S(j,a){for(var _e=0;_e<j.length;_e++)a.writeBoolean(j[_e])}function xS(j,a){for(var _e=0;_e<j.length;_e++)a.writeFixed32(j[_e])}function bS(j,a){for(var _e=0;_e<j.length;_e++)a.writeSFixed32(j[_e])}function wS(j,a){for(var _e=0;_e<j.length;_e++)a.writeFixed64(j[_e])}function ES(j,a){for(var _e=0;_e<j.length;_e++)a.writeSFixed64(j[_e])}function gv(j,a){return(j[a]|j[a+1]<<8|j[a+2]<<16)+16777216*j[a+3]}function km(j,a,_e){j[_e]=a,j[_e+1]=a>>>8,j[_e+2]=a>>>16,j[_e+3]=a>>>24}function Rx(j,a){return(j[a]|j[a+1]<<8|j[a+2]<<16)+(j[a+3]<<24)}po.prototype={destroy:function(){this.buf=null},readFields:function(j,a,_e){for(_e=_e||this.length;this.pos<_e;){var it=this.readVarint(),ot=it>>3,lt=this.pos;this.type=7&it,j(ot,a,this),this.pos===lt&&this.skip(it)}return a},readMessage:function(j,a){return this.readFields(j,a,this.readVarint()+this.pos)},readFixed32:function(){var j=gv(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=Rx(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=gv(this.buf,this.pos)+gv(this.buf,this.pos+4)*$_;return this.pos+=8,j},readSFixed64:function(){var j=gv(this.buf,this.pos)+Rx(this.buf,this.pos+4)*$_;return this.pos+=8,j},readFloat:function(){var j=Px(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=Px(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var a,_e,it=this.buf;return a=127&(_e=it[this.pos++]),_e<128?a:(a|=(127&(_e=it[this.pos++]))<<7,_e<128?a:(a|=(127&(_e=it[this.pos++]))<<14,_e<128?a:(a|=(127&(_e=it[this.pos++]))<<21,_e<128?a:function(ot,lt,ht){var pt,gt,yt=ht.buf;if(pt=(112&(gt=yt[ht.pos++]))>>4,gt<128||(pt|=(127&(gt=yt[ht.pos++]))<<3,gt<128)||(pt|=(127&(gt=yt[ht.pos++]))<<10,gt<128)||(pt|=(127&(gt=yt[ht.pos++]))<<17,gt<128)||(pt|=(127&(gt=yt[ht.pos++]))<<24,gt<128)||(pt|=(1&(gt=yt[ht.pos++]))<<31,gt<128))return Tm(ot,pt,lt);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(_e=it[this.pos]))<<28,j,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2==1?(j+1)/-2:j/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var j=this.readVarint()+this.pos,a=this.pos;return this.pos=j,j-a>=12&&Mx?function(_e,it,ot){return Mx.decode(_e.subarray(it,ot))}(this.buf,a,j):function(_e,it,ot){for(var lt="",ht=it;ht<ot;){var pt,gt,yt,Et=_e[ht],Pt=null,Rt=Et>239?4:Et>223?3:Et>191?2:1;if(ht+Rt>ot)break;Rt===1?Et<128&&(Pt=Et):Rt===2?(192&(pt=_e[ht+1]))==128&&(Pt=(31&Et)<<6|63&pt)<=127&&(Pt=null):Rt===3?(gt=_e[ht+2],(192&(pt=_e[ht+1]))==128&&(192&gt)==128&&((Pt=(15&Et)<<12|(63&pt)<<6|63&gt)<=2047||Pt>=55296&&Pt<=57343)&&(Pt=null)):Rt===4&&(gt=_e[ht+2],yt=_e[ht+3],(192&(pt=_e[ht+1]))==128&&(192&gt)==128&&(192&yt)==128&&((Pt=(15&Et)<<18|(63&pt)<<12|(63&gt)<<6|63&yt)<=65535||Pt>=1114112)&&(Pt=null)),Pt===null?(Pt=65533,Rt=1):Pt>65535&&(Pt-=65536,lt+=String.fromCharCode(Pt>>>10&1023|55296),Pt=56320|1023&Pt),lt+=String.fromCharCode(Pt),ht+=Rt}return lt}(this.buf,a,j)},readBytes:function(){var j=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,j);return this.pos=j,a},readPackedVarint:function(j,a){if(this.type!==po.Bytes)return j.push(this.readVarint(a));var _e=xu(this);for(j=j||[];this.pos<_e;)j.push(this.readVarint(a));return j},readPackedSVarint:function(j){if(this.type!==po.Bytes)return j.push(this.readSVarint());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){if(this.type!==po.Bytes)return j.push(this.readBoolean());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readBoolean());return j},readPackedFloat:function(j){if(this.type!==po.Bytes)return j.push(this.readFloat());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readFloat());return j},readPackedDouble:function(j){if(this.type!==po.Bytes)return j.push(this.readDouble());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readDouble());return j},readPackedFixed32:function(j){if(this.type!==po.Bytes)return j.push(this.readFixed32());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){if(this.type!==po.Bytes)return j.push(this.readSFixed32());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){if(this.type!==po.Bytes)return j.push(this.readFixed64());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){if(this.type!==po.Bytes)return j.push(this.readSFixed64());var a=xu(this);for(j=j||[];this.pos<a;)j.push(this.readSFixed64());return j},skip:function(j){var a=7&j;if(a===po.Varint)for(;this.buf[this.pos++]>127;);else if(a===po.Bytes)this.pos=this.readVarint()+this.pos;else if(a===po.Fixed32)this.pos+=4;else{if(a!==po.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(j,a){this.writeVarint(j<<3|a)},realloc:function(j){for(var a=this.length||16;a<this.pos+j;)a*=2;if(a!==this.length){var _e=new Uint8Array(a);_e.set(this.buf),this.buf=_e,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),km(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),km(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),km(this.buf,-1&j,this.pos),km(this.buf,Math.floor(j*Ix),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),km(this.buf,-1&j,this.pos),km(this.buf,Math.floor(j*Ix),this.pos+4),this.pos+=8},writeVarint:function(j){(j=+j||0)>268435455||j<0?function(a,_e){var it,ot;if(a>=0?(it=a%4294967296|0,ot=a/4294967296|0):(ot=~(-a/4294967296),4294967295^(it=~(-a%4294967296))?it=it+1|0:(it=0,ot=ot+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_e.realloc(10),function(lt,ht,pt){pt.buf[pt.pos++]=127&lt|128,lt>>>=7,pt.buf[pt.pos++]=127&lt|128,lt>>>=7,pt.buf[pt.pos++]=127&lt|128,lt>>>=7,pt.buf[pt.pos++]=127&lt|128,pt.buf[pt.pos]=127&(lt>>>=7)}(it,0,_e),function(lt,ht){var pt=(7&lt)<<4;ht.buf[ht.pos++]|=pt|((lt>>>=3)?128:0),lt&&(ht.buf[ht.pos++]=127&lt|((lt>>>=7)?128:0),lt&&(ht.buf[ht.pos++]=127&lt|((lt>>>=7)?128:0),lt&&(ht.buf[ht.pos++]=127&lt|((lt>>>=7)?128:0),lt&&(ht.buf[ht.pos++]=127&lt|((lt>>>=7)?128:0),lt&&(ht.buf[ht.pos++]=127&lt)))))}(ot,_e)}(j,this):(this.realloc(4),this.buf[this.pos++]=127&j|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=j>>>7&127))))},writeSVarint:function(j){this.writeVarint(j<0?2*-j-1:2*j)},writeBoolean:function(j){this.writeVarint(!!j)},writeString:function(j){j=String(j),this.realloc(4*j.length),this.pos++;var a=this.pos;this.pos=function(it,ot,lt){for(var ht,pt,gt=0;gt<ot.length;gt++){if((ht=ot.charCodeAt(gt))>55295&&ht<57344){if(!pt){ht>56319||gt+1===ot.length?(it[lt++]=239,it[lt++]=191,it[lt++]=189):pt=ht;continue}if(ht<56320){it[lt++]=239,it[lt++]=191,it[lt++]=189,pt=ht;continue}ht=pt-55296<<10|ht-56320|65536,pt=null}else pt&&(it[lt++]=239,it[lt++]=191,it[lt++]=189,pt=null);ht<128?it[lt++]=ht:(ht<2048?it[lt++]=ht>>6|192:(ht<65536?it[lt++]=ht>>12|224:(it[lt++]=ht>>18|240,it[lt++]=ht>>12&63|128),it[lt++]=ht>>6&63|128),it[lt++]=63&ht|128)}return lt}(this.buf,j,this.pos);var _e=this.pos-a;_e>=128&&Lx(a,_e,this),this.pos=a-1,this.writeVarint(_e),this.pos+=_e},writeFloat:function(j){this.realloc(4),Ax(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),Ax(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var a=j.length;this.writeVarint(a),this.realloc(a);for(var _e=0;_e<a;_e++)this.buf[this.pos++]=j[_e]},writeRawMessage:function(j,a){this.pos++;var _e=this.pos;j(a,this);var it=this.pos-_e;it>=128&&Lx(_e,it,this),this.pos=_e-1,this.writeVarint(it),this.pos+=it},writeMessage:function(j,a,_e){this.writeTag(j,po.Bytes),this.writeRawMessage(a,_e)},writePackedVarint:function(j,a){a.length&&this.writeMessage(j,mS,a)},writePackedSVarint:function(j,a){a.length&&this.writeMessage(j,gS,a)},writePackedBoolean:function(j,a){a.length&&this.writeMessage(j,_S,a)},writePackedFloat:function(j,a){a.length&&this.writeMessage(j,yS,a)},writePackedDouble:function(j,a){a.length&&this.writeMessage(j,vS,a)},writePackedFixed32:function(j,a){a.length&&this.writeMessage(j,xS,a)},writePackedSFixed32:function(j,a){a.length&&this.writeMessage(j,bS,a)},writePackedFixed64:function(j,a){a.length&&this.writeMessage(j,wS,a)},writePackedSFixed64:function(j,a){a.length&&this.writeMessage(j,ES,a)},writeBytesField:function(j,a){this.writeTag(j,po.Bytes),this.writeBytes(a)},writeFixed32Field:function(j,a){this.writeTag(j,po.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(j,a){this.writeTag(j,po.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(j,a){this.writeTag(j,po.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(j,a){this.writeTag(j,po.Fixed64),this.writeSFixed64(a)},writeVarintField:function(j,a){this.writeTag(j,po.Varint),this.writeVarint(a)},writeSVarintField:function(j,a){this.writeTag(j,po.Varint),this.writeSVarint(a)},writeStringField:function(j,a){this.writeTag(j,po.Bytes),this.writeString(a)},writeFloatField:function(j,a){this.writeTag(j,po.Fixed32),this.writeFloat(a)},writeDoubleField:function(j,a){this.writeTag(j,po.Fixed64),this.writeDouble(a)},writeBooleanField:function(j,a){this.writeVarintField(j,!!a)}};var yv=St(Cx);const z_=3;function SS(j,a,_e){a.glyphs=[],j===1&&_e.readMessage(TS,a)}function TS(j,a,_e){if(j===3){const{id:it,bitmap:ot,width:lt,height:ht,left:pt,top:gt,advance:yt}=_e.readMessage(kS,{});a.glyphs.push({id:it,bitmap:new _u({width:lt+2*z_,height:ht+2*z_},ot),metrics:{width:lt,height:ht,left:pt,top:gt,advance:yt}})}else j===4?a.ascender=_e.readSVarint():j===5&&(a.descender=_e.readSVarint())}function kS(j,a,_e){j===1?a.id=_e.readVarint():j===2?a.bitmap=_e.readBytes():j===3?a.width=_e.readVarint():j===4?a.height=_e.readVarint():j===5?a.left=_e.readSVarint():j===6?a.top=_e.readSVarint():j===7&&(a.advance=_e.readVarint())}const Dx=z_;function O_(j){let a=0,_e=0;for(const ht of j)a+=ht.w*ht.h,_e=Math.max(_e,ht.w);j.sort((ht,pt)=>pt.h-ht.h);const it=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),_e),h:1/0}];let ot=0,lt=0;for(const ht of j)for(let pt=it.length-1;pt>=0;pt--){const gt=it[pt];if(!(ht.w>gt.w||ht.h>gt.h)){if(ht.x=gt.x,ht.y=gt.y,lt=Math.max(lt,ht.y+ht.h),ot=Math.max(ot,ht.x+ht.w),ht.w===gt.w&&ht.h===gt.h){const yt=it.pop();pt<it.length&&(it[pt]=yt)}else ht.h===gt.h?(gt.x+=ht.w,gt.w-=ht.w):ht.w===gt.w?(gt.y+=ht.h,gt.h-=ht.h):(it.push({x:gt.x+ht.w,y:gt.y,w:gt.w-ht.w,h:ht.h}),gt.y+=ht.h,gt.h-=ht.h);break}}return{w:ot,h:lt,fill:a/(ot*lt)||0}}const Os=1;class B_{constructor(a,{pixelRatio:_e,version:it,stretchX:ot,stretchY:lt,content:ht}){this.paddedRect=a,this.pixelRatio=_e,this.stretchX=ot,this.stretchY=lt,this.content=ht,this.version=it}get tl(){return[this.paddedRect.x+Os,this.paddedRect.y+Os]}get br(){return[this.paddedRect.x+this.paddedRect.w-Os,this.paddedRect.y+this.paddedRect.h-Os]}get displaySize(){return[(this.paddedRect.w-2*Os)/this.pixelRatio,(this.paddedRect.h-2*Os)/this.pixelRatio]}}class $x{constructor(a,_e){const it={},ot={};this.haveRenderCallbacks=[];const lt=[];this.addImages(a,it,lt),this.addImages(_e,ot,lt);const{w:ht,h:pt}=O_(lt),gt=new Hs({width:ht||1,height:pt||1});for(const yt in a){const Et=a[yt],Pt=it[yt].paddedRect;Hs.copy(Et.data,gt,{x:0,y:0},{x:Pt.x+Os,y:Pt.y+Os},Et.data)}for(const yt in _e){const Et=_e[yt],Pt=ot[yt].paddedRect,Rt=Pt.x+Os,zt=Pt.y+Os,Ot=Et.data.width,Ut=Et.data.height;Hs.copy(Et.data,gt,{x:0,y:0},{x:Rt,y:zt},Et.data),Hs.copy(Et.data,gt,{x:0,y:Ut-1},{x:Rt,y:zt-1},{width:Ot,height:1}),Hs.copy(Et.data,gt,{x:0,y:0},{x:Rt,y:zt+Ut},{width:Ot,height:1}),Hs.copy(Et.data,gt,{x:Ot-1,y:0},{x:Rt-1,y:zt},{width:1,height:Ut}),Hs.copy(Et.data,gt,{x:0,y:0},{x:Rt+Ot,y:zt},{width:1,height:Ut})}this.image=gt,this.iconPositions=it,this.patternPositions=ot}addImages(a,_e,it){for(const ot in a){const lt=a[ot],ht={x:0,y:0,w:lt.data.width+2*Os,h:lt.data.height+2*Os};it.push(ht),_e[ot]=new B_(ht,lt),lt.hasRenderCallback&&this.haveRenderCallbacks.push(ot)}}patchUpdatedImages(a,_e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(it=>a.hasImage(it)),a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const it in a.updatedImages)this.patchUpdatedImage(this.iconPositions[it],a.getImage(it),_e),this.patchUpdatedImage(this.patternPositions[it],a.getImage(it),_e)}patchUpdatedImage(a,_e,it){if(!a||!_e||a.version===_e.version)return;a.version=_e.version;const[ot,lt]=a.tl;it.update(_e.data,void 0,{x:ot,y:lt})}}vn(B_,"ImagePosition"),vn($x,"ImageAtlas");const Js={horizontal:1,vertical:2,horizontalOnly:3},zx=-17;class Xy{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,_e){const it=new Xy;return it.scale=a||1,it.fontStack=_e,it}static forImage(a){const _e=new Xy;return _e.imageName=a,_e}}class Cm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,_e){const it=new Cm;for(let ot=0;ot<a.sections.length;ot++){const lt=a.sections[ot];lt.image?it.addImageSection(lt):it.addTextSection(lt,_e)}return it}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(a){this.text=function(_e,it){let ot="";for(let lt=0;lt<_e.length;lt++){const ht=_e.charCodeAt(lt+1)||null,pt=_e.charCodeAt(lt-1)||null;ot+=!it&&(ht&&q0(ht)&&!Zy[_e[lt+1]]||pt&&q0(pt)&&!Zy[_e[lt-1]])||!Zy[_e[lt]]?_e[lt]:Zy[_e[lt]]}return ot}(this.text,a)}trim(){let a=0;for(let it=0;it<this.text.length&&vv[this.text.charCodeAt(it)];it++)a++;let _e=this.text.length;for(let it=this.text.length-1;it>=0&&it>=a&&vv[this.text.charCodeAt(it)];it--)_e--;this.text=this.text.substring(a,_e),this.sectionIndex=this.sectionIndex.slice(a,_e)}substring(a,_e){const it=new Cm;return it.text=this.text.substring(a,_e),it.sectionIndex=this.sectionIndex.slice(a,_e),it.sections=this.sections,it}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,_e)=>Math.max(a,this.sections[_e].scale),0)}addTextSection(a,_e){this.text+=a.text,this.sections.push(Xy.forText(a.scale,a.fontStack||_e));const it=this.sections.length-1;for(let ot=0;ot<a.text.length;++ot)this.sectionIndex.push(it)}addImageSection(a){const _e=a.image?a.image.name:"";if(_e.length===0)return void Xn("Can't add FormattedSection with an empty image.");const it=this.getNextImageSectionCharCode();it?(this.text+=String.fromCharCode(it),this.sections.push(Xy.forImage(_e)),this.sectionIndex.push(this.sections.length-1)):Xn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function F_(j,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot){const Ut=Cm.fromFeature(j,ot);Pt===Js.vertical&&Ut.verticalizePunctuation(Rt);let Kt=[];const rr=function(fr,Rr,Ir,Ur,en,Br){if(!fr)return[];const qr=[],Wr=function(dn,xn,pn,zn,an,Tn){let On=0;for(let Jn=0;Jn<dn.length();Jn++){const Bn=dn.getSection(Jn);On+=Ox(dn.getCharCode(Jn),Bn,zn,an,xn,Tn)}return On/Math.max(1,Math.ceil(On/pn))}(fr,Rr,Ir,Ur,en,Br),Kr=fr.text.indexOf("")>=0;let sn=0;for(let dn=0;dn<fr.length();dn++){const xn=fr.getSection(dn),pn=fr.getCharCode(dn);if(vv[pn]||(sn+=Ox(pn,xn,Ur,en,Rr,Br)),dn<fr.length()-1){const zn=!((Nr=pn)<11904||!(fn["Bopomofo Extended"](Nr)||fn.Bopomofo(Nr)||fn["CJK Compatibility Forms"](Nr)||fn["CJK Compatibility Ideographs"](Nr)||fn["CJK Compatibility"](Nr)||fn["CJK Radicals Supplement"](Nr)||fn["CJK Strokes"](Nr)||fn["CJK Symbols and Punctuation"](Nr)||fn["CJK Unified Ideographs Extension A"](Nr)||fn["CJK Unified Ideographs"](Nr)||fn["Enclosed CJK Letters and Months"](Nr)||fn["Halfwidth and Fullwidth Forms"](Nr)||fn.Hiragana(Nr)||fn["Ideographic Description Characters"](Nr)||fn["Kangxi Radicals"](Nr)||fn["Katakana Phonetic Extensions"](Nr)||fn.Katakana(Nr)||fn["Vertical Forms"](Nr)||fn["Yi Radicals"](Nr)||fn["Yi Syllables"](Nr)));(CS[pn]||zn||xn.imageName)&&qr.push(Fx(dn+1,sn,Wr,qr,PS(pn,fr.getCharCode(dn+1),zn&&Kr),!1))}}var Nr;return Vx(Fx(fr.length(),sn,Wr,qr,0,!0))}(Ut,yt,lt,a,it,zt),{processBidirectionalText:pr,processStyledBidirectionalText:nr}=xt;if(pr&&Ut.sections.length===1){const fr=pr(Ut.toString(),rr);for(const Rr of fr){const Ir=new Cm;Ir.text=Rr,Ir.sections=Ut.sections;for(let Ur=0;Ur<Rr.length;Ur++)Ir.sectionIndex.push(0);Kt.push(Ir)}}else if(nr){const fr=nr(Ut.text,Ut.sectionIndex,rr);for(const Rr of fr){const Ir=new Cm;Ir.text=Rr[0],Ir.sectionIndex=Rr[1],Ir.sections=Ut.sections,Kt.push(Ir)}}else Kt=function(fr,Rr){const Ir=[],Ur=fr.text;let en=0;for(const Br of Rr)Ir.push(fr.substring(en,Br)),en=Br;return en<Ur.length&&Ir.push(fr.substring(en,Ur.length)),Ir}(Ut,rr);const ur=[],mr={positionedLines:ur,text:Ut.toString(),top:Et[1],bottom:Et[1],left:Et[0],right:Et[0],writingMode:Pt,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(fr,Rr,Ir,Ur,en,Br,qr,Wr,Kr,sn,Nr,dn){let xn=0,pn=0,zn=0;const an=Wr==="right"?1:Wr==="left"?0:.5;let Tn=!1;for(const Fn of en){const Vn=Fn.getSections();for(const co of Vn){if(co.imageName)continue;const fo=Rr[co.fontStack];if(fo&&(Tn=fo.ascender!==void 0&&fo.descender!==void 0,!Tn))break}if(!Tn)break}let On=0;for(const Fn of en){Fn.trim();const Vn=Fn.getMaxScale(),co=(Vn-1)*fs,fo={positionedGlyphs:[],lineOffset:0};fr.positionedLines[On]=fo;const mo=fo.positionedGlyphs;let ho=0;if(!Fn.length()){pn+=Br,++On;continue}let ko=0,$o=0;for(let uo=0;uo<Fn.length();uo++){const Qo=Fn.getSection(uo),Zo=Fn.getSectionIndex(uo),Co=Fn.getCharCode(uo);let to=Qo.scale,Xo=null,go=null,Ls=null,Yo=fs,ms=0;const ls=!(Kr===Js.horizontal||!Nr&&!wy(Co)||Nr&&(vv[Co]||(Jn=Co,fn.Arabic(Jn)||fn["Arabic Supplement"](Jn)||fn["Arabic Extended-A"](Jn)||fn["Arabic Presentation Forms-A"](Jn)||fn["Arabic Presentation Forms-B"](Jn))));if(Qo.imageName){const Rs=Ur[Qo.imageName];if(!Rs)continue;Ls=Qo.imageName,fr.iconsInText=fr.iconsInText||!0,go=Rs.paddedRect;const cs=Rs.displaySize;to=to*fs/dn,Xo={width:cs[0],height:cs[1],left:Os,top:-Dx,advance:ls?cs[1]:cs[0],localGlyph:!1},ms=Tn?-Xo.height*to:zx+Vn*fs-cs[1]*to,Yo=Xo.advance;const Hl=(ls?cs[0]:cs[1])*to-fs*Vn;Hl>0&&Hl>ho&&(ho=Hl)}else{const Rs=Ir[Qo.fontStack];if(!Rs)continue;Rs[Co]&&(go=Rs[Co]);const cs=Rr[Qo.fontStack];if(!cs)continue;const Hl=cs.glyphs[Co];if(!Hl)continue;if(Xo=Hl.metrics,Yo=Co!==8203?fs:0,Tn){const Dm=cs.ascender!==void 0?Math.abs(cs.ascender):0,o0=cs.descender!==void 0?Math.abs(cs.descender):0,s0=(Dm+o0)*to;ko<s0&&(ko=s0,$o=(Dm-o0)/2*to),ms=-Dm*to}else ms=zx+(Vn-to)*fs}ls?(fr.verticalizable=!0,mo.push({glyph:Co,imageName:Ls,x:xn,y:pn+ms,vertical:ls,scale:to,localGlyph:Xo.localGlyph,fontStack:Qo.fontStack,sectionIndex:Zo,metrics:Xo,rect:go}),xn+=Yo*to+sn):(mo.push({glyph:Co,imageName:Ls,x:xn,y:pn+ms,vertical:ls,scale:to,localGlyph:Xo.localGlyph,fontStack:Qo.fontStack,sectionIndex:Zo,metrics:Xo,rect:go}),xn+=Xo.advance*to+sn)}mo.length!==0&&(zn=Math.max(xn-sn,zn),Tn?Nx(mo,an,ho,$o,Br*Vn/2):Nx(mo,an,ho,0,Br/2)),xn=0;const Wo=Br*Vn+ho;fo.lineOffset=Math.max(ho,co),pn+=Wo,++On}var Jn;const Bn=pn,{horizontalAlign:In,verticalAlign:yo}=V_(qr);(function(Fn,Vn,co,fo,mo,ho){const ko=(Vn-co)*mo,$o=-ho*fo;for(const Wo of Fn)for(const uo of Wo.positionedGlyphs)uo.x+=ko,uo.y+=$o})(fr.positionedLines,an,In,yo,zn,Bn),fr.top+=-yo*Bn,fr.bottom=fr.top+Bn,fr.left+=-In*zn,fr.right=fr.left+zn,fr.hasBaseline=Tn}(mr,a,_e,it,Kt,ht,pt,gt,Pt,yt,Rt,Ot),!function(fr){for(const Rr of fr)if(Rr.positionedGlyphs.length!==0)return!1;return!0}(ur)&&mr}const vv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},CS={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ox(j,a,_e,it,ot,lt){if(a.imageName){const ht=it[a.imageName];return ht?ht.displaySize[0]*a.scale*fs/lt+ot:0}{const ht=_e[a.fontStack],pt=ht&&ht.glyphs[j];return pt?pt.metrics.advance*a.scale+ot:0}}function Bx(j,a,_e,it){const ot=Math.pow(j-a,2);return it?j<a?ot/2:2*ot:ot+Math.abs(_e)*_e}function PS(j,a,_e){let it=0;return j===10&&(it-=1e4),_e&&(it+=150),j!==40&&j!==65288||(it+=50),a!==41&&a!==65289||(it+=50),it}function Fx(j,a,_e,it,ot,lt){let ht=null,pt=Bx(a,_e,ot,lt);for(const gt of it){const yt=Bx(a-gt.x,_e,ot,lt)+gt.badness;yt<=pt&&(ht=gt,pt=yt)}return{index:j,x:a,priorBreak:ht,badness:pt}}function Vx(j){return j?Vx(j.priorBreak).concat(j.index):[]}function V_(j){let a=.5,_e=.5;switch(j){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(j){case"bottom":case"bottom-right":case"bottom-left":_e=1;break;case"top":case"top-right":case"top-left":_e=0}return{horizontalAlign:a,verticalAlign:_e}}function Nx(j,a,_e,it,ot){if(!(a||_e||it||ot))return;const lt=j.length-1,ht=j[lt],pt=(ht.x+ht.metrics.advance*ht.scale)*a;for(let gt=0;gt<=lt;gt++)j[gt].x-=pt,j[gt].y+=_e+it+ot}function AS(j,a,_e){const{horizontalAlign:it,verticalAlign:ot}=V_(_e),lt=a[0]-j.displaySize[0]*it,ht=a[1]-j.displaySize[1]*ot;return{image:j,top:ht,bottom:ht+j.displaySize[1],left:lt,right:lt+j.displaySize[0]}}function jx(j,a,_e,it,ot,lt){const ht=j.image;let pt;if(ht.content){const Kt=ht.content,rr=ht.pixelRatio||1;pt=[Kt[0]/rr,Kt[1]/rr,ht.displaySize[0]-Kt[2]/rr,ht.displaySize[1]-Kt[3]/rr]}const gt=a.left*lt,yt=a.right*lt;let Et,Pt,Rt,zt;_e==="width"||_e==="both"?(zt=ot[0]+gt-it[3],Pt=ot[0]+yt+it[1]):(zt=ot[0]+(gt+yt-ht.displaySize[0])/2,Pt=zt+ht.displaySize[0]);const Ot=a.top*lt,Ut=a.bottom*lt;return _e==="height"||_e==="both"?(Et=ot[1]+Ot-it[0],Rt=ot[1]+Ut+it[2]):(Et=ot[1]+(Ot+Ut-ht.displaySize[1])/2,Rt=Et+ht.displaySize[1]),{image:ht,top:Et,right:Pt,bottom:Rt,left:zt,collisionPadding:pt}}class bu extends ir{constructor(a,_e,it,ot,lt){super(a,_e),this.angle=ot,this.z=it,lt!==void 0&&(this.segment=lt)}clone(){return new bu(this.x,this.y,this.z,this.angle,this.segment)}}function Ux(j,a,_e,it,ot){if(a.segment===void 0)return!0;let lt=a,ht=a.segment+1,pt=0;for(;pt>-_e/2;){if(ht--,ht<0)return!1;pt-=j[ht].dist(lt),lt=j[ht]}pt+=j[ht].dist(j[ht+1]),ht++;const gt=[];let yt=0;for(;pt<_e/2;){const Et=j[ht],Pt=j[ht+1];if(!Pt)return!1;let Rt=j[ht-1].angleTo(Et)-Et.angleTo(Pt);for(Rt=Math.abs((Rt+3*Math.PI)%(2*Math.PI)-Math.PI),gt.push({distance:pt,angleDelta:Rt}),yt+=Rt;pt-gt[0].distance>it;)yt-=gt.shift().angleDelta;if(yt>ot)return!1;ht++,pt+=Et.dist(Pt)}return!0}function Gx(j){let a=0;for(let _e=0;_e<j.length-1;_e++)a+=j[_e].dist(j[_e+1]);return a}function Hx(j,a,_e){return j?.6*a*_e:0}function qx(j,a){return Math.max(j?j.right-j.left:0,a?a.right-a.left:0)}function IS(j,a,_e,it,ot,lt){const ht=Hx(_e,ot,lt),pt=qx(_e,it)*lt;let gt=0;const yt=Gx(j)/2;for(let Et=0;Et<j.length-1;Et++){const Pt=j[Et],Rt=j[Et+1],zt=Pt.dist(Rt);if(gt+zt>yt){const Ot=(yt-gt)/zt,Ut=Kn(Pt.x,Rt.x,Ot),Kt=Kn(Pt.y,Rt.y,Ot),rr=new bu(Ut,Kt,0,Rt.angleTo(Pt),Et);return!ht||Ux(j,rr,pt,ht,a)?rr:void 0}gt+=zt}}function MS(j,a,_e,it,ot,lt,ht,pt,gt){const yt=Hx(it,lt,ht),Et=qx(it,ot),Pt=Et*ht,Rt=j[0].x===0||j[0].x===gt||j[0].y===0||j[0].y===gt;return a-Pt<a/4&&(a=Pt+a/4),Wx(j,Rt?a/2*pt%a:(Et/2+2*lt)*ht*pt%a,a,yt,_e,Pt,Rt,!1,gt)}function Wx(j,a,_e,it,ot,lt,ht,pt,gt){const yt=lt/2,Et=Gx(j);let Pt=0,Rt=a-_e,zt=[];for(let Ot=0;Ot<j.length-1;Ot++){const Ut=j[Ot],Kt=j[Ot+1],rr=Ut.dist(Kt),pr=Kt.angleTo(Ut);for(;Rt+_e<Pt+rr;){Rt+=_e;const nr=(Rt-Pt)/rr,ur=Kn(Ut.x,Kt.x,nr),mr=Kn(Ut.y,Kt.y,nr);if(ur>=0&&ur<gt&&mr>=0&&mr<gt&&Rt-yt>=0&&Rt+yt<=Et){const fr=new bu(ur,mr,0,pr,Ot);fr._round(),it&&!Ux(j,fr,lt,it,ot)||zt.push(fr)}}Pt+=rr}return pt||zt.length||ht||(zt=Wx(j,Pt/2,_e,it,ot,lt,ht,!0,gt)),zt}function Zx(j,a,_e,it,ot){const lt=[];for(let ht=0;ht<j.length;ht++){const pt=j[ht];let gt;for(let yt=0;yt<pt.length-1;yt++){let Et=pt[yt],Pt=pt[yt+1];Et.x<a&&Pt.x<a||(Et.x<a?Et=new ir(a,Et.y+(a-Et.x)/(Pt.x-Et.x)*(Pt.y-Et.y))._round():Pt.x<a&&(Pt=new ir(a,Et.y+(a-Et.x)/(Pt.x-Et.x)*(Pt.y-Et.y))._round()),Et.y<_e&&Pt.y<_e||(Et.y<_e?Et=new ir(Et.x+(_e-Et.y)/(Pt.y-Et.y)*(Pt.x-Et.x),_e)._round():Pt.y<_e&&(Pt=new ir(Et.x+(_e-Et.y)/(Pt.y-Et.y)*(Pt.x-Et.x),_e)._round()),Et.x>=it&&Pt.x>=it||(Et.x>=it?Et=new ir(it,Et.y+(it-Et.x)/(Pt.x-Et.x)*(Pt.y-Et.y))._round():Pt.x>=it&&(Pt=new ir(it,Et.y+(it-Et.x)/(Pt.x-Et.x)*(Pt.y-Et.y))._round()),Et.y>=ot&&Pt.y>=ot||(Et.y>=ot?Et=new ir(Et.x+(ot-Et.y)/(Pt.y-Et.y)*(Pt.x-Et.x),ot)._round():Pt.y>=ot&&(Pt=new ir(Et.x+(ot-Et.y)/(Pt.y-Et.y)*(Pt.x-Et.x),ot)._round()),gt&&Et.equals(gt[gt.length-1])||(gt=[Et],lt.push(gt)),gt.push(Pt)))))}}return lt}vn(bu,"Anchor");const Yy=1e20;function Xx(j,a,_e,it,ot,lt,ht,pt,gt){for(let yt=a;yt<a+it;yt++)Yx(j,_e*lt+yt,lt,ot,ht,pt,gt);for(let yt=_e;yt<_e+ot;yt++)Yx(j,yt*lt+a,1,it,ht,pt,gt)}function Yx(j,a,_e,it,ot,lt,ht){lt[0]=0,ht[0]=-Yy,ht[1]=Yy,ot[0]=j[a];for(let pt=1,gt=0,yt=0;pt<it;pt++){ot[pt]=j[a+pt*_e];const Et=pt*pt;do{const Pt=lt[gt];yt=(ot[pt]-ot[Pt]+Et-Pt*Pt)/(pt-Pt)/2}while(yt<=ht[gt]&&--gt>-1);gt++,lt[gt]=pt,ht[gt]=yt,ht[gt+1]=Yy}for(let pt=0,gt=0;pt<it;pt++){for(;ht[gt+1]<pt;)gt++;const yt=lt[gt],Et=pt-yt;j[a+pt*_e]=ot[yt]+Et*Et}}const Ul=2,N_={none:0,ideographs:1,all:2};class Pm{constructor(a,_e,it){this.requestManager=a,this.localGlyphMode=_e,this.localFontFamily=it,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a){this.url=a}getGlyphs(a,_e){const it=[];for(const ot in a)for(const lt of a[ot])it.push({stack:ot,id:lt});ar(it,({stack:ot,id:lt},ht)=>{let pt=this.entries[ot];pt||(pt=this.entries[ot]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let gt=pt.glyphs[lt];if(gt!==void 0)return void ht(null,{stack:ot,id:lt,glyph:gt});if(gt=this._tinySDF(pt,ot,lt),gt)return pt.glyphs[lt]=gt,void ht(null,{stack:ot,id:lt,glyph:gt});const yt=Math.floor(lt/256);if(256*yt>65535)return void ht(new Error("glyphs > 65535 not supported"));if(pt.ranges[yt])return void ht(null,{stack:ot,id:lt,glyph:gt});let Et=pt.requests[yt];Et||(Et=pt.requests[yt]=[],Pm.loadGlyphRange(ot,yt,this.url,this.requestManager,(Pt,Rt)=>{if(Rt){pt.ascender=Rt.ascender,pt.descender=Rt.descender;for(const zt in Rt.glyphs)this._doesCharSupportLocalGlyph(+zt)||(pt.glyphs[+zt]=Rt.glyphs[+zt]);pt.ranges[yt]=!0}for(const zt of Et)zt(Pt,Rt);delete pt.requests[yt]})),Et.push((Pt,Rt)=>{Pt?ht(Pt):Rt&&ht(null,{stack:ot,id:lt,glyph:Rt.glyphs[lt]||null})})},(ot,lt)=>{if(ot)_e(ot);else if(lt){const ht={};for(const{stack:pt,id:gt,glyph:yt}of lt)ht[pt]===void 0&&(ht[pt]={}),ht[pt].glyphs===void 0&&(ht[pt].glyphs={}),ht[pt].glyphs[gt]=yt&&{id:yt.id,bitmap:yt.bitmap.clone(),metrics:yt.metrics},ht[pt].ascender=this.entries[pt].ascender,ht[pt].descender=this.entries[pt].descender;_e(null,ht)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==N_.none&&(this.localGlyphMode===N_.all?!!this.localFontFamily:!!this.localFontFamily&&(fn["CJK Unified Ideographs"](a)||fn["Hangul Syllables"](a)||fn.Hiragana(a)||fn.Katakana(a)||fn["CJK Symbols and Punctuation"](a)))}_tinySDF(a,_e,it){const ot=this.localFontFamily;if(!ot||!this._doesCharSupportLocalGlyph(it))return;let lt=a.tinySDF;if(!lt){let Ut="400";/bold/i.test(_e)?Ut="900":/medium/i.test(_e)?Ut="500":/light/i.test(_e)&&(Ut="200"),lt=a.tinySDF=new Pm.TinySDF({fontFamily:ot,fontWeight:Ut,fontSize:24*Ul,buffer:3*Ul,radius:8*Ul}),lt.fontWeight=Ut}if(this.localGlyphs[lt.fontWeight][it])return this.localGlyphs[lt.fontWeight][it];const ht=String.fromCharCode(it),{data:pt,width:gt,height:yt,glyphWidth:Et,glyphHeight:Pt,glyphLeft:Rt,glyphTop:zt,glyphAdvance:Ot}=lt.draw(ht);return this.localGlyphs[lt.fontWeight][it]={id:it,bitmap:new _u({width:gt,height:yt},pt),metrics:{width:Et/Ul,height:Pt/Ul,left:Rt/Ul,top:zt/Ul-27,advance:Ot/Ul,localGlyph:!0}}}}Pm.loadGlyphRange=function(j,a,_e,it,ot){const lt=256*a,ht=lt+255,pt=it.transformRequest(it.normalizeGlyphsURL(_e).replace("{fontstack}",j).replace("{range}",`${lt}-${ht}`),Ts.Glyphs);Wl(pt,(gt,yt)=>{if(gt)ot(gt);else if(yt){const Et={},Pt=function(Rt){return new yv(Rt).readFields(SS,{})}(yt);for(const Rt of Pt.glyphs)Et[Rt.id]=Rt;ot(null,{glyphs:Et,ascender:Pt.ascender,descender:Pt.descender})}})},Pm.TinySDF=class{constructor({fontSize:j=24,buffer:a=3,radius:_e=8,cutoff:it=.25,fontFamily:ot="sans-serif",fontWeight:lt="normal",fontStyle:ht="normal"}={}){this.buffer=a,this.cutoff=it,this.radius=_e;const pt=this.size=j+4*a,gt=this._createCanvas(pt),yt=this.ctx=gt.getContext("2d",{willReadFrequently:!0});yt.font=`${ht} ${lt} ${j}px ${ot}`,yt.textBaseline="alphabetic",yt.textAlign="left",yt.fillStyle="black",this.gridOuter=new Float64Array(pt*pt),this.gridInner=new Float64Array(pt*pt),this.f=new Float64Array(pt),this.z=new Float64Array(pt+1),this.v=new Uint16Array(pt)}_createCanvas(j){const a=document.createElement("canvas");return a.width=a.height=j,a}draw(j){const{width:a,actualBoundingBoxAscent:_e,actualBoundingBoxDescent:it,actualBoundingBoxLeft:ot,actualBoundingBoxRight:lt}=this.ctx.measureText(j),ht=Math.ceil(_e),pt=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(lt-ot))),gt=Math.min(this.size-this.buffer,ht+Math.ceil(it)),yt=pt+2*this.buffer,Et=gt+2*this.buffer,Pt=Math.max(yt*Et,0),Rt=new Uint8ClampedArray(Pt),zt={data:Rt,width:yt,height:Et,glyphWidth:pt,glyphHeight:gt,glyphTop:ht,glyphLeft:0,glyphAdvance:a};if(pt===0||gt===0)return zt;const{ctx:Ot,buffer:Ut,gridInner:Kt,gridOuter:rr}=this;Ot.clearRect(Ut,Ut,pt,gt),Ot.fillText(j,Ut,Ut+ht);const pr=Ot.getImageData(Ut,Ut,pt,gt);rr.fill(Yy,0,Pt),Kt.fill(0,0,Pt);for(let nr=0;nr<gt;nr++)for(let ur=0;ur<pt;ur++){const mr=pr.data[4*(nr*pt+ur)+3]/255;if(mr===0)continue;const fr=(nr+Ut)*yt+ur+Ut;if(mr===1)rr[fr]=0,Kt[fr]=Yy;else{const Rr=.5-mr;rr[fr]=Rr>0?Rr*Rr:0,Kt[fr]=Rr<0?Rr*Rr:0}}Xx(rr,0,0,yt,Et,yt,this.f,this.v,this.z),Xx(Kt,Ut,Ut,pt,gt,yt,this.f,this.v,this.z);for(let nr=0;nr<Pt;nr++){const ur=Math.sqrt(rr[nr])-Math.sqrt(Kt[nr]);Rt[nr]=Math.round(255-255*(ur/this.radius+this.cutoff))}return zt}};const Am=Os;function Kx(j,a,_e,it){const ot=[],lt=j.image,ht=lt.pixelRatio,pt=lt.paddedRect.w-2*Am,gt=lt.paddedRect.h-2*Am,yt=j.right-j.left,Et=j.bottom-j.top,Pt=lt.stretchX||[[0,pt]],Rt=lt.stretchY||[[0,gt]],zt=(Br,qr)=>Br+qr[1]-qr[0],Ot=Pt.reduce(zt,0),Ut=Rt.reduce(zt,0),Kt=pt-Ot,rr=gt-Ut;let pr=0,nr=Ot,ur=0,mr=Ut,fr=0,Rr=Kt,Ir=0,Ur=rr;if(lt.content&&it){const Br=lt.content;pr=_v(Pt,0,Br[0]),ur=_v(Rt,0,Br[1]),nr=_v(Pt,Br[0],Br[2]),mr=_v(Rt,Br[1],Br[3]),fr=Br[0]-pr,Ir=Br[1]-ur,Rr=Br[2]-Br[0]-nr,Ur=Br[3]-Br[1]-mr}const en=(Br,qr,Wr,Kr)=>{const sn=xv(Br.stretch-pr,nr,yt,j.left),Nr=bv(Br.fixed-fr,Rr,Br.stretch,Ot),dn=xv(qr.stretch-ur,mr,Et,j.top),xn=bv(qr.fixed-Ir,Ur,qr.stretch,Ut),pn=xv(Wr.stretch-pr,nr,yt,j.left),zn=bv(Wr.fixed-fr,Rr,Wr.stretch,Ot),an=xv(Kr.stretch-ur,mr,Et,j.top),Tn=bv(Kr.fixed-Ir,Ur,Kr.stretch,Ut),On=new ir(sn,dn),Jn=new ir(pn,dn),Bn=new ir(pn,an),In=new ir(sn,an),yo=new ir(Nr/ht,xn/ht),Fn=new ir(zn/ht,Tn/ht),Vn=a*Math.PI/180;if(Vn){const mo=Math.sin(Vn),ho=Math.cos(Vn),ko=[ho,-mo,mo,ho];On._matMult(ko),Jn._matMult(ko),In._matMult(ko),Bn._matMult(ko)}const co=Br.stretch+Br.fixed,fo=qr.stretch+qr.fixed;return{tl:On,tr:Jn,bl:In,br:Bn,tex:{x:lt.paddedRect.x+Am+co,y:lt.paddedRect.y+Am+fo,w:Wr.stretch+Wr.fixed-co,h:Kr.stretch+Kr.fixed-fo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yo,pixelOffsetBR:Fn,minFontScaleX:Rr/ht/yt,minFontScaleY:Ur/ht/Et,isSDF:_e}};if(it&&(lt.stretchX||lt.stretchY)){const Br=Qx(Pt,Kt,Ot),qr=Qx(Rt,rr,Ut);for(let Wr=0;Wr<Br.length-1;Wr++){const Kr=Br[Wr],sn=Br[Wr+1];for(let Nr=0;Nr<qr.length-1;Nr++)ot.push(en(Kr,qr[Nr],sn,qr[Nr+1]))}}else ot.push(en({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:pt+1},{fixed:0,stretch:gt+1}));return ot}function _v(j,a,_e){let it=0;for(const ot of j)it+=Math.max(a,Math.min(_e,ot[1]))-Math.max(a,Math.min(_e,ot[0]));return it}function Qx(j,a,_e){const it=[{fixed:-Am,stretch:0}];for(const[ot,lt]of j){const ht=it[it.length-1];it.push({fixed:ot-ht.stretch,stretch:ht.stretch}),it.push({fixed:ot-ht.stretch,stretch:ht.stretch+(lt-ot)})}return it.push({fixed:a+Am,stretch:_e}),it}function xv(j,a,_e,it){return j/a*_e+it}function bv(j,a,_e,it){return j-a*_e/it}function LS(j,a,_e,it){const ot=a+j.positionedLines[it].lineOffset;return it===0?_e+ot/2:_e+(ot+(a+j.positionedLines[it-1].lineOffset))/2}class RS{constructor(a=[],_e=DS){if(this.data=a,this.length=this.data.length,this.compare=_e,this.length>0)for(let it=(this.length>>1)-1;it>=0;it--)this._down(it)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],_e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=_e,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:_e,compare:it}=this,ot=_e[a];for(;a>0;){const lt=a-1>>1,ht=_e[lt];if(it(ot,ht)>=0)break;_e[a]=ht,a=lt}_e[a]=ot}_down(a){const{data:_e,compare:it}=this,ot=this.length>>1,lt=_e[a];for(;a<ot;){let ht=1+(a<<1),pt=_e[ht];const gt=ht+1;if(gt<this.length&&it(_e[gt],pt)<0&&(ht=gt,pt=_e[gt]),it(pt,lt)>=0)break;_e[a]=pt,a=ht}_e[a]=lt}}function DS(j,a){return j<a?-1:j>a?1:0}function $S(j,a=1,_e=!1){let it=1/0,ot=1/0,lt=-1/0,ht=-1/0;const pt=j[0];for(let zt=0;zt<pt.length;zt++){const Ot=pt[zt];(!zt||Ot.x<it)&&(it=Ot.x),(!zt||Ot.y<ot)&&(ot=Ot.y),(!zt||Ot.x>lt)&&(lt=Ot.x),(!zt||Ot.y>ht)&&(ht=Ot.y)}const gt=Math.min(lt-it,ht-ot);let yt=gt/2;const Et=new RS([],zS);if(gt===0)return new ir(it,ot);for(let zt=it;zt<lt;zt+=gt)for(let Ot=ot;Ot<ht;Ot+=gt)Et.push(new Im(zt+yt,Ot+yt,yt,j));let Pt=function(zt){let Ot=0,Ut=0,Kt=0;const rr=zt[0];for(let pr=0,nr=rr.length,ur=nr-1;pr<nr;ur=pr++){const mr=rr[pr],fr=rr[ur],Rr=mr.x*fr.y-fr.x*mr.y;Ut+=(mr.x+fr.x)*Rr,Kt+=(mr.y+fr.y)*Rr,Ot+=3*Rr}return new Im(Ut/Ot,Kt/Ot,0,zt)}(j),Rt=Et.length;for(;Et.length;){const zt=Et.pop();(zt.d>Pt.d||!Pt.d)&&(Pt=zt,_e&&console.log("found best %d after %d probes",Math.round(1e4*zt.d)/1e4,Rt)),zt.max-Pt.d<=a||(yt=zt.h/2,Et.push(new Im(zt.p.x-yt,zt.p.y-yt,yt,j)),Et.push(new Im(zt.p.x+yt,zt.p.y-yt,yt,j)),Et.push(new Im(zt.p.x-yt,zt.p.y+yt,yt,j)),Et.push(new Im(zt.p.x+yt,zt.p.y+yt,yt,j)),Rt+=4)}return _e&&(console.log(`num probes: ${Rt}`),console.log(`best distance: ${Pt.d}`)),Pt.p}function zS(j,a){return a.max-j.max}class Im{constructor(a,_e,it,ot){this.p=new ir(a,_e),this.h=it,this.d=function(lt,ht){let pt=!1,gt=1/0;for(let yt=0;yt<ht.length;yt++){const Et=ht[yt];for(let Pt=0,Rt=Et.length,zt=Rt-1;Pt<Rt;zt=Pt++){const Ot=Et[Pt],Ut=Et[zt];Ot.y>lt.y!=Ut.y>lt.y&&lt.x<(Ut.x-Ot.x)*(lt.y-Ot.y)/(Ut.y-Ot.y)+Ot.x&&(pt=!pt),gt=Math.min(gt,W1(lt,Ot,Ut))}}return(pt?1:-1)*Math.sqrt(gt)}(this.p,ot),this.max=this.d+this.h*Math.SQRT2}}const Mm=7,j_=Number.POSITIVE_INFINITY,OS=Math.sqrt(2);function Jx(j,[a,_e]){let it=0,ot=0;if(_e===j_){a<0&&(a=0);const lt=a/OS;switch(j){case"top-right":case"top-left":ot=lt-Mm;break;case"bottom-right":case"bottom-left":ot=-lt+Mm;break;case"bottom":ot=-a+Mm;break;case"top":ot=a-Mm}switch(j){case"top-right":case"bottom-right":it=-lt;break;case"top-left":case"bottom-left":it=lt;break;case"left":it=a;break;case"right":it=-a}}else{switch(a=Math.abs(a),_e=Math.abs(_e),j){case"top-right":case"top-left":case"top":ot=_e-Mm;break;case"bottom-right":case"bottom-left":case"bottom":ot=-_e+Mm}switch(j){case"top-right":case"bottom-right":case"right":it=-a;break;case"top-left":case"bottom-left":case"left":it=a}}return[it,ot]}function BS(j,a,_e,it,ot,lt,ht,pt,gt,yt){j.createArrays(),j.tilePixelRatio=Cn/(512*j.overscaling),j.compareText={},j.iconsNeedLinear=!1;const Et=j.layers[0].layout,Pt=j.layers[0]._unevaluatedLayout._values,Rt={};if(j.textSizeData.kind==="composite"){const{minZoom:Ut,maxZoom:Kt}=j.textSizeData;Rt.compositeTextSizes=[Pt["text-size"].possiblyEvaluate(new kt(Ut),pt),Pt["text-size"].possiblyEvaluate(new kt(Kt),pt)]}if(j.iconSizeData.kind==="composite"){const{minZoom:Ut,maxZoom:Kt}=j.iconSizeData;Rt.compositeIconSizes=[Pt["icon-size"].possiblyEvaluate(new kt(Ut),pt),Pt["icon-size"].possiblyEvaluate(new kt(Kt),pt)]}Rt.layoutTextSize=Pt["text-size"].possiblyEvaluate(new kt(gt+1),pt),Rt.layoutIconSize=Pt["icon-size"].possiblyEvaluate(new kt(gt+1),pt),Rt.textMaxSize=Pt["text-size"].possiblyEvaluate(new kt(18),pt);const zt=Et.get("text-rotation-alignment")==="map"&&Et.get("symbol-placement")!=="point",Ot=Et.get("text-size");for(const Ut of j.features){const Kt=Et.get("text-font").evaluate(Ut,{},pt).join(","),rr=Ot.evaluate(Ut,{},pt),pr=Rt.layoutTextSize.evaluate(Ut,{},pt),nr=(Rt.layoutIconSize.evaluate(Ut,{},pt),{horizontal:{},vertical:void 0}),ur=Ut.text;let mr,fr=[0,0];if(ur){const Ur=ur.toString(),en=Et.get("text-letter-spacing").evaluate(Ut,{},pt)*fs,Br=Et.get("text-line-height").evaluate(Ut,{},pt)*fs,qr=Kv(Ur)?en:0,Wr=Et.get("text-anchor").evaluate(Ut,{},pt),Kr=Et.get("text-variable-anchor");if(!Kr){const pn=Et.get("text-radial-offset").evaluate(Ut,{},pt);fr=pn?Jx(Wr,[pn*fs,j_]):Et.get("text-offset").evaluate(Ut,{},pt).map(zn=>zn*fs)}let sn=zt?"center":Et.get("text-justify").evaluate(Ut,{},pt);const Nr=Et.get("symbol-placement")==="point",dn=Nr?Et.get("text-max-width").evaluate(Ut,{},pt)*fs:1/0,xn=pn=>{j.allowVerticalPlacement&&by(Ur)&&(nr.vertical=F_(ur,a,_e,ot,Kt,dn,Br,Wr,pn,qr,fr,Js.vertical,!0,pr,rr))};if(!zt&&Kr){const pn=sn==="auto"?Kr.map(an=>U_(an)):[sn];let zn=!1;for(let an=0;an<pn.length;an++){const Tn=pn[an];if(!nr.horizontal[Tn])if(zn)nr.horizontal[Tn]=nr.horizontal[0];else{const On=F_(ur,a,_e,ot,Kt,dn,Br,"center",Tn,qr,fr,Js.horizontal,!1,pr,rr);On&&(nr.horizontal[Tn]=On,zn=On.positionedLines.length===1)}}xn("left")}else{if(sn==="auto"&&(sn=U_(Wr)),Nr||Et.get("text-writing-mode").indexOf("horizontal")>=0||!by(Ur)){const pn=F_(ur,a,_e,ot,Kt,dn,Br,Wr,sn,qr,fr,Js.horizontal,!1,pr,rr);pn&&(nr.horizontal[sn]=pn)}xn(Nr?"left":sn)}}let Rr=!1;if(Ut.icon&&Ut.icon.name){const Ur=it[Ut.icon.name];Ur&&(mr=AS(ot[Ut.icon.name],Et.get("icon-offset").evaluate(Ut,{},pt),Et.get("icon-anchor").evaluate(Ut,{},pt)),Rr=Ur.sdf,j.sdfIcons===void 0?j.sdfIcons=Ur.sdf:j.sdfIcons!==Ur.sdf&&Xn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ur.pixelRatio!==j.pixelRatio||Et.get("icon-rotate").constantOr(1)!==0)&&(j.iconsNeedLinear=!0))}const Ir=ew(nr.horizontal)||nr.vertical;j.iconsInText||(j.iconsInText=!!Ir&&Ir.iconsInText),(Ir||mr)&&FS(j,Ut,nr,mr,it,Rt,pr,0,fr,Rr,ht,pt,yt)}lt&&j.generateCollisionDebugBuffers(gt,j.collisionBoxArray)}function U_(j){switch(j){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function FS(j,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt){let zt=lt.textMaxSize.evaluate(a,{},Pt);zt===void 0&&(zt=ht);const Ot=j.layers[0].layout,Ut=Ot.get("icon-offset").evaluate(a,{},Pt),Kt=ew(_e.horizontal)||_e.vertical,rr=Rt.name==="globe",pr=fs,nr=ht/pr,ur=j.tilePixelRatio*zt/pr,mr=(Wr=j.overscaling,j.zoom>18&&Wr>2&&(Wr>>=1),Math.max(Cn/(512*Wr),1)*Ot.get("symbol-spacing")),fr=Ot.get("text-padding")*j.tilePixelRatio,Rr=Ot.get("icon-padding")*j.tilePixelRatio,Ir=xr(Ot.get("text-max-angle")),Ur=Ot.get("text-rotation-alignment")==="map"&&Ot.get("symbol-placement")!=="point",en=Ot.get("icon-rotation-alignment")==="map"&&Ot.get("symbol-placement")!=="point",Br=Ot.get("symbol-placement"),qr=mr/2;var Wr;const Kr=Ot.get("icon-text-fit");let sn;it&&Kr!=="none"&&(j.allowVerticalPlacement&&_e.vertical&&(sn=jx(it,_e.vertical,Kr,Ot.get("icon-text-fit-padding"),Ut,nr)),Kt&&(it=jx(it,Kt,Kr,Ot.get("icon-text-fit-padding"),Ut,nr)));const Nr=(dn,xn,pn)=>{if(xn.x<0||xn.x>=Cn||xn.y<0||xn.y>=Cn)return;let zn=null;if(rr){const{x:an,y:Tn,z:On}=Rt.projectTilePoint(xn.x,xn.y,pn);zn={anchor:new bu(an,Tn,On,0,void 0),up:Rt.upVector(pn,xn.x,xn.y)}}(function(an,Tn,On,Jn,Bn,In,yo,Fn,Vn,co,fo,mo,ho,ko,$o,Wo,uo,Qo,Zo,Co,to,Xo,go,Ls,Yo){const ms=an.addToLineVertexArray(Tn,Jn);let ls,Rs,cs,Hl,Dm,o0,s0,Rw=0,Dw=0,$w=0,zw=0,n1=-1,o1=-1;const nu={};let Ow=e_("");const zp=On?On.anchor:Tn;let s1=0,a1=0;if(Vn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[s1,a1]=Vn.layout.get("text-offset").evaluate(to,{},Yo).map(qs=>qs*fs):(s1=Vn.layout.get("text-radial-offset").evaluate(to,{},Yo)*fs,a1=j_),an.allowVerticalPlacement&&Bn.vertical){const qs=Bn.vertical;if($o)o0=G_(qs),Fn&&(s0=G_(Fn));else{const Ws=Vn.layout.get("text-rotate").evaluate(to,{},Yo)+90;cs=wv(co,zp,Tn,fo,mo,ho,qs,ko,Ws,Wo),Fn&&(Hl=wv(co,zp,Tn,fo,mo,ho,Fn,Qo,Ws))}}if(In){const qs=Vn.layout.get("icon-rotate").evaluate(to,{},Yo),Ws=Vn.layout.get("icon-text-fit")!=="none",a0=Kx(In,qs,go,Ws),c1=Fn?Kx(Fn,qs,go,Ws):void 0;Rs=wv(co,zp,Tn,fo,mo,ho,In,Qo,qs),Rw=4*a0.length;const Bw=an.iconSizeData;let Op=null;Bw.kind==="source"?(Op=[Nl*Vn.layout.get("icon-size").evaluate(to,{},Yo)],Op[0]>Hu&&Xn(`${an.layerIds[0]}: Value for "icon-size" is >= ${Ky}. Reduce your "icon-size".`)):Bw.kind==="composite"&&(Op=[Nl*Xo.compositeIconSizes[0].evaluate(to,{},Yo),Nl*Xo.compositeIconSizes[1].evaluate(to,{},Yo)],(Op[0]>Hu||Op[1]>Hu)&&Xn(`${an.layerIds[0]}: Value for "icon-size" is >= ${Ky}. Reduce your "icon-size".`)),an.addSymbols(an.icon,a0,Op,Co,Zo,to,!1,On,Tn,ms.lineStartIndex,ms.lineLength,-1,Ls,Yo),n1=an.icon.placedSymbolArray.length-1,c1&&(Dw=4*c1.length,an.addSymbols(an.icon,c1,Op,Co,Zo,to,Js.vertical,On,Tn,ms.lineStartIndex,ms.lineLength,-1,Ls,Yo),o1=an.icon.placedSymbolArray.length-1)}for(const qs in Bn.horizontal){const Ws=Bn.horizontal[qs];ls||(Ow=e_(Ws.text),$o?Dm=G_(Ws):ls=wv(co,zp,Tn,fo,mo,ho,Ws,ko,Vn.layout.get("text-rotate").evaluate(to,{},Yo),Wo));const a0=Ws.positionedLines.length===1;if($w+=_b(an,On,Tn,Ws,yo,Vn,$o,to,Wo,ms,Bn.vertical?Js.horizontal:Js.horizontalOnly,a0?Object.keys(Bn.horizontal):[qs],nu,n1,Xo,Ls,Yo),a0)break}Bn.vertical&&(zw+=_b(an,On,Tn,Bn.vertical,yo,Vn,$o,to,Wo,ms,Js.vertical,["vertical"],nu,o1,Xo,Ls,Yo));let Ku=-1;const l1=(qs,Ws)=>qs?Math.max(qs,Ws):Ws;Ku=l1(Dm,Ku),Ku=l1(o0,Ku),Ku=l1(s0,Ku);const pT=Ku>-1?1:0;an.glyphOffsetArray.length>=Wu.MAX_GLYPHS&&Xn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),to.sortKey!==void 0&&an.addToSortKeyRanges(an.symbolInstances.length,to.sortKey),an.symbolInstances.emplaceBack(zp.x,zp.y,zp.z,Tn.x,Tn.y,nu.right>=0?nu.right:-1,nu.center>=0?nu.center:-1,nu.left>=0?nu.left:-1,nu.vertical>=0?nu.vertical:-1,n1,o1,Ow,ls!==void 0?ls:an.collisionBoxArray.length,ls!==void 0?ls+1:an.collisionBoxArray.length,cs!==void 0?cs:an.collisionBoxArray.length,cs!==void 0?cs+1:an.collisionBoxArray.length,Rs!==void 0?Rs:an.collisionBoxArray.length,Rs!==void 0?Rs+1:an.collisionBoxArray.length,Hl||an.collisionBoxArray.length,Hl?Hl+1:an.collisionBoxArray.length,fo,$w,zw,Rw,Dw,pT,0,s1,a1,Ku)})(j,xn,zn,dn,_e,it,ot,sn,j.layers[0],j.collisionBoxArray,a.index,a.sourceLayerIndex,j.index,fr,Ur,gt,0,Rr,en,Ut,a,lt,yt,Et,Pt)};if(Br==="line")for(const dn of Zx(a.geometry,0,0,Cn,Cn)){const xn=MS(dn,mr,Ir,_e.vertical||Kt,it,pr,ur,j.overscaling,Cn);for(const pn of xn)Kt&&VS(j,Kt.text,qr,pn)||Nr(dn,pn,Pt)}else if(Br==="line-center"){for(const dn of a.geometry)if(dn.length>1){const xn=IS(dn,Ir,_e.vertical||Kt,it,pr,ur);xn&&Nr(dn,xn,Pt)}}else if(a.type==="Polygon")for(const dn of I_(a.geometry,0)){const xn=$S(dn,16);Nr(dn[0],new bu(xn.x,xn.y,0,0,void 0),Pt)}else if(a.type==="LineString")for(const dn of a.geometry)Nr(dn,new bu(dn[0].x,dn[0].y,0,0,void 0),Pt);else if(a.type==="Point")for(const dn of a.geometry)for(const xn of dn)Nr([xn],new bu(xn.x,xn.y,0,0,void 0),Pt)}const Ky=255,Hu=Ky*Nl;function _b(j,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot,Ut,Kt){const rr=function(ur,mr,fr,Rr,Ir,Ur,en,Br){const qr=[];if(mr.positionedLines.length===0)return qr;const Wr=Rr.layout.get("text-rotate").evaluate(Ur,{})*Math.PI/180,Kr=function(pn){const zn=pn[0],an=pn[1],Tn=zn*an;return Tn>0?[zn,-an]:Tn<0?[-zn,an]:zn===0?[an,zn]:[an,-zn]}(fr);let sn=Math.abs(mr.top-mr.bottom);for(const pn of mr.positionedLines)sn-=pn.lineOffset;const Nr=mr.positionedLines.length,dn=sn/Nr;let xn=mr.top-fr[1];for(let pn=0;pn<Nr;++pn){const zn=mr.positionedLines[pn];xn=LS(mr,dn,xn,pn);for(const an of zn.positionedGlyphs){if(!an.rect)continue;const Tn=an.rect||{};let On=Dx+1,Jn=!0,Bn=1,In=0;if(an.imageName){const go=en[an.imageName];if(!go)continue;if(go.sdf){Xn("SDF images are not supported in formatted text and will be ignored.");continue}Jn=!1,Bn=go.pixelRatio,On=Os/Bn}const yo=(Ir||Br)&&an.vertical,Fn=an.metrics.advance*an.scale/2,Vn=an.metrics,co=an.rect;if(co===null)continue;Br&&mr.verticalizable&&(In=an.imageName?Fn-an.metrics.width*an.scale/2:0);const fo=Ir?[an.x+Fn,an.y]:[0,0];let mo=[0,0],ho=[0,0],ko=!1;Ir||(yo?(ho=[an.x+Fn+Kr[0],an.y+Kr[1]-In],ko=!0):mo=[an.x+Fn+fr[0],an.y+fr[1]-In]);const $o=co.w*an.scale/(Bn*(an.localGlyph?Ul:1)),Wo=co.h*an.scale/(Bn*(an.localGlyph?Ul:1));let uo,Qo,Zo,Co;if(yo){const go=an.y-xn,Ls=new ir(-Fn,Fn-go),Yo=-Math.PI/2,ms=new ir(...ho);uo=new ir(-Fn+mo[0],mo[1]),uo._rotateAround(Yo,Ls)._add(ms),uo.x+=-go+Fn,uo.y-=(Vn.left-On)*an.scale;const ls=an.imageName?Vn.advance*an.scale:fs*an.scale,Rs=String.fromCharCode(an.glyph);pS(Rs)?uo.x+=(1-On)*an.scale:fS(Rs)?uo.x+=ls-Vn.height*an.scale+(-On-1)*an.scale:uo.x+=an.imageName||Vn.width+2*On===co.w&&Vn.height+2*On===co.h?(ls-Wo)/2:(ls-(Vn.height+2*On)*an.scale)/2,Qo=new ir(uo.x,uo.y-$o),Zo=new ir(uo.x+Wo,uo.y),Co=new ir(uo.x+Wo,uo.y-$o)}else{const go=(Vn.left-On)*an.scale-Fn+mo[0],Ls=(-Vn.top-On)*an.scale+mo[1],Yo=go+$o,ms=Ls+Wo;uo=new ir(go,Ls),Qo=new ir(Yo,Ls),Zo=new ir(go,ms),Co=new ir(Yo,ms)}if(Wr){let go;go=Ir?new ir(0,0):ko?new ir(Kr[0],Kr[1]):new ir(fr[0],fr[1]),uo._rotateAround(Wr,go),Qo._rotateAround(Wr,go),Zo._rotateAround(Wr,go),Co._rotateAround(Wr,go)}const to=new ir(0,0),Xo=new ir(0,0);qr.push({tl:uo,tr:Qo,bl:Zo,br:Co,tex:Tn,writingMode:mr.writingMode,glyphOffset:fo,sectionIndex:an.sectionIndex,isSDF:Jn,pixelOffsetTL:to,pixelOffsetBR:Xo,minFontScaleX:0,minFontScaleY:0})}}return qr}(0,it,gt,lt,ht,pt,ot,j.allowVerticalPlacement),pr=j.textSizeData;let nr=null;pr.kind==="source"?(nr=[Nl*lt.layout.get("text-size").evaluate(pt,{},Kt)],nr[0]>Hu&&Xn(`${j.layerIds[0]}: Value for "text-size" is >= ${Ky}. Reduce your "text-size".`)):pr.kind==="composite"&&(nr=[Nl*Ot.compositeTextSizes[0].evaluate(pt,{},Kt),Nl*Ot.compositeTextSizes[1].evaluate(pt,{},Kt)],(nr[0]>Hu||nr[1]>Hu)&&Xn(`${j.layerIds[0]}: Value for "text-size" is >= ${Ky}. Reduce your "text-size".`)),j.addSymbols(j.text,rr,nr,gt,ht,pt,Et,a,_e,yt.lineStartIndex,yt.lineLength,zt,Ut,Kt);for(const ur of Pt)Rt[ur]=j.text.placedSymbolArray.length-1;return 4*rr.length}function ew(j){for(const a in j)return j[a];return null}function wv(j,a,_e,it,ot,lt,ht,pt,gt,yt){let Et=ht.top,Pt=ht.bottom,Rt=ht.left,zt=ht.right;const Ot=ht.collisionPadding;if(Ot&&(Rt-=Ot[0],Et-=Ot[1],zt+=Ot[2],Pt+=Ot[3]),gt){const Ut=new ir(Rt,Et),Kt=new ir(zt,Et),rr=new ir(Rt,Pt),pr=new ir(zt,Pt),nr=xr(gt);let ur=new ir(0,0);yt&&(ur=new ir(yt[0],yt[1])),Ut._rotateAround(nr,ur),Kt._rotateAround(nr,ur),rr._rotateAround(nr,ur),pr._rotateAround(nr,ur),Rt=Math.min(Ut.x,Kt.x,rr.x,pr.x),zt=Math.max(Ut.x,Kt.x,rr.x,pr.x),Et=Math.min(Ut.y,Kt.y,rr.y,pr.y),Pt=Math.max(Ut.y,Kt.y,rr.y,pr.y)}return j.emplaceBack(a.x,a.y,a.z,_e.x,_e.y,Rt,Et,zt,Pt,pt,it,ot,lt),j.length-1}function G_(j){j.collisionPadding&&(j.top-=j.collisionPadding[1],j.bottom+=j.collisionPadding[3]);const a=j.bottom-j.top;return a>0?Math.max(10,a):null}function VS(j,a,_e,it){const ot=j.compareText;if(a in ot){const lt=ot[a];for(let ht=lt.length-1;ht>=0;ht--)if(it.dist(lt[ht])<_e)return!0}else ot[a]=[];return ot[a].push(it),!1}function tw(j,a){const _e=j.fovAboveCenter,it=j.elevation?j.elevation.getMinElevationBelowMSL()*a:0,ot=(j._camera.position[2]*j.worldSize-it)/Math.cos(j._pitch),lt=Math.sin(_e)*ot/Math.sin(Math.max(Math.PI/2-j._pitch-_e,.01)),ht=Math.sin(j._pitch)*lt+ot;return Math.min(1.01*ht,ot*(1/j._horizonShift))}function Dp(j,a){if(!a.isReprojectedInTileSpace)return{scale:1<<j.z,x:j.x,y:j.y,x2:j.x+1,y2:j.y+1,projection:a};const _e=Math.pow(2,-j.z),it=j.x*_e,ot=(j.x+1)*_e,lt=j.y*_e,ht=(j.y+1)*_e,pt=Qs(it),gt=Qs(ot),yt=xs(lt),Et=xs(ht),Pt=a.project(pt,yt),Rt=a.project(gt,yt),zt=a.project(gt,Et),Ot=a.project(pt,Et);let Ut=Math.min(Pt.x,Rt.x,zt.x,Ot.x),Kt=Math.min(Pt.y,Rt.y,zt.y,Ot.y),rr=Math.max(Pt.x,Rt.x,zt.x,Ot.x),pr=Math.max(Pt.y,Rt.y,zt.y,Ot.y);const nr=_e/16;function ur(fr,Rr,Ir,Ur,en,Br){const qr=(Ir+en)/2,Wr=(Ur+Br)/2,Kr=a.project(Qs(qr),xs(Wr)),sn=Math.max(0,Ut-Kr.x,Kt-Kr.y,Kr.x-rr,Kr.y-pr);Ut=Math.min(Ut,Kr.x),rr=Math.max(rr,Kr.x),Kt=Math.min(Kt,Kr.y),pr=Math.max(pr,Kr.y),sn>nr&&(ur(fr,Kr,Ir,Ur,qr,Wr),ur(Kr,Rr,qr,Wr,en,Br))}ur(Pt,Rt,it,lt,ot,lt),ur(Rt,zt,ot,lt,ot,ht),ur(zt,Ot,ot,ht,it,ht),ur(Ot,Pt,it,ht,it,lt),Ut-=nr,Kt-=nr,rr+=nr,pr+=nr;const mr=1/Math.max(rr-Ut,pr-Kt);return{scale:mr,x:Ut*mr,y:Kt*mr,x2:rr*mr,y2:pr*mr,projection:a}}const NS=Bl(new Float32Array(16));class qu{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,_e){return{x:0,y:0,z:0}}unproject(a,_e){return new lo(0,0)}projectTilePoint(a,_e,it){return{x:a,y:_e,z:0}}locationPoint(a,_e,it=!0){return a._coordinatePoint(a.locationCoordinate(_e),it)}pixelsPerMeter(a,_e){return Vl(1,a)*_e}pixelSpaceConversion(a,_e,it){return 1}farthestPixelDistance(a){return tw(a,a.pixelsPerMeter)}pointCoordinate(a,_e,it,ot){const lt=a.horizonLineFromTop(!1),ht=new ir(_e,Math.max(lt,it));return a.rayIntersectionCoordinate(a.pointRayIntersection(ht,ot))}pointCoordinate3D(a,_e,it){const ot=new ir(_e,it);if(a.elevation)return a.elevation.pointCoordinate(ot);{const lt=this.pointCoordinate(a,ot.x,ot.y,0);return[lt.x,lt.y,lt.z]}}isPointAboveHorizon(a,_e){if(a.elevation)return!this.pointCoordinate3D(a,_e.x,_e.y);const it=a.horizonLineFromTop();return _e.y<it}createInversionMatrix(a,_e){return NS}createTileMatrix(a,_e,it){let ot,lt,ht;const pt=it.canonical,gt=Bl(new Float64Array(16));if(this.isReprojectedInTileSpace){const yt=Dp(pt,this);ot=1,lt=yt.x+it.wrap*yt.scale,ht=yt.y,Cp(gt,gt,[ot/yt.scale,ot/yt.scale,a.pixelsPerMeter/_e])}else ot=_e/a.zoomScale(pt.z),lt=(pt.x+Math.pow(2,pt.z)*it.wrap)*ot,ht=pt.y*ot;return Py(gt,gt,[lt,ht,0]),Cp(gt,gt,[ot/Cn,ot/Cn,1]),gt}upVector(a,_e,it){return[0,0,1]}upVectorScale(a,_e,it){return{metersToTile:1}}}class jS extends qu{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[_e,it]=this.parallels=a.parallels||[29.5,45.5],ot=Math.sin(xr(_e));this.n=(ot+Math.sin(xr(it)))/2,this.c=1+ot*(2*this.n-ot),this.r0=Math.sqrt(this.c)/this.n}project(a,_e){const{n:it,c:ot,r0:lt}=this,ht=xr(a-this.center[0]),pt=xr(_e),gt=Math.sqrt(ot-2*it*Math.sin(pt))/it;return{x:gt*Math.sin(ht*it),y:gt*Math.cos(ht*it)-lt,z:0}}unproject(a,_e){const{n:it,c:ot,r0:lt}=this,ht=lt+_e;let pt=Math.atan2(a,Math.abs(ht))*Math.sign(ht);ht*it<0&&(pt-=Math.PI*Math.sign(a)*Math.sign(ht));const gt=xr(this.center[0])*it;pt=or(pt,-Math.PI-gt,Math.PI-gt);const yt=Nt(Xr(pt/it)+this.center[0],-180,180),Et=Math.asin(Nt((ot-(a*a+ht*ht)*it*it)/(2*it),-1,1)),Pt=Nt(Xr(Et),-bs,bs);return new lo(yt,Pt)}}const Qy=1.340264,Jy=-.081106,e0=893e-6,t0=.003796,Ev=Math.sqrt(3)/2;class US extends qu{project(a,_e){_e=_e/180*Math.PI,a=a/180*Math.PI;const it=Math.asin(Ev*Math.sin(_e)),ot=it*it,lt=ot*ot*ot;return{x:.5*(a*Math.cos(it)/(Ev*(Qy+3*Jy*ot+lt*(7*e0+9*t0*ot)))/Math.PI+.5),y:1-.5*(it*(Qy+Jy*ot+lt*(e0+t0*ot))/Math.PI+1),z:0}}unproject(a,_e){a=(2*a-.5)*Math.PI;let it=_e=(2*(1-_e)-1)*Math.PI,ot=it*it,lt=ot*ot*ot;for(let Et,Pt,Rt,zt=0;zt<12&&(Pt=it*(Qy+Jy*ot+lt*(e0+t0*ot))-_e,Rt=Qy+3*Jy*ot+lt*(7*e0+9*t0*ot),Et=Pt/Rt,it=Nt(it-Et,-Math.PI/3,Math.PI/3),ot=it*it,lt=ot*ot*ot,!(Math.abs(Et)<1e-12));++zt);const ht=Ev*a*(Qy+3*Jy*ot+lt*(7*e0+9*t0*ot))/Math.cos(it),pt=Math.asin(Math.sin(it)/Ev),gt=Nt(180*ht/Math.PI,-180,180),yt=Nt(180*pt/Math.PI,-bs,bs);return new lo(gt,yt)}}class GS extends qu{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,_e){return{x:.5+a/360,y:.5-_e/360,z:0}}unproject(a,_e){const it=360*(a-.5),ot=Nt(360*(.5-_e),-bs,bs);return new lo(it,ot)}}const Lm=Math.PI/2;function Sv(j){return Math.tan((Lm+j)/2)}class HS extends qu{constructor(a){super(a),this.center=a.center||[0,30];const[_e,it]=this.parallels=a.parallels||[30,30];let ot=xr(_e),lt=xr(it);this.southernCenter=ot+lt<0,this.southernCenter&&(ot=-ot,lt=-lt);const ht=Math.cos(ot),pt=Sv(ot);this.n=ot===lt?Math.sin(ot):Math.log(ht/Math.cos(lt))/Math.log(Sv(lt)/pt),this.f=ht*Math.pow(Sv(ot),this.n)/this.n}project(a,_e){_e=xr(_e),this.southernCenter&&(_e=-_e),a=xr(a-this.center[0]);const it=1e-6,{n:ot,f:lt}=this;lt>0?_e<-Lm+it&&(_e=-Lm+it):_e>Lm-it&&(_e=Lm-it);const ht=lt/Math.pow(Sv(_e),ot);let pt=ht*Math.sin(ot*a),gt=lt-ht*Math.cos(ot*a);return pt=.5*(pt/Math.PI+.5),gt=.5*(gt/Math.PI+.5),{x:pt,y:this.southernCenter?gt:1-gt,z:0}}unproject(a,_e){a=(2*a-.5)*Math.PI,this.southernCenter&&(_e=1-_e),_e=(2*(1-_e)-.5)*Math.PI;const{n:it,f:ot}=this,lt=ot-_e,ht=Math.sign(lt),pt=Math.sign(it)*Math.sqrt(a*a+lt*lt);let gt=Math.atan2(a,Math.abs(lt))*ht;lt*it<0&&(gt-=Math.PI*Math.sign(a)*ht);const yt=Nt(Xr(gt/it)+this.center[0],-180,180),Et=Nt(Xr(2*Math.atan(Math.pow(ot/pt,1/it))-Lm),-bs,bs);return new lo(yt,this.southernCenter?-Et:Et)}}class iw extends qu{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,_e){return{x:_h(a),y:eu(_e),z:0}}unproject(a,_e){const it=Qs(a),ot=xs(_e);return new lo(it,ot)}}const rw=xr(bs);class qS extends qu{project(a,_e){const it=(_e=xr(_e))*_e,ot=it*it;return{x:.5*((a=xr(a))*(.8707-.131979*it+ot*(ot*(.003971*it-.001529*ot)-.013791))/Math.PI+.5),y:1-.5*(_e*(1.007226+it*(.015085+ot*(.028874*it-.044475-.005916*ot)))/Math.PI+1),z:0}}unproject(a,_e){a=(2*a-.5)*Math.PI;let it=_e=(2*(1-_e)-1)*Math.PI,ot=25,lt=0,ht=it*it;do{ht=it*it;const yt=ht*ht;lt=(it*(1.007226+ht*(.015085+yt*(.028874*ht-.044475-.005916*yt)))-_e)/(1.007226+ht*(.045255+yt*(.259866*ht-.311325-.005916*11*yt))),it=Nt(it-lt,-rw,rw)}while(Math.abs(lt)>1e-6&&--ot>0);ht=it*it;const pt=Nt(Xr(a/(.8707+ht*(ht*(ht*ht*ht*(.003971-.001529*ht)-.013791)-.131979))),-180,180),gt=Xr(it);return new lo(pt,gt)}}const nw=xr(bs);class WS extends qu{project(a,_e){_e=xr(_e),a=xr(a);const it=Math.cos(_e),ot=2/Math.PI,lt=Math.acos(it*Math.cos(a/2)),ht=Math.sin(lt)/lt,pt=.5*(a*ot+2*it*Math.sin(a/2)/ht)||0,gt=.5*(_e+Math.sin(_e)/ht)||0;return{x:.5*(pt/Math.PI+.5),y:1-.5*(gt/Math.PI+1),z:0}}unproject(a,_e){let it=a=(2*a-.5)*Math.PI,ot=_e=(2*(1-_e)-1)*Math.PI,lt=25;const ht=1e-6;let pt=0,gt=0;do{const yt=Math.cos(ot),Et=Math.sin(ot),Pt=2*Et*yt,Rt=Et*Et,zt=yt*yt,Ot=Math.cos(it/2),Ut=Math.sin(it/2),Kt=2*Ot*Ut,rr=Ut*Ut,pr=1-zt*Ot*Ot,nr=pr?1/pr:0,ur=pr?Math.acos(yt*Ot)*Math.sqrt(1/pr):0,mr=.5*(2*ur*yt*Ut+2*it/Math.PI)-a,fr=.5*(ur*Et+ot)-_e,Rr=.5*nr*(zt*rr+ur*yt*Ot*Rt)+1/Math.PI,Ir=nr*(Kt*Pt/4-ur*Et*Ut),Ur=.125*nr*(Pt*Ut-ur*Et*zt*Kt),en=.5*nr*(Rt*Ot+ur*rr*yt)+.5,Br=Ir*Ur-en*Rr;pt=(fr*Ir-mr*en)/Br,gt=(mr*Ur-fr*Rr)/Br,it=Nt(it-pt,-Math.PI,Math.PI),ot=Nt(ot-gt,-nw,nw)}while((Math.abs(pt)>ht||Math.abs(gt)>ht)&&--lt>0);return new lo(Xr(it),Xr(ot))}}class ow extends qu{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(xr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,_e){const{scale:it,cosPhi:ot}=this;return{x:xr(a)*ot*it+.5,y:-Math.sin(xr(_e))/ot*it+.5,z:0}}unproject(a,_e){const{scale:it,cosPhi:ot}=this,lt=-(_e-.5)/it,ht=Nt(Xr((a-.5)/it)/ot,-180,180),pt=Math.asin(Nt(lt*ot,-1,1)),gt=Nt(Xr(pt),-bs,bs);return new lo(ht,gt)}}class ZS extends iw{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,_e,it){const ot=zy(a,_e,it);return jo(ot,ot,Oy(_c(it))),{x:ot[0],y:ot[1],z:ot[2]}}locationPoint(a,_e){const it=ym(_e.lat,_e.lng),ot=As([],it),lt=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(_e),a._centerAltitude):a._centerAltitude;Ly(it,it,ot,Vl(1,0)*Cn*lt);const ht=Bl(new Float64Array(16));return kp(ht,a.pixelMatrix,a.globeMatrix),jo(it,it,ht),new ir(it[0],it[1])}pixelsPerMeter(a,_e){return Vl(1,0)*_e}pixelSpaceConversion(a,_e,it){const ot=Vl(1,a)*_e,lt=Kn(Vl(1,45)*_e,ot,it);return this.pixelsPerMeter(a,_e)/lt}createTileMatrix(a,_e,it){const ot=f_(_c(it.canonical));return kp(new Float64Array(16),a.globeMatrix,ot)}createInversionMatrix(a,_e){const{center:it}=a,ot=Oy(_c(_e));return Q0(ot,ot,xr(it.lng)),n_(ot,ot,xr(it.lat)),Cp(ot,ot,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(ot)}pointCoordinate(a,_e,it,ot){return R1(a,_e,it,!0)||new _m(0,0)}pointCoordinate3D(a,_e,it){const ot=this.pointCoordinate(a,_e,it,0);return[ot.x,ot.y,ot.z]}isPointAboveHorizon(a,_e){return!R1(a,_e.x,_e.y,!1)}farthestPixelDistance(a){const _e=function(ot,lt){const ht=ot.cameraToCenterDistance,pt=ot._centerAltitude*lt,gt=ot._camera,yt=ot._camera.forward(),Et=yu([],Ks([],yt,-ht),[0,0,pt]),Pt=ot.worldSize/(2*Math.PI),Rt=[0,0,-Pt],zt=ot.width/ot.height,Ot=Math.tan(ot.fovAboveCenter),Ut=Ks([],gt.up(),Ot),Kt=Ks([],gt.right(),Ot*zt),rr=As([],yu([],yu([],yt,Ut),Kt)),pr=[];let nr;if(new l_(Et,rr).closestPointOnSphere(Rt,Pt,pr)){const ur=yu([],pr,Rt),mr=Fl([],ur,Et);nr=Math.cos(ot.fovAboveCenter)*Ay(mr)}else{const ur=Fl([],Et,Rt),mr=Fl([],Rt,Et);As(mr,mr);const fr=Ay(ur)-Pt;nr=Math.sqrt(fr*(fr+2*Pt));const Rr=Math.acos(nr/(Pt+fr))-Math.acos(yl(yt,mr));nr*=Math.cos(Rr)}return 1.01*nr}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),it=vm(a.zoom);if(it>0){const ot=tw(a,Vl(1,a.center.lat)*a.worldSize),lt=a.worldSize/(2*Math.PI),ht=Math.max(a.width,a.height)/a.worldSize*Math.PI;return Kn(_e,ot+lt*(1-Math.cos(ht)),Math.pow(it,10))}return _e}upVector(a,_e,it){return zy(_e,it,a,1)}upVectorScale(a){return{metersToTile:J0(tv(_c(a)))}}}function sw(j){const a=j.parallels,_e=!!a&&Math.abs(a[0]+a[1])<.01;switch(j.name){case"mercator":return new iw(j);case"equirectangular":return new GS(j);case"naturalEarth":return new qS(j);case"equalEarth":return new US(j);case"winkelTripel":return new WS(j);case"albers":return _e?new ow(j):new jS(j);case"lambertConformalConic":return _e?new ow(j):new HS(j);case"globe":return new ZS(j)}throw new Error(`Invalid projection name: ${j.name}`)}const XS=uv.types,YS=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tv(j,a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt){const zt=pt?Math.min(Hu,Math.round(pt[0])):0,Ot=pt?Math.min(Hu,Math.round(pt[1])):0;j.emplaceBack(a,_e,Math.round(32*it),Math.round(32*ot),lt,ht,(zt<<1)+(gt?1:0),Ot,16*yt,16*Et,256*Pt,256*Rt)}function kv(j,a,_e,it,ot,lt,ht){j.emplaceBack(a,_e,it,ot,lt,ht)}function Cv(j,a,_e,it,ot){j.emplaceBack(a,_e,it,ot),j.emplaceBack(a,_e,it,ot),j.emplaceBack(a,_e,it,ot),j.emplaceBack(a,_e,it,ot)}function KS(j){for(const a of j.sections)if(Jv(a.text))return!0;return!1}class H_{constructor(a){this.layoutVertexArray=new Zr,this.indexArray=new wn,this.programConfigurations=a,this.segments=new Ho,this.dynamicLayoutVertexArray=new Qr,this.opacityVertexArray=new Sn,this.placedSymbolArray=new Go,this.globeExtVertexArray=new nn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,_e,it,ot){this.isEmpty()||(it&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,oS.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,_e),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,aS.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,YS,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,sS.members,!0)),this.opacityVertexBuffer.itemSize=1),(it||ot)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}vn(H_,"SymbolBuffers");class q_{constructor(a,_e,it){this.layoutVertexArray=new a,this.layoutAttributes=_e,this.indexArray=new it,this.segments=new Ho,this.collisionVertexArray=new qn,this.collisionVertexArrayExt=new Un}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,lS.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,cS.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}vn(q_,"CollisionBuffers");class Wu{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(ht=>ht.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bl([]),this.placementViewportMatrix=Bl([]);const _e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=D_(this.zoom,_e["text-size"]),this.iconSizeData=D_(this.zoom,_e["icon-size"]);const it=this.layers[0].layout,ot=it.get("symbol-sort-key"),lt=it.get("symbol-z-order");this.canOverlap=it.get("text-allow-overlap")||it.get("icon-allow-overlap")||it.get("text-ignore-placement")||it.get("icon-ignore-placement"),this.sortFeaturesByKey=lt!=="viewport-y"&&ot.constantOr(1)!==void 0,this.sortFeaturesByY=(lt==="viewport-y"||lt==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=it.get("text-writing-mode").map(ht=>Js[ht]),this.stateDependentLayerIds=this.layers.filter(ht=>ht.isStateDependent()).map(ht=>ht.id),this.sourceID=a.sourceID,this.projection=a.projection}createArrays(){this.text=new H_(new Tp(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new H_(new Tp(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new Ps,this.lineVertexArray=new dm,this.symbolInstances=new _o}calculateGlyphDependencies(a,_e,it,ot,lt){for(let ht=0;ht<a.length;ht++)if(_e[a.charCodeAt(ht)]=!0,ot&&lt){const pt=Zy[a.charAt(ht)];pt&&(_e[pt.charCodeAt(0)]=!0)}}populate(a,_e,it,ot){const lt=this.layers[0],ht=lt.layout,pt=this.projection.name==="globe",gt=ht.get("text-font"),yt=ht.get("text-field"),Et=ht.get("icon-image"),Pt=(yt.value.kind!=="constant"||yt.value.value instanceof Cs&&!yt.value.value.isEmpty()||yt.value.value.toString().length>0)&&(gt.value.kind!=="constant"||gt.value.value.length>0),Rt=Et.value.kind!=="constant"||!!Et.value.value||Object.keys(Et.parameters).length>0,zt=ht.get("symbol-sort-key");if(this.features=[],!Pt&&!Rt)return;const Ot=_e.iconDependencies,Ut=_e.glyphDependencies,Kt=_e.availableImages,rr=new kt(this.zoom);for(const{feature:pr,id:nr,index:ur,sourceLayerIndex:mr}of a){const fr=lt._featureFilter.needGeometry,Rr=Mp(pr,fr);if(!lt._featureFilter.filter(rr,Rr,it))continue;if(fr||(Rr.geometry=vu(pr,it,ot)),pt&&pr.type!==1&&it.z<=5){const Br=Rr.geometry,qr=.98078528056,Wr=(Kr,sn)=>yl(zy(Kr.x,Kr.y,it,1),zy(sn.x,sn.y,it,1))<qr;for(let Kr=0;Kr<Br.length;Kr++)Br[Kr]=aE(Br[Kr],Wr)}let Ir,Ur;if(Pt){const Br=lt.getValueAndResolveTokens("text-field",Rr,it,Kt),qr=Cs.factory(Br);KS(qr)&&(this.hasRTLText=!0),(!this.hasRTLText||ft()==="unavailable"||this.hasRTLText&&xt.isParsed())&&(Ir=dS(qr,lt,Rr))}if(Rt){const Br=lt.getValueAndResolveTokens("icon-image",Rr,it,Kt);Ur=Br instanceof Vs?Br:Vs.fromString(Br)}if(!Ir&&!Ur)continue;const en=this.sortFeaturesByKey?zt.evaluate(Rr,{},it):void 0;if(this.features.push({id:nr,text:Ir,icon:Ur,index:ur,sourceLayerIndex:mr,geometry:Rr.geometry,properties:pr.properties,type:XS[pr.type],sortKey:en}),Ur&&(Ot[Ur.name]=!0),Ir){const Br=gt.evaluate(Rr,{},it).join(","),qr=ht.get("text-rotation-alignment")==="map"&&ht.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Js.vertical)>=0;for(const Wr of Ir.sections)if(Wr.image)Ot[Wr.image.name]=!0;else{const Kr=by(Ir.toString()),sn=Wr.fontStack||Br,Nr=Ut[sn]=Ut[sn]||{};this.calculateGlyphDependencies(Wr.text,Nr,qr,this.allowVerticalPlacement,Kr)}}}ht.get("symbol-placement")==="line"&&(this.features=function(pr){const nr={},ur={},mr=[];let fr=0;function Rr(Br){mr.push(pr[Br]),fr++}function Ir(Br,qr,Wr){const Kr=ur[Br];return delete ur[Br],ur[qr]=Kr,mr[Kr].geometry[0].pop(),mr[Kr].geometry[0]=mr[Kr].geometry[0].concat(Wr[0]),Kr}function Ur(Br,qr,Wr){const Kr=nr[qr];return delete nr[qr],nr[Br]=Kr,mr[Kr].geometry[0].shift(),mr[Kr].geometry[0]=Wr[0].concat(mr[Kr].geometry[0]),Kr}function en(Br,qr,Wr){const Kr=Wr?qr[0][qr[0].length-1]:qr[0][0];return`${Br}:${Kr.x}:${Kr.y}`}for(let Br=0;Br<pr.length;Br++){const qr=pr[Br],Wr=qr.geometry,Kr=qr.text?qr.text.toString():null;if(!Kr){Rr(Br);continue}const sn=en(Kr,Wr),Nr=en(Kr,Wr,!0);if(sn in ur&&Nr in nr&&ur[sn]!==nr[Nr]){const dn=Ur(sn,Nr,Wr),xn=Ir(sn,Nr,mr[dn].geometry);delete nr[sn],delete ur[Nr],ur[en(Kr,mr[xn].geometry,!0)]=xn,mr[dn].geometry=null}else sn in ur?Ir(sn,Nr,Wr):Nr in nr?Ur(sn,Nr,Wr):(Rr(Br),nr[sn]=fr-1,ur[Nr]=fr-1)}return mr.filter(Br=>Br.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pr,nr)=>pr.sortKey-nr.sortKey)}update(a,_e,it,ot){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,_e,this.layers,it,ot),this.icon.programConfigurations.updatePaintArrays(a,_e,this.layers,it,ot))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=sw(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,_e){const it=this.lineVertexArray.length;if(a.segment!==void 0)for(const{x:ot,y:lt}of _e)this.lineVertexArray.emplaceBack(ot,lt);return{lineStartIndex:it,lineLength:this.lineVertexArray.length-it}}addSymbols(a,_e,it,ot,lt,ht,pt,gt,yt,Et,Pt,Rt,zt,Ot){const Ut=a.indexArray,Kt=a.layoutVertexArray,rr=a.globeExtVertexArray,pr=a.segments.prepareSegment(4*_e.length,Kt,Ut,this.canOverlap?ht.sortKey:void 0),nr=this.glyphOffsetArray.length,ur=pr.vertexLength,mr=this.allowVerticalPlacement&&pt===Js.vertical?Math.PI/2:0,fr=ht.text&&ht.text.sections;for(let Ir=0;Ir<_e.length;Ir++){const{tl:Ur,tr:en,bl:Br,br:qr,tex:Wr,pixelOffsetTL:Kr,pixelOffsetBR:sn,minFontScaleX:Nr,minFontScaleY:dn,glyphOffset:xn,isSDF:pn,sectionIndex:zn}=_e[Ir],an=pr.vertexLength,Tn=xn[1];if(Tv(Kt,yt.x,yt.y,Ur.x,Tn+Ur.y,Wr.x,Wr.y,it,pn,Kr.x,Kr.y,Nr,dn),Tv(Kt,yt.x,yt.y,en.x,Tn+en.y,Wr.x+Wr.w,Wr.y,it,pn,sn.x,Kr.y,Nr,dn),Tv(Kt,yt.x,yt.y,Br.x,Tn+Br.y,Wr.x,Wr.y+Wr.h,it,pn,Kr.x,sn.y,Nr,dn),Tv(Kt,yt.x,yt.y,qr.x,Tn+qr.y,Wr.x+Wr.w,Wr.y+Wr.h,it,pn,sn.x,sn.y,Nr,dn),gt){const{x:On,y:Jn,z:Bn}=gt.anchor,[In,yo,Fn]=gt.up;kv(rr,On,Jn,Bn,In,yo,Fn),kv(rr,On,Jn,Bn,In,yo,Fn),kv(rr,On,Jn,Bn,In,yo,Fn),kv(rr,On,Jn,Bn,In,yo,Fn),Cv(a.dynamicLayoutVertexArray,On,Jn,Bn,mr)}else Cv(a.dynamicLayoutVertexArray,yt.x,yt.y,yt.z,mr);Ut.emplaceBack(an,an+1,an+2),Ut.emplaceBack(an+1,an+2,an+3),pr.vertexLength+=4,pr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(xn[0]),Ir!==_e.length-1&&zn===_e[Ir+1].sectionIndex||a.programConfigurations.populatePaintArrays(Kt.length,ht,ht.index,{},zt,Ot,fr&&fr[zn])}const Rr=gt?gt.anchor:yt;a.placedSymbolArray.emplaceBack(Rr.x,Rr.y,Rr.z,yt.x,yt.y,nr,this.glyphOffsetArray.length-nr,ur,Et,Pt,yt.segment,it?it[0]:0,it?it[1]:0,ot[0],ot[1],pt,0,!1,0,Rt,0)}_commitLayoutVertex(a,_e,it,ot,lt,ht,pt){a.emplaceBack(_e,it,ot,lt,ht,Math.round(pt.x),Math.round(pt.y))}_addCollisionDebugVertices(a,_e,it,ot,lt,ht,pt){const gt=it.segments.prepareSegment(4,it.layoutVertexArray,it.indexArray),yt=gt.vertexLength,Et=pt.tileAnchorX,Pt=pt.tileAnchorY;for(let zt=0;zt<4;zt++)it.collisionVertexArray.emplaceBack(0,0,0,0);it.collisionVertexArrayExt.emplaceBack(_e,-a.padding,-a.padding),it.collisionVertexArrayExt.emplaceBack(_e,a.padding,-a.padding),it.collisionVertexArrayExt.emplaceBack(_e,a.padding,a.padding),it.collisionVertexArrayExt.emplaceBack(_e,-a.padding,a.padding),this._commitLayoutVertex(it.layoutVertexArray,ot,lt,ht,Et,Pt,new ir(a.x1,a.y1)),this._commitLayoutVertex(it.layoutVertexArray,ot,lt,ht,Et,Pt,new ir(a.x2,a.y1)),this._commitLayoutVertex(it.layoutVertexArray,ot,lt,ht,Et,Pt,new ir(a.x2,a.y2)),this._commitLayoutVertex(it.layoutVertexArray,ot,lt,ht,Et,Pt,new ir(a.x1,a.y2)),gt.vertexLength+=4;const Rt=it.indexArray;Rt.emplaceBack(yt,yt+1),Rt.emplaceBack(yt+1,yt+2),Rt.emplaceBack(yt+2,yt+3),Rt.emplaceBack(yt+3,yt),gt.primitiveLength+=4}_addTextDebugCollisionBoxes(a,_e,it,ot,lt,ht){for(let pt=ot;pt<lt;pt++){const gt=it.get(pt),yt=this.getSymbolInstanceTextSize(a,ht,_e,pt);this._addCollisionDebugVertices(gt,yt,this.textCollisionBox,gt.projectedAnchorX,gt.projectedAnchorY,gt.projectedAnchorZ,ht)}}_addIconDebugCollisionBoxes(a,_e,it,ot,lt,ht){for(let pt=ot;pt<lt;pt++){const gt=it.get(pt),yt=this.getSymbolInstanceIconSize(a,_e,ht.placedIconSymbolIndex);this._addCollisionDebugVertices(gt,yt,this.iconCollisionBox,gt.projectedAnchorX,gt.projectedAnchorY,gt.projectedAnchorZ,ht)}}generateCollisionDebugBuffers(a,_e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new q_(_n,kx.members,as),this.iconCollisionBox=new q_(_n,kx.members,as);const it=Sm(this.iconSizeData,a),ot=Sm(this.textSizeData,a);for(let lt=0;lt<this.symbolInstances.length;lt++){const ht=this.symbolInstances.get(lt);this._addTextDebugCollisionBoxes(ot,a,_e,ht.textBoxStartIndex,ht.textBoxEndIndex,ht),this._addTextDebugCollisionBoxes(ot,a,_e,ht.verticalTextBoxStartIndex,ht.verticalTextBoxEndIndex,ht),this._addIconDebugCollisionBoxes(it,a,_e,ht.iconBoxStartIndex,ht.iconBoxEndIndex,ht),this._addIconDebugCollisionBoxes(it,a,_e,ht.verticalIconBoxStartIndex,ht.verticalIconBoxEndIndex,ht)}}getSymbolInstanceTextSize(a,_e,it,ot){const lt=this.text.placedSymbolArray.get(_e.rightJustifiedTextSymbolIndex>=0?_e.rightJustifiedTextSymbolIndex:_e.centerJustifiedTextSymbolIndex>=0?_e.centerJustifiedTextSymbolIndex:_e.leftJustifiedTextSymbolIndex>=0?_e.leftJustifiedTextSymbolIndex:_e.verticalPlacedTextSymbolIndex>=0?_e.verticalPlacedTextSymbolIndex:ot),ht=mv(this.textSizeData,a,lt)/fs;return this.tilePixelRatio*ht}getSymbolInstanceIconSize(a,_e,it){const ot=this.icon.placedSymbolArray.get(it),lt=mv(this.iconSizeData,a,ot);return this.tilePixelRatio*lt}_commitDebugCollisionVertexUpdate(a,_e,it){a.emplaceBack(_e,-it,-it),a.emplaceBack(_e,it,-it),a.emplaceBack(_e,it,it),a.emplaceBack(_e,-it,it)}_updateTextDebugCollisionBoxes(a,_e,it,ot,lt,ht){for(let pt=ot;pt<lt;pt++){const gt=it.get(pt),yt=this.getSymbolInstanceTextSize(a,ht,_e,pt);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,yt,gt.padding)}}_updateIconDebugCollisionBoxes(a,_e,it,ot,lt,ht){for(let pt=ot;pt<lt;pt++){const gt=it.get(pt),yt=this.getSymbolInstanceIconSize(a,_e,ht);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,yt,gt.padding)}}updateCollisionDebugBuffers(a,_e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const it=Sm(this.iconSizeData,a),ot=Sm(this.textSizeData,a);for(let lt=0;lt<this.symbolInstances.length;lt++){const ht=this.symbolInstances.get(lt);this._updateTextDebugCollisionBoxes(ot,a,_e,ht.textBoxStartIndex,ht.textBoxEndIndex,ht),this._updateTextDebugCollisionBoxes(ot,a,_e,ht.verticalTextBoxStartIndex,ht.verticalTextBoxEndIndex,ht),this._updateIconDebugCollisionBoxes(it,a,_e,ht.iconBoxStartIndex,ht.iconBoxEndIndex,ht.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(it,a,_e,ht.verticalIconBoxStartIndex,ht.verticalIconBoxEndIndex,ht.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,_e,it,ot,lt,ht,pt,gt,yt){const Et={};if(_e<it){const{x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur,featureIndex:mr}=a.get(_e);Et.textBox={x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur},Et.textFeatureIndex=mr}if(ot<lt){const{x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur,featureIndex:mr}=a.get(ot);Et.verticalTextBox={x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur},Et.verticalTextFeatureIndex=mr}if(ht<pt){const{x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur,featureIndex:mr}=a.get(ht);Et.iconBox={x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur},Et.iconFeatureIndex=mr}if(gt<yt){const{x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur,featureIndex:mr}=a.get(gt);Et.verticalIconBox={x1:Pt,y1:Rt,x2:zt,y2:Ot,padding:Ut,projectedAnchorX:Kt,projectedAnchorY:rr,projectedAnchorZ:pr,tileAnchorX:nr,tileAnchorY:ur},Et.verticalIconFeatureIndex=mr}return Et}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let _e=0;_e<this.symbolInstances.length;_e++){const it=this.symbolInstances.get(_e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,it.textBoxStartIndex,it.textBoxEndIndex,it.verticalTextBoxStartIndex,it.verticalTextBoxEndIndex,it.iconBoxStartIndex,it.iconBoxEndIndex,it.verticalIconBoxStartIndex,it.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,_e){const it=a.placedSymbolArray.get(_e),ot=it.vertexStartIndex+4*it.numGlyphs;for(let lt=it.vertexStartIndex;lt<ot;lt+=4)a.indexArray.emplaceBack(lt,lt+1,lt+2),a.indexArray.emplaceBack(lt+1,lt+2,lt+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const _e=Math.sin(a),it=Math.cos(a),ot=[],lt=[],ht=[];for(let pt=0;pt<this.symbolInstances.length;++pt){ht.push(pt);const gt=this.symbolInstances.get(pt);ot.push(0|Math.round(_e*gt.tileAnchorX+it*gt.tileAnchorY)),lt.push(gt.featureIndex)}return ht.sort((pt,gt)=>ot[pt]-ot[gt]||lt[gt]-lt[pt]),ht}addToSortKeyRanges(a,_e){const it=this.sortKeyRanges[this.sortKeyRanges.length-1];it&&it.sortKey===_e?it.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:_e,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const _e of this.symbolInstanceIndexes){const it=this.symbolInstances.get(_e);this.featureSortOrder.push(it.featureIndex);const{rightJustifiedTextSymbolIndex:ot,centerJustifiedTextSymbolIndex:lt,leftJustifiedTextSymbolIndex:ht,verticalPlacedTextSymbolIndex:pt,placedIconSymbolIndex:gt,verticalPlacedIconSymbolIndex:yt}=it;ot>=0&&this.addIndicesForPlacedSymbol(this.text,ot),lt>=0&&lt!==ot&&this.addIndicesForPlacedSymbol(this.text,lt),ht>=0&&ht!==lt&&ht!==ot&&this.addIndicesForPlacedSymbol(this.text,ht),pt>=0&&this.addIndicesForPlacedSymbol(this.text,pt),gt>=0&&this.addIndicesForPlacedSymbol(this.icon,gt),yt>=0&&this.addIndicesForPlacedSymbol(this.icon,yt)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}vn(Wu,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Wu.MAX_GLYPHS=65535,Wu.addDynamicAttributes=Cv;const QS=new lr({"symbol-placement":new jt(jr.layout_symbol["symbol-placement"]),"symbol-spacing":new jt(jr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt(jr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qt(jr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt(jr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt(jr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new jt(jr.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt(jr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt(jr.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qt(jr.layout_symbol["icon-size"]),"icon-text-fit":new jt(jr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt(jr.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qt(jr.layout_symbol["icon-image"]),"icon-rotate":new Qt(jr.layout_symbol["icon-rotate"]),"icon-padding":new jt(jr.layout_symbol["icon-padding"]),"icon-keep-upright":new jt(jr.layout_symbol["icon-keep-upright"]),"icon-offset":new Qt(jr.layout_symbol["icon-offset"]),"icon-anchor":new Qt(jr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt(jr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt(jr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt(jr.layout_symbol["text-rotation-alignment"]),"text-field":new Qt(jr.layout_symbol["text-field"]),"text-font":new Qt(jr.layout_symbol["text-font"]),"text-size":new Qt(jr.layout_symbol["text-size"]),"text-max-width":new Qt(jr.layout_symbol["text-max-width"]),"text-line-height":new Qt(jr.layout_symbol["text-line-height"]),"text-letter-spacing":new Qt(jr.layout_symbol["text-letter-spacing"]),"text-justify":new Qt(jr.layout_symbol["text-justify"]),"text-radial-offset":new Qt(jr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt(jr.layout_symbol["text-variable-anchor"]),"text-anchor":new Qt(jr.layout_symbol["text-anchor"]),"text-max-angle":new jt(jr.layout_symbol["text-max-angle"]),"text-writing-mode":new jt(jr.layout_symbol["text-writing-mode"]),"text-rotate":new Qt(jr.layout_symbol["text-rotate"]),"text-padding":new jt(jr.layout_symbol["text-padding"]),"text-keep-upright":new jt(jr.layout_symbol["text-keep-upright"]),"text-transform":new Qt(jr.layout_symbol["text-transform"]),"text-offset":new Qt(jr.layout_symbol["text-offset"]),"text-allow-overlap":new jt(jr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new jt(jr.layout_symbol["text-ignore-placement"]),"text-optional":new jt(jr.layout_symbol["text-optional"])});var W_={paint:new lr({"icon-opacity":new Qt(jr.paint_symbol["icon-opacity"]),"icon-color":new Qt(jr.paint_symbol["icon-color"]),"icon-halo-color":new Qt(jr.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qt(jr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qt(jr.paint_symbol["icon-halo-blur"]),"icon-translate":new jt(jr.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt(jr.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qt(jr.paint_symbol["text-opacity"]),"text-color":new Qt(jr.paint_symbol["text-color"],{runtimeType:$s,getOverride:j=>j.textColor,hasOverride:j=>!!j.textColor}),"text-halo-color":new Qt(jr.paint_symbol["text-halo-color"]),"text-halo-width":new Qt(jr.paint_symbol["text-halo-width"]),"text-halo-blur":new Qt(jr.paint_symbol["text-halo-blur"]),"text-translate":new jt(jr.paint_symbol["text-translate"]),"text-translate-anchor":new jt(jr.paint_symbol["text-translate-anchor"])}),layout:QS};class aw{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:Eu,this.defaultValue=a}evaluate(a){if(a.formattedSection){const _e=this.defaultValue.property.overrides;if(_e&&_e.hasOverride(a.formattedSection))return _e.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}vn(aw,"FormatSectionOverride",{omit:["defaultValue"]});class Pv extends Ol{constructor(a){super(a,W_)}recalculate(a,_e){super.recalculate(a,_e),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const it=this.layout.get("text-writing-mode");if(it){const ot=[];for(const lt of it)ot.indexOf(lt)<0&&ot.push(lt);this.layout._values["text-writing-mode"]=ot}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(a,_e,it,ot){const lt=this.layout.get(a).evaluate(_e,{},it,ot),ht=this._unevaluatedLayout._values[a];return ht.isDataDriven()||$u(ht.value)||!lt?lt:function(pt,gt){return gt.replace(/{([^{}]+)}/g,(yt,Et)=>Et in pt?String(pt[Et]):"")}(_e.properties,lt)}createBucket(a){return new Wu(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of W_.paint.overridableProperties){if(!Pv.hasPaintOverride(this.layout,a))continue;const _e=this.paint.get(a),it=new aw(_e),ot=new nm(it,_e.property.specification);let lt=null;lt=_e.value.kind==="constant"||_e.value.kind==="source"?new hy("source",ot):new gp("composite",ot,_e.value.zoomStops,_e.value._interpolationType),this.paint._values[a]=new _i(_e.property,lt,_e.parameters)}}_handleOverridablePaintPropertyUpdate(a,_e,it){return!(!this.layout||_e.isDataDriven()||it.isDataDriven())&&Pv.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,_e){const it=a.get("text-field"),ot=W_.paint.properties[_e];let lt=!1;const ht=pt=>{for(const gt of pt)if(ot.overrides&&ot.overrides.hasOverride(gt))return void(lt=!0)};if(it.value.kind==="constant"&&it.value.value instanceof Cs)ht(it.value.value.sections);else if(it.value.kind==="source"){const pt=yt=>{lt||(yt instanceof su&&Do(yt.value)===_d?ht(yt.value.sections):yt instanceof Yl?ht(yt.sections):yt.eachChild(pt))},gt=it.value;gt._styleExpression&&pt(gt._styleExpression.expression)}return lt}getProgramConfiguration(a){return new ju(this,a)}}var JS={paint:new lr({"background-color":new jt(jr.paint_background["background-color"]),"background-pattern":new jt(jr.paint_background["background-pattern"]),"background-opacity":new jt(jr.paint_background["background-opacity"])})},eT={paint:new lr({"raster-opacity":new jt(jr.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt(jr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt(jr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt(jr.paint_raster["raster-brightness-max"]),"raster-saturation":new jt(jr.paint_raster["raster-saturation"]),"raster-contrast":new jt(jr.paint_raster["raster-contrast"]),"raster-resampling":new jt(jr.paint_raster["raster-resampling"]),"raster-fade-duration":new jt(jr.paint_raster["raster-fade-duration"])})};class tT extends Ol{constructor(a){super(a,{}),this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}var iT={paint:new lr({"sky-type":new jt(jr.paint_sky["sky-type"]),"sky-atmosphere-sun":new jt(jr.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new jt(jr.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new jt(jr.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new jt(jr.paint_sky["sky-gradient-radius"]),"sky-gradient":new sr(jr.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new jt(jr.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new jt(jr.paint_sky["sky-atmosphere-color"]),"sky-opacity":new jt(jr.paint_sky["sky-opacity"])})};function Z_(j,a,_e){const it=[0,0,1],ot=C1([]);return A1(ot,ot,_e?-xr(j)+Math.PI:xr(j)),P1(ot,ot,-xr(a)),E1(it,it,ot),As(it,it)}const rT={circle:class extends Ol{constructor(j){super(j,fE)}createBucket(j){return new x_(j)}queryRadius(j){const a=j;return xm("circle-radius",this,a)+xm("circle-stroke-width",this,a)+nv(this.paint.get("circle-translate"))}queryIntersectsFeature(j,a,_e,it,ot,lt,ht,pt){const gt=K1(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),lt.angle,j.pixelToTileUnitsFactor),yt=this.paint.get("circle-radius").evaluate(a,_e)+this.paint.get("circle-stroke-width").evaluate(a,_e);return Q1(j,it,lt,ht,pt,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",gt,yt)}getProgramIds(){return["circle"]}getProgramConfiguration(j){return new ju(this,j)}},heatmap:class extends Ol{createBucket(j){return new ex(j)}constructor(j){super(j,vE),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(j){j==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=S_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(j){return xm("heatmap-radius",this,j)}queryIntersectsFeature(j,a,_e,it,ot,lt,ht,pt){const gt=this.paint.get("heatmap-radius").evaluate(a,_e);return Q1(j,it,lt,ht,pt,!0,!0,new ir(0,0),gt)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(j){return new ju(this,j)}},hillshade:class extends Ol{constructor(j){super(j,_E)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ol{constructor(j){super(j,$E)}getProgramIds(){const j=this.paint.get("fill-pattern"),a=j&&j.constantOr(1),_e=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&_e.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),_e}getProgramConfiguration(j){return new ju(this,j)}recalculate(j,a){super.recalculate(j,a);const _e=this.paint._values["fill-outline-color"];_e.value.kind==="constant"&&_e.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(j){return new cv(j)}queryRadius(){return nv(this.paint.get("fill-translate"))}queryIntersectsFeature(j,a,_e,it,ot,lt){return!j.queryGeometry.isAboveHorizon&&q1(Y1(j.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),lt.angle,j.pixelToTileUnitsFactor),it)}isTileClipped(){return!0}},"fill-extrusion":class extends Ol{constructor(j){super(j,KE)}createBucket(j){return new Hy(j)}queryRadius(){return nv(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(j){return new ju(this,j)}queryIntersectsFeature(j,a,_e,it,ot,lt,ht,pt,gt){const yt=K1(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),lt.angle,j.pixelToTileUnitsFactor),Et=this.paint.get("fill-extrusion-height").evaluate(a,_e),Pt=this.paint.get("fill-extrusion-base").evaluate(a,_e),Rt=[0,0],zt=pt&&lt.elevation,Ot=lt.elevation?lt.elevation.exaggeration():1,Ut=j.tile.getBucket(this);if(zt&&Ut instanceof Hy){const ur=Ut.centroidVertexArray,mr=gt+1;mr<ur.length&&(Rt[0]=ur.geta_centroid_pos0(mr),Rt[1]=ur.geta_centroid_pos1(mr))}if(Rt[0]===0&&Rt[1]===1)return!1;lt.projection.name==="globe"&&(it=vx([it],[new ir(0,0),new ir(Cn,Cn)],j.tileID.canonical).map(ur=>ur.polygon).flat());const Kt=zt?pt:null,[rr,pr]=function(ur,mr,fr,Rr,Ir,Ur,en,Br,qr,Wr,Kr){return ur.projection.name==="globe"?function(sn,Nr,dn,xn,pn,zn,an,Tn,On,Jn,Bn){const In=[],yo=[],Fn=sn.projection.upVectorScale(Bn,sn.center.lat,sn.worldSize).metersToTile,Vn=[0,0,0,1],co=[0,0,0,1],fo=(ho,ko,$o,Wo)=>{ho[0]=ko,ho[1]=$o,ho[2]=Wo,ho[3]=1},mo=yx();dn>0&&(dn+=mo),xn+=mo;for(const ho of Nr){const ko=[],$o=[];for(const Wo of ho){const uo=Wo.x+pn.x,Qo=Wo.y+pn.y,Zo=sn.projection.projectTilePoint(uo,Qo,Bn),Co=sn.projection.upVector(Bn,Wo.x,Wo.y);let to=dn,Xo=xn;if(an){const go=wx(uo,Qo,dn,xn,an,Tn,On,Jn);to+=go.base,Xo+=go.top}dn!==0?fo(Vn,Zo.x+Co[0]*Fn*to,Zo.y+Co[1]*Fn*to,Zo.z+Co[2]*Fn*to):fo(Vn,Zo.x,Zo.y,Zo.z),fo(co,Zo.x+Co[0]*Fn*Xo,Zo.y+Co[1]*Fn*Xo,Zo.z+Co[2]*Fn*Xo),jo(Vn,Vn,zn),jo(co,co,zn),ko.push(new Em(Vn[0],Vn[1],Vn[2])),$o.push(new Em(co[0],co[1],co[2]))}In.push(ko),yo.push($o)}return[In,yo]}(ur,mr,fr,Rr,Ir,Ur,en,Br,qr,Wr,Kr):en?function(sn,Nr,dn,xn,pn,zn,an,Tn,On){const Jn=[],Bn=[],In=[0,0,0,1];for(const yo of sn){const Fn=[],Vn=[];for(const co of yo){const fo=co.x+xn.x,mo=co.y+xn.y,ho=wx(fo,mo,Nr,dn,zn,an,Tn,On);In[0]=fo,In[1]=mo,In[2]=ho.base,In[3]=1,Pp(In,In,pn),In[3]=Math.max(In[3],1e-5);const ko=new Em(In[0]/In[3],In[1]/In[3],In[2]/In[3]);In[0]=fo,In[1]=mo,In[2]=ho.top,In[3]=1,Pp(In,In,pn),In[3]=Math.max(In[3],1e-5);const $o=new Em(In[0]/In[3],In[1]/In[3],In[2]/In[3]);Fn.push(ko),Vn.push($o)}Jn.push(Fn),Bn.push(Vn)}return[Jn,Bn]}(mr,fr,Rr,Ir,Ur,en,Br,qr,Wr):function(sn,Nr,dn,xn,pn){const zn=[],an=[],Tn=pn[8]*Nr,On=pn[9]*Nr,Jn=pn[10]*Nr,Bn=pn[11]*Nr,In=pn[8]*dn,yo=pn[9]*dn,Fn=pn[10]*dn,Vn=pn[11]*dn;for(const co of sn){const fo=[],mo=[];for(const ho of co){const ko=ho.x+xn.x,$o=ho.y+xn.y,Wo=pn[0]*ko+pn[4]*$o+pn[12],uo=pn[1]*ko+pn[5]*$o+pn[13],Qo=pn[2]*ko+pn[6]*$o+pn[14],Zo=pn[3]*ko+pn[7]*$o+pn[15],Co=Wo+Tn,to=uo+On,Xo=Qo+Jn,go=Math.max(Zo+Bn,1e-5),Ls=Wo+In,Yo=uo+yo,ms=Qo+Fn,ls=Math.max(Zo+Vn,1e-5);fo.push(new Em(Co/go,to/go,Xo/go)),mo.push(new Em(Ls/ls,Yo/ls,ms/ls))}zn.push(fo),an.push(mo)}return[zn,an]}(mr,fr,Rr,Ir,Ur)}(lt,it,Pt,Et,yt,ht,Kt,Rt,Ot,lt.center.lat,j.tileID.canonical),nr=j.queryGeometry;return function(ur,mr,fr){let Rr=1/0;q1(fr,mr)&&(Rr=bx(fr,mr[0]));for(let Ir=0;Ir<mr.length;Ir++){const Ur=mr[Ir],en=ur[Ir];for(let Br=0;Br<Ur.length-1;Br++){const qr=Ur[Br],Wr=[qr,Ur[Br+1],en[Br+1],en[Br],qr];H1(fr,Wr)&&(Rr=Math.min(Rr,bx(fr,Wr)))}}return Rr!==1/0&&Rr}(rr,pr,nr.isPointQuery()?nr.screenBounds:nr.screenGeometry)}},line:class extends Ol{constructor(j){super(j,Ex),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(j){if(j==="line-gradient"){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof Qm,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(j,a){super.recalculate(j,a),this.paint._values["line-floorwidth"]=Sx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,j)}createBucket(j){return new fv(j)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(j){return new ju(this,j)}queryRadius(j){const a=j,_e=Tx(xm("line-width",this,a),xm("line-gap-width",this,a)),it=xm("line-offset",this,a);return _e/2+Math.abs(it)+nv(this.paint.get("line-translate"))}queryIntersectsFeature(j,a,_e,it,ot,lt){if(j.queryGeometry.isAboveHorizon)return!1;const ht=Y1(j.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),lt.angle,j.pixelToTileUnitsFactor),pt=j.pixelToTileUnitsFactor/2*Tx(this.paint.get("line-width").evaluate(a,_e),this.paint.get("line-gap-width").evaluate(a,_e)),gt=this.paint.get("line-offset").evaluate(a,_e);return gt&&(it=function(yt,Et){const Pt=[],Rt=new ir(0,0);for(let zt=0;zt<yt.length;zt++){const Ot=yt[zt],Ut=[];for(let Kt=0;Kt<Ot.length;Kt++){const rr=Ot[Kt],pr=Ot[Kt+1],nr=Kt===0?Rt:rr.sub(Ot[Kt-1])._unit()._perp(),ur=Kt===Ot.length-1?Rt:pr.sub(rr)._unit()._perp(),mr=nr._add(ur)._unit();mr._mult(1/(mr.x*ur.x+mr.y*ur.y)),Ut.push(mr._mult(Et)._add(rr))}Pt.push(Ut)}return Pt}(it,gt*j.pixelToTileUnitsFactor)),function(yt,Et,Pt){for(let Rt=0;Rt<Et.length;Rt++){const zt=Et[Rt];if(yt.length>=3){for(let Ot=0;Ot<zt.length;Ot++)if(Lp(yt,zt[Ot]))return!0}if(hE(yt,zt,Pt))return!0}return!1}(ht,it,pt)}isTileClipped(){return!0}},symbol:Pv,background:class extends Ol{constructor(j){super(j,JS)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ol{constructor(j){super(j,eT)}getProgramIds(){return["raster"]}},sky:class extends Ol{constructor(j){super(j,iT),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(j){j==="sky-gradient"?this._updateColorRamp():j!=="sky-atmosphere-sun"&&j!=="sky-atmosphere-halo-color"&&j!=="sky-atmosphere-color"&&j!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=S_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(j){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=j.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(j,a){if(this.paint.get("sky-type")==="atmosphere"){const it=this.paint.get("sky-atmosphere-sun"),ot=!it,lt=j.style.light,ht=lt.properties.get("position");return ot&&lt.properties.get("anchor")==="viewport"&&Xn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),ot?Z_(ht.azimuthal,90-ht.polar,a):Z_(it[0],90-it[1],a)}const _e=this.paint.get("sky-gradient-center");return Z_(_e[0],90-_e[1],a)}is3D(){return!1}isSky(){return!0}markSkyboxValid(j){this._skyboxInvalidated=!1,this._lightPosition=j.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const j=this.paint.get("sky-type");return j==="atmosphere"?["skyboxCapture","skybox"]:j==="gradient"?["skyboxGradient"]:null}}};class i0{constructor(a,_e,it,ot){this.context=a,this.format=it,this.texture=a.gl.createTexture(),this.update(_e,ot)}update(a,_e,it){const{width:ot,height:lt}=a,{context:ht}=this,{gl:pt}=ht,{HTMLImageElement:gt,HTMLCanvasElement:yt,HTMLVideoElement:Et,ImageData:Pt,ImageBitmap:Rt}=ut;if(pt.bindTexture(pt.TEXTURE_2D,this.texture),ht.pixelStoreUnpackFlipY.set(!1),ht.pixelStoreUnpack.set(1),ht.pixelStoreUnpackPremultiplyAlpha.set(this.format===pt.RGBA&&(!_e||_e.premultiply!==!1)),it||this.size&&this.size[0]===ot&&this.size[1]===lt){const{x:zt,y:Ot}=it||{x:0,y:0};a instanceof gt||a instanceof yt||a instanceof Et||a instanceof Pt||Rt&&a instanceof Rt?pt.texSubImage2D(pt.TEXTURE_2D,0,zt,Ot,pt.RGBA,pt.UNSIGNED_BYTE,a):pt.texSubImage2D(pt.TEXTURE_2D,0,zt,Ot,ot,lt,pt.RGBA,pt.UNSIGNED_BYTE,a.data)}else this.size=[ot,lt],a instanceof gt||a instanceof yt||a instanceof Et||a instanceof Pt||Rt&&a instanceof Rt?pt.texImage2D(pt.TEXTURE_2D,0,this.format,this.format,pt.UNSIGNED_BYTE,a):pt.texImage2D(pt.TEXTURE_2D,0,this.format,ot,lt,0,this.format,pt.UNSIGNED_BYTE,a.data);this.useMipmap=!!(_e&&_e.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&pt.generateMipmap(pt.TEXTURE_2D)}bind(a,_e){const{context:it}=this,{gl:ot}=it;ot.bindTexture(ot.TEXTURE_2D,this.texture),a!==this.filter&&(ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_MAG_FILTER,a),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_MIN_FILTER,this.useMipmap?a===ot.NEAREST?ot.NEAREST_MIPMAP_NEAREST:ot.LINEAR_MIPMAP_NEAREST:a),this.filter=a),_e!==this.wrap&&(ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_S,_e),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_T,_e),this.wrap=_e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class nT{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class oT{constructor(){this.tasks={},this.taskQueue=[],Po(["process"],this),this.invoker=new nT(this.process),this.nextId=0}add(a,_e){const it=this.nextId++,ot=function({type:lt,isSymbolTile:ht,zoom:pt}){return pt=pt||0,lt==="message"?0:lt!=="maybePrepare"||ht?lt!=="parseTile"||ht?lt==="parseTile"&&ht?300-pt:lt==="maybePrepare"&&ht?400-pt:500:200-pt:100-pt}(_e);if(ot===0){zo();try{a()}finally{}return{cancel:()=>{}}}return this.tasks[it]={fn:a,metadata:_e,priority:ot,id:it},this.taskQueue.push(it),this.invoker.trigger(),{cancel:()=>{delete this.tasks[it]}}}process(){zo();try{if(this.taskQueue=this.taskQueue.filter(it=>!!this.tasks[it]),!this.taskQueue.length)return;const a=this.pick();if(a===null)return;const _e=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!_e)return;_e.fn()}finally{}}pick(){let a=null,_e=1/0;for(let ot=0;ot<this.taskQueue.length;ot++){const lt=this.tasks[this.taskQueue[ot]];lt.priority<_e&&(_e=lt.priority,a=ot)}if(a===null)return null;const it=this.taskQueue[a];return this.taskQueue.splice(a,1),it}remove(){this.invoker.remove()}}class lw{constructor(a){this._stringToNumber={},this._numberToString=[];for(let _e=0;_e<a.length;_e++){const it=a[_e];this._stringToNumber[it]=_e,this._numberToString[_e]=it}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const sT=["tile","layer","source","sourceLayer","state"];class cw{constructor(a,_e,it,ot,lt){this.type="Feature",this._vectorTileFeature=a,this._z=_e,this._x=it,this._y=ot,this.properties=a.properties,this.id=lt}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(a.id=this.id);for(const _e of sT)this[_e]!==void 0&&(a[_e]=this[_e]);return a}}const El=32,tu=33,Zu=new Uint16Array(8184);for(let j=0;j<2046;j++){let a=j+2,_e=0,it=0,ot=0,lt=0,ht=0,pt=0;for(1&a?ot=lt=ht=El:_e=it=pt=El;(a>>=1)>1;){const yt=_e+ot>>1,Et=it+lt>>1;1&a?(ot=_e,lt=it,_e=ht,it=pt):(_e=ot,it=lt,ot=ht,lt=pt),ht=yt,pt=Et}const gt=4*j;Zu[gt+0]=_e,Zu[gt+1]=it,Zu[gt+2]=ot,Zu[gt+3]=lt}const iu=new Uint16Array(2178),Xu=new Uint8Array(1089),Av=new Uint16Array(1089);function hw(j){return j===0?-.03125:j===32?.03125:0}var uw=Sr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const dw={type:2,extent:Cn,loadGeometry:()=>[[new ir(0,0),new ir(Cn+1,0),new ir(Cn+1,Cn+1),new ir(0,Cn+1),new ir(0,0)]]};class X_{constructor(a,_e,it,ot,lt){this.tileID=a,this.uid=mn(),this.uses=0,this.tileSize=_e,this.tileZoom=it,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=lt,this.expiredRequestCount=0,this.state="loading",ot&&ot.transform&&(this.projection=ot.transform.projection)}registerFadeDuration(a){const _e=a+this.timeAdded;_e<un.now()||this.fadeEndTime&&_e<this.fadeEndTime||(this.fadeEndTime=_e)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Dp(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,_e,it){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(ot,lt){const ht={};if(!lt)return ht;for(const pt of ot){const gt=pt.layerIds.map(yt=>lt.getLayer(yt)).filter(Boolean);if(gt.length!==0){pt.layers=gt,pt.stateDependentLayerIds&&(pt.stateDependentLayers=pt.stateDependentLayerIds.map(yt=>gt.filter(Et=>Et.id===yt)[0]));for(const yt of gt)ht[yt.id]=pt}}return ht}(a.buckets,_e.style),this.hasSymbolBuckets=!1;for(const ot in this.buckets){const lt=this.buckets[ot];if(lt instanceof Wu){if(this.hasSymbolBuckets=!0,!it)break;lt.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const ot in this.buckets){const lt=this.buckets[ot];if(lt instanceof Wu&&lt.hasRTLText){this.hasRTLText=!0,xt.isLoading()||xt.isLoaded()||ft()!=="deferred"||_t();break}}this.queryPadding=0;for(const ot in this.buckets){const lt=this.buckets[ot];this.queryPadding=Math.max(this.queryPadding,_e.style.getLayer(ot).queryRadius(lt))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas)}else this.collisionBoxArray=new ao}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(a){return this.buckets[a.id]}upload(a){for(const it in this.buckets){const ot=this.buckets[it];ot.uploadPending()&&ot.upload(a)}const _e=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new i0(a,this.imageAtlas.image,_e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new i0(a,this.glyphAtlasImage,_e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i0(a,this.lineAtlas.image,_e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,_e,it,ot,lt,ht,pt,gt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:ot,pixelPosMatrix:pt,transform:ht,params:lt,tileTransform:this.tileTransform},a,_e,it):{}}querySourceFeatures(a,_e){const it=this.latestFeatureIndex;if(!it||!it.rawTileData)return;const ot=it.loadVTLayers(),lt=_e?_e.sourceLayer:"",ht=ot._geojsonTileLayer||ot[lt];if(!ht)return;const pt=lm(_e&&_e.filter),{z:gt,x:yt,y:Et}=this.tileID.canonical,Pt={z:gt,x:yt,y:Et};for(let Rt=0;Rt<ht.length;Rt++){const zt=ht.feature(Rt);if(pt.needGeometry){const Kt=Mp(zt,!0);if(!pt.filter(new kt(this.tileID.overscaledZ),Kt,this.tileID.canonical))continue}else if(!pt.filter(new kt(this.tileID.overscaledZ),zt))continue;const Ot=it.getId(zt,lt),Ut=new cw(zt,gt,yt,Et,Ot);Ut.tile=Pt,a.push(Ut)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const _e=this.expirationTime;if(a.cacheControl){const it=So(a.cacheControl);it["max-age"]&&(this.expirationTime=Date.now()+1e3*it["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const it=Date.now();let ot=!1;if(this.expirationTime>it)ot=!1;else if(_e)if(this.expirationTime<_e)ot=!0;else{const lt=this.expirationTime-_e;lt?this.expirationTime=it+Math.max(lt,3e4):ot=!0}else ot=!0;ot?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,_e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0||!_e)return;const it=this.latestFeatureIndex.loadVTLayers(),ot=_e.style.listImages();for(const lt in this.buckets){if(!_e.style.hasLayer(lt))continue;const ht=this.buckets[lt],pt=ht.layers[0].sourceLayer||"_geojsonTileLayer",gt=it[pt],yt=a[pt];if(!gt||!yt||Object.keys(yt).length===0)continue;if(ht.update(yt,gt,ot,this.imageAtlas&&this.imageAtlas.patternPositions||{}),ht instanceof fv||ht instanceof cv){const Pt=_e.style._getSourceCache(ht.layers[0].source);_e._terrain&&_e._terrain.enabled&&Pt&&ht.programConfigurations.needsUpload&&_e._terrain._clearRenderCacheForTile(Pt.id,this.tileID)}const Et=_e&&_e.style&&_e.style.getLayer(lt);Et&&(this.queryPadding=Math.max(this.queryPadding,Et.queryRadius(ht)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<un.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=un.now()+a}setTexture(a,_e){const it=_e.context,ot=it.gl;this.texture=this.texture||_e.getTileTexture(a.width),this.texture?this.texture.update(a,{useMipmap:!0}):(this.texture=new i0(it,a,ot.RGBA,{useMipmap:!0}),this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE))}setDependencies(a,_e){const it={};for(const ot of _e)it[ot]=!0;this.dependencies[a]=it}hasDependency(a,_e){for(const it of a){const ot=this.dependencies[it];if(ot){for(const lt of _e)if(ot[lt])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,_e){if(!_e||_e.name==="mercator"||this._tileDebugBuffer)return;const it=vu(dw,this.tileID.canonical,this.tileTransform)[0],ot=new Jr,lt=new Us;for(let ht=0;ht<it.length;ht++){const{x:pt,y:gt}=it[ht];ot.emplaceBack(pt,gt),lt.emplaceBack(ht)}lt.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(lt),this._tileDebugBuffer=a.createVertexBuffer(ot,Dy.members),this._tileDebugSegments=Ho.simpleSegment(0,0,ot.length,lt.length)}_makeTileBoundsBuffers(a,_e){if(this._tileBoundsBuffer||!_e||_e.name==="mercator")return;const it=vu(dw,this.tileID.canonical,this.tileTransform)[0];let ot,lt;if(this.isRaster){const ht=function(pt,gt){const yt=Dp(pt,gt),Et=Math.pow(2,pt.z);for(let Kt=0;Kt<tu;Kt++)for(let rr=0;rr<tu;rr++){const pr=Qs((pt.x+(rr+hw(rr))/El)/Et),nr=xs((pt.y+(Kt+hw(Kt))/El)/Et),ur=gt.project(pr,nr),mr=Kt*tu+rr;iu[2*mr+0]=Math.round((ur.x*yt.scale-yt.x)*Cn),iu[2*mr+1]=Math.round((ur.y*yt.scale-yt.y)*Cn)}Xu.fill(0),Av.fill(0);for(let Kt=2045;Kt>=0;Kt--){const rr=4*Kt,pr=Zu[rr+0],nr=Zu[rr+1],ur=Zu[rr+2],mr=Zu[rr+3],fr=pr+ur>>1,Rr=nr+mr>>1,Ir=fr+Rr-nr,Ur=Rr+pr-fr,en=nr*tu+pr,Br=mr*tu+ur,qr=Rr*tu+fr,Wr=Math.hypot((iu[2*en+0]+iu[2*Br+0])/2-iu[2*qr+0],(iu[2*en+1]+iu[2*Br+1])/2-iu[2*qr+1])>=16;Xu[qr]=Xu[qr]||(Wr?1:0),Kt<1022&&(Xu[qr]=Xu[qr]||Xu[(nr+Ur>>1)*tu+(pr+Ir>>1)]||Xu[(mr+Ur>>1)*tu+(ur+Ir>>1)])}const Pt=new Hr,Rt=new wn;let zt=0;function Ot(Kt,rr){const pr=rr*tu+Kt;return Av[pr]===0&&(Pt.emplaceBack(iu[2*pr+0],iu[2*pr+1],Kt*Cn/El,rr*Cn/El),Av[pr]=++zt),Av[pr]-1}function Ut(Kt,rr,pr,nr,ur,mr){const fr=Kt+pr>>1,Rr=rr+nr>>1;if(Math.abs(Kt-ur)+Math.abs(rr-mr)>1&&Xu[Rr*tu+fr])Ut(ur,mr,Kt,rr,fr,Rr),Ut(pr,nr,ur,mr,fr,Rr);else{const Ir=Ot(Kt,rr),Ur=Ot(pr,nr),en=Ot(ur,mr);Rt.emplaceBack(Ir,Ur,en)}}return Ut(0,0,El,El,El,0),Ut(El,El,0,0,0,El),{vertices:Pt,indices:Rt}}(this.tileID.canonical,_e);ot=ht.vertices,lt=ht.indices}else{ot=new Hr,lt=new wn;for(const{x:pt,y:gt}of it)ot.emplaceBack(pt,gt,0,0);const ht=A_(ot.int16,void 0,4);for(let pt=0;pt<ht.length;pt+=3)lt.emplaceBack(ht[pt],ht[pt+1],ht[pt+2])}this._tileBoundsBuffer=a.createVertexBuffer(ot,uw.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(lt),this._tileBoundsSegments=Ho.simpleSegment(0,0,ot.length,lt.length)}_makeGlobeTileDebugBuffers(a,_e){const it=_e.projection;if(!it||it.name!=="globe"||_e.freezeTileCoverage)return;const ot=this.tileID.canonical,lt=Oy(D1(ot,_e)),ht=vm(_e.zoom);let pt;ht>0&&(pt=r_(new Float64Array(16),_e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,ot,_e,lt,pt,ht),this._makeGlobeTileDebugTextBuffer(a,ot,_e,lt,pt,ht)}_globePoint(a,_e,it,ot,lt,ht,pt){let gt=zy(a,_e,it);if(ht){const yt=1<<it.z,Et=_h(ot.center.lng),Pt=eu(ot.center.lat),Rt=(it.x+.5)/yt-Et;let zt=0;Rt>.5?zt=-1:Rt<-.5&&(zt=1);let Ot=(a/Cn+it.x)/yt+zt,Ut=(_e/Cn+it.y)/yt;Ot=(Ot-Et)*ot._pixelsPerMercatorPixel+Et,Ut=(Ut-Pt)*ot._pixelsPerMercatorPixel+Pt;const Kt=[Ot*ot.worldSize,Ut*ot.worldSize,0];jo(Kt,Kt,ht),gt=Ip(gt,Kt,pt)}return jo(gt,gt,lt)}_makeGlobeTileDebugBorderBuffer(a,_e,it,ot,lt,ht){const pt=new Jr,gt=new Us,yt=new Ar,Et=(Rt,zt,Ot,Ut,Kt)=>{const rr=(Ot-Rt)/(Kt-1),pr=(Ut-zt)/(Kt-1),nr=pt.length;for(let ur=0;ur<Kt;ur++){const mr=Rt+ur*rr,fr=zt+ur*pr;pt.emplaceBack(mr,fr);const Rr=this._globePoint(mr,fr,_e,it,ot,lt,ht);yt.emplaceBack(Rr[0],Rr[1],Rr[2]),gt.emplaceBack(nr+ur)}},Pt=Cn;Et(0,0,Pt,0,16),Et(Pt,0,Pt,Pt,16),Et(Pt,Pt,0,Pt,16),Et(0,Pt,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(gt),this._tileDebugBuffer=a.createVertexBuffer(pt,Dy.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(yt,M1.members),this._tileDebugSegments=Ho.simpleSegment(0,0,pt.length,gt.length)}_makeGlobeTileDebugTextBuffer(a,_e,it,ot,lt,ht){const pt=Cn/4,gt=new Jr,yt=new wn,Et=new Ar,Pt=25;yt.reserve(32),gt.reserve(Pt),Et.reserve(Pt);const Rt=(zt,Ot)=>Pt*zt+Ot;for(let zt=0;zt<Pt;zt++){const Ot=zt*pt;for(let Ut=0;Ut<Pt;Ut++){const Kt=Ut*pt;gt.emplaceBack(Kt,Ot);const rr=this._globePoint(Kt,Ot,_e,it,ot,lt,ht);Et.emplaceBack(rr[0],rr[1],rr[2])}}for(let zt=0;zt<4;zt++)for(let Ot=0;Ot<4;Ot++){const Ut=Rt(zt,Ot),Kt=Rt(zt,Ot+1),rr=Rt(zt+1,Ot),pr=Rt(zt+1,Ot+1);yt.emplaceBack(Ut,Kt,rr),yt.emplaceBack(rr,Kt,pr)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(yt),this._tileDebugTextBuffer=a.createVertexBuffer(gt,Dy.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(Et,M1.members),this._tileDebugTextSegments=Ho.simpleSegment(0,0,Pt,32)}}class aT{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,_e,it){const ot=String(_e);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][ot]=this.stateChanges[a][ot]||{},Yr(this.stateChanges[a][ot],it),this.deletedStates[a]===null){this.deletedStates[a]={};for(const lt in this.state[a])lt!==ot&&(this.deletedStates[a][lt]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][ot]===null){this.deletedStates[a][ot]={};for(const lt in this.state[a][ot])it[lt]||(this.deletedStates[a][ot][lt]=null)}else for(const lt in it)this.deletedStates[a]&&this.deletedStates[a][ot]&&this.deletedStates[a][ot][lt]===null&&delete this.deletedStates[a][ot][lt]}removeFeatureState(a,_e,it){if(this.deletedStates[a]===null)return;const ot=String(_e);if(this.deletedStates[a]=this.deletedStates[a]||{},it&&_e!==void 0)this.deletedStates[a][ot]!==null&&(this.deletedStates[a][ot]=this.deletedStates[a][ot]||{},this.deletedStates[a][ot][it]=null);else if(_e!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][ot])for(it in this.deletedStates[a][ot]={},this.stateChanges[a][ot])this.deletedStates[a][ot][it]=null;else this.deletedStates[a][ot]=null;else this.deletedStates[a]=null}getState(a,_e){const it=String(_e),ot=Yr({},(this.state[a]||{})[it],(this.stateChanges[a]||{})[it]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const lt=this.deletedStates[a][_e];if(lt===null)return{};for(const ht in lt)delete ot[ht]}return ot}initializeTileState(a,_e){a.setFeatureState(this.state,_e)}coalesceChanges(a,_e){const it={};for(const ot in this.stateChanges){this.state[ot]=this.state[ot]||{};const lt={};for(const ht in this.stateChanges[ot])this.state[ot][ht]||(this.state[ot][ht]={}),Yr(this.state[ot][ht],this.stateChanges[ot][ht]),lt[ht]=this.state[ot][ht];it[ot]=lt}for(const ot in this.deletedStates){this.state[ot]=this.state[ot]||{};const lt={};if(this.deletedStates[ot]===null)for(const ht in this.state[ot])lt[ht]={},this.state[ot][ht]={};else for(const ht in this.deletedStates[ot]){if(this.deletedStates[ot][ht]===null)this.state[ot][ht]={};else if(this.state[ot][ht])for(const pt of Object.keys(this.deletedStates[ot][ht]))delete this.state[ot][ht][pt];lt[ht]=this.state[ot][ht]}it[ot]=it[ot]||{},Yr(it[ot],lt)}if(this.stateChanges={},this.deletedStates={},Object.keys(it).length!==0)for(const ot in a)a[ot].setFeatureState(it,_e)}}class pw{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,_e){const it=this.toIdx(a,_e);return{min:this.minimums[it],max:this.maximums[it]}}isLeaf(a,_e){return this.leaves[this.toIdx(a,_e)]}toIdx(a,_e){return _e*this.size+a}}function fw(j,a,_e,it){let ot=0,lt=Number.MAX_VALUE;for(let ht=0;ht<3;ht++)if(Math.abs(it[ht])<1e-15){if(_e[ht]<j[ht]||_e[ht]>a[ht])return null}else{const pt=1/it[ht];let gt=(j[ht]-_e[ht])*pt,yt=(a[ht]-_e[ht])*pt;if(gt>yt){const Et=gt;gt=yt,yt=Et}if(gt>ot&&(ot=gt),yt<lt&&(lt=yt),ot>lt)return null}return ot}function mw(j,a,_e,it,ot,lt,ht,pt,gt,yt,Et){const Pt=it-j,Rt=ot-a,zt=lt-_e,Ot=ht-j,Ut=pt-a,Kt=gt-_e,rr=Et[1]*Kt-Et[2]*Ut,pr=Et[2]*Ot-Et[0]*Kt,nr=Et[0]*Ut-Et[1]*Ot,ur=Pt*rr+Rt*pr+zt*nr;if(Math.abs(ur)<1e-15)return null;const mr=1/ur,fr=yt[0]-j,Rr=yt[1]-a,Ir=yt[2]-_e,Ur=(fr*rr+Rr*pr+Ir*nr)*mr;if(Ur<0||Ur>1)return null;const en=Rr*zt-Ir*Rt,Br=Ir*Pt-fr*zt,qr=fr*Rt-Rr*Pt,Wr=(Et[0]*en+Et[1]*Br+Et[2]*qr)*mr;return Wr<0||Ur+Wr>1?null:(Ot*en+Ut*Br+Kt*qr)*mr}function gw(j,a,_e){return(j-a)/(_e-a)}function yw(j,a,_e,it,ot,lt,ht,pt,gt){const yt=1<<_e,Et=lt-it,Pt=ht-ot,Rt=(j+1)/yt*Et+it,zt=(a+0)/yt*Pt+ot,Ot=(a+1)/yt*Pt+ot;pt[0]=(j+0)/yt*Et+it,pt[1]=zt,gt[0]=Rt,gt[1]=Ot}class vw{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const _e=function(lt){const ht=Math.ceil(Math.log2(lt.dim/8)),pt=[];let gt=Math.ceil(Math.pow(2,ht));const yt=1/gt,Et=(zt,Ot,Ut,Kt,rr)=>{const pr=Kt?1:0,nr=(zt+1)*Ut-pr,ur=Ot*Ut,mr=(Ot+1)*Ut-pr;rr[0]=zt*Ut,rr[1]=ur,rr[2]=nr,rr[3]=mr};let Pt=new pw(gt);const Rt=[];for(let zt=0;zt<gt*gt;zt++){Et(zt%gt,Math.floor(zt/gt),yt,!1,Rt);const Ot=Yu(Rt[0],Rt[1],lt),Ut=Yu(Rt[2],Rt[1],lt),Kt=Yu(Rt[2],Rt[3],lt),rr=Yu(Rt[0],Rt[3],lt);Pt.minimums.push(Math.min(Ot,Ut,Kt,rr)),Pt.maximums.push(Math.max(Ot,Ut,Kt,rr)),Pt.leaves.push(1)}for(pt.push(Pt),gt/=2;gt>=1;gt/=2){const zt=pt[pt.length-1];Pt=new pw(gt);for(let Ot=0;Ot<gt*gt;Ot++){Et(Ot%gt,Math.floor(Ot/gt),2,!0,Rt);const Ut=zt.getElevation(Rt[0],Rt[1]),Kt=zt.getElevation(Rt[2],Rt[1]),rr=zt.getElevation(Rt[2],Rt[3]),pr=zt.getElevation(Rt[0],Rt[3]),nr=zt.isLeaf(Rt[0],Rt[1]),ur=zt.isLeaf(Rt[2],Rt[1]),mr=zt.isLeaf(Rt[2],Rt[3]),fr=zt.isLeaf(Rt[0],Rt[3]),Rr=Math.min(Ut.min,Kt.min,rr.min,pr.min),Ir=Math.max(Ut.max,Kt.max,rr.max,pr.max),Ur=nr&&ur&&mr&&fr;Pt.maximums.push(Ir),Pt.minimums.push(Rr),Pt.leaves.push(Ir-Rr<=5&&Ur?1:0)}pt.push(Pt)}return pt}(this.dem),it=_e.length-1,ot=_e[it];this._addNode(ot.minimums[0],ot.maximums[0],ot.leaves[0]),this._construct(_e,0,0,it,0)}raycastRoot(a,_e,it,ot,lt,ht,pt=1){return fw([a,_e,-100],[it,ot,this.maximums[0]*pt],lt,ht)}raycast(a,_e,it,ot,lt,ht,pt=1){if(!this.nodeCount)return null;const gt=this.raycastRoot(a,_e,it,ot,lt,ht,pt);if(gt==null)return null;const yt=[],Et=[],Pt=[],Rt=[],zt=[{idx:0,t:gt,nodex:0,nodey:0,depth:0}];for(;zt.length>0;){const{idx:Ot,t:Ut,nodex:Kt,nodey:rr,depth:pr}=zt.pop();if(this.leaves[Ot]){yw(Kt,rr,pr,a,_e,it,ot,Pt,Rt);const ur=1<<pr,mr=(Kt+0)/ur,fr=(Kt+1)/ur,Rr=(rr+0)/ur,Ir=(rr+1)/ur,Ur=Yu(mr,Rr,this.dem)*pt,en=Yu(fr,Rr,this.dem)*pt,Br=Yu(fr,Ir,this.dem)*pt,qr=Yu(mr,Ir,this.dem)*pt,Wr=mw(Pt[0],Pt[1],Ur,Rt[0],Pt[1],en,Rt[0],Rt[1],Br,lt,ht),Kr=mw(Rt[0],Rt[1],Br,Pt[0],Rt[1],qr,Pt[0],Pt[1],Ur,lt,ht),sn=Math.min(Wr!==null?Wr:Number.MAX_VALUE,Kr!==null?Kr:Number.MAX_VALUE);if(sn!==Number.MAX_VALUE)return sn;{const Nr=Ly([],lt,ht,Ut);if(_w(Ur,en,qr,Br,gw(Nr[0],Pt[0],Rt[0]),gw(Nr[1],Pt[1],Rt[1]))>=Nr[2])return Ut}continue}let nr=0;for(let ur=0;ur<this._siblingOffset.length;ur++){yw((Kt<<1)+this._siblingOffset[ur][0],(rr<<1)+this._siblingOffset[ur][1],pr+1,a,_e,it,ot,Pt,Rt),Pt[2]=-100,Rt[2]=this.maximums[this.childOffsets[Ot]+ur]*pt;const mr=fw(Pt,Rt,lt,ht);if(mr!=null){const fr=mr;yt[ur]=fr;let Rr=!1;for(let Ir=0;Ir<nr&&!Rr;Ir++)fr>=yt[Et[Ir]]&&(Et.splice(Ir,0,ur),Rr=!0);Rr||(Et[nr]=ur),nr++}}for(let ur=0;ur<nr;ur++){const mr=Et[ur];zt.push({idx:this.childOffsets[Ot]+mr,t:yt[mr],nodex:(Kt<<1)+this._siblingOffset[mr][0],nodey:(rr<<1)+this._siblingOffset[mr][1],depth:pr+1})}}return null}_addNode(a,_e,it){return this.minimums.push(a),this.maximums.push(_e),this.leaves.push(it),this.childOffsets.push(0),this.nodeCount++}_construct(a,_e,it,ot,lt){if(a[ot].isLeaf(_e,it)===1)return;this.childOffsets[lt]||(this.childOffsets[lt]=this.nodeCount);const ht=ot-1,pt=a[ht];let gt=0,yt=0;for(let Et=0;Et<this._siblingOffset.length;Et++){const Pt=2*_e+this._siblingOffset[Et][0],Rt=2*it+this._siblingOffset[Et][1],zt=pt.getElevation(Pt,Rt),Ot=pt.isLeaf(Pt,Rt),Ut=this._addNode(zt.min,zt.max,Ot);Ot&&(gt|=1<<Et),yt||(yt=Ut)}for(let Et=0;Et<this._siblingOffset.length;Et++)gt&1<<Et||this._construct(a,2*_e+this._siblingOffset[Et][0],2*it+this._siblingOffset[Et][1],ht,yt+Et)}}function _w(j,a,_e,it,ot,lt){return Kn(Kn(j,_e,lt),Kn(a,it,lt),ot)}function Yu(j,a,_e){const it=_e.dim,ot=Nt(j*it-.5,0,it-1),lt=Nt(a*it-.5,0,it-1),ht=Math.floor(ot),pt=Math.floor(lt),gt=Math.min(ht+1,it-1),yt=Math.min(pt+1,it-1);return _w(_e.get(ht,pt),_e.get(gt,pt),_e.get(ht,yt),_e.get(gt,yt),ot-ht,lt-pt)}const xw={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function lT(j,a,_e){return(256*j*256+256*a+_e)/10-1e4}function cT(j,a,_e){return 256*j+a+_e/256-32768}class Iv{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,_e,it,ot=!1,lt=!1){if(this.uid=a,_e.height!==_e.width)throw new RangeError("DEM tiles must be square");if(it&&it!=="mapbox"&&it!=="terrarium")return Xn(`"${it}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=_e.height;const ht=this.dim=_e.height-2,pt=new Uint32Array(_e.data.buffer);if(this.pixels=new Uint8Array(_e.data.buffer),this.encoding=it||"mapbox",this.borderReady=ot,!ot){for(let gt=0;gt<ht;gt++)pt[this._idx(-1,gt)]=pt[this._idx(0,gt)],pt[this._idx(ht,gt)]=pt[this._idx(ht-1,gt)],pt[this._idx(gt,-1)]=pt[this._idx(gt,0)],pt[this._idx(gt,ht)]=pt[this._idx(gt,ht-1)];pt[this._idx(-1,-1)]=pt[this._idx(0,0)],pt[this._idx(ht,-1)]=pt[this._idx(ht-1,0)],pt[this._idx(-1,ht)]=pt[this._idx(0,ht-1)],pt[this._idx(ht,ht)]=pt[this._idx(ht-1,ht-1)],lt&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new vw(this)}get(a,_e,it=!1){it&&(a=Nt(a,-1,this.dim),_e=Nt(_e,-1,this.dim));const ot=4*this._idx(a,_e);return(this.encoding==="terrarium"?cT:lT)(this.pixels[ot],this.pixels[ot+1],this.pixels[ot+2])}static getUnpackVector(a){return xw[a]}get unpackVector(){return xw[this.encoding]}_idx(a,_e){if(a<-1||a>=this.dim+1||_e<-1||_e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(_e+1)*this.stride+(a+1)}static pack(a,_e){const it=[0,0,0,0],ot=Iv.getUnpackVector(_e);let lt=Math.floor((a+ot[3])/ot[2]);return it[2]=lt%256,lt=Math.floor(lt/256),it[1]=lt%256,lt=Math.floor(lt/256),it[0]=lt,it}getPixels(){return new Hs({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,_e,it){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let ot=_e*this.dim,lt=_e*this.dim+this.dim,ht=it*this.dim,pt=it*this.dim+this.dim;switch(_e){case-1:ot=lt-1;break;case 1:lt=ot+1}switch(it){case-1:ht=pt-1;break;case 1:pt=ht+1}const gt=-_e*this.dim,yt=-it*this.dim;for(let Et=ht;Et<pt;Et++)for(let Pt=ot;Pt<lt;Pt++){const Rt=4*this._idx(Pt,Et),zt=4*this._idx(Pt+gt,Et+yt);this.pixels[Rt+0]=a.pixels[zt+0],this.pixels[Rt+1]=a.pixels[zt+1],this.pixels[Rt+2]=a.pixels[zt+2],this.pixels[Rt+3]=a.pixels[zt+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}vn(Iv,"DEMData"),vn(vw,"DemMinMaxQuadTree",{omit:["dem"]});class hT{constructor(a,_e){this.max=a,this.onRemove=_e,this.reset()}reset(){for(const a in this.data)for(const _e of this.data[a])_e.timeout&&clearTimeout(_e.timeout),this.onRemove(_e.value);return this.data={},this.order=[],this}add(a,_e,it){const ot=a.wrapped().key;this.data[ot]===void 0&&(this.data[ot]=[]);const lt={value:_e,timeout:void 0};if(it!==void 0&&(lt.timeout=setTimeout(()=>{this.remove(a,lt)},it)),this.data[ot].push(lt),this.order.push(ot),this.order.length>this.max){const ht=this._getAndRemoveByKey(this.order[0]);ht&&this.onRemove(ht)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const _e=this.data[a].shift();return _e.timeout&&clearTimeout(_e.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),_e.value}getByKey(a){const _e=this.data[a];return _e?_e[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,_e){if(!this.has(a))return this;const it=a.wrapped().key,ot=_e===void 0?0:this.data[it].indexOf(_e),lt=this.data[it][ot];return this.data[it].splice(ot,1),lt.timeout&&clearTimeout(lt.timeout),this.data[it].length===0&&delete this.data[it],this.onRemove(lt.value),this.order.splice(this.order.indexOf(it),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const _e=this._getAndRemoveByKey(this.order[0]);_e&&this.onRemove(_e)}return this}filter(a){const _e=[];for(const it in this.data)for(const ot of this.data[it])a(ot.value)||_e.push(ot);for(const it of _e)this.remove(it.value.tileID,it)}}class Rm{constructor(a,_e,it){this.func=a,this.mask=_e,this.range=it}}Rm.ReadOnly=!1,Rm.ReadWrite=!0,Rm.disabled=new Rm(519,Rm.ReadOnly,[0,1]);const Y_=7680;class K_{constructor(a,_e,it,ot,lt,ht){this.test=a,this.ref=_e,this.mask=it,this.fail=ot,this.depthFail=lt,this.pass=ht}}K_.disabled=new K_({func:519,mask:0},0,0,Y_,Y_,Y_);class ru{constructor(a,_e,it){this.blendFunction=a,this.blendColor=_e,this.mask=it}}ru.Replace=[1,0],ru.disabled=new ru(ru.Replace,No.transparent,[!1,!1,!1,!1]),ru.unblended=new ru(ru.Replace,No.transparent,[!0,!0,!0,!0]),ru.alphaBlended=new ru([1,771],No.transparent,[!0,!0,!0,!0]);const Q_=1029,J_=2305;class Gl{constructor(a,_e,it){this.enable=a,this.mode=_e,this.frontFace=it}}Gl.disabled=new Gl(!1,Q_,J_),Gl.backCCW=new Gl(!0,Q_,J_),Gl.backCW=new Gl(!0,Q_,2304),Gl.frontCW=new Gl(!0,1028,2304),Gl.frontCCW=new Gl(!0,1028,J_);class $p extends Ds{constructor(a,_e,it){super(),this.id=a,this._onlySymbols=it,_e.on("data",ot=>{ot.dataType==="source"&&ot.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&ot.dataType==="source"&&ot.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),_e.on("error",()=>{this._sourceErrored=!0}),this._source=_e,this._tiles={},this._cache=new hT(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=_e.minTileCacheSize,this._maxTileCacheSize=_e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new aT,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const _e=this._tiles[a];if(_e.state!=="loaded"&&_e.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,_e){return a.isSymbolTile=this._onlySymbols,this._source.loadTile(a,_e)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a,()=>{})}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const _e in this._tiles){const it=this._tiles[_e];it.upload(a),it.prepare(this.map.style.imageManager)}}getIds(){return Fr(this._tiles).map(a=>a.tileID).sort(bw).map(a=>a.key)}getRenderableIds(a){const _e=[];for(const it in this._tiles)this._isIdRenderable(+it,a)&&_e.push(this._tiles[it]);return a?_e.sort((it,ot)=>{const lt=it.tileID,ht=ot.tileID,pt=new ir(lt.canonical.x,lt.canonical.y)._rotate(this.transform.angle),gt=new ir(ht.canonical.x,ht.canonical.y)._rotate(this.transform.angle);return lt.overscaledZ-ht.overscaledZ||gt.y-pt.y||gt.x-pt.x}).map(it=>it.tileID.key):_e.map(it=>it.tileID).sort(bw).map(it=>it.key)}hasRenderableParent(a){const _e=this.findLoadedParent(a,0);return!!_e&&this._isIdRenderable(_e.tileID.key)}_isIdRenderable(a,_e){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(_e||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,_e){const it=this._tiles[a];it&&(it.state!=="loading"&&(it.state=_e),this._loadTile(it,this._tileLoaded.bind(this,it,a,_e)))}_tileLoaded(a,_e,it,ot){if(ot)if(a.state="errored",ot.status!==404)this._source.fire(new Vo(ot,{tile:a}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const lt=this.map.painter.terrain;this.update(this.transform,lt.getScaledDemTileSize(),!0),lt.resetTileLookupCache(this.id)}else this.update(this.transform);else a.timeAdded=un.now(),it==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(_e,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new To("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const _e=this.getRenderableIds();for(let ot=0;ot<_e.length;ot++){const lt=_e[ot];if(a.neighboringTiles&&a.neighboringTiles[lt]){const ht=this.getTileByID(lt);it(a,ht),it(ht,a)}}function it(ot,lt){if(!ot.dem||ot.dem.borderReady)return;ot.needsHillshadePrepare=!0,ot.needsDEMTextureUpload=!0;let ht=lt.tileID.canonical.x-ot.tileID.canonical.x;const pt=lt.tileID.canonical.y-ot.tileID.canonical.y,gt=Math.pow(2,ot.tileID.canonical.z),yt=lt.tileID.key;ht===0&&pt===0||Math.abs(pt)>1||(Math.abs(ht)>1&&(Math.abs(ht+gt)===1?ht+=gt:Math.abs(ht-gt)===1&&(ht-=gt)),lt.dem&&ot.dem&&(ot.dem.backfillBorder(lt.dem,ht,pt),ot.neighboringTiles&&ot.neighboringTiles[yt]&&(ot.neighboringTiles[yt].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,_e,it,ot){for(const lt in this._tiles){let ht=this._tiles[lt];if(ot[lt]||!ht.hasData()||ht.tileID.overscaledZ<=_e||ht.tileID.overscaledZ>it)continue;let pt=ht.tileID;for(;ht&&ht.tileID.overscaledZ>_e+1;){const yt=ht.tileID.scaledTo(ht.tileID.overscaledZ-1);ht=this._tiles[yt.key],ht&&ht.hasData()&&(pt=yt)}let gt=pt;for(;gt.overscaledZ>_e;)if(gt=gt.scaledTo(gt.overscaledZ-1),a[gt.key]){ot[pt.key]=pt;break}}}findLoadedParent(a,_e){if(a.key in this._loadedParentTiles){const it=this._loadedParentTiles[a.key];return it&&it.tileID.overscaledZ>=_e?it:null}for(let it=a.overscaledZ-1;it>=_e;it--){const ot=a.scaledTo(it),lt=this._getLoadedTile(ot);if(lt)return lt}}_getLoadedTile(a){const _e=this._tiles[a.key];return _e&&_e.hasData()?_e:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,_e){_e=_e||this._source.tileSize;const it=Math.ceil(a.width/_e)+1,ot=Math.ceil(a.height/_e)+1,lt=Math.floor(it*ot*5),ht=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,lt):lt,pt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ht):ht;this._cache.setMaxSize(pt)}handleWrapJump(a){const _e=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,_e){const it={};for(const ot in this._tiles){const lt=this._tiles[ot];lt.tileID=lt.tileID.unwrapTo(lt.tileID.wrap+_e),it[lt.tileID.key]=lt}this._tiles=it;for(const ot in this._timers)clearTimeout(this._timers[ot]),delete this._timers[ot];for(const ot in this._tiles)this._setTileReloadTimer(+ot,this._tiles[ot])}}update(a,_e,it){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!it)return;let ot;this.updateCacheSize(a,_e),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?ot=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(pt=>new Ms(pt.canonical.z,pt.wrap,pt.canonical.z,pt.canonical.x,pt.canonical.y)):(ot=a.coveringTiles({tileSize:_e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!it,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(ot=ot.filter(pt=>this._source.hasTile(pt)))):ot=[];const lt=this._updateRetainedTiles(ot);if(ww(this._source.type)&&ot.length!==0){const pt={},gt={},yt=Object.keys(lt);for(const Pt of yt){const Rt=lt[Pt],zt=this._tiles[Pt];if(!zt||zt.fadeEndTime&&zt.fadeEndTime<=un.now())continue;const Ot=this.findLoadedParent(Rt,Math.max(Rt.overscaledZ-$p.maxOverzooming,this._source.minzoom));Ot&&(this._addTile(Ot.tileID),pt[Ot.tileID.key]=Ot.tileID),gt[Pt]=Rt}const Et=ot[ot.length-1].overscaledZ;for(const Pt in this._tiles){const Rt=this._tiles[Pt];if(lt[Pt]||!Rt.hasData())continue;let zt=Rt.tileID;for(;zt.overscaledZ>Et;){zt=zt.scaledTo(zt.overscaledZ-1);const Ot=this._tiles[zt.key];if(Ot&&Ot.hasData()&&gt[zt.key]){lt[Pt]=Rt.tileID;break}}}for(const Pt in pt)lt[Pt]||(this._coveredTiles[Pt]=!0,lt[Pt]=pt[Pt])}for(const pt in lt)this._tiles[pt].clearFadeHold();const ht=function(pt,gt){const yt=[];for(const Et in pt)Et in gt||yt.push(Et);return yt}(this._tiles,lt);for(const pt of ht){const gt=this._tiles[pt];gt.hasSymbolBuckets&&!gt.holdingForFade()?gt.setHoldDuration(this.map._fadeDuration):gt.hasSymbolBuckets&&!gt.symbolFadeFinished()||this._removeTile(+pt)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const _e={};if(a.length===0)return _e;const it={},ot=a.reduce((yt,Et)=>Math.min(yt,Et.overscaledZ),1/0),lt=a[0].overscaledZ,ht=Math.max(lt-$p.maxOverzooming,this._source.minzoom),pt=Math.max(lt+$p.maxUnderzooming,this._source.minzoom),gt={};for(const yt of a){const Et=this._addTile(yt);_e[yt.key]=yt,Et.hasData()||ot<this._source.maxzoom&&(gt[yt.key]=yt)}this._retainLoadedChildren(gt,ot,pt,_e);for(const yt of a){let Et=this._tiles[yt.key];if(Et.hasData())continue;if(yt.canonical.z>=this._source.maxzoom){const Rt=yt.children(this._source.maxzoom)[0],zt=this.getTile(Rt);if(zt&&zt.hasData()){_e[Rt.key]=Rt;continue}}else{const Rt=yt.children(this._source.maxzoom);if(_e[Rt[0].key]&&_e[Rt[1].key]&&_e[Rt[2].key]&&_e[Rt[3].key])continue}let Pt=Et.wasRequested();for(let Rt=yt.overscaledZ-1;Rt>=ht;--Rt){const zt=yt.scaledTo(Rt);if(it[zt.key]||(it[zt.key]=!0,Et=this.getTile(zt),!Et&&Pt&&(Et=this._addTile(zt)),Et&&(_e[zt.key]=zt,Pt=Et.wasRequested(),Et.hasData())))break}}return _e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const _e=[];let it,ot=this._tiles[a].tileID;for(;ot.overscaledZ>0;){if(ot.key in this._loadedParentTiles){it=this._loadedParentTiles[ot.key];break}_e.push(ot.key);const lt=ot.scaledTo(ot.overscaledZ-1);if(it=this._getLoadedTile(lt),it)break;ot=lt}for(const lt of _e)this._loadedParentTiles[lt]=it}}_addTile(a){let _e=this._tiles[a.key];if(_e)return _e;_e=this._cache.getAndRemove(a),_e&&(this._setTileReloadTimer(a.key,_e),_e.tileID=a,this._state.initializeTileState(_e,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,_e)));const it=!!_e;if(!it){const ot=this.map?this.map.painter:null;_e=new X_(a,this._source.tileSize*a.overscaleFactor(),this.transform.tileZoom,ot,this._isRaster),this._loadTile(_e,this._tileLoaded.bind(this,_e,a.key,_e.state))}return _e?(_e.uses++,this._tiles[a.key]=_e,it||this._source.fire(new To("dataloading",{tile:_e,coord:_e.tileID,dataType:"source"})),_e):null}_setTileReloadTimer(a,_e){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const it=_e.getExpiryTimeout();it&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},it))}_removeTile(a){const _e=this._tiles[a];_e&&(_e.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),_e.uses>0||(_e.hasData()&&_e.state!=="reloading"?this._cache.add(_e.tileID,_e,_e.getExpiryTimeout()):(_e.aborted=!0,this._abortTile(_e),this._unloadTile(_e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,_e,it){const ot=[],lt=this.transform;if(!lt)return ot;const ht=lt.projection.name==="globe",pt=_h(lt.center.lng);for(const gt in this._tiles){const yt=this._tiles[gt];if(it&&yt.clearQueryDebugViz(),yt.holdingForFade())continue;let Et;if(ht){const Pt=yt.tileID.canonical;if(Pt.z===0){const Rt=[Math.abs(Nt(pt,...r0(Pt,-1))-pt),Math.abs(Nt(pt,...r0(Pt,1))-pt)];Et=[0,2*Rt.indexOf(Math.min(...Rt))-1]}else{const Rt=[Math.abs(Nt(pt,...r0(Pt,-1))-pt),Math.abs(Nt(pt,...r0(Pt,0))-pt),Math.abs(Nt(pt,...r0(Pt,1))-pt)];Et=[Rt.indexOf(Math.min(...Rt))-1]}}else Et=[0];for(const Pt of Et){const Rt=a.containsTile(yt,lt,_e,Pt);Rt&&ot.push(Rt)}}return ot}getVisibleCoordinates(a){const _e=this.getRenderableIds(a).map(it=>this._tiles[it].tileID);for(const it of _e)it.projMatrix=this.transform.calculateProjMatrix(it.toUnwrapped());return _e}hasTransition(){if(this._source.hasTransition())return!0;if(ww(this._source.type))for(const a in this._tiles){const _e=this._tiles[a];if(_e.fadeEndTime!==void 0&&_e.fadeEndTime>=un.now())return!0}return!1}setFeatureState(a,_e,it){this._state.updateState(a=a||"_geojsonTileLayer",_e,it)}removeFeatureState(a,_e,it){this._state.removeFeatureState(a=a||"_geojsonTileLayer",_e,it)}getFeatureState(a,_e){return this._state.getState(a=a||"_geojsonTileLayer",_e)}setDependencies(a,_e,it){const ot=this._tiles[a];ot&&ot.setDependencies(_e,it)}reloadTilesForDependencies(a,_e){for(const it in this._tiles)this._tiles[it].hasDependency(a,_e)&&this._reloadTile(+it,"reloading");this._cache.filter(it=>!it.hasDependency(a,_e))}_preloadTiles(a,_e){if(!this._sourceLoaded){const pt=()=>{this._sourceLoaded&&(this._source.off("data",pt),this._preloadTiles(a,_e))};return void this._source.on("data",pt)}const it=new Map,ot=Array.isArray(a)?a:[a],lt=this.map.painter.terrain,ht=this.usedForTerrain&&lt?lt.getScaledDemTileSize():this._source.tileSize;for(const pt of ot){const gt=pt.coveringTiles({tileSize:ht,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const yt of gt)it.set(yt.key,yt);this.usedForTerrain&&pt.updateElevation(!1)}ar(Array.from(it.values()),(pt,gt)=>{const yt=new X_(pt,this._source.tileSize*pt.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(yt,Et=>{this._source.type==="raster-dem"&&yt.dem&&this._backfillDEM(yt),gt(Et,yt)})},_e)}}function bw(j,a){const _e=Math.abs(2*j.wrap)-+(j.wrap<0),it=Math.abs(2*a.wrap)-+(a.wrap<0);return j.overscaledZ-a.overscaledZ||it-_e||a.canonical.y-j.canonical.y||a.canonical.x-j.canonical.x}function ww(j){return j==="raster"||j==="image"||j==="video"||j==="custom"}function r0(j,a){const _e=1<<j.z;return[j.x/_e+a,(j.x+1)/_e+a]}$p.maxOverzooming=10,$p.maxUnderzooming=3;class Mv{constructor(a,_e,it){this._demTile=a,this._dem=this._demTile.dem,this._scale=_e,this._offset=it}static create(a,_e,it){const ot=it||a.findDEMTileFor(_e);if(!ot||!ot.dem)return;const lt=ot.dem,ht=ot.tileID,pt=1<<_e.canonical.z-ht.canonical.z;return new Mv(ot,ot.tileSize/Cn/pt,[(_e.canonical.x/pt-ht.canonical.x)*lt.dim,(_e.canonical.y/pt-ht.canonical.y)*lt.dim])}tileCoordToPixel(a,_e){const it=_e*this._scale+this._offset[1],ot=Math.floor(a*this._scale+this._offset[0]),lt=Math.floor(it);return new ir(ot,lt)}getElevationAt(a,_e,it,ot){const lt=a*this._scale+this._offset[0],ht=_e*this._scale+this._offset[1],pt=Math.floor(lt),gt=Math.floor(ht),yt=this._dem;return ot=!!ot,it?Kn(Kn(yt.get(pt,gt,ot),yt.get(pt,gt+1,ot),ht-gt),Kn(yt.get(pt+1,gt,ot),yt.get(pt+1,gt+1,ot),ht-gt),lt-pt):yt.get(pt,gt,ot)}getElevationAtPixel(a,_e,it){return this._dem.get(a,_e,!!it)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*Vl(1,a)*this._dem.stride}}class Ew{constructor(a,_e){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new uu(Cn,16,0),this.featureIndexArray=new Ep,this.promoteId=_e}insert(a,_e,it,ot,lt,ht=0){const pt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(it,ot,lt,ht);const gt=this.grid;for(let yt=0;yt<_e.length;yt++){const Et=_e[yt],Pt=[1/0,1/0,-1/0,-1/0];for(let Rt=0;Rt<Et.length;Rt++){const zt=Et[Rt];Pt[0]=Math.min(Pt[0],zt.x),Pt[1]=Math.min(Pt[1],zt.y),Pt[2]=Math.max(Pt[2],zt.x),Pt[3]=Math.max(Pt[3],zt.y)}Pt[0]<Cn&&Pt[1]<Cn&&Pt[2]>=0&&Pt[3]>=0&&gt.insert(pt,Pt[0],Pt[1],Pt[2],Pt[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new R_(new yv(this.rawTileData)).layers,this.sourceLayerCoder=new lw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,_e,it,ot){this.loadVTLayers();const lt=a.params||{},ht=lm(lt.filter),pt=a.tileResult,gt=a.transform,yt=pt.bufferedTilespaceBounds,Et=this.grid.query(yt.min.x,yt.min.y,yt.max.x,yt.max.y,(Ot,Ut,Kt,rr)=>X1(pt.bufferedTilespaceGeometry,Ot,Ut,Kt,rr));Et.sort(uT);let Pt=null;gt.elevation&&Et.length>0&&(Pt=Mv.create(gt.elevation,this.tileID));const Rt={};let zt;for(let Ot=0;Ot<Et.length;Ot++){const Ut=Et[Ot];if(Ut===zt)continue;zt=Ut;const Kt=this.featureIndexArray.get(Ut);let rr=null;this.loadMatchingFeature(Rt,Kt,ht,lt.layers,lt.availableImages,_e,it,ot,(pr,nr,ur,mr=0)=>(rr||(rr=vu(pr,this.tileID.canonical,a.tileTransform)),nr.queryIntersectsFeature(pt,pr,ur,rr,this.z,a.transform,a.pixelPosMatrix,Pt,mr)))}return Rt}loadMatchingFeature(a,_e,it,ot,lt,ht,pt,gt,yt){const{featureIndex:Et,bucketIndex:Pt,sourceLayerIndex:Rt,layoutVertexArrayOffset:zt}=_e,Ot=this.bucketLayerIDs[Pt];if(ot&&!function(pr,nr){for(let ur=0;ur<pr.length;ur++)if(nr.indexOf(pr[ur])>=0)return!0;return!1}(ot,Ot))return;const Ut=this.sourceLayerCoder.decode(Rt),Kt=this.vtLayers[Ut].feature(Et);if(it.needGeometry){const pr=Mp(Kt,!0);if(!it.filter(new kt(this.tileID.overscaledZ),pr,this.tileID.canonical))return}else if(!it.filter(new kt(this.tileID.overscaledZ),Kt))return;const rr=this.getId(Kt,Ut);for(let pr=0;pr<Ot.length;pr++){const nr=Ot[pr];if(ot&&ot.indexOf(nr)<0)continue;const ur=ht[nr];if(!ur)continue;let mr={};rr!==void 0&&gt&&(mr=gt.getState(ur.sourceLayer||"_geojsonTileLayer",rr));const fr=Yr({},pt[nr]);fr.paint=Sw(fr.paint,ur.paint,Kt,mr,lt),fr.layout=Sw(fr.layout,ur.layout,Kt,mr,lt);const Rr=!yt||yt(Kt,ur,mr,zt);if(!Rr)continue;const Ir=new cw(Kt,this.z,this.x,this.y,rr);Ir.layer=fr;let Ur=a[nr];Ur===void 0&&(Ur=a[nr]=[]),Ur.push({featureIndex:Et,feature:Ir,intersectionZ:Rr})}}lookupSymbolFeatures(a,_e,it,ot,lt,ht,pt,gt){const yt={};this.loadVTLayers();const Et=lm(lt);for(const Pt of a)this.loadMatchingFeature(yt,{bucketIndex:it,sourceLayerIndex:ot,featureIndex:Pt,layoutVertexArrayOffset:0},Et,ht,pt,gt,_e);return yt}loadFeature(a){const{featureIndex:_e,sourceLayerIndex:it}=a;this.loadVTLayers();const ot=this.sourceLayerCoder.decode(it),lt=this.vtFeatures[ot];if(lt[_e])return lt[_e];const ht=this.vtLayers[ot].feature(_e);return lt[_e]=ht,ht}hasLayer(a){for(const _e of this.bucketLayerIDs)for(const it of _e)if(a===it)return!0;return!1}getId(a,_e){let it=a.id;if(this.promoteId){const ot=typeof this.promoteId=="string"?this.promoteId:this.promoteId[_e];ot!=null&&(it=a.properties[ot]),typeof it=="boolean"&&(it=Number(it))}return it}}function Sw(j,a,_e,it,ot){return An(j,(lt,ht)=>{const pt=a instanceof tr?a.get(ht):null;return pt&&pt.evaluate?pt.evaluate(_e,it,ot):pt})}function uT(j,a){return a-j}vn(Ew,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Tw{constructor(a,_e){this.width=a,this.height=_e,this.nextRow=0,this.image=new _u({width:a,height:_e}),this.positions={},this.uploaded=!1}getDash(a,_e){const it=this.getKey(a,_e);return this.positions[it]}trim(){const a=this.width,_e=this.height=Ln(this.nextRow);this.image.resize({width:a,height:_e})}getKey(a,_e){return a.join(",")+_e}getDashRanges(a,_e,it){const ot=[];let lt=a.length%2==1?-a[a.length-1]*it:0,ht=a[0]*it,pt=!0;ot.push({left:lt,right:ht,isDash:pt,zeroLength:a[0]===0});let gt=a[0];for(let yt=1;yt<a.length;yt++){pt=!pt;const Et=a[yt];lt=gt*it,gt+=Et,ht=gt*it,ot.push({left:lt,right:ht,isDash:pt,zeroLength:Et===0})}return ot}addRoundDash(a,_e,it){const ot=_e/2;for(let lt=-it;lt<=it;lt++){const ht=this.width*(this.nextRow+it+lt);let pt=0,gt=a[pt];for(let yt=0;yt<this.width;yt++){yt/gt.right>1&&(gt=a[++pt]);const Et=Math.abs(yt-gt.left),Pt=Math.abs(yt-gt.right),Rt=Math.min(Et,Pt);let zt;const Ot=lt/it*(ot+1);if(gt.isDash){const Ut=ot-Math.abs(Ot);zt=Math.sqrt(Rt*Rt+Ut*Ut)}else zt=ot-Math.sqrt(Rt*Rt+Ot*Ot);this.image.data[ht+yt]=Math.max(0,Math.min(255,zt+128))}}}addRegularDash(a,_e){for(let gt=a.length-1;gt>=0;--gt){const yt=a[gt],Et=a[gt+1];yt.zeroLength?a.splice(gt,1):Et&&Et.isDash===yt.isDash&&(Et.left=yt.left,a.splice(gt,1))}const it=a[0],ot=a[a.length-1];it.isDash===ot.isDash&&(it.left=ot.left-this.width,ot.right=it.right+this.width);const lt=this.width*this.nextRow;let ht=0,pt=a[ht];for(let gt=0;gt<this.width;gt++){gt/pt.right>1&&(pt=a[++ht]);const yt=Math.abs(gt-pt.left),Et=Math.abs(gt-pt.right),Pt=Math.min(yt,Et);this.image.data[lt+gt]=Math.max(0,Math.min(255,(pt.isDash?Pt:-Pt)+_e+128))}}addDash(a,_e){const it=this.getKey(a,_e);if(this.positions[it])return this.positions[it];const ot=_e==="round",lt=ot?7:0,ht=2*lt+1;if(this.nextRow+ht>this.height)return Xn("LineAtlas out of space"),null;a.length===0&&a.push(1);let pt=0;for(let Et=0;Et<a.length;Et++)a[Et]<0&&(Xn("Negative value is found in line dasharray, replacing values with 0"),a[Et]=0),pt+=a[Et];if(pt!==0){const Et=this.width/pt,Pt=this.getDashRanges(a,this.width,Et);ot?this.addRoundDash(Pt,Et,lt):this.addRegularDash(Pt,_e==="square"?.5*Et:0)}const gt=this.nextRow+lt;this.nextRow+=ht;const yt={tl:[gt,lt],br:[pt,0]};return this.positions[it]=yt,yt}}vn(Tw,"LineAtlas");const kw=1*Ul;class Cw{constructor(a){const _e={},it=[];for(const pt in a){const gt=a[pt],yt=_e[pt]={};for(const Et in gt.glyphs){const Pt=gt.glyphs[+Et];if(!Pt||Pt.bitmap.width===0||Pt.bitmap.height===0)continue;const Rt=Pt.metrics.localGlyph?kw:1,zt={x:0,y:0,w:Pt.bitmap.width+2*Rt,h:Pt.bitmap.height+2*Rt};it.push(zt),yt[Et]=zt}}const{w:ot,h:lt}=O_(it),ht=new _u({width:ot||1,height:lt||1});for(const pt in a){const gt=a[pt];for(const yt in gt.glyphs){const Et=gt.glyphs[+yt];if(!Et||Et.bitmap.width===0||Et.bitmap.height===0)continue;const Pt=_e[pt][yt],Rt=Et.metrics.localGlyph?kw:1;_u.copy(Et.bitmap,ht,{x:0,y:0},{x:Pt.x+Rt,y:Pt.y+Rt},Et.bitmap)}}this.image=ht,this.positions=_e}}vn(Cw,"GlyphAtlas");class dT{constructor(a){this.tileID=new Ms(a.tileID.overscaledZ,a.tileID.wrap,a.tileID.canonical.z,a.tileID.canonical.x,a.tileID.canonical.y),this.tileZoom=a.tileZoom,this.uid=a.uid,this.zoom=a.zoom,this.canonical=a.tileID.canonical,this.pixelRatio=a.pixelRatio,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=a.showCollisionBoxes,this.collectResourceTiming=!!a.collectResourceTiming,this.returnDependencies=!!a.returnDependencies,this.promoteId=a.promoteId,this.enableTerrain=!!a.enableTerrain,this.isSymbolTile=a.isSymbolTile,this.tileTransform=Dp(a.tileID.canonical,a.projection),this.projection=a.projection}parse(a,_e,it,ot,lt){this.status="parsing",this.data=a,this.collisionBoxArray=new ao;const ht=new lw(Object.keys(a.layers).sort()),pt=new Ew(this.tileID,this.promoteId);pt.bucketLayerIDs=[];const gt={},yt=new Tw(256,256),Et={featureIndex:pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:yt,availableImages:it},Pt=_e.familiesBySource[this.source];for(const mr in Pt){const fr=a.layers[mr];if(!fr)continue;let Rr=!1,Ir=!1;for(const Br of Pt[mr])Br[0].type==="symbol"?Rr=!0:Ir=!0;if(this.isSymbolTile===!0&&!Rr||this.isSymbolTile===!1&&!Ir)continue;fr.version===1&&Xn(`Vector tile source "${this.source}" layer "${mr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ur=ht.encode(mr),en=[];for(let Br=0;Br<fr.length;Br++){const qr=fr.feature(Br),Wr=pt.getId(qr,mr);en.push({feature:qr,id:Wr,index:Br,sourceLayerIndex:Ur})}for(const Br of Pt[mr]){const qr=Br[0];this.isSymbolTile!==void 0&&qr.type==="symbol"!==this.isSymbolTile||qr.minzoom&&this.zoom<Math.floor(qr.minzoom)||qr.maxzoom&&this.zoom>=qr.maxzoom||qr.visibility!=="none"&&(e1(Br,this.zoom,it),(gt[qr.id]=qr.createBucket({index:pt.bucketLayerIDs.length,layers:Br,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ur,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:it})).populate(en,Et,this.tileID.canonical,this.tileTransform),pt.bucketLayerIDs.push(Br.map(Wr=>Wr.id)))}}let Rt,zt,Ot,Ut;yt.trim();const Kt={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},rr=()=>{if(Rt)return lt(Rt);if(zt&&Ot&&Ut){const mr=new Cw(zt),fr=new $x(Ot,Ut);for(const Rr in gt){const Ir=gt[Rr];Ir instanceof Wu?(e1(Ir.layers,this.zoom,it),BS(Ir,zt,mr.positions,Ot,fr.iconPositions,this.showCollisionBoxes,it,this.tileID.canonical,this.tileZoom,this.projection)):Ir.hasPattern&&(Ir instanceof fv||Ir instanceof cv||Ir instanceof Hy)&&(e1(Ir.layers,this.zoom,it),Ir.addFeatures(Et,this.tileID.canonical,fr.patternPositions,it,this.tileTransform))}this.status="done",lt(null,{buckets:Fr(gt).filter(Rr=>!Rr.isEmpty()),featureIndex:pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mr.image,lineAtlas:yt,imageAtlas:fr,glyphMap:this.returnDependencies?zt:null,iconMap:this.returnDependencies?Ot:null,glyphPositions:this.returnDependencies?mr.positions:null})}},pr=An(Et.glyphDependencies,mr=>Object.keys(mr).map(Number));Object.keys(pr).length?ot.send("getGlyphs",{uid:this.uid,stacks:pr},(mr,fr)=>{Rt||(Rt=mr,zt=fr,rr())},void 0,!1,Kt):zt={};const nr=Object.keys(Et.iconDependencies);nr.length?ot.send("getImages",{icons:nr,source:this.source,tileID:this.tileID,type:"icons"},(mr,fr)=>{Rt||(Rt=mr,Ot=fr,rr())},void 0,!1,Kt):Ot={};const ur=Object.keys(Et.patternDependencies);ur.length?ot.send("getImages",{icons:ur,source:this.source,tileID:this.tileID,type:"patterns"},(mr,fr)=>{Rt||(Rt=mr,Ut=fr,rr())},void 0,!1,Kt):Ut={},rr()}}function e1(j,a,_e){const it=new kt(a);for(const ot of j)ot.recalculate(it,_e)}class Pw{constructor(a){this.entries={},this.scheduler=a}request(a,_e,it,ot){const lt=this.entries[a]=this.entries[a]||{callbacks:[]};if(lt.result){const[ht,pt]=lt.result;return this.scheduler?this.scheduler.add(()=>{ot(ht,pt)},_e):ot(ht,pt),()=>{}}return lt.callbacks.push(ot),lt.cancel||(lt.cancel=it((ht,pt)=>{lt.result=[ht,pt];for(const gt of lt.callbacks)this.scheduler?this.scheduler.add(()=>{gt(ht,pt)},_e):gt(ht,pt);setTimeout(()=>delete this.entries[a],3e3)})),()=>{lt.result||(lt.callbacks=lt.callbacks.filter(ht=>ht!==ot),lt.callbacks.length||(lt.cancel(),delete this.entries[a]))}}}function Aw(j,a,_e){const it=JSON.stringify(j.request);return j.data&&(this.deduped.entries[it]={result:[null,j.data]}),this.deduped.request(it,{type:"parseTile",isSymbolTile:j.isSymbolTile,zoom:j.tileZoom},ot=>{const lt=Wl(j.request,(ht,pt,gt,yt)=>{ht?ot(ht):pt&&ot(null,{vectorTile:_e?void 0:new R_(new yv(pt)),rawData:pt,cacheControl:gt,expires:yt})});return()=>{lt.cancel(),ot()}},a)}const Iw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class t1{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[_e,it]=new Uint8Array(a,0,2);if(_e!==219)throw new Error("Data does not appear to be in a KDBush format.");const ot=it>>4;if(ot!==1)throw new Error(`Got v${ot} data when expected v1.`);const lt=Iw[15&it];if(!lt)throw new Error("Unrecognized array type.");const[ht]=new Uint16Array(a,2,1),[pt]=new Uint32Array(a,4,1);return new t1(pt,ht,lt,a)}constructor(a,_e=64,it=Float64Array,ot){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+_e,2),65535),this.ArrayType=it,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const lt=Iw.indexOf(this.ArrayType),ht=2*a*this.ArrayType.BYTES_PER_ELEMENT,pt=a*this.IndexArrayType.BYTES_PER_ELEMENT,gt=(8-pt%8)%8;if(lt<0)throw new Error(`Unexpected typed array class: ${it}.`);ot&&ot instanceof ArrayBuffer?(this.data=ot,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+pt+gt,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+ht+pt+gt),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+pt+gt,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+lt]),new Uint16Array(this.data,2,1)[0]=_e,new Uint32Array(this.data,4,1)[0]=a)}add(a,_e){const it=this._pos>>1;return this.ids[it]=it,this.coords[this._pos++]=a,this.coords[this._pos++]=_e,it}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return i1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,_e,it,ot){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:lt,coords:ht,nodeSize:pt}=this,gt=[0,lt.length-1,0],yt=[];for(;gt.length;){const Et=gt.pop()||0,Pt=gt.pop()||0,Rt=gt.pop()||0;if(Pt-Rt<=pt){for(let Kt=Rt;Kt<=Pt;Kt++){const rr=ht[2*Kt],pr=ht[2*Kt+1];rr>=a&&rr<=it&&pr>=_e&&pr<=ot&&yt.push(lt[Kt])}continue}const zt=Rt+Pt>>1,Ot=ht[2*zt],Ut=ht[2*zt+1];Ot>=a&&Ot<=it&&Ut>=_e&&Ut<=ot&&yt.push(lt[zt]),(Et===0?a<=Ot:_e<=Ut)&&(gt.push(Rt),gt.push(zt-1),gt.push(1-Et)),(Et===0?it>=Ot:ot>=Ut)&&(gt.push(zt+1),gt.push(Pt),gt.push(1-Et))}return yt}within(a,_e,it){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:ot,coords:lt,nodeSize:ht}=this,pt=[0,ot.length-1,0],gt=[],yt=it*it;for(;pt.length;){const Et=pt.pop()||0,Pt=pt.pop()||0,Rt=pt.pop()||0;if(Pt-Rt<=ht){for(let Kt=Rt;Kt<=Pt;Kt++)Lw(lt[2*Kt],lt[2*Kt+1],a,_e)<=yt&&gt.push(ot[Kt]);continue}const zt=Rt+Pt>>1,Ot=lt[2*zt],Ut=lt[2*zt+1];Lw(Ot,Ut,a,_e)<=yt&&gt.push(ot[zt]),(Et===0?a-it<=Ot:_e-it<=Ut)&&(pt.push(Rt),pt.push(zt-1),pt.push(1-Et)),(Et===0?a+it>=Ot:_e+it>=Ut)&&(pt.push(zt+1),pt.push(Pt),pt.push(1-Et))}return gt}}function i1(j,a,_e,it,ot,lt){if(ot-it<=_e)return;const ht=it+ot>>1;Mw(j,a,ht,it,ot,lt),i1(j,a,_e,it,ht-1,1-lt),i1(j,a,_e,ht+1,ot,1-lt)}function Mw(j,a,_e,it,ot,lt){for(;ot>it;){if(ot-it>600){const yt=ot-it+1,Et=_e-it+1,Pt=Math.log(yt),Rt=.5*Math.exp(2*Pt/3),zt=.5*Math.sqrt(Pt*Rt*(yt-Rt)/yt)*(Et-yt/2<0?-1:1);Mw(j,a,_e,Math.max(it,Math.floor(_e-Et*Rt/yt+zt)),Math.min(ot,Math.floor(_e+(yt-Et)*Rt/yt+zt)),lt)}const ht=a[2*_e+lt];let pt=it,gt=ot;for(n0(j,a,it,_e),a[2*ot+lt]>ht&&n0(j,a,it,ot);pt<gt;){for(n0(j,a,pt,gt),pt++,gt--;a[2*pt+lt]<ht;)pt++;for(;a[2*gt+lt]>ht;)gt--}a[2*it+lt]===ht?n0(j,a,it,gt):(gt++,n0(j,a,gt,ot)),gt<=_e&&(it=gt+1),_e<=gt&&(ot=gt-1)}}function n0(j,a,_e,it){r1(j,_e,it),r1(a,2*_e,2*it),r1(a,2*_e+1,2*it+1)}function r1(j,a,_e){const it=j[a];j[a]=j[_e],j[_e]=it}function Lw(j,a,_e,it){const ot=j-_e,lt=a-it;return ot*ot+lt*lt}_.ARRAY_TYPE=Gs,_.AUTH_ERR_MSG=gr,_.Aabb=Is,_.Actor=class{constructor(j,a,_e){this.target=j,this.parent=a,this.mapId=_e,this.callbacks={},this.cancelCallbacks={},Po(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=zo()?j:ut,this.scheduler=new oT}send(j,a,_e,it,ot=!1,lt){const ht=Math.round(1e18*Math.random()).toString(36).substring(0,10);_e&&(_e.metadata=lt,this.callbacks[ht]=_e);const pt=Mo(this.globalScope)?void 0:[];return this.target.postMessage({id:ht,type:j,hasCallback:!!_e,targetMapId:it,mustQueue:ot,sourceMapId:this.mapId,data:Fu(a,pt)},pt),{cancel:()=>{_e&&delete this.callbacks[ht],this.target.postMessage({id:ht,type:"<cancel>",targetMapId:it,sourceMapId:this.mapId})}}}receive(j){const a=j.data,_e=a.id;if(_e&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){const it=this.cancelCallbacks[_e];delete this.cancelCallbacks[_e],it&&it.cancel()}else if(a.mustQueue||zo()){const it=this.callbacks[_e];this.cancelCallbacks[_e]=this.scheduler.add(()=>this.processTask(_e,a),it&&it.metadata||{type:"message"})}else this.processTask(_e,a)}processTask(j,a){if(a.type==="<response>"){const _e=this.callbacks[j];delete this.callbacks[j],_e&&(a.error?_e(du(a.error)):_e(null,du(a.data)))}else{const _e=Mo(this.globalScope)?void 0:[],it=a.hasCallback?(lt,ht)=>{delete this.cancelCallbacks[j],this.target.postMessage({id:j,type:"<response>",sourceMapId:this.mapId,error:lt?Fu(lt):null,data:Fu(ht,_e)},_e)}:lt=>{},ot=du(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,ot,it);else if(this.parent.getWorkerSource){const lt=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,lt[0],ot.source)[lt[1]](ot,it)}else it(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},_.CanonicalTileID=pv,_.Color=No,_.ColorMode=ru,_.CullFaceMode=Gl,_.DEMData=Iv,_.DataConstantProperty=jt,_.DedupedRequest=Pw,_.DepthMode=Rm,_.EXTENT=Cn,_.Elevation=class{isDataAvailableAtPoint(j){const a=this._source();if(this.isUsingMockSource()||!a||j.y<0||j.y>1)return!1;const _e=a.getSource().maxzoom,it=1<<_e,ot=Math.floor(j.x),lt=Math.floor((j.x-ot)*it),ht=Math.floor(j.y*it),pt=this.findDEMTileFor(new Ms(_e,ot,_e,lt,ht));return!(!pt||!pt.dem)}getAtPointOrZero(j,a=0){return this.getAtPoint(j,a)||0}getAtPoint(j,a,_e=!0){if(this.isUsingMockSource())return null;a==null&&(a=null);const it=this._source();if(!it||j.y<0||j.y>1)return a;const ot=it.getSource().maxzoom,lt=1<<ot,ht=Math.floor(j.x),pt=j.x-ht,gt=new Ms(ot,ht,ot,Math.floor(pt*lt),Math.floor(j.y*lt)),yt=this.findDEMTileFor(gt);if(!yt||!yt.dem)return a;const Et=yt.dem,Pt=1<<yt.tileID.canonical.z,Rt=(pt*Pt-yt.tileID.canonical.x)*Et.dim,zt=(j.y*Pt-yt.tileID.canonical.y)*Et.dim,Ot=Math.floor(Rt),Ut=Math.floor(zt);return(_e?this.exaggeration():1)*Kn(Kn(Et.get(Ot,Ut),Et.get(Ot,Ut+1),zt-Ut),Kn(Et.get(Ot+1,Ut),Et.get(Ot+1,Ut+1),zt-Ut),Rt-Ot)}getAtTileOffset(j,a,_e){const it=1<<j.canonical.z;return this.getAtPointOrZero(new _m(j.wrap+(j.canonical.x+a/Cn)/it,(j.canonical.y+_e/Cn)/it))}getAtTileOffsetFunc(j,a,_e,it){return ot=>{const lt=this.getAtTileOffset(j,ot.x,ot.y),ht=it.upVector(j.canonical,ot.x,ot.y);return Ks(ht,ht,lt*it.upVectorScale(j.canonical,a,_e).metersToTile),ht}}getForTilePoints(j,a,_e,it){if(this.isUsingMockSource())return!1;const ot=Mv.create(this,j,it);return!!ot&&(a.forEach(lt=>{lt[2]=this.exaggeration()*ot.getElevationAt(lt[0],lt[1],_e)}),!0)}getMinMaxForTile(j){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(j);if(!a||!a.dem)return null;const _e=a.dem.tree,it=a.tileID,ot=1<<j.canonical.z-it.canonical.z;let lt=j.canonical.x/ot-it.canonical.x,ht=j.canonical.y/ot-it.canonical.y,pt=0;for(let gt=0;gt<j.canonical.z-it.canonical.z&&!_e.leaves[pt];gt++){lt*=2,ht*=2;const yt=2*Math.floor(ht)+Math.floor(lt);pt=_e.childOffsets[pt]+yt,lt%=1,ht%=1}return{min:this.exaggeration()*_e.minimums[pt],max:this.exaggeration()*_e.maximums[pt]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(j,a,_e){throw new Error("Pure virtual method called.")}pointCoordinate(j){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(j){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},_.ErrorEvent=Vo,_.EvaluationParameters=kt,_.Event=To,_.Evented=Ds,_.FillExtrusionBucket=Hy,_.Frustum=h_,_.FrustumCorners=c_,_.GLOBE_RADIUS=Jl,_.GLOBE_SCALE_MATCH_LATITUDE=45,_.GLOBE_ZOOM_THRESHOLD_MAX=L1,_.GLOBE_ZOOM_THRESHOLD_MIN=u_,_.GlobeSharedBuffers=class{constructor(j){this._createGrid(j),this._createPoles(j)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const j of this._poleSegments)j.destroy();for(const j of this._gridSegments)j.withSkirts.destroy(),j.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const j of this._wireframeSegments)j.destroy()}}_fillGridMeshWithLods(j,a){const _e=new Jr,it=new wn,ot=[],lt=j+1+2,ht=a[0]+1,pt=a[0]+1+(1+a.length),gt=(yt,Et,Pt)=>{let Rt=yt===lt-1?yt-2:yt===0?yt:yt-1;return Rt+=Pt?24575:0,[Rt,Et]};for(let yt=0;yt<lt;++yt)_e.emplaceBack(...gt(yt,0,!0));for(let yt=0;yt<ht;++yt)for(let Et=0;Et<lt;++Et)_e.emplaceBack(...gt(Et,yt,(Et===0||Et===lt-1)&&!0));for(let yt=0;yt<a.length;++yt){const Et=a[yt];for(let Pt=0;Pt<lt;++Pt)_e.emplaceBack(...gt(Pt,Et,!0))}for(let yt=0;yt<a.length;++yt){const Et=it.length,Pt=a[yt]+1+2,Rt=new wn;for(let Ut=0;Ut<Pt-1;Ut++){const Kt=Ut===Pt-2,rr=Kt?lt*(pt-a.length+yt-Ut):lt;for(let pr=0;pr<lt-1;pr++){const nr=Ut*lt+pr;Ut===0||Kt||pr===0||pr===lt-2?(Rt.emplaceBack(nr+1,nr,nr+rr),Rt.emplaceBack(nr+rr,nr+rr+1,nr+1)):(it.emplaceBack(nr+1,nr,nr+rr),it.emplaceBack(nr+rr,nr+rr+1,nr+1))}}const zt=Ho.simpleSegment(0,Et,_e.length,it.length-Et);for(let Ut=0;Ut<Rt.uint16.length;Ut+=3)it.emplaceBack(Rt.uint16[Ut],Rt.uint16[Ut+1],Rt.uint16[Ut+2]);const Ot=Ho.simpleSegment(0,Et,_e.length,it.length-Et);ot.push({withoutSkirts:zt,withSkirts:Ot})}return{vertices:_e,indices:it,segments:ot}}_createGrid(j){const a=this._fillGridMeshWithLods(Ap,$y);this._gridSegments=a.segments,this._gridBuffer=j.createVertexBuffer(a.vertices,Dy.members),this._gridIndexBuffer=j.createIndexBuffer(a.indices,!0)}_createPoles(j){const a=new wn;for(let ot=0;ot<=Ap;ot++)a.emplaceBack(0,ot+1,ot+2);this._poleIndexBuffer=j.createIndexBuffer(a,!0);const _e=new so,it=new so;this._poleSegments=[];for(let ot=0,lt=0;ot<u_;ot++){const ht=360/(1<<ot);_e.emplaceBack(0,-Jl,0,.5,0),it.emplaceBack(0,-Jl,0,.5,1);for(let pt=0;pt<=Ap;pt++){const gt=pt/Ap,yt=Kn(0,ht,gt),[Et,Pt,Rt]=gm(oE,sE,yt,Jl);_e.emplaceBack(Et,Pt,Rt,gt,0),it.emplaceBack(Et,Pt,Rt,gt,1)}this._poleSegments.push(Ho.simpleSegment(lt,0,66,64)),lt+=66}this._poleNorthVertexBuffer=j.createVertexBuffer(_e,I1,!1),this._poleSouthVertexBuffer=j.createVertexBuffer(it,I1,!1)}getGridBuffers(j,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[j].withSkirts:this._gridSegments[j].withoutSkirts]}getPoleBuffers(j){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[j]]}getWirefameBuffers(j,a){if(!this._wireframeSegments){const _e=new as,it=Ap,ot=it+1+2,lt=1;this._wireframeSegments=[];for(let ht=0,pt=0;ht<$y.length;ht++){const gt=$y[ht];for(let Et=lt;Et<gt+lt;Et++)for(let Pt=lt;Pt<it+lt;Pt++){const Rt=Et*ot+Pt;_e.emplaceBack(Rt,Rt+1),_e.emplaceBack(Rt,Rt+ot),_e.emplaceBack(Rt,Rt+ot+1)}const yt=gt*it*3;this._wireframeSegments.push(Ho.simpleSegment(0,pt,(gt+1)*ot,yt)),pt+=yt}this._wireframeIndexBuffer=j.createIndexBuffer(_e)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[a]]}},_.GlyphManager=Pm,_.ImagePosition=B_,_.KDBush=t1,_.LivePerformanceUtils=$m,_.LngLat=lo,_.LngLatBounds=Uu,_.LocalGlyphMode=N_,_.MAX_MERCATOR_LATITUDE=bs,_.MercatorCoordinate=_m,_.ONE_EM=fs,_.OverscaledTileID=Ms,_.PerformanceMarkers=Zl,_.Point=ir,_.Properties=lr,_.RGBAImage=Hs,_.Ray=l_,_.RequestManager=class{constructor(j,a,_e){this._transformRequestFn=j,this._customAccessToken=a,this._silenceAuthErrors=!!_e,this._createSkuToken()}_createSkuToken(){const j=function(){let a="";for(let _e=0;_e<10;_e++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ct,a].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=j.token,this._skuTokenExpiresAt=j.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(j,a){return this._transformRequestFn&&this._transformRequestFn(j,a)||{url:j}}normalizeStyleURL(j,a){if(!wr(j))return j;const _e=cn(j);return _e.path=`/styles/v1${_e.path}`,this._makeAPIURL(_e,this._customAccessToken||a)}normalizeGlyphsURL(j,a){if(!wr(j))return j;const _e=cn(j);return _e.path=`/fonts/v1${_e.path}`,this._makeAPIURL(_e,this._customAccessToken||a)}normalizeSourceURL(j,a,_e,it){if(!wr(j))return j;const ot=cn(j);return ot.path=`/v4/${ot.authority}.json`,ot.params.push("secure"),_e&&ot.params.push(`language=${_e}`),it&&ot.params.push(`worldview=${it}`),this._makeAPIURL(ot,this._customAccessToken||a)}normalizeSpriteURL(j,a,_e,it){const ot=cn(j);return wr(j)?(ot.path=`/styles/v1${ot.path}/sprite${a}${_e}`,this._makeAPIURL(ot,this._customAccessToken||it)):(ot.path+=`${a}${_e}`,tn(ot))}normalizeTileURL(j,a,_e){if(this._isSkuTokenExpired()&&this._createSkuToken(),j&&!wr(j))return j;const it=cn(j);it.path=it.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${a||_e&&it.authority!=="raster"&&_e===512?"@2x":""}${bt.supported?".webp":"$1"}`),it.authority==="raster"?it.path=`/${wt.RASTER_URL_PREFIX}${it.path}`:(it.path=it.path.replace(/^.+\/v4\//,"/"),it.path=`/${wt.TILE_URL_VERSION}${it.path}`);const ot=this._customAccessToken||function(lt){for(const ht of lt){const pt=ht.match(/^access_token=(.*)$/);if(pt)return pt[1]}return null}(it.params)||wt.ACCESS_TOKEN;return wt.REQUIRE_ACCESS_TOKEN&&ot&&this._skuToken&&it.params.push(`sku=${this._skuToken}`),this._makeAPIURL(it,ot)}canonicalizeTileURL(j,a){const _e=cn(j);if(!_e.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!_e.path.match(/\.[\w]+$/))return j;let it="mapbox://";_e.path.match(/^\/raster\/v1\//)?it+=`raster/${_e.path.replace(`/${wt.RASTER_URL_PREFIX}/`,"")}`:it+=`tiles/${_e.path.replace(`/${wt.TILE_URL_VERSION}/`,"")}`;let ot=_e.params;return a&&(ot=ot.filter(lt=>!lt.match(/^access_token=/))),ot.length&&(it+=`?${ot.join("&")}`),it}canonicalizeTileset(j,a){const _e=!!a&&wr(a),it=[];for(const ot of j.tiles||[])Pr(ot)?it.push(this.canonicalizeTileURL(ot,_e)):it.push(ot);return it}_makeAPIURL(j,a){const _e="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",it=cn(wt.API_URL);if(j.protocol=it.protocol,j.authority=it.authority,j.protocol==="http"){const ot=j.params.indexOf("secure");ot>=0&&j.params.splice(ot,1)}if(it.path!=="/"&&(j.path=`${it.path}${j.path}`),!wt.REQUIRE_ACCESS_TOKEN)return tn(j);if(a=a||wt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!a)throw new Error(`An API access token is required to use Mapbox GL. ${_e}`);if(a[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${_e}`)}return j.params=j.params.filter(ot=>ot.indexOf("access_token")===-1),j.params.push(`access_token=${a||""}`),tn(j)}},_.ResourceType=Ts,_.SegmentVector=Ho,_.SourceCache=$p,_.StencilMode=K_,_.StructArrayLayout1ui2=Us,_.StructArrayLayout2f1f2i16=Pn,_.StructArrayLayout2i4=Jr,_.StructArrayLayout2ui4=as,_.StructArrayLayout3f12=Un,_.StructArrayLayout3ui6=wn,_.StructArrayLayout4i8=Hr,_.StructArrayLayout5f20=so,_.Texture=i0,_.Tile=X_,_.Transitionable=Vt,_.Uniform1f=Y0,_.Uniform1i=class extends mu{constructor(j){super(j),this.current=0}set(j,a,_e){this.fetchUniformLocation(j,a)&&this.current!==_e&&(this.current=_e,this.gl.uniform1i(this.location,_e))}},_.Uniform2f=class extends mu{constructor(j){super(j),this.current=[0,0]}set(j,a,_e){this.fetchUniformLocation(j,a)&&(_e[0]===this.current[0]&&_e[1]===this.current[1]||(this.current=_e,this.gl.uniform2f(this.location,_e[0],_e[1])))}},_.Uniform3f=class extends mu{constructor(j){super(j),this.current=[0,0,0]}set(j,a,_e){this.fetchUniformLocation(j,a)&&(_e[0]===this.current[0]&&_e[1]===this.current[1]&&_e[2]===this.current[2]||(this.current=_e,this.gl.uniform3f(this.location,_e[0],_e[1],_e[2])))}},_.Uniform4f=p1,_.UniformColor=f1,_.UniformMatrix2f=class extends mu{constructor(j){super(j),this.current=Uw}set(j,a,_e){if(this.fetchUniformLocation(j,a)){for(let it=0;it<4;it++)if(_e[it]!==this.current[it]){this.current=_e,this.gl.uniformMatrix2fv(this.location,!1,_e);break}}}},_.UniformMatrix3f=class extends mu{constructor(j){super(j),this.current=jw}set(j,a,_e){if(this.fetchUniformLocation(j,a)){for(let it=0;it<9;it++)if(_e[it]!==this.current[it]){this.current=_e,this.gl.uniformMatrix3fv(this.location,!1,_e);break}}}},_.UniformMatrix4f=class extends mu{constructor(j){super(j),this.current=Nw}set(j,a,_e){if(this.fetchUniformLocation(j,a)){if(_e[12]!==this.current[12]||_e[0]!==this.current[0])return this.current=_e,void this.gl.uniformMatrix4fv(this.location,!1,_e);for(let it=1;it<16;it++)if(_e[it]!==this.current[it]){this.current=_e,this.gl.uniformMatrix4fv(this.location,!1,_e);break}}}},_.UnwrappedTileID=xx,_.ValidationError=yn,_.VectorTileFeature=uv,_.VectorTileWorkerSource=class extends Ds{constructor(j,a,_e,it,ot){super(),this.actor=j,this.layerIndex=a,this.availableImages=_e,this.loadVectorData=ot||Aw,this.loading={},this.loaded={},this.deduped=new Pw(j.scheduler),this.isSpriteLoaded=it,this.scheduler=j.scheduler}loadTile(j,a){const _e=j.uid,it=j&&j.request,ot=it&&it.collectResourceTiming,lt=this.loading[_e]=new dT(j);lt.abort=this.loadVectorData(j,(ht,pt)=>{const gt=!this.loading[_e];if(delete this.loading[_e],gt||ht||!pt)return lt.status="done",gt||(this.loaded[_e]=lt),a(ht);const yt=pt.rawData,Et={};pt.expires&&(Et.expires=pt.expires),pt.cacheControl&&(Et.cacheControl=pt.cacheControl),lt.vectorTile=pt.vectorTile||new R_(new yv(yt));const Pt=()=>{lt.parse(lt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Rt,zt)=>{if(Rt||!zt)return a(Rt);const Ot={};if(ot){const Ut=Qu(it);Ut.length>0&&(Ot.resourceTiming=JSON.parse(JSON.stringify(Ut)))}a(null,Yr({rawTileData:yt.slice(0)},zt,Et,Ot))})};this.isSpriteLoaded?Pt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Pt,{type:"parseTile",isSymbolTile:j.isSymbolTile,zoom:j.tileZoom}):Pt()}),this.loaded=this.loaded||{},this.loaded[_e]=lt})}reloadTile(j,a){const _e=this.loaded,it=j.uid,ot=this;if(_e&&_e[it]){const lt=_e[it];lt.showCollisionBoxes=j.showCollisionBoxes,lt.enableTerrain=!!j.enableTerrain,lt.projection=j.projection,lt.tileTransform=Dp(j.tileID.canonical,j.projection);const ht=(pt,gt)=>{const yt=lt.reloadCallback;yt&&(delete lt.reloadCallback,lt.parse(lt.vectorTile,ot.layerIndex,this.availableImages,ot.actor,yt)),a(pt,gt)};lt.status==="parsing"?lt.reloadCallback=ht:lt.status==="done"&&(lt.vectorTile?lt.parse(lt.vectorTile,this.layerIndex,this.availableImages,this.actor,ht):ht())}}abortTile(j,a){const _e=j.uid,it=this.loading[_e];it&&(it.abort&&it.abort(),delete this.loading[_e]),a()}removeTile(j,a){const _e=this.loaded,it=j.uid;_e&&_e[it]&&delete _e[it],a()}},_.WritingMode=Js,_.ZoomDependentExpression=gp,_.add=yu,_.addDynamicAttributes=Cv,_.adjoint=function(j,a){var _e=a[0],it=a[1],ot=a[2],lt=a[3],ht=a[4],pt=a[5],gt=a[6],yt=a[7],Et=a[8];return j[0]=ht*Et-pt*yt,j[1]=ot*yt-it*Et,j[2]=it*pt-ot*ht,j[3]=pt*gt-lt*Et,j[4]=_e*Et-ot*gt,j[5]=ot*lt-_e*pt,j[6]=lt*yt-ht*gt,j[7]=it*gt-_e*yt,j[8]=_e*ht-it*lt,j},_.asyncAll=ar,_.bezier=hr,_.bindAll=Po,_.boundsAttributes=uw,_.bufferConvexPolygon=function(j,a){const _e=[];for(let it=0;it<j.length;it++){const ot=or(it-1,-1,j.length-1),lt=or(it+1,-1,j.length-1),ht=j[it],pt=j[lt],gt=j[ot].sub(ht).unit(),yt=pt.sub(ht).unit(),Et=yt.angleWithSep(gt.x,gt.y),Pt=gt.add(yt).unit().mult(-1*a/Math.sin(Et/2));_e.push(ht.add(Pt))}return _e},_.cacheEntryPossiblyAdded=function(j){Ss++,Ss>is&&(j.getActor().send("enforceCacheSizeLimit",ws),Ss=0)},_.calculateGlobeLabelMatrix=function(j,a){const{x:_e,y:it}=j.point,ot=O1(_e,it,j.worldSize/j._pixelsPerMercatorPixel,0,0);return kp(ot,ot,f_(_c(a)))},_.calculateGlobeMatrix=function(j){const{x:a,y:_e}=j.point,{lng:it,lat:ot}=j._center;return O1(a,_e,j.worldSize,it,ot)},_.calculateGlobeMercatorMatrix=function(j){const a=j.pixelsPerMeter,_e=a/Vl(1,j.center.lat),it=Bl(new Float64Array(16));return Py(it,it,[j.point.x,j.point.y,0]),Cp(it,it,[_e,_e,a]),Float32Array.from(it)},_.circumferenceAtLatitude=g_,_.clamp=Nt,_.clearTileCache=function(j){if(!us())return;const a=ut.caches.delete(Ko);j&&a.catch(j).then(()=>j())},_.clipLine=Zx,_.clone=function(j){var a=new Gs(16);return a[0]=j[0],a[1]=j[1],a[2]=j[2],a[3]=j[3],a[4]=j[4],a[5]=j[5],a[6]=j[6],a[7]=j[7],a[8]=j[8],a[9]=j[9],a[10]=j[10],a[11]=j[11],a[12]=j[12],a[13]=j[13],a[14]=j[14],a[15]=j[15],a},_.clone$1=jn,_.collisionCircleLayout=hS,_.config=wt,_.conjugate=function(j,a){return j[0]=-a[0],j[1]=-a[1],j[2]=-a[2],j[3]=a[3],j},_.create=function(){var j=new Gs(16);return Gs!=Float32Array&&(j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[11]=0,j[12]=0,j[13]=0,j[14]=0),j[0]=1,j[5]=1,j[10]=1,j[15]=1,j},_.create$1=y1,_.createExpression=zu,_.createLayout=Sr,_.createStyleLayer=function(j){return j.type==="custom"?new tT(j):new rT[j.type](j)},_.cross=a_,_.degToRad=xr,_.distance=function(j,a){return Math.hypot(a[0]-j[0],a[1]-j[1],a[2]-j[2])},_.div=function(j,a,_e){return j[0]=a[0]/_e[0],j[1]=a[1]/_e[1],j[2]=a[2]/_e[2],j},_.dot=yl,_.earthRadius=By,_.ease=Er,_.easeCubicInOut=zr,_.ecefToLatLng=function([j,a,_e]){const it=Math.hypot(j,a,_e),ot=Math.atan2(j,_e),lt=.5*Math.PI-Math.acos(-a/it);return new lo(Xr(ot),Xr(lt))},_.emitValidationErrors=G0,_.endsWith=Ao,_.enforceCacheSizeLimit=function(j){rs(),Oo&&Oo.then(a=>{a.keys().then(_e=>{for(let it=0;it<_e.length-j;it++)a.delete(_e[it])})})},_.evaluateSizeForFeature=mv,_.evaluateSizeForZoom=Sm,_.evaluateVariableOffset=Jx,_.evented=dt,_.exactEquals=function(j,a){return j[0]===a[0]&&j[1]===a[1]&&j[2]===a[2]&&j[3]===a[3]},_.exactEquals$1=function(j,a){return j[0]===a[0]&&j[1]===a[1]&&j[2]===a[2]},_.exported=un,_.exported$1=bt,_.extend=Yr,_.extend$1=Cl,_.fillExtrusionHeightLift=yx,_.filterObject=Eo,_.fromMat4=function(j,a){return j[0]=a[0],j[1]=a[1],j[2]=a[2],j[3]=a[4],j[4]=a[5],j[5]=a[6],j[6]=a[8],j[7]=a[9],j[8]=a[10],j},_.fromQuat=function(j,a){var _e=a[0],it=a[1],ot=a[2],lt=a[3],ht=_e+_e,pt=it+it,gt=ot+ot,yt=_e*ht,Et=it*ht,Pt=it*pt,Rt=ot*ht,zt=ot*pt,Ot=ot*gt,Ut=lt*ht,Kt=lt*pt,rr=lt*gt;return j[0]=1-Pt-Ot,j[1]=Et+rr,j[2]=Rt-Kt,j[3]=0,j[4]=Et-rr,j[5]=1-yt-Ot,j[6]=zt+Ut,j[7]=0,j[8]=Rt+Kt,j[9]=zt-Ut,j[10]=1-yt-Pt,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j},_.fromRotation=function(j,a){var _e=Math.sin(a),it=Math.cos(a);return j[0]=it,j[1]=_e,j[2]=0,j[3]=-_e,j[4]=it,j[5]=0,j[6]=0,j[7]=0,j[8]=1,j},_.fromScaling=_1,_.furthestTileCorner=function(j){const a=Math.round((j+45+360)%360/90)%4;return ln[a]},_.getAABBPointSquareDist=function(j,a,_e){let it=0;for(let ot=0;ot<2;++ot){const lt=_e?_e[ot]:0;j[ot]>lt&&(it+=(j[ot]-lt)*(j[ot]-lt)),a[ot]<lt&&(it+=(lt-a[ot])*(lt-a[ot]))}return it},_.getAnchorAlignment=V_,_.getAnchorJustification=U_,_.getBounds=function(j){let a=1/0,_e=1/0,it=-1/0,ot=-1/0;for(const lt of j)a=Math.min(a,lt.x),_e=Math.min(_e,lt.y),it=Math.max(it,lt.x),ot=Math.max(ot,lt.y);return{min:new ir(a,_e),max:new ir(it,ot)}},_.getColumn=Jo,_.getDefaultExportFromCjs=St,_.getGridMatrix=function(j,a,_e,it){const ot=a.getNorth(),lt=a.getSouth(),ht=a.getWest(),pt=a.getEast(),gt=1<<j.z,yt=pt-ht,Et=ot-lt,Pt=yt/Ap,Rt=-Et/$y[_e],zt=[0,Pt,0,Rt,0,0,ot,ht,0];if(j.z>0){const Ot=180/it;v1(zt,zt,[Ot/yt+1,0,0,0,Ot/Et+1,0,-.5*Ot/Pt,.5*Ot/Rt,1])}return zt[2]=gt,zt[5]=j.x,zt[8]=j.y,zt},_.getImage=cr,_.getJSON=function(j,a){return Tl(Yr(j,{type:"json"}),a)},_.getLatitudinalLod=function(j){const a=bs-5;j=Nt(j,-a,a)/a*90;const _e=Math.pow(Math.abs(Math.sin(xr(j))),3);return Math.round(_e*($y.length-1))},_.getMapSessionAPI=Fo,_.getPerformanceMeasurement=Qu,_.getProjection=sw,_.getRTLTextPluginStatus=ft,_.getReferrer=Sl,_.getTilePoint=function(j,{x:a,y:_e},it=0){return new ir(((a-it)*j.scale-j.x)*Cn,(_e*j.scale-j.y)*Cn)},_.getTileVec3=function(j,a,_e=0){return mm(((a.x-_e)*j.scale-j.x)*Cn,(a.y*j.scale-j.y)*Cn,N1(a.z,a.y))},_.getVideo=function(j,a){const _e=ut.document.createElement("video");_e.muted=!0,_e.onloadstart=function(){a(null,_e)};for(let it=0;it<j.length;it++){const ot=ut.document.createElement("source");wu(j[it])||(_e.crossOrigin="Anonymous"),ot.src=j[it],_e.appendChild(ot)}return{cancel:()=>{}}},_.globeCenterToScreenPoint=function(j){const a=[0,0,0],_e=Bl(new Float64Array(16));return kp(_e,j.pixelMatrix,j.globeMatrix),jo(a,a,_e),new ir(a[0],a[1])},_.globeDenormalizeECEF=f_,_.globeECEFOrigin=function(j,a){const _e=[0,0,0];return jo(_e,_e,Oy(_c(a.canonical))),jo(_e,_e,j),_e},_.globeMetersToEcef=J0,_.globeNormalizeECEF=Oy,_.globePixelsToTileUnits=function(j,a){return Cn/(512*Math.pow(2,j))*tv(_c(a))},_.globePoleMatrixForTile=function(j,a,_e){const it=Bl(new Float64Array(16)),ot=(a/(1<<j)-.5)*Math.PI*2;return Q0(it,_e.globeMatrix,ot),Float32Array.from(it)},_.globeTileBounds=_c,_.globeTiltAtLngLat=B1,_.globeToMercatorTransition=vm,_.globeUseCustomAntiAliasing=function(j,a,_e){const it=vm(_e.zoom),ot=j.style.map._antialias,lt=!!a.extStandardDerivatives,ht=a.extStandardDerivativesForceOff||j.terrain&&j.terrain.exaggeration()>0;return it===0&&!ot&&!ht&&lt},_.identity=Bl,_.identity$1=C1,_.invert=r_,_.isFullscreen=function(){return!!ut.document.fullscreenElement||!!ut.document.webkitFullscreenElement},_.isLngLatBehindGlobe=m_,_.isMapAuthenticated=function(j){return ds.has(j)},_.isMapboxURL=wr,_.isSafariWithAntialiasingBug=function(j){const a=j.navigator?j.navigator.userAgent:null;return!!Mo(j)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},_.latFromMercatorY=xs,_.latLngToECEF=ym,_.len=Qw,_.length=Ay,_.length$1=function(j){return Math.hypot(j[0],j[1],j[2],j[3])},_.lngFromMercatorX=Qs,_.loadVectorTile=Aw,_.makeRequest=Tl,_.mapValue=function(j,a,_e,it,ot){return Nt((j-a)/(_e-a)*(ot-it)+it,it,ot)},_.mercatorScale=j1,_.mercatorXfromLng=_h,_.mercatorYfromLat=eu,_.mercatorZfromAltitude=Vl,_.mul=Yw,_.mul$1=Kw,_.multiply=kp,_.multiply$1=v1,_.multiply$2=w1,_.nextPowerOfTwo=Ln,_.normalize=As,_.normalize$1=Jw,_.normalize$2=T1,_.number=Kn,_.ortho=function(j,a,_e,it,ot,lt,ht){var pt=1/(a-_e),gt=1/(it-ot),yt=1/(lt-ht);return j[0]=-2*pt,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=-2*gt,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=2*yt,j[11]=0,j[12]=(a+_e)*pt,j[13]=(ot+it)*gt,j[14]=(ht+lt)*yt,j[15]=1,j},_.pbf=Cx,_.perspective=function(j,a,_e,it,ot){var lt,ht=1/Math.tan(a/2);return j[0]=ht/_e,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=ht,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[11]=-1,j[12]=0,j[13]=0,j[15]=0,ot!=null&&ot!==1/0?(j[10]=(ot+it)*(lt=1/(it-ot)),j[14]=2*ot*it*lt):(j[10]=-1,j[14]=-2*it),j},_.pick=function(j,a){const _e={};for(let it=0;it<a.length;it++){const ot=a[it];ot in j&&(_e[ot]=j[ot])}return _e},_.plugin=xt,_.pointGeometry=Gt,_.polesInViewport=function(j){const a=Bl(new Float64Array(16));kp(a,j.pixelMatrix,j.globeMatrix);const _e=[0,_l,0],it=[0,xl,0];return jo(_e,_e,a),jo(it,it,a),[_e[0]>0&&_e[0]<=j.width&&_e[1]>0&&_e[1]<=j.height&&!m_(j,new lo(j.center.lat,90)),it[0]>0&&it[0]<=j.width&&it[1]>0&&it[1]<=j.height&&!m_(j,new lo(j.center.lat,-90))]},_.polygonContainsPoint=Lp,_.polygonIntersectsBox=X1,_.polygonIntersectsPolygon=H1,_.polygonizeBounds=function(j,a,_e=0,it=!0){const ot=new ir(_e,_e),lt=j.sub(ot),ht=a.add(ot),pt=[lt,new ir(ht.x,lt.y),ht,new ir(lt.x,ht.y)];return it&&pt.push(lt.clone()),pt},_.posAttributes=Dy,_.postMapLoadEvent=Lo,_.postPerformanceEvent=Bo,_.postTurnstileEvent=Wn,_.potpack=O_,_.prevPowerOfTwo=function(j){return j<=1?1:Math.pow(2,Math.floor(Math.log(j)/Math.LN2))},_.radToDeg=Xr,_.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],_.registerForPluginStateChange=function(j){return j({pluginStatus:at,pluginURL:et}),dt.on("pluginStateChange",j),j},_.removeAuthState=function(j){ds.delete(j)},_.renderColorRamp=S_,_.resample=U1,_.rotateX=n_,_.rotateX$1=P1,_.rotateY=Q0,_.rotateY$1=A1,_.rotateZ=function(j,a,_e){var it=Math.sin(_e),ot=Math.cos(_e),lt=a[0],ht=a[1],pt=a[2],gt=a[3],yt=a[4],Et=a[5],Pt=a[6],Rt=a[7];return a!==j&&(j[8]=a[8],j[9]=a[9],j[10]=a[10],j[11]=a[11],j[12]=a[12],j[13]=a[13],j[14]=a[14],j[15]=a[15]),j[0]=lt*ot+yt*it,j[1]=ht*ot+Et*it,j[2]=pt*ot+Pt*it,j[3]=gt*ot+Rt*it,j[4]=yt*ot-lt*it,j[5]=Et*ot-ht*it,j[6]=Pt*ot-pt*it,j[7]=Rt*ot-gt*it,j},_.rotateZ$1=function(j,a,_e){_e*=.5;var it=a[0],ot=a[1],lt=a[2],ht=a[3],pt=Math.sin(_e),gt=Math.cos(_e);return j[0]=it*gt+ot*pt,j[1]=ot*gt-it*pt,j[2]=lt*gt+ht*pt,j[3]=ht*gt-lt*pt,j},_.scale=Cp,_.scale$1=S1,_.scale$2=Ks,_.scaleAndAdd=Ly,_.set=function(j,a,_e,it){return j[0]=a,j[1]=_e,j[2]=it,j},_.setCacheLimits=function(j,a){ws=j,is=a},_.setColumn=function(j,a,_e){j[4*a+0]=_e[0],j[4*a+1]=_e[1],j[4*a+2]=_e[2],j[4*a+3]=_e[3]},_.setRTLTextPlugin=function(j,a,_e=!1){if(at===Ey||at===Sy||at===Ty)throw new Error("setRTLTextPlugin cannot be called multiple times.");et=un.resolveURL(j),at=Ey,Vu=a,ct(),_e||_t()},_.smoothstep=Wt,_.spec=jr,_.squaredLength=function(j){var a=j[0],_e=j[1],it=j[2];return a*a+_e*_e+it*it},_.storeAuthState=function(j,a){a?ds.add(j):ds.delete(j)},_.sub=Fl,_.subtract=s_,_.symbolSize=uS,_.tileAABB=function(j,a,_e,it,ot,lt,ht,pt,gt){if(gt.name==="globe")return nE(j,a,new pv(_e,it,ot));const yt=Dp({z:_e,x:it,y:ot},gt);return new Is([(lt+yt.x/yt.scale)*a,a*(yt.y/yt.scale),ht],[(lt+yt.x2/yt.scale)*a,a*(yt.y2/yt.scale),pt])},_.tileCornersToBounds=ev,_.tileTransform=Dp,_.transformMat3=function(j,a,_e){var it=a[0],ot=a[1],lt=a[2];return j[0]=it*_e[0]+ot*_e[3]+lt*_e[6],j[1]=it*_e[1]+ot*_e[4]+lt*_e[7],j[2]=it*_e[2]+ot*_e[5]+lt*_e[8],j},_.transformMat4=jo,_.transformMat4$1=Pp,_.transformQuat=E1,_.transitionTileAABBinECEF=D1,_.translate=Py,_.transpose=function(j,a){if(j===a){var _e=a[1],it=a[2],ot=a[5];j[1]=a[3],j[2]=a[6],j[3]=_e,j[5]=a[7],j[6]=it,j[7]=ot}else j[0]=a[0],j[1]=a[3],j[2]=a[6],j[3]=a[1],j[4]=a[4],j[5]=a[7],j[6]=a[2],j[7]=a[5],j[8]=a[8];return j},_.triggerPluginCompletionEvent=nt,_.uniqueId=mn,_.updateGlobeVertexNormal=function(j,a,_e,it,ot){const lt=5*a+2;j.float32[lt+0]=_e,j.float32[lt+1]=it,j.float32[lt+2]=ot},_.validateCustomStyleLayer=function(j){const a=[],_e=j.id;return _e===void 0&&a.push({message:`layers.${_e}: missing required property "id"`}),j.render===void 0&&a.push({message:`layers.${_e}: missing required method "render"`}),j.renderingMode&&j.renderingMode!=="2d"&&j.renderingMode!=="3d"&&a.push({message:`layers.${_e}: property "renderingMode" must be either "2d" or "3d"`}),a},_.validateFilter=j=>js(bp(j)),_.validateFog=j=>js(N0(j)),_.validateLayer=j=>js(O0(j)),_.validateLight=j=>js(V0(j)),_.validateSource=j=>js(F0(j)),_.validateStyle=U0,_.validateTerrain=j=>js(vy(j)),_.values=Fr,_.vectorTile=hv,_.version=mt,_.warnOnce=Xn,_.window=ut,_.wrap=or}),rt(["./shared"],function(_){function ut(dr){if(typeof dr=="number"||typeof dr=="boolean"||typeof dr=="string"||dr==null)return JSON.stringify(dr);if(Array.isArray(dr)){let Zt="[";for(const cr of dr)Zt+=`${ut(cr)},`;return`${Zt}]`}let qt="{";for(const Zt of Object.keys(dr).sort())qt+=`${Zt}:${ut(dr[Zt])},`;return`${qt}}`}function mt(dr){let qt="";for(const Zt of _.refProperties)qt+=`/${ut(dr[Zt])}`;return qt}class vt{constructor(qt){this.keyCache={},qt&&this.replace(qt)}replace(qt){this._layerConfigs={},this._layers={},this.update(qt,[])}update(qt,Zt){for(const gr of qt)this._layerConfigs[gr.id]=gr,(this._layers[gr.id]=_.createStyleLayer(gr)).compileFilter(),this.keyCache[gr.id]&&delete this.keyCache[gr.id];for(const gr of Zt)delete this.keyCache[gr],delete this._layerConfigs[gr],delete this._layers[gr];this.familiesBySource={};const cr=function(gr,wr){const Pr={};for(let br=0;br<gr.length;br++){const Dr=wr&&wr[gr[br].id]||mt(gr[br]);wr&&(wr[gr[br].id]=Dr);let on=Pr[Dr];on||(on=Pr[Dr]=[]),on.push(gr[br])}const Cr=[];for(const br in Pr)Cr.push(Pr[br]);return Cr}(_.values(this._layerConfigs),this.keyCache);for(const gr of cr){const wr=gr.map(cn=>this._layers[cn.id]),Pr=wr[0];if(Pr.visibility==="none")continue;const Cr=Pr.source||"";let br=this.familiesBySource[Cr];br||(br=this.familiesBySource[Cr]={});const Dr=Pr.sourceLayer||"_geojsonTileLayer";let on=br[Dr];on||(on=br[Dr]=[]),on.push(wr)}}}class wt{loadTile(qt,Zt){const{uid:cr,encoding:gr,rawImageData:wr,padding:Pr,buildQuadTree:Cr}=qt,br=_.window.ImageBitmap&&wr instanceof _.window.ImageBitmap?this.getImageData(wr,Pr):wr;Zt(null,new _.DEMData(cr,br,gr,Pr<1,Cr))}getImageData(qt,Zt){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(qt.width,qt.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=qt.width,this.offscreenCanvas.height=qt.height,this.offscreenCanvasContext.drawImage(qt,0,0,qt.width,qt.height);const cr=this.offscreenCanvasContext.getImageData(-Zt,-Zt,qt.width+2*Zt,qt.height+2*Zt);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),cr}}function bt(dr,qt){if(dr.length!==0){Mt(dr[0],qt);for(var Zt=1;Zt<dr.length;Zt++)Mt(dr[Zt],!qt)}}function Mt(dr,qt){for(var Zt=0,cr=0,gr=0,wr=dr.length,Pr=wr-1;gr<wr;Pr=gr++){var Cr=(dr[gr][0]-dr[Pr][0])*(dr[Pr][1]+dr[gr][1]),br=Zt+Cr;cr+=Math.abs(Zt)>=Math.abs(Cr)?Zt-br+Cr:Cr-br+Zt,Zt=br}Zt+cr>=0!=!!qt&&dr.reverse()}var At=_.getDefaultExportFromCjs(function dr(qt,Zt){var cr,gr=qt&&qt.type;if(gr==="FeatureCollection")for(cr=0;cr<qt.features.length;cr++)dr(qt.features[cr],Zt);else if(gr==="GeometryCollection")for(cr=0;cr<qt.geometries.length;cr++)dr(qt.geometries[cr],Zt);else if(gr==="Feature")dr(qt.geometry,Zt);else if(gr==="Polygon")bt(qt.coordinates,Zt);else if(gr==="MultiPolygon")for(cr=0;cr<qt.coordinates.length;cr++)bt(qt.coordinates[cr],Zt);return qt});const Lt=_.VectorTileFeature.prototype.toGeoJSON;var Ht={exports:{}},Tt=_.pointGeometry,Ct=_.vectorTile.VectorTileFeature,St=It;function It(dr,qt){this.options=qt||{},this.features=dr,this.length=dr.length}function Bt(dr,qt){this.id=typeof dr.id=="number"?dr.id:void 0,this.type=dr.type,this.rawGeometry=dr.type===1?[dr.geometry]:dr.geometry,this.properties=dr.tags,this.extent=qt||4096}It.prototype.feature=function(dr){return new Bt(this.features[dr],this.options.extent)},Bt.prototype.loadGeometry=function(){var dr=this.rawGeometry;this.geometry=[];for(var qt=0;qt<dr.length;qt++){for(var Zt=dr[qt],cr=[],gr=0;gr<Zt.length;gr++)cr.push(new Tt(Zt[gr][0],Zt[gr][1]));this.geometry.push(cr)}return this.geometry},Bt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var dr=this.geometry,qt=1/0,Zt=-1/0,cr=1/0,gr=-1/0,wr=0;wr<dr.length;wr++)for(var Pr=dr[wr],Cr=0;Cr<Pr.length;Cr++){var br=Pr[Cr];qt=Math.min(qt,br.x),Zt=Math.max(Zt,br.x),cr=Math.min(cr,br.y),gr=Math.max(gr,br.y)}return[qt,cr,Zt,gr]},Bt.prototype.toGeoJSON=Ct.prototype.toGeoJSON;var Ft=_.pbf,Gt=St;function Xt(dr){var qt=new Ft;return function(Zt,cr){for(var gr in Zt.layers)cr.writeMessage(3,ir,Zt.layers[gr])}(dr,qt),qt.finish()}function ir(dr,qt){var Zt;qt.writeVarintField(15,dr.version||1),qt.writeStringField(1,dr.name||""),qt.writeVarintField(5,dr.extent||4096);var cr={keys:[],values:[],keycache:{},valuecache:{}};for(Zt=0;Zt<dr.length;Zt++)cr.feature=dr.feature(Zt),qt.writeMessage(2,$r,cr);var gr=cr.keys;for(Zt=0;Zt<gr.length;Zt++)qt.writeStringField(3,gr[Zt]);var wr=cr.values;for(Zt=0;Zt<wr.length;Zt++)qt.writeMessage(4,zr,wr[Zt])}function $r(dr,qt){var Zt=dr.feature;Zt.id!==void 0&&qt.writeVarintField(1,Zt.id),qt.writeMessage(2,Tr,dr),qt.writeVarintField(3,Zt.type),qt.writeMessage(4,ln,Zt)}function Tr(dr,qt){var Zt=dr.feature,cr=dr.keys,gr=dr.values,wr=dr.keycache,Pr=dr.valuecache;for(var Cr in Zt.properties){var br=Zt.properties[Cr],Dr=wr[Cr];if(br!==null){Dr===void 0&&(cr.push(Cr),wr[Cr]=Dr=cr.length-1),qt.writeVarint(Dr);var on=typeof br;on!=="string"&&on!=="boolean"&&on!=="number"&&(br=JSON.stringify(br));var cn=on+":"+br,tn=Pr[cn];tn===void 0&&(gr.push(br),Pr[cn]=tn=gr.length-1),qt.writeVarint(tn)}}}function xr(dr,qt){return(qt<<3)+(7&dr)}function Xr(dr){return dr<<1^dr>>31}function ln(dr,qt){for(var Zt=dr.loadGeometry(),cr=dr.type,gr=0,wr=0,Pr=Zt.length,Cr=0;Cr<Pr;Cr++){var br=Zt[Cr],Dr=1;cr===1&&(Dr=br.length),qt.writeVarint(xr(1,Dr));for(var on=cr===3?br.length-1:br.length,cn=0;cn<on;cn++){cn===1&&cr!==1&&qt.writeVarint(xr(2,on-1));var tn=br[cn].x-gr,Rn=br[cn].y-wr;qt.writeVarint(Xr(tn)),qt.writeVarint(Xr(Rn)),gr+=tn,wr+=Rn}cr===3&&qt.writeVarint(xr(7,1))}}function zr(dr,qt){var Zt=typeof dr;Zt==="string"?qt.writeStringField(1,dr):Zt==="boolean"?qt.writeBooleanField(7,dr):Zt==="number"&&(dr%1!=0?qt.writeDoubleField(3,dr):dr<0?qt.writeSVarintField(6,dr):qt.writeVarintField(5,dr))}Ht.exports=Xt,Ht.exports.fromVectorTileJs=Xt,Ht.exports.fromGeojsonVt=function(dr,qt){qt=qt||{};var Zt={};for(var cr in dr)Zt[cr]=new Gt(dr[cr].features,qt),Zt[cr].name=cr,Zt[cr].version=qt.version,Zt[cr].extent=qt.extent;return Xt({layers:Zt})},Ht.exports.GeoJSONWrapper=Gt;var hr=_.getDefaultExportFromCjs(Ht.exports);const Er={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:dr=>dr},Nt=Math.fround||(Wt=new Float32Array(1),dr=>(Wt[0]=+dr,Wt[0]));var Wt;const or=3,ar=5,Fr=6;class Yr{constructor(qt){this.options=Object.assign(Object.create(Er),qt),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(qt){const{log:Zt,minZoom:cr,maxZoom:gr}=this.options;Zt&&console.time("total time");const wr=`prepare ${qt.length} points`;Zt&&console.time(wr),this.points=qt;const Pr=[];for(let br=0;br<qt.length;br++){const Dr=qt[br];if(!Dr.geometry)continue;const[on,cn]=Dr.geometry.coordinates,tn=Nt(En(on)),Rn=Nt(Ln(cn));Pr.push(tn,Rn,1/0,br,-1,1),this.options.reduce&&Pr.push(0)}let Cr=this.trees[gr+1]=this._createTree(Pr);Zt&&console.timeEnd(wr);for(let br=gr;br>=cr;br--){const Dr=+Date.now();Cr=this.trees[br]=this._createTree(this._cluster(Cr,br)),Zt&&console.log("z%d: %d clusters in %dms",br,Cr.numItems,+Date.now()-Dr)}return Zt&&console.timeEnd("total time"),this}getClusters(qt,Zt){let cr=((qt[0]+180)%360+360)%360-180;const gr=Math.max(-90,Math.min(90,qt[1]));let wr=qt[2]===180?180:((qt[2]+180)%360+360)%360-180;const Pr=Math.max(-90,Math.min(90,qt[3]));if(qt[2]-qt[0]>=360)cr=-180,wr=180;else if(cr>wr){const cn=this.getClusters([cr,gr,180,Pr],Zt),tn=this.getClusters([-180,gr,wr,Pr],Zt);return cn.concat(tn)}const Cr=this.trees[this._limitZoom(Zt)],br=Cr.range(En(cr),Ln(Pr),En(wr),Ln(gr)),Dr=Cr.data,on=[];for(const cn of br){const tn=this.stride*cn;on.push(Dr[tn+ar]>1?hn(Dr,tn,this.clusterProps):this.points[Dr[tn+or]])}return on}getChildren(qt){const Zt=this._getOriginId(qt),cr=this._getOriginZoom(qt),gr="No cluster with the specified id.",wr=this.trees[cr];if(!wr)throw new Error(gr);const Pr=wr.data;if(Zt*this.stride>=Pr.length)throw new Error(gr);const Cr=this.options.radius/(this.options.extent*Math.pow(2,cr-1)),br=wr.within(Pr[Zt*this.stride],Pr[Zt*this.stride+1],Cr),Dr=[];for(const on of br){const cn=on*this.stride;Pr[cn+4]===qt&&Dr.push(Pr[cn+ar]>1?hn(Pr,cn,this.clusterProps):this.points[Pr[cn+or]])}if(Dr.length===0)throw new Error(gr);return Dr}getLeaves(qt,Zt,cr){const gr=[];return this._appendLeaves(gr,qt,Zt=Zt||10,cr=cr||0,0),gr}getTile(qt,Zt,cr){const gr=this.trees[this._limitZoom(qt)],wr=Math.pow(2,qt),{extent:Pr,radius:Cr}=this.options,br=Cr/Pr,Dr=(cr-br)/wr,on=(cr+1+br)/wr,cn={features:[]};return this._addTileFeatures(gr.range((Zt-br)/wr,Dr,(Zt+1+br)/wr,on),gr.data,Zt,cr,wr,cn),Zt===0&&this._addTileFeatures(gr.range(1-br/wr,Dr,1,on),gr.data,wr,cr,wr,cn),Zt===wr-1&&this._addTileFeatures(gr.range(0,Dr,br/wr,on),gr.data,-1,cr,wr,cn),cn.features.length?cn:null}getClusterExpansionZoom(qt){let Zt=this._getOriginZoom(qt)-1;for(;Zt<=this.options.maxZoom;){const cr=this.getChildren(qt);if(Zt++,cr.length!==1)break;qt=cr[0].properties.cluster_id}return Zt}_appendLeaves(qt,Zt,cr,gr,wr){const Pr=this.getChildren(Zt);for(const Cr of Pr){const br=Cr.properties;if(br&&br.cluster?wr+br.point_count<=gr?wr+=br.point_count:wr=this._appendLeaves(qt,br.cluster_id,cr,gr,wr):wr<gr?wr++:qt.push(Cr),qt.length===cr)break}return wr}_createTree(qt){const Zt=new _.KDBush(qt.length/this.stride|0,this.options.nodeSize,Float32Array);for(let cr=0;cr<qt.length;cr+=this.stride)Zt.add(qt[cr],qt[cr+1]);return Zt.finish(),Zt.data=qt,Zt}_addTileFeatures(qt,Zt,cr,gr,wr,Pr){for(const Cr of qt){const br=Cr*this.stride,Dr=Zt[br+ar]>1;let on,cn,tn;if(Dr)on=mn(Zt,br,this.clusterProps),cn=Zt[br],tn=Zt[br+1];else{const $n=this.points[Zt[br+or]];on=$n.properties;const[Mn,Wn]=$n.geometry.coordinates;cn=En(Mn),tn=Ln(Wn)}const Rn={type:1,geometry:[[Math.round(this.options.extent*(cn*wr-cr)),Math.round(this.options.extent*(tn*wr-gr))]],tags:on};let Nn;Nn=Dr||this.options.generateId?Zt[br+or]:this.points[Zt[br+or]].id,Nn!==void 0&&(Rn.id=Nn),Pr.features.push(Rn)}}_limitZoom(qt){return Math.max(this.options.minZoom,Math.min(Math.floor(+qt),this.options.maxZoom+1))}_cluster(qt,Zt){const{radius:cr,extent:gr,reduce:wr,minPoints:Pr}=this.options,Cr=cr/(gr*Math.pow(2,Zt)),br=qt.data,Dr=[],on=this.stride;for(let cn=0;cn<br.length;cn+=on){if(br[cn+2]<=Zt)continue;br[cn+2]=Zt;const tn=br[cn],Rn=br[cn+1],Nn=qt.within(br[cn],br[cn+1],Cr),$n=br[cn+ar];let Mn=$n;for(const Wn of Nn){const vo=Wn*on;br[vo+2]>Zt&&(Mn+=br[vo+ar])}if(Mn>$n&&Mn>=Pr){let Wn,vo=tn*$n,Lo=Rn*$n,ts=-1;const Bo=((cn/on|0)<<5)+(Zt+1)+this.points.length;for(const Bs of Nn){const Fo=Bs*on;if(br[Fo+2]<=Zt)continue;br[Fo+2]=Zt;const ds=br[Fo+ar];vo+=br[Fo]*ds,Lo+=br[Fo+1]*ds,br[Fo+4]=Bo,wr&&(Wn||(Wn=this._map(br,cn,!0),ts=this.clusterProps.length,this.clusterProps.push(Wn)),wr(Wn,this._map(br,Fo)))}br[cn+4]=Bo,Dr.push(vo/Mn,Lo/Mn,1/0,Bo,-1,Mn),wr&&Dr.push(ts)}else{for(let Wn=0;Wn<on;Wn++)Dr.push(br[cn+Wn]);if(Mn>1)for(const Wn of Nn){const vo=Wn*on;if(!(br[vo+2]<=Zt)){br[vo+2]=Zt;for(let Lo=0;Lo<on;Lo++)Dr.push(br[vo+Lo])}}}}return Dr}_getOriginId(qt){return qt-this.points.length>>5}_getOriginZoom(qt){return(qt-this.points.length)%32}_map(qt,Zt,cr){if(qt[Zt+ar]>1){const Pr=this.clusterProps[qt[Zt+Fr]];return cr?Object.assign({},Pr):Pr}const gr=this.points[qt[Zt+or]].properties,wr=this.options.map(gr);return cr&&wr===gr?Object.assign({},wr):wr}}function hn(dr,qt,Zt){return{type:"Feature",id:dr[qt+or],properties:mn(dr,qt,Zt),geometry:{type:"Point",coordinates:[(cr=dr[qt],360*(cr-.5)),wo(dr[qt+1])]}};var cr}function mn(dr,qt,Zt){const cr=dr[qt+ar],gr=cr>=1e4?`${Math.round(cr/1e3)}k`:cr>=1e3?Math.round(cr/100)/10+"k":cr,wr=dr[qt+Fr],Pr=wr===-1?{}:Object.assign({},Zt[wr]);return Object.assign(Pr,{cluster:!0,cluster_id:dr[qt+or],point_count:cr,point_count_abbreviated:gr})}function En(dr){return dr/360+.5}function Ln(dr){const qt=Math.sin(dr*Math.PI/180),Zt=.5-.25*Math.log((1+qt)/(1-qt))/Math.PI;return Zt<0?0:Zt>1?1:Zt}function wo(dr){const qt=(180-360*dr)*Math.PI/180;return 360*Math.atan(Math.exp(qt))/Math.PI-90}function Po(dr,qt,Zt,cr){for(var gr,wr=cr,Pr=Zt-qt>>1,Cr=Zt-qt,br=dr[qt],Dr=dr[qt+1],on=dr[Zt],cn=dr[Zt+1],tn=qt+3;tn<Zt;tn+=3){var Rn=Ao(dr[tn],dr[tn+1],br,Dr,on,cn);if(Rn>wr)gr=tn,wr=Rn;else if(Rn===wr){var Nn=Math.abs(tn-Pr);Nn<Cr&&(gr=tn,Cr=Nn)}}wr>cr&&(gr-qt>3&&Po(dr,qt,gr,cr),dr[gr+2]=wr,Zt-gr>3&&Po(dr,gr,Zt,cr))}function Ao(dr,qt,Zt,cr,gr,wr){var Pr=gr-Zt,Cr=wr-cr;if(Pr!==0||Cr!==0){var br=((dr-Zt)*Pr+(qt-cr)*Cr)/(Pr*Pr+Cr*Cr);br>1?(Zt=gr,cr=wr):br>0&&(Zt+=Pr*br,cr+=Cr*br)}return(Pr=dr-Zt)*Pr+(Cr=qt-cr)*Cr}function An(dr,qt,Zt,cr){var gr={id:dr===void 0?null:dr,type:qt,geometry:Zt,tags:cr,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(wr){var Pr=wr.geometry,Cr=wr.type;if(Cr==="Point"||Cr==="MultiPoint"||Cr==="LineString")Eo(wr,Pr);else if(Cr==="Polygon"||Cr==="MultiLineString")for(var br=0;br<Pr.length;br++)Eo(wr,Pr[br]);else if(Cr==="MultiPolygon")for(br=0;br<Pr.length;br++)for(var Dr=0;Dr<Pr[br].length;Dr++)Eo(wr,Pr[br][Dr])}(gr),gr}function Eo(dr,qt){for(var Zt=0;Zt<qt.length;Zt+=3)dr.minX=Math.min(dr.minX,qt[Zt]),dr.minY=Math.min(dr.minY,qt[Zt+1]),dr.maxX=Math.max(dr.maxX,qt[Zt]),dr.maxY=Math.max(dr.maxY,qt[Zt+1])}function jn(dr,qt,Zt,cr){if(qt.geometry){var gr=qt.geometry.coordinates,wr=qt.geometry.type,Pr=Math.pow(Zt.tolerance/((1<<Zt.maxZoom)*Zt.extent),2),Cr=[],br=qt.id;if(Zt.promoteId?br=qt.properties[Zt.promoteId]:Zt.generateId&&(br=cr||0),wr==="Point")bn(gr,Cr);else if(wr==="MultiPoint")for(var Dr=0;Dr<gr.length;Dr++)bn(gr[Dr],Cr);else if(wr==="LineString")Xn(gr,Cr,Pr,!1);else if(wr==="MultiLineString"){if(Zt.lineMetrics){for(Dr=0;Dr<gr.length;Dr++)Xn(gr[Dr],Cr=[],Pr,!1),dr.push(An(br,"LineString",Cr,qt.properties));return}Io(gr,Cr,Pr,!1)}else if(wr==="Polygon")Io(gr,Cr,Pr,!0);else{if(wr!=="MultiPolygon"){if(wr==="GeometryCollection"){for(Dr=0;Dr<qt.geometry.geometries.length;Dr++)jn(dr,{id:br,geometry:qt.geometry.geometries[Dr],properties:qt.properties},Zt,cr);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Dr=0;Dr<gr.length;Dr++){var on=[];Io(gr[Dr],on,Pr,!0),Cr.push(on)}}dr.push(An(br,wr,Cr,qt.properties))}}function bn(dr,qt){qt.push(gs(dr[0])),qt.push(zo(dr[1])),qt.push(0)}function Xn(dr,qt,Zt,cr){for(var gr,wr,Pr=0,Cr=0;Cr<dr.length;Cr++){var br=gs(dr[Cr][0]),Dr=zo(dr[Cr][1]);qt.push(br),qt.push(Dr),qt.push(0),Cr>0&&(Pr+=cr?(gr*Dr-br*wr)/2:Math.sqrt(Math.pow(br-gr,2)+Math.pow(Dr-wr,2))),gr=br,wr=Dr}var on=qt.length-3;qt[2]=1,Po(qt,0,on,Zt),qt[on+2]=1,qt.size=Math.abs(Pr),qt.start=0,qt.end=qt.size}function Io(dr,qt,Zt,cr){for(var gr=0;gr<dr.length;gr++){var wr=[];Xn(dr[gr],wr,Zt,cr),qt.push(wr)}}function gs(dr){return dr/360+.5}function zo(dr){var qt=Math.sin(dr*Math.PI/180),Zt=.5-.25*Math.log((1+qt)/(1-qt))/Math.PI;return Zt<0?0:Zt>1?1:Zt}function So(dr,qt,Zt,cr,gr,wr,Pr,Cr){if(cr/=qt,wr>=(Zt/=qt)&&Pr<cr)return dr;if(Pr<Zt||wr>=cr)return null;for(var br=[],Dr=0;Dr<dr.length;Dr++){var on=dr[Dr],cn=on.geometry,tn=on.type,Rn=gr===0?on.minX:on.minY,Nn=gr===0?on.maxX:on.maxY;if(Rn>=Zt&&Nn<cr)br.push(on);else if(!(Nn<Zt||Rn>=cr)){var $n=[];if(tn==="Point"||tn==="MultiPoint")hs(cn,$n,Zt,cr,gr);else if(tn==="LineString")Mo(cn,$n,Zt,cr,gr,!1,Cr.lineMetrics);else if(tn==="MultiLineString")Jo(cn,$n,Zt,cr,gr,!1);else if(tn==="Polygon")Jo(cn,$n,Zt,cr,gr,!0);else if(tn==="MultiPolygon")for(var Mn=0;Mn<cn.length;Mn++){var Wn=[];Jo(cn[Mn],Wn,Zt,cr,gr,!0),Wn.length&&$n.push(Wn)}if($n.length){if(Cr.lineMetrics&&tn==="LineString"){for(Mn=0;Mn<$n.length;Mn++)br.push(An(on.id,tn,$n[Mn],on.tags));continue}tn!=="LineString"&&tn!=="MultiLineString"||($n.length===1?(tn="LineString",$n=$n[0]):tn="MultiLineString"),tn!=="Point"&&tn!=="MultiPoint"||(tn=$n.length===3?"Point":"MultiPoint"),br.push(An(on.id,tn,$n,on.tags))}}}return br.length?br:null}function hs(dr,qt,Zt,cr,gr){for(var wr=0;wr<dr.length;wr+=3){var Pr=dr[wr+gr];Pr>=Zt&&Pr<=cr&&(qt.push(dr[wr]),qt.push(dr[wr+1]),qt.push(dr[wr+2]))}}function Mo(dr,qt,Zt,cr,gr,wr,Pr){for(var Cr,br,Dr=ys(dr),on=gr===0?ws:is,cn=dr.start,tn=0;tn<dr.length-3;tn+=3){var Rn=dr[tn],Nn=dr[tn+1],$n=dr[tn+2],Mn=dr[tn+3],Wn=dr[tn+4],vo=gr===0?Rn:Nn,Lo=gr===0?Mn:Wn,ts=!1;Pr&&(Cr=Math.sqrt(Math.pow(Rn-Mn,2)+Math.pow(Nn-Wn,2))),vo<Zt?Lo>Zt&&(br=on(Dr,Rn,Nn,Mn,Wn,Zt),Pr&&(Dr.start=cn+Cr*br)):vo>cr?Lo<cr&&(br=on(Dr,Rn,Nn,Mn,Wn,cr),Pr&&(Dr.start=cn+Cr*br)):Ko(Dr,Rn,Nn,$n),Lo<Zt&&vo>=Zt&&(br=on(Dr,Rn,Nn,Mn,Wn,Zt),ts=!0),Lo>cr&&vo<=cr&&(br=on(Dr,Rn,Nn,Mn,Wn,cr),ts=!0),!wr&&ts&&(Pr&&(Dr.end=cn+Cr*br),qt.push(Dr),Dr=ys(dr)),Pr&&(cn+=Cr)}var Bo=dr.length-3;Rn=dr[Bo],Nn=dr[Bo+1],$n=dr[Bo+2],(vo=gr===0?Rn:Nn)>=Zt&&vo<=cr&&Ko(Dr,Rn,Nn,$n),Bo=Dr.length-3,wr&&Bo>=3&&(Dr[Bo]!==Dr[0]||Dr[Bo+1]!==Dr[1])&&Ko(Dr,Dr[0],Dr[1],Dr[2]),Dr.length&&qt.push(Dr)}function ys(dr){var qt=[];return qt.size=dr.size,qt.start=dr.start,qt.end=dr.end,qt}function Jo(dr,qt,Zt,cr,gr,wr){for(var Pr=0;Pr<dr.length;Pr++)Mo(dr[Pr],qt,Zt,cr,gr,wr,!1)}function Ko(dr,qt,Zt,cr){dr.push(qt),dr.push(Zt),dr.push(cr)}function ws(dr,qt,Zt,cr,gr,wr){var Pr=(wr-qt)/(cr-qt);return dr.push(wr),dr.push(Zt+(gr-Zt)*Pr),dr.push(1),Pr}function is(dr,qt,Zt,cr,gr,wr){var Pr=(wr-Zt)/(gr-Zt);return dr.push(qt+(cr-qt)*Pr),dr.push(wr),dr.push(1),Pr}function Oo(dr,qt){for(var Zt=[],cr=0;cr<dr.length;cr++){var gr,wr=dr[cr],Pr=wr.type;if(Pr==="Point"||Pr==="MultiPoint"||Pr==="LineString")gr=es(wr.geometry,qt);else if(Pr==="MultiLineString"||Pr==="Polygon"){gr=[];for(var Cr=0;Cr<wr.geometry.length;Cr++)gr.push(es(wr.geometry[Cr],qt))}else if(Pr==="MultiPolygon")for(gr=[],Cr=0;Cr<wr.geometry.length;Cr++){for(var br=[],Dr=0;Dr<wr.geometry[Cr].length;Dr++)br.push(es(wr.geometry[Cr][Dr],qt));gr.push(br)}Zt.push(An(wr.id,Pr,gr,wr.tags))}return Zt}function es(dr,qt){var Zt=[];Zt.size=dr.size,dr.start!==void 0&&(Zt.start=dr.start,Zt.end=dr.end);for(var cr=0;cr<dr.length;cr+=3)Zt.push(dr[cr]+qt,dr[cr+1],dr[cr+2]);return Zt}function us(dr,qt){if(dr.transformed)return dr;var Zt,cr,gr,wr=1<<dr.z,Pr=dr.x,Cr=dr.y;for(Zt=0;Zt<dr.features.length;Zt++){var br=dr.features[Zt],Dr=br.geometry,on=br.type;if(br.geometry=[],on===1)for(cr=0;cr<Dr.length;cr+=2)br.geometry.push(rs(Dr[cr],Dr[cr+1],qt,wr,Pr,Cr));else for(cr=0;cr<Dr.length;cr++){var cn=[];for(gr=0;gr<Dr[cr].length;gr+=2)cn.push(rs(Dr[cr][gr],Dr[cr][gr+1],qt,wr,Pr,Cr));br.geometry.push(cn)}}return dr.transformed=!0,dr}function rs(dr,qt,Zt,cr,gr,wr){return[Math.round(Zt*(dr*cr-gr)),Math.round(Zt*(qt*cr-wr))]}function ns(dr,qt,Zt,cr,gr){for(var wr=qt===gr.maxZoom?0:gr.tolerance/((1<<qt)*gr.extent),Pr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Zt,y:cr,z:qt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Cr=0;Cr<dr.length;Cr++){Pr.numFeatures++,Ss(Pr,dr[Cr],wr,gr);var br=dr[Cr].minX,Dr=dr[Cr].minY,on=dr[Cr].maxX,cn=dr[Cr].maxY;br<Pr.minX&&(Pr.minX=br),Dr<Pr.minY&&(Pr.minY=Dr),on>Pr.maxX&&(Pr.maxX=on),cn>Pr.maxY&&(Pr.maxY=cn)}return Pr}function Ss(dr,qt,Zt,cr){var gr=qt.geometry,wr=qt.type,Pr=[];if(wr==="Point"||wr==="MultiPoint")for(var Cr=0;Cr<gr.length;Cr+=3)Pr.push(gr[Cr]),Pr.push(gr[Cr+1]),dr.numPoints++,dr.numSimplified++;else if(wr==="LineString")Ts(Pr,gr,dr,Zt,!1,!1);else if(wr==="MultiLineString"||wr==="Polygon")for(Cr=0;Cr<gr.length;Cr++)Ts(Pr,gr[Cr],dr,Zt,wr==="Polygon",Cr===0);else if(wr==="MultiPolygon")for(var br=0;br<gr.length;br++){var Dr=gr[br];for(Cr=0;Cr<Dr.length;Cr++)Ts(Pr,Dr[Cr],dr,Zt,!0,Cr===0)}if(Pr.length){var on=qt.tags||null;if(wr==="LineString"&&cr.lineMetrics){for(var cn in on={},qt.tags)on[cn]=qt.tags[cn];on.mapbox_clip_start=gr.start/gr.size,on.mapbox_clip_end=gr.end/gr.size}var tn={geometry:Pr,type:wr==="Polygon"||wr==="MultiPolygon"?3:wr==="LineString"||wr==="MultiLineString"?2:1,tags:on};qt.id!==null&&(tn.id=qt.id),dr.features.push(tn)}}function Ts(dr,qt,Zt,cr,gr,wr){var Pr=cr*cr;if(cr>0&&qt.size<(gr?Pr:cr))Zt.numPoints+=qt.length/3;else{for(var Cr=[],br=0;br<qt.length;br+=3)(cr===0||qt[br+2]>Pr)&&(Zt.numSimplified++,Cr.push(qt[br]),Cr.push(qt[br+1])),Zt.numPoints++;gr&&function(Dr,on){for(var cn=0,tn=0,Rn=Dr.length,Nn=Rn-2;tn<Rn;Nn=tn,tn+=2)cn+=(Dr[tn]-Dr[Nn])*(Dr[tn+1]+Dr[Nn+1]);if(cn>0===on)for(tn=0,Rn=Dr.length;tn<Rn/2;tn+=2){var $n=Dr[tn],Mn=Dr[tn+1];Dr[tn]=Dr[Rn-2-tn],Dr[tn+1]=Dr[Rn-1-tn],Dr[Rn-2-tn]=$n,Dr[Rn-1-tn]=Mn}}(Cr,wr),dr.push(Cr)}}function na(dr,qt){var Zt=(qt=this.options=function(gr,wr){for(var Pr in wr)gr[Pr]=wr[Pr];return gr}(Object.create(this.options),qt)).debug;if(Zt&&console.time("preprocess data"),qt.maxZoom<0||qt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(qt.promoteId&&qt.generateId)throw new Error("promoteId and generateId cannot be used together.");var cr=function(gr,wr){var Pr=[];if(gr.type==="FeatureCollection")for(var Cr=0;Cr<gr.features.length;Cr++)jn(Pr,gr.features[Cr],wr,Cr);else jn(Pr,gr.type==="Feature"?gr:{geometry:gr},wr);return Pr}(dr,qt);this.tiles={},this.tileCoords=[],Zt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",qt.indexMaxZoom,qt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),cr=function(gr,wr){var Pr=wr.buffer/wr.extent,Cr=gr,br=So(gr,1,-1-Pr,Pr,0,-1,2,wr),Dr=So(gr,1,1-Pr,2+Pr,0,-1,2,wr);return(br||Dr)&&(Cr=So(gr,1,-Pr,1+Pr,0,-1,2,wr)||[],br&&(Cr=Oo(br,1).concat(Cr)),Dr&&(Cr=Cr.concat(Oo(Dr,-1)))),Cr}(cr,qt),cr.length&&this.splitTile(cr,0,0,0),Zt&&(cr.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Sl(dr,qt,Zt){return 32*((1<<dr)*Zt+qt)+dr}function Tl(dr,qt){const Zt=dr.tileID.canonical;if(!this._geoJSONIndex)return qt(null,null);const cr=this._geoJSONIndex.getTile(Zt.z,Zt.x,Zt.y);if(!cr)return qt(null,null);const gr=new class{constructor(Pr){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=_.EXTENT,this.length=Pr.length,this._features=Pr}feature(Pr){return new class{constructor(Cr){this._feature=Cr,this.extent=_.EXTENT,this.type=Cr.type,this.properties=Cr.tags,"id"in Cr&&!isNaN(Cr.id)&&(this.id=parseInt(Cr.id,10))}loadGeometry(){if(this._feature.type===1){const Cr=[];for(const br of this._feature.geometry)Cr.push([new _.Point(br[0],br[1])]);return Cr}{const Cr=[];for(const br of this._feature.geometry){const Dr=[];for(const on of br)Dr.push(new _.Point(on[0],on[1]));Cr.push(Dr)}return Cr}}toGeoJSON(Cr,br,Dr){return Lt.call(this,Cr,br,Dr)}}(this._features[Pr])}}(cr.features);let wr=hr(gr);wr.byteOffset===0&&wr.byteLength===wr.buffer.byteLength||(wr=new Uint8Array(wr)),qt(null,{vectorTile:gr,rawData:wr.buffer})}na.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},na.prototype.splitTile=function(dr,qt,Zt,cr,gr,wr,Pr){for(var Cr=[dr,qt,Zt,cr],br=this.options,Dr=br.debug;Cr.length;){cr=Cr.pop(),Zt=Cr.pop(),qt=Cr.pop(),dr=Cr.pop();var on=1<<qt,cn=Sl(qt,Zt,cr),tn=this.tiles[cn];if(!tn&&(Dr>1&&console.time("creation"),tn=this.tiles[cn]=ns(dr,qt,Zt,cr,br),this.tileCoords.push({z:qt,x:Zt,y:cr}),Dr)){Dr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",qt,Zt,cr,tn.numFeatures,tn.numPoints,tn.numSimplified),console.timeEnd("creation"));var Rn="z"+qt;this.stats[Rn]=(this.stats[Rn]||0)+1,this.total++}if(tn.source=dr,gr){if(qt===br.maxZoom||qt===gr)continue;var Nn=1<<gr-qt;if(Zt!==Math.floor(wr/Nn)||cr!==Math.floor(Pr/Nn))continue}else if(qt===br.indexMaxZoom||tn.numPoints<=br.indexMaxPoints)continue;if(tn.source=null,dr.length!==0){Dr>1&&console.time("clipping");var $n,Mn,Wn,vo,Lo,ts,Bo=.5*br.buffer/br.extent,Bs=.5-Bo,Fo=.5+Bo,ds=1+Bo;$n=Mn=Wn=vo=null,Lo=So(dr,on,Zt-Bo,Zt+Fo,0,tn.minX,tn.maxX,br),ts=So(dr,on,Zt+Bs,Zt+ds,0,tn.minX,tn.maxX,br),dr=null,Lo&&($n=So(Lo,on,cr-Bo,cr+Fo,1,tn.minY,tn.maxY,br),Mn=So(Lo,on,cr+Bs,cr+ds,1,tn.minY,tn.maxY,br),Lo=null),ts&&(Wn=So(ts,on,cr-Bo,cr+Fo,1,tn.minY,tn.maxY,br),vo=So(ts,on,cr+Bs,cr+ds,1,tn.minY,tn.maxY,br),ts=null),Dr>1&&console.timeEnd("clipping"),Cr.push($n||[],qt+1,2*Zt,2*cr),Cr.push(Mn||[],qt+1,2*Zt,2*cr+1),Cr.push(Wn||[],qt+1,2*Zt+1,2*cr),Cr.push(vo||[],qt+1,2*Zt+1,2*cr+1)}}},na.prototype.getTile=function(dr,qt,Zt){var cr=this.options,gr=cr.extent,wr=cr.debug;if(dr<0||dr>24)return null;var Pr=1<<dr,Cr=Sl(dr,qt=(qt%Pr+Pr)%Pr,Zt);if(this.tiles[Cr])return us(this.tiles[Cr],gr);wr>1&&console.log("drilling down to z%d-%d-%d",dr,qt,Zt);for(var br,Dr=dr,on=qt,cn=Zt;!br&&Dr>0;)Dr--,on=Math.floor(on/2),cn=Math.floor(cn/2),br=this.tiles[Sl(Dr,on,cn)];return br&&br.source?(wr>1&&console.log("found parent tile z%d-%d-%d",Dr,on,cn),wr>1&&console.time("drilling down"),this.splitTile(br.source,Dr,on,cn,dr,qt,Zt),wr>1&&console.timeEnd("drilling down"),this.tiles[Cr]?us(this.tiles[Cr],gr):null):null};class Wl extends _.VectorTileWorkerSource{constructor(qt,Zt,cr,gr,wr){super(qt,Zt,cr,gr,Tl),wr&&(this.loadGeoJSON=wr)}loadData(qt,Zt){const cr=qt&&qt.request,gr=cr&&cr.collectResourceTiming;this.loadGeoJSON(qt,(wr,Pr)=>{if(wr||!Pr)return Zt(wr);if(typeof Pr!="object")return Zt(new Error(`Input data given to '${qt.source}' is not a valid GeoJSON object.`));{At(Pr,!0);try{if(qt.filter){const br=_.createExpression(qt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(br.result==="error")throw new Error(br.value.map(on=>`${on.key}: ${on.message}`).join(", "));Pr={type:"FeatureCollection",features:Pr.features.filter(on=>br.value.evaluate({zoom:0},on))}}this._geoJSONIndex=qt.cluster?new Yr(function({superclusterOptions:br,clusterProperties:Dr}){if(!Dr||!br)return br;const on={},cn={},tn={accumulated:null,zoom:0},Rn={properties:null},Nn=Object.keys(Dr);for(const $n of Nn){const[Mn,Wn]=Dr[$n],vo=_.createExpression(Wn),Lo=_.createExpression(typeof Mn=="string"?[Mn,["accumulated"],["get",$n]]:Mn);on[$n]=vo.value,cn[$n]=Lo.value}return br.map=$n=>{Rn.properties=$n;const Mn={};for(const Wn of Nn)Mn[Wn]=on[Wn].evaluate(tn,Rn);return Mn},br.reduce=($n,Mn)=>{Rn.properties=Mn;for(const Wn of Nn)tn.accumulated=$n[Wn],$n[Wn]=cn[Wn].evaluate(tn,Rn)},br}(qt)).load(Pr.features):function(br,Dr){return new na(br,Dr)}(Pr,qt.geojsonVtOptions)}catch(br){return Zt(br)}this.loaded={};const Cr={};if(gr){const br=_.getPerformanceMeasurement(cr);br&&(Cr.resourceTiming={},Cr.resourceTiming[qt.source]=JSON.parse(JSON.stringify(br)))}Zt(null,Cr)}})}reloadTile(qt,Zt){const cr=this.loaded;return cr&&cr[qt.uid]?super.reloadTile(qt,Zt):this.loadTile(qt,Zt)}loadGeoJSON(qt,Zt){if(qt.request)_.getJSON(qt.request,Zt);else{if(typeof qt.data!="string")return Zt(new Error(`Input data given to '${qt.source}' is not a valid GeoJSON object.`));try{return Zt(null,JSON.parse(qt.data))}catch(cr){return Zt(new Error(`Input data given to '${qt.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(qt,Zt){try{Zt(null,this._geoJSONIndex.getClusterExpansionZoom(qt.clusterId))}catch(cr){Zt(cr)}}getClusterChildren(qt,Zt){try{Zt(null,this._geoJSONIndex.getChildren(qt.clusterId))}catch(cr){Zt(cr)}}getClusterLeaves(qt,Zt){try{Zt(null,this._geoJSONIndex.getLeaves(qt.clusterId,qt.limit,qt.offset))}catch(cr){Zt(cr)}}}class wu{constructor(qt){this.self=qt,this.actor=new _.Actor(qt,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=_.getProjection({name:"mercator"}),this.workerSourceTypes={vector:_.VectorTileWorkerSource,geojson:Wl},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Zt,cr)=>{if(this.workerSourceTypes[Zt])throw new Error(`Worker source with name "${Zt}" already registered.`);this.workerSourceTypes[Zt]=cr},this.self.registerRTLTextPlugin=Zt=>{if(_.plugin.isParsed())throw new Error("RTL text plugin already registered.");_.plugin.applyArabicShaping=Zt.applyArabicShaping,_.plugin.processBidirectionalText=Zt.processBidirectionalText,_.plugin.processStyledBidirectionalText=Zt.processStyledBidirectionalText}}clearCaches(qt,Zt,cr){delete this.layerIndexes[qt],delete this.availableImages[qt],delete this.workerSources[qt],delete this.demWorkerSources[qt],cr()}checkIfReady(qt,Zt,cr){cr()}setReferrer(qt,Zt){this.referrer=Zt}spriteLoaded(qt,Zt){this.isSpriteLoaded[qt]=Zt;for(const cr in this.workerSources[qt]){const gr=this.workerSources[qt][cr];for(const wr in gr)gr[wr]instanceof _.VectorTileWorkerSource&&(gr[wr].isSpriteLoaded=Zt,gr[wr].fire(new _.Event("isSpriteLoaded")))}}setImages(qt,Zt,cr){this.availableImages[qt]=Zt;for(const gr in this.workerSources[qt]){const wr=this.workerSources[qt][gr];for(const Pr in wr)wr[Pr].availableImages=Zt}cr()}enableTerrain(qt,Zt,cr){this.terrain=Zt,cr()}setProjection(qt,Zt){this.projections[qt]=_.getProjection(Zt)}setLayers(qt,Zt,cr){this.getLayerIndex(qt).replace(Zt),cr()}updateLayers(qt,Zt,cr){this.getLayerIndex(qt).update(Zt.layers,Zt.removedIds),cr()}loadTile(qt,Zt,cr){const gr=this.enableTerrain?_.extend({enableTerrain:this.terrain},Zt):Zt;gr.projection=this.projections[qt]||this.defaultProjection,this.getWorkerSource(qt,Zt.type,Zt.source).loadTile(gr,cr)}loadDEMTile(qt,Zt,cr){const gr=this.enableTerrain?_.extend({buildQuadTree:this.terrain},Zt):Zt;this.getDEMWorkerSource(qt,Zt.source).loadTile(gr,cr)}reloadTile(qt,Zt,cr){const gr=this.enableTerrain?_.extend({enableTerrain:this.terrain},Zt):Zt;gr.projection=this.projections[qt]||this.defaultProjection,this.getWorkerSource(qt,Zt.type,Zt.source).reloadTile(gr,cr)}abortTile(qt,Zt,cr){this.getWorkerSource(qt,Zt.type,Zt.source).abortTile(Zt,cr)}removeTile(qt,Zt,cr){this.getWorkerSource(qt,Zt.type,Zt.source).removeTile(Zt,cr)}removeSource(qt,Zt,cr){if(!this.workerSources[qt]||!this.workerSources[qt][Zt.type]||!this.workerSources[qt][Zt.type][Zt.source])return;const gr=this.workerSources[qt][Zt.type][Zt.source];delete this.workerSources[qt][Zt.type][Zt.source],gr.removeSource!==void 0?gr.removeSource(Zt,cr):cr()}loadWorkerSource(qt,Zt,cr){try{this.self.importScripts(Zt.url),cr()}catch(gr){cr(gr.toString())}}syncRTLPluginState(qt,Zt,cr){try{_.plugin.setState(Zt);const gr=_.plugin.getPluginURL();if(_.plugin.isLoaded()&&!_.plugin.isParsed()&&gr!=null){this.self.importScripts(gr);const wr=_.plugin.isParsed();cr(wr?void 0:new Error(`RTL Text Plugin failed to import scripts from ${gr}`),wr)}}catch(gr){cr(gr.toString())}}getAvailableImages(qt){let Zt=this.availableImages[qt];return Zt||(Zt=[]),Zt}getLayerIndex(qt){let Zt=this.layerIndexes[qt];return Zt||(Zt=this.layerIndexes[qt]=new vt),Zt}getWorkerSource(qt,Zt,cr){if(this.workerSources[qt]||(this.workerSources[qt]={}),this.workerSources[qt][Zt]||(this.workerSources[qt][Zt]={}),!this.workerSources[qt][Zt][cr]){const gr={send:(wr,Pr,Cr,br,Dr,on)=>{this.actor.send(wr,Pr,Cr,qt,Dr,on)},scheduler:this.actor.scheduler};this.workerSources[qt][Zt][cr]=new this.workerSourceTypes[Zt](gr,this.getLayerIndex(qt),this.getAvailableImages(qt),this.isSpriteLoaded[qt])}return this.workerSources[qt][Zt][cr]}getDEMWorkerSource(qt,Zt){return this.demWorkerSources[qt]||(this.demWorkerSources[qt]={}),this.demWorkerSources[qt][Zt]||(this.demWorkerSources[qt][Zt]=new wt),this.demWorkerSources[qt][Zt]}enforceCacheSizeLimit(qt,Zt){_.enforceCacheSizeLimit(Zt)}getWorkerPerformanceMetrics(qt,Zt,cr){cr(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new wu(self)),wu}),rt(["./shared"],function(_){function ut(at,et){if(Array.isArray(at)){if(!Array.isArray(et)||at.length!==et.length)return!1;for(let nt=0;nt<at.length;nt++)if(!ut(at[nt],et[nt]))return!1;return!0}if(typeof at=="object"&&at!==null&&et!==null){if(typeof et!="object"||Object.keys(at).length!==Object.keys(et).length)return!1;for(const nt in at)if(!ut(at[nt],et[nt]))return!1;return!0}return at===et}var mt=vt;function vt(at){return!function(et){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ct,dt,ft=new Blob([""],{type:"text/javascript"}),_t=URL.createObjectURL(ft);try{dt=new Worker(_t),ct=!0}catch(xt){ct=!1}return dt&&dt.terminate(),URL.revokeObjectURL(_t),ct}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ct=document.createElement("canvas");ct.width=ct.height=1;var dt=ct.getContext("2d");if(!dt)return!1;var ft=dt.getImageData(0,0,1,1);return ft&&ft.width===ct.width}()?(wt[nt=et&&et.failIfMajorPerformanceCaveat]===void 0&&(wt[nt]=function(ct){var dt,ft=function(_t){var xt=document.createElement("canvas"),kt=Object.create(vt.webGLContextAttributes);return kt.failIfMajorPerformanceCaveat=_t,xt.getContext("webgl",kt)||xt.getContext("experimental-webgl",kt)}(ct);if(!ft)return!1;try{dt=ft.createShader(ft.VERTEX_SHADER)}catch(_t){return!1}return!(!dt||ft.isContextLost())&&(ft.shaderSource(dt,"void main() {}"),ft.compileShader(dt),ft.getShaderParameter(dt,ft.COMPILE_STATUS)===!0)}(nt)),wt[nt]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var nt}(at)}var wt={};function bt(at,et,nt){const ct=_.window.document.createElement(at);return et!==void 0&&(ct.className=et),nt&&nt.appendChild(ct),ct}function Mt(at,et,nt){const ct=_.window.document.createElementNS("http://www.w3.org/2000/svg",at);for(const dt of Object.keys(et))ct.setAttributeNS(null,dt,et[dt]);return nt&&nt.appendChild(ct),ct}vt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const At=_.window.document&&_.window.document.documentElement.style,Lt=At&&At.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Ht;function Tt(){At&&Lt&&(Ht=At[Lt],At[Lt]="none")}function Ct(){At&&Lt&&(At[Lt]=Ht)}function St(at){at.preventDefault(),at.stopPropagation(),_.window.removeEventListener("click",St,!0)}function It(){_.window.addEventListener("click",St,!0),_.window.setTimeout(()=>{_.window.removeEventListener("click",St,!0)},0)}function Bt(at,et){const nt=at.getBoundingClientRect();return Xt(at,nt,et)}function Ft(at,et){const nt=at.getBoundingClientRect(),ct=[];for(let dt=0;dt<et.length;dt++)ct.push(Xt(at,nt,et[dt]));return ct}function Gt(at){return _.window.InstallTrigger!==void 0&&at.button===2&&at.ctrlKey&&_.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:at.button}function Xt(at,et,nt){const ct=at.offsetWidth===et.width?1:at.offsetWidth/et.width;return new _.Point((nt.clientX-et.left)*ct,(nt.clientY-et.top)*ct)}function ir(at,et){var nt=et[0],ct=et[1],dt=et[2],ft=et[3],_t=nt*ft-dt*ct;return _t?(at[0]=ft*(_t=1/_t),at[1]=-ct*_t,at[2]=-dt*_t,at[3]=nt*_t,at):null}function $r(at){const{userImage:et}=at;return!!(et&&et.render&&et.render())&&(at.data.replace(new Uint8Array(et.data.buffer)),!0)}class Tr extends _.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new _.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(et){if(this.loaded!==et&&(this.loaded=et,et)){for(const{ids:nt,callback:ct}of this.requestors)this._notify(nt,ct);this.requestors=[]}}hasImage(et){return!!this.getImage(et)}getImage(et){return this.images[et]}addImage(et,nt){this._validate(et,nt)&&(this.images[et]=nt)}_validate(et,nt){let ct=!0;return this._validateStretch(nt.stretchX,nt.data&&nt.data.width)||(this.fire(new _.ErrorEvent(new Error(`Image "${et}" has invalid "stretchX" value`))),ct=!1),this._validateStretch(nt.stretchY,nt.data&&nt.data.height)||(this.fire(new _.ErrorEvent(new Error(`Image "${et}" has invalid "stretchY" value`))),ct=!1),this._validateContent(nt.content,nt)||(this.fire(new _.ErrorEvent(new Error(`Image "${et}" has invalid "content" value`))),ct=!1),ct}_validateStretch(et,nt){if(!et)return!0;let ct=0;for(const dt of et){if(dt[0]<ct||dt[1]<dt[0]||nt<dt[1])return!1;ct=dt[1]}return!0}_validateContent(et,nt){return!(et&&(et.length!==4||et[0]<0||nt.data.width<et[0]||et[1]<0||nt.data.height<et[1]||et[2]<0||nt.data.width<et[2]||et[3]<0||nt.data.height<et[3]||et[2]<et[0]||et[3]<et[1]))}updateImage(et,nt){nt.version=this.images[et].version+1,this.images[et]=nt,this.updatedImages[et]=!0}removeImage(et){const nt=this.images[et];delete this.images[et],delete this.patterns[et],nt.userImage&&nt.userImage.onRemove&&nt.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(et,nt){let ct=!0;if(!this.isLoaded())for(const dt of et)this.images[dt]||(ct=!1);this.isLoaded()||ct?this._notify(et,nt):this.requestors.push({ids:et,callback:nt})}_notify(et,nt){const ct={};for(const dt of et){this.images[dt]||this.fire(new _.Event("styleimagemissing",{id:dt}));const ft=this.images[dt];ft?ct[dt]={data:ft.data.clone(),pixelRatio:ft.pixelRatio,sdf:ft.sdf,version:ft.version,stretchX:ft.stretchX,stretchY:ft.stretchY,content:ft.content,hasRenderCallback:!!(ft.userImage&&ft.userImage.render)}:_.warnOnce(`Image "${dt}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}nt(null,ct)}getPixelSize(){const{width:et,height:nt}=this.atlasImage;return{width:et,height:nt}}getPattern(et){const nt=this.patterns[et],ct=this.getImage(et);if(!ct)return null;if(nt&&nt.position.version===ct.version)return nt.position;if(nt)nt.position.version=ct.version;else{const dt={w:ct.data.width+2,h:ct.data.height+2,x:0,y:0},ft=new _.ImagePosition(dt,ct);this.patterns[et]={bin:dt,position:ft}}return this._updatePatternAtlas(),this.patterns[et].position}bind(et){const nt=et.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _.Texture(et,this.atlasImage,nt.RGBA),this.atlasTexture&&this.atlasTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}_updatePatternAtlas(){const et=[];for(const ft in this.patterns)et.push(this.patterns[ft].bin);const{w:nt,h:ct}=_.potpack(et),dt=this.atlasImage;dt.resize({width:nt||1,height:ct||1});for(const ft in this.patterns){const{bin:_t}=this.patterns[ft],xt=_t.x+1,kt=_t.y+1,$t=this.images[ft].data,Dt=$t.width,Vt=$t.height;_.RGBAImage.copy($t,dt,{x:0,y:0},{x:xt,y:kt},{width:Dt,height:Vt}),_.RGBAImage.copy($t,dt,{x:0,y:Vt-1},{x:xt,y:kt-1},{width:Dt,height:1}),_.RGBAImage.copy($t,dt,{x:0,y:0},{x:xt,y:kt+Vt},{width:Dt,height:1}),_.RGBAImage.copy($t,dt,{x:Dt-1,y:0},{x:xt-1,y:kt},{width:1,height:Vt}),_.RGBAImage.copy($t,dt,{x:0,y:0},{x:xt+Dt,y:kt},{width:1,height:Vt})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(et){for(const nt of et){if(this.callbackDispatchedThisFrame[nt])continue;this.callbackDispatchedThisFrame[nt]=!0;const ct=this.images[nt];$r(ct)&&this.updateImage(nt,ct)}}}const xr=new _.Properties({anchor:new _.DataConstantProperty(_.spec.light.anchor),position:new class{constructor(){this.specification=_.spec.light.position}possiblyEvaluate(at,et){return function([nt,ct,dt]){const ft=_.degToRad(ct+90),_t=_.degToRad(dt);return{x:nt*Math.cos(ft)*Math.sin(_t),y:nt*Math.sin(ft)*Math.sin(_t),z:nt*Math.cos(_t),azimuthal:ct,polar:dt}}(at.expression.evaluate(et))}interpolate(at,et,nt){return{x:_.number(at.x,et.x,nt),y:_.number(at.y,et.y,nt),z:_.number(at.z,et.z,nt),azimuthal:_.number(at.azimuthal,et.azimuthal,nt),polar:_.number(at.polar,et.polar,nt)}}},color:new _.DataConstantProperty(_.spec.light.color),intensity:new _.DataConstantProperty(_.spec.light.intensity)});class Xr extends _.Evented{constructor(et){super(),this._transitionable=new _.Transitionable(xr),this.setLight(et),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(et,nt={}){if(!this._validate(_.validateLight,et,nt))for(const ct in et){const dt=et[ct];_.endsWith(ct,"-transition")?this._transitionable.setTransition(ct.slice(0,-11),dt):this._transitionable.setValue(ct,dt)}}updateTransitions(et){this._transitioning=this._transitionable.transitioned(et,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(et){this.properties=this._transitioning.possiblyEvaluate(et)}_validate(et,nt,ct){return(!ct||ct.validate!==!1)&&_.emitValidationErrors(this,et.call(_.validateStyle,_.extend({value:nt,style:{glyphs:!0,sprite:!0},styleSpec:_.spec})))}}const ln=new _.Properties({source:new _.DataConstantProperty(_.spec.terrain.source),exaggeration:new _.DataConstantProperty(_.spec.terrain.exaggeration)});let zr=class extends _.Evented{constructor(at,et){super(),this._transitionable=new _.Transitionable(ln),this.set(at),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=et}get(){return this._transitionable.serialize()}set(at){for(const et in at){const nt=at[et];_.endsWith(et,"-transition")?this._transitionable.setTransition(et.slice(0,-11),nt):this._transitionable.setValue(et,nt)}}updateTransitions(at){this._transitioning=this._transitionable.transitioned(at,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(at){this.properties=this._transitioning.possiblyEvaluate(at)}};function hr(at,et,nt,ct){const dt=_.smoothstep(45,65,nt),[ft,_t]=Er(at,ct),xt=_.length(et);let kt=1-Math.min(1,Math.exp((xt-ft)/(_t-ft)*-6));return kt*=kt*kt,kt=Math.min(1,1.00747*kt),kt*dt*at.alpha}function Er(at,et){const nt=.5/Math.tan(.5*et);return[at.range[0]+nt,at.range[1]+nt]}const Nt=new _.Properties({range:new _.DataConstantProperty(_.spec.fog.range),color:new _.DataConstantProperty(_.spec.fog.color),"high-color":new _.DataConstantProperty(_.spec.fog["high-color"]),"space-color":new _.DataConstantProperty(_.spec.fog["space-color"]),"horizon-blend":new _.DataConstantProperty(_.spec.fog["horizon-blend"]),"star-intensity":new _.DataConstantProperty(_.spec.fog["star-intensity"])});class Wt extends _.Evented{constructor(et,nt){super(),this._transitionable=new _.Transitionable(Nt),this.set(et),this._transitioning=this._transitionable.untransitioned(),this._transform=nt}get state(){const et=this._transform,nt=et.projection.name==="globe",ct=_.globeToMercatorTransition(et.zoom),dt=this.properties.get("range"),ft=[.5,3];return{range:nt?[_.number(ft[0],dt[0],ct),_.number(ft[1],dt[1],ct)]:dt,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(et,nt={}){if(!this._validate(_.validateFog,et,nt)){for(const ct of Object.keys(_.spec.fog))et&&et[ct]===void 0&&(et[ct]=_.spec.fog[ct].default);for(const ct in et){const dt=et[ct];_.endsWith(ct,"-transition")?this._transitionable.setTransition(ct.slice(0,-11),dt):this._transitionable.setValue(ct,dt)}}}getOpacity(et){if(!this._transform.projection.supportsFog)return 0;const nt=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:_.smoothstep(45,65,et))*nt.a}getOpacityAtLatLng(et,nt){return this._transform.projection.supportsFog?function(ct,dt,ft){const _t=_.MercatorCoordinate.fromLngLat(dt),xt=ft.elevation?ft.elevation.getAtPointOrZero(_t):0,kt=[_t.x,_t.y,xt];return _.transformMat4(kt,kt,ft.mercatorFogMatrix),hr(ct,kt,ft.pitch,ft._fov)}(this.state,et,nt):0}getFovAdjustedRange(et){return this._transform.projection.supportsFog?Er(this.state,et):[0,1]}updateTransitions(et){this._transitioning=this._transitionable.transitioned(et,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(et){this.properties=this._transitioning.possiblyEvaluate(et)}_validate(et,nt,ct){return(!ct||ct.validate!==!1)&&_.emitValidationErrors(this,et.call(_.validateStyle,_.extend({value:nt,style:{glyphs:!0,sprite:!0},styleSpec:_.spec})))}}class or{constructor(et,nt){this.workerPool=et,this.actors=[],this.currentActor=0,this.id=_.uniqueId();const ct=this.workerPool.acquire(this.id);for(let dt=0;dt<ct.length;dt++){const ft=new or.Actor(ct[dt],nt,this.id);ft.name=`Worker ${dt}`,this.actors.push(ft)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(et,nt,ct){_.asyncAll(this.actors,(dt,ft)=>{dt.send(et,nt,ft)},ct=ct||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(et=>{et.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ar(at,et,nt){return et*(_.EXTENT/(at.tileSize*Math.pow(2,nt-at.tileID.overscaledZ)))}or.Actor=_.Actor;class Fr{constructor(et,nt,ct,dt){this.screenBounds=et,this.cameraPoint=nt,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=ct,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,dt)}static createFromScreenPoints(et,nt){let ct,dt;if(et instanceof _.Point||typeof et[0]=="number"){const ft=_.Point.convert(et);ct=[ft],dt=nt.isPointAboveHorizon(ft)}else{const ft=_.Point.convert(et[0]),_t=_.Point.convert(et[1]);ct=[ft,_t],dt=_.polygonizeBounds(ft,_t).every(xt=>nt.isPointAboveHorizon(xt))}return new Fr(ct,nt.getCameraPoint(),dt,nt)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(et){return _.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],et)}bufferedCameraGeometry(et){const nt=this.screenBounds[0],ct=this.screenBounds.length===1?this.screenBounds[0].add(new _.Point(1,1)):this.screenBounds[1],dt=_.polygonizeBounds(nt,ct,0,!1);return this.cameraPoint.y>ct.y&&(this.cameraPoint.x>nt.x&&this.cameraPoint.x<ct.x?dt.splice(3,0,this.cameraPoint):this.cameraPoint.x>=ct.x?dt[2]=this.cameraPoint:this.cameraPoint.x<=nt.x&&(dt[3]=this.cameraPoint)),_.bufferConvexPolygon(dt,et)}bufferedCameraGeometryGlobe(et){const nt=this.screenBounds[0],ct=this.screenBounds.length===1?this.screenBounds[0].add(new _.Point(1,1)):this.screenBounds[1],dt=_.polygonizeBounds(nt,ct,et),ft=this.cameraPoint.clone();switch(3*((ft.y>nt.y)+(ft.y>ct.y))+((ft.x>nt.x)+(ft.x>ct.x))){case 0:dt[0]=ft,dt[4]=ft.clone();break;case 1:dt.splice(1,0,ft);break;case 2:dt[1]=ft;break;case 3:dt.splice(4,0,ft);break;case 5:dt.splice(2,0,ft);break;case 6:dt[3]=ft;break;case 7:dt.splice(3,0,ft);break;case 8:dt[2]=ft}return dt}containsTile(et,nt,ct,dt=0){const ft=et.queryPadding/nt._pixelsPerMercatorPixel+1,_t=ct?this._bufferedCameraMercator(ft,nt):this._bufferedScreenMercator(ft,nt);let xt=et.tileID.wrap+(_t.unwrapped?dt:0);const kt=_t.polygon.map(tr=>_.getTilePoint(et.tileTransform,tr,xt));if(!_.polygonIntersectsBox(kt,0,0,_.EXTENT,_.EXTENT))return;xt=et.tileID.wrap+(this.screenGeometryMercator.unwrapped?dt:0);const $t=this.screenGeometryMercator.polygon.map(tr=>_.getTileVec3(et.tileTransform,tr,xt)),Dt=$t.map(tr=>new _.Point(tr[0],tr[1])),Vt=nt.getFreeCameraOptions().position||new _.MercatorCoordinate(0,0,0),Yt=_.getTileVec3(et.tileTransform,Vt,xt),Jt=$t.map(tr=>{const jt=_.sub(tr,tr,Yt);return _.normalize(jt,jt),new _.Ray(Yt,jt)}),er=ar(et,1,nt.zoom)*nt._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Dt,tilespaceRays:Jt,bufferedTilespaceGeometry:kt,bufferedTilespaceBounds:(_i=_.getBounds(kt),_i.min.x=_.clamp(_i.min.x,0,_.EXTENT),_i.min.y=_.clamp(_i.min.y,0,_.EXTENT),_i.max.x=_.clamp(_i.max.x,0,_.EXTENT),_i.max.y=_.clamp(_i.max.y,0,_.EXTENT),_i),tile:et,tileID:et.tileID,pixelToTileUnitsFactor:er};var _i}_bufferedScreenMercator(et,nt){const ct=mn(et);if(this._screenRaycastCache[ct])return this._screenRaycastCache[ct];{let dt;return dt=nt.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(et),nt):{polygon:this.bufferedScreenGeometry(et).map(ft=>nt.pointCoordinate3D(ft)),unwrapped:!0},this._screenRaycastCache[ct]=dt,dt}}_bufferedCameraMercator(et,nt){const ct=mn(et);if(this._cameraRaycastCache[ct])return this._cameraRaycastCache[ct];{let dt;return dt=nt.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(et),nt):{polygon:this.bufferedCameraGeometry(et).map(ft=>nt.pointCoordinate3D(ft)),unwrapped:!0},this._cameraRaycastCache[ct]=dt,dt}}_projectAndResample(et,nt){const ct=function(ft,_t){const xt=_.multiply([],_t.pixelMatrix,_t.globeMatrix),kt=[0,-_.GLOBE_RADIUS,0,1],$t=[0,_.GLOBE_RADIUS,0,1],Dt=[0,0,0,1];_.transformMat4$1(kt,kt,xt),_.transformMat4$1($t,$t,xt),_.transformMat4$1(Dt,Dt,xt);const Vt=new _.Point(kt[0]/kt[3],kt[1]/kt[3]),Yt=new _.Point($t[0]/$t[3],$t[1]/$t[3]),Jt=_.polygonContainsPoint(ft,Vt)&&kt[3]<Dt[3],er=_.polygonContainsPoint(ft,Yt)&&$t[3]<Dt[3];if(!Jt&&!er)return null;const _i=function(vr,kr,Sr){for(let Lr=1;Lr<vr.length;Lr++){const Jr=hn(kr.pointCoordinate3D(vr[Lr-1]).x),Ar=hn(kr.pointCoordinate3D(vr[Lr]).x);if(Sr<0){if(Jr<Ar)return{idx:Lr,t:-Jr/(Ar-1-Jr)}}else if(Ar<Jr)return{idx:Lr,t:(1-Jr)/(Ar+1-Jr)}}return null}(ft,_t,Jt?-1:1);if(!_i)return null;const{idx:tr,t:jt}=_i;let Qt=tr>1?Yr(ft.slice(0,tr),_t):[],sr=tr<ft.length?Yr(ft.slice(tr),_t):[];Qt=Qt.map(vr=>new _.Point(hn(vr.x),vr.y)),sr=sr.map(vr=>new _.Point(hn(vr.x),vr.y));const lr=[...Qt];lr.length===0&&lr.push(sr[sr.length-1]);const yr=_.number(lr[lr.length-1].y,(sr.length===0?Qt[0]:sr[0]).y,jt);let _r;return _r=Jt?[new _.Point(0,yr),new _.Point(0,0),new _.Point(1,0),new _.Point(1,yr)]:[new _.Point(1,yr),new _.Point(1,1),new _.Point(0,1),new _.Point(0,yr)],lr.push(..._r),sr.length===0?lr.push(Qt[0]):lr.push(...sr),{polygon:lr.map(vr=>new _.MercatorCoordinate(vr.x,vr.y)),unwrapped:!1}}(et,nt);if(ct)return ct;const dt=function(ft,_t){let xt=!1,kt=-1/0,$t=0;for(let Vt=0;Vt<ft.length-1;Vt++)ft[Vt].x>kt&&(kt=ft[Vt].x,$t=Vt);for(let Vt=0;Vt<ft.length-1;Vt++){const Yt=($t+Vt)%(ft.length-1),Jt=ft[Yt],er=ft[Yt+1];Math.abs(Jt.x-er.x)>.5&&(Jt.x<er.x?(Jt.x+=1,Yt===0&&(ft[ft.length-1].x+=1)):(er.x+=1,Yt+1===ft.length-1&&(ft[0].x+=1)),xt=!0)}const Dt=_.mercatorXfromLng(_t.center.lng);return xt&&Dt<Math.abs(Dt-1)&&ft.forEach(Vt=>{Vt.x-=1}),{polygon:ft,unwrapped:xt}}(Yr(et,nt).map(ft=>new _.Point(hn(ft.x),ft.y)),nt);return{polygon:dt.polygon.map(ft=>new _.MercatorCoordinate(ft.x,ft.y)),unwrapped:dt.unwrapped}}}function Yr(at,et){return _.resample(at,nt=>{const ct=et.pointCoordinate3D(nt);nt.x=ct.x,nt.y=ct.y},1/256)}function hn(at){return at<0?1+at%1:at%1}function mn(at){return 100*at|0}function En(at,et,nt,ct,dt){const ft=function(_t,xt){if(_t)return dt(_t);if(xt){at.url&&xt.tiles&&at.tiles&&delete at.tiles;const kt=_.pick(_.extend(xt,at),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);xt.vector_layers&&(kt.vectorLayers=xt.vector_layers,kt.vectorLayerIds=kt.vectorLayers.map($t=>$t.id)),kt.tiles=et.canonicalizeTileset(kt,at.url),dt(null,kt)}};return at.url?_.getJSON(et.transformRequest(et.normalizeSourceURL(at.url,null,nt,ct),_.ResourceType.Source),ft):_.exported.frame(()=>ft(null,at))}class Ln{constructor(et,nt,ct){this.bounds=_.LngLatBounds.convert(this.validateBounds(et)),this.minzoom=nt||0,this.maxzoom=ct||24}validateBounds(et){return Array.isArray(et)&&et.length===4?[Math.max(-180,et[0]),Math.max(-90,et[1]),Math.min(180,et[2]),Math.min(90,et[3])]:[-180,-90,180,90]}contains(et){const nt=Math.pow(2,et.z),ct=Math.floor(_.mercatorXfromLng(this.bounds.getWest())*nt),dt=Math.floor(_.mercatorYfromLat(this.bounds.getNorth())*nt),ft=Math.ceil(_.mercatorXfromLng(this.bounds.getEast())*nt),_t=Math.ceil(_.mercatorYfromLat(this.bounds.getSouth())*nt);return et.x>=ct&&et.x<ft&&et.y>=dt&&et.y<_t}}class wo{constructor(et,nt,ct){this.context=et;const dt=et.gl;this.buffer=dt.createBuffer(),this.dynamicDraw=!!ct,this.context.unbindVAO(),et.bindElementBuffer.set(this.buffer),dt.bufferData(dt.ELEMENT_ARRAY_BUFFER,nt.arrayBuffer,this.dynamicDraw?dt.DYNAMIC_DRAW:dt.STATIC_DRAW),this.dynamicDraw||nt.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(et){const nt=this.context.gl;this.context.unbindVAO(),this.bind(),nt.bufferSubData(nt.ELEMENT_ARRAY_BUFFER,0,et.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Po={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ao{constructor(et,nt,ct,dt){this.length=nt.length,this.attributes=ct,this.itemSize=nt.bytesPerElement,this.dynamicDraw=dt,this.context=et;const ft=et.gl;this.buffer=ft.createBuffer(),et.bindVertexBuffer.set(this.buffer),ft.bufferData(ft.ARRAY_BUFFER,nt.arrayBuffer,this.dynamicDraw?ft.DYNAMIC_DRAW:ft.STATIC_DRAW),this.dynamicDraw||nt.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(et){const nt=this.context.gl;this.bind(),nt.bufferSubData(nt.ARRAY_BUFFER,0,et.arrayBuffer)}enableAttributes(et,nt){for(let ct=0;ct<this.attributes.length;ct++){const dt=nt.attributes[this.attributes[ct].name];dt!==void 0&&et.enableVertexAttribArray(dt)}}setVertexAttribPointers(et,nt,ct){for(let dt=0;dt<this.attributes.length;dt++){const ft=this.attributes[dt],_t=nt.attributes[ft.name];_t!==void 0&&et.vertexAttribPointer(_t,ft.components,et[Po[ft.type]],!1,this.itemSize,ft.offset+this.itemSize*(ct||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class An{constructor(et){this.gl=et.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(et){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Eo extends An{getDefault(){return _.Color.transparent}set(et){const nt=this.current;(et.r!==nt.r||et.g!==nt.g||et.b!==nt.b||et.a!==nt.a||this.dirty)&&(this.gl.clearColor(et.r,et.g,et.b,et.a),this.current=et,this.dirty=!1)}}class jn extends An{getDefault(){return 1}set(et){(et!==this.current||this.dirty)&&(this.gl.clearDepth(et),this.current=et,this.dirty=!1)}}class bn extends An{getDefault(){return 0}set(et){(et!==this.current||this.dirty)&&(this.gl.clearStencil(et),this.current=et,this.dirty=!1)}}class Xn extends An{getDefault(){return[!0,!0,!0,!0]}set(et){const nt=this.current;(et[0]!==nt[0]||et[1]!==nt[1]||et[2]!==nt[2]||et[3]!==nt[3]||this.dirty)&&(this.gl.colorMask(et[0],et[1],et[2],et[3]),this.current=et,this.dirty=!1)}}class Io extends An{getDefault(){return!0}set(et){(et!==this.current||this.dirty)&&(this.gl.depthMask(et),this.current=et,this.dirty=!1)}}class gs extends An{getDefault(){return 255}set(et){(et!==this.current||this.dirty)&&(this.gl.stencilMask(et),this.current=et,this.dirty=!1)}}class zo extends An{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(et){const nt=this.current;(et.func!==nt.func||et.ref!==nt.ref||et.mask!==nt.mask||this.dirty)&&(this.gl.stencilFunc(et.func,et.ref,et.mask),this.current=et,this.dirty=!1)}}class So extends An{getDefault(){const et=this.gl;return[et.KEEP,et.KEEP,et.KEEP]}set(et){const nt=this.current;(et[0]!==nt[0]||et[1]!==nt[1]||et[2]!==nt[2]||this.dirty)&&(this.gl.stencilOp(et[0],et[1],et[2]),this.current=et,this.dirty=!1)}}class hs extends An{getDefault(){return!1}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;et?nt.enable(nt.STENCIL_TEST):nt.disable(nt.STENCIL_TEST),this.current=et,this.dirty=!1}}class Mo extends An{getDefault(){return[0,1]}set(et){const nt=this.current;(et[0]!==nt[0]||et[1]!==nt[1]||this.dirty)&&(this.gl.depthRange(et[0],et[1]),this.current=et,this.dirty=!1)}}class ys extends An{getDefault(){return!1}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;et?nt.enable(nt.DEPTH_TEST):nt.disable(nt.DEPTH_TEST),this.current=et,this.dirty=!1}}class Jo extends An{getDefault(){return this.gl.LESS}set(et){(et!==this.current||this.dirty)&&(this.gl.depthFunc(et),this.current=et,this.dirty=!1)}}class Ko extends An{getDefault(){return!1}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;et?nt.enable(nt.BLEND):nt.disable(nt.BLEND),this.current=et,this.dirty=!1}}class ws extends An{getDefault(){const et=this.gl;return[et.ONE,et.ZERO]}set(et){const nt=this.current;(et[0]!==nt[0]||et[1]!==nt[1]||this.dirty)&&(this.gl.blendFunc(et[0],et[1]),this.current=et,this.dirty=!1)}}class is extends An{getDefault(){return _.Color.transparent}set(et){const nt=this.current;(et.r!==nt.r||et.g!==nt.g||et.b!==nt.b||et.a!==nt.a||this.dirty)&&(this.gl.blendColor(et.r,et.g,et.b,et.a),this.current=et,this.dirty=!1)}}class Oo extends An{getDefault(){return this.gl.FUNC_ADD}set(et){(et!==this.current||this.dirty)&&(this.gl.blendEquation(et),this.current=et,this.dirty=!1)}}class es extends An{getDefault(){return!1}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;et?nt.enable(nt.CULL_FACE):nt.disable(nt.CULL_FACE),this.current=et,this.dirty=!1}}class us extends An{getDefault(){return this.gl.BACK}set(et){(et!==this.current||this.dirty)&&(this.gl.cullFace(et),this.current=et,this.dirty=!1)}}class rs extends An{getDefault(){return this.gl.CCW}set(et){(et!==this.current||this.dirty)&&(this.gl.frontFace(et),this.current=et,this.dirty=!1)}}let ns,Ss=class extends An{getDefault(){return null}set(at){(at!==this.current||this.dirty)&&(this.gl.useProgram(at),this.current=at,this.dirty=!1)}};class Ts extends An{getDefault(){return this.gl.TEXTURE0}set(et){(et!==this.current||this.dirty)&&(this.gl.activeTexture(et),this.current=et,this.dirty=!1)}}class na extends An{getDefault(){const et=this.gl;return[0,0,et.drawingBufferWidth,et.drawingBufferHeight]}set(et){const nt=this.current;(et[0]!==nt[0]||et[1]!==nt[1]||et[2]!==nt[2]||et[3]!==nt[3]||this.dirty)&&(this.gl.viewport(et[0],et[1],et[2],et[3]),this.current=et,this.dirty=!1)}}class Sl extends An{getDefault(){return null}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;nt.bindFramebuffer(nt.FRAMEBUFFER,et),this.current=et,this.dirty=!1}}class Tl extends An{getDefault(){return null}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;nt.bindRenderbuffer(nt.RENDERBUFFER,et),this.current=et,this.dirty=!1}}class Wl extends An{getDefault(){return null}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;nt.bindTexture(nt.TEXTURE_2D,et),this.current=et,this.dirty=!1}}class wu extends An{getDefault(){return null}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;nt.bindBuffer(nt.ARRAY_BUFFER,et),this.current=et,this.dirty=!1}}class dr extends An{getDefault(){return null}set(et){const nt=this.gl;nt.bindBuffer(nt.ELEMENT_ARRAY_BUFFER,et),this.current=et,this.dirty=!1}}class qt extends An{constructor(et){super(et),this.vao=et.extVertexArrayObject}getDefault(){return null}set(et){this.vao&&(et!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(et),this.current=et,this.dirty=!1)}}class Zt extends An{getDefault(){return 4}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;nt.pixelStorei(nt.UNPACK_ALIGNMENT,et),this.current=et,this.dirty=!1}}class cr extends An{getDefault(){return!1}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et),this.current=et,this.dirty=!1}}class gr extends An{getDefault(){return!1}set(et){if(et===this.current&&!this.dirty)return;const nt=this.gl;nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,et),this.current=et,this.dirty=!1}}class wr extends An{constructor(et,nt){super(et),this.context=et,this.parent=nt}getDefault(){return null}}class Pr extends wr{setDirty(){this.dirty=!0}set(et){if(et===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const nt=this.gl;nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,et,0),this.current=et,this.dirty=!1}}class Cr extends wr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(et){if(et===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const nt=this.gl;nt.framebufferRenderbuffer(nt.FRAMEBUFFER,this.attachment(),nt.RENDERBUFFER,et),this.current=et,this.dirty=!1}}class br extends Cr{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Dr{constructor(et,nt,ct,dt){this.context=et,this.width=nt,this.height=ct;const ft=this.framebuffer=et.gl.createFramebuffer();this.colorAttachment=new Pr(et,ft),dt&&(this.depthAttachment=new Cr(et,ft))}destroy(){const et=this.context.gl,nt=this.colorAttachment.get();if(nt&&et.deleteTexture(nt),this.depthAttachment){const ct=this.depthAttachment.get();ct&&et.deleteRenderbuffer(ct)}et.deleteFramebuffer(this.framebuffer)}}class on{constructor(et,nt=!1){if(this.gl=et,this.isWebGL2=nt,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),nt){const ct=et;this.extVertexArrayObject={createVertexArrayOES:ct.createVertexArray.bind(et),deleteVertexArrayOES:ct.deleteVertexArray.bind(et),bindVertexArrayOES:ct.bindVertexArray.bind(et)}}this.clearColor=new Eo(this),this.clearDepth=new jn(this),this.clearStencil=new bn(this),this.colorMask=new Xn(this),this.depthMask=new Io(this),this.stencilMask=new gs(this),this.stencilFunc=new zo(this),this.stencilOp=new So(this),this.stencilTest=new hs(this),this.depthRange=new Mo(this),this.depthTest=new ys(this),this.depthFunc=new Jo(this),this.blend=new Ko(this),this.blendFunc=new ws(this),this.blendColor=new is(this),this.blendEquation=new Oo(this),this.cullFace=new es(this),this.cullFaceSide=new us(this),this.frontFace=new rs(this),this.program=new Ss(this),this.activeTexture=new Ts(this),this.viewport=new na(this),this.bindFramebuffer=new Sl(this),this.bindRenderbuffer=new Tl(this),this.bindTexture=new Wl(this),this.bindVertexBuffer=new wu(this),this.bindElementBuffer=new dr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new qt(this),this.pixelStoreUnpack=new Zt(this),this.pixelStoreUnpackPremultiplyAlpha=new cr(this),this.pixelStoreUnpackFlipY=new gr(this),this.extTextureFilterAnisotropic=et.getExtension("EXT_texture_filter_anisotropic")||et.getExtension("MOZ_EXT_texture_filter_anisotropic")||et.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=et.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=et.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=et.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=et.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),nt||(this.extTextureHalfFloat=et.getExtension("OES_texture_half_float")),(nt||this.extTextureHalfFloat&&et.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=et.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=nt||et.getExtension("OES_standard_derivatives"),this.extTimerQuery=et.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=et.getParameter(et.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(et,nt){return new wo(this,et,nt)}createVertexBuffer(et,nt,ct){return new Ao(this,et,nt,ct)}createRenderbuffer(et,nt,ct){const dt=this.gl,ft=dt.createRenderbuffer();return this.bindRenderbuffer.set(ft),dt.renderbufferStorage(dt.RENDERBUFFER,et,nt,ct),this.bindRenderbuffer.set(null),ft}createFramebuffer(et,nt,ct){return new Dr(this,et,nt,ct)}clear({color:et,depth:nt,stencil:ct}){const dt=this.gl;let ft=0;et&&(ft|=dt.COLOR_BUFFER_BIT,this.clearColor.set(et),this.colorMask.set([!0,!0,!0,!0])),nt!==void 0&&(ft|=dt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(nt),this.depthMask.set(!0)),ct!==void 0&&(ft|=dt.STENCIL_BUFFER_BIT,this.clearStencil.set(ct),this.stencilMask.set(255)),dt.clear(ft)}setCullFace(et){et.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(et.mode),this.frontFace.set(et.frontFace))}setDepthMode(et){et.func!==this.gl.ALWAYS||et.mask?(this.depthTest.set(!0),this.depthFunc.set(et.func),this.depthMask.set(et.mask),this.depthRange.set(et.range)):this.depthTest.set(!1)}setStencilMode(et){et.test.func!==this.gl.ALWAYS||et.mask?(this.stencilTest.set(!0),this.stencilMask.set(et.mask),this.stencilOp.set([et.fail,et.depthFail,et.pass]),this.stencilFunc.set({func:et.test.func,ref:et.ref,mask:et.test.mask})):this.stencilTest.set(!1)}setColorMode(et){ut(et.blendFunction,_.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(et.blendFunction),this.blendColor.set(et.blendColor)),this.colorMask.set(et.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class cn extends _.Evented{constructor(et,nt,ct,dt){if(super(),this.id=et,this.dispatcher=ct,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,_.extend(this,_.pick(nt,["url","scheme","tileSize","promoteId"])),this._options=_.extend({type:"vector"},nt),this._collectResourceTiming=nt.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(dt),this._tileWorkers={},this._deduped=new _.DedupedRequest}load(et){this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"}));const nt=Array.isArray(this.map._language)?this.map._language.join():this.map._language,ct=this.map._worldview;this._tileJSONRequest=En(this._options,this.map._requestManager,nt,ct,(dt,ft)=>{this._tileJSONRequest=null,this._loaded=!0,dt?(nt&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${nt}`),ct&&ct.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${ct}`),this.fire(new _.ErrorEvent(dt))):ft&&(_.extend(this,ft),ft.bounds&&(this.tileBounds=new Ln(ft.bounds,this.minzoom,this.maxzoom)),_.postTurnstileEvent(ft.tiles,this.map._requestManager._customAccessToken),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))),et&&et(dt)})}loaded(){return this._loaded}hasTile(et){return!this.tileBounds||this.tileBounds.contains(et.canonical)}onAdd(et){this.map=et,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(et){return this._options.tiles=et,this.reload(),this}setUrl(et){return this.url=et,this._options.url=et,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return _.extend({},this._options)}loadTile(et,nt){const ct=this.map._requestManager.normalizeTileURL(et.tileID.canonical.url(this.tiles,this.scheme)),dt={request:this.map._requestManager.transformRequest(ct,_.ResourceType.Tile),data:void 0,uid:et.uid,tileID:et.tileID,tileZoom:et.tileZoom,zoom:et.tileID.overscaledZ,tileSize:this.tileSize*et.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:_.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:et.isSymbolTile};if(dt.request.collectResourceTiming=this._collectResourceTiming,et.actor&&et.state!=="expired")et.state==="loading"?et.reloadCallback=nt:et.request=et.actor.send("reloadTile",dt,ft.bind(this));else if(et.actor=this._tileWorkers[ct]=this._tileWorkers[ct]||this.dispatcher.getActor(),this.dispatcher.ready)et.request=et.actor.send("loadTile",dt,ft.bind(this),void 0,!0);else{const _t=_.loadVectorTile.call({deduped:this._deduped},dt,(xt,kt)=>{xt||!kt?ft.call(this,xt):(dt.data={cacheControl:kt.cacheControl,expires:kt.expires,rawData:kt.rawData.slice(0)},et.actor&&et.actor.send("loadTile",dt,ft.bind(this),void 0,!0))},!0);et.request={cancel:_t}}function ft(_t,xt){return delete et.request,et.aborted?nt(null):_t&&_t.status!==404?nt(_t):(xt&&xt.resourceTiming&&(et.resourceTiming=xt.resourceTiming),this.map._refreshExpiredTiles&&xt&&et.setExpiryData(xt),et.loadVectorData(xt,this.map.painter),_.cacheEntryPossiblyAdded(this.dispatcher),nt(null),void(et.reloadCallback&&(this.loadTile(et,et.reloadCallback),et.reloadCallback=null)))}}abortTile(et){et.request&&(et.request.cancel(),delete et.request),et.actor&&et.actor.send("abortTile",{uid:et.uid,type:this.type,source:this.id})}unloadTile(et){et.unloadVectorData(),et.actor&&et.actor.send("removeTile",{uid:et.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class tn extends _.Evented{constructor(et,nt,ct,dt){super(),this.id=et,this.dispatcher=ct,this.setEventedParent(dt),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=_.extend({type:"raster"},nt),_.extend(this,_.pick(nt,["url","scheme","tileSize"]))}load(et){this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=En(this._options,this.map._requestManager,null,null,(nt,ct)=>{this._tileJSONRequest=null,this._loaded=!0,nt?this.fire(new _.ErrorEvent(nt)):ct&&(_.extend(this,ct),ct.bounds&&(this.tileBounds=new Ln(ct.bounds,this.minzoom,this.maxzoom)),_.postTurnstileEvent(ct.tiles),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))),et&&et(nt)})}loaded(){return this._loaded}onAdd(et){this.map=et,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(et){return this._options.tiles=et,this.reload(),this}setUrl(et){return this.url=et,this._options.url=et,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return _.extend({},this._options)}hasTile(et){return!this.tileBounds||this.tileBounds.contains(et.canonical)}loadTile(et,nt){const ct=_.exported.devicePixelRatio>=2,dt=this.map._requestManager.normalizeTileURL(et.tileID.canonical.url(this.tiles,this.scheme),ct,this.tileSize);et.request=_.getImage(this.map._requestManager.transformRequest(dt,_.ResourceType.Tile),(ft,_t,xt,kt)=>(delete et.request,et.aborted?(et.state="unloaded",nt(null)):ft?(et.state="errored",nt(ft)):_t?(this.map._refreshExpiredTiles&&et.setExpiryData({cacheControl:xt,expires:kt}),et.setTexture(_t,this.map.painter),et.state="loaded",_.cacheEntryPossiblyAdded(this.dispatcher),void nt(null)):nt(null)))}static loadTileData(et,nt,ct){et.setTexture(nt,ct)}static unloadTileData(et,nt){et.texture&&nt.saveTileTexture(et.texture)}abortTile(et,nt){et.request&&(et.request.cancel(),delete et.request),nt()}unloadTile(et,nt){et.texture&&this.map.painter.saveTileTexture(et.texture),nt()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Rn(at,et,nt,ct,dt,ft,_t,xt){const kt=[at,nt,dt,et,ct,ft,1,1,1],$t=[_t,xt,1],Dt=_.adjoint([],kt),[Vt,Yt,Jt]=_.transformMat3($t,$t,_.transpose(Dt,Dt));return _.multiply$1(kt,[Vt,0,0,0,Yt,0,0,0,Jt],kt)}class Nn extends _.Evented{constructor(et,nt,ct,dt){super(),this.id=et,this.dispatcher=ct,this.coordinates=nt.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(dt),this.options=nt,this._dirty=!1}load(et,nt){this._loaded=nt||!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=_.getImage(this.map._requestManager.transformRequest(this.url,_.ResourceType.Image),(ct,dt)=>{if(this._imageRequest=null,this._loaded=!0,ct)this.fire(new _.ErrorEvent(ct));else if(dt){const{HTMLImageElement:ft}=_.window;this.image=dt instanceof ft?_.exported.getImageData(dt):dt,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,et&&(this.coordinates=et),this._finishLoading()}})}loaded(){return this._loaded}updateImage(et){return this.image&&et.url?(this._imageRequest&&et.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=et.url,this.load(et.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(et){this.map=et,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(et){this.coordinates=et,this._boundsArray=void 0;const nt=et.map(_.MercatorCoordinate.fromLngLat);return this.tileID=function(ct){let dt=1/0,ft=1/0,_t=-1/0,xt=-1/0;for(const Vt of ct)dt=Math.min(dt,Vt.x),ft=Math.min(ft,Vt.y),_t=Math.max(_t,Vt.x),xt=Math.max(xt,Vt.y);const kt=Math.max(_t-dt,xt-ft),$t=Math.max(0,Math.floor(-Math.log(kt)/Math.LN2)),Dt=Math.pow(2,$t);return new _.CanonicalTileID($t,Math.floor((dt+_t)/2*Dt),Math.floor((ft+xt)/2*Dt))}(nt),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(et){for(const kt in this.tiles){const $t=this.tiles[kt];$t.state!=="loaded"&&($t.state="loaded",$t.texture=this.texture)}if(this._boundsArray)return;const nt=_.tileTransform(this.tileID,this.map.transform.projection),[ct,dt,ft,_t]=this.coordinates.map(kt=>{const $t=nt.projection.project(kt[0],kt[1]);return _.getTilePoint(nt,$t)._round()});this.perspectiveTransform=function(kt,$t,Dt,Vt,Yt,Jt,er,_i,tr,jt){const Qt=Rn(0,0,kt,0,0,$t,kt,$t),sr=Rn(Dt,Vt,Yt,Jt,er,_i,tr,jt);return _.multiply$1(sr,_.adjoint(Qt,Qt),sr),[sr[6]/sr[8]*kt/_.EXTENT,sr[7]/sr[8]*$t/_.EXTENT]}(this.width,this.height,ct.x,ct.y,dt.x,dt.y,_t.x,_t.y,ft.x,ft.y);const xt=this._boundsArray=new _.StructArrayLayout4i8;xt.emplaceBack(ct.x,ct.y,0,0),xt.emplaceBack(dt.x,dt.y,_.EXTENT,0),xt.emplaceBack(_t.x,_t.y,0,_.EXTENT),xt.emplaceBack(ft.x,ft.y,_.EXTENT,_.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=et.createVertexBuffer(xt,_.boundsAttributes.members),this.boundsSegments=_.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const et=this.map.painter.context,nt=et.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new _.Texture(et,this.image,nt.RGBA),this.texture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(et)}loadTile(et,nt){this.tileID&&this.tileID.equals(et.tileID.canonical)?(this.tiles[String(et.tileID.wrap)]=et,et.buckets={},nt(null)):(et.state="errored",nt(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const $n={vector:cn,raster:tn,"raster-dem":class extends tn{constructor(at,et,nt,ct){super(at,et,nt,ct),this.type="raster-dem",this.maxzoom=22,this._options=_.extend({type:"raster-dem"},et),this.encoding=et.encoding||"mapbox"}loadTile(at,et){const nt=this.map._requestManager.normalizeTileURL(at.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function ct(dt,ft){dt&&(at.state="errored",et(dt)),ft&&(at.dem=ft,at.dem.onDeserialize(),at.needsHillshadePrepare=!0,at.needsDEMTextureUpload=!0,at.state="loaded",et(null))}at.request=_.getImage(this.map._requestManager.transformRequest(nt,_.ResourceType.Tile),function(dt,ft,_t,xt){if(delete at.request,at.aborted)at.state="unloaded",et(null);else if(dt)at.state="errored",et(dt);else if(ft){this.map._refreshExpiredTiles&&at.setExpiryData({cacheControl:_t,expires:xt});const kt=_.window.ImageBitmap&&ft instanceof _.window.ImageBitmap&&(ns==null&&(ns=_.window.OffscreenCanvas&&new _.window.OffscreenCanvas(1,1).getContext("2d")&&typeof _.window.createImageBitmap=="function"),ns),$t=1-(ft.width-_.prevPowerOfTwo(ft.width))/2;$t<1||at.neighboringTiles||(at.neighboringTiles=this._getNeighboringTiles(at.tileID));const Dt=kt?ft:_.exported.getImageData(ft,$t),Vt={uid:at.uid,coord:at.tileID,source:this.id,rawImageData:Dt,encoding:this.encoding,padding:$t};at.actor&&at.state!=="expired"||(at.actor=this.dispatcher.getActor(),at.actor.send("loadDEMTile",Vt,ct.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(at){const et=at.canonical,nt=Math.pow(2,et.z),ct=(et.x-1+nt)%nt,dt=et.x===0?at.wrap-1:at.wrap,ft=(et.x+1+nt)%nt,_t=et.x+1===nt?at.wrap+1:at.wrap,xt={};return xt[new _.OverscaledTileID(at.overscaledZ,dt,et.z,ct,et.y).key]={backfilled:!1},xt[new _.OverscaledTileID(at.overscaledZ,_t,et.z,ft,et.y).key]={backfilled:!1},et.y>0&&(xt[new _.OverscaledTileID(at.overscaledZ,dt,et.z,ct,et.y-1).key]={backfilled:!1},xt[new _.OverscaledTileID(at.overscaledZ,at.wrap,et.z,et.x,et.y-1).key]={backfilled:!1},xt[new _.OverscaledTileID(at.overscaledZ,_t,et.z,ft,et.y-1).key]={backfilled:!1}),et.y+1<nt&&(xt[new _.OverscaledTileID(at.overscaledZ,dt,et.z,ct,et.y+1).key]={backfilled:!1},xt[new _.OverscaledTileID(at.overscaledZ,at.wrap,et.z,et.x,et.y+1).key]={backfilled:!1},xt[new _.OverscaledTileID(at.overscaledZ,_t,et.z,ft,et.y+1).key]={backfilled:!1}),xt}unloadTile(at){at.demTexture&&this.map.painter.saveTileTexture(at.demTexture),at.fbo&&(at.fbo.destroy(),delete at.fbo),at.dem&&delete at.dem,delete at.neighboringTiles,at.state="unloaded"}},geojson:class extends _.Evented{constructor(at,et,nt,ct){super(),this.id=at,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=nt.getActor(),this.setEventedParent(ct),this._data=et.data,this._options=_.extend({},et),this._collectResourceTiming=et.collectResourceTiming,et.maxzoom!==void 0&&(this.maxzoom=et.maxzoom),et.type&&(this.type=et.type),et.attribution&&(this.attribution=et.attribution),this.promoteId=et.promoteId;const dt=_.EXTENT/this.tileSize;this.workerOptions=_.extend({source:this.id,cluster:et.cluster||!1,geojsonVtOptions:{buffer:(et.buffer!==void 0?et.buffer:128)*dt,tolerance:(et.tolerance!==void 0?et.tolerance:.375)*dt,extent:_.EXTENT,maxZoom:this.maxzoom,lineMetrics:et.lineMetrics||!1,generateId:et.generateId||!1},superclusterOptions:{maxZoom:et.clusterMaxZoom!==void 0?et.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,et.clusterMinPoints||2),extent:_.EXTENT,radius:(et.clusterRadius!==void 0?et.clusterRadius:50)*dt,log:!1,generateId:et.generateId||!1},clusterProperties:et.clusterProperties,filter:et.filter},et.workerOptions)}onAdd(at){this.map=at,this.setData(this._data)}setData(at){return this._data=at,this._updateWorkerData(),this}getClusterExpansionZoom(at,et){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:at,source:this.id},et),this}getClusterChildren(at,et){return this.actor.send("geojson.getClusterChildren",{clusterId:at,source:this.id},et),this}getClusterLeaves(at,et,nt,ct){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:at,limit:et,offset:nt},ct),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new _.Event("dataloading",{dataType:"source"})),this._loaded=!1;const at=_.extend({},this.workerOptions),et=this._data;typeof et=="string"?(at.request=this.map._requestManager.transformRequest(_.exported.resolveURL(et),_.ResourceType.Source),at.request.collectResourceTiming=this._collectResourceTiming):at.data=JSON.stringify(et),this._pendingLoad=this.actor.send(`${this.type}.loadData`,at,(nt,ct)=>{if(this._loaded=!0,this._pendingLoad=null,nt)this.fire(new _.ErrorEvent(nt));else{const dt={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&ct&&ct.resourceTiming&&ct.resourceTiming[this.id]&&(dt.resourceTiming=ct.resourceTiming[this.id]),this.fire(new _.Event("data",dt)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(at,et){const nt=at.actor?"reloadTile":"loadTile";at.actor=this.actor,at.request=this.actor.send(nt,{type:this.type,uid:at.uid,tileID:at.tileID,tileZoom:at.tileZoom,zoom:at.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:_.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(ct,dt)=>(delete at.request,at.unloadVectorData(),at.aborted?et(null):ct?et(ct):(at.loadVectorData(dt,this.map.painter,nt==="reloadTile"),et(null))),void 0,nt==="loadTile")}abortTile(at){at.request&&(at.request.cancel(),delete at.request),at.aborted=!0}unloadTile(at){at.unloadVectorData(),this.actor.send("removeTile",{uid:at.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return _.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Nn{constructor(at,et,nt,ct){super(at,et,nt,ct),this.roundZoom=!0,this.type="video",this.options=et}load(){this._loaded=!1;const at=this.options;this.urls=[];for(const et of at.urls)this.urls.push(this.map._requestManager.transformRequest(et,_.ResourceType.Source).url);_.getVideo(this.urls,(et,nt)=>{this._loaded=!0,et?this.fire(new _.ErrorEvent(et)):nt&&(this.video=nt,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(at){if(this.video){const et=this.video.seekable;at<et.start(0)||at>et.end(0)?this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${et.start(0)} and ${et.end(0)}-second mark.`))):this.video.currentTime=at}}getVideo(){return this.video}onAdd(at){this.map||(this.map=at,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const at=this.map.painter.context,et=at.gl;this.texture?this.video.paused||(this.texture.bind(et.LINEAR,et.CLAMP_TO_EDGE),et.texSubImage2D(et.TEXTURE_2D,0,0,0,et.RGBA,et.UNSIGNED_BYTE,this.video)):(this.texture=new _.Texture(at,this.video,et.RGBA),this.texture.bind(et.LINEAR,et.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(at)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Nn,canvas:class extends Nn{constructor(at,et,nt,ct){super(at,et,nt,ct),et.coordinates?Array.isArray(et.coordinates)&&et.coordinates.length===4&&!et.coordinates.some(dt=>!Array.isArray(dt)||dt.length!==2||dt.some(ft=>typeof ft!="number"))||this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${at}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${at}`,null,'missing required property "coordinates"'))),et.animate&&typeof et.animate!="boolean"&&this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${at}`,null,'optional "animate" property must be a boolean value'))),et.canvas?typeof et.canvas=="string"||et.canvas instanceof _.window.HTMLCanvasElement||this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${at}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${at}`,null,'missing required property "canvas"'))),this.options=et,this.animate=et.animate===void 0||et.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof _.window.HTMLCanvasElement?this.options.canvas:_.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new _.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(at){this.map=at,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let at=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,at=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,at=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const et=this.map.painter.context;this.texture?(at||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _.Texture(et,this.canvas,et.gl.RGBA,{premultiply:!0}),this._prepareData(et)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const at of[this.canvas.width,this.canvas.height])if(isNaN(at)||at<=0)return!0;return!1}},custom:class extends _.Evented{constructor(at,et,nt,ct){super(),this.id=at,this.type="custom",this._dataType="raster",this._dispatcher=nt,this._implementation=et,this.setEventedParent(ct),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new _.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new _.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ln(this._implementation.bounds,this.minzoom,this.maxzoom)),et.update=this._update.bind(this),et.clearTiles=this._clearTiles.bind(this),et.coveringTiles=this._coveringTiles.bind(this),_.extend(this,_.pick(et,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return _.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(at){this._map=at,this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(at),this.load()}onRemove(at){this._implementation.onRemove&&this._implementation.onRemove(at)}hasTile(at){if(this._implementation.hasTile){const{x:et,y:nt,z:ct}=at.canonical;return this._implementation.hasTile({x:et,y:nt,z:ct})}return!this.tileBounds||this.tileBounds.contains(at.canonical)}loadTile(at,et){const{x:nt,y:ct,z:dt}=at.tileID.canonical,ft=new _.window.AbortController;at.request=Promise.resolve(this._implementation.loadTile({x:nt,y:ct,z:dt},{signal:ft.signal})).then(function(_t){return delete at.request,at.aborted?(at.state="unloaded",et(null)):_t===void 0?(at.state="errored",et(null)):_t===null?(this.loadTileData(at,{width:this.tileSize,height:this.tileSize,data:null}),at.state="loaded",et(null)):function(xt){return xt instanceof _.window.ImageData||xt instanceof _.window.HTMLCanvasElement||xt instanceof _.window.ImageBitmap||xt instanceof _.window.HTMLImageElement}(_t)?(this.loadTileData(at,_t),at.state="loaded",void et(null)):(at.state="errored",et(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(_t=>{_t.code!==20&&(at.state="errored",et(_t))}),at.request.cancel=()=>ft.abort()}loadTileData(at,et){tn.loadTileData(at,et,this._map.painter)}unloadTileData(at){tn.unloadTileData(at,this._map.painter)}unloadTile(at,et){if(this.unloadTileData(at),this._implementation.unloadTile){const{x:nt,y:ct,z:dt}=at.tileID.canonical;this._implementation.unloadTile({x:nt,y:ct,z:dt})}et()}abortTile(at,et){at.request&&at.request.cancel&&(at.request.cancel(),delete at.request),et()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(at=>({x:at.canonical.x,y:at.canonical.y,z:at.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Mn=function(at,et,nt,ct){const dt=new $n[et.type](at,et,nt,ct);if(dt.id!==at)throw new Error(`Expected Source id to be ${at} instead of ${dt.id}`);return _.bindAll(["load","abort","unload","serialize","prepare"],dt),dt};function Wn(at,et){const nt=_.identity([]);return _.scale(nt,nt,[.5*at.width,.5*-at.height,1]),_.translate(nt,nt,[1,-1,0]),_.multiply(nt,nt,at.calculateProjMatrix(et.toUnwrapped())),Float32Array.from(nt)}function vo(at,et,nt,ct,dt,ft,_t,xt=!1){const kt=at.tilesIn(ct,_t,xt);kt.sort(ts);const $t=[];for(const Vt of kt)$t.push({wrappedTileID:Vt.tile.tileID.wrapped().key,queryResults:Vt.tile.queryRenderedFeatures(et,nt,at._state,Vt,dt,ft,Wn(at.transform,Vt.tile.tileID),xt)});const Dt=function(Vt){const Yt={},Jt={};for(const er of Vt){const _i=er.queryResults,tr=er.wrappedTileID,jt=Jt[tr]=Jt[tr]||{};for(const Qt in _i){const sr=_i[Qt],lr=jt[Qt]=jt[Qt]||{},yr=Yt[Qt]=Yt[Qt]||[];for(const _r of sr)lr[_r.featureIndex]||(lr[_r.featureIndex]=!0,yr.push(_r))}}return Yt}($t);for(const Vt in Dt)Dt[Vt].forEach(Yt=>{const Jt=Yt.feature,er=Jt.layer;er&&er.type!=="background"&&er.type!=="sky"&&(Jt.source=er.source,er["source-layer"]&&(Jt.sourceLayer=er["source-layer"]),Jt.state=Jt.id!==void 0?at.getFeatureState(er["source-layer"],Jt.id):{})});return Dt}function Lo(at,et){const nt=at.getRenderableIds().map(ft=>at.getTileByID(ft)),ct=[],dt={};for(let ft=0;ft<nt.length;ft++){const _t=nt[ft],xt=_t.tileID.canonical.key;dt[xt]||(dt[xt]=!0,_t.querySourceFeatures(ct,et))}return ct}function ts(at,et){const nt=at.tileID,ct=et.tileID;return nt.overscaledZ-ct.overscaledZ||nt.canonical.y-ct.canonical.y||nt.wrap-ct.wrap||nt.canonical.x-ct.canonical.x}function Bo(){return Vu.workerClass!=null?new Vu.workerClass:new _.window.Worker(Vu.workerUrl)}const Bs="mapboxgl_preloaded_worker_pool";class Fo{constructor(){this.active={}}acquire(et){if(!this.workers)for(this.workers=[];this.workers.length<Fo.workerCount;)this.workers.push(new Bo);return this.active[et]=!0,this.workers.slice()}release(et){delete this.active[et],this.numActive()===0&&(this.workers.forEach(nt=>{nt.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Bs]}numActive(){return Object.keys(this.active).length}}let ds;function Zl(){return ds||(ds=new Fo),ds}function $m(at,et){const nt={};for(const ct in at)ct!=="ref"&&(nt[ct]=at[ct]);return _.refProperties.forEach(ct=>{ct in et&&(nt[ct]=et[ct])}),nt}function Bp(at){at=at.slice();const et=Object.create(null);for(let nt=0;nt<at.length;nt++)et[at[nt].id]=at[nt];for(let nt=0;nt<at.length;nt++)"ref"in at[nt]&&(at[nt]=$m(at[nt],et[at[nt].ref]));return at}Fo.workerCount=2;const Yn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Qu(at,et,nt){nt.push({command:Yn.addSource,args:[at,et[at]]})}function Xl(at,et,nt){et.push({command:Yn.removeSource,args:[at]}),nt[at]=!0}function Fp(at,et,nt,ct){Xl(at,nt,ct),Qu(at,et,nt)}function Ju(at,et,nt){let ct;for(ct in at[nt])if(at[nt].hasOwnProperty(ct)&&ct!=="data"&&!ut(at[nt][ct],et[nt][ct]))return!1;for(ct in et[nt])if(et[nt].hasOwnProperty(ct)&&ct!=="data"&&!ut(at[nt][ct],et[nt][ct]))return!1;return!0}function Vr(at,et,nt,ct,dt,ft){let _t;for(_t in et=et||{},at=at||{})at.hasOwnProperty(_t)&&(ut(at[_t],et[_t])||nt.push({command:ft,args:[ct,_t,et[_t],dt]}));for(_t in et)et.hasOwnProperty(_t)&&!at.hasOwnProperty(_t)&&(ut(at[_t],et[_t])||nt.push({command:ft,args:[ct,_t,et[_t],dt]}))}function un(at){return at.id}function kn(at,et){return at[et.id]=et,at}class Ro{constructor(et,nt){this.reset(et,nt)}reset(et,nt){this.points=et||[],this._distances=[0];for(let ct=1;ct<this.points.length;ct++)this._distances[ct]=this._distances[ct-1]+this.points[ct].dist(this.points[ct-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(nt||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(et){if(this.points.length===1)return this.points[0];et=_.clamp(et,0,1);let nt=1,ct=this._distances[nt];const dt=et*this.paddedLength+this.padding;for(;ct<dt&&nt<this._distances.length;)ct=this._distances[++nt];const ft=nt-1,_t=this._distances[ft],xt=ct-_t,kt=xt>0?(dt-_t)/xt:0;return this.points[ft].mult(1-kt).add(this.points[nt].mult(kt))}}class To{constructor(et,nt,ct){const dt=this.boxCells=[],ft=this.circleCells=[];this.xCellCount=Math.ceil(et/ct),this.yCellCount=Math.ceil(nt/ct);for(let _t=0;_t<this.xCellCount*this.yCellCount;_t++)dt.push([]),ft.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=et,this.height=nt,this.xScale=this.xCellCount/et,this.yScale=this.yCellCount/nt,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(et,nt,ct,dt,ft){this._forEachCell(nt,ct,dt,ft,this._insertBoxCell,this.boxUid++),this.boxKeys.push(et),this.bboxes.push(nt),this.bboxes.push(ct),this.bboxes.push(dt),this.bboxes.push(ft)}insertCircle(et,nt,ct,dt){this._forEachCell(nt-dt,ct-dt,nt+dt,ct+dt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(et),this.circles.push(nt),this.circles.push(ct),this.circles.push(dt)}_insertBoxCell(et,nt,ct,dt,ft,_t){this.boxCells[ft].push(_t)}_insertCircleCell(et,nt,ct,dt,ft,_t){this.circleCells[ft].push(_t)}_query(et,nt,ct,dt,ft,_t){if(ct<0||et>this.width||dt<0||nt>this.height)return!ft&&[];const xt=[];if(et<=0&&nt<=0&&this.width<=ct&&this.height<=dt){if(ft)return!0;for(let kt=0;kt<this.boxKeys.length;kt++)xt.push({key:this.boxKeys[kt],x1:this.bboxes[4*kt],y1:this.bboxes[4*kt+1],x2:this.bboxes[4*kt+2],y2:this.bboxes[4*kt+3]});for(let kt=0;kt<this.circleKeys.length;kt++){const $t=this.circles[3*kt],Dt=this.circles[3*kt+1],Vt=this.circles[3*kt+2];xt.push({key:this.circleKeys[kt],x1:$t-Vt,y1:Dt-Vt,x2:$t+Vt,y2:Dt+Vt})}return _t?xt.filter(_t):xt}return this._forEachCell(et,nt,ct,dt,this._queryCell,xt,{hitTest:ft,seenUids:{box:{},circle:{}}},_t),ft?xt.length>0:xt}_queryCircle(et,nt,ct,dt,ft){const _t=et-ct,xt=et+ct,kt=nt-ct,$t=nt+ct;if(xt<0||_t>this.width||$t<0||kt>this.height)return!dt&&[];const Dt=[];return this._forEachCell(_t,kt,xt,$t,this._queryCellCircle,Dt,{hitTest:dt,circle:{x:et,y:nt,radius:ct},seenUids:{box:{},circle:{}}},ft),dt?Dt.length>0:Dt}query(et,nt,ct,dt,ft){return this._query(et,nt,ct,dt,!1,ft)}hitTest(et,nt,ct,dt,ft){return this._query(et,nt,ct,dt,!0,ft)}hitTestCircle(et,nt,ct,dt){return this._queryCircle(et,nt,ct,!0,dt)}_queryCell(et,nt,ct,dt,ft,_t,xt,kt){const $t=xt.seenUids,Dt=this.boxCells[ft];if(Dt!==null){const Yt=this.bboxes;for(const Jt of Dt)if(!$t.box[Jt]){$t.box[Jt]=!0;const er=4*Jt;if(et<=Yt[er+2]&&nt<=Yt[er+3]&&ct>=Yt[er+0]&&dt>=Yt[er+1]&&(!kt||kt(this.boxKeys[Jt]))){if(xt.hitTest)return _t.push(!0),!0;_t.push({key:this.boxKeys[Jt],x1:Yt[er],y1:Yt[er+1],x2:Yt[er+2],y2:Yt[er+3]})}}}const Vt=this.circleCells[ft];if(Vt!==null){const Yt=this.circles;for(const Jt of Vt)if(!$t.circle[Jt]){$t.circle[Jt]=!0;const er=3*Jt;if(this._circleAndRectCollide(Yt[er],Yt[er+1],Yt[er+2],et,nt,ct,dt)&&(!kt||kt(this.circleKeys[Jt]))){if(xt.hitTest)return _t.push(!0),!0;{const _i=Yt[er],tr=Yt[er+1],jt=Yt[er+2];_t.push({key:this.circleKeys[Jt],x1:_i-jt,y1:tr-jt,x2:_i+jt,y2:tr+jt})}}}}}_queryCellCircle(et,nt,ct,dt,ft,_t,xt,kt){const $t=xt.circle,Dt=xt.seenUids,Vt=this.boxCells[ft];if(Vt!==null){const Jt=this.bboxes;for(const er of Vt)if(!Dt.box[er]){Dt.box[er]=!0;const _i=4*er;if(this._circleAndRectCollide($t.x,$t.y,$t.radius,Jt[_i+0],Jt[_i+1],Jt[_i+2],Jt[_i+3])&&(!kt||kt(this.boxKeys[er])))return _t.push(!0),!0}}const Yt=this.circleCells[ft];if(Yt!==null){const Jt=this.circles;for(const er of Yt)if(!Dt.circle[er]){Dt.circle[er]=!0;const _i=3*er;if(this._circlesCollide(Jt[_i],Jt[_i+1],Jt[_i+2],$t.x,$t.y,$t.radius)&&(!kt||kt(this.circleKeys[er])))return _t.push(!0),!0}}}_forEachCell(et,nt,ct,dt,ft,_t,xt,kt){const $t=this._convertToXCellCoord(et),Dt=this._convertToYCellCoord(nt),Vt=this._convertToXCellCoord(ct),Yt=this._convertToYCellCoord(dt);for(let Jt=$t;Jt<=Vt;Jt++)for(let er=Dt;er<=Yt;er++)if(ft.call(this,et,nt,ct,dt,this.xCellCount*er+Jt,_t,xt,kt))return}_convertToXCellCoord(et){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(et*this.xScale)))}_convertToYCellCoord(et){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(et*this.yScale)))}_circlesCollide(et,nt,ct,dt,ft,_t){const xt=dt-et,kt=ft-nt,$t=ct+_t;return $t*$t>xt*xt+kt*kt}_circleAndRectCollide(et,nt,ct,dt,ft,_t,xt){const kt=(_t-dt)/2,$t=Math.abs(et-(dt+kt));if($t>kt+ct)return!1;const Dt=(xt-ft)/2,Vt=Math.abs(nt-(ft+Dt));if(Vt>Dt+ct)return!1;if($t<=kt||Vt<=Dt)return!0;const Yt=$t-kt,Jt=Vt-Dt;return Yt*Yt+Jt*Jt<=ct*ct}}const Vo={unknown:0,flipRequired:1,flipNotRequired:2},Ds=Math.tan(85*Math.PI/180);function jr(at,et,nt,ct,dt,ft,_t){const xt=_.create();if(nt)if(ft.name==="globe"){const kt=_.calculateGlobeLabelMatrix(dt,et);_.multiply(xt,xt,kt)}else{const kt=ir([],_t);xt[0]=kt[0],xt[1]=kt[1],xt[4]=kt[2],xt[5]=kt[3],ct||_.rotateZ(xt,xt,dt.angle)}else _.multiply(xt,dt.labelPlaneMatrix,at);return xt}function Cl(at,et,nt,ct,dt,ft,_t){const xt=jr(at,et,nt,ct,dt,ft,_t);return ft.name==="globe"&&nt||(xt[2]=xt[6]=xt[10]=xt[14]=0),xt}function Uo(at,et,nt,ct,dt,ft,_t){if(nt){if(ft.name==="globe"){const xt=jr(at,et,nt,ct,dt,ft,_t);return _.invert(xt,xt),_.multiply(xt,at,xt),xt}{const xt=_.clone(at),kt=_.identity([]);return kt[0]=_t[0],kt[1]=_t[1],kt[4]=_t[2],kt[5]=_t[3],_.multiply(xt,xt,kt),ct||_.rotateZ(xt,xt,-dt.angle),xt}}return dt.glCoordMatrix}function os(at,et,nt,ct){const dt=[at,et,nt,1];nt?_.transformMat4$1(dt,dt,ct):Hn(dt,dt,ct);const ft=dt[3];return dt[0]/=ft,dt[1]/=ft,dt[2]/=ft,dt}function l0(at,et){return Math.min(.5+at/et*.5,1.5)}function ga(at,et){const nt=at[0]/at[3],ct=at[1]/at[3];return nt>=-et[0]&&nt<=et[0]&&ct>=-et[1]&&ct<=et[1]}function zm(at,et,nt,ct,dt,ft,_t,xt,kt,$t){const Dt=nt.transform,Vt=ct?at.textSizeData:at.iconSizeData,Yt=_.evaluateSizeForZoom(Vt,nt.transform.zoom),Jt=Dt.projection.name==="globe",er=[256/nt.width*2+1,256/nt.height*2+1],_i=ct?at.text.dynamicLayoutVertexArray:at.icon.dynamicLayoutVertexArray;_i.clear();let tr=null;Jt&&(tr=ct?at.text.globeExtVertexArray:at.icon.globeExtVertexArray);const jt=at.lineVertexArray,Qt=ct?at.text.placedSymbolArray:at.icon.placedSymbolArray,sr=nt.transform.width/nt.transform.height;let lr,yr=!1;for(let _r=0;_r<Qt.length;_r++){const vr=Qt.get(_r),{numGlyphs:kr,writingMode:Sr}=vr;if(Sr!==_.WritingMode.vertical||yr||lr===_.WritingMode.horizontal||(yr=!0),lr=Sr,(vr.hidden||Sr===_.WritingMode.vertical)&&!yr){Zs(kr,_i);continue}yr=!1;const Lr=new _.Point(vr.tileAnchorX,vr.tileAnchorY);let{x:Jr,y:Ar,z:Hr}=Dt.projection.projectTilePoint(Lr.x,Lr.y,$t.canonical);if(kt){const[Dn,_n,Pn]=kt(Lr);Jr+=Dn,Ar+=_n,Hr+=Pn}const Or=[Jr,Ar,Hr,1];if(_.transformMat4$1(Or,Or,et),!ga(Or,er)){Zs(kr,_i);continue}const Qr=l0(nt.transform.cameraToCenterDistance,Or[3]),Mr=_.evaluateSizeForFeature(Vt,Yt,vr),Gr=_t?Mr/Qr:Mr*Qr,rn=os(Jr,Ar,Hr,dt);if(rn[3]<=0){Zs(kr,_i);continue}let Zr={};const nn=_t?null:kt,Sn=gn(vr,Gr,!1,xt,et,dt,ft,at.glyphOffsetArray,jt,_i,tr,rn,Lr,Zr,sr,nn,Dt.projection,$t,_t);yr=Sn.useVertical,nn&&Sn.needsFlipping&&(Zr={}),(Sn.notEnoughRoom||yr||Sn.needsFlipping&&gn(vr,Gr,!0,xt,et,dt,ft,at.glyphOffsetArray,jt,_i,tr,rn,Lr,Zr,sr,nn,Dt.projection,$t,_t).notEnoughRoom)&&Zs(kr,_i)}ct?(at.text.dynamicLayoutVertexBuffer.updateData(_i),tr&&at.text.globeExtVertexBuffer.updateData(tr)):(at.icon.dynamicLayoutVertexBuffer.updateData(_i),tr&&at.icon.globeExtVertexBuffer.updateData(tr))}function c0(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i){const{lineStartIndex:tr,glyphStartIndex:jt,segment:Qt}=xt,sr=jt+xt.numGlyphs,lr=tr+xt.lineLength,yr=et.getoffsetX(jt),_r=et.getoffsetX(sr-1),vr=$s(at*yr,nt,ct,dt,ft,_t,Qt,tr,lr,kt,$t,Dt,Vt,Yt,!0,Jt,er,_i);if(!vr)return null;const kr=$s(at*_r,nt,ct,dt,ft,_t,Qt,tr,lr,kt,$t,Dt,Vt,Yt,!0,Jt,er,_i);return kr?{first:vr,last:kr}:null}function Eu(at,et,nt,ct){return at===_.WritingMode.horizontal&&Math.abs(ct)>Math.abs(nt)?{useVertical:!0}:at===_.WritingMode.vertical?ct>0?{needsFlipping:!0}:null:et!==Vo.unknown&&function(dt,ft){return dt===0||Math.abs(ft/dt)>Ds}(nt,ct)?et===Vo.flipRequired?{needsFlipping:!0}:null:nt<0?{needsFlipping:!0}:null}function gn(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i,tr,jt,Qt){const sr=et/24,lr=at.lineOffsetX*sr,yr=at.lineOffsetY*sr,{lineStartIndex:_r,glyphStartIndex:vr,numGlyphs:kr,segment:Sr,writingMode:Lr,flipState:Jr}=at,Ar=_r+at.lineLength,Hr=Or=>{if(Dt){const[rn,Zr,nn]=Or.up,Sn=$t.length;_.updateGlobeVertexNormal(Dt,Sn+0,rn,Zr,nn),_.updateGlobeVertexNormal(Dt,Sn+1,rn,Zr,nn),_.updateGlobeVertexNormal(Dt,Sn+2,rn,Zr,nn),_.updateGlobeVertexNormal(Dt,Sn+3,rn,Zr,nn)}const[Qr,Mr,Gr]=Or.point;_.addDynamicAttributes($t,Qr,Mr,Gr,Or.angle)};if(kr>1){const Or=c0(sr,xt,lr,yr,nt,Vt,Yt,at,kt,ft,Jt,_i,!1,tr,jt,Qt);if(!Or)return{notEnoughRoom:!0};if(ct&&!nt){let[Qr,Mr,Gr]=Or.first.point,[rn,Zr,nn]=Or.last.point;[Qr,Mr]=os(Qr,Mr,Gr,_t),[rn,Zr]=os(rn,Zr,nn,_t);const Sn=Eu(Lr,Jr,(rn-Qr)*er,Zr-Mr);if(at.flipState=Sn&&Sn.needsFlipping?Vo.flipRequired:Vo.flipNotRequired,Sn)return Sn}Hr(Or.first);for(let Qr=vr+1;Qr<vr+kr-1;Qr++){const Mr=$s(sr*xt.getoffsetX(Qr),lr,yr,nt,Vt,Yt,Sr,_r,Ar,kt,ft,Jt,_i,!1,!1,tr,jt,Qt);if(!Mr)return $t.length-=4*(Qr-vr),{notEnoughRoom:!0};Hr(Mr)}Hr(Or.last)}else{if(ct&&!nt){const Qr=os(Yt.x,Yt.y,0,dt),Mr=_r+Sr+1,Gr=new _.Point(kt.getx(Mr),kt.gety(Mr)),rn=os(Gr.x,Gr.y,0,dt),Zr=rn[3]>0?rn:Gn(Yt,Gr,Qr,1,dt,void 0,tr,jt.canonical),nn=Eu(Lr,Jr,(Zr[0]-Qr[0])*er,Zr[1]-Qr[1]);if(at.flipState=nn&&nn.needsFlipping?Vo.flipRequired:Vo.flipNotRequired,nn)return nn}const Or=$s(sr*xt.getoffsetX(vr),lr,yr,nt,Vt,Yt,Sr,_r,Ar,kt,ft,Jt,_i,!1,!1,tr,jt,Qt);if(!Or)return{notEnoughRoom:!0};Hr(Or)}return{}}function Zn(at,et,nt,ct,dt){const{x:ft,y:_t,z:xt}=ct.projectTilePoint(at.x,at.y,et);if(!dt)return os(ft,_t,xt,nt);const[kt,$t,Dt]=dt(at);return os(ft+kt,_t+$t,xt+Dt,nt)}function Gn(at,et,nt,ct,dt,ft,_t,xt){const kt=Zn(at.sub(et)._unit()._add(at),xt,dt,_t,ft);return _.sub(kt,nt,kt),_.normalize(kt,kt),_.scaleAndAdd(kt,nt,kt,ct)}function $s(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i,tr,jt){const Qt=ct?at-et:at+et;let sr=Qt>0?1:-1,lr=0;ct&&(sr*=-1,lr=Math.PI),sr<0&&(lr+=Math.PI);let yr=xt+_t+(sr>0?0:1)|0,_r=dt,vr=dt,kr=0,Sr=0;const Lr=Math.abs(Qt),Jr=[],Ar=[];let Hr=ft,Or=Hr;const Qr=()=>Gn(Or,Hr,vr,Lr-kr+1,Dt,Yt,_i,tr.canonical);for(;kr+Sr<=Lr;){if(yr+=sr,yr<xt||yr>=kt)return null;if(vr=_r,Or=Hr,Jr.push(vr),Jt&&Ar.push(Or),Hr=new _.Point($t.getx(yr),$t.gety(yr)),_r=Vt[yr],!_r){const Pn=Zn(Hr,tr.canonical,Dt,_i,Yt);_r=Pn[3]>0?Vt[yr]=Pn:Qr()}kr+=Sr,Sr=_.distance(vr,_r)}er&&Yt&&(Vt[yr]&&(_r=Qr(),Sr=_.distance(vr,_r)),Vt[yr]=_r);const Mr=(Lr-kr)/Sr,Gr=Hr.sub(Or)._mult(Mr)._add(Or),rn=_.sub([],_r,vr),Zr=_.scaleAndAdd([],vr,rn,Mr);let nn=[0,0,1],Sn=rn[0],Dn=rn[1];if(jt&&(nn=_i.upVector(tr.canonical,Gr.x,Gr.y),nn[0]!==0||nn[1]!==0||nn[2]!==1)){const Pn=[nn[2],0,-nn[0]],qn=_.cross([],nn,Pn);_.normalize(Pn,Pn),_.normalize(qn,qn),Sn=_.dot(rn,Pn),Dn=_.dot(rn,qn)}if(nt){const Pn=_.cross([],nn,rn);_.normalize(Pn,Pn),_.scaleAndAdd(Zr,Zr,Pn,nt*sr)}const _n=lr+Math.atan2(Dn,Sn);return Jr.push(Zr),Jt&&Ar.push(Gr),{point:Zr,angle:_n,path:Jr,tilePath:Ar,up:nn}}function Zs(at,et){const nt=et.length,ct=nt+4*at;et.resize(ct),et.float32.fill(-1/0,4*nt,4*ct)}function Hn(at,et,nt){const ct=et[0],dt=et[1];return at[0]=nt[0]*ct+nt[4]*dt+nt[12],at[1]=nt[1]*ct+nt[5]*dt+nt[13],at[3]=nt[3]*ct+nt[7]*dt+nt[15],at}const zs=100;class _d{constructor(et,nt,ct=new To(et.width+200,et.height+200,25),dt=new To(et.width+200,et.height+200,25)){this.transform=et,this.grid=ct,this.ignoredGrid=dt,this.pitchfactor=Math.cos(et._pitch)*et.cameraToCenterDistance,this.screenRightBoundary=et.width+zs,this.screenBottomBoundary=et.height+zs,this.gridRightBoundary=et.width+200,this.gridBottomBoundary=et.height+200,this.fogState=nt}placeCollisionBox(et,nt,ct,dt,ft,_t,xt,kt){let $t=ct.projectedAnchorX,Dt=ct.projectedAnchorY,Vt=ct.projectedAnchorZ;const Yt=ct.elevation,Jt=ct.tileID,er=et.getProjection();if(Yt&&Jt){const[_r,vr,kr]=er.upVector(Jt.canonical,ct.tileAnchorX,ct.tileAnchorY),Sr=er.upVectorScale(Jt.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;$t+=_r*Yt*Sr,Dt+=vr*Yt*Sr,Vt+=kr*Yt*Sr}const _i=this.projectAndGetPerspectiveRatio(xt,$t,Dt,Vt,ct.tileID,er.name==="globe"||!!Yt||this.transform.pitch>0,er),tr=_t*_i.perspectiveRatio,jt=(ct.x1*nt+dt.x-ct.padding)*tr+_i.point.x,Qt=(ct.y1*nt+dt.y-ct.padding)*tr+_i.point.y,sr=(ct.x2*nt+dt.x+ct.padding)*tr+_i.point.x,lr=(ct.y2*nt+dt.y+ct.padding)*tr+_i.point.y,yr=_i.perspectiveRatio<=.55||_i.occluded;return!this.isInsideGrid(jt,Qt,sr,lr)||!ft&&this.grid.hitTest(jt,Qt,sr,lr,kt)||yr?{box:[],offscreen:!1,occluded:_i.occluded}:{box:[jt,Qt,sr,lr],offscreen:this.isOffscreen(jt,Qt,sr,lr),occluded:!1}}placeCollisionCircles(et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i){const tr=[],jt=this.transform.elevation,Qt=et.getProjection(),sr=jt?jt.getAtTileOffsetFunc(_i,this.transform.center.lat,this.transform.worldSize,Qt):null,lr=new _.Point(ct.tileAnchorX,ct.tileAnchorY);let{x:yr,y:_r,z:vr}=Qt.projectTilePoint(lr.x,lr.y,_i.canonical);if(sr){const[Gr,rn,Zr]=sr(lr);yr+=Gr,_r+=rn,vr+=Zr}const kr=Qt.name==="globe",Sr=this.projectAndGetPerspectiveRatio(xt,yr,_r,vr,_i,kr||!!jt||this.transform.pitch>0,Qt),{perspectiveRatio:Lr}=Sr,Jr=(Vt?_t/Lr:_t*Lr)/_.ONE_EM,Ar=os(yr,_r,vr,kt),Hr=Sr.signedDistanceFromCamera>0?c0(Jr,ft,ct.lineOffsetX*Jr,ct.lineOffsetY*Jr,!1,Ar,lr,ct,dt,kt,{},jt&&!Vt?sr:null,Vt&&!!jt,Qt,_i,Vt):null;let Or=!1,Qr=!1,Mr=!0;if(Hr&&!Sr.occluded){const Gr=.5*Jt*Lr+er,rn=new _.Point(-100,-100),Zr=new _.Point(this.screenRightBoundary,this.screenBottomBoundary),nn=new Ro,{first:Sn,last:Dn}=Hr,_n=Sn.path.length;let Pn=[];for(let wn=_n-1;wn>=1;wn--)Pn.push(Sn.path[wn]);for(let wn=1;wn<Dn.path.length;wn++)Pn.push(Dn.path[wn]);const qn=2.5*Gr;$t&&(Pn=Pn.map(([wn,ro,no],oo)=>(sr&&!kr&&(no=sr(oo<_n-1?Sn.tilePath[_n-1-oo]:Dn.tilePath[oo-_n+2])[2]),os(wn,ro,no,$t))),Pn.some(wn=>wn[3]<=0)&&(Pn=[]));let Un=[];if(Pn.length>0){let wn=1/0,ro=-1/0,no=1/0,oo=-1/0;for(const so of Pn)wn=Math.min(wn,so[0]),no=Math.min(no,so[1]),ro=Math.max(ro,so[0]),oo=Math.max(oo,so[1]);ro>=rn.x&&wn<=Zr.x&&oo>=rn.y&&no<=Zr.y&&(Un=[Pn.map(so=>new _.Point(so[0],so[1]))],(wn<rn.x||ro>Zr.x||no<rn.y||oo>Zr.y)&&(Un=_.clipLine(Un,rn.x,rn.y,Zr.x,Zr.y)))}for(const wn of Un){nn.reset(wn,.25*Gr);let ro=0;ro=nn.length<=.5*Gr?1:Math.ceil(nn.paddedLength/qn)+1;for(let no=0;no<ro;no++){const oo=no/Math.max(ro-1,1),so=nn.lerp(oo),_s=so.x+zs,as=so.y+zs;tr.push(_s,as,Gr,0);const Us=_s-Gr,$a=as-Gr,bo=_s+Gr,ao=as+Gr;if(Mr=Mr&&this.isOffscreen(Us,$a,bo,ao),Qr=Qr||this.isInsideGrid(Us,$a,bo,ao),!nt&&this.grid.hitTestCircle(_s,as,Gr,Yt)&&(Or=!0,!Dt))return{circles:[],offscreen:!1,collisionDetected:Or,occluded:!1}}}}return{circles:!Dt&&Or||!Qr?[]:tr,offscreen:Mr,collisionDetected:Or,occluded:Sr.occluded}}queryRenderedSymbols(et){if(et.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const nt=[];let ct=1/0,dt=1/0,ft=-1/0,_t=-1/0;for(const Dt of et){const Vt=new _.Point(Dt.x+zs,Dt.y+zs);ct=Math.min(ct,Vt.x),dt=Math.min(dt,Vt.y),ft=Math.max(ft,Vt.x),_t=Math.max(_t,Vt.y),nt.push(Vt)}const xt=this.grid.query(ct,dt,ft,_t).concat(this.ignoredGrid.query(ct,dt,ft,_t)),kt={},$t={};for(const Dt of xt){const Vt=Dt.key;if(kt[Vt.bucketInstanceId]===void 0&&(kt[Vt.bucketInstanceId]={}),kt[Vt.bucketInstanceId][Vt.featureIndex])continue;const Yt=[new _.Point(Dt.x1,Dt.y1),new _.Point(Dt.x2,Dt.y1),new _.Point(Dt.x2,Dt.y2),new _.Point(Dt.x1,Dt.y2)];_.polygonIntersectsPolygon(nt,Yt)&&(kt[Vt.bucketInstanceId][Vt.featureIndex]=!0,$t[Vt.bucketInstanceId]===void 0&&($t[Vt.bucketInstanceId]=[]),$t[Vt.bucketInstanceId].push(Vt.featureIndex))}return $t}insertCollisionBox(et,nt,ct,dt,ft){(nt?this.ignoredGrid:this.grid).insert({bucketInstanceId:ct,featureIndex:dt,collisionGroupID:ft},et[0],et[1],et[2],et[3])}insertCollisionCircles(et,nt,ct,dt,ft){const _t=nt?this.ignoredGrid:this.grid,xt={bucketInstanceId:ct,featureIndex:dt,collisionGroupID:ft};for(let kt=0;kt<et.length;kt+=4)_t.insertCircle(xt,et[kt],et[kt+1],et[kt+2])}projectAndGetPerspectiveRatio(et,nt,ct,dt,ft,_t,xt){const kt=[nt,ct,dt,1];let $t=!1;dt||this.transform.pitch>0?(_.transformMat4$1(kt,kt,et),this.fogState&&ft&&xt.name!=="globe"&&($t=function(Yt,Jt,er,_i,tr,jt){const Qt=jt.calculateFogTileMatrix(tr),sr=[Jt,er,_i];return _.transformMat4(sr,sr,Qt),hr(Yt,sr,jt.pitch,jt._fov)}(this.fogState,nt,ct,dt,ft.toUnwrapped(),this.transform)>.9)):Hn(kt,kt,et);const Dt=kt[3];return{point:new _.Point((kt[0]/Dt+1)/2*this.transform.width+zs,(-kt[1]/Dt+1)/2*this.transform.height+zs),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(xt)/Dt*.5,1.5),signedDistanceFromCamera:Dt,occluded:_t&&kt[2]>Dt||$t}}isOffscreen(et,nt,ct,dt){return ct<zs||et>=this.screenRightBoundary||dt<zs||nt>this.screenBottomBoundary}isInsideGrid(et,nt,ct,dt){return ct>=0&&et<this.gridRightBoundary&&dt>=0&&nt<this.gridBottomBoundary}getViewportMatrix(){const et=_.identity([]);return _.translate(et,et,[-100,-100,0]),et}}function ou(at,et,nt){const ct=et.createTileMatrix(at,at.worldSize,nt.toUnwrapped());return _.multiply(new Float32Array(16),at.projMatrix,ct)}function Fs(at,et,nt){if(et.projection.name===nt.projection.name)return at.projMatrix;const ct=nt.clone();return ct.setProjection(et.projection),ou(ct,et.getProjection(),at)}function xo(at,et,nt){return et.name===nt.projection.name?at.projMatrix:ou(nt,et,at)}class h0{constructor(et,nt,ct,dt){this.opacity=et?Math.max(0,Math.min(1,et.opacity+(et.placed?nt:-nt))):dt&&ct?1:0,this.placed=ct}isHidden(){return this.opacity===0&&!this.placed}}class Pl{constructor(et,nt,ct,dt,ft,_t=!1){this.text=new h0(et?et.text:null,nt,ct,ft),this.icon=new h0(et?et.icon:null,nt,dt,ft),this.clipped=_t}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ep{constructor(et,nt,ct,dt=!1){this.text=et,this.icon=nt,this.skipFade=ct,this.clipped=dt}}class tp{constructor(){this.invProjMatrix=_.create(),this.viewportMatrix=_.create(),this.circles=[]}}class Om{constructor(et,nt,ct,dt,ft){this.bucketInstanceId=et,this.featureIndex=nt,this.sourceLayerIndex=ct,this.bucketIndex=dt,this.tileID=ft}}class u0{constructor(et){this.crossSourceCollisions=et,this.maxGroupID=0,this.collisionGroups={}}get(et){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[et]){const nt=++this.maxGroupID;this.collisionGroups[et]={ID:nt,predicate:ct=>ct.collisionGroupID===nt}}return this.collisionGroups[et]}}function ip(at,et,nt,ct,dt){const{horizontalAlign:ft,verticalAlign:_t}=_.getAnchorAlignment(at),xt=-(ft-.5)*et,kt=-(_t-.5)*nt,$t=_.evaluateVariableOffset(at,ct);return new _.Point(xt+$t[0]*dt,kt+$t[1]*dt)}function rp(at,et,nt,ct,dt){const ft=new _.Point(at,et);return nt&&ft._rotate(ct?dt:-dt),ft}class Vp{constructor(et,nt,ct,dt,ft){this.transform=et.clone(),this.projection=et.projection.name,this.collisionIndex=new _d(this.transform,ft),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=nt,this.retainedQueryData={},this.collisionGroups=new u0(ct),this.collisionCircleArrays={},this.prevPlacement=dt,dt&&(dt.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(et,nt,ct,dt){const ft=ct.getBucket(nt),_t=ct.latestFeatureIndex;if(!ft||!_t||nt.id!==ft.layerIds[0])return;const xt=ft.layers[0].layout,kt=ct.collisionBoxArray,$t=Math.pow(2,this.transform.zoom-ct.tileID.overscaledZ),Dt=ct.tileSize/_.EXTENT,Vt=ct.tileID.toUnwrapped();this.transform.setProjection(ft.projection);const Yt=(Jt=ct.tileID,er=ft.getProjection(),_i=this.transform,er.name===this.projection?_i.calculateProjMatrix(Jt.toUnwrapped()):ou(_i,er,Jt));var Jt,er,_i;const tr=xt.get("text-pitch-alignment")==="map",jt=xt.get("text-rotation-alignment")==="map";nt.compileFilter();const Qt=nt.dynamicFilter(),sr=nt.dynamicFilterNeedsFeature(),lr=this.transform.calculatePixelsToTileUnitsMatrix(ct),yr=Cl(Yt,ct.tileID.canonical,tr,jt,this.transform,ft.getProjection(),lr);let _r=null;if(tr){const Sr=Uo(Yt,ct.tileID.canonical,tr,jt,this.transform,ft.getProjection(),lr);_r=_.multiply([],this.transform.labelPlaneMatrix,Sr)}let vr=null;Qt&&ct.latestFeatureIndex&&(vr={unwrappedTileID:Vt,dynamicFilter:Qt,dynamicFilterNeedsFeature:sr,featureIndex:ct.latestFeatureIndex}),this.retainedQueryData[ft.bucketInstanceId]=new Om(ft.bucketInstanceId,_t,ft.sourceLayerIndex,ft.index,ct.tileID);const kr={bucket:ft,layout:xt,posMatrix:Yt,textLabelPlaneMatrix:yr,labelToScreenMatrix:_r,clippingData:vr,scale:$t,textPixelRatio:Dt,holdingForFade:ct.holdingForFade(),collisionBoxArray:kt,partiallyEvaluatedTextSize:_.evaluateSizeForZoom(ft.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:_.evaluateSizeForZoom(ft.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ft.sourceID)};if(dt)for(const Sr of ft.sortKeyRanges){const{sortKey:Lr,symbolInstanceStart:Jr,symbolInstanceEnd:Ar}=Sr;et.push({sortKey:Lr,symbolInstanceStart:Jr,symbolInstanceEnd:Ar,parameters:kr})}else et.push({symbolInstanceStart:0,symbolInstanceEnd:ft.symbolInstances.length,parameters:kr})}attemptAnchorPlacement(et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i,tr,jt,Qt){const{textOffset0:sr,textOffset1:lr,crossTileID:yr}=Yt,_r=[sr,lr],vr=ip(et,ct,dt,_r,ft),kr=this.collisionIndex.placeCollisionBox(er,ft,nt,rp(vr.x,vr.y,_t,xt,this.transform.angle),Vt,kt,$t,Dt.predicate);if(tr){const Sr=er.getSymbolInstanceIconSize(Qt,this.transform.zoom,Yt.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(er,Sr,tr,rp(vr.x,vr.y,_t,xt,this.transform.angle),Vt,kt,$t,Dt.predicate).box.length===0)return}if(kr.box.length>0){let Sr;return this.prevPlacement&&this.prevPlacement.variableOffsets[yr]&&this.prevPlacement.placements[yr]&&this.prevPlacement.placements[yr].text&&(Sr=this.prevPlacement.variableOffsets[yr].anchor),this.variableOffsets[yr]={textOffset:_r,width:ct,height:dt,anchor:et,textScale:ft,prevAnchor:Sr},this.markUsedJustification(er,et,Yt,_i),er.allowVerticalPlacement&&(this.markUsedOrientation(er,_i,Yt),this.placedOrientations[yr]=_i),{shift:vr,placedGlyphBoxes:kr}}}placeLayerBucketPart(et,nt,ct,dt){const{bucket:ft,layout:_t,posMatrix:xt,textLabelPlaneMatrix:kt,labelToScreenMatrix:$t,clippingData:Dt,textPixelRatio:Vt,holdingForFade:Yt,collisionBoxArray:Jt,partiallyEvaluatedTextSize:er,partiallyEvaluatedIconSize:_i,collisionGroup:tr}=et.parameters,jt=_t.get("text-optional"),Qt=_t.get("icon-optional"),sr=_t.get("text-allow-overlap"),lr=_t.get("icon-allow-overlap"),yr=_t.get("text-rotation-alignment")==="map",_r=_t.get("text-pitch-alignment")==="map",vr=_t.get("icon-text-fit")!=="none",kr=_t.get("symbol-z-order")==="viewport-y";this.transform.setProjection(ft.projection);let Sr=sr&&(lr||!ft.hasIconData()||Qt),Lr=lr&&(sr||!ft.hasTextData()||jt);!ft.collisionArrays&&Jt&&ft.deserializeCollisionBoxes(Jt),ct&&dt&&ft.updateCollisionDebugBuffers(this.transform.zoom,Jt);const Jr=(Ar,Hr,Or)=>{const{crossTileID:Qr,numVerticalGlyphVertices:Mr}=Ar;if(Dt){const bo={zoom:this.transform.zoom,pitch:this.transform.pitch};let ao=null;if(Dt.dynamicFilterNeedsFeature){const eo=this.retainedQueryData[ft.bucketInstanceId];ao=Dt.featureIndex.loadFeature({featureIndex:Ar.featureIndex,bucketIndex:eo.bucketIndex,sourceLayerIndex:eo.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Dt.dynamicFilter)(bo,ao,this.retainedQueryData[ft.bucketInstanceId].tileID.canonical,new _.Point(Ar.tileAnchorX,Ar.tileAnchorY),this.transform.calculateDistanceTileData(Dt.unwrappedTileID)))return this.placements[Qr]=new ep(!1,!1,!1,!0),void nt.add(Qr)}if(nt.has(Qr))return;if(Yt)return void(this.placements[Qr]=new ep(!1,!1,!1));let Gr=!1,rn=!1,Zr=!0,nn=!1,Sn=!1,Dn=null,_n={box:null,offscreen:null,occluded:null},Pn={box:null,offscreen:null,occluded:null},qn=null,Un=null,wn=null,ro=0,no=0,oo=0;Or.textFeatureIndex?ro=Or.textFeatureIndex:Ar.useRuntimeCollisionCircles&&(ro=Ar.featureIndex),Or.verticalTextFeatureIndex&&(no=Or.verticalTextFeatureIndex);const so=bo=>{bo.tileID=this.retainedQueryData[ft.bucketInstanceId].tileID;const ao=this.transform.elevation;(ao||bo.elevation)&&(bo.elevation=ao?ao.getAtTileOffset(bo.tileID,bo.tileAnchorX,bo.tileAnchorY):0)},_s=Or.textBox;if(_s){so(_s);const bo=eo=>{let Go=_.WritingMode.horizontal;if(ft.allowVerticalPlacement&&!eo&&this.prevPlacement){const Es=this.prevPlacement.placedOrientations[Qr];Es&&(this.placedOrientations[Qr]=Es,Go=Es,this.markUsedOrientation(ft,Go,Ar))}return Go},ao=(eo,Go)=>{if(ft.allowVerticalPlacement&&Mr>0&&Or.verticalTextBox){for(const Es of ft.writingModes)if(Es===_.WritingMode.vertical?(_n=Go(),Pn=_n):_n=eo(),_n&&_n.box&&_n.box.length)break}else _n=eo()};if(_t.get("text-variable-anchor")){let eo=_t.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Qr]){const _o=this.prevPlacement.variableOffsets[Qr];eo.indexOf(_o.anchor)>0&&(eo=eo.filter(Ps=>Ps!==_o.anchor),eo.unshift(_o.anchor))}const Go=(_o,Ps,dm)=>{const pu=ft.getSymbolInstanceTextSize(er,Ar,this.transform.zoom,Hr),Ep=(_o.x2-_o.x1)*pu+2*_o.padding,$l=(_o.y2-_o.y1)*pu+2*_o.padding,Ql=vr&&!lr?Ps:null;Ql&&so(Ql);let fu={box:[],offscreen:!1,occluded:!1};const pm=sr?2*eo.length:eo.length;for(let Sp=0;Sp<pm;++Sp){const ky=this.attemptAnchorPlacement(eo[Sp%eo.length],_o,Ep,$l,pu,yr,_r,Vt,xt,tr,Sp>=eo.length,Ar,Hr,ft,dm,Ql,er,_i);if(ky&&(fu=ky.placedGlyphBoxes,fu&&fu.box&&fu.box.length)){Gr=!0,Dn=ky.shift;break}}return fu};ao(()=>Go(_s,Or.iconBox,_.WritingMode.horizontal),()=>{const _o=Or.verticalTextBox;return _o&&so(_o),ft.allowVerticalPlacement&&!(_n&&_n.box&&_n.box.length)&&Mr>0&&_o?Go(_o,Or.verticalIconBox,_.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),_n&&(Gr=_n.box,Zr=_n.offscreen,nn=_n.occluded);const Es=bo(!(!_n||!_n.box));if(!Gr&&this.prevPlacement){const _o=this.prevPlacement.variableOffsets[Qr];_o&&(this.variableOffsets[Qr]=_o,this.markUsedJustification(ft,_o.anchor,Ar,Es))}}else{const eo=(Go,Es)=>{const _o=ft.getSymbolInstanceTextSize(er,Ar,this.transform.zoom,Hr),Ps=this.collisionIndex.placeCollisionBox(ft,_o,Go,new _.Point(0,0),sr,Vt,xt,tr.predicate);return Ps&&Ps.box&&Ps.box.length&&(this.markUsedOrientation(ft,Es,Ar),this.placedOrientations[Qr]=Es),Ps};ao(()=>eo(_s,_.WritingMode.horizontal),()=>{const Go=Or.verticalTextBox;return ft.allowVerticalPlacement&&Mr>0&&Go?(so(Go),eo(Go,_.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),bo(!!(_n&&_n.box&&_n.box.length))}}if(qn=_n,Gr=qn&&qn.box&&qn.box.length>0,Zr=qn&&qn.offscreen,nn=qn&&qn.occluded,Ar.useRuntimeCollisionCircles){const bo=ft.text.placedSymbolArray.get(Ar.centerJustifiedTextSymbolIndex>=0?Ar.centerJustifiedTextSymbolIndex:Ar.verticalPlacedTextSymbolIndex),ao=_.evaluateSizeForFeature(ft.textSizeData,er,bo),eo=_t.get("text-padding");Un=this.collisionIndex.placeCollisionCircles(ft,sr,bo,ft.lineVertexArray,ft.glyphOffsetArray,ao,xt,kt,$t,ct,_r,tr.predicate,Ar.collisionCircleDiameter*ao/_.ONE_EM,eo,this.retainedQueryData[ft.bucketInstanceId].tileID),Gr=sr||Un.circles.length>0&&!Un.collisionDetected,Zr=Zr&&Un.offscreen,nn=Un.occluded}if(Or.iconFeatureIndex&&(oo=Or.iconFeatureIndex),Or.iconBox){const bo=ao=>{so(ao);const eo=vr&&Dn?rp(Dn.x,Dn.y,yr,_r,this.transform.angle):new _.Point(0,0),Go=ft.getSymbolInstanceIconSize(_i,this.transform.zoom,Ar.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(ft,Go,ao,eo,lr,Vt,xt,tr.predicate)};Pn&&Pn.box&&Pn.box.length&&Or.verticalIconBox?(wn=bo(Or.verticalIconBox),rn=wn.box.length>0):(wn=bo(Or.iconBox),rn=wn.box.length>0),Zr=Zr&&wn.offscreen,Sn=wn.occluded}const as=jt||Ar.numHorizontalGlyphVertices===0&&Mr===0,Us=Qt||Ar.numIconVertices===0;if(as||Us?Us?as||(rn=rn&&Gr):Gr=rn&&Gr:rn=Gr=rn&&Gr,Gr&&qn&&qn.box&&this.collisionIndex.insertCollisionBox(qn.box,_t.get("text-ignore-placement"),ft.bucketInstanceId,Pn&&Pn.box&&no?no:ro,tr.ID),rn&&wn&&this.collisionIndex.insertCollisionBox(wn.box,_t.get("icon-ignore-placement"),ft.bucketInstanceId,oo,tr.ID),Un&&(Gr&&this.collisionIndex.insertCollisionCircles(Un.circles,_t.get("text-ignore-placement"),ft.bucketInstanceId,ro,tr.ID),ct)){const bo=ft.bucketInstanceId;let ao=this.collisionCircleArrays[bo];ao===void 0&&(ao=this.collisionCircleArrays[bo]=new tp);for(let eo=0;eo<Un.circles.length;eo+=4)ao.circles.push(Un.circles[eo+0]),ao.circles.push(Un.circles[eo+1]),ao.circles.push(Un.circles[eo+2]),ao.circles.push(Un.collisionDetected?1:0)}const $a=ft.projection.name!=="globe";Sr=Sr&&($a||!nn),Lr=Lr&&($a||!Sn),this.placements[Qr]=new ep(Gr||Sr,rn||Lr,Zr||ft.justReloaded),nt.add(Qr)};if(kr){const Ar=ft.getSortedSymbolIndexes(this.transform.angle);for(let Hr=Ar.length-1;Hr>=0;--Hr){const Or=Ar[Hr];Jr(ft.symbolInstances.get(Or),Or,ft.collisionArrays[Or])}}else for(let Ar=et.symbolInstanceStart;Ar<et.symbolInstanceEnd;Ar++)Jr(ft.symbolInstances.get(Ar),Ar,ft.collisionArrays[Ar]);if(ct&&ft.bucketInstanceId in this.collisionCircleArrays){const Ar=this.collisionCircleArrays[ft.bucketInstanceId];_.invert(Ar.invProjMatrix,xt),Ar.viewportMatrix=this.collisionIndex.getViewportMatrix()}ft.justReloaded=!1}markUsedJustification(et,nt,ct,dt){const{leftJustifiedTextSymbolIndex:ft,centerJustifiedTextSymbolIndex:_t,rightJustifiedTextSymbolIndex:xt,verticalPlacedTextSymbolIndex:kt,crossTileID:$t}=ct,Dt=_.getAnchorJustification(nt),Vt=dt===_.WritingMode.vertical?kt:Dt==="left"?ft:Dt==="center"?_t:Dt==="right"?xt:-1;ft>=0&&(et.text.placedSymbolArray.get(ft).crossTileID=Vt>=0&&ft!==Vt?0:$t),_t>=0&&(et.text.placedSymbolArray.get(_t).crossTileID=Vt>=0&&_t!==Vt?0:$t),xt>=0&&(et.text.placedSymbolArray.get(xt).crossTileID=Vt>=0&&xt!==Vt?0:$t),kt>=0&&(et.text.placedSymbolArray.get(kt).crossTileID=Vt>=0&&kt!==Vt?0:$t)}markUsedOrientation(et,nt,ct){const dt=nt===_.WritingMode.horizontal||nt===_.WritingMode.horizontalOnly?nt:0,ft=nt===_.WritingMode.vertical?nt:0,{leftJustifiedTextSymbolIndex:_t,centerJustifiedTextSymbolIndex:xt,rightJustifiedTextSymbolIndex:kt,verticalPlacedTextSymbolIndex:$t}=ct,Dt=et.text.placedSymbolArray;_t>=0&&(Dt.get(_t).placedOrientation=dt),xt>=0&&(Dt.get(xt).placedOrientation=dt),kt>=0&&(Dt.get(kt).placedOrientation=dt),$t>=0&&(Dt.get($t).placedOrientation=ft)}commit(et){this.commitTime=et,this.zoomAtLastRecencyCheck=this.transform.zoom;const nt=this.prevPlacement;let ct=!1;this.prevZoomAdjustment=nt?nt.zoomAdjustment(this.transform.zoom):0;const dt=nt?nt.symbolFadeChange(et):1,ft=nt?nt.opacities:{},_t=nt?nt.variableOffsets:{},xt=nt?nt.placedOrientations:{};for(const kt in this.placements){const $t=this.placements[kt],Dt=ft[kt];Dt?(this.opacities[kt]=new Pl(Dt,dt,$t.text,$t.icon,null,$t.clipped),ct=ct||$t.text!==Dt.text.placed||$t.icon!==Dt.icon.placed):(this.opacities[kt]=new Pl(null,dt,$t.text,$t.icon,$t.skipFade,$t.clipped),ct=ct||$t.text||$t.icon)}for(const kt in ft){const $t=ft[kt];if(!this.opacities[kt]){const Dt=new Pl($t,dt,!1,!1);Dt.isHidden()||(this.opacities[kt]=Dt,ct=ct||$t.text.placed||$t.icon.placed)}}for(const kt in _t)this.variableOffsets[kt]||!this.opacities[kt]||this.opacities[kt].isHidden()||(this.variableOffsets[kt]=_t[kt]);for(const kt in xt)this.placedOrientations[kt]||!this.opacities[kt]||this.opacities[kt].isHidden()||(this.placedOrientations[kt]=xt[kt]);ct?this.lastPlacementChangeTime=et:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=nt?nt.lastPlacementChangeTime:et)}updateLayerOpacities(et,nt){const ct=new Set;for(const dt of nt){const ft=dt.getBucket(et);ft&&dt.latestFeatureIndex&&et.id===ft.layerIds[0]&&this.updateBucketOpacities(ft,ct,dt.collisionBoxArray)}}updateBucketOpacities(et,nt,ct){et.hasTextData()&&et.text.opacityVertexArray.clear(),et.hasIconData()&&et.icon.opacityVertexArray.clear(),et.hasIconCollisionBoxData()&&et.iconCollisionBox.collisionVertexArray.clear(),et.hasTextCollisionBoxData()&&et.textCollisionBox.collisionVertexArray.clear();const dt=et.layers[0].layout,ft=!!et.layers[0].dynamicFilter(),_t=new Pl(null,0,!1,!1,!0),xt=dt.get("text-allow-overlap"),kt=dt.get("icon-allow-overlap"),$t=dt.get("text-variable-anchor"),Dt=dt.get("text-rotation-alignment")==="map",Vt=dt.get("text-pitch-alignment")==="map",Yt=dt.get("icon-text-fit")!=="none",Jt=new Pl(null,0,xt&&(kt||!et.hasIconData()||dt.get("icon-optional")),kt&&(xt||!et.hasTextData()||dt.get("text-optional")),!0);!et.collisionArrays&&ct&&(et.hasIconCollisionBoxData()||et.hasTextCollisionBoxData())&&et.deserializeCollisionBoxes(ct);const er=(tr,jt,Qt)=>{for(let sr=0;sr<jt/4;sr++)tr.opacityVertexArray.emplaceBack(Qt)};let _i=0;for(let tr=0;tr<et.symbolInstances.length;tr++){const jt=et.symbolInstances.get(tr),{numHorizontalGlyphVertices:Qt,numVerticalGlyphVertices:sr,crossTileID:lr,numIconVertices:yr}=jt,_r=nt.has(lr);let vr=this.opacities[lr];_r?vr=_t:vr||(vr=Jt,this.opacities[lr]=vr),nt.add(lr);const kr=Qt>0||sr>0,Sr=yr>0,Lr=this.placedOrientations[lr],Jr=Lr===_.WritingMode.vertical,Ar=Lr===_.WritingMode.horizontal||Lr===_.WritingMode.horizontalOnly;if(!kr&&!Sr||vr.isHidden()||_i++,kr){const Hr=np(vr.text);er(et.text,Qt,Jr?Do:Hr),er(et.text,sr,Ar?Do:Hr);const Or=vr.text.isHidden(),{leftJustifiedTextSymbolIndex:Qr,centerJustifiedTextSymbolIndex:Mr,rightJustifiedTextSymbolIndex:Gr,verticalPlacedTextSymbolIndex:rn}=jt,Zr=et.text.placedSymbolArray,nn=Or||Jr?1:0;Qr>=0&&(Zr.get(Qr).hidden=nn),Mr>=0&&(Zr.get(Mr).hidden=nn),Gr>=0&&(Zr.get(Gr).hidden=nn),rn>=0&&(Zr.get(rn).hidden=Or||Ar?1:0);const Sn=this.variableOffsets[lr];Sn&&this.markUsedJustification(et,Sn.anchor,jt,Lr);const Dn=this.placedOrientations[lr];Dn&&(this.markUsedJustification(et,"left",jt,Dn),this.markUsedOrientation(et,Dn,jt))}if(Sr){const Hr=np(vr.icon),{placedIconSymbolIndex:Or,verticalPlacedIconSymbolIndex:Qr}=jt,Mr=et.icon.placedSymbolArray,Gr=vr.icon.isHidden()?1:0;Or>=0&&(er(et.icon,yr,Jr?Do:Hr),Mr.get(Or).hidden=Gr),Qr>=0&&(er(et.icon,jt.numVerticalIconVertices,Ar?Do:Hr),Mr.get(Qr).hidden=Gr)}if(et.hasIconCollisionBoxData()||et.hasTextCollisionBoxData()){const Hr=et.collisionArrays[tr];if(Hr){let Or=new _.Point(0,0),Qr=!0;if(Hr.textBox||Hr.verticalTextBox){if($t){const Gr=this.variableOffsets[lr];Gr?(Or=ip(Gr.anchor,Gr.width,Gr.height,Gr.textOffset,Gr.textScale),Dt&&Or._rotate(Vt?this.transform.angle:-this.transform.angle)):Qr=!1}ft&&(Qr=!vr.clipped),Hr.textBox&&Su(et.textCollisionBox.collisionVertexArray,vr.text.placed,!Qr||Jr,Or.x,Or.y),Hr.verticalTextBox&&Su(et.textCollisionBox.collisionVertexArray,vr.text.placed,!Qr||Ar,Or.x,Or.y)}const Mr=Qr&&!!(!Ar&&Hr.verticalIconBox);Hr.iconBox&&Su(et.iconCollisionBox.collisionVertexArray,vr.icon.placed,Mr,Yt?Or.x:0,Yt?Or.y:0),Hr.verticalIconBox&&Su(et.iconCollisionBox.collisionVertexArray,vr.icon.placed,!Mr,Yt?Or.x:0,Yt?Or.y:0)}}}if(et.fullyClipped=_i===0,et.sortFeatures(this.transform.angle),this.retainedQueryData[et.bucketInstanceId]&&(this.retainedQueryData[et.bucketInstanceId].featureSortOrder=et.featureSortOrder),et.hasTextData()&&et.text.opacityVertexBuffer&&et.text.opacityVertexBuffer.updateData(et.text.opacityVertexArray),et.hasIconData()&&et.icon.opacityVertexBuffer&&et.icon.opacityVertexBuffer.updateData(et.icon.opacityVertexArray),et.hasIconCollisionBoxData()&&et.iconCollisionBox.collisionVertexBuffer&&et.iconCollisionBox.collisionVertexBuffer.updateData(et.iconCollisionBox.collisionVertexArray),et.hasTextCollisionBoxData()&&et.textCollisionBox.collisionVertexBuffer&&et.textCollisionBox.collisionVertexBuffer.updateData(et.textCollisionBox.collisionVertexArray),et.bucketInstanceId in this.collisionCircleArrays){const tr=this.collisionCircleArrays[et.bucketInstanceId];et.placementInvProjMatrix=tr.invProjMatrix,et.placementViewportMatrix=tr.viewportMatrix,et.collisionCircleArray=tr.circles,delete this.collisionCircleArrays[et.bucketInstanceId]}}symbolFadeChange(et){return this.fadeDuration===0?1:(et-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(et){return Math.max(0,(this.transform.zoom-et)/1.5)}hasTransitions(et){return this.stale||et-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(et,nt){const ct=this.zoomAtLastRecencyCheck===nt?1-this.zoomAdjustment(nt):1;return this.zoomAtLastRecencyCheck=nt,this.commitTime+this.fadeDuration*ct>et}setStale(){this.stale=!0}}function Su(at,et,nt,ct,dt){at.emplaceBack(et?1:0,nt?1:0,ct||0,dt||0),at.emplaceBack(et?1:0,nt?1:0,ct||0,dt||0),at.emplaceBack(et?1:0,nt?1:0,ct||0,dt||0),at.emplaceBack(et?1:0,nt?1:0,ct||0,dt||0)}const ks=Math.pow(2,25),No=Math.pow(2,24),Bm=Math.pow(2,17),Fm=Math.pow(2,16),Cs=Math.pow(2,9),Vs=Math.pow(2,8),d0=Math.pow(2,1);function np(at){if(at.opacity===0&&!at.placed)return 0;if(at.opacity===1&&at.placed)return 4294967295;const et=at.placed?1:0,nt=Math.floor(127*at.opacity);return nt*ks+et*No+nt*Bm+et*Fm+nt*Cs+et*Vs+nt*d0+et}const Do=0;class op{constructor(et){this._sortAcrossTiles=et.layout.get("symbol-z-order")!=="viewport-y"&&et.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(et,nt,ct,dt,ft){const _t=this._bucketParts;for(;this._currentTileIndex<et.length;)if(nt.getBucketParts(_t,dt,et[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ft())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,_t.sort((xt,kt)=>xt.sortKey-kt.sortKey));this._currentPartIndex<_t.length;){const xt=_t[this._currentPartIndex];if(nt.placeLayerBucketPart(xt,this._seenCrossTileIDs,ct,xt.symbolInstanceStart===0),this._currentPartIndex++,ft())return!0}return!1}}class Vm{constructor(et,nt,ct,dt,ft,_t,xt,kt){this.placement=new Vp(et,ft,_t,xt,kt),this._currentPlacementIndex=nt.length-1,this._forceFullPlacement=ct,this._showCollisionBoxes=dt,this._done=!1}isDone(){return this._done}continuePlacement(et,nt,ct){const dt=_.exported.now(),ft=()=>{const _t=_.exported.now()-dt;return!this._forceFullPlacement&&_t>2};for(;this._currentPlacementIndex>=0;){const _t=nt[et[this._currentPlacementIndex]],xt=this.placement.collisionIndex.transform.zoom;if(_t.type==="symbol"&&(!_t.minzoom||_t.minzoom<=xt)&&(!_t.maxzoom||_t.maxzoom>xt)){if(this._inProgressLayer||(this._inProgressLayer=new op(_t)),this._inProgressLayer.continuePlacement(ct[_t.source],this.placement,this._showCollisionBoxes,_t,ft))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(et){return this.placement.commit(et),this.placement}}const su=512/_.EXTENT/2;class ps{constructor(et,nt,ct){this.tileID=et,this.bucketInstanceId=ct,this.index=new _.KDBush(nt.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const dt=et.canonical.x*_.EXTENT,ft=et.canonical.y*_.EXTENT;for(let _t=0;_t<nt.length;_t++){const{key:xt,crossTileID:kt,tileAnchorX:$t,tileAnchorY:Dt}=nt.get(_t),Vt=Math.floor((dt+$t)*su),Yt=Math.floor((ft+Dt)*su);this.index.add(Vt,Yt),this.keys.push(xt),this.crossTileIDs.push(kt)}this.index.finish()}findMatches(et,nt,ct){const dt=this.tileID.canonical.z<nt.canonical.z?1:Math.pow(2,this.tileID.canonical.z-nt.canonical.z),ft=su/Math.pow(2,nt.canonical.z-this.tileID.canonical.z),_t=nt.canonical.x*_.EXTENT,xt=nt.canonical.y*_.EXTENT;for(let kt=0;kt<et.length;kt++){const $t=et.get(kt);if($t.crossTileID)continue;const{key:Dt,tileAnchorX:Vt,tileAnchorY:Yt}=$t,Jt=Math.floor((_t+Vt)*ft),er=Math.floor((xt+Yt)*ft),_i=this.index.range(Jt-dt,er-dt,Jt+dt,er+dt);for(const tr of _i){const jt=this.crossTileIDs[tr];if(this.keys[tr]===Dt&&!ct.has(jt)){ct.add(jt),$t.crossTileID=jt;break}}}}}class Nm{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(et){const nt=Math.round((et-this.lng)/360);if(nt!==0)for(const ct in this.indexes){const dt=this.indexes[ct],ft={};for(const _t in dt){const xt=dt[_t];xt.tileID=xt.tileID.unwrapTo(xt.tileID.wrap+nt),ft[xt.tileID.key]=xt}this.indexes[ct]=ft}this.lng=et}addBucket(et,nt,ct){if(this.indexes[et.overscaledZ]&&this.indexes[et.overscaledZ][et.key]){if(this.indexes[et.overscaledZ][et.key].bucketInstanceId===nt.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(et.overscaledZ,this.indexes[et.overscaledZ][et.key])}for(let ft=0;ft<nt.symbolInstances.length;ft++)nt.symbolInstances.get(ft).crossTileID=0;this.usedCrossTileIDs[et.overscaledZ]||(this.usedCrossTileIDs[et.overscaledZ]=new Set);const dt=this.usedCrossTileIDs[et.overscaledZ];for(const ft in this.indexes){const _t=this.indexes[ft];if(Number(ft)>et.overscaledZ)for(const xt in _t){const kt=_t[xt];kt.tileID.isChildOf(et)&&kt.findMatches(nt.symbolInstances,et,dt)}else{const xt=_t[et.scaledTo(Number(ft)).key];xt&&xt.findMatches(nt.symbolInstances,et,dt)}}for(let ft=0;ft<nt.symbolInstances.length;ft++){const _t=nt.symbolInstances.get(ft);_t.crossTileID||(_t.crossTileID=ct.generate(),dt.add(_t.crossTileID))}return this.indexes[et.overscaledZ]===void 0&&(this.indexes[et.overscaledZ]={}),this.indexes[et.overscaledZ][et.key]=new ps(et,nt.symbolInstances,nt.bucketInstanceId),!0}removeBucketCrossTileIDs(et,nt){for(const ct of nt.crossTileIDs)this.usedCrossTileIDs[et].delete(ct)}removeStaleBuckets(et){let nt=!1;for(const ct in this.indexes){const dt=this.indexes[ct];for(const ft in dt)et[dt[ft].bucketInstanceId]||(this.removeBucketCrossTileIDs(ct,dt[ft]),delete dt[ft],nt=!0)}return nt}}class Al{constructor(){this.layerIndexes={},this.crossTileIDs=new Nm,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(et,nt,ct,dt){let ft=this.layerIndexes[et.id];ft===void 0&&(ft=this.layerIndexes[et.id]=new jm);let _t=!1;const xt={};dt.name!=="globe"&&ft.handleWrapJump(ct);for(const kt of nt){const $t=kt.getBucket(et);$t&&et.id===$t.layerIds[0]&&($t.bucketInstanceId||($t.bucketInstanceId=++this.maxBucketInstanceId),ft.addBucket(kt.tileID,$t,this.crossTileIDs)&&(_t=!0),xt[$t.bucketInstanceId]=!0)}return ft.removeStaleBuckets(xt)&&(_t=!0),_t}pruneUnusedLayers(et){const nt={};et.forEach(ct=>{nt[ct]=!0});for(const ct in this.layerIndexes)nt[ct]||delete this.layerIndexes[ct]}}const Yl=(at,et)=>_.emitValidationErrors(at,et&&et.filter(nt=>nt.identifier!=="source.canvas")),Np=_.pick(Yn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Lv=_.pick(Yn,["setCenter","setZoom","setBearing","setPitch"]),Um={version:8,layers:[],sources:{}},Tu={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class _a extends _.Evented{constructor(et,nt={}){super(),this.map=et,this.dispatcher=new or(Zl(),this),this.imageManager=new Tr,this.imageManager.setEventedParent(this),this.glyphManager=new _.GlyphManager(et._requestManager,nt.localFontFamily?_.LocalGlyphMode.all:nt.localIdeographFontFamily?_.LocalGlyphMode.ideographs:_.LocalGlyphMode.none,nt.localFontFamily||nt.localIdeographFontFamily),this.crossTileSymbolIndex=new Al,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",_.getReferrer());const ct=this;this._rtlTextPluginCallback=_a.registerForPluginStateChange(dt=>{ct.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:dt.pluginStatus,pluginURL:dt.pluginURL},(ft,_t)=>{if(_.triggerPluginCompletionEvent(ft),_t&&_t.every(xt=>xt))for(const xt in ct._sourceCaches){const kt=ct._sourceCaches[xt],$t=kt.getSource().type;$t!=="vector"&&$t!=="geojson"||kt.reload()}})}),this.on("data",dt=>{if(dt.dataType!=="source"||dt.sourceDataType!=="metadata")return;const ft=this.getSource(dt.sourceId);if(ft&&ft.vectorLayerIds)for(const _t in this._layers){const xt=this._layers[_t];xt.source===ft.id&&this._validateLayer(xt)}})}loadURL(et,nt={}){this.fire(new _.Event("dataloading",{dataType:"style"}));const ct=typeof nt.validate=="boolean"?nt.validate:!_.isMapboxURL(et);et=this.map._requestManager.normalizeStyleURL(et,nt.accessToken);const dt=this.map._requestManager.transformRequest(et,_.ResourceType.Style);this._request=_.getJSON(dt,(ft,_t)=>{this._request=null,ft?this.fire(new _.ErrorEvent(ft)):_t&&this._load(_t,ct)})}loadJSON(et,nt={}){this.fire(new _.Event("dataloading",{dataType:"style"})),this._request=_.exported.frame(()=>{this._request=null,this._load(et,nt.validate!==!1)})}loadEmpty(){this.fire(new _.Event("dataloading",{dataType:"style"})),this._load(Um,!1)}_updateLayerCount(et,nt){const ct=nt?1:-1;et.is3D()&&(this._num3DLayers+=ct),et.type==="circle"&&(this._numCircleLayers+=ct),et.type==="symbol"&&(this._numSymbolLayers+=ct)}_load(et,nt){if(nt&&Yl(this,_.validateStyle(et)))return;this._loaded=!0,this.stylesheet=_.clone$1(et),this._updateMapProjection();for(const dt in et.sources)this.addSource(dt,et.sources[dt],{validate:!1});this._changed=!1,et.sprite?this._loadSprite(et.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(et.glyphs);const ct=Bp(this.stylesheet.layers);this._order=ct.map(dt=>dt.id),this._layers={},this._serializedLayers={};for(const dt of ct){const ft=_.createStyleLayer(dt);ft.setEventedParent(this,{layer:{id:ft.id}}),this._layers[ft.id]=ft,this._serializedLayers[ft.id]=ft.serialize(),this._updateLayerCount(ft,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Xr(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new _.Event("data",{dataType:"style"})),this.fire(new _.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(et){et?this.stylesheet.projection=et:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(et){this._spriteRequest=function(nt,ct,dt){let ft,_t,xt;const kt=_.exported.devicePixelRatio>1?"@2x":"";let $t=_.getJSON(ct.transformRequest(ct.normalizeSpriteURL(nt,kt,".json"),_.ResourceType.SpriteJSON),(Yt,Jt)=>{$t=null,xt||(xt=Yt,ft=Jt,Vt())}),Dt=_.getImage(ct.transformRequest(ct.normalizeSpriteURL(nt,kt,".png"),_.ResourceType.SpriteImage),(Yt,Jt)=>{Dt=null,xt||(xt=Yt,_t=Jt,Vt())});function Vt(){if(xt)dt(xt);else if(ft&&_t){const Yt=_.exported.getImageData(_t),Jt={};for(const er in ft){const{width:_i,height:tr,x:jt,y:Qt,sdf:sr,pixelRatio:lr,stretchX:yr,stretchY:_r,content:vr}=ft[er],kr=new _.RGBAImage({width:_i,height:tr});_.RGBAImage.copy(Yt,kr,{x:jt,y:Qt},{x:0,y:0},{width:_i,height:tr}),Jt[er]={data:kr,pixelRatio:lr,sdf:sr,stretchX:yr,stretchY:_r,content:vr}}dt(null,Jt)}}return{cancel(){$t&&($t.cancel(),$t=null),Dt&&(Dt.cancel(),Dt=null)}}}(et,this.map._requestManager,(nt,ct)=>{if(this._spriteRequest=null,nt)this.fire(new _.ErrorEvent(nt));else if(ct)for(const dt in ct)this.imageManager.addImage(dt,ct[dt]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new _.Event("data",{dataType:"style"}))})}_validateLayer(et){const nt=this.getSource(et.source);if(!nt)return;const ct=et.sourceLayer;ct&&(nt.type==="geojson"||nt.vectorLayerIds&&nt.vectorLayerIds.indexOf(ct)===-1)&&this.fire(new _.ErrorEvent(new Error(`Source layer "${ct}" does not exist on source "${nt.id}" as specified by style layer "${et.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const et in this._sourceCaches)if(!this._sourceCaches[et].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(et){const nt=[];for(const ct of et){const dt=this._layers[ct];dt.type!=="custom"&&nt.push(dt.serialize())}return nt}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const et in this._sourceCaches)if(this._sourceCaches[et].hasTransition())return!0;for(const et in this._layers)if(this._layers[et].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(et){return!!this.terrain&&(typeof et.isLayerDraped=="function"?et.isLayerDraped():Tu[et.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(et){if(!this._loaded)return;const nt=this._changed;if(this._changed){const dt=Object.keys(this._updatedLayers),ft=Object.keys(this._removedLayers);(dt.length||ft.length)&&this._updateWorkerLayers(dt,ft);for(const _t in this._updatedSources){const xt=this._updatedSources[_t];xt==="reload"?this._reloadSource(_t):xt==="clear"&&this._clearSource(_t)}this._updateTilesForChangedImages();for(const _t in this._updatedPaintProps)this._layers[_t].updateTransitions(et);this.light.updateTransitions(et),this.fog&&this.fog.updateTransitions(et),this._resetUpdates()}const ct={};for(const dt in this._sourceCaches){const ft=this._sourceCaches[dt];ct[dt]=ft.used,ft.used=!1}for(const dt of this._order){const ft=this._layers[dt];if(ft.recalculate(et,this._availableImages),!ft.isHidden(et.zoom)){const xt=this._getLayerSourceCache(ft);xt&&(xt.used=!0)}const _t=this.map.painter;if(_t){const xt=ft.getProgramIds();if(!xt)continue;const kt=ft.getProgramConfiguration(et.zoom);for(const $t of xt)_t.useProgram($t,kt)}}for(const dt in ct){const ft=this._sourceCaches[dt];ct[dt]!==ft.used&&ft.getSource().fire(new _.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ft.getSource().id}))}this.light.recalculate(et),this.terrain&&this.terrain.recalculate(et),this.fog&&this.fog.recalculate(et),this.z=et.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),nt&&this.fire(new _.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const et=Object.keys(this._changedImages);if(et.length){for(const nt in this._sourceCaches)this._sourceCaches[nt].reloadTilesForDependencies(["icons","patterns"],et);this._changedImages={}}}_updateWorkerLayers(et,nt){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(et),removedIds:nt})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(et){if(this._checkLoaded(),Yl(this,_.validateStyle(et)))return!1;(et=_.clone$1(et)).layers=Bp(et.layers);const nt=function(dt,ft){if(!dt)return[{command:Yn.setStyle,args:[ft]}];let _t=[];try{if(!ut(dt.version,ft.version))return[{command:Yn.setStyle,args:[ft]}];ut(dt.center,ft.center)||_t.push({command:Yn.setCenter,args:[ft.center]}),ut(dt.zoom,ft.zoom)||_t.push({command:Yn.setZoom,args:[ft.zoom]}),ut(dt.bearing,ft.bearing)||_t.push({command:Yn.setBearing,args:[ft.bearing]}),ut(dt.pitch,ft.pitch)||_t.push({command:Yn.setPitch,args:[ft.pitch]}),ut(dt.sprite,ft.sprite)||_t.push({command:Yn.setSprite,args:[ft.sprite]}),ut(dt.glyphs,ft.glyphs)||_t.push({command:Yn.setGlyphs,args:[ft.glyphs]}),ut(dt.transition,ft.transition)||_t.push({command:Yn.setTransition,args:[ft.transition]}),ut(dt.light,ft.light)||_t.push({command:Yn.setLight,args:[ft.light]}),ut(dt.fog,ft.fog)||_t.push({command:Yn.setFog,args:[ft.fog]}),ut(dt.projection,ft.projection)||_t.push({command:Yn.setProjection,args:[ft.projection]});const xt={},kt=[];(function(Vt,Yt,Jt,er){let _i;for(_i in Yt=Yt||{},Vt=Vt||{})Vt.hasOwnProperty(_i)&&(Yt.hasOwnProperty(_i)||Xl(_i,Jt,er));for(_i in Yt){if(!Yt.hasOwnProperty(_i))continue;const tr=Yt[_i];Vt.hasOwnProperty(_i)?ut(Vt[_i],tr)||(Vt[_i].type==="geojson"&&tr.type==="geojson"&&Ju(Vt,Yt,_i)?Jt.push({command:Yn.setGeoJSONSourceData,args:[_i,tr.data]}):Fp(_i,Yt,Jt,er)):Qu(_i,Yt,Jt)}})(dt.sources,ft.sources,kt,xt);const $t=[];dt.layers&&dt.layers.forEach(Vt=>{Vt.source&&xt[Vt.source]?_t.push({command:Yn.removeLayer,args:[Vt.id]}):$t.push(Vt)});let Dt=dt.terrain;Dt&&xt[Dt.source]&&(_t.push({command:Yn.setTerrain,args:[void 0]}),Dt=void 0),_t=_t.concat(kt),ut(Dt,ft.terrain)||_t.push({command:Yn.setTerrain,args:[ft.terrain]}),function(Vt,Yt,Jt){Yt=Yt||[];const er=(Vt=Vt||[]).map(un),_i=Yt.map(un),tr=Vt.reduce(kn,{}),jt=Yt.reduce(kn,{}),Qt=er.slice(),sr=Object.create(null);let lr,yr,_r,vr,kr,Sr,Lr;for(lr=0,yr=0;lr<er.length;lr++)_r=er[lr],jt.hasOwnProperty(_r)?yr++:(Jt.push({command:Yn.removeLayer,args:[_r]}),Qt.splice(Qt.indexOf(_r,yr),1));for(lr=0,yr=0;lr<_i.length;lr++)_r=_i[_i.length-1-lr],Qt[Qt.length-1-lr]!==_r&&(tr.hasOwnProperty(_r)?(Jt.push({command:Yn.removeLayer,args:[_r]}),Qt.splice(Qt.lastIndexOf(_r,Qt.length-yr),1)):yr++,Sr=Qt[Qt.length-lr],Jt.push({command:Yn.addLayer,args:[jt[_r],Sr]}),Qt.splice(Qt.length-lr,0,_r),sr[_r]=!0);for(lr=0;lr<_i.length;lr++)if(_r=_i[lr],vr=tr[_r],kr=jt[_r],!sr[_r]&&!ut(vr,kr))if(ut(vr.source,kr.source)&&ut(vr["source-layer"],kr["source-layer"])&&ut(vr.type,kr.type)){for(Lr in Vr(vr.layout,kr.layout,Jt,_r,null,Yn.setLayoutProperty),Vr(vr.paint,kr.paint,Jt,_r,null,Yn.setPaintProperty),ut(vr.filter,kr.filter)||Jt.push({command:Yn.setFilter,args:[_r,kr.filter]}),ut(vr.minzoom,kr.minzoom)&&ut(vr.maxzoom,kr.maxzoom)||Jt.push({command:Yn.setLayerZoomRange,args:[_r,kr.minzoom,kr.maxzoom]}),vr)vr.hasOwnProperty(Lr)&&Lr!=="layout"&&Lr!=="paint"&&Lr!=="filter"&&Lr!=="metadata"&&Lr!=="minzoom"&&Lr!=="maxzoom"&&(Lr.indexOf("paint.")===0?Vr(vr[Lr],kr[Lr],Jt,_r,Lr.slice(6),Yn.setPaintProperty):ut(vr[Lr],kr[Lr])||Jt.push({command:Yn.setLayerProperty,args:[_r,Lr,kr[Lr]]}));for(Lr in kr)kr.hasOwnProperty(Lr)&&!vr.hasOwnProperty(Lr)&&Lr!=="layout"&&Lr!=="paint"&&Lr!=="filter"&&Lr!=="metadata"&&Lr!=="minzoom"&&Lr!=="maxzoom"&&(Lr.indexOf("paint.")===0?Vr(vr[Lr],kr[Lr],Jt,_r,Lr.slice(6),Yn.setPaintProperty):ut(vr[Lr],kr[Lr])||Jt.push({command:Yn.setLayerProperty,args:[_r,Lr,kr[Lr]]}))}else Jt.push({command:Yn.removeLayer,args:[_r]}),Sr=Qt[Qt.lastIndexOf(_r)+1],Jt.push({command:Yn.addLayer,args:[kr,Sr]})}($t,ft.layers,_t)}catch(xt){console.warn("Unable to compute style diff:",xt),_t=[{command:Yn.setStyle,args:[ft]}]}return _t}(this.serialize(),et).filter(dt=>!(dt.command in Lv));if(nt.length===0)return!1;const ct=nt.filter(dt=>!(dt.command in Np));if(ct.length>0)throw new Error(`Unimplemented: ${ct.map(dt=>dt.command).join(", ")}.`);return nt.forEach(dt=>{dt.command!=="setTransition"&&dt.command!=="setProjection"&&this[dt.command].apply(this,dt.args)}),this.stylesheet=et,this._updateMapProjection(),!0}addImage(et,nt){return this.getImage(et)?this.fire(new _.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(et,nt),this._afterImageUpdated(et),this)}updateImage(et,nt){this.imageManager.updateImage(et,nt)}getImage(et){return this.imageManager.getImage(et)}removeImage(et){return this.getImage(et)?(this.imageManager.removeImage(et),this._afterImageUpdated(et),this):this.fire(new _.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(et){this._availableImages=this.imageManager.listImages(),this._changedImages[et]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(et,nt,ct={}){if(this._checkLoaded(),this.getSource(et)!==void 0)throw new Error("There is already a source with this ID");if(!nt.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(nt).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(nt.type)>=0&&this._validate(_.validateSource,`sources.${et}`,nt,null,ct))return;this.map&&this.map._collectResourceTiming&&(nt.collectResourceTiming=!0);const dt=Mn(et,nt,this.dispatcher,this);dt.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(et),source:dt.serialize(),sourceId:et}));const ft=_t=>{const xt=(_t?"symbol:":"other:")+et,kt=this._sourceCaches[xt]=new _.SourceCache(xt,dt,_t);(_t?this._symbolSourceCaches:this._otherSourceCaches)[et]=kt,kt.style=this,kt.onAdd(this.map)};ft(!1),nt.type!=="vector"&&nt.type!=="geojson"||ft(!0),dt.onAdd&&dt.onAdd(this.map),this._changed=!0}removeSource(et){this._checkLoaded();const nt=this.getSource(et);if(!nt)throw new Error("There is no source with this ID");for(const dt in this._layers)if(this._layers[dt].source===et)return this.fire(new _.ErrorEvent(new Error(`Source "${et}" cannot be removed while layer "${dt}" is using it.`)));if(this.terrain&&this.terrain.get().source===et)return this.fire(new _.ErrorEvent(new Error(`Source "${et}" cannot be removed while terrain is using it.`)));const ct=this._getSourceCaches(et);for(const dt of ct)delete this._sourceCaches[dt.id],delete this._updatedSources[dt.id],dt.fire(new _.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:dt.getSource().id})),dt.setEventedParent(null),dt.clearTiles();return delete this._otherSourceCaches[et],delete this._symbolSourceCaches[et],nt.setEventedParent(null),nt.onRemove&&nt.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(et,nt){this._checkLoaded(),this.getSource(et).setData(nt),this._changed=!0}getSource(et){const nt=this._getSourceCache(et);return nt&&nt.getSource()}_getSources(){const et=[];for(const nt in this._otherSourceCaches){const ct=this._getSourceCache(nt);ct&&et.push(ct.getSource())}return et}addLayer(et,nt,ct={}){this._checkLoaded();const dt=et.id;if(this.getLayer(dt))return void this.fire(new _.ErrorEvent(new Error(`Layer with id "${dt}" already exists on this map`)));let ft;if(et.type==="custom"){if(Yl(this,_.validateCustomStyleLayer(et)))return;ft=_.createStyleLayer(et)}else{if(typeof et.source=="object"&&(this.addSource(dt,et.source),et=_.clone$1(et),et=_.extend(et,{source:dt})),this._validate(_.validateLayer,`layers.${dt}`,et,{arrayIndex:-1},ct))return;ft=_.createStyleLayer(et),this._validateLayer(ft),ft.setEventedParent(this,{layer:{id:dt}}),this._serializedLayers[ft.id]=ft.serialize(),this._updateLayerCount(ft,!0)}const _t=nt?this._order.indexOf(nt):this._order.length;if(nt&&_t===-1)return void this.fire(new _.ErrorEvent(new Error(`Layer with id "${nt}" does not exist on this map.`)));this._order.splice(_t,0,dt),this._layerOrderChanged=!0,this._layers[dt]=ft;const xt=this._getLayerSourceCache(ft);if(this._removedLayers[dt]&&ft.source&&xt&&ft.type!=="custom"){const kt=this._removedLayers[dt];delete this._removedLayers[dt],kt.type!==ft.type?this._updatedSources[ft.source]="clear":(this._updatedSources[ft.source]="reload",xt.pause())}this._updateLayer(ft),ft.onAdd&&ft.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(et,nt){if(this._checkLoaded(),this._changed=!0,!this._layers[et])return void this.fire(new _.ErrorEvent(new Error(`The layer '${et}' does not exist in the map's style and cannot be moved.`)));if(et===nt)return;const ct=this._order.indexOf(et);this._order.splice(ct,1);const dt=nt?this._order.indexOf(nt):this._order.length;nt&&dt===-1?this.fire(new _.ErrorEvent(new Error(`Layer with id "${nt}" does not exist on this map.`))):(this._order.splice(dt,0,et),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(et){this._checkLoaded();const nt=this._layers[et];if(!nt)return void this.fire(new _.ErrorEvent(new Error(`The layer '${et}' does not exist in the map's style and cannot be removed.`)));nt.setEventedParent(null),this._updateLayerCount(nt,!1);const ct=this._order.indexOf(et);this._order.splice(ct,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[et]=nt,delete this._layers[et],delete this._serializedLayers[et],delete this._updatedLayers[et],delete this._updatedPaintProps[et],nt.onRemove&&nt.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(et){return this._layers[et]}hasLayer(et){return et in this._layers}hasLayerType(et){for(const nt in this._layers)if(this._layers[nt].type===et)return!0;return!1}setLayerZoomRange(et,nt,ct){this._checkLoaded();const dt=this.getLayer(et);dt?dt.minzoom===nt&&dt.maxzoom===ct||(nt!=null&&(dt.minzoom=nt),ct!=null&&(dt.maxzoom=ct),this._updateLayer(dt)):this.fire(new _.ErrorEvent(new Error(`The layer '${et}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(et,nt,ct={}){this._checkLoaded();const dt=this.getLayer(et);if(dt){if(!ut(dt.filter,nt))return nt==null?(dt.filter=void 0,void this._updateLayer(dt)):void(this._validate(_.validateFilter,`layers.${dt.id}.filter`,nt,{layerType:dt.type},ct)||(dt.filter=_.clone$1(nt),this._updateLayer(dt)))}else this.fire(new _.ErrorEvent(new Error(`The layer '${et}' does not exist in the map's style and cannot be filtered.`)))}getFilter(et){const nt=this.getLayer(et);return nt&&_.clone$1(nt.filter)}setLayoutProperty(et,nt,ct,dt={}){this._checkLoaded();const ft=this.getLayer(et);ft?ut(ft.getLayoutProperty(nt),ct)||(ft.setLayoutProperty(nt,ct,dt),this._updateLayer(ft)):this.fire(new _.ErrorEvent(new Error(`The layer '${et}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(et,nt){const ct=this.getLayer(et);if(ct)return ct.getLayoutProperty(nt);this.fire(new _.ErrorEvent(new Error(`The layer '${et}' does not exist in the map's style.`)))}setPaintProperty(et,nt,ct,dt={}){this._checkLoaded();const ft=this.getLayer(et);ft?ut(ft.getPaintProperty(nt),ct)||(ft.setPaintProperty(nt,ct,dt)&&this._updateLayer(ft),this._changed=!0,this._updatedPaintProps[et]=!0):this.fire(new _.ErrorEvent(new Error(`The layer '${et}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(et,nt){const ct=this.getLayer(et);return ct&&ct.getPaintProperty(nt)}setFeatureState(et,nt){this._checkLoaded();const ct=et.source,dt=et.sourceLayer,ft=this.getSource(ct);if(!ft)return void this.fire(new _.ErrorEvent(new Error(`The source '${ct}' does not exist in the map's style.`)));const _t=ft.type;if(_t==="geojson"&&dt)return void this.fire(new _.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(_t==="vector"&&!dt)return void this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));et.id===void 0&&this.fire(new _.ErrorEvent(new Error("The feature id parameter must be provided.")));const xt=this._getSourceCaches(ct);for(const kt of xt)kt.setFeatureState(dt,et.id,nt)}removeFeatureState(et,nt){this._checkLoaded();const ct=et.source,dt=this.getSource(ct);if(!dt)return void this.fire(new _.ErrorEvent(new Error(`The source '${ct}' does not exist in the map's style.`)));const ft=dt.type,_t=ft==="vector"?et.sourceLayer:void 0;if(ft==="vector"&&!_t)return void this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(nt&&typeof et.id!="string"&&typeof et.id!="number")return void this.fire(new _.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const xt=this._getSourceCaches(ct);for(const kt of xt)kt.removeFeatureState(_t,et.id,nt)}getFeatureState(et){this._checkLoaded();const nt=et.source,ct=et.sourceLayer,dt=this.getSource(nt);if(dt){if(dt.type!=="vector"||ct)return et.id===void 0&&this.fire(new _.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(nt)[0].getFeatureState(ct,et.id);this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new _.ErrorEvent(new Error(`The source '${nt}' does not exist in the map's style.`)))}getTransition(){return _.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const et={};for(const nt in this._sourceCaches){const ct=this._sourceCaches[nt].getSource();et[ct.id]||(et[ct.id]=ct.serialize())}return _.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:et,layers:this._serializeLayers(this._order)},nt=>nt!==void 0)}_updateLayer(et){this._updatedLayers[et.id]=!0;const nt=this._getLayerSourceCache(et);et.source&&!this._updatedSources[et.source]&&nt&&nt.getSource().type!=="raster"&&(this._updatedSources[et.source]="reload",nt.pause()),this._changed=!0,et.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(et){const nt=_t=>this._layers[_t].type==="fill-extrusion",ct={},dt=[];for(let _t=this._order.length-1;_t>=0;_t--){const xt=this._order[_t];if(nt(xt)){ct[xt]=_t;for(const kt of et){const $t=kt[xt];if($t)for(const Dt of $t)dt.push(Dt)}}}dt.sort((_t,xt)=>xt.intersectionZ-_t.intersectionZ);const ft=[];for(let _t=this._order.length-1;_t>=0;_t--){const xt=this._order[_t];if(nt(xt))for(let kt=dt.length-1;kt>=0;kt--){const $t=dt[kt].feature;if(ct[$t.layer.id]<_t)break;ft.push($t),dt.pop()}else for(const kt of et){const $t=kt[xt];if($t)for(const Dt of $t)ft.push(Dt.feature)}}return ft}queryRenderedFeatures(et,nt,ct){nt&&nt.filter&&this._validate(_.validateFilter,"queryRenderedFeatures.filter",nt.filter,null,nt);const dt={};if(nt&&nt.layers){if(!Array.isArray(nt.layers))return this.fire(new _.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const kt of nt.layers){const $t=this._layers[kt];if(!$t)return this.fire(new _.ErrorEvent(new Error(`The layer '${kt}' does not exist in the map's style and cannot be queried for features.`))),[];dt[$t.source]=!0}}const ft=[];nt.availableImages=this._availableImages;const _t=nt&&nt.layers?nt.layers.some(kt=>{const $t=this.getLayer(kt);return $t&&$t.is3D()}):this.has3DLayers(),xt=Fr.createFromScreenPoints(et,ct);for(const kt in this._sourceCaches){const $t=this._sourceCaches[kt].getSource().id;nt.layers&&!dt[$t]||ft.push(vo(this._sourceCaches[kt],this._layers,this._serializedLayers,xt,nt,ct,_t,!!this.map._showQueryGeometry))}return this.placement&&ft.push(function(kt,$t,Dt,Vt,Yt,Jt,er){const _i={},tr=Jt.queryRenderedSymbols(Vt),jt=[];for(const Qt of Object.keys(tr).map(Number))jt.push(er[Qt]);jt.sort(ts);for(const Qt of jt){const sr=Qt.featureIndex.lookupSymbolFeatures(tr[Qt.bucketInstanceId],$t,Qt.bucketIndex,Qt.sourceLayerIndex,Yt.filter,Yt.layers,Yt.availableImages,kt);for(const lr in sr){const yr=_i[lr]=_i[lr]||[],_r=sr[lr];_r.sort((vr,kr)=>{const Sr=Qt.featureSortOrder;if(Sr){const Lr=Sr.indexOf(vr.featureIndex);return Sr.indexOf(kr.featureIndex)-Lr}return kr.featureIndex-vr.featureIndex});for(const vr of _r)yr.push(vr)}}for(const Qt in _i)_i[Qt].forEach(sr=>{const lr=sr.feature,yr=Dt(kt[Qt]);if(!yr)return;const _r=yr.getFeatureState(lr.layer["source-layer"],lr.id);lr.source=lr.layer.source,lr.layer["source-layer"]&&(lr.sourceLayer=lr.layer["source-layer"]),lr.state=_r});return _i}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),xt.screenGeometry,nt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ft)}querySourceFeatures(et,nt){nt&&nt.filter&&this._validate(_.validateFilter,"querySourceFeatures.filter",nt.filter,null,nt);const ct=this._getSourceCaches(et);let dt=[];for(const ft of ct)dt=dt.concat(Lo(ft,nt));return dt}addSourceType(et,nt,ct){return _a.getSourceType(et)?ct(new Error(`A source type called "${et}" already exists.`)):(_a.setSourceType(et,nt),nt.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:et,url:nt.workerSourceURL},ct):ct(null,null))}getLight(){return this.light.getLight()}setLight(et,nt={}){this._checkLoaded();const ct=this.light.getLight();let dt=!1;for(const _t in et)if(!ut(et[_t],ct[_t])){dt=!0;break}if(!dt)return;const ft=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(et,nt),this.light.updateTransitions(ft)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(et,nt=1){if(this._checkLoaded(),!et)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let ct=et;if(nt===1){if(typeof ct.source=="object"){const dt="terrain-dem-src";this.addSource(dt,ct.source),ct=_.clone$1(ct),ct=_.extend(ct,{source:dt})}if(this._validate(_.validateTerrain,"terrain",ct))return}if(!this.terrain||this.terrain&&nt!==this.terrain.drapeRenderMode){if(!ct)return;this._createTerrain(ct,nt)}else{const dt=this.terrain,ft=dt.get();for(const _t of Object.keys(_.spec.terrain))!ct.hasOwnProperty(_t)&&_.spec.terrain[_t].default&&(ct[_t]=_.spec.terrain[_t].default);for(const _t in ct)if(!ut(ct[_t],ft[_t])){dt.set(ct),this.stylesheet.terrain=ct;const xt=this._setTransitionParameters({duration:0});dt.updateTransitions(xt);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(et){const nt=this.fog=new Wt(et,this.map.transform);this.stylesheet.fog=et;const ct=this._setTransitionParameters({duration:0});nt.updateTransitions(ct)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const et of this.map._markers)et._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(et){if(this._checkLoaded(),!et)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const nt=this.fog,ct=nt.get();Object.keys(et).length===0&&nt.set(et);for(const dt in et)if(!ut(et[dt],ct[dt])){nt.set(et),this.stylesheet.fog=et;const ft=this._setTransitionParameters({duration:0});nt.updateTransitions(ft);break}}else this._createFog(et);this._markersNeedUpdate=!0}_setTransitionParameters(et){return{now:_.exported.now(),transition:_.extend(et,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const et=this._order.filter(ct=>this.isLayerDraped(this._layers[ct])),nt=this._order.filter(ct=>!this.isLayerDraped(this._layers[ct]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...et),this._drapedFirstOrder.push(...nt)}_createTerrain(et,nt){const ct=this.terrain=new zr(et,nt);this.stylesheet.terrain=et,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const dt=this._setTransitionParameters({duration:0});ct.updateTransitions(dt)}_force3DLayerUpdate(){for(const et in this._layers){const nt=this._layers[et];nt.type==="fill-extrusion"&&this._updateLayer(nt)}}_forceSymbolLayerUpdate(){for(const et in this._layers){const nt=this._layers[et];nt.type==="symbol"&&this._updateLayer(nt)}}_validate(et,nt,ct,dt,ft={}){return(!ft||ft.validate!==!1)&&Yl(this,et.call(_.validateStyle,_.extend({key:nt,style:this.serialize(),value:ct,styleSpec:_.spec},dt)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),_.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const et in this._layers)this._layers[et].setEventedParent(null);for(const et in this._sourceCaches)this._sourceCaches[et].clearTiles(),this._sourceCaches[et].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(et){const nt=this._getSourceCaches(et);for(const ct of nt)ct.clearTiles()}_reloadSource(et){const nt=this._getSourceCaches(et);for(const ct of nt)ct.resume(),ct.reload()}_reloadSources(){for(const et of this._getSources())et.reload&&et.reload()}_updateSources(et){for(const nt in this._sourceCaches)this._sourceCaches[nt].update(et)}_generateCollisionBoxes(){for(const et in this._sourceCaches){const nt=this._sourceCaches[et];nt.resume(),nt.reload()}}_updatePlacement(et,nt,ct,dt,ft=!1){let _t=!1,xt=!1;const kt={};for(const $t of this._order){const Dt=this._layers[$t];if(Dt.type!=="symbol")continue;if(!kt[Dt.source]){const Yt=this._getLayerSourceCache(Dt);if(!Yt)continue;kt[Dt.source]=Yt.getRenderableIds(!0).map(Jt=>Yt.getTileByID(Jt)).sort((Jt,er)=>er.tileID.overscaledZ-Jt.tileID.overscaledZ||(Jt.tileID.isLessThan(er.tileID)?-1:1))}const Vt=this.crossTileSymbolIndex.addLayer(Dt,kt[Dt.source],et.center.lng,et.projection);_t=_t||Vt}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),ft=ft||this._layerOrderChanged||ct===0,this._layerOrderChanged&&this.fire(new _.Event("neworder")),(ft||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(_.exported.now(),et.zoom))&&(this.pauseablePlacement=new Vm(et,this._order,ft,nt,ct,dt,this.placement,this.fog&&et.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,kt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(_.exported.now()),xt=!0),_t&&this.pauseablePlacement.placement.setStale()),xt||_t)for(const $t of this._order){const Dt=this._layers[$t];Dt.type==="symbol"&&this.placement.updateLayerOpacities(Dt,kt[Dt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(_.exported.now())}_releaseSymbolFadeTiles(){for(const et in this._sourceCaches)this._sourceCaches[et].releaseSymbolFadeTiles()}getImages(et,nt,ct){this.imageManager.getImages(nt.icons,ct),this._updateTilesForChangedImages();const dt=ft=>{ft&&ft.setDependencies(nt.tileID.key,nt.type,nt.icons)};dt(this._otherSourceCaches[nt.source]),dt(this._symbolSourceCaches[nt.source])}getGlyphs(et,nt,ct){this.glyphManager.getGlyphs(nt.stacks,ct)}getResource(et,nt,ct){return _.makeRequest(nt,ct)}_getSourceCache(et){return this._otherSourceCaches[et]}_getLayerSourceCache(et){return et.type==="symbol"?this._symbolSourceCaches[et.source]:this._otherSourceCaches[et.source]}_getSourceCaches(et){const nt=[];return this._otherSourceCaches[et]&&nt.push(this._otherSourceCaches[et]),this._symbolSourceCaches[et]&&nt.push(this._symbolSourceCaches[et]),nt}_isSourceCacheLoaded(et){const nt=this._getSourceCaches(et);return nt.length===0?(this.fire(new _.ErrorEvent(new Error(`There is no source with ID '${et}'`))),!1):nt.every(ct=>ct.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}_a.getSourceType=function(at){return $n[at]},_a.setSourceType=function(at,et){$n[at]=et},_a.registerForPluginStateChange=_.registerForPluginStateChange;var Gm=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,au="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Il=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,sp=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ml=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let jp={},ku={};const ap=[];Cu(Gm,ap),Cu(Il,ap),Cu(sp,ap),Cu(Ml,ap),jp=io("",Il),ku=io(Ml,sp);const p0=io(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Up=Gm,Hm=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var qm={background:io(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:io(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:io(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:io("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:io(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:io(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:io("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:io("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:io("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:io(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:io(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:io(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:io(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:io(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:io(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:io(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:io(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:io(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:io(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:io(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:io(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:io(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:io(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:io(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:io(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:io(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,au),skyboxGradient:io(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,au),skyboxCapture:io(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:io(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:io(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Cu(at,et){const nt=at.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let ct of nt)if(ct=ct.trim(),ct[0]==="#"&&ct.includes("if")&&!ct.includes("endif")){ct=ct.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const dt=ct.split(" ");for(const ft of dt)et.includes(ft)||et.push(ft)}}function io(at,et){const nt=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ct=et.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),dt={},ft=[...ap];return Cu(at,ft),Cu(et,ft),{fragmentSource:at=at.replace(nt,(_t,xt,kt,$t,Dt)=>(dt[Dt]=!0,xt==="define"?`
#ifndef HAS_UNIFORM_u_${Dt}
varying ${kt} ${$t} ${Dt};
#else
uniform ${kt} ${$t} u_${Dt};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Dt}
    ${kt} ${$t} ${Dt} = u_${Dt};
#endif
`)),vertexSource:et=et.replace(nt,(_t,xt,kt,$t,Dt)=>{const Vt=$t==="float"?"vec2":"vec4",Yt=Dt.match(/color/)?"color":Vt;return dt[Dt]?xt==="define"?`
#ifndef HAS_UNIFORM_u_${Dt}
uniform lowp float u_${Dt}_t;
attribute ${kt} ${Vt} a_${Dt};
varying ${kt} ${$t} ${Dt};
#else
uniform ${kt} ${$t} u_${Dt};
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Dt}
    ${Dt} = a_${Dt};
#else
    ${kt} ${$t} ${Dt} = u_${Dt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Dt}
    ${Dt} = unpack_mix_${Yt}(a_${Dt}, u_${Dt}_t);
#else
    ${kt} ${$t} ${Dt} = u_${Dt};
#endif
`:xt==="define"?`
#ifndef HAS_UNIFORM_u_${Dt}
uniform lowp float u_${Dt}_t;
attribute ${kt} ${Vt} a_${Dt};
#else
uniform ${kt} ${$t} u_${Dt};
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Dt}
    ${kt} ${$t} ${Dt} = a_${Dt};
#else
    ${kt} ${$t} ${Dt} = u_${Dt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Dt}
    ${kt} ${$t} ${Dt} = unpack_mix_${Yt}(a_${Dt}, u_${Dt}_t);
#else
    ${kt} ${$t} ${Dt} = u_${Dt};
#endif
`}),staticAttributes:ct,usedDefines:ft}}class Rv{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(et,nt,ct,dt,ft,_t,xt){this.context=et;let kt=this.boundPaintVertexBuffers.length!==dt.length;for(let Dt=0;!kt&&Dt<dt.length;Dt++)this.boundPaintVertexBuffers[Dt]!==dt[Dt]&&(kt=!0);let $t=this.boundDynamicVertexBuffers.length!==xt.length;for(let Dt=0;!$t&&Dt<xt.length;Dt++)this.boundDynamicVertexBuffers[Dt]!==xt[Dt]&&($t=!0);if(!et.extVertexArrayObject||!this.vao||this.boundProgram!==nt||this.boundLayoutVertexBuffer!==ct||kt||$t||this.boundIndexBuffer!==ft||this.boundVertexOffset!==_t)this.freshBind(nt,ct,dt,ft,_t,xt);else{et.bindVertexArrayOES.set(this.vao);for(const Dt of xt)Dt&&Dt.bind();ft&&ft.dynamicDraw&&ft.bind()}}freshBind(et,nt,ct,dt,ft,_t){let xt;const kt=et.numAttributes,$t=this.context,Dt=$t.gl;if($t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$t.extVertexArrayObject.createVertexArrayOES(),$t.bindVertexArrayOES.set(this.vao),xt=0,this.boundProgram=et,this.boundLayoutVertexBuffer=nt,this.boundPaintVertexBuffers=ct,this.boundIndexBuffer=dt,this.boundVertexOffset=ft,this.boundDynamicVertexBuffers=_t;else{xt=$t.currentNumAttributes||0;for(let Vt=kt;Vt<xt;Vt++)Dt.disableVertexAttribArray(Vt)}nt.enableAttributes(Dt,et),nt.bind(),nt.setVertexAttribPointers(Dt,et,ft);for(const Vt of ct)Vt.enableAttributes(Dt,et),Vt.bind(),Vt.setVertexAttribPointers(Dt,et,ft);for(const Vt of _t)Vt&&(Vt.enableAttributes(Dt,et),Vt.bind(),Vt.setVertexAttribPointers(Dt,et,ft));dt&&dt.bind(),$t.currentNumAttributes=kt}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Wm(at,et){const nt=Math.pow(2,et.canonical.z),ct=et.canonical.y;return[new _.MercatorCoordinate(0,ct/nt).toLngLat().lat,new _.MercatorCoordinate(0,(ct+1)/nt).toLngLat().lat]}function f0(at,et,nt,ct,dt,ft,_t){const xt=at.context,kt=xt.gl,$t=nt.fbo;if(!$t)return;at.prepareDrawTile();const Dt=at.useProgram("hillshade");xt.activeTexture.set(kt.TEXTURE0),kt.bindTexture(kt.TEXTURE_2D,$t.colorAttachment.get());const Vt=((_i,tr,jt,Qt)=>{const sr=jt.paint.get("hillshade-shadow-color"),lr=jt.paint.get("hillshade-highlight-color"),yr=jt.paint.get("hillshade-accent-color");let _r=jt.paint.get("hillshade-illumination-direction")*(Math.PI/180);jt.paint.get("hillshade-illumination-anchor")==="viewport"&&(_r-=_i.transform.angle);const vr=!_i.options.moving;return{u_matrix:Qt||_i.transform.calculateProjMatrix(tr.tileID.toUnwrapped(),vr),u_image:0,u_latrange:Wm(0,tr.tileID),u_light:[jt.paint.get("hillshade-exaggeration"),_r],u_shadow:sr,u_highlight:lr,u_accent:yr}})(at,nt,ct,at.terrain?et.projMatrix:null);at.prepareDrawProgram(xt,Dt,et.toUnwrapped());const{tileBoundsBuffer:Yt,tileBoundsIndexBuffer:Jt,tileBoundsSegments:er}=at.getTileBoundsBuffers(nt);Dt.draw(xt,kt.TRIANGLES,dt,ft,_t,_.CullFaceMode.disabled,Vt,ct.id,Yt,Jt,er)}function Zm(at,et,nt){if(!et.needsDEMTextureUpload)return;const ct=at.context,dt=ct.gl;ct.pixelStoreUnpackPremultiplyAlpha.set(!1),et.demTexture=et.demTexture||at.getTileTexture(nt.stride);const ft=nt.getPixels();et.demTexture?et.demTexture.update(ft,{premultiply:!1}):et.demTexture=new _.Texture(ct,ft,dt.RGBA,{premultiply:!1}),et.needsDEMTextureUpload=!1}function m0(at,et,nt,ct,dt,ft){const _t=at.context,xt=_t.gl;if(!et.dem)return;const kt=et.dem;if(_t.activeTexture.set(xt.TEXTURE1),Zm(at,et,kt),!et.demTexture)return;et.demTexture.bind(xt.NEAREST,xt.CLAMP_TO_EDGE);const $t=kt.dim;_t.activeTexture.set(xt.TEXTURE0);let Dt=et.fbo;if(!Dt){const er=new _.Texture(_t,{width:$t,height:$t,data:null},xt.RGBA);er.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),Dt=et.fbo=_t.createFramebuffer($t,$t,!0),Dt.colorAttachment.set(er.texture)}_t.bindFramebuffer.set(Dt.framebuffer),_t.viewport.set([0,0,$t,$t]);const{tileBoundsBuffer:Vt,tileBoundsIndexBuffer:Yt,tileBoundsSegments:Jt}=at.getMercatorTileBoundsBuffers();at.useProgram("hillshadePrepare").draw(_t,xt.TRIANGLES,ct,dt,ft,_.CullFaceMode.disabled,((er,_i)=>{const tr=_i.stride,jt=_.create();return _.ortho(jt,0,_.EXTENT,-_.EXTENT,0,0,1),_.translate(jt,jt,[0,-_.EXTENT,0]),{u_matrix:jt,u_image:1,u_dimension:[tr,tr],u_zoom:er.overscaledZ,u_unpack:_i.unpackVector}})(et.tileID,kt),nt.id,Vt,Yt,Jt),et.needsHillshadePrepare=!1}const Xm=at=>({u_matrix:new _.UniformMatrix4f(at),u_image0:new _.Uniform1i(at),u_skirt_height:new _.Uniform1f(at)}),Pu=(at,et)=>({u_matrix:at,u_image0:0,u_skirt_height:et}),Gp=(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er)=>({u_proj_matrix:Float32Array.from(at),u_globe_matrix:et,u_normalize_matrix:Float32Array.from(ct),u_merc_matrix:nt,u_zoom_transition:dt,u_merc_center:ft,u_image0:0,u_frustum_tl:_t,u_frustum_tr:xt,u_frustum_br:kt,u_frustum_bl:$t,u_globe_pos:Dt,u_globe_radius:Vt,u_viewport:Yt,u_grid_matrix:er?Float32Array.from(er):new Float32Array(9),u_skirt_height:Jt});function Au(at,et){return at!=null&&et!=null&&!(!at.hasData()||!et.hasData())&&at.demTexture!=null&&et.demTexture!=null&&at.tileID.key!==et.tileID.key}const Ll=new class{constructor(){this.operations={}}newMorphing(at,et,nt,ct,dt){if(at in this.operations){const ft=this.operations[at];ft.to.tileID.key!==nt.tileID.key&&(ft.queued=nt)}else this.operations[at]={startTime:ct,phase:0,duration:dt,from:et,to:nt,queued:null}}getMorphValuesForProxy(at){if(!(at in this.operations))return null;const et=this.operations[at];return{from:et.from,to:et.to,phase:et.phase}}update(at){for(const et in this.operations){const nt=this.operations[et];for(nt.phase=(at-nt.startTime)/nt.duration;nt.phase>=1||!this._validOp(nt);)if(!this._nextOp(nt,at)){delete this.operations[et];break}}}_nextOp(at,et){return!!at.queued&&(at.from=at.to,at.to=at.queued,at.queued=null,at.phase=0,at.startTime=et,!0)}_validOp(at){return at.from.hasData()&&at.to.hasData()}},lu={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Hp(at){return 6*Math.pow(1.5,22-at)}function g0(at,et){const nt=1<<at.z;return!et&&(at.x===0||at.x===nt-1)||at.y===0||at.y===nt-1}const lp=at=>({u_matrix:at});function Ym(at,et,nt,ct,dt){if(dt>0){const ft=_.exported.now(),_t=(ft-at.timeAdded)/dt,xt=et?(ft-et.timeAdded)/dt:-1,kt=nt.getSource(),$t=ct.coveringZoomLevel({tileSize:kt.tileSize,roundZoom:kt.roundZoom}),Dt=!et||Math.abs(et.tileID.overscaledZ-$t)>Math.abs(at.tileID.overscaledZ-$t),Vt=Dt&&at.refreshedUponExpiration?1:_.clamp(Dt?_t:1-xt,0,1);return at.refreshedUponExpiration&&_t>=1&&(at.refreshedUponExpiration=!1),et?{opacity:1,mix:1-Vt}:{opacity:Vt,mix:0}}return{opacity:1,mix:0}}class Km extends _.SourceCache{constructor(et){const nt={type:"raster-dem",maxzoom:et.transform.maxZoom},ct=new or(Zl(),null),dt=Mn("mock-dem",nt,ct,et.style);super("mock-dem",dt,!1),dt.setEventedParent(this),this._sourceLoaded=!0}_loadTile(et,nt){et.state="loaded",nt(null)}}class qp extends _.SourceCache{constructor(et){const nt=Mn("proxy",{type:"geojson",maxzoom:et.transform.maxZoom},new or(Zl(),null),et.style);super("proxy",nt,!1),nt.setEventedParent(this),this.map=this.getSource().map=et,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(et,nt,ct){if(et.freezeTileCoverage)return;this.transform=et;const dt=et.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((ft,_t)=>{if(ft[_t.key]="",!this._tiles[_t.key]){const xt=new _.Tile(_t,this._source.tileSize*_t.overscaleFactor(),et.tileZoom);xt.state="loaded",this._tiles[_t.key]=xt}return ft},{});for(const ft in this._tiles)ft in dt||(this.freeFBO(ft),this._tiles[ft].unloadVectorData(),delete this._tiles[ft])}freeFBO(et){const nt=this.proxyCachedFBO[et];if(nt!==void 0){const ct=Object.values(nt);this.renderCachePool.push(...ct),delete this.proxyCachedFBO[et]}}deallocRenderCache(){this.renderCache.forEach(et=>et.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Wp extends _.OverscaledTileID{constructor(et,nt,ct){super(et.overscaledZ,et.wrap,et.canonical.z,et.canonical.x,et.canonical.y),this.proxyTileKey=nt,this.projMatrix=ct}}class Qm extends _.Elevation{constructor(et,nt){super(),this.painter=et,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[ct,dt,ft]=function(kt){const $t=new _.StructArrayLayout2i4,Dt=new _.StructArrayLayout3ui6,Vt=131;$t.reserve(17161),Dt.reserve(33800);const Yt=_.EXTENT/128,Jt=_.EXTENT+Yt/2,er=Jt+Yt;for(let tr=-Yt;tr<er;tr+=Yt)for(let jt=-Yt;jt<er;jt+=Yt){const Qt=jt<0||jt>Jt||tr<0||tr>Jt?24575:0,sr=_.clamp(Math.round(jt),0,_.EXTENT),lr=_.clamp(Math.round(tr),0,_.EXTENT);$t.emplaceBack(sr+Qt,lr)}const _i=(tr,jt)=>{const Qt=jt*Vt+tr;Dt.emplaceBack(Qt+1,Qt,Qt+Vt),Dt.emplaceBack(Qt+Vt,Qt+Vt+1,Qt+1)};for(let tr=1;tr<129;tr++)for(let jt=1;jt<129;jt++)_i(jt,tr);return[0,129].forEach(tr=>{for(let jt=0;jt<130;jt++)_i(jt,tr),_i(tr,jt)}),[$t,Dt,32768]}(),_t=et.context;this.gridBuffer=_t.createVertexBuffer(ct,_.posAttributes.members),this.gridIndexBuffer=_t.createIndexBuffer(dt),this.gridSegments=_.SegmentVector.simpleSegment(0,0,ct.length,dt.length),this.gridNoSkirtSegments=_.SegmentVector.simpleSegment(0,0,ct.length,ft),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new qp(nt.map),this.orthoMatrix=_.create(),_.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,_.EXTENT,0,_.EXTENT,0,1);const xt=_t.gl;this._overlapStencilMode=new _.StencilMode({func:xt.GEQUAL,mask:255},0,255,xt.KEEP,xt.KEEP,xt.REPLACE),this._previousZoom=et.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=nt,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Km(nt.map)}set style(et){et.on("data",this._onStyleDataEvent.bind(this)),et.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=et,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(et,nt,ct){if(et&&et.terrain){this._style!==et&&(this.style=et),this.enabled=!0;const dt=et.terrain.properties;this.sourceCache=et.terrain.drapeRenderMode===0?this._mockSourceCache:et._getSourceCache(dt.get("source")),this._exaggeration=dt.get("exaggeration");const ft=()=>{this.sourceCache.used&&_.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const _t=this.getScaledDemTileSize();this.sourceCache.update(nt,_t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,ft(),this._initializing=!0),ft(),nt.updateElevation(!0,ct),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(nt),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(et){this._findCoveringTileCache[et]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const et=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||et.efficiency!==100&&_.warnOnce(`Terrain render cache efficiency is not optimal (${et.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${et.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(et){et.coord&&et.dataType==="source"?this._clearRenderCacheForTile(et.sourceCacheId,et.coord):et.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const et in this._style._sourceCaches)this._style._sourceCaches[et].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(et=>et.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const et=2*this.proxySourceCache.getSource().tileSize;return[et,et]}set useVertexMorphing(et){this._useVertexMorphing=et}updateTileBinding(et){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const nt=this.proxySourceCache,ct=this.painter.transform;this._initializing&&(this._initializing=ct._centerAltitude===0&&this.getAtPointOrZero(_.MercatorCoordinate.fromLngLat(ct.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const dt=this.proxyCoords=nt.getIds().map(kt=>{const $t=nt.getTileByID(kt).tileID;return $t.projMatrix=ct.calculateProjMatrix($t.toUnwrapped()),$t});(function(kt,$t){const Dt=$t.transform.pointCoordinate($t.transform.getCameraPoint()),Vt=new _.Point(Dt.x,Dt.y);kt.sort((Yt,Jt)=>{if(Jt.overscaledZ-Yt.overscaledZ)return Jt.overscaledZ-Yt.overscaledZ;const er=new _.Point(Yt.canonical.x+(1<<Yt.canonical.z)*Yt.wrap,Yt.canonical.y),_i=new _.Point(Jt.canonical.x+(1<<Jt.canonical.z)*Jt.wrap,Jt.canonical.y),tr=Vt.mult(1<<Yt.canonical.z);return tr.x-=.5,tr.y-=.5,tr.distSqr(er)-tr.distSqr(_i)})})(dt,this.painter),this._previousZoom=ct.zoom;const ft=this.proxyToSource||{};this.proxyToSource={},dt.forEach(kt=>{this.proxyToSource[kt.key]={}}),this.terrainTileForTile={};const _t=this._style._sourceCaches;for(const kt in _t){const $t=_t[kt];if(!$t.used||($t!==this.sourceCache&&this.resetTileLookupCache($t.id),this._setupProxiedCoordsForOrtho($t,et[kt],ft),$t.usedForTerrain))continue;const Dt=et[kt];$t.getSource().reparseOverscaled&&this._assignTerrainTiles(Dt)}this.proxiedCoords[nt.id]=dt.map(kt=>new Wp(kt,kt.key,this.orthoMatrix)),this._assignTerrainTiles(dt),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(ft),this.renderingToTexture=!1,this._updateTimestamp=_.exported.now();const xt={};this._visibleDemTiles=[];for(const kt of this.proxyCoords){const $t=this.terrainTileForTile[kt.key];if(!$t)continue;const Dt=$t.tileID.key;Dt in xt||(this._visibleDemTiles.push($t),xt[Dt]=Dt)}}_assignTerrainTiles(et){this._initializing||et.forEach(nt=>{if(this.terrainTileForTile[nt.key])return;const ct=this._findTileCoveringTileID(nt,this.sourceCache);ct&&(this.terrainTileForTile[nt.key]=ct)})}_prepareDEMTextures(){const et=this.painter.context,nt=et.gl;for(const ct in this.terrainTileForTile){const dt=this.terrainTileForTile[ct],ft=dt.dem;!ft||dt.demTexture&&!dt.needsDEMTextureUpload||(et.activeTexture.set(nt.TEXTURE1),Zm(this.painter,dt,ft))}}_prepareDemTileUniforms(et,nt,ct,dt){if(!nt||nt.demTexture==null)return!1;const ft=et.tileID.canonical,_t=Math.pow(2,nt.tileID.canonical.z-ft.z),xt=dt||"";return ct[`u_dem_tl${xt}`]=[ft.x*_t%1,ft.y*_t%1],ct[`u_dem_scale${xt}`]=_t,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const et=this.painter.context,nt=et.gl;if(!this._emptyDepthBufferTexture){const ct=new _.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new _.Texture(et,ct,nt.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let et=0;const nt=this._visibleDemTiles.reduce((ct,dt)=>{if(!dt.dem)return ct;const ft=dt.dem.tree.minimums[0];return ft>0&&et++,ct+ft},0);return et?nt/et:0}_updateEmptyDEMTexture(){const et=this.painter.context,nt=et.gl;et.activeTexture.set(nt.TEXTURE2);const ct=this._getLoadedAreaMinimum(),dt=new _.RGBAImage({width:1,height:1},new Uint8Array(_.DEMData.pack(ct,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let ft=this._emptyDEMTexture;return ft?ft.update(dt,{premultiply:!1}):ft=this._emptyDEMTexture=new _.Texture(et,dt,nt.RGBA,{premultiply:!1}),ft}setupElevationDraw(et,nt,ct){const dt=this.painter.context,ft=dt.gl,_t=(xt=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:_.DEMData.getUnpackVector(xt),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var xt;_t.u_dem_size=this.sourceCache.getSource().tileSize,_t.u_exaggeration=this.exaggeration();let kt=null,$t=null,Dt=1;if(ct&&ct.morphing&&this._useVertexMorphing){const Vt=ct.morphing.srcDemTile,Yt=ct.morphing.dstDemTile;Dt=ct.morphing.phase,Vt&&Yt&&(this._prepareDemTileUniforms(et,Vt,_t,"_prev")&&($t=Vt),this._prepareDemTileUniforms(et,Yt,_t)&&(kt=Yt))}if($t&&kt?(dt.activeTexture.set(ft.TEXTURE2),kt.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE,ft.NEAREST),dt.activeTexture.set(ft.TEXTURE4),$t.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE,ft.NEAREST),_t.u_dem_lerp=Dt):(kt=this.terrainTileForTile[et.tileID.key],dt.activeTexture.set(ft.TEXTURE2),(this._prepareDemTileUniforms(et,kt,_t)?kt.demTexture:this.emptyDEMTexture).bind(ft.NEAREST,ft.CLAMP_TO_EDGE)),dt.activeTexture.set(ft.TEXTURE3),ct&&ct.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE),this._depthFBO&&(_t.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE),_t.u_depth_size_inv=[1,1]),ct&&ct.useMeterToDem&&kt){const Vt=(1<<kt.tileID.canonical.z)*_.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;_t.u_meter_to_dem=Vt}if(ct&&ct.labelPlaneMatrixInv&&(_t.u_label_plane_matrix_inv=ct.labelPlaneMatrixInv),nt.setTerrainUniformValues(dt,_t),this.painter.transform.projection.name==="globe"){const Vt=this.globeUniformValues(this.painter.transform,et.tileID.canonical,ct&&ct.useDenormalizedUpVectorScale);nt.setGlobeUniformValues(dt,Vt)}}globeUniformValues(et,nt,ct){const dt=et.projection;return{u_tile_tl_up:dt.upVector(nt,0,0),u_tile_tr_up:dt.upVector(nt,_.EXTENT,0),u_tile_br_up:dt.upVector(nt,_.EXTENT,_.EXTENT),u_tile_bl_up:dt.upVector(nt,0,_.EXTENT),u_tile_up_scale:ct?_.globeMetersToEcef(1):dt.upVectorScale(nt,et.center.lat,et.worldSize).metersToTile}}renderToBackBuffer(et){const nt=this.painter,ct=this.painter.context;et.length!==0&&(ct.bindFramebuffer.set(null),ct.viewport.set([0,0,nt.width,nt.height]),nt.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(dt,ft,_t,xt,kt){if(dt.transform.projection.name==="globe")(function($t,Dt,Vt,Yt,Jt){const er=$t.context,_i=er.gl;let tr,jt;const Qt=$t.options.showTerrainWireframe?2:0,sr=$t.transform,lr=_.globeUseCustomAntiAliasing($t,er,sr),yr=(Qr,Mr)=>{if(jt===Qr)return;const Gr=[lu[Qr],"PROJECTION_GLOBE_VIEW"];lr&&Gr.push("CUSTOM_ANTIALIASING"),Mr&&Gr.push(lu[Qt]),tr=$t.useProgram("globeRaster",null,Gr),jt=Qr},_r=$t.colorModeForRenderPass(),vr=new _.DepthMode(_i.LEQUAL,_.DepthMode.ReadWrite,$t.depthRangeFor3D);Ll.update(Jt);const kr=_.calculateGlobeMercatorMatrix(sr),Sr=[_.mercatorXfromLng(sr.center.lng),_.mercatorYfromLat(sr.center.lat)],Lr=Qt?[!1,!0]:[!1],Jr=$t.globeSharedBuffers,Ar=[sr.width*_.exported.devicePixelRatio,sr.height*_.exported.devicePixelRatio],Hr=Float32Array.from(sr.globeMatrix),Or={useDenormalizedUpVectorScale:!0};if(Lr.forEach(Qr=>{const Mr=$t.transform,Gr=Hp(Mr.zoom)*Dt.exaggeration();jt=-1;const rn=Qr?_i.LINES:_i.TRIANGLES;for(const Zr of Yt){const nn=Vt.getTile(Zr),Sn=_.StencilMode.disabled,Dn=Dt.prevTerrainTileForTile[Zr.key],_n=Dt.terrainTileForTile[Zr.key];Au(Dn,_n)&&Ll.newMorphing(Zr.key,Dn,_n,Jt,250),er.activeTexture.set(_i.TEXTURE0),nn.texture.bind(_i.LINEAR,_i.CLAMP_TO_EDGE);const Pn=Ll.getMorphValuesForProxy(Zr.key),qn=Pn?1:0;Pn&&_.extend$1(Or,{morphing:{srcDemTile:Pn.from,dstDemTile:Pn.to,phase:_.easeCubicInOut(Pn.phase)}});const Un=_.tileCornersToBounds(Zr.canonical),wn=_.getLatitudinalLod(Un.getCenter().lat),ro=_.getGridMatrix(Zr.canonical,Un,wn,Mr.worldSize/Mr._pixelsPerMercatorPixel),no=_.globeNormalizeECEF(_.globeTileBounds(Zr.canonical)),oo=Gp(Mr.projMatrix,Hr,kr,no,_.globeToMercatorTransition(Mr.zoom),Sr,Mr.frustumCorners.TL,Mr.frustumCorners.TR,Mr.frustumCorners.BR,Mr.frustumCorners.BL,Mr.globeCenterInViewSpace,Mr.globeRadius,Ar,Gr,ro);if(yr(qn,Qr),Dt.setupElevationDraw(nn,tr,Or),$t.prepareDrawProgram(er,tr,Zr.toUnwrapped()),Jr){const[so,_s,as]=Qr?Jr.getWirefameBuffers($t.context,wn):Jr.getGridBuffers(wn,Gr!==0);tr.draw(er,rn,vr,Sn,_r,_.CullFaceMode.backCCW,oo,"globe_raster",so,_s,as)}}}),Jr){const Qr=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];lr&&Qr.push("CUSTOM_ANTIALIASING"),tr=$t.useProgram("globeRaster",null,Qr);for(const Mr of Yt){const{x:Gr,y:rn,z:Zr}=Mr.canonical,nn=rn===0,Sn=rn===(1<<Zr)-1,[Dn,_n,Pn,qn]=Jr.getPoleBuffers(Zr);if(qn&&(nn||Sn)){const Un=Vt.getTile(Mr);er.activeTexture.set(_i.TEXTURE0),Un.texture.bind(_i.LINEAR,_i.CLAMP_TO_EDGE);let wn=_.globePoleMatrixForTile(Zr,Gr,sr);const ro=_.globeNormalizeECEF(_.globeTileBounds(Mr.canonical)),no=(oo,so)=>oo.draw(er,_i.TRIANGLES,vr,_.StencilMode.disabled,_r,_.CullFaceMode.disabled,Gp(sr.projMatrix,wn,wn,ro,0,Sr,sr.frustumCorners.TL,sr.frustumCorners.TR,sr.frustumCorners.BR,sr.frustumCorners.BL,sr.globeCenterInViewSpace,sr.globeRadius,Ar,0),"globe_pole_raster",so,Pn,qn);Dt.setupElevationDraw(Un,tr,Or),$t.prepareDrawProgram(er,tr,Mr.toUnwrapped()),nn&&no(tr,Dn),Sn&&(wn=_.scale(_.create(),wn,[1,-1,1]),no(tr,_n))}}}})(dt,ft,_t,xt,kt);else{const $t=dt.context,Dt=$t.gl;let Vt,Yt;const Jt=dt.options.showTerrainWireframe?2:0,er=(sr,lr)=>{if(Yt===sr)return;const yr=[lu[sr]];lr&&yr.push(lu[Jt]),Vt=dt.useProgram("terrainRaster",null,yr),Yt=sr},_i=dt.colorModeForRenderPass(),tr=new _.DepthMode(Dt.LEQUAL,_.DepthMode.ReadWrite,dt.depthRangeFor3D);Ll.update(kt);const jt=dt.transform,Qt=Hp(jt.zoom)*ft.exaggeration();(Jt?[!1,!0]:[!1]).forEach(sr=>{Yt=-1;const lr=sr?Dt.LINES:Dt.TRIANGLES,[yr,_r]=sr?ft.getWirefameBuffer():[ft.gridIndexBuffer,ft.gridSegments];for(const vr of xt){const kr=_t.getTile(vr),Sr=_.StencilMode.disabled,Lr=ft.prevTerrainTileForTile[vr.key],Jr=ft.terrainTileForTile[vr.key];Au(Lr,Jr)&&Ll.newMorphing(vr.key,Lr,Jr,kt,250),$t.activeTexture.set(Dt.TEXTURE0),kr.texture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE,Dt.LINEAR_MIPMAP_NEAREST);const Ar=Ll.getMorphValuesForProxy(vr.key),Hr=Ar?1:0;let Or;Ar&&(Or={morphing:{srcDemTile:Ar.from,dstDemTile:Ar.to,phase:_.easeCubicInOut(Ar.phase)}});const Qr=Pu(vr.projMatrix,g0(vr.canonical,jt.renderWorldCopies)?Qt/10:Qt);er(Hr,sr),ft.setupElevationDraw(kr,Vt,Or),dt.prepareDrawProgram($t,Vt,vr.toUnwrapped()),Vt.draw($t,lr,tr,Sr,_i,_.CullFaceMode.backCCW,Qr,"terrain_raster",ft.gridBuffer,yr,_r)}})}}(nt,this,this.proxySourceCache,et,this._updateTimestamp),this.renderingToTexture=!0,nt.gpuTimingDeferredRenderEnd(),et.splice(0,et.length))}renderBatch(et){if(this._drapedRenderBatches.length===0)return et+1;this.renderingToTexture=!0;const nt=this.painter,ct=this.painter.context,dt=this.proxySourceCache,ft=this.proxiedCoords[dt.id],_t=this._drapedRenderBatches.shift(),xt=[],kt=nt.style.order;let $t=0;for(const Dt of ft){const Vt=dt.getTileByID(Dt.proxyTileKey),Yt=dt.proxyCachedFBO[Dt.key]?dt.proxyCachedFBO[Dt.key][et]:void 0,Jt=Yt!==void 0?dt.renderCache[Yt]:this.pool[$t++],er=Yt!==void 0;if(Vt.texture=Jt.tex,er&&!Jt.dirty){xt.push(Vt.tileID);continue}let _i;ct.bindFramebuffer.set(Jt.fb.framebuffer),this.renderedToTile=!1,Jt.dirty&&(ct.clear({color:_.Color.transparent,stencil:0}),Jt.dirty=!1);for(let tr=_t.start;tr<=_t.end;++tr){const jt=nt.style._layers[kt[tr]];if(jt.isHidden(nt.transform.zoom))continue;const Qt=nt.style._getLayerSourceCache(jt),sr=Qt?this.proxyToSource[Dt.key][Qt.id]:[Dt];if(!sr)continue;const lr=sr;ct.viewport.set([0,0,Jt.fb.width,Jt.fb.height]),_i!==(Qt?Qt.id:null)&&(this._setupStencil(Jt,sr,jt,Qt),_i=Qt?Qt.id:null),nt.renderLayer(nt,Qt,jt,lr)}this.renderedToTile?(Jt.dirty=!0,xt.push(Vt.tileID)):er||--$t,$t===5&&($t=0,this.renderToBackBuffer(xt))}return this.renderToBackBuffer(xt),this.renderingToTexture=!1,ct.bindFramebuffer.set(null),ct.viewport.set([0,0,nt.width,nt.height]),_t.end+1}postRender(){}renderCacheEfficiency(et){const nt=et.order.length;if(nt===0)return{efficiency:100};let ct,dt=0,ft=0,_t=!1;for(let xt=0;xt<nt;++xt){const kt=et._layers[et.order[xt]];this._style.isLayerDraped(kt)?(_t&&++dt,++ft):_t||(_t=!0,ct=kt.id)}return ft===0?{efficiency:100}:{efficiency:100*(1-dt/ft),firstUndrapedLayer:ct}}getMinElevationBelowMSL(){let et=0;return this._visibleDemTiles.filter(nt=>nt.dem).forEach(nt=>{et=Math.min(et,nt.dem.tree.minimums[0])}),et===0?et:(et-30)*this._exaggeration}raycast(et,nt,ct){if(!this._visibleDemTiles)return null;const dt=this._visibleDemTiles.filter(ft=>ft.dem).map(ft=>{const _t=ft.tileID,xt=1<<_t.overscaledZ,{x:kt,y:$t}=_t.canonical,Dt=kt/xt,Vt=(kt+1)/xt,Yt=$t/xt,Jt=($t+1)/xt;return{minx:Dt,miny:Yt,maxx:Vt,maxy:Jt,t:ft.dem.tree.raycastRoot(Dt,Yt,Vt,Jt,et,nt,ct),tile:ft}});dt.sort((ft,_t)=>(ft.t!==null?ft.t:Number.MAX_VALUE)-(_t.t!==null?_t.t:Number.MAX_VALUE));for(const ft of dt){if(ft.t==null)return null;const _t=ft.tile.dem.tree.raycast(ft.minx,ft.miny,ft.maxx,ft.maxy,et,nt,ct);if(_t!=null)return _t}return null}_createFBO(){const et=this.painter.context,nt=et.gl,ct=this.drapeBufferSize;et.activeTexture.set(nt.TEXTURE0);const dt=new _.Texture(et,{width:ct[0],height:ct[1],data:null},nt.RGBA);dt.bind(nt.LINEAR,nt.CLAMP_TO_EDGE);const ft=et.createFramebuffer(ct[0],ct[1],!1);return ft.colorAttachment.set(dt.texture),ft.depthAttachment=new br(et,ft.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=et.createRenderbuffer(et.gl.DEPTH_STENCIL,ct[0],ct[1]),this._stencilRef=0,ft.depthAttachment.set(this._sharedDepthStencil),et.clear({stencil:0})):ft.depthAttachment.set(this._sharedDepthStencil),et.extTextureFilterAnisotropic&&!et.extTextureFilterAnisotropicForceOff&&nt.texParameterf(nt.TEXTURE_2D,et.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,et.extTextureFilterAnisotropicMax),{fb:ft,tex:dt,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const et in this._style._sourceCaches)if(this._style._sourceCaches[et].hasTransition())return!0;return this._style.order.some(et=>{const nt=this._style._layers[et],ct=nt.isHidden(this.painter.transform.zoom);return nt.type==="custom"?!ct&&nt.shouldRedrape():!ct&&nt.hasTransition()})}_clearLineLayersFromRenderCache(){let et=!1;for(const ct of this._style._getSources())if(ct instanceof cn){et=!0;break}if(!et)return;const nt={};for(let ct=0;ct<this._style.order.length;++ct){const dt=this._style._layers[this._style.order[ct]],ft=this._style._getLayerSourceCache(dt);if(ft&&!nt[ft.id]&&!dt.isHidden(this.painter.transform.zoom)&&dt.type==="line"&&dt.widthExpression()instanceof _.ZoomDependentExpression){nt[ft.id]=!0;for(const _t of this.proxyCoords){const xt=this.proxyToSource[_t.key][ft.id];if(xt)for(const kt of xt)this._clearRenderCacheForTile(ft.id,kt)}}}}_clearRasterLayersFromRenderCache(){let et=!1;for(const ct in this._style._sourceCaches)if(this._style._sourceCaches[ct]._source instanceof tn){et=!0;break}if(!et)return;const nt={};for(let ct=0;ct<this._style.order.length;++ct){const dt=this._style._layers[this._style.order[ct]],ft=this._style._getLayerSourceCache(dt);if(!ft||nt[ft.id]||dt.isHidden(this.painter.transform.zoom)||dt.type!=="raster")continue;const _t=dt.paint.get("raster-fade-duration");for(const xt of this.proxyCoords){const kt=this.proxyToSource[xt.key][ft.id];if(kt)for(const $t of kt){const Dt=Ym(ft.getTile($t),ft.findLoadedParent($t,0),ft,this.painter.transform,_t);(Dt.opacity!==1||Dt.mix!==0)&&this._clearRenderCacheForTile(ft.id,$t)}}}}_setupDrapedRenderBatches(){const et=this._style.order,nt=et.length;if(nt===0)return;const ct=[];let dt,ft=0,_t=this._style._layers[et[ft]];for(;!this._style.isLayerDraped(_t)&&_t.isHidden(this.painter.transform.zoom)&&++ft<nt;)_t=this._style._layers[et[ft]];for(;ft<nt;++ft){const xt=this._style._layers[et[ft]];xt.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(xt)?dt===void 0&&(dt=ft):dt!==void 0&&(ct.push({start:dt,end:ft-1}),dt=void 0))}dt!==void 0&&ct.push({start:dt,end:ft-1}),this._drapedRenderBatches=ct}_setupRenderCache(et){const nt=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,nt.renderCache.length>nt.renderCachePool.length){const _t=Object.values(nt.proxyCachedFBO);nt.proxyCachedFBO={};for(let xt=0;xt<_t.length;++xt){const kt=Object.values(_t[xt]);nt.renderCachePool.push(...kt)}}return}this._clearRasterLayersFromRenderCache();const ct=this.proxyCoords,dt=this._tilesDirty;for(let _t=ct.length-1;_t>=0;_t--){const xt=ct[_t];if(nt.getTileByID(xt.key),nt.proxyCachedFBO[xt.key]!==void 0){const kt=et[xt.key],$t=this.proxyToSource[xt.key];let Dt=0;for(const Vt in $t){const Yt=$t[Vt],Jt=kt[Vt];if(!Jt||Jt.length!==Yt.length||Yt.some((er,_i)=>er!==Jt[_i]||dt[Vt]&&dt[Vt].hasOwnProperty(er.key))){Dt=-1;break}++Dt}for(const Vt in nt.proxyCachedFBO[xt.key])nt.renderCache[nt.proxyCachedFBO[xt.key][Vt]].dirty=Dt<0||Dt!==Object.values(kt).length}}const ft=[...this._drapedRenderBatches];ft.sort((_t,xt)=>xt.end-xt.start-(_t.end-_t.start));for(const _t of ft)for(const xt of ct){if(nt.proxyCachedFBO[xt.key])continue;let kt=nt.renderCachePool.pop();kt===void 0&&nt.renderCache.length<50&&(kt=nt.renderCache.length,nt.renderCache.push(this._createFBO())),kt!==void 0&&(nt.proxyCachedFBO[xt.key]={},nt.proxyCachedFBO[xt.key][_t.start]=kt,nt.renderCache[kt].dirty=!0)}this._tilesDirty={}}_setupStencil(et,nt,ct,dt){if(!dt||!this._sourceTilesOverlap[dt.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const ft=this.painter.context,_t=ft.gl;if(nt.length<=1)return void(this._overlapStencilType=!1);let xt;if(ct.isTileClipped())xt=nt.length,this._overlapStencilMode.test={func:_t.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(nt[0].overscaledZ>nt[nt.length-1].overscaledZ))return void(this._overlapStencilType=!1);xt=1,this._overlapStencilMode.test={func:_t.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+xt>255&&(ft.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=xt,this._overlapStencilMode.ref=this._stencilRef,ct.isTileClipped()&&this._renderTileClippingMasks(nt,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(et){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[et.key]),this._overlapStencilMode):_.StencilMode.disabled}_renderTileClippingMasks(et,nt){const ct=this.painter,dt=this.painter.context,ft=dt.gl;ct._tileClippingMaskIDs={},dt.setColorMode(_.ColorMode.disabled),dt.setDepthMode(_.DepthMode.disabled);const _t=ct.useProgram("clippingMask");for(const xt of et){const kt=ct._tileClippingMaskIDs[xt.key]=--nt;_t.draw(dt,ft.TRIANGLES,_.DepthMode.disabled,new _.StencilMode({func:ft.ALWAYS,mask:0},kt,255,ft.KEEP,ft.KEEP,ft.REPLACE),_.ColorMode.disabled,_.CullFaceMode.disabled,lp(xt.projMatrix),"$clipping",ct.tileExtentBuffer,ct.quadTriangleIndexBuffer,ct.tileExtentSegments)}}pointCoordinate(et){const nt=this.painter.transform;if(et.x<0||et.x>nt.width||et.y<0||et.y>nt.height)return null;const ct=[et.x,et.y,1,1];_.transformMat4$1(ct,ct,nt.pixelMatrixInverse),_.scale$1(ct,ct,1/ct[3]),ct[0]/=nt.worldSize,ct[1]/=nt.worldSize;const dt=nt._camera.position,ft=_.mercatorZfromAltitude(1,nt.center.lat),_t=[dt[0],dt[1],dt[2]/ft,0],xt=_.subtract([],ct.slice(0,3),_t);_.normalize(xt,xt);const kt=this.raycast(_t,xt,this._exaggeration);return kt!==null&&kt?(_.scaleAndAdd(_t,_t,xt,kt),_t[3]=_t[2],_t[2]*=ft,_t):null}drawDepth(){const et=this.painter,nt=et.context,ct=this.proxySourceCache,dt=Math.ceil(et.width),ft=Math.ceil(et.height);if(!this._depthFBO||this._depthFBO.width===dt&&this._depthFBO.height===ft||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const _t=nt.gl,xt=nt.createFramebuffer(dt,ft,!0);nt.activeTexture.set(_t.TEXTURE0);const kt=new _.Texture(nt,{width:dt,height:ft,data:null},_t.RGBA);kt.bind(_t.NEAREST,_t.CLAMP_TO_EDGE),xt.colorAttachment.set(kt.texture);const $t=nt.createRenderbuffer(nt.gl.DEPTH_COMPONENT16,dt,ft);xt.depthAttachment.set($t),this._depthFBO=xt,this._depthTexture=kt}nt.bindFramebuffer.set(this._depthFBO.framebuffer),nt.viewport.set([0,0,dt,ft]),function(_t,xt,kt,$t){if(_t.transform.projection.name==="globe")return;const Dt=_t.context,Vt=Dt.gl;Dt.clear({depth:1});const Yt=_t.useProgram("terrainDepth"),Jt=new _.DepthMode(Vt.LESS,_.DepthMode.ReadWrite,_t.depthRangeFor3D);for(const er of $t){const _i=kt.getTile(er),tr=Pu(er.projMatrix,0);xt.setupElevationDraw(_i,Yt),Yt.draw(Dt,Vt.TRIANGLES,Jt,_.StencilMode.disabled,_.ColorMode.unblended,_.CullFaceMode.backCCW,tr,"terrain_depth",xt.gridBuffer,xt.gridIndexBuffer,xt.gridNoSkirtSegments)}}(et,this,ct,this.proxyCoords)}_setupProxiedCoordsForOrtho(et,nt,ct){if(et.getSource()instanceof Nn)return this._setupProxiedCoordsForImageSource(et,nt,ct);this._findCoveringTileCache[et.id]=this._findCoveringTileCache[et.id]||{};const dt=this.proxiedCoords[et.id]=[],ft=this.proxyCoords;for(let xt=0;xt<ft.length;xt++){const kt=ft[xt],$t=this._findTileCoveringTileID(kt,et);if($t){const Dt=this._createProxiedId(kt,$t,ct[kt.key]&&ct[kt.key][et.id]);dt.push(Dt),this.proxyToSource[kt.key][et.id]=[Dt]}}let _t=!1;for(let xt=0;xt<nt.length;xt++){const kt=et.getTile(nt[xt]);if(!kt||!kt.hasData())continue;const $t=this._findTileCoveringTileID(kt.tileID,this.proxySourceCache);if($t&&$t.tileID.canonical.z!==kt.tileID.canonical.z){const Dt=this.proxyToSource[$t.tileID.key][et.id],Vt=this._createProxiedId($t.tileID,kt,ct[$t.tileID.key]&&ct[$t.tileID.key][et.id]);Dt?Dt.splice(Dt.length-1,0,Vt):this.proxyToSource[$t.tileID.key][et.id]=[Vt],dt.push(Vt),_t=!0}}this._sourceTilesOverlap[et.id]=_t}_setupProxiedCoordsForImageSource(et,nt,ct){if(!et.getSource().loaded())return;const dt=this.proxiedCoords[et.id]=[],ft=this.proxyCoords,_t=et.getSource(),xt=new _.Point(_t.tileID.x,_t.tileID.y)._div(1<<_t.tileID.z),kt=_t.coordinates.map(_.MercatorCoordinate.fromLngLat).reduce((Dt,Vt)=>(Dt.min.x=Math.min(Dt.min.x,Vt.x-xt.x),Dt.min.y=Math.min(Dt.min.y,Vt.y-xt.y),Dt.max.x=Math.max(Dt.max.x,Vt.x-xt.x),Dt.max.y=Math.max(Dt.max.y,Vt.y-xt.y),Dt),{min:new _.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new _.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),$t=(Dt,Vt)=>{const Yt=Dt.wrap+Dt.canonical.x/(1<<Dt.canonical.z),Jt=Dt.canonical.y/(1<<Dt.canonical.z),er=_.EXTENT/(1<<Dt.canonical.z),_i=Vt.wrap+Vt.canonical.x/(1<<Vt.canonical.z),tr=Vt.canonical.y/(1<<Vt.canonical.z);return Yt+er<_i+kt.min.x||Yt>_i+kt.max.x||Jt+er<tr+kt.min.y||Jt>tr+kt.max.y};for(let Dt=0;Dt<ft.length;Dt++){const Vt=ft[Dt];for(let Yt=0;Yt<nt.length;Yt++){const Jt=et.getTile(nt[Yt]);if(!Jt||!Jt.hasData()||$t(Vt,Jt.tileID))continue;const er=this._createProxiedId(Vt,Jt,ct[Vt.key]&&ct[Vt.key][et.id]),_i=this.proxyToSource[Vt.key][et.id];_i?_i.push(er):this.proxyToSource[Vt.key][et.id]=[er],dt.push(er)}}}_createProxiedId(et,nt,ct){let dt=this.orthoMatrix;if(ct){const ft=ct.find(_t=>_t.key===nt.tileID.key);if(ft)return ft}if(nt.tileID.key!==et.key){const ft=et.canonical.z-nt.tileID.canonical.z;let _t,xt,kt;dt=_.create();const $t=nt.tileID.wrap-et.wrap<<et.overscaledZ;ft>0?(_t=_.EXTENT>>ft,xt=_t*((nt.tileID.canonical.x<<ft)-et.canonical.x+$t),kt=_t*((nt.tileID.canonical.y<<ft)-et.canonical.y)):(_t=_.EXTENT<<-ft,xt=_.EXTENT*(nt.tileID.canonical.x-(et.canonical.x+$t<<-ft)),kt=_.EXTENT*(nt.tileID.canonical.y-(et.canonical.y<<-ft))),_.ortho(dt,0,_t,0,_t,0,1),_.translate(dt,dt,[xt,kt,0])}return new Wp(nt.tileID,et.key,dt)}_findTileCoveringTileID(et,nt){let ct=nt.getTile(et);if(ct&&ct.hasData())return ct;const dt=this._findCoveringTileCache[nt.id],ft=dt[et.key];if(ct=ft?nt.getTileByID(ft):null,ct&&ct.hasData()||ft===null)return ct;let _t=ct?ct.tileID:et,xt=_t.overscaledZ;const kt=nt.getSource().minzoom,$t=[];if(!ft){const Vt=nt.getSource().maxzoom;if(et.canonical.z>=Vt){const Yt=et.canonical.z-Vt;nt.getSource().reparseOverscaled?(xt=Math.max(et.canonical.z+2,nt.transform.tileZoom),_t=new _.OverscaledTileID(xt,et.wrap,Vt,et.canonical.x>>Yt,et.canonical.y>>Yt)):Yt!==0&&(xt=Vt,_t=new _.OverscaledTileID(xt,et.wrap,Vt,et.canonical.x>>Yt,et.canonical.y>>Yt))}_t.key!==et.key&&($t.push(_t.key),ct=nt.getTile(_t))}const Dt=Vt=>{$t.forEach(Yt=>{dt[Yt]=Vt}),$t.length=0};for(xt-=1;xt>=kt&&(!ct||!ct.hasData());xt--){ct&&Dt(ct.tileID.key);const Vt=_t.calculateScaledKey(xt);if(ct=nt.getTileByID(Vt),ct&&ct.hasData())break;const Yt=dt[Vt];if(Yt===null)break;Yt===void 0?$t.push(Vt):ct=nt.getTileByID(Yt)}return Dt(ct?ct.tileID.key:null),ct&&ct.hasData()?ct:null}findDEMTileFor(et){return this.enabled?this._findTileCoveringTileID(et,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(et,nt){let ct=this._tilesDirty[et];ct||(ct=this._tilesDirty[et]={}),ct[nt.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const et=function(nt){let ct=0;const dt=new _.StructArrayLayout2ui4,ft=131;for(let _t=1;_t<129;_t++){for(let xt=1;xt<129;xt++)ct=_t*ft+xt,dt.emplaceBack(ct,ct+1),dt.emplaceBack(ct,ct+ft),dt.emplaceBack(ct+1,ct+ft),_t===128&&dt.emplaceBack(ct+ft,ct+ft+1);dt.emplaceBack(ct+1,ct+1+ft)}return dt}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(et),this.wireframeSegments=_.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,et.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Kn{static cacheKey(et,nt,ct,dt){let ft=`${nt}${dt?dt.cacheKey:""}`;for(const _t of ct)et.usedDefines.includes(_t)&&(ft+=`/${_t}`);return ft}constructor(et,nt,ct,dt,ft,_t){const xt=et.gl;this.program=xt.createProgram();const kt=function(jt){const Qt=[];for(let sr=0;sr<jt.length;sr++){if(jt[sr]===null)continue;const lr=jt[sr].split(" ");Qt.push(lr.pop())}return Qt}(ct.staticAttributes),$t=dt?dt.getBinderAttributes():[],Dt=kt.concat($t);let Vt=dt?dt.defines():[];Vt=Vt.concat(_t.map(jt=>`#define ${jt}`));const Yt=et.isWebGL2?`#version 300 es
`:"",Jt=Yt+Vt.concat(et.extStandardDerivatives&&Yt.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Hm):Hm,Hm,Up,p0.fragmentSource,ku.fragmentSource,ct.fragmentSource).join(`
`),er=Yt+Vt.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Up,p0.vertexSource,ku.vertexSource,jp.vertexSource,ct.vertexSource).join(`
`),_i=xt.createShader(xt.FRAGMENT_SHADER);if(xt.isContextLost())return void(this.failedToCreate=!0);xt.shaderSource(_i,Jt),xt.compileShader(_i),xt.attachShader(this.program,_i);const tr=xt.createShader(xt.VERTEX_SHADER);if(xt.isContextLost())this.failedToCreate=!0;else{xt.shaderSource(tr,er),xt.compileShader(tr),xt.attachShader(this.program,tr),this.attributes={},this.numAttributes=Dt.length;for(let jt=0;jt<this.numAttributes;jt++)Dt[jt]&&(xt.bindAttribLocation(this.program,jt,Dt[jt]),this.attributes[Dt[jt]]=jt);xt.linkProgram(this.program),xt.deleteShader(tr),xt.deleteShader(_i),this.fixedUniforms=ft(et),this.binderUniforms=dt?dt.getUniforms(et):[],_t.includes("TERRAIN")&&(this.terrainUniforms=(jt=>({u_dem:new _.Uniform1i(jt),u_dem_prev:new _.Uniform1i(jt),u_dem_unpack:new _.Uniform4f(jt),u_dem_tl:new _.Uniform2f(jt),u_dem_scale:new _.Uniform1f(jt),u_dem_tl_prev:new _.Uniform2f(jt),u_dem_scale_prev:new _.Uniform1f(jt),u_dem_size:new _.Uniform1f(jt),u_dem_lerp:new _.Uniform1f(jt),u_exaggeration:new _.Uniform1f(jt),u_depth:new _.Uniform1i(jt),u_depth_size_inv:new _.Uniform2f(jt),u_meter_to_dem:new _.Uniform1f(jt),u_label_plane_matrix_inv:new _.UniformMatrix4f(jt)}))(et)),_t.includes("GLOBE")&&(this.globeUniforms=(jt=>({u_tile_tl_up:new _.Uniform3f(jt),u_tile_tr_up:new _.Uniform3f(jt),u_tile_br_up:new _.Uniform3f(jt),u_tile_bl_up:new _.Uniform3f(jt),u_tile_up_scale:new _.Uniform1f(jt)}))(et)),_t.includes("FOG")&&(this.fogUniforms=(jt=>({u_fog_matrix:new _.UniformMatrix4f(jt),u_fog_range:new _.Uniform2f(jt),u_fog_color:new _.Uniform4f(jt),u_fog_horizon_blend:new _.Uniform1f(jt),u_fog_temporal_offset:new _.Uniform1f(jt),u_frustum_tl:new _.Uniform3f(jt),u_frustum_tr:new _.Uniform3f(jt),u_frustum_br:new _.Uniform3f(jt),u_frustum_bl:new _.Uniform3f(jt),u_globe_pos:new _.Uniform3f(jt),u_globe_radius:new _.Uniform1f(jt),u_globe_transition:new _.Uniform1f(jt),u_is_globe:new _.Uniform1i(jt),u_viewport:new _.Uniform2f(jt)}))(et))}}setTerrainUniformValues(et,nt){if(!this.terrainUniforms)return;const ct=this.terrainUniforms;if(!this.failedToCreate){et.program.set(this.program);for(const dt in nt)ct[dt]&&ct[dt].set(this.program,dt,nt[dt])}}setGlobeUniformValues(et,nt){if(!this.globeUniforms)return;const ct=this.globeUniforms;if(!this.failedToCreate){et.program.set(this.program);for(const dt in nt)ct[dt]&&ct[dt].set(this.program,dt,nt[dt])}}setFogUniformValues(et,nt){if(!this.fogUniforms)return;const ct=this.fogUniforms;if(!this.failedToCreate){et.program.set(this.program);for(const dt in nt)ct[dt].set(this.program,dt,nt[dt])}}draw(et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i){const tr=et.gl;if(this.failedToCreate)return;et.program.set(this.program),et.setDepthMode(ct),et.setStencilMode(dt),et.setColorMode(ft),et.setCullFace(_t);for(const Qt of Object.keys(this.fixedUniforms))this.fixedUniforms[Qt].set(this.program,Qt,xt[Qt]);er&&er.setUniforms(this.program,et,this.binderUniforms,Yt,{zoom:Jt});const jt={[tr.LINES]:2,[tr.TRIANGLES]:3,[tr.LINE_STRIP]:1}[nt];for(const Qt of Vt.get()){const sr=Qt.vaos||(Qt.vaos={});(sr[kt]||(sr[kt]=new Rv)).bind(et,this,$t,er?er.getPaintVertexBuffers():[],Dt,Qt.vertexOffset,_i||[]),tr.drawElements(nt,Qt.primitiveLength*jt,tr.UNSIGNED_SHORT,Qt.primitiveOffset*jt*2)}}}function cp(at,et){const nt=Math.pow(2,et.tileID.overscaledZ),ct=et.tileSize*Math.pow(2,at.transform.tileZoom)/nt,dt=ct*(et.tileID.canonical.x+et.tileID.wrap*nt),ft=ct*et.tileID.canonical.y;return{u_image:0,u_texsize:et.imageAtlasTexture.size,u_tile_units_to_pixels:1/ar(et,1,at.transform.tileZoom),u_pixel_coord_upper:[dt>>16,ft>>16],u_pixel_coord_lower:[65535&dt,65535&ft]}}const y0=_.create(),Jm=(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt)=>{const Vt=et.style.light,Yt=Vt.properties.get("position"),Jt=[Yt.x,Yt.y,Yt.z],er=_.create$1();Vt.properties.get("anchor")==="viewport"&&(_.fromRotation(er,-et.transform.angle),_.transformMat3(Jt,Jt,er));const _i=Vt.properties.get("color"),tr=et.transform,jt={u_matrix:at,u_lightpos:Jt,u_lightintensity:Vt.properties.get("intensity"),u_lightcolor:[_i.r,_i.g,_i.b],u_vertical_gradient:+nt,u_opacity:ct,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:y0,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:dt,u_edge_radius:ft};return tr.projection.name==="globe"&&(jt.u_tile_id=[_t.canonical.x,_t.canonical.y,1<<_t.canonical.z],jt.u_zoom_transition=kt,jt.u_inv_rot_matrix=Dt,jt.u_merc_center=$t,jt.u_up_dir=tr.projection.upVector(new _.CanonicalTileID(0,0,0),$t[0]*_.EXTENT,$t[1]*_.EXTENT),jt.u_height_lift=xt),jt},v0=(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt)=>{const Yt=Jm(at,et,nt,ct,dt,ft,_t,kt,$t,Dt,Vt),Jt={u_height_factor:-Math.pow(2,_t.overscaledZ)/xt.tileSize/8};return _.extend(Yt,cp(et,xt),Jt)},cu=at=>({u_matrix:at}),_g=(at,et,nt)=>_.extend(cu(at),cp(et,nt)),Dv=(at,et)=>({u_matrix:at,u_world:et}),$v=(at,et,nt,ct)=>_.extend(_g(at,et,nt),{u_world:ct}),zv=_.create(),ey=(at,et,nt,ct,dt,ft)=>{const _t=at.transform,xt=_t.projection.name==="globe";let kt;if(ft.paint.get("circle-pitch-alignment")==="map")if(xt){const Dt=_.globePixelsToTileUnits(_t.zoom,et.canonical)*_t._pixelsPerMercatorPixel;kt=Float32Array.from([Dt,0,0,Dt])}else kt=_t.calculatePixelsToTileUnitsMatrix(nt);else kt=new Float32Array([_t.pixelsToGLUnits[0],0,0,_t.pixelsToGLUnits[1]]);const $t={u_camera_to_center_distance:_t.cameraToCenterDistance,u_matrix:at.translatePosMatrix(et.projMatrix,nt,ft.paint.get("circle-translate"),ft.paint.get("circle-translate-anchor")),u_device_pixel_ratio:_.exported.devicePixelRatio,u_extrude_scale:kt,u_inv_rot_matrix:zv,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(xt){$t.u_inv_rot_matrix=ct,$t.u_merc_center=dt,$t.u_tile_id=[et.canonical.x,et.canonical.y,1<<et.canonical.z],$t.u_zoom_transition=_.globeToMercatorTransition(_t.zoom);const Dt=dt[0]*_.EXTENT,Vt=dt[1]*_.EXTENT;$t.u_up_dir=_t.projection.upVector(new _.CanonicalTileID(0,0,0),Dt,Vt)}return $t},ty=at=>{const et=[];return at.paint.get("circle-pitch-alignment")==="map"&&et.push("PITCH_WITH_MAP"),at.paint.get("circle-pitch-scale")==="map"&&et.push("SCALE_WITH_MAP"),et},iy=(at,et,nt,ct)=>{const dt=_.EXTENT/nt.tileSize;return{u_matrix:at,u_camera_to_center_distance:et.getCameraToCenterDistance(ct),u_extrude_scale:[et.pixelsToGLUnits[0]/dt,et.pixelsToGLUnits[1]/dt]}},Zp=(at,et,nt=1)=>({u_matrix:at,u_color:et,u_overlay:0,u_overlay_scale:nt}),_0=_.create(),x0=(at,et,nt,ct,dt,ft,_t)=>{const xt=at.transform,kt=xt.projection.name==="globe",$t=kt?_.globePixelsToTileUnits(xt.zoom,et.canonical)*xt._pixelsPerMercatorPixel:ar(nt,1,ft),Dt={u_matrix:et.projMatrix,u_extrude_scale:$t,u_intensity:_t,u_inv_rot_matrix:_0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(kt){Dt.u_inv_rot_matrix=ct,Dt.u_merc_center=dt,Dt.u_tile_id=[et.canonical.x,et.canonical.y,1<<et.canonical.z],Dt.u_zoom_transition=_.globeToMercatorTransition(xt.zoom);const Vt=dt[0]*_.EXTENT,Yt=dt[1]*_.EXTENT;Dt.u_up_dir=xt.projection.upVector(new _.CanonicalTileID(0,0,0),Vt,Yt)}return Dt},Ov=(at,et,nt,ct,dt,ft,_t)=>{const xt=at.transform,kt=xt.calculatePixelsToTileUnitsMatrix(et);return{u_matrix:ry(at,et,nt,ct),u_pixels_to_tile_units:kt,u_device_pixel_ratio:ft,u_units_to_pixels:[1/xt.pixelsToGLUnits[0],1/xt.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:dt,u_texsize:up(nt)?et.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Iu(et,at.transform),u_alpha_discard_threshold:0,u_trim_offset:_t}},hp=(at,et,nt,ct,dt)=>{const ft=at.transform;return{u_matrix:ry(at,et,nt,ct),u_texsize:et.imageAtlasTexture.size,u_pixels_to_tile_units:ft.calculatePixelsToTileUnitsMatrix(et),u_device_pixel_ratio:dt,u_image:0,u_tile_units_to_pixels:Iu(et,ft),u_units_to_pixels:[1/ft.pixelsToGLUnits[0],1/ft.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Iu(at,et){return 1/ar(at,1,et.tileZoom)}function ry(at,et,nt,ct){return at.translatePosMatrix(ct||et.tileID.projMatrix,et,nt.paint.get("line-translate"),nt.paint.get("line-translate-anchor"))}function up(at){const et=at.paint.get("line-dasharray").value;return et.value||et.kind!=="constant"}const ny=(at,et,nt,ct,dt,ft)=>{return{u_matrix:at,u_tl_parent:et,u_scale_parent:nt,u_fade_t:ct.mix,u_opacity:ct.opacity*dt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:dt.paint.get("raster-brightness-min"),u_brightness_high:dt.paint.get("raster-brightness-max"),u_saturation_factor:(xt=dt.paint.get("raster-saturation"),xt>0?1-1/(1.001-xt):-xt),u_contrast_factor:(_t=dt.paint.get("raster-contrast"),_t>0?1/(1-_t):1+_t),u_spin_weights:xa(dt.paint.get("raster-hue-rotate")),u_perspective_transform:ft};var _t,xt};function xa(at){at*=Math.PI/180;const et=Math.sin(at),nt=Math.cos(at);return[(2*nt+1)/3,(-Math.sqrt(3)*et-nt+1)/3,(Math.sqrt(3)*et-nt+1)/3]}const Xp=_.create(),oy=(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i)=>{const tr=dt.transform,jt={u_is_size_zoom_constant:+(at==="constant"||at==="source"),u_is_size_feature_constant:+(at==="constant"||at==="camera"),u_size_t:et?et.uSizeT:0,u_size:et?et.uSize:0,u_camera_to_center_distance:tr.cameraToCenterDistance,u_rotate_symbol:+nt,u_aspect_ratio:tr.width/tr.height,u_fade_change:dt.options.fadeDuration?dt.symbolFadeChange:1,u_matrix:ft,u_label_plane_matrix:_t,u_coord_matrix:xt,u_is_text:+kt,u_pitch_with_map:+ct,u_texsize:$t,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Xp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Xp,u_up_vector:[0,-1,0]};return _i.name==="globe"&&(jt.u_tile_id=[Dt.canonical.x,Dt.canonical.y,1<<Dt.canonical.z],jt.u_zoom_transition=Vt,jt.u_inv_rot_matrix=Jt,jt.u_merc_center=Yt,jt.u_camera_forward=tr._camera.forward(),jt.u_ecef_origin=_.globeECEFOrigin(tr.globeMatrix,Dt.toUnwrapped()),jt.u_tile_matrix=Float32Array.from(tr.globeMatrix),jt.u_up_vector=er),jt},Yp=(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i,tr)=>_.extend(oy(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Vt,Yt,Jt,er,_i,tr),{u_gamma_scale:ct?dt.transform.cameraToCenterDistance*Math.cos(dt.terrain?0:dt.transform._pitch):1,u_device_pixel_ratio:_.exported.devicePixelRatio,u_is_halo:+Dt}),b0=(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt,Yt,Jt,er,_i)=>_.extend(Yp(at,et,nt,ct,dt,ft,_t,xt,!0,kt,!0,Dt,Vt,Yt,Jt,er,_i),{u_texsize_icon:$t,u_texture_icon:1}),sy=(at,et,nt)=>({u_matrix:at,u_opacity:et,u_color:nt}),Bv=(at,et,nt,ct,dt)=>_.extend(function(ft,_t,xt){const kt=_t.imageManager.getPattern(ft.toString()),{width:$t,height:Dt}=_t.imageManager.getPixelSize(),Vt=Math.pow(2,xt.tileID.overscaledZ),Yt=xt.tileSize*Math.pow(2,_t.transform.tileZoom)/Vt,Jt=Yt*(xt.tileID.canonical.x+xt.tileID.wrap*Vt),er=Yt*xt.tileID.canonical.y;return{u_image:0,u_pattern_tl:kt.tl,u_pattern_br:kt.br,u_texsize:[$t,Dt],u_pattern_size:kt.displaySize,u_tile_units_to_pixels:1/ar(xt,1,_t.transform.tileZoom),u_pixel_coord_upper:[Jt>>16,er>>16],u_pixel_coord_lower:[65535&Jt,65535&er]}}(ct,nt,dt),{u_matrix:at,u_opacity:et}),ay={fillExtrusion:at=>({u_matrix:new _.UniformMatrix4f(at),u_lightpos:new _.Uniform3f(at),u_lightintensity:new _.Uniform1f(at),u_lightcolor:new _.Uniform3f(at),u_vertical_gradient:new _.Uniform1f(at),u_opacity:new _.Uniform1f(at),u_edge_radius:new _.Uniform1f(at),u_ao:new _.Uniform2f(at),u_tile_id:new _.Uniform3f(at),u_zoom_transition:new _.Uniform1f(at),u_inv_rot_matrix:new _.UniformMatrix4f(at),u_merc_center:new _.Uniform2f(at),u_up_dir:new _.Uniform3f(at),u_height_lift:new _.Uniform1f(at)}),fillExtrusionPattern:at=>({u_matrix:new _.UniformMatrix4f(at),u_lightpos:new _.Uniform3f(at),u_lightintensity:new _.Uniform1f(at),u_lightcolor:new _.Uniform3f(at),u_vertical_gradient:new _.Uniform1f(at),u_height_factor:new _.Uniform1f(at),u_edge_radius:new _.Uniform1f(at),u_ao:new _.Uniform2f(at),u_tile_id:new _.Uniform3f(at),u_zoom_transition:new _.Uniform1f(at),u_inv_rot_matrix:new _.UniformMatrix4f(at),u_merc_center:new _.Uniform2f(at),u_up_dir:new _.Uniform3f(at),u_height_lift:new _.Uniform1f(at),u_image:new _.Uniform1i(at),u_texsize:new _.Uniform2f(at),u_pixel_coord_upper:new _.Uniform2f(at),u_pixel_coord_lower:new _.Uniform2f(at),u_tile_units_to_pixels:new _.Uniform1f(at),u_opacity:new _.Uniform1f(at)}),fill:at=>({u_matrix:new _.UniformMatrix4f(at)}),fillPattern:at=>({u_matrix:new _.UniformMatrix4f(at),u_image:new _.Uniform1i(at),u_texsize:new _.Uniform2f(at),u_pixel_coord_upper:new _.Uniform2f(at),u_pixel_coord_lower:new _.Uniform2f(at),u_tile_units_to_pixels:new _.Uniform1f(at)}),fillOutline:at=>({u_matrix:new _.UniformMatrix4f(at),u_world:new _.Uniform2f(at)}),fillOutlinePattern:at=>({u_matrix:new _.UniformMatrix4f(at),u_world:new _.Uniform2f(at),u_image:new _.Uniform1i(at),u_texsize:new _.Uniform2f(at),u_pixel_coord_upper:new _.Uniform2f(at),u_pixel_coord_lower:new _.Uniform2f(at),u_tile_units_to_pixels:new _.Uniform1f(at)}),circle:at=>({u_camera_to_center_distance:new _.Uniform1f(at),u_extrude_scale:new _.UniformMatrix2f(at),u_device_pixel_ratio:new _.Uniform1f(at),u_matrix:new _.UniformMatrix4f(at),u_inv_rot_matrix:new _.UniformMatrix4f(at),u_merc_center:new _.Uniform2f(at),u_tile_id:new _.Uniform3f(at),u_zoom_transition:new _.Uniform1f(at),u_up_dir:new _.Uniform3f(at)}),collisionBox:at=>({u_matrix:new _.UniformMatrix4f(at),u_camera_to_center_distance:new _.Uniform1f(at),u_extrude_scale:new _.Uniform2f(at)}),collisionCircle:at=>({u_matrix:new _.UniformMatrix4f(at),u_inv_matrix:new _.UniformMatrix4f(at),u_camera_to_center_distance:new _.Uniform1f(at),u_viewport_size:new _.Uniform2f(at)}),debug:at=>({u_color:new _.UniformColor(at),u_matrix:new _.UniformMatrix4f(at),u_overlay:new _.Uniform1i(at),u_overlay_scale:new _.Uniform1f(at)}),clippingMask:at=>({u_matrix:new _.UniformMatrix4f(at)}),heatmap:at=>({u_extrude_scale:new _.Uniform1f(at),u_intensity:new _.Uniform1f(at),u_matrix:new _.UniformMatrix4f(at),u_inv_rot_matrix:new _.UniformMatrix4f(at),u_merc_center:new _.Uniform2f(at),u_tile_id:new _.Uniform3f(at),u_zoom_transition:new _.Uniform1f(at),u_up_dir:new _.Uniform3f(at)}),heatmapTexture:at=>({u_image:new _.Uniform1i(at),u_color_ramp:new _.Uniform1i(at),u_opacity:new _.Uniform1f(at)}),hillshade:at=>({u_matrix:new _.UniformMatrix4f(at),u_image:new _.Uniform1i(at),u_latrange:new _.Uniform2f(at),u_light:new _.Uniform2f(at),u_shadow:new _.UniformColor(at),u_highlight:new _.UniformColor(at),u_accent:new _.UniformColor(at)}),hillshadePrepare:at=>({u_matrix:new _.UniformMatrix4f(at),u_image:new _.Uniform1i(at),u_dimension:new _.Uniform2f(at),u_zoom:new _.Uniform1f(at),u_unpack:new _.Uniform4f(at)}),line:at=>({u_matrix:new _.UniformMatrix4f(at),u_pixels_to_tile_units:new _.UniformMatrix2f(at),u_device_pixel_ratio:new _.Uniform1f(at),u_units_to_pixels:new _.Uniform2f(at),u_dash_image:new _.Uniform1i(at),u_gradient_image:new _.Uniform1i(at),u_image_height:new _.Uniform1f(at),u_texsize:new _.Uniform2f(at),u_tile_units_to_pixels:new _.Uniform1f(at),u_alpha_discard_threshold:new _.Uniform1f(at),u_trim_offset:new _.Uniform2f(at)}),linePattern:at=>({u_matrix:new _.UniformMatrix4f(at),u_texsize:new _.Uniform2f(at),u_pixels_to_tile_units:new _.UniformMatrix2f(at),u_device_pixel_ratio:new _.Uniform1f(at),u_image:new _.Uniform1i(at),u_units_to_pixels:new _.Uniform2f(at),u_tile_units_to_pixels:new _.Uniform1f(at),u_alpha_discard_threshold:new _.Uniform1f(at)}),raster:at=>({u_matrix:new _.UniformMatrix4f(at),u_tl_parent:new _.Uniform2f(at),u_scale_parent:new _.Uniform1f(at),u_fade_t:new _.Uniform1f(at),u_opacity:new _.Uniform1f(at),u_image0:new _.Uniform1i(at),u_image1:new _.Uniform1i(at),u_brightness_low:new _.Uniform1f(at),u_brightness_high:new _.Uniform1f(at),u_saturation_factor:new _.Uniform1f(at),u_contrast_factor:new _.Uniform1f(at),u_spin_weights:new _.Uniform3f(at),u_perspective_transform:new _.Uniform2f(at)}),symbolIcon:at=>({u_is_size_zoom_constant:new _.Uniform1i(at),u_is_size_feature_constant:new _.Uniform1i(at),u_size_t:new _.Uniform1f(at),u_size:new _.Uniform1f(at),u_camera_to_center_distance:new _.Uniform1f(at),u_rotate_symbol:new _.Uniform1i(at),u_aspect_ratio:new _.Uniform1f(at),u_fade_change:new _.Uniform1f(at),u_matrix:new _.UniformMatrix4f(at),u_label_plane_matrix:new _.UniformMatrix4f(at),u_coord_matrix:new _.UniformMatrix4f(at),u_is_text:new _.Uniform1i(at),u_pitch_with_map:new _.Uniform1i(at),u_texsize:new _.Uniform2f(at),u_tile_id:new _.Uniform3f(at),u_zoom_transition:new _.Uniform1f(at),u_inv_rot_matrix:new _.UniformMatrix4f(at),u_merc_center:new _.Uniform2f(at),u_camera_forward:new _.Uniform3f(at),u_tile_matrix:new _.UniformMatrix4f(at),u_up_vector:new _.Uniform3f(at),u_ecef_origin:new _.Uniform3f(at),u_texture:new _.Uniform1i(at)}),symbolSDF:at=>({u_is_size_zoom_constant:new _.Uniform1i(at),u_is_size_feature_constant:new _.Uniform1i(at),u_size_t:new _.Uniform1f(at),u_size:new _.Uniform1f(at),u_camera_to_center_distance:new _.Uniform1f(at),u_rotate_symbol:new _.Uniform1i(at),u_aspect_ratio:new _.Uniform1f(at),u_fade_change:new _.Uniform1f(at),u_matrix:new _.UniformMatrix4f(at),u_label_plane_matrix:new _.UniformMatrix4f(at),u_coord_matrix:new _.UniformMatrix4f(at),u_is_text:new _.Uniform1i(at),u_pitch_with_map:new _.Uniform1i(at),u_texsize:new _.Uniform2f(at),u_texture:new _.Uniform1i(at),u_gamma_scale:new _.Uniform1f(at),u_device_pixel_ratio:new _.Uniform1f(at),u_tile_id:new _.Uniform3f(at),u_zoom_transition:new _.Uniform1f(at),u_inv_rot_matrix:new _.UniformMatrix4f(at),u_merc_center:new _.Uniform2f(at),u_camera_forward:new _.Uniform3f(at),u_tile_matrix:new _.UniformMatrix4f(at),u_up_vector:new _.Uniform3f(at),u_ecef_origin:new _.Uniform3f(at),u_is_halo:new _.Uniform1i(at)}),symbolTextAndIcon:at=>({u_is_size_zoom_constant:new _.Uniform1i(at),u_is_size_feature_constant:new _.Uniform1i(at),u_size_t:new _.Uniform1f(at),u_size:new _.Uniform1f(at),u_camera_to_center_distance:new _.Uniform1f(at),u_rotate_symbol:new _.Uniform1i(at),u_aspect_ratio:new _.Uniform1f(at),u_fade_change:new _.Uniform1f(at),u_matrix:new _.UniformMatrix4f(at),u_label_plane_matrix:new _.UniformMatrix4f(at),u_coord_matrix:new _.UniformMatrix4f(at),u_is_text:new _.Uniform1i(at),u_pitch_with_map:new _.Uniform1i(at),u_texsize:new _.Uniform2f(at),u_texsize_icon:new _.Uniform2f(at),u_texture:new _.Uniform1i(at),u_texture_icon:new _.Uniform1i(at),u_gamma_scale:new _.Uniform1f(at),u_device_pixel_ratio:new _.Uniform1f(at),u_is_halo:new _.Uniform1i(at)}),background:at=>({u_matrix:new _.UniformMatrix4f(at),u_opacity:new _.Uniform1f(at),u_color:new _.UniformColor(at)}),backgroundPattern:at=>({u_matrix:new _.UniformMatrix4f(at),u_opacity:new _.Uniform1f(at),u_image:new _.Uniform1i(at),u_pattern_tl:new _.Uniform2f(at),u_pattern_br:new _.Uniform2f(at),u_texsize:new _.Uniform2f(at),u_pattern_size:new _.Uniform2f(at),u_pixel_coord_upper:new _.Uniform2f(at),u_pixel_coord_lower:new _.Uniform2f(at),u_tile_units_to_pixels:new _.Uniform1f(at)}),terrainRaster:Xm,terrainDepth:Xm,skybox:at=>({u_matrix:new _.UniformMatrix4f(at),u_sun_direction:new _.Uniform3f(at),u_cubemap:new _.Uniform1i(at),u_opacity:new _.Uniform1f(at),u_temporal_offset:new _.Uniform1f(at)}),skyboxGradient:at=>({u_matrix:new _.UniformMatrix4f(at),u_color_ramp:new _.Uniform1i(at),u_center_direction:new _.Uniform3f(at),u_radius:new _.Uniform1f(at),u_opacity:new _.Uniform1f(at),u_temporal_offset:new _.Uniform1f(at)}),skyboxCapture:at=>({u_matrix_3f:new _.UniformMatrix3f(at),u_sun_direction:new _.Uniform3f(at),u_sun_intensity:new _.Uniform1f(at),u_color_tint_r:new _.Uniform4f(at),u_color_tint_m:new _.Uniform4f(at),u_luminance:new _.Uniform1f(at)}),globeRaster:at=>({u_proj_matrix:new _.UniformMatrix4f(at),u_globe_matrix:new _.UniformMatrix4f(at),u_normalize_matrix:new _.UniformMatrix4f(at),u_merc_matrix:new _.UniformMatrix4f(at),u_zoom_transition:new _.Uniform1f(at),u_merc_center:new _.Uniform2f(at),u_image0:new _.Uniform1i(at),u_grid_matrix:new _.UniformMatrix3f(at),u_skirt_height:new _.Uniform1f(at),u_frustum_tl:new _.Uniform3f(at),u_frustum_tr:new _.Uniform3f(at),u_frustum_br:new _.Uniform3f(at),u_frustum_bl:new _.Uniform3f(at),u_globe_pos:new _.Uniform3f(at),u_globe_radius:new _.Uniform1f(at),u_viewport:new _.Uniform2f(at)}),globeAtmosphere:at=>({u_frustum_tl:new _.Uniform3f(at),u_frustum_tr:new _.Uniform3f(at),u_frustum_br:new _.Uniform3f(at),u_frustum_bl:new _.Uniform3f(at),u_horizon:new _.Uniform1f(at),u_transition:new _.Uniform1f(at),u_fadeout_range:new _.Uniform1f(at),u_color:new _.Uniform4f(at),u_high_color:new _.Uniform4f(at),u_space_color:new _.Uniform4f(at),u_star_intensity:new _.Uniform1f(at),u_star_density:new _.Uniform1f(at),u_star_size:new _.Uniform1f(at),u_temporal_offset:new _.Uniform1f(at),u_horizon_angle:new _.Uniform1f(at),u_rotation_matrix:new _.UniformMatrix4f(at)})};let Kp;function dp(at,et,nt,ct,dt,ft,_t){const xt=at.context,kt=xt.gl,$t=at.transform,Dt=at.useProgram("collisionBox"),Vt=[];let Yt=0,Jt=0;for(let lr=0;lr<ct.length;lr++){const yr=ct[lr],_r=et.getTile(yr),vr=_r.getBucket(nt);if(!vr)continue;const kr=Fs(yr,vr,$t);let Sr=kr;dt[0]===0&&dt[1]===0||(Sr=at.translatePosMatrix(kr,_r,dt,ft));const Lr=_t?vr.textCollisionBox:vr.iconCollisionBox,Jr=vr.collisionCircleArray;if(Jr.length>0){const Ar=_.create(),Hr=Sr;_.mul(Ar,vr.placementInvProjMatrix,$t.glCoordMatrix),_.mul(Ar,Ar,vr.placementViewportMatrix),Vt.push({circleArray:Jr,circleOffset:Jt,transform:Hr,invTransform:Ar,projection:vr.getProjection()}),Yt+=Jr.length/4,Jt=Yt}Lr&&(at.terrain&&at.terrain.setupElevationDraw(_r,Dt),Dt.draw(xt,kt.LINES,_.DepthMode.disabled,_.StencilMode.disabled,at.colorModeForRenderPass(),_.CullFaceMode.disabled,iy(Sr,$t,_r,vr.getProjection()),nt.id,Lr.layoutVertexBuffer,Lr.indexBuffer,Lr.segments,null,$t.zoom,null,[Lr.collisionVertexBuffer,Lr.collisionVertexBufferExt]))}if(!_t||!Vt.length)return;const er=at.useProgram("collisionCircle"),_i=new _.StructArrayLayout2f1f2i16;_i.resize(4*Yt),_i._trim();let tr=0;for(const lr of Vt)for(let yr=0;yr<lr.circleArray.length/4;yr++){const _r=4*yr,vr=lr.circleArray[_r+0],kr=lr.circleArray[_r+1],Sr=lr.circleArray[_r+2],Lr=lr.circleArray[_r+3];_i.emplace(tr++,vr,kr,Sr,Lr,0),_i.emplace(tr++,vr,kr,Sr,Lr,1),_i.emplace(tr++,vr,kr,Sr,Lr,2),_i.emplace(tr++,vr,kr,Sr,Lr,3)}(!Kp||Kp.length<2*Yt)&&(Kp=function(lr){const yr=2*lr,_r=new _.StructArrayLayout3ui6;_r.resize(yr),_r._trim();for(let vr=0;vr<yr;vr++){const kr=6*vr;_r.uint16[kr+0]=4*vr+0,_r.uint16[kr+1]=4*vr+1,_r.uint16[kr+2]=4*vr+2,_r.uint16[kr+3]=4*vr+2,_r.uint16[kr+4]=4*vr+3,_r.uint16[kr+5]=4*vr+0}return _r}(Yt));const jt=xt.createIndexBuffer(Kp,!0),Qt=xt.createVertexBuffer(_i,_.collisionCircleLayout.members,!0);for(const lr of Vt){const yr={u_matrix:lr.transform,u_inv_matrix:lr.invTransform,u_camera_to_center_distance:(sr=$t).getCameraToCenterDistance(lr.projection),u_viewport_size:[sr.width,sr.height]};er.draw(xt,kt.TRIANGLES,_.DepthMode.disabled,_.StencilMode.disabled,at.colorModeForRenderPass(),_.CullFaceMode.disabled,yr,nt.id,Qt,jt,_.SegmentVector.simpleSegment(0,2*lr.circleOffset,lr.circleArray.length,lr.circleArray.length/2),null,$t.zoom)}var sr;Qt.destroy(),jt.destroy()}const w0=_.create();function ly({width:at,height:et,anchor:nt,textOffset:ct,textScale:dt},ft){const{horizontalAlign:_t,verticalAlign:xt}=_.getAnchorAlignment(nt),kt=-(_t-.5)*at,$t=-(xt-.5)*et,Dt=_.evaluateVariableOffset(nt,ct);return new _.Point((kt/dt+Dt[0])*ft,($t/dt+Dt[1])*ft)}function Fv(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt){const Vt=at.text.placedSymbolArray,Yt=at.text.dynamicLayoutVertexArray,Jt=at.icon.dynamicLayoutVertexArray,er={},_i=at.getProjection(),tr=xo(xt,_i,ft),jt=ft.elevation,Qt=_i.upVectorScale(xt.canonical,ft.center.lat,ft.worldSize).metersToTile;Yt.clear();for(let sr=0;sr<Vt.length;sr++){const lr=Vt.get(sr),{tileAnchorX:yr,tileAnchorY:_r,numGlyphs:vr}=lr,kr=lr.hidden||!lr.crossTileID||at.allowVerticalPlacement&&!lr.placedOrientation?null:ct[lr.crossTileID];if(kr){let Sr=0,Lr=0,Jr=0;if(jt){const nn=jt?jt.getAtTileOffset(xt,yr,_r):0,[Sn,Dn,_n]=_i.upVector(xt.canonical,yr,_r);Sr=nn*Sn*Qt,Lr=nn*Dn*Qt,Jr=nn*_n*Qt}let[Ar,Hr,Or,Qr]=os(lr.projectedAnchorX+Sr,lr.projectedAnchorY+Lr,lr.projectedAnchorZ+Jr,nt?tr:_t);const Mr=l0(ft.getCameraToCenterDistance(_i),Qr);let Gr=dt.evaluateSizeForFeature(at.textSizeData,$t,lr)*Mr/_.ONE_EM;nt&&(Gr*=at.tilePixelRatio/kt);const rn=ly(kr,Gr);nt?({x:Ar,y:Hr,z:Or}=_i.projectTilePoint(yr+rn.x,_r+rn.y,xt.canonical),[Ar,Hr,Or]=os(Ar+Sr,Hr+Lr,Or+Jr,_t)):(et&&rn._rotate(-ft.angle),Ar+=rn.x,Hr+=rn.y,Or=0);const Zr=at.allowVerticalPlacement&&lr.placedOrientation===_.WritingMode.vertical?Math.PI/2:0;for(let nn=0;nn<vr;nn++)_.addDynamicAttributes(Yt,Ar,Hr,Or,Zr);Dt&&lr.associatedIconIndex>=0&&(er[lr.associatedIconIndex]={x:Ar,y:Hr,z:Or,angle:Zr})}else Zs(vr,Yt)}if(Dt){Jt.clear();const sr=at.icon.placedSymbolArray;for(let lr=0;lr<sr.length;lr++){const yr=sr.get(lr),{numGlyphs:_r}=yr,vr=er[lr];if(yr.hidden||!vr)Zs(_r,Jt);else{const{x:kr,y:Sr,z:Lr,angle:Jr}=vr;for(let Ar=0;Ar<_r;Ar++)_.addDynamicAttributes(Jt,kr,Sr,Lr,Jr)}}at.icon.dynamicLayoutVertexBuffer.updateData(Jt)}at.text.dynamicLayoutVertexBuffer.updateData(Yt)}function cy(at,et,nt){return nt.iconsInText&&et?"symbolTextAndIcon":at?"symbolSDF":"symbolIcon"}function E0(at,et,nt,ct,dt,ft,_t,xt,kt,$t,Dt,Vt){const Yt=at.context,Jt=Yt.gl,er=at.transform,_i=xt==="map",tr=kt==="map",jt=_i&&nt.layout.get("symbol-placement")!=="point",Qt=_i&&!tr&&!jt,sr=nt.layout.get("symbol-sort-key").constantOr(1)!==void 0;let lr=!1;const yr=at.depthModeForSublayer(0,_.DepthMode.ReadOnly),_r=[_.mercatorXfromLng(er.center.lng),_.mercatorYfromLat(er.center.lat)],vr=nt.layout.get("text-variable-anchor"),kr=er.projection.name==="globe",Sr=[],Lr=[0,-1,0];let Jr=Lr;!kr&&!er.mercatorFromTransition||_i||(Jr=function(Ar){const Hr=Ar._camera.getWorldToCamera(Ar.worldSize,1),Or=_.multiply([],Hr,Ar.globeMatrix);_.invert(Or,Or);const Qr=[0,0,0],Mr=[0,1,0,0];return _.transformMat4$1(Mr,Mr,Or),Qr[0]=Mr[0],Qr[1]=Mr[1],Qr[2]=Mr[2],_.normalize(Qr,Qr),Qr}(er));for(const Ar of ct){const Hr=et.getTile(Ar),Or=Hr.getBucket(nt);if(!Or||Or.projection.name==="mercator"&&kr)continue;const Qr=dt?Or.text:Or.icon;if(!Qr||Or.fullyClipped||!Qr.segments.get().length)continue;const Mr=Qr.programConfigurations.get(nt.id),Gr=dt||Or.sdfIcons,rn=dt?Or.textSizeData:Or.iconSizeData,Zr=tr||er.pitch!==0,nn=_.evaluateSizeForZoom(rn,er.zoom);let Sn,Dn,_n,Pn,qn=[0,0],Un=null;if(dt)Dn=Hr.glyphAtlasTexture,_n=Jt.LINEAR,Sn=Hr.glyphAtlasTexture.size,Or.iconsInText&&(qn=Hr.imageAtlasTexture.size,Un=Hr.imageAtlasTexture,Pn=Zr||at.options.rotating||at.options.zooming||rn.kind==="composite"||rn.kind==="camera"?Jt.LINEAR:Jt.NEAREST);else{const $l=nt.layout.get("icon-size").constantOr(0)!==1||Or.iconsNeedLinear;Dn=Hr.imageAtlasTexture,_n=Gr||at.options.rotating||at.options.zooming||$l||Zr?Jt.LINEAR:Jt.NEAREST,Sn=Hr.imageAtlasTexture.size}const wn=Or.projection.name==="globe",ro=wn?Jr:Lr,no=wn?_.globeToMercatorTransition(er.zoom):0,oo=xo(Ar,Or.getProjection(),er),so=er.calculatePixelsToTileUnitsMatrix(Hr),_s=jr(oo,Hr.tileID.canonical,tr,_i,er,Or.getProjection(),so),as=at.terrain&&tr&&jt?_.invert(_.create(),_s):w0,Us=Uo(oo,Hr.tileID.canonical,tr,_i,er,Or.getProjection(),so),$a=vr&&Or.hasTextData(),bo=nt.layout.get("icon-text-fit")!=="none"&&$a&&Or.hasIconData();if(jt){const $l=er.elevation,Ql=$l?$l.getAtTileOffsetFunc(Ar,er.center.lat,er.worldSize,Or.getProjection()):null,fu=Cl(oo,Hr.tileID.canonical,tr,_i,er,Or.getProjection(),so);zm(Or,oo,at,dt,fu,Us,tr,$t,Ql,Ar)}const ao=jt||dt&&vr||bo,eo=at.translatePosMatrix(oo,Hr,ft,_t),Go=ao?w0:_s,Es=at.translatePosMatrix(Us,Hr,ft,_t,!0),_o=Or.getProjection().createInversionMatrix(er,Ar.canonical),Ps=[];at.terrainRenderModeElevated()&&tr&&Ps.push("PITCH_WITH_MAP_TERRAIN"),wn&&Ps.push("PROJECTION_GLOBE_VIEW"),ao&&Ps.push("PROJECTED_POS_ON_VIEWPORT");const dm=Gr&&nt.paint.get(dt?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let pu;pu=Gr?Or.iconsInText?b0(rn.kind,nn,Qt,tr,at,eo,Go,Es,Sn,qn,Ar,no,_r,_o,ro,Or.getProjection()):Yp(rn.kind,nn,Qt,tr,at,eo,Go,Es,dt,Sn,!0,Ar,no,_r,_o,ro,Or.getProjection()):oy(rn.kind,nn,Qt,tr,at,eo,Go,Es,dt,Sn,Ar,no,_r,_o,ro,Or.getProjection());const Ep={program:at.useProgram(cy(Gr,dt,Or),Mr,Ps),buffers:Qr,uniformValues:pu,atlasTexture:Dn,atlasTextureIcon:Un,atlasInterpolation:_n,atlasInterpolationIcon:Pn,isSDF:Gr,hasHalo:dm,tile:Hr,labelPlaneMatrixInv:as};if(sr&&Or.canOverlap){lr=!0;const $l=Qr.segments.get();for(const Ql of $l)Sr.push({segments:new _.SegmentVector([Ql]),sortKey:Ql.sortKey,state:Ep})}else Sr.push({segments:Qr.segments,sortKey:0,state:Ep})}lr&&Sr.sort((Ar,Hr)=>Ar.sortKey-Hr.sortKey);for(const Ar of Sr){const Hr=Ar.state;if(at.terrain&&at.terrain.setupElevationDraw(Hr.tile,Hr.program,{useDepthForOcclusion:!kr,labelPlaneMatrixInv:Hr.labelPlaneMatrixInv}),Yt.activeTexture.set(Jt.TEXTURE0),Hr.atlasTexture.bind(Hr.atlasInterpolation,Jt.CLAMP_TO_EDGE),Hr.atlasTextureIcon&&(Yt.activeTexture.set(Jt.TEXTURE1),Hr.atlasTextureIcon&&Hr.atlasTextureIcon.bind(Hr.atlasInterpolationIcon,Jt.CLAMP_TO_EDGE)),Hr.isSDF){const Or=Hr.uniformValues;Hr.hasHalo&&(Or.u_is_halo=1,pp(Hr.buffers,Ar.segments,nt,at,Hr.program,yr,Dt,Vt,Or)),Or.u_is_halo=0}pp(Hr.buffers,Ar.segments,nt,at,Hr.program,yr,Dt,Vt,Hr.uniformValues)}}function pp(at,et,nt,ct,dt,ft,_t,xt,kt){const $t=ct.context,Dt=[at.dynamicLayoutVertexBuffer,at.opacityVertexBuffer,at.globeExtVertexBuffer];dt.draw($t,$t.gl.TRIANGLES,ft,_t,xt,_.CullFaceMode.disabled,kt,nt.id,at.layoutVertexBuffer,at.indexBuffer,et,nt.paint,ct.transform.zoom,at.programConfigurations.get(nt.id),Dt)}function S0(at,et,nt,ct,dt,ft,_t){const xt=at.context.gl,kt=nt.paint.get("fill-pattern"),$t=kt&&kt.constantOr(1);let Dt,Vt,Yt,Jt,er;_t?(Vt=$t&&!nt.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Dt=xt.LINES):(Vt=$t?"fillPattern":"fill",Dt=xt.TRIANGLES);for(const _i of ct){const tr=et.getTile(_i);if($t&&!tr.patternsLoaded())continue;const jt=tr.getBucket(nt);if(!jt)continue;at.prepareDrawTile();const Qt=jt.programConfigurations.get(nt.id),sr=at.useProgram(Vt,Qt);$t&&(at.context.activeTexture.set(xt.TEXTURE0),tr.imageAtlasTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),Qt.updatePaintBuffers());const lr=kt.constantOr(null);if(lr&&tr.imageAtlas){const _r=tr.imageAtlas.patternPositions[lr.toString()];_r&&Qt.setConstantPatternPositions(_r)}const yr=at.translatePosMatrix(_i.projMatrix,tr,nt.paint.get("fill-translate"),nt.paint.get("fill-translate-anchor"));if(_t){Jt=jt.indexBuffer2,er=jt.segments2;const _r=at.terrain&&at.terrain.renderingToTexture?at.terrain.drapeBufferSize:[xt.drawingBufferWidth,xt.drawingBufferHeight];Yt=Vt==="fillOutlinePattern"&&$t?$v(yr,at,tr,_r):Dv(yr,_r)}else Jt=jt.indexBuffer,er=jt.segments,Yt=$t?_g(yr,at,tr):cu(yr);at.prepareDrawProgram(at.context,sr,_i.toUnwrapped()),sr.draw(at.context,Dt,dt,at.stencilModeForClipping(_i),ft,_.CullFaceMode.disabled,Yt,nt.id,jt.layoutVertexBuffer,Jt,er,nt.paint,at.transform.zoom,Qt)}}function Qp(at,et,nt,ct,dt,ft,_t){const xt=at.context,kt=xt.gl,$t=at.transform,Dt=nt.paint.get("fill-extrusion-pattern"),Vt=Dt.constantOr(1),Yt=nt.paint.get("fill-extrusion-opacity"),Jt=[nt.paint.get("fill-extrusion-ambient-occlusion-intensity"),nt.paint.get("fill-extrusion-ambient-occlusion-radius")],er=nt.layout.get("fill-extrusion-edge-radius"),_i=er>0&&!nt.paint.get("fill-extrusion-rounded-roof"),tr=_i?0:er,jt=$t.projection.name==="globe"?_.fillExtrusionHeightLift():0,Qt=$t.projection.name==="globe",sr=Qt?_.globeToMercatorTransition($t.zoom):0,lr=[_.mercatorXfromLng($t.center.lng),_.mercatorYfromLat($t.center.lat)],yr=[];Qt&&yr.push("PROJECTION_GLOBE_VIEW"),Jt[0]>0&&yr.push("FAUX_AO"),_i&&yr.push("ZERO_ROOF_RADIUS");for(const _r of ct){const vr=et.getTile(_r),kr=vr.getBucket(nt);if(!kr||kr.projection.name!==$t.projection.name)continue;const Sr=kr.programConfigurations.get(nt.id),Lr=at.useProgram(Vt?"fillExtrusionPattern":"fillExtrusion",Sr,yr);if(at.terrain){const Gr=at.terrain;if(at.style.terrainSetForDrapingOnly())Gr.setupElevationDraw(vr,Lr,{useMeterToDem:!0});else{if(!kr.enableTerrain)continue;if(Gr.setupElevationDraw(vr,Lr,{useMeterToDem:!0}),T0(xt,et,_r,kr,nt,Gr),!kr.centroidVertexBuffer){const rn=Lr.attributes.a_centroid_pos;rn!==void 0&&kt.vertexAttrib2f(rn,0,0)}}}Vt&&(at.context.activeTexture.set(kt.TEXTURE0),vr.imageAtlasTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE),Sr.updatePaintBuffers());const Jr=Dt.constantOr(null);if(Jr&&vr.imageAtlas){const Gr=vr.imageAtlas.patternPositions[Jr.toString()];Gr&&Sr.setConstantPatternPositions(Gr)}const Ar=at.translatePosMatrix(_r.projMatrix,vr,nt.paint.get("fill-extrusion-translate"),nt.paint.get("fill-extrusion-translate-anchor")),Hr=$t.projection.createInversionMatrix($t,_r.canonical),Or=nt.paint.get("fill-extrusion-vertical-gradient"),Qr=Vt?v0(Ar,at,Or,Yt,Jt,tr,_r,vr,jt,sr,lr,Hr):Jm(Ar,at,Or,Yt,Jt,tr,_r,jt,sr,lr,Hr);at.prepareDrawProgram(xt,Lr,_r.toUnwrapped());const Mr=[];at.terrain&&Mr.push(kr.centroidVertexBuffer),Qt&&Mr.push(kr.layoutVertexExtBuffer),Lr.draw(xt,xt.gl.TRIANGLES,dt,ft,_t,_.CullFaceMode.backCCW,Qr,nt.id,kr.layoutVertexBuffer,kr.indexBuffer,kr.segments,nt.paint,at.transform.zoom,Sr,Mr)}}function T0(at,et,nt,ct,dt,ft){const _t=[jt=>{let Qt=jt.canonical.x-1,sr=jt.wrap;return Qt<0&&(Qt=(1<<jt.canonical.z)-1,sr--),new _.OverscaledTileID(jt.overscaledZ,sr,jt.canonical.z,Qt,jt.canonical.y)},jt=>{let Qt=jt.canonical.x+1,sr=jt.wrap;return Qt===1<<jt.canonical.z&&(Qt=0,sr++),new _.OverscaledTileID(jt.overscaledZ,sr,jt.canonical.z,Qt,jt.canonical.y)},jt=>new _.OverscaledTileID(jt.overscaledZ,jt.wrap,jt.canonical.z,jt.canonical.x,(jt.canonical.y===0?1<<jt.canonical.z:jt.canonical.y)-1),jt=>new _.OverscaledTileID(jt.overscaledZ,jt.wrap,jt.canonical.z,jt.canonical.x,jt.canonical.y===(1<<jt.canonical.z)-1?0:jt.canonical.y+1)],xt=jt=>{const Qt=et.getSource().minzoom,sr=yr=>{const _r=et.getTileByID(yr);if(_r&&_r.hasData())return _r.getBucket(dt)},lr=[0,-1,1];for(const yr of lr){if(jt.overscaledZ+yr<Qt)continue;const _r=sr(jt.calculateScaledKey(jt.overscaledZ+yr));if(_r)return _r}},kt=[0,0,0],$t=(jt,Qt)=>(kt[0]=Math.min(jt.min.y,Qt.min.y),kt[1]=Math.max(jt.max.y,Qt.max.y),kt[2]=_.EXTENT-Qt.min.x>jt.max.x?Qt.min.x-_.EXTENT:jt.max.x,kt),Dt=(jt,Qt)=>(kt[0]=Math.min(jt.min.x,Qt.min.x),kt[1]=Math.max(jt.max.x,Qt.max.x),kt[2]=_.EXTENT-Qt.min.y>jt.max.y?Qt.min.y-_.EXTENT:jt.max.y,kt),Vt=[(jt,Qt)=>$t(jt,Qt),(jt,Qt)=>$t(Qt,jt),(jt,Qt)=>Dt(jt,Qt),(jt,Qt)=>Dt(Qt,jt)],Yt=new _.Point(0,0);let Jt,er,_i;const tr=(jt,Qt,sr,lr,yr)=>{const _r=[[lr?sr:jt,lr?jt:sr,0],[lr?sr:Qt,lr?Qt:sr,0]],vr=yr<0?_.EXTENT+yr:yr,kr=[lr?vr:(jt+Qt)/2,lr?(jt+Qt)/2:vr,0];return sr===0&&yr<0||sr!==0&&yr>0?ft.getForTilePoints(_i,[kr],!0,er):_r.push(kr),ft.getForTilePoints(nt,_r,!0,Jt),Math.max(_r[0][2],_r[1][2],kr[2])/ft.exaggeration()};for(let jt=0;jt<4;jt++){const Qt=(jt<2?1:5)-jt,sr=ct.borders[jt];if(sr.length===0)continue;const lr=_i=_t[jt](nt),yr=xt(lr);if(!(yr&&yr instanceof _.FillExtrusionBucket&&yr.enableTerrain)||ct.borderDoneWithNeighborZ[jt]===yr.canonical.z&&yr.borderDoneWithNeighborZ[Qt]===ct.canonical.z||(er=ft.findDEMTileFor(lr),!er||!er.dem))continue;if(!Jt){const Sr=ft.findDEMTileFor(nt);if(!Sr||!Sr.dem)return;Jt=Sr}const _r=yr.borders[Qt];let vr=0;const kr=yr.borderDoneWithNeighborZ[Qt]!==ct.canonical.z;if(ct.canonical.z===yr.canonical.z){for(let Sr=0;Sr<sr.length;Sr++){const Lr=ct.featuresOnBorder[sr[Sr]],Jr=Lr.borders[jt];let Ar;for(;vr<_r.length&&(Ar=yr.featuresOnBorder[_r[vr]],!(Ar.borders[Qt][1]>Jr[0]+3));)kr&&yr.encodeCentroid(void 0,Ar,!1),vr++;if(Ar&&vr<_r.length){const Hr=vr;let Or=0;for(;!(Ar.borders[Qt][0]>Jr[1]-3)&&(Or++,++vr!==_r.length);)Ar=yr.featuresOnBorder[_r[vr]];if(Ar=yr.featuresOnBorder[_r[Hr]],Lr.intersectsCount()>1||Ar.intersectsCount()>1||Or!==1){Or!==1&&(vr=Hr),ct.encodeCentroid(void 0,Lr,!1),kr&&yr.encodeCentroid(void 0,Ar,!1);continue}const Qr=Vt[jt](Lr,Ar),Mr=jt%2?_.EXTENT-1:0;Yt.x=tr(Qr[0],Math.min(_.EXTENT-1,Qr[1]),Mr,jt<2,Qr[2]),Yt.y=0,ct.encodeCentroid(Yt,Lr,!1),kr&&yr.encodeCentroid(Yt,Ar,!1)}else ct.encodeCentroid(void 0,Lr,!1)}ct.borderDoneWithNeighborZ[jt]=yr.canonical.z,ct.needsCentroidUpdate=!0,kr&&(yr.borderDoneWithNeighborZ[Qt]=ct.canonical.z,yr.needsCentroidUpdate=!0)}else{for(const Sr of sr)ct.encodeCentroid(void 0,ct.featuresOnBorder[Sr],!1);if(kr){for(const Sr of _r)yr.encodeCentroid(void 0,yr.featuresOnBorder[Sr],!1);yr.borderDoneWithNeighborZ[Qt]=ct.canonical.z,yr.needsCentroidUpdate=!0}ct.borderDoneWithNeighborZ[jt]=yr.canonical.z,ct.needsCentroidUpdate=!0}}(ct.needsCentroidUpdate||!ct.centroidVertexBuffer&&ct.centroidVertexArray.length!==0)&&ct.uploadCentroid(at)}const Mu=new _.Color(1,0,0,1),Vv=new _.Color(0,1,0,1),Nv=new _.Color(0,0,1,1),jv=new _.Color(1,0,1,1),Uv=new _.Color(0,1,1,1);function Gv(at,et,nt){const ct=at.context,dt=at.transform,ft=ct.gl,_t=dt.projection.name==="globe",xt=_t?["PROJECTION_GLOBE_VIEW"]:null;let kt=nt.projMatrix;if(_t&&_.globeToMercatorTransition(dt.zoom)>0){const Lr=_.transitionTileAABBinECEF(nt.canonical,dt),Jr=_.globeDenormalizeECEF(Lr);kt=_.multiply(new Float32Array(16),dt.globeMatrix,Jr),_.multiply(kt,dt.projMatrix,kt)}const $t=at.useProgram("debug",null,xt),Dt=et.getTileByID(nt.key);at.terrain&&at.terrain.setupElevationDraw(Dt,$t);const Vt=_.DepthMode.disabled,Yt=_.StencilMode.disabled,Jt=at.colorModeForRenderPass(),er="$debug";ct.activeTexture.set(ft.TEXTURE0),at.emptyTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),_t?Dt._makeGlobeTileDebugBuffers(at.context,dt):Dt._makeDebugTileBoundsBuffers(at.context,dt.projection);const _i=Dt._tileDebugBuffer||at.debugBuffer,tr=Dt._tileDebugIndexBuffer||at.debugIndexBuffer,jt=Dt._tileDebugSegments||at.debugSegments;$t.draw(ct,ft.LINE_STRIP,Vt,Yt,Jt,_.CullFaceMode.disabled,Zp(kt,_.Color.red),er,_i,tr,jt,null,null,null,[Dt._globeTileDebugBorderBuffer]);const Qt=Dt.latestRawTileData,sr=Math.floor((Qt&&Qt.byteLength||0)/1024),lr=et.getTile(nt).tileSize,yr=512/Math.min(lr,512)*(nt.overscaledZ/dt.zoom)*.5;let _r=nt.canonical.toString();nt.overscaledZ!==nt.canonical.z&&(_r+=` => ${nt.overscaledZ}`),_r+=` ${sr}kb`,function(Lr,Jr){Lr.initDebugOverlayCanvas();const Ar=Lr.debugOverlayCanvas,Hr=Lr.context.gl,Or=Lr.debugOverlayCanvas.getContext("2d");Or.clearRect(0,0,Ar.width,Ar.height),Or.shadowColor="white",Or.shadowBlur=2,Or.lineWidth=1.5,Or.strokeStyle="white",Or.textBaseline="top",Or.font="bold 36px Open Sans, sans-serif",Or.fillText(Jr,5,5),Or.strokeText(Jr,5,5),Lr.debugOverlayTexture.update(Ar),Lr.debugOverlayTexture.bind(Hr.LINEAR,Hr.CLAMP_TO_EDGE)}(at,_r);const vr=Dt._tileDebugTextBuffer||at.debugBuffer,kr=Dt._tileDebugTextIndexBuffer||at.quadTriangleIndexBuffer,Sr=Dt._tileDebugTextSegments||at.debugSegments;$t.draw(ct,ft.TRIANGLES,Vt,Yt,_.ColorMode.alphaBlended,_.CullFaceMode.disabled,Zp(kt,_.Color.transparent,yr),er,vr,kr,Sr,null,null,null,[Dt._globeTileDebugTextBuffer])}function k0(at,et,nt,ct){Lu(at,0,et+nt/2,at.transform.width,nt,ct)}function Jp(at,et,nt,ct){Lu(at,et-nt/2,0,nt,at.transform.height,ct)}function Lu(at,et,nt,ct,dt,ft){const _t=at.context,xt=_t.gl;xt.enable(xt.SCISSOR_TEST),xt.scissor(et*_.exported.devicePixelRatio,nt*_.exported.devicePixelRatio,ct*_.exported.devicePixelRatio,dt*_.exported.devicePixelRatio),_t.clear({color:ft}),xt.disable(xt.SCISSOR_TEST)}const C0=_.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:P0}=C0;function Rl(at,et,nt,ct){at.emplaceBack(et,nt,ct)}class _f{constructor(et){this.vertexArray=new _.StructArrayLayout3f12,this.indices=new _.StructArrayLayout3ui6,Rl(this.vertexArray,-1,-1,1),Rl(this.vertexArray,1,-1,1),Rl(this.vertexArray,-1,1,1),Rl(this.vertexArray,1,1,1),Rl(this.vertexArray,-1,-1,-1),Rl(this.vertexArray,1,-1,-1),Rl(this.vertexArray,-1,1,-1),Rl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=et.createVertexBuffer(this.vertexArray,P0),this.indexBuffer=et.createIndexBuffer(this.indices),this.segment=_.SegmentVector.simpleSegment(0,0,36,12)}}function Ns(at,et,nt,ct,dt,ft){const _t=at.gl,xt=et.paint.get("sky-atmosphere-color"),kt=et.paint.get("sky-atmosphere-halo-color"),$t=et.paint.get("sky-atmosphere-sun-intensity"),Dt=((Vt,Yt,Jt,er,_i)=>({u_matrix_3f:Vt,u_sun_direction:Yt,u_sun_intensity:Jt,u_color_tint_r:[er.r,er.g,er.b,er.a],u_color_tint_m:[_i.r,_i.g,_i.b,_i.a],u_luminance:5e-5}))(_.fromMat4(_.create$1(),ct),dt,$t,xt,kt);_t.framebufferTexture2D(_t.FRAMEBUFFER,_t.COLOR_ATTACHMENT0,_t.TEXTURE_CUBE_MAP_POSITIVE_X+ft,et.skyboxTexture,0),nt.draw(at,_t.TRIANGLES,_.DepthMode.disabled,_.StencilMode.disabled,_.ColorMode.unblended,_.CullFaceMode.frontCW,Dt,"skyboxCapture",et.skyboxGeometry.vertexBuffer,et.skyboxGeometry.indexBuffer,et.skyboxGeometry.segment)}const fp=_.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class A0{constructor(et){const nt=new _.StructArrayLayout5f20;nt.emplaceBack(-1,1,1,0,0),nt.emplaceBack(1,1,1,1,0),nt.emplaceBack(1,-1,1,1,1),nt.emplaceBack(-1,-1,1,0,1);const ct=new _.StructArrayLayout3ui6;ct.emplaceBack(0,1,2),ct.emplaceBack(2,3,0),this.vertexBuffer=et.createVertexBuffer(nt,fp.members),this.indexBuffer=et.createIndexBuffer(ct),this.segments=_.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const hu={symbol:function(at,et,nt,ct,dt){if(at.renderPass!=="translucent")return;const ft=_.StencilMode.disabled,_t=at.colorModeForRenderPass();nt.layout.get("text-variable-anchor")&&function(xt,kt,$t,Dt,Vt,Yt,Jt){const er=kt.transform,_i=Vt==="map",tr=Yt==="map";for(const jt of xt){const Qt=Dt.getTile(jt),sr=Qt.getBucket($t);if(!sr||!sr.text||!sr.text.segments.get().length)continue;const lr=_.evaluateSizeForZoom(sr.textSizeData,er.zoom),yr=xo(jt,sr.getProjection(),er),_r=er.calculatePixelsToTileUnitsMatrix(Qt),vr=jr(yr,Qt.tileID.canonical,tr,_i,er,sr.getProjection(),_r),kr=$t.layout.get("icon-text-fit")!=="none"&&sr.hasIconData();if(lr){const Sr=Math.pow(2,er.zoom-Qt.tileID.overscaledZ);Fv(sr,_i,tr,Jt,_.symbolSize,er,vr,jt,Sr,lr,kr)}}}(ct,at,nt,et,nt.layout.get("text-rotation-alignment"),nt.layout.get("text-pitch-alignment"),dt),nt.paint.get("icon-opacity").constantOr(1)!==0&&E0(at,et,nt,ct,!1,nt.paint.get("icon-translate"),nt.paint.get("icon-translate-anchor"),nt.layout.get("icon-rotation-alignment"),nt.layout.get("icon-pitch-alignment"),nt.layout.get("icon-keep-upright"),ft,_t),nt.paint.get("text-opacity").constantOr(1)!==0&&E0(at,et,nt,ct,!0,nt.paint.get("text-translate"),nt.paint.get("text-translate-anchor"),nt.layout.get("text-rotation-alignment"),nt.layout.get("text-pitch-alignment"),nt.layout.get("text-keep-upright"),ft,_t),et.map.showCollisionBoxes&&(dp(at,et,nt,ct,nt.paint.get("text-translate"),nt.paint.get("text-translate-anchor"),!0),dp(at,et,nt,ct,nt.paint.get("icon-translate"),nt.paint.get("icon-translate-anchor"),!1))},circle:function(at,et,nt,ct){if(at.renderPass!=="translucent")return;const dt=nt.paint.get("circle-opacity"),ft=nt.paint.get("circle-stroke-width"),_t=nt.paint.get("circle-stroke-opacity"),xt=nt.layout.get("circle-sort-key").constantOr(1)!==void 0;if(dt.constantOr(1)===0&&(ft.constantOr(1)===0||_t.constantOr(1)===0))return;const kt=at.context,$t=kt.gl,Dt=at.transform,Vt=at.depthModeForSublayer(0,_.DepthMode.ReadOnly),Yt=_.StencilMode.disabled,Jt=at.colorModeForRenderPass(),er=Dt.projection.name==="globe",_i=[_.mercatorXfromLng(Dt.center.lng),_.mercatorYfromLat(Dt.center.lat)],tr=[];for(let Qt=0;Qt<ct.length;Qt++){const sr=ct[Qt],lr=et.getTile(sr),yr=lr.getBucket(nt);if(!yr||yr.projection.name!==Dt.projection.name)continue;const _r=yr.programConfigurations.get(nt.id),vr=ty(nt);er&&vr.push("PROJECTION_GLOBE_VIEW");const kr=at.useProgram("circle",_r,vr),Sr=yr.layoutVertexBuffer,Lr=yr.globeExtVertexBuffer,Jr=yr.indexBuffer,Ar=Dt.projection.createInversionMatrix(Dt,sr.canonical),Hr={programConfiguration:_r,program:kr,layoutVertexBuffer:Sr,globeExtVertexBuffer:Lr,indexBuffer:Jr,uniformValues:ey(at,sr,lr,Ar,_i,nt),tile:lr};if(xt){const Or=yr.segments.get();for(const Qr of Or)tr.push({segments:new _.SegmentVector([Qr]),sortKey:Qr.sortKey,state:Hr})}else tr.push({segments:yr.segments,sortKey:0,state:Hr})}xt&&tr.sort((Qt,sr)=>Qt.sortKey-sr.sortKey);const jt={useDepthForOcclusion:!er};for(const Qt of tr){const{programConfiguration:sr,program:lr,layoutVertexBuffer:yr,globeExtVertexBuffer:_r,indexBuffer:vr,uniformValues:kr,tile:Sr}=Qt.state,Lr=Qt.segments;at.terrain&&at.terrain.setupElevationDraw(Sr,lr,jt),at.prepareDrawProgram(kt,lr,Sr.tileID.toUnwrapped()),lr.draw(kt,$t.TRIANGLES,Vt,Yt,Jt,_.CullFaceMode.disabled,kr,nt.id,yr,vr,Lr,nt.paint,Dt.zoom,sr,[_r])}},heatmap:function(at,et,nt,ct){if(nt.paint.get("heatmap-opacity")!==0)if(at.renderPass==="offscreen"){const dt=at.context,ft=dt.gl,_t=_.StencilMode.disabled,xt=new _.ColorMode([ft.ONE,ft.ONE],_.Color.transparent,[!0,!0,!0,!0]);(function(Jt,er,_i,tr){const jt=Jt.gl,Qt=er.width*tr,sr=er.height*tr;Jt.activeTexture.set(jt.TEXTURE1),Jt.viewport.set([0,0,Qt,sr]);let lr=_i.heatmapFbo;if(!lr||lr&&(lr.width!==Qt||lr.height!==sr)){lr&&lr.destroy();const yr=jt.createTexture();jt.bindTexture(jt.TEXTURE_2D,yr),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_S,jt.CLAMP_TO_EDGE),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_T,jt.CLAMP_TO_EDGE),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MIN_FILTER,jt.LINEAR),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MAG_FILTER,jt.LINEAR),lr=_i.heatmapFbo=Jt.createFramebuffer(Qt,sr,!1),function(_r,vr,kr,Sr,Lr,Jr){const Ar=_r.gl;Ar.texImage2D(Ar.TEXTURE_2D,0,_r.isWebGL2&&_r.extRenderToTextureHalfFloat?Ar.RGBA16F:Ar.RGBA,Lr,Jr,0,Ar.RGBA,_r.extRenderToTextureHalfFloat?_r.isWebGL2?Ar.HALF_FLOAT:_r.extTextureHalfFloat.HALF_FLOAT_OES:Ar.UNSIGNED_BYTE,null),Sr.colorAttachment.set(kr)}(Jt,0,yr,lr,Qt,sr)}else jt.bindTexture(jt.TEXTURE_2D,lr.colorAttachment.get()),Jt.bindFramebuffer.set(lr.framebuffer)})(dt,at,nt,at.transform.projection.name==="globe"?.5:.25),dt.clear({color:_.Color.transparent});const kt=at.transform,$t=kt.projection.name==="globe",Dt=$t?["PROJECTION_GLOBE_VIEW"]:null,Vt=$t?_.CullFaceMode.frontCCW:_.CullFaceMode.disabled,Yt=[_.mercatorXfromLng(kt.center.lng),_.mercatorYfromLat(kt.center.lat)];for(let Jt=0;Jt<ct.length;Jt++){const er=ct[Jt];if(et.hasRenderableParent(er))continue;const _i=et.getTile(er),tr=_i.getBucket(nt);if(!tr||tr.projection.name!==kt.projection.name)continue;const jt=tr.programConfigurations.get(nt.id),Qt=at.useProgram("heatmap",jt,Dt),{zoom:sr}=at.transform;at.terrain&&at.terrain.setupElevationDraw(_i,Qt),at.prepareDrawProgram(dt,Qt,er.toUnwrapped());const lr=kt.projection.createInversionMatrix(kt,er.canonical);Qt.draw(dt,ft.TRIANGLES,_.DepthMode.disabled,_t,xt,Vt,x0(at,er,_i,lr,Yt,sr,nt.paint.get("heatmap-intensity")),nt.id,tr.layoutVertexBuffer,tr.indexBuffer,tr.segments,nt.paint,at.transform.zoom,jt,$t?[tr.globeExtVertexBuffer]:null)}dt.viewport.set([0,0,at.width,at.height])}else at.renderPass==="translucent"&&(at.context.setColorMode(at.colorModeForRenderPass()),function(dt,ft){const _t=dt.context,xt=_t.gl,kt=ft.heatmapFbo;if(!kt)return;_t.activeTexture.set(xt.TEXTURE0),xt.bindTexture(xt.TEXTURE_2D,kt.colorAttachment.get()),_t.activeTexture.set(xt.TEXTURE1);let $t=ft.colorRampTexture;$t||($t=ft.colorRampTexture=new _.Texture(_t,ft.colorRamp,xt.RGBA)),$t.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),dt.useProgram("heatmapTexture").draw(_t,xt.TRIANGLES,_.DepthMode.disabled,_.StencilMode.disabled,dt.colorModeForRenderPass(),_.CullFaceMode.disabled,((Dt,Vt,Yt,Jt)=>({u_image:0,u_color_ramp:1,u_opacity:Vt.paint.get("heatmap-opacity")}))(0,ft),ft.id,dt.viewportBuffer,dt.quadTriangleIndexBuffer,dt.viewportSegments,ft.paint,dt.transform.zoom)}(at,nt))},line:function(at,et,nt,ct){if(at.renderPass!=="translucent")return;const dt=nt.paint.get("line-opacity"),ft=nt.paint.get("line-width");if(dt.constantOr(1)===0||ft.constantOr(1)===0)return;const _t=at.depthModeForSublayer(0,_.DepthMode.ReadOnly),xt=at.colorModeForRenderPass(),kt=at.terrain&&at.terrain.renderingToTexture?1:_.exported.devicePixelRatio,$t=nt.paint.get("line-dasharray"),Dt=$t.constantOr(1),Vt=nt.layout.get("line-cap"),Yt=nt.paint.get("line-pattern"),Jt=Yt.constantOr(1),er=nt.paint.get("line-gradient"),_i=Jt?"linePattern":"line",tr=at.context,jt=tr.gl,Qt=(lr=>{const yr=[];up(lr)&&yr.push("RENDER_LINE_DASH"),lr.paint.get("line-gradient")&&yr.push("RENDER_LINE_GRADIENT");const _r=lr.paint.get("line-trim-offset");_r[0]===0&&_r[1]===0||yr.push("RENDER_LINE_TRIM_OFFSET");const vr=lr.paint.get("line-pattern").constantOr(1),kr=lr.paint.get("line-opacity").constantOr(1)!==1;return!vr&&kr&&yr.push("RENDER_LINE_ALPHA_DISCARD"),yr})(nt);let sr=Qt.includes("RENDER_LINE_ALPHA_DISCARD");at.terrain&&at.terrain.clipOrMaskOverlapStencilType()&&(sr=!1);for(const lr of ct){const yr=et.getTile(lr);if(Jt&&!yr.patternsLoaded())continue;const _r=yr.getBucket(nt);if(!_r)continue;at.prepareDrawTile();const vr=_r.programConfigurations.get(nt.id),kr=at.useProgram(_i,vr,Qt),Sr=Yt.constantOr(null);if(Sr&&yr.imageAtlas){const Gr=yr.imageAtlas.patternPositions[Sr.toString()];Gr&&vr.setConstantPatternPositions(Gr)}const Lr=$t.constantOr(null),Jr=Vt.constantOr(null);if(!Jt&&Lr&&Jr&&yr.lineAtlas){const Gr=yr.lineAtlas.getDash(Lr,Jr);Gr&&vr.setConstantPatternPositions(Gr)}let[Ar,Hr]=nt.paint.get("line-trim-offset");(Jr==="round"||Jr==="square")&&Ar!==Hr&&(Ar===0&&(Ar-=1),Hr===1&&(Hr+=1));const Or=at.terrain?lr.projMatrix:null,Qr=Jt?hp(at,yr,nt,Or,kt):Ov(at,yr,nt,Or,_r.lineClipsArray.length,kt,[Ar,Hr]);if(er){const Gr=_r.gradients[nt.id];let rn=Gr.texture;if(nt.gradientVersion!==Gr.version){let Zr=256;if(nt.stepInterpolant){const nn=et.getSource().maxzoom,Sn=lr.canonical.z===nn?Math.ceil(1<<at.transform.maxZoom-lr.canonical.z):1;Zr=_.clamp(_.nextPowerOfTwo(_r.maxLineLength/_.EXTENT*1024*Sn),256,tr.maxTextureSize)}Gr.gradient=_.renderColorRamp({expression:nt.gradientExpression(),evaluationKey:"lineProgress",resolution:Zr,image:Gr.gradient||void 0,clips:_r.lineClipsArray}),Gr.texture?Gr.texture.update(Gr.gradient):Gr.texture=new _.Texture(tr,Gr.gradient,jt.RGBA),Gr.version=nt.gradientVersion,rn=Gr.texture}tr.activeTexture.set(jt.TEXTURE1),rn.bind(nt.stepInterpolant?jt.NEAREST:jt.LINEAR,jt.CLAMP_TO_EDGE)}Dt&&(tr.activeTexture.set(jt.TEXTURE0),yr.lineAtlasTexture.bind(jt.LINEAR,jt.REPEAT),vr.updatePaintBuffers()),Jt&&(tr.activeTexture.set(jt.TEXTURE0),yr.imageAtlasTexture.bind(jt.LINEAR,jt.CLAMP_TO_EDGE),vr.updatePaintBuffers()),at.prepareDrawProgram(tr,kr,lr.toUnwrapped());const Mr=Gr=>{kr.draw(tr,jt.TRIANGLES,_t,Gr,xt,_.CullFaceMode.disabled,Qr,nt.id,_r.layoutVertexBuffer,_r.indexBuffer,_r.segments,nt.paint,at.transform.zoom,vr,[_r.layoutVertexBuffer2])};if(sr){const Gr=at.stencilModeForClipping(lr).ref;Gr===0&&at.terrain&&tr.clear({stencil:0});const rn={func:jt.EQUAL,mask:255};Qr.u_alpha_discard_threshold=.8,Mr(new _.StencilMode(rn,Gr,255,jt.KEEP,jt.KEEP,jt.INVERT)),Qr.u_alpha_discard_threshold=0,Mr(new _.StencilMode(rn,Gr,255,jt.KEEP,jt.KEEP,jt.KEEP))}else Mr(at.stencilModeForClipping(lr))}sr&&(at.resetStencilClippingMasks(),at.terrain&&tr.clear({stencil:0}))},fill:function(at,et,nt,ct){const dt=nt.paint.get("fill-color"),ft=nt.paint.get("fill-opacity");if(ft.constantOr(1)===0)return;const _t=at.colorModeForRenderPass(),xt=nt.paint.get("fill-pattern"),kt=at.opaquePassEnabledForLayer()&&!xt.constantOr(1)&&dt.constantOr(_.Color.transparent).a===1&&ft.constantOr(0)===1?"opaque":"translucent";if(at.renderPass===kt){const $t=at.depthModeForSublayer(1,at.renderPass==="opaque"?_.DepthMode.ReadWrite:_.DepthMode.ReadOnly);S0(at,et,nt,ct,$t,_t,!1)}if(at.renderPass==="translucent"&&nt.paint.get("fill-antialias")){const $t=at.depthModeForSublayer(nt.getPaintProperty("fill-outline-color")?2:0,_.DepthMode.ReadOnly);S0(at,et,nt,ct,$t,_t,!0)}},"fill-extrusion":function(at,et,nt,ct){const dt=nt.paint.get("fill-extrusion-opacity");if(dt!==0&&at.renderPass==="translucent"){const ft=new _.DepthMode(at.context.gl.LEQUAL,_.DepthMode.ReadWrite,at.depthRangeFor3D);if(dt!==1||nt.paint.get("fill-extrusion-pattern").constantOr(1))Qp(at,et,nt,ct,ft,_.StencilMode.disabled,_.ColorMode.disabled),Qp(at,et,nt,ct,ft,at.stencilModeFor3D(),at.colorModeForRenderPass()),at.resetStencilClippingMasks();else{const _t=at.colorModeForRenderPass();Qp(at,et,nt,ct,ft,_.StencilMode.disabled,_t)}}},hillshade:function(at,et,nt,ct){if(at.renderPass!=="offscreen"&&at.renderPass!=="translucent")return;const dt=at.context,ft=at.depthModeForSublayer(0,_.DepthMode.ReadOnly),_t=at.colorModeForRenderPass(),xt=at.terrain&&at.terrain.renderingToTexture,[kt,$t]=at.renderPass!=="translucent"||xt?[{},ct]:at.stencilConfigForOverlap(ct);for(const Dt of $t){const Vt=et.getTile(Dt);if(Vt.needsHillshadePrepare&&at.renderPass==="offscreen")m0(at,Vt,nt,ft,_.StencilMode.disabled,_t);else if(at.renderPass==="translucent"){const Yt=xt&&at.terrain?at.terrain.stencilModeForRTTOverlap(Dt):kt[Dt.overscaledZ];f0(at,Dt,Vt,nt,ft,Yt,_t)}}dt.viewport.set([0,0,at.width,at.height]),at.resetStencilClippingMasks()},raster:function(at,et,nt,ct,dt,ft){if(at.renderPass!=="translucent"||nt.paint.get("raster-opacity")===0||!ct.length)return;const _t=at.context,xt=_t.gl,kt=et.getSource(),$t=at.useProgram("raster"),Dt=at.colorModeForRenderPass(),Vt=at.terrain&&at.terrain.renderingToTexture,[Yt,Jt]=kt instanceof Nn||Vt?[{},ct]:at.stencilConfigForOverlap(ct),er=Jt[Jt.length-1].overscaledZ,_i=!at.options.moving;for(const tr of Jt){const jt=Vt?_.DepthMode.disabled:at.depthModeForSublayer(tr.overscaledZ-er,nt.paint.get("raster-opacity")===1?_.DepthMode.ReadWrite:_.DepthMode.ReadOnly,xt.LESS),Qt=tr.toUnwrapped(),sr=et.getTile(tr);if(Vt&&(!sr||!sr.hasData()))continue;const lr=Vt?tr.projMatrix:at.transform.calculateProjMatrix(Qt,_i),yr=at.terrain&&Vt?at.terrain.stencilModeForRTTOverlap(tr):Yt[tr.overscaledZ],_r=ft?0:nt.paint.get("raster-fade-duration");sr.registerFadeDuration(_r);const vr=et.findLoadedParent(tr,0),kr=Ym(sr,vr,et,at.transform,_r);let Sr,Lr;at.terrain&&at.terrain.prepareDrawTile();const Jr=nt.paint.get("raster-resampling")==="nearest"?xt.NEAREST:xt.LINEAR;_t.activeTexture.set(xt.TEXTURE0),sr.texture.bind(Jr,xt.CLAMP_TO_EDGE),_t.activeTexture.set(xt.TEXTURE1),vr?(vr.texture.bind(Jr,xt.CLAMP_TO_EDGE),Sr=Math.pow(2,vr.tileID.overscaledZ-sr.tileID.overscaledZ),Lr=[sr.tileID.canonical.x*Sr%1,sr.tileID.canonical.y*Sr%1]):sr.texture.bind(Jr,xt.CLAMP_TO_EDGE),sr.texture.useMipmap&&_t.extTextureFilterAnisotropic&&at.transform.pitch>20&&xt.texParameterf(xt.TEXTURE_2D,_t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,_t.extTextureFilterAnisotropicMax);const Ar=ny(lr,Lr||[0,0],Sr||1,kr,nt,kt instanceof Nn?kt.perspectiveTransform:[0,0]);if(at.prepareDrawProgram(_t,$t,Qt),kt instanceof Nn)kt.boundsBuffer&&kt.boundsSegments&&$t.draw(_t,xt.TRIANGLES,jt,_.StencilMode.disabled,Dt,_.CullFaceMode.disabled,Ar,nt.id,kt.boundsBuffer,at.quadTriangleIndexBuffer,kt.boundsSegments);else{const{tileBoundsBuffer:Hr,tileBoundsIndexBuffer:Or,tileBoundsSegments:Qr}=at.getTileBoundsBuffers(sr);$t.draw(_t,xt.TRIANGLES,jt,yr,Dt,_.CullFaceMode.disabled,Ar,nt.id,Hr,Or,Qr)}}at.resetStencilClippingMasks()},background:function(at,et,nt,ct){const dt=nt.paint.get("background-color"),ft=nt.paint.get("background-opacity");if(ft===0)return;const _t=at.context,xt=_t.gl,kt=at.transform,$t=kt.tileSize,Dt=nt.paint.get("background-pattern");if(at.isPatternMissing(Dt))return;const Vt=!Dt&&dt.a===1&&ft===1&&at.opaquePassEnabledForLayer()?"opaque":"translucent";if(at.renderPass!==Vt)return;const Yt=_.StencilMode.disabled,Jt=at.depthModeForSublayer(0,Vt==="opaque"?_.DepthMode.ReadWrite:_.DepthMode.ReadOnly),er=at.colorModeForRenderPass(),_i=at.useProgram(Dt?"backgroundPattern":"background");let tr,jt=ct;jt||(tr=at.getBackgroundTiles(),jt=Object.values(tr).map(Qt=>Qt.tileID)),Dt&&(_t.activeTexture.set(xt.TEXTURE0),at.imageManager.bind(at.context));for(const Qt of jt){const sr=Qt.toUnwrapped(),lr=ct?Qt.projMatrix:at.transform.calculateProjMatrix(sr);at.prepareDrawTile();const yr=et?et.getTile(Qt):tr?tr[Qt.key]:new _.Tile(Qt,$t,kt.zoom,at),_r=Dt?Bv(lr,ft,at,Dt,{tileID:Qt,tileSize:$t}):sy(lr,ft,dt);at.prepareDrawProgram(_t,_i,sr);const{tileBoundsBuffer:vr,tileBoundsIndexBuffer:kr,tileBoundsSegments:Sr}=at.getTileBoundsBuffers(yr);_i.draw(_t,xt.TRIANGLES,Jt,Yt,er,_.CullFaceMode.disabled,_r,nt.id,vr,kr,Sr)}},sky:function(at,et,nt){const ct=at.transform,dt=ct.projection.name==="mercator"||ct.projection.name==="globe"?1:_.smoothstep(7,8,ct.zoom),ft=nt.paint.get("sky-opacity")*dt;if(ft===0)return;const _t=at.context,xt=nt.paint.get("sky-type"),kt=new _.DepthMode(_t.gl.LEQUAL,_.DepthMode.ReadOnly,[0,1]),$t=at.frameCounter/1e3%1;xt==="atmosphere"?at.renderPass==="offscreen"?nt.needsSkyboxCapture(at)&&(function(Dt,Vt,Yt,Jt){const er=Dt.context,_i=er.gl;let tr=Vt.skyboxFbo;if(!tr){tr=Vt.skyboxFbo=er.createFramebuffer(32,32,!1),Vt.skyboxGeometry=new _f(er),Vt.skyboxTexture=er.gl.createTexture(),_i.bindTexture(_i.TEXTURE_CUBE_MAP,Vt.skyboxTexture),_i.texParameteri(_i.TEXTURE_CUBE_MAP,_i.TEXTURE_WRAP_S,_i.CLAMP_TO_EDGE),_i.texParameteri(_i.TEXTURE_CUBE_MAP,_i.TEXTURE_WRAP_T,_i.CLAMP_TO_EDGE),_i.texParameteri(_i.TEXTURE_CUBE_MAP,_i.TEXTURE_MIN_FILTER,_i.LINEAR),_i.texParameteri(_i.TEXTURE_CUBE_MAP,_i.TEXTURE_MAG_FILTER,_i.LINEAR);for(let lr=0;lr<6;++lr)_i.texImage2D(_i.TEXTURE_CUBE_MAP_POSITIVE_X+lr,0,_i.RGBA,32,32,0,_i.RGBA,_i.UNSIGNED_BYTE,null)}er.bindFramebuffer.set(tr.framebuffer),er.viewport.set([0,0,32,32]);const jt=Vt.getCenter(Dt,!0),Qt=Dt.useProgram("skyboxCapture"),sr=new Float64Array(16);_.identity(sr),_.rotateY(sr,sr,.5*-Math.PI),Ns(er,Vt,Qt,sr,jt,0),_.identity(sr),_.rotateY(sr,sr,.5*Math.PI),Ns(er,Vt,Qt,sr,jt,1),_.identity(sr),_.rotateX(sr,sr,.5*-Math.PI),Ns(er,Vt,Qt,sr,jt,2),_.identity(sr),_.rotateX(sr,sr,.5*Math.PI),Ns(er,Vt,Qt,sr,jt,3),_.identity(sr),Ns(er,Vt,Qt,sr,jt,4),_.identity(sr),_.rotateY(sr,sr,Math.PI),Ns(er,Vt,Qt,sr,jt,5),er.viewport.set([0,0,Dt.width,Dt.height])}(at,nt),nt.markSkyboxValid(at)):at.renderPass==="sky"&&function(Dt,Vt,Yt,Jt,er){const _i=Dt.context,tr=_i.gl,jt=Dt.transform,Qt=Dt.useProgram("skybox");_i.activeTexture.set(tr.TEXTURE0),tr.bindTexture(tr.TEXTURE_CUBE_MAP,Vt.skyboxTexture);const sr=((lr,yr,_r,vr,kr)=>({u_matrix:lr,u_sun_direction:yr,u_cubemap:0,u_opacity:vr,u_temporal_offset:kr}))(jt.skyboxMatrix,Vt.getCenter(Dt,!1),0,Jt,er);Dt.prepareDrawProgram(_i,Qt),Qt.draw(_i,tr.TRIANGLES,Yt,_.StencilMode.disabled,Dt.colorModeForRenderPass(),_.CullFaceMode.backCW,sr,"skybox",Vt.skyboxGeometry.vertexBuffer,Vt.skyboxGeometry.indexBuffer,Vt.skyboxGeometry.segment)}(at,nt,kt,ft,$t):xt==="gradient"&&at.renderPass==="sky"&&function(Dt,Vt,Yt,Jt,er){const _i=Dt.context,tr=_i.gl,jt=Dt.transform,Qt=Dt.useProgram("skyboxGradient");Vt.skyboxGeometry||(Vt.skyboxGeometry=new _f(_i)),_i.activeTexture.set(tr.TEXTURE0);let sr=Vt.colorRampTexture;sr||(sr=Vt.colorRampTexture=new _.Texture(_i,Vt.colorRamp,tr.RGBA)),sr.bind(tr.LINEAR,tr.CLAMP_TO_EDGE);const lr=((yr,_r,vr,kr,Sr)=>({u_matrix:yr,u_color_ramp:0,u_center_direction:_r,u_radius:_.degToRad(vr),u_opacity:kr,u_temporal_offset:Sr}))(jt.skyboxMatrix,Vt.getCenter(Dt,!1),Vt.paint.get("sky-gradient-radius"),Jt,er);Dt.prepareDrawProgram(_i,Qt),Qt.draw(_i,tr.TRIANGLES,Yt,_.StencilMode.disabled,Dt.colorModeForRenderPass(),_.CullFaceMode.backCW,lr,"skyboxGradient",Vt.skyboxGeometry.vertexBuffer,Vt.skyboxGeometry.indexBuffer,Vt.skyboxGeometry.segment)}(at,nt,kt,ft,$t)},debug:function(at,et,nt){for(let ct=0;ct<nt.length;ct++)Gv(at,et,nt[ct])},custom:function(at,et,nt,ct){const dt=at.context,ft=nt.implementation;if(!at.transform.projection.unsupportedLayers||!at.transform.projection.unsupportedLayers.includes("custom")||at.terrain&&(at.terrain.renderingToTexture||at.renderPass==="offscreen")&&nt.isLayerDraped()){if(at.renderPass==="offscreen"){const _t=ft.prerender;if(_t){if(at.setCustomLayerDefaults(),dt.setColorMode(at.colorModeForRenderPass()),at.transform.projection.name==="globe"){const xt=at.transform.pointMerc;_t.call(ft,dt.gl,at.transform.customLayerMatrix(),at.transform.getProjection(),at.transform.globeToMercatorMatrix(),_.globeToMercatorTransition(at.transform.zoom),[xt.x,xt.y],at.transform.pixelsPerMeterRatio)}else _t.call(ft,dt.gl,at.transform.customLayerMatrix());dt.setDirty(),at.setBaseState()}}else if(at.renderPass==="translucent"){if(at.terrain&&at.terrain.renderingToTexture){const xt=ft.renderToTile;if(xt){const kt=ct[0].canonical,$t=new _.MercatorCoordinate(kt.x+ct[0].wrap*(1<<kt.z),kt.y,kt.z);dt.setDepthMode(_.DepthMode.disabled),dt.setStencilMode(_.StencilMode.disabled),dt.setColorMode(at.colorModeForRenderPass()),at.setCustomLayerDefaults(),xt.call(ft,dt.gl,$t),dt.setDirty(),at.setBaseState()}return}at.setCustomLayerDefaults(),dt.setColorMode(at.colorModeForRenderPass()),dt.setStencilMode(_.StencilMode.disabled);const _t=ft.renderingMode==="3d"?new _.DepthMode(at.context.gl.LEQUAL,_.DepthMode.ReadWrite,at.depthRangeFor3D):at.depthModeForSublayer(0,_.DepthMode.ReadOnly);if(dt.setDepthMode(_t),at.transform.projection.name==="globe"){const xt=at.transform.pointMerc;ft.render(dt.gl,at.transform.customLayerMatrix(),at.transform.getProjection(),at.transform.globeToMercatorMatrix(),_.globeToMercatorTransition(at.transform.zoom),[xt.x,xt.y],at.transform.pixelsPerMeterRatio)}else ft.render(dt.gl,at.transform.customLayerMatrix());dt.setDirty(),at.setBaseState(),dt.bindFramebuffer.set(null)}}else _.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Ru{constructor(et,nt,ct=!1){this.context=new on(et,ct),this.transform=nt,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=_.SourceCache.maxUnderzooming+_.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(et,nt){const ct=!!et&&!!et.terrain&&this.transform.projection.supportsTerrain;if(!(ct||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Qm(this,et));const dt=this._terrain;this.transform.elevation=ct?dt:null,dt.update(et,this.transform,nt)}_updateFog(et){const nt=et.fog;if(!nt||this.transform.projection.name==="globe"||nt.getOpacity(this.transform.pitch)<1||nt.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[ct,dt]=nt.getFovAdjustedRange(this.transform._fov);if(ct>dt)return void(this.transform.fogCullDistSq=null);const ft=ct+.78*(dt-ct);this.transform.fogCullDistSq=ft*ft}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(et,nt){if(this.width=et*_.exported.devicePixelRatio,this.height=nt*_.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const ct of this.style.order)this.style._layers[ct].resize()}setup(){const et=this.context,nt=new _.StructArrayLayout2i4;nt.emplaceBack(0,0),nt.emplaceBack(_.EXTENT,0),nt.emplaceBack(0,_.EXTENT),nt.emplaceBack(_.EXTENT,_.EXTENT),this.tileExtentBuffer=et.createVertexBuffer(nt,_.posAttributes.members),this.tileExtentSegments=_.SegmentVector.simpleSegment(0,0,4,2);const ct=new _.StructArrayLayout2i4;ct.emplaceBack(0,0),ct.emplaceBack(_.EXTENT,0),ct.emplaceBack(0,_.EXTENT),ct.emplaceBack(_.EXTENT,_.EXTENT),this.debugBuffer=et.createVertexBuffer(ct,_.posAttributes.members),this.debugSegments=_.SegmentVector.simpleSegment(0,0,4,5);const dt=new _.StructArrayLayout2i4;dt.emplaceBack(-1,-1),dt.emplaceBack(1,-1),dt.emplaceBack(-1,1),dt.emplaceBack(1,1),this.viewportBuffer=et.createVertexBuffer(dt,_.posAttributes.members),this.viewportSegments=_.SegmentVector.simpleSegment(0,0,4,2);const ft=new _.StructArrayLayout4i8;ft.emplaceBack(0,0,0,0),ft.emplaceBack(_.EXTENT,0,_.EXTENT,0),ft.emplaceBack(0,_.EXTENT,0,_.EXTENT),ft.emplaceBack(_.EXTENT,_.EXTENT,_.EXTENT,_.EXTENT),this.mercatorBoundsBuffer=et.createVertexBuffer(ft,_.boundsAttributes.members),this.mercatorBoundsSegments=_.SegmentVector.simpleSegment(0,0,4,2);const _t=new _.StructArrayLayout3ui6;_t.emplaceBack(0,1,2),_t.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=et.createIndexBuffer(_t);const xt=new _.StructArrayLayout1ui2;for(const $t of[0,1,3,2,0])xt.emplaceBack($t);this.debugIndexBuffer=et.createIndexBuffer(xt),this.emptyTexture=new _.Texture(et,new _.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),et.gl.RGBA),this.identityMat=_.create();const kt=this.context.gl;this.stencilClearMode=new _.StencilMode({func:kt.ALWAYS,mask:0},0,255,kt.ZERO,kt.ZERO,kt.ZERO),this.loadTimeStamps.push(_.window.performance.now()),this.atmosphereBuffer=new A0(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(et){return et._makeTileBoundsBuffers(this.context,this.transform.projection),et._tileBoundsBuffer?{tileBoundsBuffer:et._tileBoundsBuffer,tileBoundsIndexBuffer:et._tileBoundsIndexBuffer,tileBoundsSegments:et._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const et=this.context,nt=et.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(et,nt.TRIANGLES,_.DepthMode.disabled,this.stencilClearMode,_.ColorMode.disabled,_.CullFaceMode.disabled,lp(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(et,nt,ct){if(!nt||this.currentStencilSource===nt.id||!et.isTileClipped()||!ct||ct.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let xt=!1;for(const kt of ct)if(this._tileClippingMaskIDs[kt.key]===void 0){xt=!0;break}if(!xt)return}this.currentStencilSource=nt.id;const dt=this.context,ft=dt.gl;this.nextStencilID+ct.length>256&&this.clearStencil(),dt.setColorMode(_.ColorMode.disabled),dt.setDepthMode(_.DepthMode.disabled);const _t=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const xt of ct){const kt=nt.getTile(xt),$t=this._tileClippingMaskIDs[xt.key]=this.nextStencilID++,{tileBoundsBuffer:Dt,tileBoundsIndexBuffer:Vt,tileBoundsSegments:Yt}=this.getTileBoundsBuffers(kt);_t.draw(dt,ft.TRIANGLES,_.DepthMode.disabled,new _.StencilMode({func:ft.ALWAYS,mask:0},$t,255,ft.KEEP,ft.KEEP,ft.REPLACE),_.ColorMode.disabled,_.CullFaceMode.disabled,lp(xt.projMatrix),"$clipping",Dt,Vt,Yt)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const et=this.nextStencilID++,nt=this.context.gl;return new _.StencilMode({func:nt.NOTEQUAL,mask:255},et,255,nt.KEEP,nt.KEEP,nt.REPLACE)}stencilModeForClipping(et){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(et);const nt=this.context.gl;return new _.StencilMode({func:nt.EQUAL,mask:255},this._tileClippingMaskIDs[et.key],0,nt.KEEP,nt.KEEP,nt.REPLACE)}stencilConfigForOverlap(et){const nt=this.context.gl,ct=et.sort((_t,xt)=>xt.overscaledZ-_t.overscaledZ),dt=ct[ct.length-1].overscaledZ,ft=ct[0].overscaledZ-dt+1;if(ft>1){this.currentStencilSource=void 0,this.nextStencilID+ft>256&&this.clearStencil();const _t={};for(let xt=0;xt<ft;xt++)_t[xt+dt]=new _.StencilMode({func:nt.GEQUAL,mask:255},xt+this.nextStencilID,255,nt.KEEP,nt.KEEP,nt.REPLACE);return this.nextStencilID+=ft,[_t,ct]}return[{[dt]:_.StencilMode.disabled},ct]}colorModeForRenderPass(){const et=this.context.gl;return this._showOverdrawInspector?new _.ColorMode([et.CONSTANT_COLOR,et.ONE],new _.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?_.ColorMode.unblended:_.ColorMode.alphaBlended}depthModeForSublayer(et,nt,ct){if(!this.opaquePassEnabledForLayer())return _.DepthMode.disabled;const dt=1-((1+this.currentLayer)*this.numSublayers+et)*this.depthEpsilon;return new _.DepthMode(ct||this.context.gl.LEQUAL,nt,[dt,dt])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(et,nt){this.style=et,this.options=nt,this.imageManager=et.imageManager,this.glyphManager=et.glyphManager,this.symbolFadeChange=et.placement.symbolFadeChange(_.exported.now()),this.imageManager.beginFrame();const ct=this.style.order,dt=this.style._sourceCaches;for(const $t in dt){const Dt=dt[$t];Dt.used&&Dt.prepare(this.context)}const ft={},_t={},xt={};for(const $t in dt){const Dt=dt[$t];ft[$t]=Dt.getVisibleCoordinates(),_t[$t]=ft[$t].slice().reverse(),xt[$t]=Dt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $t=0;$t<ct.length;$t++)if(this.style._layers[ct[$t]].is3D()){this.opaquePassCutoff=$t;break}if(this.terrain&&(this.terrain.updateTileBinding(xt),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new _.GlobeSharedBuffers(this.context)),!_.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const $t of ct){const Dt=this.style._layers[$t],Vt=et._getLayerSourceCache(Dt);if(!Dt.hasOffscreenPass()||Dt.isHidden(this.transform.zoom))continue;const Yt=Vt?_t[Vt.id]:void 0;(Dt.type==="custom"||Dt.isSky()||Yt&&Yt.length)&&this.renderLayer(this,Vt,Dt,Yt)}this.depthRangeFor3D=[0,1-(et.order.length+2)*this.numSublayers*this.depthEpsilon];const kt=this.terrain;if(kt&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&kt.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:nt.showOverdrawInspector?_.Color.black:_.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=nt.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=ct.length-1;this.currentLayer>=0;this.currentLayer--){const $t=this.style._layers[ct[this.currentLayer]],Dt=et._getLayerSourceCache($t);if($t.isSky())continue;const Vt=Dt?_t[Dt.id]:void 0;this._renderTileClippingMasks($t,Dt,Vt),this.renderLayer(this,Dt,$t,Vt)}if(this.style.fog&&this.transform.projection.supportsFog&&function($t,Dt){const Vt=$t.context,Yt=Vt.gl,Jt=$t.transform,er=new _.DepthMode(Yt.LEQUAL,_.DepthMode.ReadOnly,[0,1]),_i=$t.useProgram("globeAtmosphere",null,Jt.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),tr=_.globeToMercatorTransition(Jt.zoom),jt=Dt.properties.get("color").toArray01(),Qt=Dt.properties.get("high-color").toArray01(),sr=Dt.properties.get("space-color").toArray01PremultipliedAlpha(),lr=_.identity$1([]);_.rotateY$1(lr,lr,-_.degToRad(Jt._center.lng)),_.rotateX$1(lr,lr,_.degToRad(Jt._center.lat)),_.rotateZ$1(lr,lr,Jt.angle),_.rotateX$1(lr,lr,-Jt._pitch);const yr=_.fromQuat(new Float32Array(16),lr),_r=_.mapValue(Dt.properties.get("star-intensity"),0,1,0,.25),vr=5e-4,kr=_.mapValue(Dt.properties.get("horizon-blend"),0,1,vr,.25),Sr=_.globeUseCustomAntiAliasing($t,Vt,Jt)&&kr===vr?Jt.worldSize/(2*Math.PI*1.025)-1:Jt.globeRadius,Lr=$t.frameCounter/1e3%1,Jr=_.length(Jt.globeCenterInViewSpace),Ar=Math.sqrt(Math.pow(Jr,2)-Math.pow(Sr,2)),Hr=Math.acos(Ar/Jr),Or=((Mr,Gr,rn,Zr,nn,Sn,Dn,_n,Pn,qn,Un,wn,ro,no)=>({u_frustum_tl:Mr,u_frustum_tr:Gr,u_frustum_br:rn,u_frustum_bl:Zr,u_horizon:nn,u_transition:Sn,u_fadeout_range:Dn,u_color:_n,u_high_color:Pn,u_space_color:qn,u_star_intensity:Un,u_star_size:5*_.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:wn,u_horizon_angle:ro,u_rotation_matrix:no}))(Jt.frustumCorners.TL,Jt.frustumCorners.TR,Jt.frustumCorners.BR,Jt.frustumCorners.BL,Jt.frustumCorners.horizon,tr,kr,jt,Qt,sr,_r,Lr,Hr,yr);$t.prepareDrawProgram(Vt,_i);const Qr=$t.atmosphereBuffer;Qr&&_i.draw(Vt,Yt.TRIANGLES,er,_.StencilMode.disabled,_.ColorMode.alphaBlended,_.CullFaceMode.backCW,Or,"skybox",Qr.vertexBuffer,Qr.indexBuffer,Qr.segments)}(this,this.style.fog),this.renderPass="sky",(_.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<ct.length;this.currentLayer++){const $t=this.style._layers[ct[this.currentLayer]],Dt=et._getLayerSourceCache($t);$t.isSky()&&this.renderLayer(this,Dt,$t,Dt?_t[Dt.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ct.length;){const $t=this.style._layers[ct[this.currentLayer]],Dt=et._getLayerSourceCache($t);if($t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped($t)){if($t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Vt=Dt?($t.type==="symbol"?xt:_t)[Dt.id]:void 0;this._renderTileClippingMasks($t,Dt,Dt?ft[Dt.id]:void 0),this.renderLayer(this,Dt,$t,Vt),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let $t=null;_.values(this.style._layers).forEach(Dt=>{const Vt=et._getLayerSourceCache(Dt);Vt&&!Dt.isHidden(this.transform.zoom)&&(!$t||$t.getSource().maxzoom<Vt.getSource().maxzoom)&&($t=Vt)}),$t&&this.options.showTileBoundaries&&hu.debug(this,$t,$t.getVisibleCoordinates())}this.options.showPadding&&function($t){const Dt=$t.transform.padding;k0($t,$t.transform.height-(Dt.top||0),3,Mu),k0($t,Dt.bottom||0,3,Vv),Jp($t,Dt.left||0,3,Nv),Jp($t,$t.transform.width-(Dt.right||0),3,jv);const Vt=$t.transform.centerPoint;(function(Yt,Jt,er,_i){Lu(Yt,Jt-1,er-10,2,20,_i),Lu(Yt,Jt-10,er-1,20,2,_i)})($t,Vt.x,$t.transform.height-Vt.y,Uv)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(_.window.performance.now()),this.saveCanvasCopy())}renderLayer(et,nt,ct,dt){ct.isHidden(this.transform.zoom)||(ct.type==="background"||ct.type==="sky"||ct.type==="custom"||dt&&dt.length)&&(this.id=ct.id,this.gpuTimingStart(ct),(!et.transform.projection.unsupportedLayers||!et.transform.projection.unsupportedLayers.includes(ct.type)||et.terrain&&ct.type==="custom")&&hu[ct.type](et,nt,ct,dt,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(et){if(!this.options.gpuTiming)return;const nt=this.context.extTimerQuery;let ct=this.gpuTimers[et.id];ct||(ct=this.gpuTimers[et.id]={calls:0,cpuTime:0,query:nt.createQueryEXT()}),ct.calls++,nt.beginQueryEXT(nt.TIME_ELAPSED_EXT,ct.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const et=this.context.extTimerQuery,nt=et.createQueryEXT();this.deferredRenderGpuTimeQueries.push(nt),et.beginQueryEXT(et.TIME_ELAPSED_EXT,nt)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const et=this.context.extTimerQuery;et.endQueryEXT(et.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const et=this.context.extTimerQuery;et.endQueryEXT(et.TIME_ELAPSED_EXT)}collectGpuTimers(){const et=this.gpuTimers;return this.gpuTimers={},et}collectDeferredRenderGpuQueries(){const et=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],et}queryGpuTimers(et){const nt={};for(const ct in et){const dt=et[ct],ft=this.context.extTimerQuery,_t=ft.getQueryObjectEXT(dt.query,ft.QUERY_RESULT_EXT)/1e6;ft.deleteQueryEXT(dt.query),nt[ct]=_t}return nt}queryGpuTimeDeferredRender(et){if(!this.options.gpuTimingDeferredRender)return 0;const nt=this.context.extTimerQuery;let ct=0;for(const dt of et)ct+=nt.getQueryObjectEXT(dt,nt.QUERY_RESULT_EXT)/1e6,nt.deleteQueryEXT(dt);return ct}translatePosMatrix(et,nt,ct,dt,ft){if(!ct[0]&&!ct[1])return et;const _t=ft?dt==="map"?this.transform.angle:0:dt==="viewport"?-this.transform.angle:0;if(_t){const $t=Math.sin(_t),Dt=Math.cos(_t);ct=[ct[0]*Dt-ct[1]*$t,ct[0]*$t+ct[1]*Dt]}const xt=[ft?ct[0]:ar(nt,ct[0],this.transform.zoom),ft?ct[1]:ar(nt,ct[1],this.transform.zoom),0],kt=new Float32Array(16);return _.translate(kt,et,xt),kt}saveTileTexture(et){const nt=this._tileTextures[et.size[0]];nt?nt.push(et):this._tileTextures[et.size[0]]=[et]}getTileTexture(et){const nt=this._tileTextures[et];return nt&&nt.length>0?nt.pop():null}isPatternMissing(et){return et===null||et!==void 0&&!this.imageManager.getPattern(et.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const et=this.terrain&&this.terrain.renderingToTexture,nt=this.terrain&&this.terrain.exaggeration()===0,ct=this.style&&this.style.fog,dt=[];return this.terrainRenderModeElevated()&&dt.push("TERRAIN"),this.transform.projection.name==="globe"&&dt.push("GLOBE"),nt&&dt.push("ZERO_EXAGGERATION"),ct&&!et&&ct.getOpacity(this.transform.pitch)!==0&&dt.push("FOG"),et&&dt.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&dt.push("OVERDRAW_INSPECTOR"),dt}useProgram(et,nt,ct){this.cache=this.cache||{};const dt=ct||[],ft=this.currentGlobalDefines().concat(dt),_t=Kn.cacheKey(qm[et],et,ft,nt);return this.cache[_t]||(this.cache[_t]=new Kn(this.context,et,qm[et],nt,ay[et],ft)),this.cache[_t]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const et=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(et.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=_.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(et,nt,ct){if(this.terrain&&this.terrain.renderingToTexture)return;const dt=this.style.fog;if(dt){const ft=dt.getOpacity(this.transform.pitch),_t=((xt,kt,$t,Dt,Vt,Yt,Jt,er,_i,tr,jt)=>{const Qt=xt.transform,sr=kt.properties.get("color").toArray01();sr[3]=Dt;const lr=xt.frameCounter/1e3%1;return{u_fog_matrix:$t?Qt.calculateFogTileMatrix($t):xt.identityMat,u_fog_range:kt.getFovAdjustedRange(Qt._fov),u_fog_color:sr,u_fog_horizon_blend:kt.properties.get("horizon-blend"),u_fog_temporal_offset:lr,u_frustum_tl:Vt,u_frustum_tr:Yt,u_frustum_br:Jt,u_frustum_bl:er,u_globe_pos:_i,u_globe_radius:tr,u_viewport:jt,u_globe_transition:_.globeToMercatorTransition(Qt.zoom),u_is_globe:+(Qt.projection.name==="globe")}})(this,dt,ct,ft,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*_.exported.devicePixelRatio,this.transform.height*_.exported.devicePixelRatio]);nt.setFogUniformValues(et,_t)}}setTileLoadedFlag(et){this.tileLoaded=et}saveCanvasCopy(){const et=this.canvasCopy();et&&(this.frameCopies.push(et),this.tileLoaded=!1)}canvasCopy(){const et=this.context.gl,nt=et.createTexture();return et.bindTexture(et.TEXTURE_2D,nt),et.copyTexImage2D(et.TEXTURE_2D,0,et.RGBA,0,0,et.drawingBufferWidth,et.drawingBufferHeight,0),nt}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const et=this.style&&this.style.fog;return!!et&&et.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const et=this._backgroundTiles,nt=this._backgroundTiles={},ct=this.transform.coveringTiles({tileSize:512});for(const dt of ct)nt[dt.key]=et[dt.key]||new _.Tile(dt,512,this.transform.tileZoom,this);return nt}clearBackgroundTiles(){this._backgroundTiles={}}}class em{constructor(et=0,nt=0,ct=0,dt=0){if(isNaN(et)||et<0||isNaN(nt)||nt<0||isNaN(ct)||ct<0||isNaN(dt)||dt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=et,this.bottom=nt,this.left=ct,this.right=dt}interpolate(et,nt,ct){return nt.top!=null&&et.top!=null&&(this.top=_.number(et.top,nt.top,ct)),nt.bottom!=null&&et.bottom!=null&&(this.bottom=_.number(et.bottom,nt.bottom,ct)),nt.left!=null&&et.left!=null&&(this.left=_.number(et.left,nt.left,ct)),nt.right!=null&&et.right!=null&&(this.right=_.number(et.right,nt.right,ct)),this}getCenter(et,nt){const ct=_.clamp((this.left+et-this.right)/2,0,et),dt=_.clamp((this.top+nt-this.bottom)/2,0,nt);return new _.Point(ct,dt)}equals(et){return this.top===et.top&&this.bottom===et.bottom&&this.left===et.left&&this.right===et.right}clone(){return new em(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function tm(at,et){const nt=_.getColumn(at,3);_.fromQuat(at,et),_.setColumn(at,3,nt)}function Qn(at,et){const nt=_.identity$1([]);return _.rotateZ$1(nt,nt,-et),_.rotateX$1(nt,nt,-at),nt}function mp(at,et){const nt=[at[0],at[1],0],ct=[et[0],et[1],0];if(_.length(nt)>=1e-15){const _t=_.normalize([],nt);_.scale$2(ct,_t,_.dot(ct,_t)),et[0]=ct[0],et[1]=ct[1]}const dt=_.cross([],et,at);if(_.len(dt)<1e-15)return null;const ft=Math.atan2(-dt[1],dt[0]);return Qn(Math.atan2(Math.sqrt(at[0]*at[0]+at[1]*at[1]),-at[2]),ft)}class I0{constructor(et,nt){this.position=et,this.orientation=nt}get position(){return this._position}set position(et){if(et){const nt=et instanceof _.MercatorCoordinate?et:new _.MercatorCoordinate(et[0],et[1],et[2]);this._renderWorldCopies&&(nt.x=_.wrap(nt.x,0,1)),this._position=nt}else this._position=null}lookAtPoint(et,nt){if(this.orientation=null,!this.position)return;const ct=this.position,dt=this._elevation?this._elevation.getAtPointOrZero(_.MercatorCoordinate.fromLngLat(et)):0,ft=_.MercatorCoordinate.fromLngLat(et,dt),_t=[ft.x-ct.x,ft.y-ct.y,ft.z-ct.z];nt||(nt=[0,0,1]),nt[2]=Math.abs(nt[2]),this.orientation=mp(_t,nt)}setPitchBearing(et,nt){this.orientation=Qn(_.degToRad(et),_.degToRad(-nt))}}class im{constructor(et,nt){this._transform=_.identity([]),this.orientation=nt,this.position=et}get mercatorPosition(){const et=this.position;return new _.MercatorCoordinate(et[0],et[1],et[2])}get position(){const et=_.getColumn(this._transform,3);return[et[0],et[1],et[2]]}set position(et){var nt;et&&_.setColumn(this._transform,3,[(nt=et)[0],nt[1],nt[2],1])}get orientation(){return this._orientation}set orientation(et){this._orientation=et||_.identity$1([]),et&&tm(this._transform,this._orientation)}getPitchBearing(){const et=this.forward(),nt=this.right();return{bearing:Math.atan2(-nt[1],nt[0]),pitch:Math.atan2(Math.sqrt(et[0]*et[0]+et[1]*et[1]),-et[2])}}setPitchBearing(et,nt){this._orientation=Qn(et,nt),tm(this._transform,this._orientation)}forward(){const et=_.getColumn(this._transform,2);return[-et[0],-et[1],-et[2]]}up(){const et=_.getColumn(this._transform,1);return[-et[0],-et[1],-et[2]]}right(){const et=_.getColumn(this._transform,0);return[et[0],et[1],et[2]]}getCameraToWorld(et,nt){const ct=new Float64Array(16);return _.invert(ct,this.getWorldToCamera(et,nt)),ct}getWorldToCameraPosition(et,nt,ct){const dt=this.position;_.scale$2(dt,dt,-et);const ft=new Float64Array(16);return _.fromScaling(ft,[ct,ct,ct]),_.translate(ft,ft,dt),ft[10]*=nt,ft}getWorldToCamera(et,nt){const ct=new Float64Array(16),dt=new Float64Array(4),ft=this.position;return _.conjugate(dt,this._orientation),_.scale$2(ft,ft,-et),_.fromQuat(ct,dt),_.translate(ct,ct,ft),ct[1]*=-1,ct[5]*=-1,ct[9]*=-1,ct[13]*=-1,ct[8]*=nt,ct[9]*=nt,ct[10]*=nt,ct[11]*=nt,ct}getCameraToClipPerspective(et,nt,ct,dt){const ft=new Float64Array(16);return _.perspective(ft,et,nt,ct,dt),ft}getDistanceToElevation(et,nt=!1){const ct=et===0?0:_.mercatorZfromAltitude(et,nt?_.latFromMercatorY(this.position[1]):this.position[1]),dt=this.forward();return(ct-this.position[2])/dt[2]}clone(){return new im([...this.position],[...this.orientation])}}function Du(at,et){const nt=rm(at.projection,at.zoom,at.width,at.height),ct=function(ft,_t,xt,kt,$t){const Dt=new _.LngLat(xt.lng-180*Dl,xt.lat),Vt=new _.LngLat(xt.lng+180*Dl,xt.lat),Yt=ft.project(Dt.lng,Dt.lat),Jt=ft.project(Vt.lng,Vt.lat),er=-Math.atan2(Jt.y-Yt.y,Jt.x-Yt.x),_i=_.MercatorCoordinate.fromLngLat(xt);_i.y=_.clamp(_i.y,-1+Dl,1-Dl);const tr=_i.toLngLat(),jt=ft.project(tr.lng,tr.lat),Qt=_.MercatorCoordinate.fromLngLat(tr);Qt.x+=Dl;const sr=Qt.toLngLat(),lr=ft.project(sr.lng,sr.lat),yr=nm(lr.x-jt.x,lr.y-jt.y,er),_r=_.MercatorCoordinate.fromLngLat(tr);_r.y+=Dl;const vr=_r.toLngLat(),kr=ft.project(vr.lng,vr.lat),Sr=nm(kr.x-jt.x,kr.y-jt.y,er),Lr=Math.abs(yr.x)/Math.abs(Sr.y),Jr=_.identity([]);_.rotateZ(Jr,Jr,-er*(1-($t?0:kt)));const Ar=_.identity([]);return _.scale(Ar,Ar,[1,1-(1-Lr)*kt,1]),Ar[4]=-Sr.x/Sr.y*kt,_.rotateZ(Ar,Ar,er),_.multiply(Ar,Jr,Ar),Ar}(at.projection,0,at.center,nt,et),dt=M0(at);return _.scale(ct,ct,[dt,dt,1]),ct}function M0(at){const et=at.projection,nt=rm(at.projection,at.zoom,at.width,at.height),ct=L0(et,at.center),dt=L0(et,_.LngLat.convert(et.center));return Math.pow(2,ct*nt+(1-nt)*dt)}function rm(at,et,nt,ct,dt=1/0){const ft=at.range;if(!ft)return 0;const _t=Math.min(dt,Math.max(nt,ct)),xt=Math.log(_t/1024)/Math.LN2;return _.smoothstep(ft[0]+xt,ft[1]+xt,et)}const Dl=1/4e4;function L0(at,et){const nt=_.clamp(et.lat,-_.MAX_MERCATOR_LATITUDE,_.MAX_MERCATOR_LATITUDE),ct=new _.LngLat(et.lng-180*Dl,nt),dt=new _.LngLat(et.lng+180*Dl,nt),ft=at.project(ct.lng,nt),_t=at.project(dt.lng,nt),xt=_.MercatorCoordinate.fromLngLat(ct),kt=_.MercatorCoordinate.fromLngLat(dt),$t=_t.x-ft.x,Dt=_t.y-ft.y,Vt=kt.x-xt.x,Yt=kt.y-xt.y,Jt=Math.sqrt((Vt*Vt+Yt*Yt)/($t*$t+Dt*Dt));return Math.log(Jt)/Math.LN2}function nm(at,et,nt){const ct=Math.cos(nt),dt=Math.sin(nt);return{x:at*ct-et*dt,y:at*dt+et*ct}}class $u{constructor(et,nt,ct,dt,ft,_t,xt){this.tileSize=512,this._renderWorldCopies=ft===void 0||ft,this._minZoom=et||0,this._maxZoom=nt||22,this._minPitch=ct==null?0:ct,this._maxPitch=dt==null?60:dt,this.setProjection(_t),this.setMaxBounds(xt),this.width=0,this.height=0,this._center=new _.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new em,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new im,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const et=new $u(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return et._elevation=this._elevation,et._centerAltitude=this._centerAltitude,et._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,et.tileSize=this.tileSize,et.mercatorFromTransition=this.mercatorFromTransition,et.width=this.width,et.height=this.height,et.cameraElevationReference=this.cameraElevationReference,et._center=this._center,et._setZoom(this.zoom),et._seaLevelZoom=this._seaLevelZoom,et.angle=this.angle,et._fov=this._fov,et._pitch=this._pitch,et._nearZ=this._nearZ,et._farZ=this._farZ,et._averageElevation=this._averageElevation,et._unmodified=this._unmodified,et._edgeInsets=this._edgeInsets.clone(),et._camera=this._camera.clone(),et._calcMatrices(),et.freezeTileCoverage=this.freezeTileCoverage,et.frustumCorners=this.frustumCorners,et}get elevation(){return this._elevation}set elevation(et){this._elevation!==et&&(this._elevation=et,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(et,nt=!1){const ct=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||ct)&&this._updateCameraOnTerrain(),(et||ct)&&this._constrainCamera(nt),this._calcMatrices()}getProjection(){return _.pick(this.projection,["name","center","parallels"])}setProjection(et){this.projectionOptions=et||{name:"mercator"};const nt=this.projection?this.getProjection():void 0;this.projection=_.getProjection(this.projectionOptions);const ct=!ut(nt,this.getProjection());return ct&&this._calcMatrices(),this.mercatorFromTransition=!1,ct}setMercatorFromTransition(){const et=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=_.getProjection({name:"mercator"});const nt=et!==this.projection.name;return nt&&this._calcMatrices(),nt}get minZoom(){return this._minZoom}set minZoom(et){this._minZoom!==et&&(this._minZoom=et,this.zoom=Math.max(this.zoom,et))}get maxZoom(){return this._maxZoom}set maxZoom(et){this._maxZoom!==et&&(this._maxZoom=et,this.zoom=Math.min(this.zoom,et))}get minPitch(){return this._minPitch}set minPitch(et){this._minPitch!==et&&(this._minPitch=et,this.pitch=Math.max(this.pitch,et))}get maxPitch(){return this._maxPitch}set maxPitch(et){this._maxPitch!==et&&(this._maxPitch=et,this.pitch=Math.min(this.pitch,et))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(et){et===void 0?et=!0:et===null&&(et=!1),this._renderWorldCopies=et}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const et=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(et))}get cameraWorldSize(){const et=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(et))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return _.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new _.Point(this.width,this.height)}get bearing(){return _.wrap(this.rotation,-180,180)}set bearing(et){this.rotation=et}get rotation(){return-this.angle/Math.PI*180}set rotation(et){const nt=-et*Math.PI/180;var ct;this.angle!==nt&&(this._unmodified=!1,this.angle=nt,this._calcMatrices(),this.rotationMatrix=(ct=new _.ARRAY_TYPE(4),_.ARRAY_TYPE!=Float32Array&&(ct[1]=0,ct[2]=0),ct[0]=1,ct[3]=1,ct),function(dt,ft,_t){var xt=ft[0],kt=ft[1],$t=ft[2],Dt=ft[3],Vt=Math.sin(_t),Yt=Math.cos(_t);dt[0]=xt*Yt+$t*Vt,dt[1]=kt*Yt+Dt*Vt,dt[2]=xt*-Vt+$t*Yt,dt[3]=kt*-Vt+Dt*Yt}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(et){const nt=_.clamp(et,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==nt&&(this._unmodified=!1,this._pitch=nt,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const et=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/et)}set fov(et){et=Math.max(.01,Math.min(60,et)),this._fov!==et&&(this._unmodified=!1,this._fov=_.degToRad(et),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(et){this._averageElevation=et,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(et){const nt=Math.min(Math.max(et,this.minZoom),this.maxZoom);this._zoom!==nt&&(this._unmodified=!1,this._setZoom(nt),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(et){this._zoom=et,this.scale=this.zoomScale(et),this.tileZoom=Math.floor(et),this.zoomFraction=et-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const et=this._elevation;this._centerAltitude=et.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=et.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const et=this._elevation,nt=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],ct=this.horizonLineFromTop();let dt=0,ft=0;for(let _t=0;_t<nt.length;_t++){const xt=new _.Point(nt[_t][0]*this.width,ct+nt[_t][1]*(this.height-ct)),kt=et.pointCoordinate(xt);if(!kt)continue;const $t=1/Math.hypot(kt[0]-this._camera.position[0],kt[1]-this._camera.position[1]);dt+=kt[3]*$t,ft+=$t}return ft===0?NaN:dt/ft}get center(){return this._center}set center(et){et.lat===this._center.lat&&et.lng===this._center.lng||(this._unmodified=!1,this._center=et,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const et=this._seaLevelZoom,nt=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),ct=this.pixelsPerMeter/this.worldSize*nt,dt=this._mercatorZfromZoom(et),ft=this._mercatorZfromZoom(this._maxZoom),_t=Math.max(dt-ct,ft);this._setZoom(this._zoomFromMercatorZ(_t))}get padding(){return this._edgeInsets.toJSON()}set padding(et){this._edgeInsets.equals(et)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,et,1),this._calcMatrices())}computeZoomRelativeTo(et){const nt=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,et.toAltitude()));let ct;ct=et.z<this._camera.position[2]?[nt.x,nt.y,nt.z]:[et.x,et.y,et.z];const dt=_.length(_.sub([],this._camera.position,ct));return _.clamp(this._zoomFromMercatorZ(dt),this._minZoom,this._maxZoom)}setFreeCameraOptions(et){if(!this.height||!et.position&&!et.orientation)return;this._updateCameraState();let nt=!1;if(et.orientation&&!_.exactEquals(et.orientation,this._camera.orientation)&&(nt=this._setCameraOrientation(et.orientation)),et.position){const ct=[et.position.x,et.position.y,et.position.z];_.exactEquals$1(ct,this._camera.position)||(this._setCameraPosition(ct),nt=!0)}nt&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const et=this._camera.position,nt=new I0;return nt.position=new _.MercatorCoordinate(et[0],et[1],et[2]),nt.orientation=this._camera.orientation,nt._elevation=this.elevation,nt._renderWorldCopies=this.renderWorldCopies,nt}_setCameraOrientation(et){if(!_.length$1(et))return!1;_.normalize$1(et,et);const nt=_.transformQuat([],[0,0,-1],et),ct=_.transformQuat([],[0,-1,0],et);if(ct[2]<0)return!1;const dt=mp(nt,ct);return!!dt&&(this._camera.orientation=dt,!0)}_setCameraPosition(et){const nt=this.zoomScale(this.minZoom)*this.tileSize,ct=this.zoomScale(this.maxZoom)*this.tileSize,dt=this.cameraToCenterDistance;et[2]=_.clamp(et[2],dt/ct,dt/nt),this._camera.position=et}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(et){return this._edgeInsets.equals(et)}interpolatePadding(et,nt,ct){this._unmodified=!1,this._edgeInsets.interpolate(et,nt,ct),this._constrain(),this._calcMatrices()}coveringZoomLevel(et){const nt=(et.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/et.tileSize));return Math.max(0,nt)}getVisibleUnwrappedCoordinates(et){const nt=[new _.UnwrappedTileID(0,et)];if(this.renderWorldCopies){const ct=this.pointCoordinate(new _.Point(0,0)),dt=this.pointCoordinate(new _.Point(this.width,0)),ft=this.pointCoordinate(new _.Point(this.width,this.height)),_t=this.pointCoordinate(new _.Point(0,this.height)),xt=Math.floor(Math.min(ct.x,dt.x,ft.x,_t.x)),kt=Math.floor(Math.max(ct.x,dt.x,ft.x,_t.x)),$t=1;for(let Dt=xt-$t;Dt<=kt+$t;Dt++)Dt!==0&&nt.push(new _.UnwrappedTileID(Dt,et))}return nt}coveringTiles(et){let nt=this.coveringZoomLevel(et);const ct=nt,dt=this.elevation&&!et.isTerrainDEM,ft=this.projection.name==="mercator";if(et.minzoom!==void 0&&nt<et.minzoom)return[];et.maxzoom!==void 0&&nt>et.maxzoom&&(nt=et.maxzoom);const _t=this.locationCoordinate(this.center),xt=this.center.lat,kt=1<<nt,$t=[kt*_t.x,kt*_t.y,0],Dt=this.projection.name==="globe",Vt=!Dt,Yt=_.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,nt,Vt),Jt=Dt?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),er=kt*_.mercatorZfromAltitude(1,this.center.lat),_i=this._camera.position[2]/_.mercatorZfromAltitude(1,this.center.lat),tr=[kt*Jt.x,kt*Jt.y,_i*(Vt?1:er)],jt=this.cameraToCenterDistance/et.tileSize*(et.roundZoom?1:.502),Qt=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?nt:0,sr=et.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,lr=et.isTerrainDEM?-sr:this._elevation?this._elevation.getMinElevationBelowMSL():0,yr=this.projection.isReprojectedInTileSpace?M0(this):1,_r=Mr=>{const rn=new _.MercatorCoordinate(Mr.x+25e-6,Mr.y,Mr.z),Zr=new _.MercatorCoordinate(Mr.x,Mr.y+25e-6,Mr.z),nn=Mr.toLngLat(),Sn=rn.toLngLat(),Dn=Zr.toLngLat(),_n=this.locationCoordinate(nn),Pn=this.locationCoordinate(Sn),qn=this.locationCoordinate(Dn),Un=Math.hypot(Pn.x-_n.x,Pn.y-_n.y),wn=Math.hypot(qn.x-_n.x,qn.y-_n.y);return Math.sqrt(Un*wn)*yr/25e-6},vr=Mr=>{const Gr=sr,rn=lr;return{aabb:_.tileAABB(this,kt,0,0,0,Mr,rn,Gr,this.projection),zoom:0,x:0,y:0,minZ:rn,maxZ:Gr,wrap:Mr,fullyVisible:!1}},kr=[];let Sr=[];const Lr=nt,Jr=et.reparseOverscaled?ct:nt,Ar=Mr=>Mr*Mr,Hr=Ar((_i-this._centerAltitude)*er),Or=Mr=>{if(!this._elevation||!Mr.tileID||!ft)return;const Gr=this._elevation.getMinMaxForTile(Mr.tileID),rn=Mr.aabb;Gr?(rn.min[2]=Gr.min,rn.max[2]=Gr.max,rn.center[2]=(rn.min[2]+rn.max[2])/2):(Mr.shouldSplit=Qr(Mr),Mr.shouldSplit||(rn.min[2]=rn.max[2]=rn.center[2]=this._centerAltitude))},Qr=Mr=>{if(Mr.zoom<Qt)return!0;if(Mr.zoom===Lr)return!1;if(Mr.shouldSplit!=null)return Mr.shouldSplit;const Gr=Mr.aabb.distanceX(tr),rn=Mr.aabb.distanceY(tr);let Zr=Hr,nn=1;if(Dt){Zr=Ar(Mr.aabb.distanceZ(tr));const _n=Math.pow(2,Mr.zoom),Pn=_.latFromMercatorY((Mr.y+1)/_n),qn=_.latFromMercatorY(Mr.y/_n),Un=Math.min(Math.max(xt,Pn),qn),wn=_.circumferenceAtLatitude(Un)/_.circumferenceAtLatitude(xt);if(nn=Un===xt?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,wn/this._mercatorScaleRatio),this.zoom<=_.GLOBE_ZOOM_THRESHOLD_MIN&&Mr.zoom===Lr-1&&wn>=.9)return!0}else if(dt&&(Zr=Ar(Mr.aabb.distanceZ(tr)*er)),this.projection.isReprojectedInTileSpace&&ct<=5){const _n=Math.pow(2,Mr.zoom),Pn=_r(new _.MercatorCoordinate((Mr.x+.5)/_n,(Mr.y+.5)/_n));nn=Pn>.85?1:Pn}const Sn=Gr*Gr+rn*rn+Zr,Dn=Ar((1<<Lr-Mr.zoom)*jt*nn*((_n,Pn)=>{if(Pn*Ar(.707)<_n)return 1;const qn=Math.sqrt(Pn/_n);return qn/(1.4144271570014144+(Math.pow(1.1,qn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Zr,Hr),Sn));return Sn<Dn};if(this.renderWorldCopies)for(let Mr=1;Mr<=3;Mr++)kr.push(vr(-Mr)),kr.push(vr(Mr));for(kr.push(vr(0));kr.length>0;){const Mr=kr.pop(),Gr=Mr.x,rn=Mr.y;let Zr=Mr.fullyVisible;if(!Zr){const nn=Mr.aabb.intersects(Yt);if(nn===0)continue;Zr=nn===2}if(Mr.zoom!==Lr&&Qr(Mr))for(let nn=0;nn<4;nn++){const Sn=(Gr<<1)+nn%2,Dn=(rn<<1)+(nn>>1),_n={aabb:ft?Mr.aabb.quadrant(nn):_.tileAABB(this,kt,Mr.zoom+1,Sn,Dn,Mr.wrap,Mr.minZ,Mr.maxZ,this.projection),zoom:Mr.zoom+1,x:Sn,y:Dn,wrap:Mr.wrap,fullyVisible:Zr,tileID:void 0,shouldSplit:void 0,minZ:Mr.minZ,maxZ:Mr.maxZ};dt&&!Dt&&(_n.tileID=new _.OverscaledTileID(Mr.zoom+1===Lr?Jr:Mr.zoom+1,Mr.wrap,Mr.zoom+1,Sn,Dn),Or(_n)),kr.push(_n)}else{const nn=Mr.zoom===Lr?Jr:Mr.zoom;if(et.minzoom&&et.minzoom>nn)continue;const Sn=$t[0]-(.5+Gr+(Mr.wrap<<Mr.zoom))*(1<<nt-Mr.zoom),Dn=$t[1]-.5-rn,_n=Mr.tileID?Mr.tileID:new _.OverscaledTileID(nn,Mr.wrap,Mr.zoom,Gr,rn);Sr.push({tileID:_n,distanceSq:Sn*Sn+Dn*Dn})}}if(this.fogCullDistSq){const Mr=this.fogCullDistSq,Gr=this.horizonLineFromTop();Sr=Sr.filter(rn=>{const Zr=[0,0,0,1],nn=[_.EXTENT,_.EXTENT,0,1],Sn=this.calculateFogTileMatrix(rn.tileID.toUnwrapped());_.transformMat4$1(Zr,Zr,Sn),_.transformMat4$1(nn,nn,Sn);const Dn=_.getAABBPointSquareDist(Zr,nn);if(Dn===0)return!0;let _n=!1;const Pn=this._elevation;if(Pn&&Dn>Mr&&Gr!==0){const qn=this.calculateProjMatrix(rn.tileID.toUnwrapped());let Un;et.isTerrainDEM||(Un=Pn.getMinMaxForTile(rn.tileID)),Un||(Un={min:lr,max:sr});const wn=_.furthestTileCorner(this.rotation),ro=[wn[0]*_.EXTENT,wn[1]*_.EXTENT,Un.max];_.transformMat4(ro,ro,qn),_n=(1-ro[1])*this.height*.5<Gr}return Dn<Mr||_n})}return Sr.sort((Mr,Gr)=>Mr.distanceSq-Gr.distanceSq).map(Mr=>Mr.tileID)}resize(et,nt){this.width=et,this.height=nt,this.pixelsToGLUnits=[2/et,-2/nt],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(et){return Math.pow(2,et)}scaleZoom(et){return Math.log(et)/Math.LN2}project(et){const nt=_.clamp(et.lat,-_.MAX_MERCATOR_LATITUDE,_.MAX_MERCATOR_LATITUDE),ct=this.projection.project(et.lng,nt);return new _.Point(ct.x*this.worldSize,ct.y*this.worldSize)}unproject(et){return this.projection.unproject(et.x/this.worldSize,et.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/_.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(et,nt){let ct,dt;const ft=this.centerPoint;if(this.projection.name==="globe"){const xt=this.worldSize;ct=(nt.x-ft.x)/xt,dt=(nt.y-ft.y)/xt}else{const xt=this.pointCoordinate(nt),kt=this.pointCoordinate(ft);ct=xt.x-kt.x,dt=xt.y-kt.y}const _t=this.locationCoordinate(et);this.setLocation(new _.MercatorCoordinate(_t.x-ct,_t.y-dt))}setLocation(et){this.center=this.coordinateLocation(et),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(et){return this.projection.locationPoint(this,et)}locationPoint3D(et){return this.projection.locationPoint(this,et,!0)}pointLocation(et){return this.coordinateLocation(this.pointCoordinate(et))}pointLocation3D(et){return this.coordinateLocation(this.pointCoordinate3D(et))}locationCoordinate(et,nt){const ct=nt?_.mercatorZfromAltitude(nt,et.lat):void 0,dt=this.projection.project(et.lng,et.lat);return new _.MercatorCoordinate(dt.x,dt.y,ct)}coordinateLocation(et){return this.projection.unproject(et.x,et.y)}pointRayIntersection(et,nt){const ct=nt!=null?nt:this._centerAltitude,dt=[et.x,et.y,0,1],ft=[et.x,et.y,1,1];_.transformMat4$1(dt,dt,this.pixelMatrixInverse),_.transformMat4$1(ft,ft,this.pixelMatrixInverse);const _t=ft[3];_.scale$1(dt,dt,1/dt[3]),_.scale$1(ft,ft,1/_t);const xt=dt[2],kt=ft[2];return{p0:dt,p1:ft,t:xt===kt?0:(ct-xt)/(kt-xt)}}screenPointToMercatorRay(et){const nt=[et.x,et.y,0,1],ct=[et.x,et.y,1,1];return _.transformMat4$1(nt,nt,this.pixelMatrixInverse),_.transformMat4$1(ct,ct,this.pixelMatrixInverse),_.scale$1(nt,nt,1/nt[3]),_.scale$1(ct,ct,1/ct[3]),nt[2]=_.mercatorZfromAltitude(nt[2],this._center.lat)*this.worldSize,ct[2]=_.mercatorZfromAltitude(ct[2],this._center.lat)*this.worldSize,_.scale$1(nt,nt,1/this.worldSize),_.scale$1(ct,ct,1/this.worldSize),new _.Ray([nt[0],nt[1],nt[2]],_.normalize([],_.sub([],ct,nt)))}rayIntersectionCoordinate(et){const{p0:nt,p1:ct,t:dt}=et,ft=_.mercatorZfromAltitude(nt[2],this._center.lat),_t=_.mercatorZfromAltitude(ct[2],this._center.lat);return new _.MercatorCoordinate(_.number(nt[0],ct[0],dt)/this.worldSize,_.number(nt[1],ct[1],dt)/this.worldSize,_.number(ft,_t,dt))}pointCoordinate(et,nt=this._centerAltitude){return this.projection.pointCoordinate(this,et.x,et.y,nt)}pointCoordinate3D(et){if(!this.elevation)return this.pointCoordinate(et);let nt=this.projection.pointCoordinate3D(this,et.x,et.y);if(nt)return new _.MercatorCoordinate(nt[0],nt[1],nt[2]);let ct=0,dt=this.horizonLineFromTop();if(et.y>dt)return this.pointCoordinate(et);const ft=.02*dt,_t=et.clone();for(let xt=0;xt<10&&dt-ct>ft;xt++){_t.y=_.number(ct,dt,.66);const kt=this.projection.pointCoordinate3D(this,_t.x,_t.y);kt?(dt=_t.y,nt=kt):ct=_t.y}return nt?new _.MercatorCoordinate(nt[0],nt[1],nt[2]):this.pointCoordinate(et)}isPointAboveHorizon(et){return this.projection.isPointAboveHorizon(this,et)}isPointOnSurface(et){if(et.y<0||et.y>this.height||et.x<0||et.x>this.width)return!1;if(this.elevation||this.zoom>=_.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(et);const nt=this.pointCoordinate(et);return nt.y>=0&&nt.y<=1}_coordinatePoint(et,nt){const ct=nt&&this.elevation?this.elevation.getAtPointOrZero(et,this._centerAltitude):this._centerAltitude,dt=[et.x*this.worldSize,et.y*this.worldSize,ct+et.toAltitude(),1];return _.transformMat4$1(dt,dt,this.pixelMatrix),dt[3]>0?new _.Point(dt[0]/dt[3],dt[1]/dt[3]):new _.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:et,left:nt}=this._edgeInsets,ct=this.height-this._edgeInsets.bottom,dt=this.width-this._edgeInsets.right,ft=this.pointLocation3D(new _.Point(nt,et)),_t=this.pointLocation3D(new _.Point(dt,et)),xt=this.pointLocation3D(new _.Point(dt,ct)),kt=this.pointLocation3D(new _.Point(nt,ct));let $t=Math.min(ft.lng,_t.lng,xt.lng,kt.lng),Dt=Math.max(ft.lng,_t.lng,xt.lng,kt.lng),Vt=Math.min(ft.lat,_t.lat,xt.lat,kt.lat),Yt=Math.max(ft.lat,_t.lat,xt.lat,kt.lat);const Jt=Math.pow(2,-this.zoom)/16*270,er=this.projection.name==="globe"?1:4,_i=(tr,jt,Qt,sr,lr)=>{const yr=(tr+Qt)/2,_r=(jt+sr)/2,vr=new _.Point(yr,_r),{lng:kr,lat:Sr}=this.pointLocation3D(vr),Lr=Math.max(0,$t-kr,Vt-Sr,kr-Dt,Sr-Yt);$t=Math.min($t,kr),Dt=Math.max(Dt,kr),Vt=Math.min(Vt,Sr),Yt=Math.max(Yt,Sr),(lr<er||Lr>Jt)&&(_i(tr,jt,yr,_r,lr+1),_i(yr,_r,Qt,sr,lr+1))};if(_i(nt,et,dt,et,1),_i(dt,et,dt,ct,1),_i(dt,ct,nt,ct,1),_i(nt,ct,nt,et,1),this.projection.name==="globe"){const[tr,jt]=_.polesInViewport(this);tr?(Yt=90,Dt=180,$t=-180):jt&&(Vt=-90,Dt=180,$t=-180)}return new _.LngLatBounds(new _.LngLat($t,Vt),new _.LngLat(Dt,Yt))}_getBoundsRectangular(et,nt){const{top:ct,left:dt}=this._edgeInsets,ft=this.height-this._edgeInsets.bottom,_t=this.width-this._edgeInsets.right,xt=new _.Point(dt,ct),kt=new _.Point(_t,ct),$t=new _.Point(_t,ft),Dt=new _.Point(dt,ft);let Vt=this.pointCoordinate(xt,et),Yt=this.pointCoordinate(kt,et);const Jt=this.pointCoordinate($t,nt),er=this.pointCoordinate(Dt,nt),_i=(tr,jt)=>(jt.y-tr.y)/(jt.x-tr.x);return Vt.y>1&&Yt.y>=0?Vt=new _.MercatorCoordinate((1-er.y)/_i(er,Vt)+er.x,1):Vt.y<0&&Yt.y<=1&&(Vt=new _.MercatorCoordinate(-er.y/_i(er,Vt)+er.x,0)),Yt.y>1&&Vt.y>=0?Yt=new _.MercatorCoordinate((1-Jt.y)/_i(Jt,Yt)+Jt.x,1):Yt.y<0&&Vt.y<=1&&(Yt=new _.MercatorCoordinate(-Jt.y/_i(Jt,Yt)+Jt.x,0)),new _.LngLatBounds().extend(this.coordinateLocation(Vt)).extend(this.coordinateLocation(Yt)).extend(this.coordinateLocation(er)).extend(this.coordinateLocation(Jt))}_getBoundsRectangularTerrain(){const et=this.elevation;if(!et.visibleDemTiles.length||et.isUsingMockSource())return this._getBoundsRectangular(0,0);const nt=et.visibleDemTiles.reduce((ct,dt)=>{if(dt.dem){const ft=dt.dem.tree;ct.min=Math.min(ct.min,ft.minimums[0]),ct.max=Math.max(ct.max,ft.maximums[0])}return ct},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(nt.min*et.exaggeration(),nt.max*et.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(et=!0){const nt=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,ct=this.height/2-nt*(1-this._horizonShift);return et?Math.max(0,ct):ct}getMaxBounds(){return this.maxBounds}setMaxBounds(et){this.maxBounds=et,this.minLat=-_.MAX_MERCATOR_LATITUDE,this.maxLat=_.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,et&&(this.minLat=et.getSouth(),this.maxLat=et.getNorth(),this.minLng=et.getWest(),this.maxLng=et.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=_.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=_.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=_.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=_.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(et,nt){return this.projection.createTileMatrix(this,nt,et)}calculateDistanceTileData(et){const nt=et.key,ct=this._distanceTileDataCache;if(ct[nt])return ct[nt];const dt=et.canonical,ft=1/this.height,_t=this.cameraWorldSize,xt=_t/this.zoomScale(dt.z),kt=(dt.x+Math.pow(2,dt.z)*et.wrap)*xt,$t=dt.y*xt,Dt=this.point;Dt.x*=_t/this.worldSize,Dt.y*=_t/this.worldSize;const Vt=this.angle,Yt=Math.sin(-Vt),Jt=-Math.cos(-Vt);return ct[nt]={bearing:[Yt,Jt],center:[(Dt.x-kt)*ft,(Dt.y-$t)*ft],scale:xt/_.EXTENT*ft},ct[nt]}calculateFogTileMatrix(et){const nt=et.key,ct=this._fogTileMatrixCache;if(ct[nt])return ct[nt];const dt=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,et);return _.multiply(dt,this.worldToFogMatrix,dt),ct[nt]=new Float32Array(dt),ct[nt]}calculateProjMatrix(et,nt=!1){const ct=et.key,dt=nt?this._alignedProjMatrixCache:this._projMatrixCache;if(dt[ct])return dt[ct];const ft=this.calculatePosMatrix(et,this.worldSize);return _.multiply(ft,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:nt?this.alignedProjMatrix:this.projMatrix,ft),dt[ct]=new Float32Array(ft),dt[ct]}calculatePixelsToTileUnitsMatrix(et){const nt=et.tileID.key,ct=this._pixelsToTileUnitsCache;if(ct[nt])return ct[nt];const dt=function(ft,_t){const{scale:xt}=ft.tileTransform,kt=xt*_.EXTENT/(ft.tileSize*Math.pow(2,_t.zoom-ft.tileID.overscaledZ+ft.tileID.canonical.z));return $t=new Float32Array(4),Yt=(Dt=_t.inverseAdjustmentMatrix)[1],Jt=Dt[2],er=Dt[3],tr=(Vt=[kt,kt])[1],$t[0]=Dt[0]*(_i=Vt[0]),$t[1]=Yt*_i,$t[2]=Jt*tr,$t[3]=er*tr,$t;var $t,Dt,Vt,Yt,Jt,er,_i,tr}(et,this);return ct[nt]=dt,ct[nt]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const et=1/this.worldSize,nt=_.fromScaling([],[et,et,et]);return _.multiply(nt,nt,this.globeMatrix),nt}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const et=this._elevation;this._updateCameraState();const nt=_.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,ct=this._computeCameraPosition(nt),dt=this._camera.forward(),ft=_.mercatorZfromAltitude(1,this._center.lat);ct[2]/=ft,dt[2]/=ft,_.normalize(dt,dt);const _t=et.raycast(ct,dt,et.exaggeration());if(_t){const xt=_.scaleAndAdd([],ct,dt,_t),kt=new _.MercatorCoordinate(xt[0],xt[1],_.mercatorZfromAltitude(xt[2],_.latFromMercatorY(xt[1]))),$t=(kt.z+_.length([kt.x-ct[0],kt.y-ct[1],kt.z-ct[2]*ft]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ($t),this._centerAltitude=kt.toAltitude(),this._center=this.coordinateLocation(kt),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(et=!1){if(!this._elevation)return;const nt=this._elevation,ct=_.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,dt=this._computeCameraPosition(ct),ft=nt.getAtPointOrZero(new _.MercatorCoordinate(...dt)),_t=this.pixelsPerMeter/this.worldSize*ft,xt=this._minimumHeightOverTerrain(),kt=dt[2]-_t;if(kt<=xt)if(kt<0||et){const $t=this.locationCoordinate(this._center,this._centerAltitude),Dt=[dt[0],dt[1],$t.z-dt[2]],Vt=_.length(Dt);Dt[2]-=(xt-kt)/this._pixelsPerMercatorPixel;const Yt=_.length(Dt);if(Yt===0)return;_.scale$2(Dt,Dt,Vt/Yt*this._pixelsPerMercatorPixel),this._camera.position=[dt[0],dt[1],$t.z*this._pixelsPerMercatorPixel-Dt[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const et=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||et){const Yt=this.center;return Yt.lat=_.clamp(Yt.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!et)&&(Yt.lng=_.clamp(Yt.lng,this.minLng,this.maxLng)),this.center=Yt,void(this._constraining=!1)}const nt=this._unmodified,{x:ct,y:dt}=this.point;let ft=0,_t=ct,xt=dt;const kt=this.width/2,$t=this.height/2,Dt=this.worldMinY*this.scale,Vt=this.worldMaxY*this.scale;if(dt-$t<Dt&&(xt=Dt+$t),dt+$t>Vt&&(xt=Vt-$t),Vt-Dt<this.height&&(ft=Math.max(ft,this.height/(Vt-Dt)),xt=(Vt+Dt)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Yt=this.worldMinX*this.scale,Jt=this.worldMaxX*this.scale,er=this.worldSize/2-(Yt+Jt)/2;_t=(ct+er+this.worldSize)%this.worldSize-er,_t-kt<Yt&&(_t=Yt+kt),_t+kt>Jt&&(_t=Jt-kt),Jt-Yt<this.width&&(ft=Math.max(ft,this.width/(Jt-Yt)),_t=(Jt+Yt)/2)}_t===ct&&xt===dt||(this.center=this.unproject(new _.Point(_t,xt))),ft&&(this.zoom+=this.scaleZoom(ft)),this._constrainCamera(),this._unmodified=nt,this._constraining=!1}_minZoomForBounds(){let et=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(et=Math.max(et,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),et}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const et=this.centerOffset,nt=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=_.mercatorZfromAltitude(1,this.center.lat)/_.mercatorZfromAltitude(1,_.GLOBE_SCALE_MATCH_LATITUDE));const ct=rm(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,ct),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const dt=this.projection.zAxisUnit==="meters"?nt:1,ft=this._camera.getWorldToCamera(this.worldSize,dt),_t=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);_t[8]=2*-et.x/this.width,_t[9]=2*et.y/this.height;let xt=_.mul([],_t,ft);if(this.projection.isReprojectedInTileSpace){const _r=this.locationCoordinate(this.center),vr=_.identity([]);_.translate(vr,vr,[_r.x*this.worldSize,_r.y*this.worldSize,0]),_.multiply(vr,vr,Du(this)),_.translate(vr,vr,[-_r.x*this.worldSize,-_r.y*this.worldSize,0]),_.multiply(xt,xt,vr),this.inverseAdjustmentMatrix=function(kr){const Sr=Du(kr,!0);return ir([],[Sr[0],Sr[1],Sr[4],Sr[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=_.scale([],xt,[this.worldSize,this.worldSize,this.worldSize/dt,1]),this.projMatrix=xt,this.invProjMatrix=_.invert(new Float64Array(16),this.projMatrix);const kt=_.invert([],_t);this.frustumCorners=_.FrustumCorners.fromInvProjectionMatrix(kt,this.horizonLineFromTop(),this.height);const $t=new Float32Array(16);_.identity($t),_.scale($t,$t,[1,-1,1]),_.rotateX($t,$t,this._pitch),_.rotateZ($t,$t,this.angle);const Dt=_.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Vt=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Dt[8]=2*-et.x/this.width,Dt[9]=2*(et.y+Vt)/this.height,this.skyboxMatrix=_.multiply($t,Dt,$t);const Yt=this.point,Jt=Yt.x,er=Yt.y,_i=this.width%2/2,tr=this.height%2/2,jt=Math.cos(this.angle),Qt=Math.sin(this.angle),sr=Jt-Math.round(Jt)+jt*_i+Qt*tr,lr=er-Math.round(er)+jt*tr+Qt*_i,yr=new Float64Array(xt);if(_.translate(yr,yr,[sr>.5?sr-1:sr,lr>.5?lr-1:lr,0]),this.alignedProjMatrix=yr,xt=_.create(),_.scale(xt,xt,[this.width/2,-this.height/2,1]),_.translate(xt,xt,[1,-1,0]),this.labelPlaneMatrix=xt,xt=_.create(),_.scale(xt,xt,[1,-1,1]),_.translate(xt,xt,[-1,-1,0]),_.scale(xt,xt,[2/this.width,2/this.height,1]),this.glCoordMatrix=xt,this.pixelMatrix=_.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},xt=_.invert(new Float64Array(16),this.pixelMatrix),!xt)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=xt,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=_.calculateGlobeMatrix(this);const _r=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=_.transformMat4(_r,_r,ft),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=xt;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const et=this.cameraWorldSizeForFog,nt=this.cameraPixelsPerMeter,ct=this._camera.position,dt=1/this.height/this._pixelsPerMercatorPixel,ft=[et,et,nt];_.scale$2(ft,ft,dt),_.scale$2(ct,ct,-1),_.multiply$2(ct,ct,ft);const _t=_.create();_.translate(_t,_t,ct),_.scale(_t,_t,ft),this.mercatorFogMatrix=_t,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(et,nt,dt)}_computeCameraPosition(et){const nt=(et=et||this.pixelsPerMeter)/this.pixelsPerMeter,ct=this._camera.forward(),dt=this.point,ft=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*nt-et/this.worldSize*this._centerAltitude;return[dt.x/this.worldSize-ct[0]*ft,dt.y/this.worldSize-ct[1]*ft,et/this.worldSize*this._centerAltitude-ct[2]*ft]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(et){const nt=this._maxCameraBoundsDistance()*Math.cos(this._pitch),ct=this._camera.position[2],dt=et[2];let ft=1;this.projection.wrap&&(this.center=this.center.wrap()),dt>0&&(ft=Math.min((nt-ct)/dt,1)),this._camera.position=_.scaleAndAdd([],this._camera.position,et,ft),this._updateStateFromCamera()}_updateStateFromCamera(){const et=this._camera.position,nt=this._camera.forward(),{pitch:ct,bearing:dt}=this._camera.getPitchBearing(),ft=_.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,_t=this._mercatorZfromZoom(this._maxZoom)*Math.cos(_.degToRad(this._maxPitch)),xt=Math.max((et[2]-ft)/Math.cos(ct),_t),kt=this._zoomFromMercatorZ(xt);_.scaleAndAdd(et,et,nt,xt),this._pitch=_.clamp(ct,_.degToRad(this.minPitch),_.degToRad(this.maxPitch)),this.angle=_.wrap(dt,-Math.PI,Math.PI),this._setZoom(_.clamp(kt,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new _.MercatorCoordinate(et[0],et[1],et[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(et){return Math.pow(2,et)*this.tileSize}_mercatorZfromZoom(et){return this.cameraToCenterDistance/this._worldSizeFromZoom(et)}_minimumHeightOverTerrain(){const et=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(et)}_zoomFromMercatorZ(et){return this.scaleZoom(this.cameraToCenterDistance/(et*this.tileSize))}zoomFromMercatorZAdjusted(et){let nt=0,ct=_.GLOBE_ZOOM_THRESHOLD_MAX,dt=0,ft=1/0;for(;ct-nt>1e-6&&ct>nt;){const _t=nt+.5*(ct-nt),xt=this.tileSize*Math.pow(2,_t),kt=this.getCameraToCenterDistance(this.projection,_t,xt),$t=this.scaleZoom(kt/(et*this.tileSize)),Dt=Math.abs(_t-$t);Dt<ft&&(ft=Dt,dt=_t),_t<$t?nt=_t:ct=_t}return dt}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(_.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(et,nt){const ct=Math.min(et.x,nt.x),dt=Math.max(et.x,nt.x),ft=Math.min(et.y,nt.y),_t=Math.max(et.y,nt.y);if(ft<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const xt=[new _.Point(ct,ft),new _.Point(dt,_t),new _.Point(ct,_t),new _.Point(dt,ft)],kt=this.renderWorldCopies?-3:0,$t=this.renderWorldCopies?4:1;for(const Dt of xt){const Vt=this.pointRayIntersection(Dt);if(Vt.t<0)return!0;const Yt=this.rayIntersectionCoordinate(Vt);if(Yt.x<kt||Yt.y<0||Yt.x>$t||Yt.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+_.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new _.Point(0,0),new _.Point(this.width,this.height))}zoomDeltaToMovement(et,nt){const ct=_.length(_.sub([],this._camera.position,et)),dt=this._zoomFromMercatorZ(ct)+nt;return ct-this._mercatorZfromZoom(dt)}getCameraPoint(){if(this.projection.name==="globe"){const et=function([nt,ct,dt],ft){const _t=[nt,ct,dt,1];_.transformMat4$1(_t,_t,ft);const xt=_t[3]=Math.max(_t[3],1e-6);return _t[0]/=xt,_t[1]/=xt,_t[2]/=xt,_t}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new _.Point(et[0],et[1])}{const et=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new _.Point(0,et))}}getCameraToCenterDistance(et,nt=this.zoom,ct=this.worldSize){const dt=rm(et,nt,this.width,this.height,1024),ft=et.pixelSpaceConversion(this.center.lat,ct,dt);return .5/Math.tan(.5*this._fov)*this.height*ft}getWorldToCameraMatrix(){const et=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&_.multiply(et,et,this.globeMatrix),et}}function zu(at,et){let nt=!1,ct=null;const dt=()=>{ct=null,nt&&(at(),ct=setTimeout(dt,et),nt=!1)};return()=>(nt=!0,ct||dt(),ct)}class hy{constructor(et){this._hashName=et&&encodeURIComponent(et),_.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=zu(this._updateHashUnthrottled.bind(this),300)}addTo(et){return this._map=et,_.window.addEventListener("hashchange",this._onHashChange,!1),et.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),_.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const et=this._map;if(!et)return"";const nt=gp(et);if(this._hashName){const ct=this._hashName;let dt=!1;const ft=_.window.location.hash.slice(1).split("&").map(_t=>{const xt=_t.split("=")[0];return xt===ct?(dt=!0,`${xt}=${nt}`):_t}).filter(_t=>_t);return dt||ft.push(`${ct}=${nt}`),`#${ft.join("&")}`}return`#${nt}`}_getCurrentHash(){const et=_.window.location.hash.replace("#","");if(this._hashName){let nt;return et.split("&").map(ct=>ct.split("=")).forEach(ct=>{ct[0]===this._hashName&&(nt=ct)}),(nt&&nt[1]||"").split("/")}return et.split("/")}_onHashChange(){const et=this._map;if(!et)return!1;const nt=this._getCurrentHash();if(nt.length>=3&&!nt.some(ct=>isNaN(ct))){const ct=et.dragRotate.isEnabled()&&et.touchZoomRotate.isEnabled()?+(nt[3]||0):et.getBearing();return et.jumpTo({center:[+nt[2],+nt[1]],zoom:+nt[0],bearing:ct,pitch:+(nt[4]||0)}),!0}return!1}_updateHashUnthrottled(){const et=_.window.location.href.replace(/(#.+)?$/,this.getHashString());_.window.history.replaceState(_.window.history.state,null,et)}}function gp(at,et){const nt=at.getCenter(),ct=Math.round(100*at.getZoom())/100,dt=Math.ceil((ct*Math.LN2+Math.log(512/360/.5))/Math.LN10),ft=Math.pow(10,dt),_t=Math.round(nt.lng*ft)/ft,xt=Math.round(nt.lat*ft)/ft,kt=at.getBearing(),$t=at.getPitch();let Dt=et?`/${_t}/${xt}/${ct}`:`${ct}/${xt}/${_t}`;return(kt||$t)&&(Dt+="/"+Math.round(10*kt)/10),$t&&(Dt+=`/${Math.round($t)}`),Dt}const yp={linearity:.3,easing:_.bezier(0,0,.3,1)},om=_.extend({deceleration:2500,maxSpeed:1400},yp),sm=_.extend({deceleration:20,maxSpeed:1400},yp),yn=_.extend({deceleration:1e3,maxSpeed:360},yp),Xs=_.extend({deceleration:1e3,maxSpeed:90},yp);class R0{constructor(et){this._map=et,this.clear()}clear(){this._inertiaBuffer=[]}record(et){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:_.exported.now(),settings:et})}_drainInertiaBuffer(){const et=this._inertiaBuffer,nt=_.exported.now();for(;et.length>0&&nt-et[0].time>160;)et.shift()}_onMoveEnd(et){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const nt={zoom:0,bearing:0,pitch:0,pan:new _.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:ft}of this._inertiaBuffer)nt.zoom+=ft.zoomDelta||0,nt.bearing+=ft.bearingDelta||0,nt.pitch+=ft.pitchDelta||0,ft.panDelta&&nt.pan._add(ft.panDelta),ft.around&&(nt.around=ft.around),ft.pinchAround&&(nt.pinchAround=ft.pinchAround);const ct=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,dt={};if(nt.pan.mag()){const ft=_p(nt.pan.mag(),ct,_.extend({},om,et||{}));dt.offset=nt.pan.mult(ft.amount/nt.pan.mag()),dt.center=this._map.transform.center,vp(dt,ft)}if(nt.zoom){const ft=_p(nt.zoom,ct,sm);dt.zoom=this._map.transform.zoom+ft.amount,vp(dt,ft)}if(nt.bearing){const ft=_p(nt.bearing,ct,yn);dt.bearing=this._map.transform.bearing+_.clamp(ft.amount,-179,179),vp(dt,ft)}if(nt.pitch){const ft=_p(nt.pitch,ct,Xs);dt.pitch=this._map.transform.pitch+ft.amount,vp(dt,ft)}if(dt.zoom||dt.bearing){const ft=nt.pinchAround===void 0?nt.around:nt.pinchAround;dt.around=ft?this._map.unproject(ft):this._map.getCenter()}return this.clear(),dt.noMoveStart=!0,dt}}function vp(at,et){(!at.duration||at.duration<et.duration)&&(at.duration=et.duration,at.easing=et.easing)}function _p(at,et,nt){const{maxSpeed:ct,linearity:dt,deceleration:ft}=nt,_t=_.clamp(at*dt/(et/1e3),-ct,ct),xt=Math.abs(_t)/(ft*dt);return{easing:nt.easing,duration:1e3*xt,amount:_t*(xt/2)}}class ss extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(et,nt,ct,dt={}){const ft=Bt(nt.getCanvasContainer(),ct),_t=nt.unproject(ft);super(et,_.extend({point:ft,lngLat:_t,originalEvent:ct},dt)),this._defaultPrevented=!1,this.target=nt}}class xp extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(et,nt,ct){const dt=et==="touchend"?ct.changedTouches:ct.touches,ft=Ft(nt.getCanvasContainer(),dt),_t=ft.map(kt=>nt.unproject(kt)),xt=ft.reduce((kt,$t,Dt,Vt)=>kt.add($t.div(Vt.length)),new _.Point(0,0));super(et,{points:ft,point:xt,lngLats:_t,lngLat:nt.unproject(xt),originalEvent:ct}),this._defaultPrevented=!1}}class am extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(et,nt,ct){super(et,{originalEvent:ct}),this._defaultPrevented=!1}}class uy{constructor(et,nt){this._map=et,this._clickTolerance=nt.clickTolerance}reset(){this._mousedownPos=void 0}wheel(et){return this._firePreventable(new am(et.type,this._map,et))}mousedown(et,nt){return this._mousedownPos=nt,this._firePreventable(new ss(et.type,this._map,et))}mouseup(et){this._map.fire(new ss(et.type,this._map,et))}preclick(et){const nt=_.extend({},et);nt.type="preclick",this._map.fire(new ss(nt.type,this._map,nt))}click(et,nt){this._mousedownPos&&this._mousedownPos.dist(nt)>=this._clickTolerance||(this.preclick(et),this._map.fire(new ss(et.type,this._map,et)))}dblclick(et){return this._firePreventable(new ss(et.type,this._map,et))}mouseover(et){this._map.fire(new ss(et.type,this._map,et))}mouseout(et){this._map.fire(new ss(et.type,this._map,et))}touchstart(et){return this._firePreventable(new xp(et.type,this._map,et))}touchmove(et){this._map.fire(new xp(et.type,this._map,et))}touchend(et){this._map.fire(new xp(et.type,this._map,et))}touchcancel(et){this._map.fire(new xp(et.type,this._map,et))}_firePreventable(et){if(this._map.fire(et),et.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lm{constructor(et){this._map=et}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(et){this._map.fire(new ss(et.type,this._map,et))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ss("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(et){this._delayContextMenu?this._contextMenuEvent=et:this._map.fire(new ss(et.type,this._map,et)),this._map.listens("contextmenu")&&et.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class D0{constructor(et,nt){this._map=et,this._el=et.getCanvasContainer(),this._container=et.getContainer(),this._clickTolerance=nt.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(et,nt){this.isEnabled()&&et.shiftKey&&et.button===0&&(Tt(),this._startPos=this._lastPos=nt,this._active=!0)}mousemoveWindow(et,nt){if(!this._active)return;const ct=nt,dt=this._startPos,ft=this._lastPos;if(!dt||!ft||ft.equals(ct)||!this._box&&ct.dist(dt)<this._clickTolerance)return;this._lastPos=ct,this._box||(this._box=bt("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",et));const _t=Math.min(dt.x,ct.x),xt=Math.max(dt.x,ct.x),kt=Math.min(dt.y,ct.y),$t=Math.max(dt.y,ct.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${_t}px,${kt}px)`,this._box.style.width=xt-_t+"px",this._box.style.height=$t-kt+"px")})}mouseupWindow(et,nt){if(!this._active)return;const ct=this._startPos,dt=nt;if(ct&&et.button===0){if(this.reset(),It(),ct.x!==dt.x||ct.y!==dt.y)return this._map.fire(new _.Event("boxzoomend",{originalEvent:et})),{cameraAnimation:ft=>ft.fitScreenCoordinates(ct,dt,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",et)}}keydown(et){this._active&&et.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",et))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Ct(),delete this._startPos,delete this._lastPos}_fireEvent(et,nt){return this._map.fire(new _.Event(et,{originalEvent:nt}))}}function cm(at,et){const nt={};for(let ct=0;ct<at.length;ct++)nt[at[ct].identifier]=et[ct];return nt}class Ou{constructor(et){this.reset(),this.numTouches=et.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(et,nt,ct){(this.centroid||ct.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=et.timeStamp),ct.length===this.numTouches&&(this.centroid=function(dt){const ft=new _.Point(0,0);for(const _t of dt)ft._add(_t);return ft.div(dt.length)}(nt),this.touches=cm(ct,nt)))}touchmove(et,nt,ct){if(this.aborted||!this.centroid)return;const dt=cm(ct,nt);for(const ft in this.touches){const _t=dt[ft];(!_t||_t.dist(this.touches[ft])>30)&&(this.aborted=!0)}}touchend(et,nt,ct){if((!this.centroid||et.timeStamp-this.startTime>500)&&(this.aborted=!0),ct.length===0){const dt=!this.aborted&&this.centroid;if(this.reset(),dt)return dt}}}class dy{constructor(et){this.singleTap=new Ou(et),this.numTaps=et.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(et,nt,ct){this.singleTap.touchstart(et,nt,ct)}touchmove(et,nt,ct){this.singleTap.touchmove(et,nt,ct)}touchend(et,nt,ct){const dt=this.singleTap.touchend(et,nt,ct);if(dt){const ft=et.timeStamp-this.lastTime<500,_t=!this.lastTap||this.lastTap.dist(dt)<30;if(ft&&_t||this.reset(),this.count++,this.lastTime=et.timeStamp,this.lastTap=dt,this.count===this.numTaps)return this.reset(),dt}}}class Hv{constructor(){this._zoomIn=new dy({numTouches:1,numTaps:2}),this._zoomOut=new dy({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(et,nt,ct){this._zoomIn.touchstart(et,nt,ct),this._zoomOut.touchstart(et,nt,ct)}touchmove(et,nt,ct){this._zoomIn.touchmove(et,nt,ct),this._zoomOut.touchmove(et,nt,ct)}touchend(et,nt,ct){const dt=this._zoomIn.touchend(et,nt,ct),ft=this._zoomOut.touchend(et,nt,ct);return dt?(this._active=!0,et.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:_t=>_t.easeTo({duration:300,zoom:_t.getZoom()+1,around:_t.unproject(dt)},{originalEvent:et})}):ft?(this._active=!0,et.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:_t=>_t.easeTo({duration:300,zoom:_t.getZoom()-1,around:_t.unproject(ft)},{originalEvent:et})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const $0={0:1,2:2};class Bu{constructor(et){this.reset(),this._clickTolerance=et.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(et,nt){return!1}_move(et,nt){return{}}mousedown(et,nt){if(this._lastPoint)return;const ct=Gt(et);this._correctButton(et,ct)&&(this._lastPoint=nt,this._eventButton=ct)}mousemoveWindow(et,nt){const ct=this._lastPoint;if(ct){if(et.preventDefault(),this._eventButton!=null&&function(dt,ft){const _t=$0[ft];return dt.buttons===void 0||(dt.buttons&_t)!==_t}(et,this._eventButton))this.reset();else if(this._moved||!(nt.dist(ct)<this._clickTolerance))return this._moved=!0,this._lastPoint=nt,this._move(ct,nt)}}mouseupWindow(et){this._lastPoint&&Gt(et)===this._eventButton&&(this._moved&&It(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class py extends Bu{mousedown(et,nt){super.mousedown(et,nt),this._lastPoint&&(this._active=!0)}_correctButton(et,nt){return nt===0&&!et.ctrlKey}_move(et,nt){return{around:nt,panDelta:nt.sub(et)}}}class fy extends Bu{_correctButton(et,nt){return nt===0&&et.ctrlKey||nt===2}_move(et,nt){const ct=.8*(nt.x-et.x);if(ct)return this._active=!0,{bearingDelta:ct}}contextmenu(et){et.preventDefault()}}class my extends Bu{_correctButton(et,nt){return nt===0&&et.ctrlKey||nt===2}_move(et,nt){const ct=-.5*(nt.y-et.y);if(ct)return this._active=!0,{pitchDelta:ct}}contextmenu(et){et.preventDefault()}}class hm{constructor(et,nt){this._map=et,this._el=et.getCanvasContainer(),this._minTouches=1,this._clickTolerance=nt.clickTolerance||1,this.reset(),_.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new _.Point(0,0)}touchstart(et,nt,ct){return this._calculateTransform(et,nt,ct)}touchmove(et,nt,ct){if(this._active&&!(ct.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(ct.length===1&&!_.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return et.cancelable&&et.preventDefault(),this._calculateTransform(et,nt,ct)}}touchend(et,nt,ct){this._calculateTransform(et,nt,ct),this._active&&ct.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(et,nt,ct){ct.length>0&&(this._active=!0);const dt=cm(ct,nt),ft=new _.Point(0,0),_t=new _.Point(0,0);let xt=0;for(const $t in dt){const Dt=dt[$t],Vt=this._touches[$t];Vt&&(ft._add(Dt),_t._add(Dt.sub(Vt)),xt++,dt[$t]=Dt)}if(this._touches=dt,xt<this._minTouches||!_t.mag())return;const kt=_t.div(xt);return this._sum._add(kt),this._sum.mag()<this._clickTolerance?void 0:{around:ft.div(xt),panDelta:kt}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=bt("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class bp{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(et){}_move(et,nt,ct){return{}}touchstart(et,nt,ct){this._firstTwoTouches||ct.length<2||(this._firstTwoTouches=[ct[0].identifier,ct[1].identifier],this._start([nt[0],nt[1]]))}touchmove(et,nt,ct){const dt=this._firstTwoTouches;if(!dt)return;et.preventDefault();const[ft,_t]=dt,xt=wp(ct,nt,ft),kt=wp(ct,nt,_t);if(!xt||!kt)return;const $t=this._aroundCenter?null:xt.add(kt).div(2);return this._move([xt,kt],$t,et)}touchend(et,nt,ct){if(!this._firstTwoTouches)return;const[dt,ft]=this._firstTwoTouches,_t=wp(ct,nt,dt),xt=wp(ct,nt,ft);_t&&xt||(this._active&&It(),this.reset())}touchcancel(){this.reset()}enable(et){this._enabled=!0,this._aroundCenter=!!et&&et.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function wp(at,et,nt){for(let ct=0;ct<at.length;ct++)if(at[ct].identifier===nt)return et[ct]}function gy(at,et){return Math.log(at/et)/Math.LN2}class z0 extends bp{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(et){this._startDistance=this._distance=et[0].dist(et[1])}_move(et,nt){const ct=this._distance;if(this._distance=et[0].dist(et[1]),this._active||!(Math.abs(gy(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gy(this._distance,ct),pinchAround:nt}}}function yy(at,et){return 180*at.angleWith(et)/Math.PI}class O0 extends bp{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(et){this._startVector=this._vector=et[0].sub(et[1]),this._minDiameter=et[0].dist(et[1])}_move(et,nt){const ct=this._vector;if(this._vector=et[0].sub(et[1]),ct&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:yy(this._vector,ct),pinchAround:nt}}_isBelowThreshold(et){this._minDiameter=Math.min(this._minDiameter,et.mag());const nt=25/(Math.PI*this._minDiameter)*360,ct=this._startVector;if(!ct)return!1;const dt=yy(et,ct);return Math.abs(dt)<nt}}function Kl(at){return Math.abs(at.y)>Math.abs(at.x)}class B0 extends bp{constructor(et){super(),this._map=et}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(et){this._lastPoints=et,Kl(et[0].sub(et[1]))&&(this._valid=!1)}_move(et,nt,ct){const dt=this._lastPoints;if(!dt)return;const ft=et[0].sub(dt[0]),_t=et[1].sub(dt[1]);return this._map._cooperativeGestures&&!_.isFullscreen()&&ct.touches.length<3||(this._valid=this.gestureBeginsVertically(ft,_t,ct.timeStamp),!this._valid)?void 0:(this._lastPoints=et,this._active=!0,{pitchDelta:(ft.y+_t.y)/2*-.5})}gestureBeginsVertically(et,nt,ct){if(this._valid!==void 0)return this._valid;const dt=et.mag()>=2,ft=nt.mag()>=2;if(!dt&&!ft)return;if(!dt||!ft)return this._firstMove==null&&(this._firstMove=ct),ct-this._firstMove<100&&void 0;const _t=et.y>0==nt.y>0;return Kl(et)&&Kl(nt)&&_t}}const F0={panStep:100,bearingStep:15,pitchStep:10};class qv{constructor(){const et=F0;this._panStep=et.panStep,this._bearingStep=et.bearingStep,this._pitchStep=et.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(et){if(et.altKey||et.ctrlKey||et.metaKey)return;let nt=0,ct=0,dt=0,ft=0,_t=0;switch(et.keyCode){case 61:case 107:case 171:case 187:nt=1;break;case 189:case 109:case 173:nt=-1;break;case 37:et.shiftKey?ct=-1:(et.preventDefault(),ft=-1);break;case 39:et.shiftKey?ct=1:(et.preventDefault(),ft=1);break;case 38:et.shiftKey?dt=1:(et.preventDefault(),_t=-1);break;case 40:et.shiftKey?dt=-1:(et.preventDefault(),_t=1);break;default:return}return this._rotationDisabled&&(ct=0,dt=0),{cameraAnimation:xt=>{const kt=xt.getZoom();xt.easeTo({duration:300,easeId:"keyboardHandler",easing:V0,zoom:nt?Math.round(kt)+nt*(et.shiftKey?2:1):kt,bearing:xt.getBearing()+ct*this._bearingStep,pitch:xt.getPitch()+dt*this._pitchStep,offset:[-ft*this._panStep,-_t*this._panStep],center:xt.getCenter()},{originalEvent:et})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function V0(at){return at*(2-at)}const vy=4.000244140625;class N0{constructor(et,nt){this._map=et,this._el=et.getCanvasContainer(),this._handler=nt,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,_.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(et){this._defaultZoomRate=et}setWheelZoomRate(et){this._wheelZoomRate=et}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(et){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!et&&et.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(et){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(et.ctrlKey||et.metaKey||this.isZooming()||_.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let nt=et.deltaMode===_.window.WheelEvent.DOM_DELTA_LINE?40*et.deltaY:et.deltaY;const ct=_.exported.now(),dt=ct-(this._lastWheelEventTime||0);this._lastWheelEventTime=ct,nt!==0&&nt%vy==0?this._type="wheel":nt!==0&&Math.abs(nt)<4?this._type="trackpad":dt>400?(this._type=null,this._lastValue=nt,this._timeout=setTimeout(this._onTimeout,40,et)):this._type||(this._type=Math.abs(dt*nt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,nt+=this._lastValue)),et.shiftKey&&nt&&(nt/=4),this._type&&(this._lastWheelEvent=et,this._delta-=nt,this._active||this._start(et)),et.preventDefault()}_onTimeout(et){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(et)}_start(et){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const nt=Bt(this._el,et);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:nt,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const et=this._map.transform;this._type==="wheel"&&et.projection.wrap&&(et._center.lng>=180||et._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const nt=()=>et._terrainEnabled()&&this._aroundCoord?et.computeZoomRelativeTo(this._aroundCoord):et.zoom;if(this._delta!==0){const kt=this._type==="wheel"&&Math.abs(this._delta)>vy?this._wheelZoomRate:this._defaultZoomRate;let $t=2/(1+Math.exp(-Math.abs(this._delta*kt)));this._delta<0&&$t!==0&&($t=1/$t);const Dt=nt(),Vt=Math.pow(2,Dt),Yt=typeof this._targetZoom=="number"?et.zoomScale(this._targetZoom):Vt;this._targetZoom=Math.min(et.maxZoom,Math.max(et.minZoom,et.scaleZoom(Yt*$t))),this._type==="wheel"&&(this._startZoom=Dt,this._easing=this._smoothOutEasing(200)),this._delta=0}const ct=typeof this._targetZoom=="number"?this._targetZoom:nt(),dt=this._startZoom,ft=this._easing;let _t,xt=!1;if(this._type==="wheel"&&dt&&ft){const kt=Math.min((_.exported.now()-this._lastWheelEventTime)/200,1),$t=ft(kt);_t=_.number(dt,ct,$t),kt<1?this._frameId||(this._frameId=!0):xt=!0}else _t=ct,xt=!0;return this._active=!0,xt&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!xt,zoomDelta:_t-nt(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(et){let nt=_.ease;if(this._prevEase){const ct=this._prevEase,dt=(_.exported.now()-ct.start)/ct.duration,ft=ct.easing(dt+.01)-ct.easing(dt),_t=.27/Math.sqrt(ft*ft+1e-4)*.01,xt=Math.sqrt(.0729-_t*_t);nt=_.bezier(_t,xt,.25,1)}return this._prevEase={start:_.exported.now(),duration:et,easing:nt},nt}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=bt("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(_.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class j0{constructor(et,nt){this._clickZoom=et,this._tapZoom=nt}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vs{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(et,nt){return et.preventDefault(),{cameraAnimation:ct=>{ct.easeTo({duration:300,zoom:ct.getZoom()+(et.shiftKey?-1:1),around:ct.unproject(nt)},{originalEvent:et})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wv{constructor(){this._tap=new dy({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(et,nt,ct){this._swipePoint||(this._tapTime&&et.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?ct.length>0&&(this._swipePoint=nt[0],this._swipeTouch=ct[0].identifier):this._tap.touchstart(et,nt,ct))}touchmove(et,nt,ct){if(this._tapTime){if(this._swipePoint){if(ct[0].identifier!==this._swipeTouch)return;const dt=nt[0],ft=dt.y-this._swipePoint.y;return this._swipePoint=dt,et.preventDefault(),this._active=!0,{zoomDelta:ft/128}}}else this._tap.touchmove(et,nt,ct)}touchend(et,nt,ct){this._tapTime?this._swipePoint&&ct.length===0&&this.reset():this._tap.touchend(et,nt,ct)&&(this._tapTime=et.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class U0{constructor(et,nt,ct){this._el=et,this._mousePan=nt,this._touchPan=ct}enable(et){this._inertiaOptions=et||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zv{constructor(et,nt,ct){this._pitchWithRotate=et.pitchWithRotate,this._mouseRotate=nt,this._mousePitch=ct}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Xv{constructor(et,nt,ct,dt){this._el=et,this._touchZoom=nt,this._touchRotate=ct,this._tapDragZoom=dt,this._rotationDisabled=!1,this._enabled=!0}enable(et){this._touchZoom.enable(et),this._rotationDisabled||this._touchRotate.enable(et),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const js=at=>at.zoom||at.drag||at.pitch||at.rotate;class G0 extends _.Event{}class Yv{constructor(){this.constants=[1,1,.01],this.radius=0}setup(et,nt){const ct=_.sub([],nt,et);this.radius=_.length(ct[2]<0?_.div([],ct,this.constants):[ct[0],ct[1],0])}projectRay(et){_.div(et,et,this.constants),_.normalize(et,et),_.mul$1(et,et,this.constants);const nt=_.scale$2([],et,this.radius);if(nt[2]>0){const ct=_.scale$2([],[0,0,1],_.dot(nt,[0,0,1])),dt=_.scale$2([],_.normalize([],[nt[0],nt[1],0]),this.radius),ft=_.add([],nt,_.scale$2([],_.sub([],_.add([],dt,ct),nt),2));nt[0]=ft[0],nt[1]=ft[1]}return nt}}function Ys(at){return at.panDelta&&at.panDelta.mag()||at.zoomDelta||at.bearingDelta||at.pitchDelta}class ba{constructor(et,nt){this._map=et,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new R0(et),this._bearingSnap=nt.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Yv,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(nt),_.bindAll(["handleEvent","handleWindowEvent"],this);const ct=this._el;this._listeners=[[ct,"touchstart",{passive:!0}],[ct,"touchmove",{passive:!1}],[ct,"touchend",void 0],[ct,"touchcancel",void 0],[ct,"mousedown",void 0],[ct,"mousemove",void 0],[ct,"mouseup",void 0],[_.window.document,"mousemove",{capture:!0}],[_.window.document,"mouseup",void 0],[ct,"mouseover",void 0],[ct,"mouseout",void 0],[ct,"dblclick",void 0],[ct,"click",void 0],[ct,"keydown",{capture:!1}],[ct,"keyup",void 0],[ct,"wheel",{passive:!1}],[ct,"contextmenu",void 0],[_.window,"blur",void 0]];for(const[dt,ft,_t]of this._listeners)dt.addEventListener(ft,dt===_.window.document?this.handleWindowEvent:this.handleEvent,_t)}destroy(){for(const[et,nt,ct]of this._listeners)et.removeEventListener(nt,et===_.window.document?this.handleWindowEvent:this.handleEvent,ct)}_addDefaultHandlers(et){const nt=this._map,ct=nt.getCanvasContainer();this._add("mapEvent",new uy(nt,et));const dt=nt.boxZoom=new D0(nt,et);this._add("boxZoom",dt);const ft=new Hv,_t=new vs;nt.doubleClickZoom=new j0(_t,ft),this._add("tapZoom",ft),this._add("clickZoom",_t);const xt=new Wv;this._add("tapDragZoom",xt);const kt=nt.touchPitch=new B0(nt);this._add("touchPitch",kt);const $t=new fy(et),Dt=new my(et);nt.dragRotate=new Zv(et,$t,Dt),this._add("mouseRotate",$t,["mousePitch"]),this._add("mousePitch",Dt,["mouseRotate"]);const Vt=new py(et),Yt=new hm(nt,et);nt.dragPan=new U0(ct,Vt,Yt),this._add("mousePan",Vt),this._add("touchPan",Yt,["touchZoom","touchRotate"]);const Jt=new O0,er=new z0;nt.touchZoomRotate=new Xv(ct,er,Jt,xt),this._add("touchRotate",Jt,["touchPan","touchZoom"]),this._add("touchZoom",er,["touchPan","touchRotate"]),this._add("blockableMapEvent",new lm(nt));const _i=nt.scrollZoom=new N0(nt,this);this._add("scrollZoom",_i,["mousePan"]);const tr=nt.keyboard=new qv;this._add("keyboard",tr);for(const jt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])et.interactive&&et[jt]&&nt[jt].enable(et[jt])}_add(et,nt,ct){this._handlers.push({handlerName:et,handler:nt,allowed:ct}),this._handlersById[et]=nt}stop(et){if(!this._updatingCamera){for(const{handler:nt}of this._handlers)nt.reset();this._inertia.clear(),this._fireEvents({},{},et),this._changes=[]}}isActive(){for(const{handler:et}of this._handlers)if(et.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!js(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(et,nt,ct){for(const dt in et)if(dt!==ct&&(!nt||nt.indexOf(dt)<0))return!0;return!1}handleWindowEvent(et){this.handleEvent(et,`${et.type}Window`)}_getMapTouches(et){const nt=[];for(const ct of et)this._el.contains(ct.target)&&nt.push(ct);return nt}handleEvent(et,nt){this._updatingCamera=!0;const ct=et.type==="renderFrame",dt=ct?void 0:et,ft={needsRenderFrame:!1},_t={},xt={},kt=et.touches?this._getMapTouches(et.touches):void 0,$t=kt?Ft(this._el,kt):ct?void 0:Bt(this._el,et);for(const{handlerName:Yt,handler:Jt,allowed:er}of this._handlers){if(!Jt.isEnabled())continue;let _i;this._blockedByActive(xt,er,Yt)?Jt.reset():Jt[nt||et.type]&&(_i=Jt[nt||et.type](et,$t,kt),this.mergeHandlerResult(ft,_t,_i,Yt,dt),_i&&_i.needsRenderFrame&&this._triggerRenderFrame()),(_i||Jt.isActive())&&(xt[Yt]=Jt)}const Dt={};for(const Yt in this._previousActiveHandlers)xt[Yt]||(Dt[Yt]=dt);this._previousActiveHandlers=xt,(Object.keys(Dt).length||Ys(ft))&&(this._changes.push([ft,_t,Dt]),this._triggerRenderFrame()),(Object.keys(xt).length||Ys(ft))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Vt}=ft;Vt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Vt(this._map))}mergeHandlerResult(et,nt,ct,dt,ft){if(!ct)return;_.extend(et,ct);const _t={handlerName:dt,originalEvent:ct.originalEvent||ft};ct.zoomDelta!==void 0&&(nt.zoom=_t),ct.panDelta!==void 0&&(nt.drag=_t),ct.pitchDelta!==void 0&&(nt.pitch=_t),ct.bearingDelta!==void 0&&(nt.rotate=_t)}_applyChanges(){const et={},nt={},ct={};for(const[dt,ft,_t]of this._changes)dt.panDelta&&(et.panDelta=(et.panDelta||new _.Point(0,0))._add(dt.panDelta)),dt.zoomDelta&&(et.zoomDelta=(et.zoomDelta||0)+dt.zoomDelta),dt.bearingDelta&&(et.bearingDelta=(et.bearingDelta||0)+dt.bearingDelta),dt.pitchDelta&&(et.pitchDelta=(et.pitchDelta||0)+dt.pitchDelta),dt.around!==void 0&&(et.around=dt.around),dt.aroundCoord!==void 0&&(et.aroundCoord=dt.aroundCoord),dt.pinchAround!==void 0&&(et.pinchAround=dt.pinchAround),dt.noInertia&&(et.noInertia=dt.noInertia),_.extend(nt,ft),_.extend(ct,_t);this._updateMapTransform(et,nt,ct),this._changes=[]}_updateMapTransform(et,nt,ct){const dt=this._map,ft=dt.transform,_t=Qt=>[Qt.x,Qt.y,Qt.z];if((Qt=>{const sr=this._eventsInProgress.drag;return sr&&!this._handlersById[sr.handlerName].isActive()})()&&!Ys(et)){const Qt=ft.zoom;ft.cameraElevationReference="sea",ft.recenterOnTerrain(),ft.cameraElevationReference="ground",Qt!==ft.zoom&&this._map._update(!0)}if(ft._isCameraConstrained&&dt._stop(!0),!Ys(et))return void this._fireEvents(nt,ct,!0);let{panDelta:xt,zoomDelta:kt,bearingDelta:$t,pitchDelta:Dt,around:Vt,aroundCoord:Yt,pinchAround:Jt}=et;ft._isCameraConstrained&&(kt>0&&(kt=0),ft._isCameraConstrained=!1),Jt!==void 0&&(Vt=Jt),(kt||(Qt=>nt[Qt]&&!this._eventsInProgress[Qt])("drag"))&&Vt&&(this._dragOrigin=_t(ft.pointCoordinate3D(Vt)),this._trackingEllipsoid.setup(ft._camera.position,this._dragOrigin)),ft.cameraElevationReference="sea",dt._stop(!0),Vt=Vt||dt.transform.centerPoint,$t&&(ft.bearing+=$t),Dt&&(ft.pitch+=Dt),ft._updateCameraState();const er=[0,0,0];if(xt)if(ft.projection.name==="mercator"){const Qt=this._trackingEllipsoid.projectRay(ft.screenPointToMercatorRay(Vt).dir),sr=this._trackingEllipsoid.projectRay(ft.screenPointToMercatorRay(Vt.sub(xt)).dir);er[0]=sr[0]-Qt[0],er[1]=sr[1]-Qt[1]}else{const Qt=ft.pointCoordinate(Vt);if(ft.projection.name==="globe"){xt=xt.rotate(-ft.angle);const sr=ft._pixelsPerMercatorPixel/ft.worldSize;er[0]=-xt.x*_.mercatorScale(_.latFromMercatorY(Qt.y))*sr,er[1]=-xt.y*_.mercatorScale(ft.center.lat)*sr}else{const sr=ft.pointCoordinate(Vt.sub(xt));Qt&&sr&&(er[0]=sr.x-Qt.x,er[1]=sr.y-Qt.y)}}const _i=ft.zoom,tr=[0,0,0];if(kt){const Qt=_t(Yt||ft.pointCoordinate3D(Vt)),sr={dir:_.normalize([],_.sub([],Qt,ft._camera.position))};if(sr.dir[2]<0){const lr=ft.zoomDeltaToMovement(Qt,kt);_.scale$2(tr,sr.dir,lr)}}const jt=_.add(er,er,tr);ft._translateCameraConstrained(jt),kt&&Math.abs(ft.zoom-_i)>1e-4&&ft.recenterOnTerrain(),ft.cameraElevationReference="ground",this._map._update(),et.noInertia||this._inertia.record(et),this._fireEvents(nt,ct,!0)}_fireEvents(et,nt,ct){const dt=js(this._eventsInProgress),ft=js(et),_t={};for(const Dt in et){const{originalEvent:Vt}=et[Dt];this._eventsInProgress[Dt]||(_t[`${Dt}start`]=Vt),this._eventsInProgress[Dt]=et[Dt]}!dt&&ft&&this._fireEvent("movestart",ft.originalEvent);for(const Dt in _t)this._fireEvent(Dt,_t[Dt]);ft&&this._fireEvent("move",ft.originalEvent);for(const Dt in et){const{originalEvent:Vt}=et[Dt];this._fireEvent(Dt,Vt)}const xt={};let kt;for(const Dt in this._eventsInProgress){const{handlerName:Vt,originalEvent:Yt}=this._eventsInProgress[Dt];this._handlersById[Vt].isActive()||(delete this._eventsInProgress[Dt],kt=nt[Vt]||Yt,xt[`${Dt}end`]=kt)}for(const Dt in xt)this._fireEvent(Dt,xt[Dt]);const $t=js(this._eventsInProgress);if(ct&&(dt||ft)&&!$t){this._updatingCamera=!0;const Dt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Vt=Yt=>Yt!==0&&-this._bearingSnap<Yt&&Yt<this._bearingSnap;Dt?(Vt(Dt.bearing||this._map.getBearing())&&(Dt.bearing=0),this._map.easeTo(Dt,{originalEvent:kt})):(this._map.fire(new _.Event("moveend",{originalEvent:kt})),Vt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(et,nt){this._map.fire(new _.Event(et,nt?{originalEvent:nt}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(et=>{this._frameId=void 0,this.handleEvent(new G0("renderFrame",{timeStamp:et})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const uu="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class um extends _.Evented{constructor(et,nt){super(),this._moving=!1,this._zooming=!1,this.transform=et,this._bearingSnap=nt.bearingSnap,this._respectPrefersReducedMotion=nt.respectPrefersReducedMotion!==!1,_.bindAll(["_renderFrameCallback"],this)}getCenter(){return new _.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(et,nt){return this.jumpTo({center:et},nt)}panBy(et,nt,ct){return et=_.Point.convert(et).mult(-1),this.panTo(this.transform.center,_.extend({offset:et},nt),ct)}panTo(et,nt,ct){return this.easeTo(_.extend({center:et},nt),ct)}getZoom(){return this.transform.zoom}setZoom(et,nt){return this.jumpTo({zoom:et},nt),this}zoomTo(et,nt,ct){return this.easeTo(_.extend({zoom:et},nt),ct)}zoomIn(et,nt){return this.zoomTo(this.getZoom()+1,et,nt),this}zoomOut(et,nt){return this.zoomTo(this.getZoom()-1,et,nt),this}getBearing(){return this.transform.bearing}setBearing(et,nt){return this.jumpTo({bearing:et},nt),this}getPadding(){return this.transform.padding}setPadding(et,nt){return this.jumpTo({padding:et},nt),this}rotateTo(et,nt,ct){return this.easeTo(_.extend({bearing:et},nt),ct)}resetNorth(et,nt){return this.rotateTo(0,_.extend({duration:1e3},et),nt),this}resetNorthPitch(et,nt){return this.easeTo(_.extend({bearing:0,pitch:0,duration:1e3},et),nt),this}snapToNorth(et,nt){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(et,nt):this}getPitch(){return this.transform.pitch}setPitch(et,nt){return this.jumpTo({pitch:et},nt),this}cameraForBounds(et,nt){et=_.LngLatBounds.convert(et);const ct=nt&&nt.bearing||0,dt=nt&&nt.pitch||0,ft=et.getNorthWest(),_t=et.getSouthEast();return this._cameraForBounds(this.transform,ft,_t,ct,dt,nt)}_extendCameraOptions(et){const nt={top:0,bottom:0,right:0,left:0};if(typeof(et=_.extend({padding:nt,offset:[0,0],maxZoom:this.transform.maxZoom},et)).padding=="number"){const ct=et.padding;et.padding={top:ct,bottom:ct,right:ct,left:ct}}return et.padding=_.extend(nt,et.padding),et}_minimumAABBFrustumDistance(et,nt){const ct=nt.max[0]-nt.min[0],dt=nt.max[1]-nt.min[1];return ct/dt>et.aspect?ct/(2*Math.tan(.5*et.fovX)*et.aspect):dt/(2*Math.tan(.5*et.fovY)*et.aspect)}_cameraForBoundsOnGlobe(et,nt,ct,dt,ft,_t){const xt=et.clone(),kt=this._extendCameraOptions(_t);xt.bearing=dt,xt.pitch=ft;const $t=_.LngLat.convert(nt),Dt=_.LngLat.convert(ct),Vt=.5*($t.lat+Dt.lat),Yt=.5*($t.lng+Dt.lng),Jt=_.latLngToECEF(Vt,Yt),er=_.normalize([],Jt),_i=_.normalize([],_.cross([],er,[0,1,0])),tr=_.cross([],_i,er),jt=[_i[0],_i[1],_i[2],0,tr[0],tr[1],tr[2],0,er[0],er[1],er[2],0,0,0,0,1],Qt=[Jt,_.latLngToECEF($t.lat,$t.lng),_.latLngToECEF(Dt.lat,$t.lng),_.latLngToECEF(Dt.lat,Dt.lng),_.latLngToECEF($t.lat,Dt.lng),_.latLngToECEF(Vt,$t.lng),_.latLngToECEF(Vt,Dt.lng),_.latLngToECEF($t.lat,Yt),_.latLngToECEF(Dt.lat,Yt)];let sr=_.Aabb.fromPoints(Qt.map(Zr=>[_.dot(_i,Zr),_.dot(tr,Zr),_.dot(er,Zr)]));const lr=_.transformMat4([],sr.center,jt);_.squaredLength(lr)===0&&_.set(lr,0,0,1),_.normalize(lr,lr),_.scale$2(lr,lr,_.GLOBE_RADIUS),xt.center=_.ecefToLatLng(lr);const yr=xt.getWorldToCameraMatrix(),_r=_.invert(new Float64Array(16),yr);sr=_.Aabb.applyTransform(sr,_.multiply([],yr,jt)),_.transformMat4(lr,lr,yr);const vr=.5*(sr.max[2]-sr.min[2]),kr=this._minimumAABBFrustumDistance(xt,sr),Sr=_.scale$2([],[0,0,1],vr),Lr=_.add(Sr,lr,Sr),Jr=kr+(xt.pitch===0?0:_.distance(lr,Lr)),Ar=xt.globeCenterInViewSpace,Hr=_.sub([],lr,[Ar[0],Ar[1],Ar[2]]);_.normalize(Hr,Hr),_.scale$2(Hr,Hr,Jr);const Or=_.add([],lr,Hr);_.transformMat4(Or,Or,_r);const Qr=_.earthRadius/_.GLOBE_RADIUS,Mr=_.length(Or),Gr=_.mercatorZfromAltitude(Math.max(Mr*Qr-_.earthRadius,Number.EPSILON),0),rn=Math.min(xt.zoomFromMercatorZAdjusted(Gr),kt.maxZoom);return rn>.5*(_.GLOBE_ZOOM_THRESHOLD_MIN+_.GLOBE_ZOOM_THRESHOLD_MAX)?(xt.setProjection({name:"mercator"}),xt.zoom=rn,this._cameraForBounds(xt,nt,ct,dt,ft,_t)):{center:xt.center,zoom:rn,bearing:dt,pitch:ft}}queryTerrainElevation(et,nt){const ct=this.transform.elevation;return ct?(nt=_.extend({},{exaggerated:!0},nt),ct.getAtPoint(_.MercatorCoordinate.fromLngLat(et),null,nt.exaggerated)):null}_cameraForBounds(et,nt,ct,dt,ft,_t){if(et.projection.name==="globe")return this._cameraForBoundsOnGlobe(et,nt,ct,dt,ft,_t);const xt=et.clone(),kt=this._extendCameraOptions(_t),$t=xt.padding;xt.bearing=dt,xt.pitch=ft;const Dt=_.LngLat.convert(nt),Vt=_.LngLat.convert(ct),Yt=new _.LngLat(Dt.lng,Vt.lat),Jt=new _.LngLat(Vt.lng,Dt.lat),er=xt.project(Dt),_i=xt.project(Vt),tr=this.queryTerrainElevation(Dt),jt=this.queryTerrainElevation(Vt),Qt=this.queryTerrainElevation(Yt),sr=this.queryTerrainElevation(Jt),lr=[[er.x,er.y,Math.min(tr||0,jt||0,Qt||0,sr||0)],[_i.x,_i.y,Math.max(tr||0,jt||0,Qt||0,sr||0)]];let yr=_.Aabb.fromPoints(lr);const _r=xt.getWorldToCameraMatrix(),vr=_.invert(new Float64Array(16),_r);yr=_.Aabb.applyTransform(yr,_r);const kr=_.sub([],yr.max,yr.min),Sr=$t.left||0,Lr=$t.right||0,Jr=$t.bottom||0,Ar=$t.top||0,{left:Hr,right:Or,top:Qr,bottom:Mr}=kt.padding,Gr=.5*(Sr+Lr),rn=.5*(Ar+Jr),Zr=Math.min(xt.scaleZoom(xt.scale*Math.min((xt.width-(Sr+Lr+Hr+Or))/kr[0],(xt.height-(Jr+Ar+Mr+Qr))/kr[1])),kt.maxZoom),nn=xt.scale/xt.zoomScale(Zr);yr=new _.Aabb([yr.min[0]-(Hr+Gr)*nn,yr.min[1]-(Mr+rn)*nn,yr.min[2]],[yr.max[0]+(Or+Gr)*nn,yr.max[1]+(Qr+rn)*nn,yr.max[2]]);const Sn=.5*kr[2],Dn=this._minimumAABBFrustumDistance(xt,yr),_n=[0,0,1,0];_.transformMat4$1(_n,_n,_r),_.normalize$2(_n,_n);const Pn=_.scale$2([],_n,Dn+Sn),qn=_.add([],yr.center,Pn),Un=(typeof kt.offset.x=="number"&&typeof kt.offset.y=="number"?new _.Point(kt.offset.x,kt.offset.y):_.Point.convert(kt.offset)).rotate(-_.degToRad(dt));yr.center[0]-=Un.x*nn,yr.center[1]+=Un.y*nn,_.transformMat4(yr.center,yr.center,vr),_.transformMat4(qn,qn,vr);const wn=[yr.center[0],yr.center[1],qn[2]*xt.pixelsPerMeter];_.scale$2(wn,wn,1/xt.worldSize);const ro=_.lngFromMercatorX(wn[0]),no=_.latFromMercatorY(wn[1]),oo=Math.min(xt._zoomFromMercatorZ(wn[2]),kt.maxZoom),so=new _.LngLat(ro,no);return xt.mercatorFromTransition&&oo<.5*(_.GLOBE_ZOOM_THRESHOLD_MIN+_.GLOBE_ZOOM_THRESHOLD_MAX)?(xt.setProjection({name:"globe"}),xt.zoom=oo,this._cameraForBounds(xt,nt,ct,dt,ft,_t)):{center:so,zoom:oo,bearing:dt,pitch:ft}}fitBounds(et,nt,ct){const dt=this.cameraForBounds(et,nt);return this._fitInternal(dt,nt,ct)}fitScreenCoordinates(et,nt,ct,dt,ft){const _t=_.Point.convert(et),xt=_.Point.convert(nt),kt=new _.Point(Math.min(_t.x,xt.x),Math.min(_t.y,xt.y)),$t=new _.Point(Math.max(_t.x,xt.x),Math.max(_t.y,xt.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(_t,xt))return this;const Dt=this.transform.pointLocation3D(kt),Vt=this.transform.pointLocation3D($t),Yt=this.transform.pointLocation3D(new _.Point(kt.x,$t.y)),Jt=this.transform.pointLocation3D(new _.Point($t.x,kt.y)),er=[Math.min(Dt.lng,Vt.lng,Yt.lng,Jt.lng),Math.min(Dt.lat,Vt.lat,Yt.lat,Jt.lat)],_i=[Math.max(Dt.lng,Vt.lng,Yt.lng,Jt.lng),Math.max(Dt.lat,Vt.lat,Yt.lat,Jt.lat)],tr=dt&&dt.pitch?dt.pitch:this.getPitch(),jt=this._cameraForBounds(this.transform,er,_i,ct,tr,dt);return this._fitInternal(jt,dt,ft)}_fitInternal(et,nt,ct){return et?(delete(nt=_.extend(et,nt)).padding,nt.linear?this.easeTo(nt,ct):this.flyTo(nt,ct)):this}jumpTo(et,nt){this.stop();const ct=et.preloadOnly?this.transform.clone():this.transform;let dt=!1,ft=!1,_t=!1;return"zoom"in et&&ct.zoom!==+et.zoom&&(dt=!0,ct.zoom=+et.zoom),et.center!==void 0&&(ct.center=_.LngLat.convert(et.center)),"bearing"in et&&ct.bearing!==+et.bearing&&(ft=!0,ct.bearing=+et.bearing),"pitch"in et&&ct.pitch!==+et.pitch&&(_t=!0,ct.pitch=+et.pitch),et.padding==null||ct.isPaddingEqual(et.padding)||(ct.padding=et.padding),et.preloadOnly?(this._preloadTiles(ct),this):(this.fire(new _.Event("movestart",nt)).fire(new _.Event("move",nt)),dt&&this.fire(new _.Event("zoomstart",nt)).fire(new _.Event("zoom",nt)).fire(new _.Event("zoomend",nt)),ft&&this.fire(new _.Event("rotatestart",nt)).fire(new _.Event("rotate",nt)).fire(new _.Event("rotateend",nt)),_t&&this.fire(new _.Event("pitchstart",nt)).fire(new _.Event("pitch",nt)).fire(new _.Event("pitchend",nt)),this.fire(new _.Event("moveend",nt)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||_.warnOnce(uu),this.transform.getFreeCameraOptions()}setFreeCameraOptions(et,nt){const ct=this.transform;if(!ct.projection.supportsFreeCamera)return _.warnOnce(uu),this;this.stop();const dt=ct.zoom,ft=ct.pitch,_t=ct.bearing;ct.setFreeCameraOptions(et);const xt=dt!==ct.zoom,kt=ft!==ct.pitch,$t=_t!==ct.bearing;return this.fire(new _.Event("movestart",nt)).fire(new _.Event("move",nt)),xt&&this.fire(new _.Event("zoomstart",nt)).fire(new _.Event("zoom",nt)).fire(new _.Event("zoomend",nt)),$t&&this.fire(new _.Event("rotatestart",nt)).fire(new _.Event("rotate",nt)).fire(new _.Event("rotateend",nt)),kt&&this.fire(new _.Event("pitchstart",nt)).fire(new _.Event("pitch",nt)).fire(new _.Event("pitchend",nt)),this.fire(new _.Event("moveend",nt)),this}easeTo(et,nt){this._stop(!1,et.easeId),((et=_.extend({offset:[0,0],duration:500,easing:_.ease},et)).animate===!1||this._prefersReducedMotion(et))&&(et.duration=0);const ct=this.transform,dt=this.getZoom(),ft=this.getBearing(),_t=this.getPitch(),xt=this.getPadding(),kt="zoom"in et?+et.zoom:dt,$t="bearing"in et?this._normalizeBearing(et.bearing,ft):ft,Dt="pitch"in et?+et.pitch:_t,Vt="padding"in et?et.padding:ct.padding,Yt=_.Point.convert(et.offset);let Jt,er,_i;if(ct.projection.name==="globe"){const Sr=_.MercatorCoordinate.fromLngLat(ct.center),Lr=Yt.rotate(-ct.angle);Sr.x+=Lr.x/ct.worldSize,Sr.y+=Lr.y/ct.worldSize;const Jr=Sr.toLngLat(),Ar=_.LngLat.convert(et.center||Jr);this._normalizeCenter(Ar),Jt=ct.centerPoint.add(Lr),er=new _.Point(Sr.x,Sr.y).mult(ct.worldSize),_i=new _.Point(_.mercatorXfromLng(Ar.lng),_.mercatorYfromLat(Ar.lat)).mult(ct.worldSize).sub(er)}else{Jt=ct.centerPoint.add(Yt);const Sr=ct.pointLocation(Jt),Lr=_.LngLat.convert(et.center||Sr);this._normalizeCenter(Lr),er=ct.project(Sr),_i=ct.project(Lr).sub(er)}const tr=ct.zoomScale(kt-dt);let jt,Qt;et.around&&(jt=_.LngLat.convert(et.around),Qt=ct.locationPoint(jt));const sr=this._zooming||kt!==dt,lr=this._rotating||ft!==$t,yr=this._pitching||Dt!==_t,_r=!ct.isPaddingEqual(Vt),vr=Sr=>Lr=>{if(sr&&(Sr.zoom=_.number(dt,kt,Lr)),lr&&(Sr.bearing=_.number(ft,$t,Lr)),yr&&(Sr.pitch=_.number(_t,Dt,Lr)),_r&&(Sr.interpolatePadding(xt,Vt,Lr),Jt=Sr.centerPoint.add(Yt)),jt)Sr.setLocationAtPoint(jt,Qt);else{const Jr=Sr.zoomScale(Sr.zoom-dt),Ar=kt>dt?Math.min(2,tr):Math.max(.5,tr),Hr=Math.pow(Ar,1-Lr),Or=Sr.unproject(er.add(_i.mult(Lr*Hr)).mult(Jr));Sr.setLocationAtPoint(Sr.renderWorldCopies?Or.wrap():Or,Jt)}return et.preloadOnly||this._fireMoveEvents(nt),Sr};if(et.preloadOnly){const Sr=this._emulate(vr,et.duration,ct);return this._preloadTiles(Sr),this}const kr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=sr,this._rotating=lr,this._pitching=yr,this._padding=_r,this._easeId=et.easeId,this._prepareEase(nt,et.noMoveStart,kr),this._ease(vr(ct),Sr=>{ct.recenterOnTerrain(),this._afterEase(nt,Sr)},et),this}_prepareEase(et,nt,ct={}){this._moving=!0,this.transform.cameraElevationReference="sea",nt||ct.moving||this.fire(new _.Event("movestart",et)),this._zooming&&!ct.zooming&&this.fire(new _.Event("zoomstart",et)),this._rotating&&!ct.rotating&&this.fire(new _.Event("rotatestart",et)),this._pitching&&!ct.pitching&&this.fire(new _.Event("pitchstart",et))}_fireMoveEvents(et){this.fire(new _.Event("move",et)),this._zooming&&this.fire(new _.Event("zoom",et)),this._rotating&&this.fire(new _.Event("rotate",et)),this._pitching&&this.fire(new _.Event("pitch",et))}_afterEase(et,nt){if(this._easeId&&nt&&this._easeId===nt)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const ct=this._zooming,dt=this._rotating,ft=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ct&&this.fire(new _.Event("zoomend",et)),dt&&this.fire(new _.Event("rotateend",et)),ft&&this.fire(new _.Event("pitchend",et)),this.fire(new _.Event("moveend",et))}flyTo(et,nt){if(this._prefersReducedMotion(et)){const Zr=_.pick(et,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Zr,nt)}this.stop(),et=_.extend({offset:[0,0],speed:1.2,curve:1.42,easing:_.ease},et);const ct=this.transform,dt=this.getZoom(),ft=this.getBearing(),_t=this.getPitch(),xt=this.getPadding(),kt="zoom"in et?_.clamp(+et.zoom,ct.minZoom,ct.maxZoom):dt,$t="bearing"in et?this._normalizeBearing(et.bearing,ft):ft,Dt="pitch"in et?+et.pitch:_t,Vt="padding"in et?et.padding:ct.padding,Yt=ct.zoomScale(kt-dt),Jt=_.Point.convert(et.offset);let er=ct.centerPoint.add(Jt);const _i=ct.pointLocation(er),tr=_.LngLat.convert(et.center||_i);this._normalizeCenter(tr);const jt=ct.project(_i),Qt=ct.project(tr).sub(jt);let sr=et.curve;const lr=Math.max(ct.width,ct.height),yr=lr/Yt,_r=Qt.mag();if("minZoom"in et){const Zr=_.clamp(Math.min(et.minZoom,dt,kt),ct.minZoom,ct.maxZoom),nn=lr/ct.zoomScale(Zr-dt);sr=Math.sqrt(nn/_r*2)}const vr=sr*sr;function kr(Zr){const nn=(yr*yr-lr*lr+(Zr?-1:1)*vr*vr*_r*_r)/(2*(Zr?yr:lr)*vr*_r);return Math.log(Math.sqrt(nn*nn+1)-nn)}function Sr(Zr){return(Math.exp(Zr)-Math.exp(-Zr))/2}function Lr(Zr){return(Math.exp(Zr)+Math.exp(-Zr))/2}const Jr=kr(0);let Ar=function(Zr){return Lr(Jr)/Lr(Jr+sr*Zr)},Hr=function(Zr){return lr*((Lr(Jr)*(Sr(nn=Jr+sr*Zr)/Lr(nn))-Sr(Jr))/vr)/_r;var nn},Or=(kr(1)-Jr)/sr;if(Math.abs(_r)<1e-6||!isFinite(Or)){if(Math.abs(lr-yr)<1e-6)return this.easeTo(et,nt);const Zr=yr<lr?-1:1;Or=Math.abs(Math.log(yr/lr))/sr,Hr=function(){return 0},Ar=function(nn){return Math.exp(Zr*sr*nn)}}et.duration="duration"in et?+et.duration:1e3*Or/("screenSpeed"in et?+et.screenSpeed/sr:+et.speed),et.maxDuration&&et.duration>et.maxDuration&&(et.duration=0);const Qr=ft!==$t,Mr=Dt!==_t,Gr=!ct.isPaddingEqual(Vt),rn=Zr=>nn=>{const Sn=nn*Or,Dn=1/Ar(Sn);Zr.zoom=nn===1?kt:dt+Zr.scaleZoom(Dn),Qr&&(Zr.bearing=_.number(ft,$t,nn)),Mr&&(Zr.pitch=_.number(_t,Dt,nn)),Gr&&(Zr.interpolatePadding(xt,Vt,nn),er=Zr.centerPoint.add(Jt));const _n=nn===1?tr:Zr.unproject(jt.add(Qt.mult(Hr(Sn))).mult(Dn));return Zr.setLocationAtPoint(Zr.renderWorldCopies?_n.wrap():_n,er),Zr._updateCameraOnTerrain(),et.preloadOnly||this._fireMoveEvents(nt),Zr};if(et.preloadOnly){const Zr=this._emulate(rn,et.duration,ct);return this._preloadTiles(Zr),this}return this._zooming=!0,this._rotating=Qr,this._pitching=Mr,this._padding=Gr,this._prepareEase(nt,!1),this._ease(rn(ct),()=>this._afterEase(nt),et),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(et,nt){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const ct=this._onEaseEnd;this._onEaseEnd=void 0,ct.call(this,nt)}if(!et){const ct=this.handlers;ct&&ct.stop(!1)}return this}_ease(et,nt,ct){ct.animate===!1||ct.duration===0?(et(1),nt()):(this._easeStart=_.exported.now(),this._easeOptions=ct,this._onEaseFrame=et,this._onEaseEnd=nt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const et=Math.min((_.exported.now()-this._easeStart)/this._easeOptions.duration,1),nt=this._onEaseFrame;nt&&nt(this._easeOptions.easing(et)),et<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(et,nt){et=_.wrap(et,-180,180);const ct=Math.abs(et-nt);return Math.abs(et-360-nt)<ct&&(et-=360),Math.abs(et+360-nt)<ct&&(et+=360),et}_normalizeCenter(et){const nt=this.transform;if(!nt.renderWorldCopies||nt.maxBounds)return;const ct=et.lng-nt.center.lng;et.lng+=ct>180?-360:ct<-180?360:0}_prefersReducedMotion(et){return this._respectPrefersReducedMotion&&_.exported.prefersReducedMotion&&!(et&&et.essential)}_emulate(et,nt,ct){const dt=Math.ceil(15*nt/1e3),ft=[],_t=et(ct.clone());for(let xt=0;xt<=dt;xt++){const kt=_t(xt/dt);ft.push(kt.clone())}return ft}}class vn{constructor(et={}){this.options=et,_.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(et){const nt=this.options&&this.options.compact;return this._map=et,this._container=bt("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=bt("button","mapboxgl-ctrl-attrib-button",this._container),bt("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=bt("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),nt&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),nt===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(et,nt){const ct=this._map._getUIString(`AttributionControl.${nt}`);et.setAttribute("aria-label",ct),et.removeAttribute("title"),et.firstElementChild&&et.firstElementChild.setAttribute("title",ct)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let et=this._editLink;et||(et=this._editLink=this._container.querySelector(".mapbox-improve-map"));const nt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||_.config.ACCESS_TOKEN}];if(et){const ct=nt.reduce((dt,ft,_t)=>(ft.value&&(dt+=`${ft.key}=${ft.value}${_t<nt.length-1?"&":""}`),dt),"?");et.href=`${_.config.FEEDBACK_URL}/${ct}#${gp(this._map,!0)}`,et.rel="noopener nofollow",this._setElementTitle(et,"MapFeedback")}}_updateData(et){!et||et.sourceDataType!=="metadata"&&et.sourceDataType!=="visibility"&&et.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let et=[];if(this._map.style.stylesheet){const dt=this._map.style.stylesheet;this.styleOwner=dt.owner,this.styleId=dt.id}const nt=this._map.style._sourceCaches;for(const dt in nt){const ft=nt[dt];if(ft.used){const _t=ft.getSource();_t.attribution&&et.indexOf(_t.attribution)<0&&et.push(_t.attribution)}}et.sort((dt,ft)=>dt.length-ft.length),et=et.filter((dt,ft)=>{for(let _t=ft+1;_t<et.length;_t++)if(et[_t].indexOf(dt)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?et=[...this.options.customAttribution,...et]:et.unshift(this.options.customAttribution));const ct=et.join(" | ");ct!==this._attribHTML&&(this._attribHTML=ct,et.length?(this._innerContainer.innerHTML=ct,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class _y{constructor(){_.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(et){this._map=et,this._container=bt("div","mapboxgl-ctrl");const nt=bt("a","mapboxgl-ctrl-logo");return nt.target="_blank",nt.rel="noopener nofollow",nt.href="https://www.mapbox.com/",nt.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),nt.setAttribute("rel","noopener nofollow"),this._container.appendChild(nt),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(et){et&&et.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const et=this._map.style._sourceCaches;if(Object.entries(et).length===0)return!0;for(const nt in et){const ct=et[nt].getSource();if(ct.hasOwnProperty("mapbox_logo")&&!ct.mapbox_logo)return!1}return!0}_updateCompact(){const et=this._container.children;if(et.length){const nt=et[0];this._map.getCanvasContainer().offsetWidth<250?nt.classList.add("mapboxgl-compact"):nt.classList.remove("mapboxgl-compact")}}}class xy{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(et){const nt=++this._id;return this._queue.push({callback:et,id:nt,cancelled:!1}),nt}remove(et){const nt=this._currentlyRunning,ct=nt?this._queue.concat(nt):this._queue;for(const dt of ct)if(dt.id===et)return void(dt.cancelled=!0)}run(et=0){const nt=this._currentlyRunning=this._queue;this._queue=[];for(const ct of nt)if(!ct.cancelled&&(ct.callback(et),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Fu(at,et,nt){if(at=new _.LngLat(at.lng,at.lat),et){const ct=new _.LngLat(at.lng-360,at.lat),dt=new _.LngLat(at.lng+360,at.lat),ft=360*Math.ceil(Math.abs(at.lng-nt.center.lng)/360),_t=nt.locationPoint(at).distSqr(et),xt=et.x<0||et.y<0||et.x>nt.width||et.y>nt.height;nt.locationPoint(ct).distSqr(et)<_t&&(xt||Math.abs(ct.lng-nt.center.lng)<ft)?at=ct:nt.locationPoint(dt).distSqr(et)<_t&&(xt||Math.abs(dt.lng-nt.center.lng)<ft)&&(at=dt)}for(;Math.abs(at.lng-nt.center.lng)>180;){const ct=nt.locationPoint(at);if(ct.x>=0&&ct.y>=0&&ct.x<=nt.width&&ct.y<=nt.height)break;at.lng>nt.center.lng?at.lng-=360:at.lng+=360}return at}const du={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class fn extends _.Evented{constructor(et,nt){if(super(),(et instanceof _.window.HTMLElement||nt)&&(et=_.extend({element:et},nt)),_.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=et&&et.anchor||"center",this._color=et&&et.color||"#3FB1CE",this._scale=et&&et.scale||1,this._draggable=et&&et.draggable||!1,this._clickTolerance=et&&et.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=et&&et.rotation||0,this._rotationAlignment=et&&et.rotationAlignment||"auto",this._pitchAlignment=et&&et.pitchAlignment&&et.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=et&&et.occludedOpacity||.2,et&&et.element)this._element=et.element,this._offset=_.Point.convert(et&&et.offset||[0,0]);else{this._defaultMarker=!0,this._element=bt("div");const dt=41,ft=27,_t=Mt("svg",{display:"block",height:dt*this._scale+"px",width:ft*this._scale+"px",viewBox:`0 0 ${ft} ${dt}`},this._element),xt=Mt("radialGradient",{id:"shadowGradient"},Mt("defs",{},_t));Mt("stop",{offset:"10%","stop-opacity":.4},xt),Mt("stop",{offset:"100%","stop-opacity":.05},xt),Mt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},_t),Mt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},_t),Mt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},_t),Mt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},_t),this._offset=_.Point.convert(et&&et.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",dt=>{dt.preventDefault()}),this._element.addEventListener("mousedown",dt=>{dt.preventDefault()});const ct=this._element.classList;for(const dt in du)ct.remove(`mapboxgl-marker-anchor-${dt}`);ct.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(et){return et===this._map||(this.remove(),this._map=et,et.getCanvasContainer().appendChild(this._element),et.on("move",this._updateMoving),et.on("moveend",this._update),et.on("remove",this._clearFadeTimer),et._addMarker(this),this.setDraggable(this._draggable),this._update(),et.on("click",this._onMapClick)),this}remove(){const et=this._map;return et&&(et.off("click",this._onMapClick),et.off("move",this._updateMoving),et.off("moveend",this._update),et.off("mousedown",this._addDragHandler),et.off("touchstart",this._addDragHandler),et.off("mouseup",this._onUp),et.off("touchend",this._onUp),et.off("mousemove",this._onMove),et.off("touchmove",this._onMove),et.off("remove",this._clearFadeTimer),et._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(et){return this._lngLat=_.LngLat.convert(et),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(et){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),et){if(!("offset"in et.options)){const dt=Math.sqrt(Math.pow(13.5,2)/2);et.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[dt,-1*(38.1-13.5+dt)],"bottom-right":[-dt,-1*(38.1-13.5+dt)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=et,et._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(et){const nt=et.code,ct=et.charCode||et.keyCode;nt!=="Space"&&nt!=="Enter"&&ct!==32&&ct!==13||this.togglePopup()}_onMapClick(et){const nt=et.originalEvent.target,ct=this._element;this._popup&&(nt===ct||ct.contains(nt))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const et=this._popup;return et?(et.isOpen()?(et.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(et.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const et=this._map,nt=this._pos;if(!et||!nt)return!1;const ct=et.unproject(nt),dt=et.getFreeCameraOptions();if(!dt.position)return!1;const ft=dt.position.toLngLat();return ft.distanceTo(ct)<.9*ft.distanceTo(this._lngLat)}_evaluateOpacity(){const et=this._map;if(!et)return;const nt=this._pos;if(!nt||nt.x<0||nt.x>et.transform.width||nt.y<0||nt.y>et.transform.height)return void this._clearFadeTimer();const ct=et.unproject(nt);let dt;et._showingGlobe()&&_.isLngLatBehindGlobe(et.transform,this._lngLat)?dt=0:(dt=1-et._queryFogOpacity(ct),et.transform._terrainEnabled()&&et.getTerrain()&&this._behindTerrain()&&(dt*=this._occludedOpacity)),this._element.style.opacity=`${dt}`,this._element.style.pointerEvents=dt>0?"auto":"none",this._popup&&this._popup._setOpacity(dt),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const et=this._pos;if(!et||!this._map)return;const nt=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${et.x}px,${et.y}px)
            ${du[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${nt.x}px,${nt.y}px)
        `}_calculateXYTransform(){const et=this._pos,nt=this._map,ct=this.getPitchAlignment();if(!nt||!et||ct!=="map")return"";if(!nt._showingGlobe()){const kt=nt.getPitch();return kt?`rotateX(${kt}deg)`:""}const dt=_.radToDeg(_.globeTiltAtLngLat(nt.transform,this._lngLat)),ft=et.sub(_.globeCenterToScreenPoint(nt.transform)),_t=Math.abs(ft.x)+Math.abs(ft.y);if(_t===0)return"";const xt=dt/_t;return`rotateX(${-ft.y*xt}deg) rotateY(${ft.x*xt}deg)`}_calculateZTransform(){const et=this._pos,nt=this._map;if(!nt||!et)return"";let ct=0;const dt=this.getRotationAlignment();if(dt==="map")if(nt._showingGlobe()){const ft=nt.project(new _.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),_t=nt.project(new _.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(ft);ct=_.radToDeg(Math.atan2(_t.y,_t.x))-90}else ct=-nt.getBearing();else if(dt==="horizon"){const ft=_.smoothstep(4,6,nt.getZoom()),_t=_.globeCenterToScreenPoint(nt.transform);_t.y+=ft*nt.transform.height;const xt=et.sub(_t),kt=_.radToDeg(Math.atan2(xt.y,xt.x));ct=(kt>90?kt-270:kt+90)*(1-ft)}return ct+=this._rotation,ct?`rotateZ(${ct}deg)`:""}_update(et){_.window.cancelAnimationFrame(this._updateFrameId);const nt=this._map;nt&&(nt.transform.renderWorldCopies&&(this._lngLat=Fu(this._lngLat,this._pos,nt.transform)),this._pos=nt.project(this._lngLat),et===!0?this._updateFrameId=_.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),nt._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(nt._showingGlobe()||nt.getTerrain()||nt.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(et){return this._offset=_.Point.convert(et),this._update(),this}_onMove(et){const nt=this._map;if(!nt)return;const ct=this._pointerdownPos,dt=this._positionDelta;if(ct&&dt){if(!this._isDragging){const ft=this._clickTolerance||nt._clickTolerance;if(et.point.dist(ct)<ft)return;this._isDragging=!0}this._pos=et.point.sub(dt),this._lngLat=nt.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new _.Event("dragstart"))),this.fire(new _.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const et=this._map;et&&(et.off("mousemove",this._onMove),et.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new _.Event("dragend")),this._state="inactive"}_addDragHandler(et){const nt=this._map,ct=this._pos;nt&&ct&&this._element.contains(et.originalEvent.target)&&(et.preventDefault(),this._positionDelta=et.point.sub(ct),this._pointerdownPos=et.point,this._state="pending",nt.on("mousemove",this._onMove),nt.on("touchmove",this._onMove),nt.once("mouseup",this._onUp),nt.once("touchend",this._onUp))}setDraggable(et){this._draggable=!!et;const nt=this._map;return nt&&(et?(nt.on("mousedown",this._addDragHandler),nt.on("touchstart",this._addDragHandler)):(nt.off("mousedown",this._addDragHandler),nt.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(et){return this._rotation=et||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(et){return this._rotationAlignment=et||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(et){return this._pitchAlignment=et||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(et){return this._occludedOpacity=et||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const by={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Kv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function H0(at=new _.Point(0,0),et="bottom"){if(typeof at=="number"){const nt=Math.round(Math.sqrt(.5*Math.pow(at,2)));switch(et){case"top":return new _.Point(0,at);case"top-left":return new _.Point(nt,nt);case"top-right":return new _.Point(-nt,nt);case"bottom":return new _.Point(0,-at);case"bottom-left":return new _.Point(nt,-nt);case"bottom-right":return new _.Point(-nt,-nt);case"left":return new _.Point(at,0);case"right":return new _.Point(-at,0)}return new _.Point(0,0)}return at instanceof _.Point||Array.isArray(at)?_.Point.convert(at):_.Point.convert(at[et]||[0,0])}class wy{constructor(et){this.jumpTo(et)}getValue(et){if(et<=this._startTime)return this._start;if(et>=this._endTime)return this._end;const nt=_.easeCubicInOut((et-this._startTime)/(this._endTime-this._startTime));return this._start*(1-nt)+this._end*nt}isEasing(et){return et>=this._startTime&&et<=this._endTime}jumpTo(et){this._startTime=-1/0,this._endTime=-1/0,this._start=et,this._end=et}easeTo(et,nt,ct){this._start=this.getValue(nt),this._end=et,this._startTime=nt,this._endTime=nt+ct}}const q0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},W0={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Qv={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jv{constructor(et,nt,ct=!1){this._clickTolerance=10,this.element=nt,this.mouseRotate=new fy({clickTolerance:et.dragRotate._mouseRotate._clickTolerance}),this.map=et,ct&&(this.mousePitch=new my({clickTolerance:et.dragRotate._mousePitch._clickTolerance})),_.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),nt.addEventListener("mousedown",this.mousedown),nt.addEventListener("touchstart",this.touchstart,{passive:!1}),nt.addEventListener("touchmove",this.touchmove),nt.addEventListener("touchend",this.touchend),nt.addEventListener("touchcancel",this.reset)}down(et,nt){this.mouseRotate.mousedown(et,nt),this.mousePitch&&this.mousePitch.mousedown(et,nt),Tt()}move(et,nt){const ct=this.map,dt=this.mouseRotate.mousemoveWindow(et,nt),ft=dt&&dt.bearingDelta;if(ft&&ct.setBearing(ct.getBearing()+ft),this.mousePitch){const _t=this.mousePitch.mousemoveWindow(et,nt),xt=_t&&_t.pitchDelta;xt&&ct.setPitch(ct.getPitch()+xt)}}off(){const et=this.element;et.removeEventListener("mousedown",this.mousedown),et.removeEventListener("touchstart",this.touchstart,{passive:!1}),et.removeEventListener("touchmove",this.touchmove),et.removeEventListener("touchend",this.touchend),et.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Ct(),_.window.removeEventListener("mousemove",this.mousemove),_.window.removeEventListener("mouseup",this.mouseup)}mousedown(et){this.down(_.extend({},et,{ctrlKey:!0,preventDefault:()=>et.preventDefault()}),Bt(this.element,et)),_.window.addEventListener("mousemove",this.mousemove),_.window.addEventListener("mouseup",this.mouseup)}mousemove(et){this.move(et,Bt(this.element,et))}mouseup(et){this.mouseRotate.mouseupWindow(et),this.mousePitch&&this.mousePitch.mouseupWindow(et),this.offTemp()}touchstart(et){et.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ft(this.element,et.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>et.preventDefault()},this._startPos))}touchmove(et){et.targetTouches.length!==1?this.reset():(this._lastPos=Ft(this.element,et.targetTouches)[0],this.move({preventDefault:()=>et.preventDefault()},this._lastPos))}touchend(et){et.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ey={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Sy={maxWidth:100,unit:"metric"},Ty={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Vu={version:_.version,supported:mt,setRTLTextPlugin:_.setRTLTextPlugin,getRTLTextPluginStatus:_.getRTLTextPluginStatus,Map:class extends um{constructor(at){if(_.LivePerformanceUtils.mark(_.PerformanceMarkers.create),(at=_.extend({},W0,at)).minZoom!=null&&at.maxZoom!=null&&at.minZoom>at.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(at.minPitch!=null&&at.maxPitch!=null&&at.minPitch>at.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(at.minPitch!=null&&at.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(at.maxPitch!=null&&at.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(at.antialias&&_.isSafariWithAntialiasingBug(_.window)&&(at.antialias=!1,_.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new $u(at.minZoom,at.maxZoom,at.minPitch,at.maxPitch,at.renderWorldCopies),at),this._interactive=at.interactive,this._minTileCacheSize=at.minTileCacheSize,this._maxTileCacheSize=at.maxTileCacheSize,this._failIfMajorPerformanceCaveat=at.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=at.preserveDrawingBuffer,this._antialias=at.antialias,this._useWebGL2=at.useWebGL2,this._trackResize=at.trackResize,this._bearingSnap=at.bearingSnap,this._refreshExpiredTiles=at.refreshExpiredTiles,this._fadeDuration=at.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=at.crossSourceCollisions,this._collectResourceTiming=at.collectResourceTiming,this._optimizeForTerrain=at.optimizeForTerrain,this._language=this._parseLanguage(at.language),this._worldview=at.worldview,this._renderTaskQueue=new xy,this._domRenderTaskQueue=new xy,this._controls=[],this._markers=[],this._popups=[],this._mapId=_.uniqueId(),this._locale=_.extend({},q0,at.locale),this._clickTolerance=at.clickTolerance,this._cooperativeGestures=at.cooperativeGestures,this._performanceMetricsCollection=at.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new wy(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new _.RequestManager(at.transformRequest,at.accessToken,at.testMode),this._silenceAuthErrors=!!at.testMode,typeof at.container=="string"){if(this._container=_.window.document.getElementById(at.container),!this._container)throw new Error(`Container '${at.container}' not found.`)}else{if(!(at.container instanceof _.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=at.container}if(this._container.childNodes.length>0&&_.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),at.maxBounds&&this.setMaxBounds(at.maxBounds),_.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),_.window!==void 0&&(_.window.addEventListener("online",this._onWindowOnline,!1),_.window.addEventListener("resize",this._onWindowResize,!1),_.window.addEventListener("orientationchange",this._onWindowResize,!1),_.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),_.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ba(this,at),this._localFontFamily=at.localFontFamily,this._localIdeographFontFamily=at.localIdeographFontFamily,at.style&&this.setStyle(at.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),at.projection&&this.setProjection(at.projection),this._hash=at.hash&&new hy(typeof at.hash=="string"&&at.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:at.center,zoom:at.zoom,bearing:at.bearing,pitch:at.pitch}),at.bounds&&(this.resize(),this.fitBounds(at.bounds,_.extend({},at.fitBoundsOptions,{duration:0})))),this.resize(),at.attributionControl&&this.addControl(new vn({customAttribution:at.customAttribution})),this._logoControl=new _y,this.addControl(this._logoControl,at.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",et=>{this._update(et.dataType==="style"),this.fire(new _.Event(`${et.dataType}data`,et))}),this.on("dataloading",et=>{this.fire(new _.Event(`${et.dataType}dataloading`,et))})}_getMapId(){return this._mapId}addControl(at,et){if(et===void 0&&(et=at.getDefaultPosition?at.getDefaultPosition():"top-right"),!at||!at.onAdd)return this.fire(new _.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const nt=at.onAdd(this);this._controls.push(at);const ct=this._controlPositions[et];return et.indexOf("bottom")!==-1?ct.insertBefore(nt,ct.firstChild):ct.appendChild(nt),this}removeControl(at){if(!at||!at.onRemove)return this.fire(new _.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const et=this._controls.indexOf(at);return et>-1&&this._controls.splice(et,1),at.onRemove(this),this}hasControl(at){return this._controls.indexOf(at)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(at){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const et=!this._moving;return et&&this.fire(new _.Event("movestart",at)).fire(new _.Event("move",at)),this.fire(new _.Event("resize",at)),et&&this.fire(new _.Event("moveend",at)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(at){return this.transform.setMaxBounds(_.LngLatBounds.convert(at)),this._update()}setMinZoom(at){if((at=at==null?-2:at)>=-2&&at<=this.transform.maxZoom)return this.transform.minZoom=at,this._update(),this.getZoom()<at?this.setZoom(at):this.fire(new _.Event("zoomstart")).fire(new _.Event("zoom")).fire(new _.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(at){if((at=at==null?22:at)>=this.transform.minZoom)return this.transform.maxZoom=at,this._update(),this.getZoom()>at?this.setZoom(at):this.fire(new _.Event("zoomstart")).fire(new _.Event("zoom")).fire(new _.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(at){if((at=at==null?0:at)<0)throw new Error("minPitch must be greater than or equal to 0");if(at>=0&&at<=this.transform.maxPitch)return this.transform.minPitch=at,this._update(),this.getPitch()<at?this.setPitch(at):this.fire(new _.Event("pitchstart")).fire(new _.Event("pitch")).fire(new _.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(at){if((at=at==null?85:at)>85)throw new Error("maxPitch must be less than or equal to 85");if(at>=this.transform.minPitch)return this.transform.maxPitch=at,this._update(),this.getPitch()>at?this.setPitch(at):this.fire(new _.Event("pitchstart")).fire(new _.Event("pitch")).fire(new _.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(at){return this.transform.renderWorldCopies=at,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(at){return at==="auto"?_.window.navigator.language:Array.isArray(at)?at.length===0?void 0:at.map(et=>et==="auto"?_.window.navigator.language:et):at}setLanguage(at){const et=this._parseLanguage(at);if(!this.style||et===this._language)return this;this._language=et,this.style._reloadSources();for(const nt of this._controls)nt._setLanguage&&nt._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(at){return this.style&&at!==this._worldview?(this._worldview=at,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(at){return this._lazyInitEmptyStyle(),at?typeof at=="string"&&(at={name:at}):at=null,this._useExplicitProjection=!!at,this._prioritizeAndUpdateProjection(at,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const at=this.transform,et=at.projection.name;let nt;et==="globe"&&at.zoom>=_.GLOBE_ZOOM_THRESHOLD_MAX?(at.setMercatorFromTransition(),nt=!0):et==="mercator"&&at.zoom<_.GLOBE_ZOOM_THRESHOLD_MAX&&(at.setProjection({name:"globe"}),nt=!0),nt&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(at,et){return this._updateProjection(at||et||{name:"mercator"})}_updateProjection(at){let et;if(et=at.name==="globe"&&this.transform.zoom>=_.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(at),this.style.applyProjectionUpdate(),et){this.painter.clearBackgroundTiles();for(const nt in this.style._sourceCaches)this.style._sourceCaches[nt].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(at){return this.transform.locationPoint3D(_.LngLat.convert(at))}unproject(at){return this.transform.pointLocation3D(_.Point.convert(at))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(at,et,nt){if(at==="mouseenter"||at==="mouseover"){let ct=!1;const dt=_t=>{const xt=et.filter($t=>this.getLayer($t)),kt=xt.length?this.queryRenderedFeatures(_t.point,{layers:xt}):[];kt.length?ct||(ct=!0,nt.call(this,new ss(at,this,_t.originalEvent,{features:kt}))):ct=!1},ft=()=>{ct=!1};return{layers:new Set(et),listener:nt,delegates:{mousemove:dt,mouseout:ft}}}if(at==="mouseleave"||at==="mouseout"){let ct=!1;const dt=_t=>{const xt=et.filter(kt=>this.getLayer(kt));(xt.length?this.queryRenderedFeatures(_t.point,{layers:xt}):[]).length?ct=!0:ct&&(ct=!1,nt.call(this,new ss(at,this,_t.originalEvent)))},ft=_t=>{ct&&(ct=!1,nt.call(this,new ss(at,this,_t.originalEvent)))};return{layers:new Set(et),listener:nt,delegates:{mousemove:dt,mouseout:ft}}}{const ct=dt=>{const ft=et.filter(xt=>this.getLayer(xt)),_t=ft.length?this.queryRenderedFeatures(dt.point,{layers:ft}):[];_t.length&&(dt.features=_t,nt.call(this,dt),delete dt.features)};return{layers:new Set(et),listener:nt,delegates:{[at]:ct}}}}on(at,et,nt){if(nt===void 0)return super.on(at,et);Array.isArray(et)||(et=[et]);const ct=this._createDelegatedListener(at,et,nt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[at]=this._delegatedListeners[at]||[],this._delegatedListeners[at].push(ct);for(const dt in ct.delegates)this.on(dt,ct.delegates[dt]);return this}once(at,et,nt){if(nt===void 0)return super.once(at,et);Array.isArray(et)||(et=[et]);const ct=this._createDelegatedListener(at,et,nt);for(const dt in ct.delegates)this.once(dt,ct.delegates[dt]);return this}off(at,et,nt){if(nt===void 0)return super.off(at,et);et=new Set(Array.isArray(et)?et:[et]);const ct=(ft,_t)=>{if(ft.size!==_t.size)return!1;for(const xt of ft)if(!_t.has(xt))return!1;return!0},dt=this._delegatedListeners?this._delegatedListeners[at]:void 0;return dt&&(ft=>{for(let _t=0;_t<ft.length;_t++){const xt=ft[_t];if(xt.listener===nt&&ct(xt.layers,et)){for(const kt in xt.delegates)this.off(kt,xt.delegates[kt]);return ft.splice(_t,1),this}}})(dt),this}queryRenderedFeatures(at,et){return this.style?(et!==void 0||at===void 0||at instanceof _.Point||Array.isArray(at)||(et=at,at=void 0),this.style.queryRenderedFeatures(at=at||[[0,0],[this.transform.width,this.transform.height]],et=et||{},this.transform)):[]}querySourceFeatures(at,et){return this.style.querySourceFeatures(at,et)}isPointOnSurface(at){const{name:et}=this.transform.projection;return et!=="globe"&&et!=="mercator"&&_.warnOnce(`${et} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(_.Point.convert(at))}setStyle(at,et){return(et=_.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},et)).diff!==!1&&et.localIdeographFontFamily===this._localIdeographFontFamily&&et.localFontFamily===this._localFontFamily&&this.style&&at?(this._diffStyle(at,et),this):(this._localIdeographFontFamily=et.localIdeographFontFamily,this._localFontFamily=et.localFontFamily,this._updateStyle(at,et))}_getUIString(at){const et=this._locale[at];if(et==null)throw new Error(`Missing UI string '${at}'`);return et}_updateStyle(at,et){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),at&&(this.style=new _a(this,et||{}),this.style.setEventedParent(this,{style:this.style}),typeof at=="string"?this.style.loadURL(at):this.style.loadJSON(at)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new _a(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(at,et){if(typeof at=="string"){const nt=this._requestManager.normalizeStyleURL(at),ct=this._requestManager.transformRequest(nt,_.ResourceType.Style);_.getJSON(ct,(dt,ft)=>{dt?this.fire(new _.ErrorEvent(dt)):ft&&this._updateDiff(ft,et)})}else typeof at=="object"&&this._updateDiff(at,et)}_updateDiff(at,et){try{this.style.setState(at)&&this._update(!0)}catch(nt){_.warnOnce(`Unable to perform style diff: ${nt.message||nt.error||nt}.  Rebuilding the style from scratch.`),this._updateStyle(at,et)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(_.warnOnce("There is no style added to the map."),!1)}addSource(at,et){return this._lazyInitEmptyStyle(),this.style.addSource(at,et),this._update(!0)}isSourceLoaded(at){return!!this.style&&this.style._isSourceCacheLoaded(at)}areTilesLoaded(){const at=this.style&&this.style._sourceCaches;for(const et in at){const nt=at[et]._tiles;for(const ct in nt){const dt=nt[ct];if(dt.state!=="loaded"&&dt.state!=="errored")return!1}}return!0}addSourceType(at,et,nt){this._lazyInitEmptyStyle(),this.style.addSourceType(at,et,nt)}removeSource(at){return this.style.removeSource(at),this._updateTerrain(),this._update(!0)}getSource(at){return this.style.getSource(at)}addImage(at,et,{pixelRatio:nt=1,sdf:ct=!1,stretchX:dt,stretchY:ft,content:_t}={}){if(this._lazyInitEmptyStyle(),et instanceof _.window.HTMLImageElement||_.window.ImageBitmap&&et instanceof _.window.ImageBitmap){const{width:xt,height:kt,data:$t}=_.exported.getImageData(et);this.style.addImage(at,{data:new _.RGBAImage({width:xt,height:kt},$t),pixelRatio:nt,stretchX:dt,stretchY:ft,content:_t,sdf:ct,version:0})}else if(et.width===void 0||et.height===void 0)this.fire(new _.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:xt,height:kt}=et,$t=et;this.style.addImage(at,{data:new _.RGBAImage({width:xt,height:kt},new Uint8Array($t.data)),pixelRatio:nt,stretchX:dt,stretchY:ft,content:_t,sdf:ct,version:0,userImage:$t}),$t.onAdd&&$t.onAdd(this,at)}}updateImage(at,et){const nt=this.style.getImage(at);if(!nt)return void this.fire(new _.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const ct=et instanceof _.window.HTMLImageElement||_.window.ImageBitmap&&et instanceof _.window.ImageBitmap?_.exported.getImageData(et):et,{width:dt,height:ft}=ct;dt!==void 0&&ft!==void 0?dt===nt.data.width&&ft===nt.data.height?(nt.data.replace(ct.data,!(et instanceof _.window.HTMLImageElement||_.window.ImageBitmap&&et instanceof _.window.ImageBitmap)),this.style.updateImage(at,nt)):this.fire(new _.ErrorEvent(new Error(`The width and height of the updated image (${dt}, ${ft})
                must be that same as the previous version of the image
                (${nt.data.width}, ${nt.data.height})`))):this.fire(new _.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(at){return at?!!this.style.getImage(at):(this.fire(new _.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(at){this.style.removeImage(at)}loadImage(at,et){_.getImage(this._requestManager.transformRequest(at,_.ResourceType.Image),(nt,ct)=>{et(nt,ct instanceof _.window.HTMLImageElement?_.exported.getImageData(ct):ct)})}listImages(){return this.style.listImages()}addLayer(at,et){return this._lazyInitEmptyStyle(),this.style.addLayer(at,et),this._update(!0)}moveLayer(at,et){return this.style.moveLayer(at,et),this._update(!0)}removeLayer(at){return this.style.removeLayer(at),this._update(!0)}getLayer(at){return this.style.getLayer(at)}setLayerZoomRange(at,et,nt){return this.style.setLayerZoomRange(at,et,nt),this._update(!0)}setFilter(at,et,nt={}){return this.style.setFilter(at,et,nt),this._update(!0)}getFilter(at){return this.style.getFilter(at)}setPaintProperty(at,et,nt,ct={}){return this.style.setPaintProperty(at,et,nt,ct),this._update(!0)}getPaintProperty(at,et){return this.style.getPaintProperty(at,et)}setLayoutProperty(at,et,nt,ct={}){return this.style.setLayoutProperty(at,et,nt,ct),this._update(!0)}getLayoutProperty(at,et){return this.style.getLayoutProperty(at,et)}setLight(at,et={}){return this._lazyInitEmptyStyle(),this.style.setLight(at,et),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(at){return this._lazyInitEmptyStyle(),!at&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(at),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(at){return this._lazyInitEmptyStyle(),this.style.setFog(at),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(at){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(_.LngLat.convert(at),this.transform):0}setFeatureState(at,et){return this.style.setFeatureState(at,et),this._update()}removeFeatureState(at,et){return this.style.removeFeatureState(at,et),this._update()}getFeatureState(at){return this.style.getFeatureState(at)}_updateContainerDimensions(){if(!this._container)return;const at=this._container.getBoundingClientRect().width||400,et=this._container.getBoundingClientRect().height||300;let nt,ct,dt,ft=this._container;for(;ft&&(!ct||!dt);){const _t=_.window.getComputedStyle(ft).transform;_t&&_t!=="none"&&(nt=_t.match(/matrix.*\((.+)\)/)[1].split(", "),nt[0]&&nt[0]!=="0"&&nt[0]!=="1"&&(ct=nt[0]),nt[3]&&nt[3]!=="0"&&nt[3]!=="1"&&(dt=nt[3])),ft=ft.parentElement}this._containerWidth=ct?Math.abs(at/ct):at,this._containerHeight=dt?Math.abs(et/dt):et}_detectMissingCSS(){_.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&_.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const at=this._container;at.classList.add("mapboxgl-map"),(this._missingCSSCanary=bt("div","mapboxgl-canary",at)).style.visibility="hidden",this._detectMissingCSS();const et=this._canvasContainer=bt("div","mapboxgl-canvas-container",at);this._interactive&&et.classList.add("mapboxgl-interactive"),this._canvas=bt("canvas","mapboxgl-canvas",et),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const nt=this._controlContainer=bt("div","mapboxgl-control-container",at),ct=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(dt=>{ct[dt]=bt("div",`mapboxgl-ctrl-${dt}`,nt)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(at,et){const nt=_.exported.devicePixelRatio||1;this._canvas.width=nt*Math.ceil(at),this._canvas.height=nt*Math.ceil(et),this._canvas.style.width=`${at}px`,this._canvas.style.height=`${et}px`}_addMarker(at){this._markers.push(at)}_removeMarker(at){const et=this._markers.indexOf(at);et!==-1&&this._markers.splice(et,1)}_addPopup(at){this._popups.push(at)}_removePopup(at){const et=this._popups.indexOf(at);et!==-1&&this._popups.splice(et,1)}_setupPainter(){const at=_.extend({},mt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),et=this._useWebGL2&&this._canvas.getContext("webgl2",at),nt=et||this._canvas.getContext("webgl",at)||this._canvas.getContext("experimental-webgl",at);nt?(this._useWebGL2&&!et&&_.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),_.storeAuthState(nt,!0),this.painter=new Ru(nt,this.transform,!!et),this.on("data",ct=>{ct.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),_.exported$1.testSupport(nt)):this.fire(new _.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(at){at.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new _.Event("webglcontextlost",{originalEvent:at}))}_contextRestored(at){this._setupPainter(),this.resize(),this._update(),this.fire(new _.Event("webglcontextrestored",{originalEvent:at}))}_onMapScroll(at){if(at.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(at){return this.style?(this._styleDirty=this._styleDirty||at,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(at){return this._update(),this._renderTaskQueue.add(at)}_cancelRenderFrame(at){this._renderTaskQueue.remove(at)}_requestDomTask(at){!this.loaded()||this.loaded()&&!this.isMoving()?at():this._domRenderTaskQueue.add(at)}_render(at){let et;const nt=this.painter.context.extTimerQuery,ct=_.exported.now();if(this.listens("gpu-timing-frame")&&(et=nt.createQueryEXT(),nt.beginQueryEXT(nt.TIME_ELAPSED_EXT,et)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],_.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],_.window.performance.now())),this._renderTaskQueue.run(at),this._domRenderTaskQueue.run(at),this._removed)return;this._updateProjectionTransition();const dt=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const xt=this.transform.zoom,kt=this.transform.pitch,$t=_.exported.now(),Dt=new _.EvaluationParameters(xt,{now:$t,fadeDuration:dt,pitch:kt,transition:this.style.getTransition()});this.style.update(Dt)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let ft=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),ft=this._updateAverageElevation(ct),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):ft=this._updateAverageElevation(ct),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,dt,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:dt,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new _.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new _.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),et){const xt=_.exported.now()-ct;nt.endQueryEXT(nt.TIME_ELAPSED_EXT,et),setTimeout(()=>{const kt=nt.getQueryObjectEXT(et,nt.QUERY_RESULT_EXT)/1e6;nt.deleteQueryEXT(et),this.fire(new _.Event("gpu-timing-frame",{cpuTime:xt,gpuTime:kt})),_.window.performance.mark("frame-gpu",{startTime:ct,detail:{gpuTime:kt}})},50)}if(this.listens("gpu-timing-layer")){const xt=this.painter.collectGpuTimers();setTimeout(()=>{const kt=this.painter.queryGpuTimers(xt);this.fire(new _.Event("gpu-timing-layer",{layerTimes:kt}))},50)}if(this.listens("gpu-timing-deferred-render")){const xt=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const kt=this.painter.queryGpuTimeDeferredRender(xt);this.fire(new _.Event("gpu-timing-deferred-render",{gpuTime:kt}))},50)}const _t=this._sourcesDirty||this._styleDirty||this._placementDirty||ft;if(_t||this._repaint)this.triggerRepaint();else{const xt=!this.isMoving()&&this.loaded();if(xt&&(ft=this._updateAverageElevation(ct,!0)),ft)this.triggerRepaint();else if(this._triggerFrame(!1),xt&&(this.fire(new _.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const kt=this._calculateSpeedIndex();this.fire(new _.Event("speedindexcompleted",{speedIndex:kt})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||_t||(this._fullyLoaded=!0,_.LivePerformanceUtils.mark(_.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&_.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(at){for(const et of this._markers)at&&!this.getRenderWorldCopies()&&(et._lngLat=et._lngLat.wrap()),et._update();for(const et of this._popups)!at||this.getRenderWorldCopies()||et._trackPointer||(et._lngLat=et._lngLat.wrap()),et._update()}_updateAverageElevation(at,et=!1){const nt=ct=>(this.transform.averageElevation=ct,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&nt(0);if((et||at-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(at)){const ct=this.transform.averageElevation;let dt=this.transform.sampleAverageElevation(),ft=!1;this.transform.elevation&&(ft=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(dt)?dt=0:this._averageElevationLastSampledAt=at;const _t=Math.abs(ct-dt);if(_t>1){if(this._isInitialLoad||ft)return this._averageElevation.jumpTo(dt),nt(dt);this._averageElevation.easeTo(dt,at,300)}else if(_t>1e-4)return this._averageElevation.jumpTo(dt),nt(dt)}return!!this._averageElevation.isEasing(at)&&nt(this._averageElevation.getValue(at))}_authenticate(){_.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,at=>{if(at&&(at.message===_.AUTH_ERR_MSG||at.status===401)){const et=this.painter.context.gl;_.storeAuthState(et,!1),this._logoControl instanceof _y&&this._logoControl._updateLogo(),et&&et.clear(et.DEPTH_BUFFER_BIT|et.COLOR_BUFFER_BIT|et.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new _.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),_.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const at=this._isDragging();this.painter.updateTerrain(this.style,at)}_calculateSpeedIndex(){const at=this.painter.canvasCopy(),et=this.painter.getCanvasCopiesAndTimestamps();et.timeStamps.push(performance.now());const nt=this.painter.context.gl,ct=nt.createFramebuffer();function dt(ft){nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,ft,0);const _t=new Uint8Array(nt.drawingBufferWidth*nt.drawingBufferHeight*4);return nt.readPixels(0,0,nt.drawingBufferWidth,nt.drawingBufferHeight,nt.RGBA,nt.UNSIGNED_BYTE,_t),_t}return nt.bindFramebuffer(nt.FRAMEBUFFER,ct),this._canvasPixelComparison(dt(at),et.canvasCopies.map(dt),et.timeStamps)}_canvasPixelComparison(at,et,nt){let ct=nt[1]-nt[0];const dt=at.length/4;for(let ft=0;ft<et.length;ft++){const _t=et[ft];let xt=0;for(let kt=0;kt<_t.length;kt+=4)_t[kt]===at[kt]&&_t[kt+1]===at[kt+1]&&_t[kt+2]===at[kt+2]&&_t[kt+3]===at[kt+3]&&(xt+=1);ct+=(nt[ft+2]-nt[ft+1])*(1-xt/dt)}return ct}remove(){this._hash&&this._hash.remove();for(const et of this._controls)et.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),_.window!==void 0&&(_.window.removeEventListener("resize",this._onWindowResize,!1),_.window.removeEventListener("orientationchange",this._onWindowResize,!1),_.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),_.window.removeEventListener("online",this._onWindowOnline,!1),_.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const at=this.painter.context.gl.getExtension("WEBGL_lose_context");at&&at.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),_.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new _.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(at){this._renderNextFrame=this._renderNextFrame||at,this.style&&!this._frame&&(this._frame=_.exported.frame(et=>{const nt=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,nt&&this._render(et)}))}_preloadTiles(at){const et=this.style?Object.values(this.style._sourceCaches):[];return _.asyncAll(et,(nt,ct)=>nt._preloadTiles(at,ct),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(at){this._trackResize&&this.resize({originalEvent:at})._update()}_onVisibilityChange(){_.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(at){this._showTileBoundaries!==at&&(this._showTileBoundaries=at,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(at){this._showTerrainWireframe!==at&&(this._showTerrainWireframe=at,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(at){this._speedIndexTiming!==at&&(this._speedIndexTiming=at,this._update())}get showPadding(){return!!this._showPadding}set showPadding(at){this._showPadding!==at&&(this._showPadding=at,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(at){this._showCollisionBoxes!==at&&(this._showCollisionBoxes=at,at?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(at){this._showOverdrawInspector!==at&&(this._showOverdrawInspector=at,this._update())}get repaint(){return!!this._repaint}set repaint(at){this._repaint!==at&&(this._repaint=at,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(at){this._vertices=at,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(at){this._showTileAABBs!==at&&(this._showTileAABBs=at,at&&this._update())}_setCacheLimits(at,et){_.setCacheLimits(at,et)}get version(){return _.version}},NavigationControl:class{constructor(at){this.options=_.extend({},Qv,at),this._container=bt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",et=>et.preventDefault()),this.options.showZoom&&(_.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",et=>{this._map&&this._map.zoomIn({},{originalEvent:et})}),bt("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",et=>{this._map&&this._map.zoomOut({},{originalEvent:et})}),bt("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(_.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",et=>{const nt=this._map;nt&&(this.options.visualizePitch?nt.resetNorthPitch({},{originalEvent:et}):nt.resetNorth({},{originalEvent:et}))}),this._compassIcon=bt("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const at=this._map;if(!at)return;const et=at.getZoom(),nt=et===at.getMaxZoom(),ct=et===at.getMinZoom();this._zoomInButton.disabled=nt,this._zoomOutButton.disabled=ct,this._zoomInButton.setAttribute("aria-disabled",nt.toString()),this._zoomOutButton.setAttribute("aria-disabled",ct.toString())}_rotateCompassArrow(){const at=this._map;if(!at)return;const et=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(at.transform.pitch*(Math.PI/180)),.5)}) rotateX(${at.transform.pitch}deg) rotateZ(${at.transform.angle*(180/Math.PI)}deg)`:`rotate(${at.transform.angle*(180/Math.PI)}deg)`;at._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=et)})}onAdd(at){return this._map=at,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),at.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&at.on("pitch",this._rotateCompassArrow),at.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jv(at,this._compass,this.options.visualizePitch)),this._container}onRemove(){const at=this._map;at&&(this._container.remove(),this.options.showZoom&&at.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&at.off("pitch",this._rotateCompassArrow),at.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(at,et){const nt=bt("button",at,this._container);return nt.type="button",nt.addEventListener("click",et),nt}_setButtonTitle(at,et){if(!this._map)return;const nt=this._map._getUIString(`NavigationControl.${et}`);at.setAttribute("aria-label",nt),at.firstElementChild&&at.firstElementChild.setAttribute("title",nt)}},GeolocateControl:class extends _.Evented{constructor(at){super(),this.options=_.extend({geolocation:_.window.navigator.geolocation},Ey,at),_.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=zu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(at){return this._map=at,this._container=bt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(at){const et=(nt=!!this.options.geolocation)=>{this._supportsGeolocation=nt,at(nt)};this._supportsGeolocation!==void 0?at(this._supportsGeolocation):_.window.navigator.permissions!==void 0?_.window.navigator.permissions.query({name:"geolocation"}).then(nt=>et(nt.state!=="denied")).catch(()=>et()):et()}_isOutOfMapMaxBounds(at){const et=this._map.getMaxBounds(),nt=at.coords;return!!et&&(nt.longitude<et.getWest()||nt.longitude>et.getEast()||nt.latitude<et.getSouth()||nt.latitude>et.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(at){if(this._map){if(this._isOutOfMapMaxBounds(at))return this._setErrorState(),this.fire(new _.Event("outofmaxbounds",at)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=at,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(at),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(at),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new _.Event("geolocate",at)),this._finish()}}_updateCamera(at){const et=new _.LngLat(at.coords.longitude,at.coords.latitude),nt=at.coords.accuracy,ct=this._map.getBearing(),dt=_.extend({bearing:ct},this.options.fitBoundsOptions);this._map.fitBounds(et.toBounds(nt),dt,{geolocateSource:!0})}_updateMarker(at){if(at){const et=new _.LngLat(at.coords.longitude,at.coords.latitude);this._accuracyCircleMarker.setLngLat(et).addTo(this._map),this._userLocationDotMarker.setLngLat(et).addTo(this._map),this._accuracy=at.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const at=this._map.transform,et=_.mercatorZfromAltitude(1,at._center.lat)*at.worldSize,nt=Math.ceil(2*this._accuracy*et);this._circleElement.style.width=`${nt}px`,this._circleElement.style.height=`${nt}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(at){if(this._map){if(this.options.trackUserLocation)if(at.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const et=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",et),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",et),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(at.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new _.Event("error",at)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(at){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",et=>et.preventDefault()),this._geolocateButton=bt("button","mapboxgl-ctrl-geolocate",this._container),bt("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",at===!1){_.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const et=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",et),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",et)}else{const et=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",et),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",et)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=bt("div","mapboxgl-user-location"),this._dotElement.appendChild(bt("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(bt("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new fn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=bt("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",et=>{et.geolocateSource||this._watchState!=="ACTIVE_LOCK"||et.originalEvent&&et.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new _.Event("trackuserlocationend")))})}}_onDeviceOrientation(at){this._userLocationDotMarker&&(at.webkitCompassHeading?this._heading=at.webkitCompassHeading:at.absolute===!0&&(this._heading=-1*at.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return _.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new _.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new _.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new _.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let at;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(at={maximumAge:6e5,timeout:0},this._noTimeout=!0):(at=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,at),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const at=()=>{_.window.addEventListener("ondeviceorientationabsolute"in _.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};_.window.DeviceMotionEvent!==void 0&&typeof _.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(et=>{et==="granted"&&at()}).catch(console.error):at()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),_.window.removeEventListener("deviceorientation",this._onDeviceOrientation),_.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:vn,ScaleControl:class{constructor(at){this.options=_.extend({},Sy,at),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(et){return!1}}(),_.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const at=this.options.maxWidth||100,et=this._map,nt=et._containerHeight/2,ct=et._containerWidth/2-at/2,dt=et.unproject([ct,nt]),ft=et.unproject([ct+at,nt]),_t=dt.distanceTo(ft);if(this.options.unit==="imperial"){const xt=3.2808*_t;xt>5280?this._setScale(at,xt/5280,"mile"):this._setScale(at,xt,"foot")}else this.options.unit==="nautical"?this._setScale(at,_t/1852,"nautical-mile"):_t>=1e3?this._setScale(at,_t/1e3,"kilometer"):this._setScale(at,_t,"meter")}_setScale(at,et,nt){this._map._requestDomTask(()=>{const ct=function(ft){const _t=Math.pow(10,`${Math.floor(ft)}`.length-1);let xt=ft/_t;return xt=xt>=10?10:xt>=5?5:xt>=3?3:xt>=2?2:xt>=1?1:function(kt){const $t=Math.pow(10,Math.ceil(-Math.log(kt)/Math.LN10));return Math.round(kt*$t)/$t}(xt),_t*xt}(et),dt=ct/et;this._container.innerHTML=this._isNumberFormatSupported&&nt!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:nt}).format(ct):`${ct}&nbsp;${Ty[nt]}`,this._container.style.width=at*dt+"px"})}onAdd(at){return this._map=at,this._language=at.getLanguage(),this._container=bt("div","mapboxgl-ctrl mapboxgl-ctrl-scale",at.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(at){this._language=at,this._update()}setUnit(at){this.options.unit=at,this._update()}},FullscreenControl:class{constructor(at){this._fullscreen=!1,at&&at.container&&(at.container instanceof _.window.HTMLElement?this._container=at.container:_.warnOnce("Full screen control 'container' must be a DOM element.")),_.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in _.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in _.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(at){return this._map=at,this._container||(this._container=this._map.getContainer()),this._controlContainer=bt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",_.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,_.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!_.window.document.fullscreenEnabled&&!_.window.document.webkitFullscreenEnabled)}_setupUI(){const at=this._fullscreenButton=bt("button","mapboxgl-ctrl-fullscreen",this._controlContainer);bt("span","mapboxgl-ctrl-icon",at).setAttribute("aria-hidden","true"),at.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),_.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const at=this._getTitle();this._fullscreenButton.setAttribute("aria-label",at),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",at)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(_.window.document.fullscreenElement||_.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?_.window.document.exitFullscreen?_.window.document.exitFullscreen():_.window.document.webkitCancelFullScreen&&_.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends _.Evented{constructor(at){super(),this.options=_.extend(Object.create(by),at),_.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(at&&at.className?at.className.trim().split(/\s+/):[])}addTo(at){return this._map&&this.remove(),this._map=at,this.options.closeOnClick&&at.on("preclick",this._onClose),this.options.closeOnMove&&at.on("move",this._onClose),at.on("remove",this.remove),this._update(),at._addPopup(this),this._focusFirstElement(),this._trackPointer?(at.on("mousemove",this._onMouseEvent),at.on("mouseup",this._onMouseEvent),at._canvasContainer.classList.add("mapboxgl-track-pointer")):at.on("move",this._update),this.fire(new _.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const at=this._map;return at&&(at.off("move",this._update),at.off("move",this._onClose),at.off("preclick",this._onClose),at.off("click",this._onClose),at.off("remove",this.remove),at.off("mousemove",this._onMouseEvent),at.off("mouseup",this._onMouseEvent),at.off("drag",this._onMouseEvent),at._canvasContainer&&at._canvasContainer.classList.remove("mapboxgl-track-pointer"),at._removePopup(this),this._map=void 0),this.fire(new _.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(at){this._lngLat=_.LngLat.convert(at),this._pos=null,this._trackPointer=!1,this._update();const et=this._map;return et&&(et.on("move",this._update),et.off("mousemove",this._onMouseEvent),et._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const at=this._map;return at&&(at.off("move",this._update),at.on("mousemove",this._onMouseEvent),at.on("drag",this._onMouseEvent),at._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(at){return this.setDOMContent(_.window.document.createTextNode(at))}setHTML(at){const et=_.window.document.createDocumentFragment(),nt=_.window.document.createElement("body");let ct;for(nt.innerHTML=at;ct=nt.firstChild,ct;)et.appendChild(ct);return this.setDOMContent(et)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(at){return this.options.maxWidth=at,this._update(),this}setDOMContent(at){let et=this._content;if(et)for(;et.hasChildNodes();)et.firstChild&&et.removeChild(et.firstChild);else et=this._content=bt("div","mapboxgl-popup-content",this._container||void 0);if(et.appendChild(at),this.options.closeButton){const nt=this._closeButton=bt("button","mapboxgl-popup-close-button",et);nt.type="button",nt.setAttribute("aria-label","Close popup"),nt.setAttribute("aria-hidden","true"),nt.innerHTML="&#215;",nt.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(at){return this._classList.add(at),this._updateClassList(),this}removeClassName(at){return this._classList.delete(at),this._updateClassList(),this}setOffset(at){return this.options.offset=at,this._update(),this}toggleClassName(at){let et;return this._classList.delete(at)?et=!1:(this._classList.add(at),et=!0),this._updateClassList(),et}_onMouseEvent(at){this._update(at.point)}_getAnchor(at){if(this.options.anchor)return this.options.anchor;const et=this._map,nt=this._container,ct=this._pos;if(!et||!nt||!ct)return"bottom";const dt=nt.offsetWidth,ft=nt.offsetHeight,_t=ct.x<dt/2,xt=ct.x>et.transform.width-dt/2;if(ct.y+at<ft)return _t?"top-left":xt?"top-right":"top";if(ct.y>et.transform.height-ft){if(_t)return"bottom-left";if(xt)return"bottom-right"}return _t?"left":xt?"right":"bottom"}_updateClassList(){const at=this._container;if(!at)return;const et=[...this._classList];et.push("mapboxgl-popup"),this._anchor&&et.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&et.push("mapboxgl-popup-track-pointer"),at.className=et.join(" ")}_update(at){const et=this._map,nt=this._content;if(!et||!this._lngLat&&!this._trackPointer||!nt)return;let ct=this._container;if(ct||(ct=this._container=bt("div","mapboxgl-popup",et.getContainer()),this._tip=bt("div","mapboxgl-popup-tip",ct),ct.appendChild(nt)),this.options.maxWidth&&ct.style.maxWidth!==this.options.maxWidth&&(ct.style.maxWidth=this.options.maxWidth),et.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Fu(this._lngLat,this._pos,et.transform)),!this._trackPointer||at){const dt=this._pos=this._trackPointer&&at?at:et.project(this._lngLat),ft=H0(this.options.offset),_t=this._anchor=this._getAnchor(ft.y),xt=H0(this.options.offset,_t),kt=dt.add(xt).round();et._requestDomTask(()=>{this._container&&_t&&(this._container.style.transform=`${du[_t]} translate(${kt.x}px,${kt.y}px)`)})}if(!this._marker&&et._showingGlobe()){const dt=_.isLngLatBehindGlobe(et.transform,this._lngLat)?0:1;this._setOpacity(dt)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const at=this._container.querySelector(Kv);at&&at.focus()}_onClose(){this.remove()}_setOpacity(at){this._container&&(this._container.style.opacity=`${at}`),this._content&&(this._content.style.pointerEvents=at?"auto":"none")}},Marker:fn,Style:_a,LngLat:_.LngLat,LngLatBounds:_.LngLatBounds,Point:_.Point,MercatorCoordinate:_.MercatorCoordinate,FreeCameraOptions:I0,Evented:_.Evented,config:_.config,prewarm:function(){Zl().acquire(Bs)},clearPrewarmedResources:function(){const at=ds;at&&(at.isPreloaded()&&at.numActive()===1?(at.release(Bs),ds=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return _.config.ACCESS_TOKEN},set accessToken(at){_.config.ACCESS_TOKEN=at},get baseApiUrl(){return _.config.API_URL},set baseApiUrl(at){_.config.API_URL=at},get workerCount(){return Fo.workerCount},set workerCount(at){Fo.workerCount=at},get maxParallelImageRequests(){return _.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(at){_.config.MAX_PARALLEL_IMAGE_REQUESTS=at},clearStorage(at){_.clearTileCache(at)},workerUrl:"",workerClass:null,setNow:_.exported.setNow,restoreNow:_.exported.restoreNow};return Vu});var st=tt;return st})})(mapboxGl$2);var mapboxGlExports=mapboxGl$2.exports;const mapboxGl$1=getDefaultExportFromCjs(mapboxGlExports),mapboxgl=_mergeNamespaces({__proto__:null,default:mapboxGl$1},[mapboxGlExports]),MapView$1="";/*! Capacitor: https://capacitorjs.com/ - MIT License */const createCapacitorPlatforms$1=i=>{const o=new Map;o.set("web",{name:"web"});const s=i.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:o},$=(rt,st)=>{s.platforms.set(rt,st)},tt=rt=>{s.platforms.has(rt)&&(s.currentPlatform=s.platforms.get(rt))};return s.addPlatform=$,s.setPlatform=tt,s},initPlatforms$1=i=>i.CapacitorPlatforms=createCapacitorPlatforms$1(i),CapacitorPlatforms$1=initPlatforms$1(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});CapacitorPlatforms$1.addPlatform;CapacitorPlatforms$1.setPlatform;var ExceptionCode$1;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(ExceptionCode$1||(ExceptionCode$1={}));let CapacitorException$1=class extends Error{constructor(o,s,$){super(o),this.message=o,this.code=s,this.data=$}};const getPlatformId$1=i=>{var o,s;return i!=null&&i.androidBridge?"android":!((s=(o=i==null?void 0:i.webkit)===null||o===void 0?void 0:o.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},createCapacitor$1=i=>{var o,s,$,tt,rt;const st=i.CapacitorCustomPlatform||null,_=i.Capacitor||{},ut=_.Plugins=_.Plugins||{},mt=i.CapacitorPlatforms,vt=()=>st!==null?st.name:getPlatformId$1(i),wt=((o=mt==null?void 0:mt.currentPlatform)===null||o===void 0?void 0:o.getPlatform)||vt,bt=()=>wt()!=="web",Mt=((s=mt==null?void 0:mt.currentPlatform)===null||s===void 0?void 0:s.isNativePlatform)||bt,At=Gt=>{const Xt=It.get(Gt);return!!(Xt!=null&&Xt.platforms.has(wt())||Tt(Gt))},Lt=(($=mt==null?void 0:mt.currentPlatform)===null||$===void 0?void 0:$.isPluginAvailable)||At,Ht=Gt=>{var Xt;return(Xt=_.PluginHeaders)===null||Xt===void 0?void 0:Xt.find(ir=>ir.name===Gt)},Tt=((tt=mt==null?void 0:mt.currentPlatform)===null||tt===void 0?void 0:tt.getPluginHeader)||Ht,Ct=Gt=>i.console.error(Gt),St=(Gt,Xt,ir)=>Promise.reject(`${ir} does not have an implementation of "${Xt}".`),It=new Map,Bt=(Gt,Xt={})=>{const ir=It.get(Gt);if(ir)return console.warn(`Capacitor plugin "${Gt}" already registered. Cannot register plugins twice.`),ir.proxy;const $r=wt(),Tr=Tt(Gt);let xr;const Xr=async()=>(!xr&&$r in Xt?xr=typeof Xt[$r]=="function"?xr=await Xt[$r]():xr=Xt[$r]:st!==null&&!xr&&"web"in Xt&&(xr=typeof Xt.web=="function"?xr=await Xt.web():xr=Xt.web),xr),ln=(or,ar)=>{var Fr,Yr;if(Tr){const hn=Tr==null?void 0:Tr.methods.find(mn=>ar===mn.name);if(hn)return hn.rtype==="promise"?mn=>_.nativePromise(Gt,ar.toString(),mn):(mn,En)=>_.nativeCallback(Gt,ar.toString(),mn,En);if(or)return(Fr=or[ar])===null||Fr===void 0?void 0:Fr.bind(or)}else{if(or)return(Yr=or[ar])===null||Yr===void 0?void 0:Yr.bind(or);throw new CapacitorException$1(`"${Gt}" plugin is not implemented on ${$r}`,ExceptionCode$1.Unimplemented)}},zr=or=>{let ar;const Fr=(...Yr)=>{const hn=Xr().then(mn=>{const En=ln(mn,or);if(En){const Ln=En(...Yr);return ar=Ln==null?void 0:Ln.remove,Ln}else throw new CapacitorException$1(`"${Gt}.${or}()" is not implemented on ${$r}`,ExceptionCode$1.Unimplemented)});return or==="addListener"&&(hn.remove=async()=>ar()),hn};return Fr.toString=()=>`${or.toString()}() { [capacitor code] }`,Object.defineProperty(Fr,"name",{value:or,writable:!1,configurable:!1}),Fr},hr=zr("addListener"),Er=zr("removeListener"),Nt=(or,ar)=>{const Fr=hr({eventName:or},ar),Yr=async()=>{const mn=await Fr;Er({eventName:or,callbackId:mn},ar)},hn=new Promise(mn=>Fr.then(()=>mn({remove:Yr})));return hn.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Yr()},hn},Wt=new Proxy({},{get(or,ar){switch(ar){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Tr?Nt:hr;case"removeListener":return Er;default:return zr(ar)}}});return ut[Gt]=Wt,It.set(Gt,{name:Gt,proxy:Wt,platforms:new Set([...Object.keys(Xt),...Tr?[$r]:[]])}),Wt},Ft=((rt=mt==null?void 0:mt.currentPlatform)===null||rt===void 0?void 0:rt.registerPlugin)||Bt;return _.convertFileSrc||(_.convertFileSrc=Gt=>Gt),_.getPlatform=wt,_.handleError=Ct,_.isNativePlatform=Mt,_.isPluginAvailable=Lt,_.pluginMethodNoop=St,_.registerPlugin=Ft,_.Exception=CapacitorException$1,_.DEBUG=!!_.DEBUG,_.isLoggingEnabled=!!_.isLoggingEnabled,_.platform=_.getPlatform(),_.isNative=_.isNativePlatform(),_},initCapacitorGlobal$1=i=>i.Capacitor=createCapacitor$1(i),Capacitor$1=initCapacitorGlobal$1(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),registerPlugin$1=Capacitor$1.registerPlugin;Capacitor$1.Plugins;let WebPlugin$1=class{constructor(o){this.listeners={},this.windowListeners={},o&&(console.warn(`Capacitor WebPlugin "${o.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=o)}addListener(o,s){this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(s);const tt=this.windowListeners[o];tt&&!tt.registered&&this.addWindowListener(tt);const rt=async()=>this.removeListener(o,s),st=Promise.resolve({remove:rt});return Object.defineProperty(st,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await rt()}}),st}async removeAllListeners(){this.listeners={};for(const o in this.windowListeners)this.removeWindowListener(this.windowListeners[o]);this.windowListeners={}}notifyListeners(o,s){const $=this.listeners[o];$&&$.forEach(tt=>tt(s))}hasListeners(o){return!!this.listeners[o].length}registerWindowListener(o,s){this.windowListeners[s]={registered:!1,windowEventName:o,pluginEventName:s,handler:$=>{this.notifyListeners(s,$)}}}unimplemented(o="not implemented"){return new Capacitor$1.Exception(o,ExceptionCode$1.Unimplemented)}unavailable(o="not available"){return new Capacitor$1.Exception(o,ExceptionCode$1.Unavailable)}async removeListener(o,s){const $=this.listeners[o];if(!$)return;const tt=$.indexOf(s);this.listeners[o].splice(tt,1),this.listeners[o].length||this.removeWindowListener(this.windowListeners[o])}addWindowListener(o){window.addEventListener(o.windowEventName,o.handler),o.registered=!0}removeWindowListener(o){o&&(window.removeEventListener(o.windowEventName,o.handler),o.registered=!1)}};const encode$1=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),decode$1=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);let CapacitorCookiesPluginWeb$1=class extends WebPlugin$1{async getCookies(){const o=document.cookie,s={};return o.split(";").forEach($=>{if($.length<=0)return;let[tt,rt]=$.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");tt=decode$1(tt).trim(),rt=decode$1(rt).trim(),s[tt]=rt}),s}async setCookie(o){try{const s=encode$1(o.key),$=encode$1(o.value),tt=`; expires=${(o.expires||"").replace("expires=","")}`,rt=(o.path||"/").replace("path=",""),st=o.url!=null&&o.url.length>0?`domain=${o.url}`:"";document.cookie=`${s}=${$||""}${tt}; path=${rt}; ${st};`}catch(s){return Promise.reject(s)}}async deleteCookie(o){try{document.cookie=`${o.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const o=document.cookie.split(";")||[];for(const s of o)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(o){return Promise.reject(o)}}async clearAllCookies(){try{await this.clearCookies()}catch(o){return Promise.reject(o)}}};registerPlugin$1("CapacitorCookies",{web:()=>new CapacitorCookiesPluginWeb$1});const readBlobAsBase64$1=async i=>new Promise((o,s)=>{const $=new FileReader;$.onload=()=>{const tt=$.result;o(tt.indexOf(",")>=0?tt.split(",")[1]:tt)},$.onerror=tt=>s(tt),$.readAsDataURL(i)}),normalizeHttpHeaders$1=(i={})=>{const o=Object.keys(i);return Object.keys(i).map(tt=>tt.toLocaleLowerCase()).reduce((tt,rt,st)=>(tt[rt]=i[o[st]],tt),{})},buildUrlParams$1=(i,o=!0)=>i?Object.entries(i).reduce(($,tt)=>{const[rt,st]=tt;let _,ut;return Array.isArray(st)?(ut="",st.forEach(mt=>{_=o?encodeURIComponent(mt):mt,ut+=`${rt}=${_}&`}),ut.slice(0,-1)):(_=o?encodeURIComponent(st):st,ut=`${rt}=${_}`),`${$}&${ut}`},"").substr(1):null,buildRequestInit$1=(i,o={})=>{const s=Object.assign({method:i.method||"GET",headers:i.headers},o),tt=normalizeHttpHeaders$1(i.headers)["content-type"]||"";if(typeof i.data=="string")s.body=i.data;else if(tt.includes("application/x-www-form-urlencoded")){const rt=new URLSearchParams;for(const[st,_]of Object.entries(i.data||{}))rt.set(st,_);s.body=rt.toString()}else if(tt.includes("multipart/form-data")){const rt=new FormData;if(i.data instanceof FormData)i.data.forEach((_,ut)=>{rt.append(ut,_)});else for(const _ of Object.keys(i.data))rt.append(_,i.data[_]);s.body=rt;const st=new Headers(s.headers);st.delete("content-type"),s.headers=st}else(tt.includes("application/json")||typeof i.data=="object")&&(s.body=JSON.stringify(i.data));return s};let CapacitorHttpPluginWeb$1=class extends WebPlugin$1{async request(o){const s=buildRequestInit$1(o,o.webFetchExtra),$=buildUrlParams$1(o.params,o.shouldEncodeUrlParams),tt=$?`${o.url}?${$}`:o.url,rt=await fetch(tt,s),st=rt.headers.get("content-type")||"";let{responseType:_="text"}=rt.ok?o:{};st.includes("application/json")&&(_="json");let ut,mt;switch(_){case"arraybuffer":case"blob":mt=await rt.blob(),ut=await readBlobAsBase64$1(mt);break;case"json":ut=await rt.json();break;case"document":case"text":default:ut=await rt.text()}const vt={};return rt.headers.forEach((wt,bt)=>{vt[bt]=wt}),{data:ut,headers:vt,status:rt.status,url:rt.url}}async get(o){return this.request(Object.assign(Object.assign({},o),{method:"GET"}))}async post(o){return this.request(Object.assign(Object.assign({},o),{method:"POST"}))}async put(o){return this.request(Object.assign(Object.assign({},o),{method:"PUT"}))}async patch(o){return this.request(Object.assign(Object.assign({},o),{method:"PATCH"}))}async delete(o){return this.request(Object.assign(Object.assign({},o),{method:"DELETE"}))}};registerPlugin$1("CapacitorHttp",{web:()=>new CapacitorHttpPluginWeb$1});const Geolocation$2=registerPlugin$1("Geolocation",{web:()=>__vitePreload(()=>import("./web-15261f79.js"),[]).then(i=>new i.GeolocationWeb)});/*! Capacitor: https://capacitorjs.com/ - MIT License */const createCapacitorPlatforms=i=>{const o=new Map;o.set("web",{name:"web"});const s=i.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:o},$=(rt,st)=>{s.platforms.set(rt,st)},tt=rt=>{s.platforms.has(rt)&&(s.currentPlatform=s.platforms.get(rt))};return s.addPlatform=$,s.setPlatform=tt,s},initPlatforms=i=>i.CapacitorPlatforms=createCapacitorPlatforms(i),CapacitorPlatforms=initPlatforms(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});CapacitorPlatforms.addPlatform;CapacitorPlatforms.setPlatform;var ExceptionCode;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(ExceptionCode||(ExceptionCode={}));class CapacitorException extends Error{constructor(o,s,$){super(o),this.message=o,this.code=s,this.data=$}}const getPlatformId=i=>{var o,s;return i!=null&&i.androidBridge?"android":!((s=(o=i==null?void 0:i.webkit)===null||o===void 0?void 0:o.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},createCapacitor=i=>{var o,s,$,tt,rt;const st=i.CapacitorCustomPlatform||null,_=i.Capacitor||{},ut=_.Plugins=_.Plugins||{},mt=i.CapacitorPlatforms,vt=()=>st!==null?st.name:getPlatformId(i),wt=((o=mt==null?void 0:mt.currentPlatform)===null||o===void 0?void 0:o.getPlatform)||vt,bt=()=>wt()!=="web",Mt=((s=mt==null?void 0:mt.currentPlatform)===null||s===void 0?void 0:s.isNativePlatform)||bt,At=Gt=>{const Xt=It.get(Gt);return!!(Xt!=null&&Xt.platforms.has(wt())||Tt(Gt))},Lt=(($=mt==null?void 0:mt.currentPlatform)===null||$===void 0?void 0:$.isPluginAvailable)||At,Ht=Gt=>{var Xt;return(Xt=_.PluginHeaders)===null||Xt===void 0?void 0:Xt.find(ir=>ir.name===Gt)},Tt=((tt=mt==null?void 0:mt.currentPlatform)===null||tt===void 0?void 0:tt.getPluginHeader)||Ht,Ct=Gt=>i.console.error(Gt),St=(Gt,Xt,ir)=>Promise.reject(`${ir} does not have an implementation of "${Xt}".`),It=new Map,Bt=(Gt,Xt={})=>{const ir=It.get(Gt);if(ir)return console.warn(`Capacitor plugin "${Gt}" already registered. Cannot register plugins twice.`),ir.proxy;const $r=wt(),Tr=Tt(Gt);let xr;const Xr=async()=>(!xr&&$r in Xt?xr=typeof Xt[$r]=="function"?xr=await Xt[$r]():xr=Xt[$r]:st!==null&&!xr&&"web"in Xt&&(xr=typeof Xt.web=="function"?xr=await Xt.web():xr=Xt.web),xr),ln=(or,ar)=>{var Fr,Yr;if(Tr){const hn=Tr==null?void 0:Tr.methods.find(mn=>ar===mn.name);if(hn)return hn.rtype==="promise"?mn=>_.nativePromise(Gt,ar.toString(),mn):(mn,En)=>_.nativeCallback(Gt,ar.toString(),mn,En);if(or)return(Fr=or[ar])===null||Fr===void 0?void 0:Fr.bind(or)}else{if(or)return(Yr=or[ar])===null||Yr===void 0?void 0:Yr.bind(or);throw new CapacitorException(`"${Gt}" plugin is not implemented on ${$r}`,ExceptionCode.Unimplemented)}},zr=or=>{let ar;const Fr=(...Yr)=>{const hn=Xr().then(mn=>{const En=ln(mn,or);if(En){const Ln=En(...Yr);return ar=Ln==null?void 0:Ln.remove,Ln}else throw new CapacitorException(`"${Gt}.${or}()" is not implemented on ${$r}`,ExceptionCode.Unimplemented)});return or==="addListener"&&(hn.remove=async()=>ar()),hn};return Fr.toString=()=>`${or.toString()}() { [capacitor code] }`,Object.defineProperty(Fr,"name",{value:or,writable:!1,configurable:!1}),Fr},hr=zr("addListener"),Er=zr("removeListener"),Nt=(or,ar)=>{const Fr=hr({eventName:or},ar),Yr=async()=>{const mn=await Fr;Er({eventName:or,callbackId:mn},ar)},hn=new Promise(mn=>Fr.then(()=>mn({remove:Yr})));return hn.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Yr()},hn},Wt=new Proxy({},{get(or,ar){switch(ar){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Tr?Nt:hr;case"removeListener":return Er;default:return zr(ar)}}});return ut[Gt]=Wt,It.set(Gt,{name:Gt,proxy:Wt,platforms:new Set([...Object.keys(Xt),...Tr?[$r]:[]])}),Wt},Ft=((rt=mt==null?void 0:mt.currentPlatform)===null||rt===void 0?void 0:rt.registerPlugin)||Bt;return _.convertFileSrc||(_.convertFileSrc=Gt=>Gt),_.getPlatform=wt,_.handleError=Ct,_.isNativePlatform=Mt,_.isPluginAvailable=Lt,_.pluginMethodNoop=St,_.registerPlugin=Ft,_.Exception=CapacitorException,_.DEBUG=!!_.DEBUG,_.isLoggingEnabled=!!_.isLoggingEnabled,_.platform=_.getPlatform(),_.isNative=_.isNativePlatform(),_},initCapacitorGlobal=i=>i.Capacitor=createCapacitor(i),Capacitor=initCapacitorGlobal(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),registerPlugin=Capacitor.registerPlugin;Capacitor.Plugins;class WebPlugin{constructor(o){this.listeners={},this.windowListeners={},o&&(console.warn(`Capacitor WebPlugin "${o.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=o)}addListener(o,s){this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(s);const tt=this.windowListeners[o];tt&&!tt.registered&&this.addWindowListener(tt);const rt=async()=>this.removeListener(o,s),st=Promise.resolve({remove:rt});return Object.defineProperty(st,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await rt()}}),st}async removeAllListeners(){this.listeners={};for(const o in this.windowListeners)this.removeWindowListener(this.windowListeners[o]);this.windowListeners={}}notifyListeners(o,s){const $=this.listeners[o];$&&$.forEach(tt=>tt(s))}hasListeners(o){return!!this.listeners[o].length}registerWindowListener(o,s){this.windowListeners[s]={registered:!1,windowEventName:o,pluginEventName:s,handler:$=>{this.notifyListeners(s,$)}}}unimplemented(o="not implemented"){return new Capacitor.Exception(o,ExceptionCode.Unimplemented)}unavailable(o="not available"){return new Capacitor.Exception(o,ExceptionCode.Unavailable)}async removeListener(o,s){const $=this.listeners[o];if(!$)return;const tt=$.indexOf(s);this.listeners[o].splice(tt,1),this.listeners[o].length||this.removeWindowListener(this.windowListeners[o])}addWindowListener(o){window.addEventListener(o.windowEventName,o.handler),o.registered=!0}removeWindowListener(o){o&&(window.removeEventListener(o.windowEventName,o.handler),o.registered=!1)}}const encode=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),decode=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class CapacitorCookiesPluginWeb extends WebPlugin{async getCookies(){const o=document.cookie,s={};return o.split(";").forEach($=>{if($.length<=0)return;let[tt,rt]=$.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");tt=decode(tt).trim(),rt=decode(rt).trim(),s[tt]=rt}),s}async setCookie(o){try{const s=encode(o.key),$=encode(o.value),tt=`; expires=${(o.expires||"").replace("expires=","")}`,rt=(o.path||"/").replace("path=",""),st=o.url!=null&&o.url.length>0?`domain=${o.url}`:"";document.cookie=`${s}=${$||""}${tt}; path=${rt}; ${st};`}catch(s){return Promise.reject(s)}}async deleteCookie(o){try{document.cookie=`${o.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const o=document.cookie.split(";")||[];for(const s of o)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(o){return Promise.reject(o)}}async clearAllCookies(){try{await this.clearCookies()}catch(o){return Promise.reject(o)}}}registerPlugin("CapacitorCookies",{web:()=>new CapacitorCookiesPluginWeb});const readBlobAsBase64=async i=>new Promise((o,s)=>{const $=new FileReader;$.onload=()=>{const tt=$.result;o(tt.indexOf(",")>=0?tt.split(",")[1]:tt)},$.onerror=tt=>s(tt),$.readAsDataURL(i)}),normalizeHttpHeaders=(i={})=>{const o=Object.keys(i);return Object.keys(i).map(tt=>tt.toLocaleLowerCase()).reduce((tt,rt,st)=>(tt[rt]=i[o[st]],tt),{})},buildUrlParams=(i,o=!0)=>i?Object.entries(i).reduce(($,tt)=>{const[rt,st]=tt;let _,ut;return Array.isArray(st)?(ut="",st.forEach(mt=>{_=o?encodeURIComponent(mt):mt,ut+=`${rt}=${_}&`}),ut.slice(0,-1)):(_=o?encodeURIComponent(st):st,ut=`${rt}=${_}`),`${$}&${ut}`},"").substr(1):null,buildRequestInit=(i,o={})=>{const s=Object.assign({method:i.method||"GET",headers:i.headers},o),tt=normalizeHttpHeaders(i.headers)["content-type"]||"";if(typeof i.data=="string")s.body=i.data;else if(tt.includes("application/x-www-form-urlencoded")){const rt=new URLSearchParams;for(const[st,_]of Object.entries(i.data||{}))rt.set(st,_);s.body=rt.toString()}else if(tt.includes("multipart/form-data")){const rt=new FormData;if(i.data instanceof FormData)i.data.forEach((_,ut)=>{rt.append(ut,_)});else for(const _ of Object.keys(i.data))rt.append(_,i.data[_]);s.body=rt;const st=new Headers(s.headers);st.delete("content-type"),s.headers=st}else(tt.includes("application/json")||typeof i.data=="object")&&(s.body=JSON.stringify(i.data));return s};class CapacitorHttpPluginWeb extends WebPlugin{async request(o){const s=buildRequestInit(o,o.webFetchExtra),$=buildUrlParams(o.params,o.shouldEncodeUrlParams),tt=$?`${o.url}?${$}`:o.url,rt=await fetch(tt,s),st=rt.headers.get("content-type")||"";let{responseType:_="text"}=rt.ok?o:{};st.includes("application/json")&&(_="json");let ut,mt;switch(_){case"arraybuffer":case"blob":mt=await rt.blob(),ut=await readBlobAsBase64(mt);break;case"json":ut=await rt.json();break;case"document":case"text":default:ut=await rt.text()}const vt={};return rt.headers.forEach((wt,bt)=>{vt[bt]=wt}),{data:ut,headers:vt,status:rt.status,url:rt.url}}async get(o){return this.request(Object.assign(Object.assign({},o),{method:"GET"}))}async post(o){return this.request(Object.assign(Object.assign({},o),{method:"POST"}))}async put(o){return this.request(Object.assign(Object.assign({},o),{method:"PUT"}))}async patch(o){return this.request(Object.assign(Object.assign({},o),{method:"PATCH"}))}async delete(o){return this.request(Object.assign(Object.assign({},o),{method:"DELETE"}))}}const CapacitorHttp=registerPlugin("CapacitorHttp",{web:()=>new CapacitorHttpPluginWeb}),mapboxGl="",mapboxGlGeocoder="";var immutable=extend$2,hasOwnProperty=Object.prototype.hasOwnProperty;function extend$2(){for(var i={},o=0;o<arguments.length;o++){var s=arguments[o];for(var $ in s)hasOwnProperty.call(s,$)&&(i[$]=s[$])}return i}var fuzzy$1={exports:{}};(function(i,o){(function(){var s={};i.exports=s,s.simpleFilter=function($,tt){return tt.filter(function(rt){return s.test($,rt)})},s.test=function($,tt){return s.match($,tt)!==null},s.match=function($,tt,rt){rt=rt||{};var st=0,_=[],ut=tt.length,mt=0,vt=0,wt=rt.pre||"",bt=rt.post||"",Mt=rt.caseSensitive&&tt||tt.toLowerCase(),At;$=rt.caseSensitive&&$||$.toLowerCase();for(var Lt=0;Lt<ut;Lt++)At=tt[Lt],Mt[Lt]===$[st]?(At=wt+At+bt,st+=1,vt+=1+vt):vt=0,mt+=vt,_[_.length]=At;return st===$.length?(mt=Mt===$?1/0:mt,{rendered:_.join(""),score:mt}):null},s.filter=function($,tt,rt){return!tt||tt.length===0?[]:typeof $!="string"?tt:(rt=rt||{},tt.reduce(function(st,_,ut,mt){var vt=_;rt.extract&&(vt=rt.extract(_));var wt=s.match($,vt,rt);return wt!=null&&(st[st.length]={string:wt.rendered,score:wt.score,index:ut,original:_}),st},[]).sort(function(st,_){var ut=_.score-st.score;return ut||st.index-_.index}))}})()})(fuzzy$1);var fuzzyExports=fuzzy$1.exports,List$1=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};List$1.prototype.show=function(){this.element.style.display="block"};List$1.prototype.hide=function(){this.element.style.display="none"};List$1.prototype.add=function(i){this.items.push(i)};List$1.prototype.clear=function(){this.items=[],this.active=0};List$1.prototype.isEmpty=function(){return!this.items.length};List$1.prototype.isVisible=function(){return this.element.style.display==="block"};List$1.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};List$1.prototype.drawItem=function(i,o){var s=document.createElement("li"),$=document.createElement("a");o&&(s.className+=" active"),$.innerHTML=i.string,s.appendChild($),this.element.appendChild(s),s.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),s.addEventListener("mouseup",function(){this.handleMouseUp.call(this,i)}.bind(this))};List$1.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};List$1.prototype.move=function(i){this.active=i,this.draw()};List$1.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};List$1.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};List$1.prototype.drawError=function(i){var o=document.createElement("li");o.innerHTML=i,this.element.appendChild(o),this.show()};var list=List$1,extend$1=immutable,fuzzy=fuzzyExports,List=list,Suggestions$1=function(i,o,s){return s=s||{},this.options=extend$1({minLength:2,limit:5,filter:!0,hideOnBlur:!0},s),this.el=i,this.data=o||[],this.list=new List(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function($){this.handleKeyUp($.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function($){this.handleKeyDown($)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function($){this.handlePaste($)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Suggestions$1.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};Suggestions$1.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Suggestions$1.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Suggestions$1.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(i.target.value)},100)}};Suggestions$1.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}.bind(this))};Suggestions$1.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Suggestions$1.prototype.update=function(i){this.data=i,this.handleKeyUp()};Suggestions$1.prototype.clear=function(){this.data=[],this.list.clear()};Suggestions$1.prototype.normalize=function(i){return i=i.toLowerCase(),i};Suggestions$1.prototype.match=function(i,o){return i.indexOf(o)>-1};Suggestions$1.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")};Suggestions$1.prototype.getCandidates=function(i){var o={pre:"<strong>",post:"</strong>",extract:function($){return this.getItemValue($)}.bind(this)},s;this.options.filter?(s=fuzzy.filter(this.query,this.data,o),s=s.map(function($){return{original:$.original,string:this.render($.original,$.string)}}.bind(this))):s=this.data.map(function($){var tt=this.render($);return{original:$,string:tt}}.bind(this)),i(s)};Suggestions$1.prototype.getItemValue=function(i){return i};Suggestions$1.prototype.render=function(i,o){if(o)return o;for(var s=i.original?this.getItemValue(i.original):this.getItemValue(i),$=this.normalize(s),tt=$.lastIndexOf(this.query);tt>-1;){var rt=tt+this.query.length;s=s.slice(0,tt)+"<strong>"+s.slice(tt,rt)+"</strong>"+s.slice(rt),tt=$.slice(0,tt).lastIndexOf(this.query)}return s};Suggestions$1.prototype.renderError=function(i){this.list.drawError(i)};var suggestions$1=Suggestions$1,Suggestions=suggestions$1,suggestions=Suggestions;typeof window<"u"&&(window.Suggestions=Suggestions);var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root$1.Date.now()};function debounce$1(i,o,s){var $,tt,rt,st,_,ut,mt=0,vt=!1,wt=!1,bt=!0;if(typeof i!="function")throw new TypeError(FUNC_ERROR_TEXT);o=toNumber(o)||0,isObject(s)&&(vt=!!s.leading,wt="maxWait"in s,rt=wt?nativeMax(toNumber(s.maxWait)||0,o):rt,bt="trailing"in s?!!s.trailing:bt);function Mt(Ft){var Gt=$,Xt=tt;return $=tt=void 0,mt=Ft,st=i.apply(Xt,Gt),st}function At(Ft){return mt=Ft,_=setTimeout(Tt,o),vt?Mt(Ft):st}function Lt(Ft){var Gt=Ft-ut,Xt=Ft-mt,ir=o-Gt;return wt?nativeMin(ir,rt-Xt):ir}function Ht(Ft){var Gt=Ft-ut,Xt=Ft-mt;return ut===void 0||Gt>=o||Gt<0||wt&&Xt>=rt}function Tt(){var Ft=now();if(Ht(Ft))return Ct(Ft);_=setTimeout(Tt,Lt(Ft))}function Ct(Ft){return _=void 0,bt&&$?Mt(Ft):($=tt=void 0,st)}function St(){_!==void 0&&clearTimeout(_),mt=0,$=ut=tt=_=void 0}function It(){return _===void 0?st:Ct(now())}function Bt(){var Ft=now(),Gt=Ht(Ft);if($=arguments,tt=this,ut=Ft,Gt){if(_===void 0)return At(ut);if(wt)return _=setTimeout(Tt,o),Mt(ut)}return _===void 0&&(_=setTimeout(Tt,o)),st}return Bt.cancel=St,Bt.flush=It,Bt}function isObject(i){var o=typeof i;return!!i&&(o=="object"||o=="function")}function isObjectLike(i){return!!i&&typeof i=="object"}function isSymbol(i){return typeof i=="symbol"||isObjectLike(i)&&objectToString.call(i)==symbolTag}function toNumber(i){if(typeof i=="number")return i;if(isSymbol(i))return NAN;if(isObject(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=isObject(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=i.replace(reTrim,"");var s=reIsBinary.test(i);return s||reIsOctal.test(i)?freeParseInt(i.slice(2),s?2:8):reIsBadHex.test(i)?NAN:+i}var lodash_debounce=debounce$1,events$1={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(o,s,$){return Function.prototype.apply.call(o,s,$)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:ReflectOwnKeys=function(o){return Object.getOwnPropertyNames(o)};function ProcessEmitWarning(i){console&&console.warn&&console.warn(i)}var NumberIsNaN=Number.isNaN||function(o){return o!==o};function EventEmitter$2(){EventEmitter$2.init.call(this)}events$1.exports=EventEmitter$2;events$1.exports.once=once;EventEmitter$2.EventEmitter=EventEmitter$2;EventEmitter$2.prototype._events=void 0;EventEmitter$2.prototype._eventsCount=0;EventEmitter$2.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(EventEmitter$2,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(i){if(typeof i!="number"||i<0||NumberIsNaN(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");defaultMaxListeners=i}});EventEmitter$2.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$2.prototype.setMaxListeners=function(o){if(typeof o!="number"||o<0||NumberIsNaN(o))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+o+".");return this._maxListeners=o,this};function _getMaxListeners(i){return i._maxListeners===void 0?EventEmitter$2.defaultMaxListeners:i._maxListeners}EventEmitter$2.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$2.prototype.emit=function(o){for(var s=[],$=1;$<arguments.length;$++)s.push(arguments[$]);var tt=o==="error",rt=this._events;if(rt!==void 0)tt=tt&&rt.error===void 0;else if(!tt)return!1;if(tt){var st;if(s.length>0&&(st=s[0]),st instanceof Error)throw st;var _=new Error("Unhandled error."+(st?" ("+st.message+")":""));throw _.context=st,_}var ut=rt[o];if(ut===void 0)return!1;if(typeof ut=="function")ReflectApply(ut,this,s);else for(var mt=ut.length,vt=arrayClone(ut,mt),$=0;$<mt;++$)ReflectApply(vt[$],this,s);return!0};function _addListener(i,o,s,$){var tt,rt,st;if(checkListener(s),rt=i._events,rt===void 0?(rt=i._events=Object.create(null),i._eventsCount=0):(rt.newListener!==void 0&&(i.emit("newListener",o,s.listener?s.listener:s),rt=i._events),st=rt[o]),st===void 0)st=rt[o]=s,++i._eventsCount;else if(typeof st=="function"?st=rt[o]=$?[s,st]:[st,s]:$?st.unshift(s):st.push(s),tt=_getMaxListeners(i),tt>0&&st.length>tt&&!st.warned){st.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+st.length+" "+String(o)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=i,_.type=o,_.count=st.length,ProcessEmitWarning(_)}return i}EventEmitter$2.prototype.addListener=function(o,s){return _addListener(this,o,s,!1)};EventEmitter$2.prototype.on=EventEmitter$2.prototype.addListener;EventEmitter$2.prototype.prependListener=function(o,s){return _addListener(this,o,s,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(i,o,s){var $={fired:!1,wrapFn:void 0,target:i,type:o,listener:s},tt=onceWrapper.bind($);return tt.listener=s,$.wrapFn=tt,tt}EventEmitter$2.prototype.once=function(o,s){return checkListener(s),this.on(o,_onceWrap(this,o,s)),this};EventEmitter$2.prototype.prependOnceListener=function(o,s){return checkListener(s),this.prependListener(o,_onceWrap(this,o,s)),this};EventEmitter$2.prototype.removeListener=function(o,s){var $,tt,rt,st,_;if(checkListener(s),tt=this._events,tt===void 0)return this;if($=tt[o],$===void 0)return this;if($===s||$.listener===s)--this._eventsCount===0?this._events=Object.create(null):(delete tt[o],tt.removeListener&&this.emit("removeListener",o,$.listener||s));else if(typeof $!="function"){for(rt=-1,st=$.length-1;st>=0;st--)if($[st]===s||$[st].listener===s){_=$[st].listener,rt=st;break}if(rt<0)return this;rt===0?$.shift():spliceOne($,rt),$.length===1&&(tt[o]=$[0]),tt.removeListener!==void 0&&this.emit("removeListener",o,_||s)}return this};EventEmitter$2.prototype.off=EventEmitter$2.prototype.removeListener;EventEmitter$2.prototype.removeAllListeners=function(o){var s,$,tt;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[o]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete $[o]),this;if(arguments.length===0){var rt=Object.keys($),st;for(tt=0;tt<rt.length;++tt)st=rt[tt],st!=="removeListener"&&this.removeAllListeners(st);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(s=$[o],typeof s=="function")this.removeListener(o,s);else if(s!==void 0)for(tt=s.length-1;tt>=0;tt--)this.removeListener(o,s[tt]);return this};function _listeners(i,o,s){var $=i._events;if($===void 0)return[];var tt=$[o];return tt===void 0?[]:typeof tt=="function"?s?[tt.listener||tt]:[tt]:s?unwrapListeners(tt):arrayClone(tt,tt.length)}EventEmitter$2.prototype.listeners=function(o){return _listeners(this,o,!0)};EventEmitter$2.prototype.rawListeners=function(o){return _listeners(this,o,!1)};EventEmitter$2.listenerCount=function(i,o){return typeof i.listenerCount=="function"?i.listenerCount(o):listenerCount.call(i,o)};EventEmitter$2.prototype.listenerCount=listenerCount;function listenerCount(i){var o=this._events;if(o!==void 0){var s=o[i];if(typeof s=="function")return 1;if(s!==void 0)return s.length}return 0}EventEmitter$2.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(i,o){for(var s=new Array(o),$=0;$<o;++$)s[$]=i[$];return s}function spliceOne(i,o){for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}function unwrapListeners(i){for(var o=new Array(i.length),s=0;s<o.length;++s)o[s]=i[s].listener||i[s];return o}function once(i,o){return new Promise(function(s,$){function tt(st){i.removeListener(o,rt),$(st)}function rt(){typeof i.removeListener=="function"&&i.removeListener("error",tt),s([].slice.call(arguments))}eventTargetAgnosticAddListener(i,o,rt,{once:!0}),o!=="error"&&addErrorHandlerIfEventEmitter(i,tt,{once:!0})})}function addErrorHandlerIfEventEmitter(i,o,s){typeof i.on=="function"&&eventTargetAgnosticAddListener(i,"error",o,s)}function eventTargetAgnosticAddListener(i,o,s,$){if(typeof i.on=="function")$.once?i.once(o,s):i.on(o,s);else if(typeof i.addEventListener=="function")i.addEventListener(o,function tt(rt){$.once&&i.removeEventListener(o,tt),s(rt)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var eventsExports=events$1.exports,exceptions$1={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function parseParam(i){var o=i.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return o?{key:o[1],value:o[2]}:null}function parseLink(i){var o=i.match(/<?([^>]*)>(.*)/);if(!o)return null;var s=o[1],$=o[2].split(";"),tt=null,rt=$.reduce(function(st,_){var ut=parseParam(_);return ut?ut.key==="rel"?(tt||(tt=ut.value),st):(st[ut.key]=ut.value,st):st},{});return tt?{url:s,rel:tt,params:rt}:null}function parseLinkHeader$1(i){return i?i.split(/,\s*</).reduce(function(o,s){var $=parseLink(s);if(!$)return o;var tt=$.rel.split(/\s+/);return tt.forEach(function(rt){o[rt]||(o[rt]={url:$.url,params:$.params})}),o},{}):{}}var parseLinkHeader_1=parseLinkHeader$1,parseLinkHeader=parseLinkHeader_1;function MapiResponse$1(i,o){this.request=i,this.headers=o.headers,this.rawBody=o.body,this.statusCode=o.statusCode;try{this.body=JSON.parse(o.body||"{}")}catch(s){this.body=o.body}this.links=parseLinkHeader(this.headers.link)}MapiResponse$1.prototype.hasNextPage=function(){return!!this.links.next};MapiResponse$1.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var mapiResponse=MapiResponse$1,constants$4={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},constants$3=constants$4;function MapiError$1(i){var o=i.type||constants$3.ERROR_HTTP,s;if(i.body)try{s=JSON.parse(i.body)}catch(tt){s=i.body}else s=null;var $=i.message||null;$||(typeof s=="string"?$=s:s&&typeof s.message=="string"?$=s.message:o===constants$3.ERROR_REQUEST_ABORTED&&($="Request aborted")),this.message=$,this.type=o,this.statusCode=i.statusCode||null,this.request=i.request,this.body=s}var mapiError=MapiError$1;function parseSingleHeader(i){var o=i.indexOf(":"),s=i.substring(0,o).trim().toLowerCase(),$=i.substring(o+1).trim();return{name:s,value:$}}function parseHeaders$1(i){var o={};return i&&i.trim().split(/[\r|\n]+/).forEach(function(s){var $=parseSingleHeader(s);o[$.name]=$.value}),o}var parseHeaders_1=parseHeaders$1,MapiResponse=mapiResponse,MapiError=mapiError,constants$2=constants$4,parseHeaders=parseHeaders_1,requestsUnderway={};function browserAbort(i){var o=requestsUnderway[i.id];o&&(o.abort(),delete requestsUnderway[i.id])}function createResponse(i,o){return new MapiResponse(i,{body:o.response,headers:parseHeaders(o.getAllResponseHeaders()),statusCode:o.status})}function normalizeBrowserProgressEvent(i){var o=i.total,s=i.loaded,$=100*s/o;return{total:o,transferred:s,percent:$}}function sendRequestXhr(i,o){return new Promise(function(s,$){o.onprogress=function(st){i.emitter.emit(constants$2.EVENT_PROGRESS_DOWNLOAD,normalizeBrowserProgressEvent(st))};var tt=i.file;tt&&(o.upload.onprogress=function(st){i.emitter.emit(constants$2.EVENT_PROGRESS_UPLOAD,normalizeBrowserProgressEvent(st))}),o.onerror=function(st){$(st)},o.onabort=function(){var st=new MapiError({request:i,type:constants$2.ERROR_REQUEST_ABORTED});$(st)},o.onload=function(){if(delete requestsUnderway[i.id],o.status<200||o.status>=400){var st=new MapiError({request:i,body:o.response,statusCode:o.status});$(st);return}s(o)};var rt=i.body;typeof rt=="string"?o.send(rt):rt?o.send(JSON.stringify(rt)):tt?o.send(tt):o.send(),requestsUnderway[i.id]=o}).then(function(s){return createResponse(i,s)})}function createRequestXhr(i,o){var s=i.url(o),$=new window.XMLHttpRequest;return $.open(i.method,s),Object.keys(i.headers).forEach(function(tt){$.setRequestHeader(tt,i.headers[tt])}),$}function browserSend(i){return Promise.resolve().then(function(){var o=createRequestXhr(i,i.client.accessToken);return sendRequestXhr(i,o)})}var browserLayer={browserAbort,sendRequestXhr,browserSend,createRequestXhr},base64$1={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */base64$1.exports;(function(i,o){(function(s){var $=o,tt=i&&i.exports==$&&i,rt=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1;(rt.global===rt||rt.window===rt)&&(s=rt);var st=function(At){this.message=At};st.prototype=new Error,st.prototype.name="InvalidCharacterError";var _=function(At){throw new st(At)},ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt=/[\t\n\f\r ]/g,vt=function(At){At=String(At).replace(mt,"");var Lt=At.length;Lt%4==0&&(At=At.replace(/==?$/,""),Lt=At.length),(Lt%4==1||/[^+a-zA-Z0-9/]/.test(At))&&_("Invalid character: the string to be decoded is not correctly encoded.");for(var Ht=0,Tt,Ct,St="",It=-1;++It<Lt;)Ct=ut.indexOf(At.charAt(It)),Tt=Ht%4?Tt*64+Ct:Ct,Ht++%4&&(St+=String.fromCharCode(255&Tt>>(-2*Ht&6)));return St},wt=function(At){At=String(At),/[^\0-\xFF]/.test(At)&&_("The string to be encoded contains characters outside of the Latin1 range.");for(var Lt=At.length%3,Ht="",Tt=-1,Ct,St,It,Bt,Ft=At.length-Lt;++Tt<Ft;)Ct=At.charCodeAt(Tt)<<16,St=At.charCodeAt(++Tt)<<8,It=At.charCodeAt(++Tt),Bt=Ct+St+It,Ht+=ut.charAt(Bt>>18&63)+ut.charAt(Bt>>12&63)+ut.charAt(Bt>>6&63)+ut.charAt(Bt&63);return Lt==2?(Ct=At.charCodeAt(Tt)<<8,St=At.charCodeAt(++Tt),Bt=Ct+St,Ht+=ut.charAt(Bt>>10)+ut.charAt(Bt>>4&63)+ut.charAt(Bt<<2&63)+"="):Lt==1&&(Bt=At.charCodeAt(Tt),Ht+=ut.charAt(Bt>>2)+ut.charAt(Bt<<4&63)+"=="),Ht},bt={encode:wt,decode:vt,version:"0.1.0"};if($&&!$.nodeType)if(tt)tt.exports=bt;else for(var Mt in bt)bt.hasOwnProperty(Mt)&&($[Mt]=bt[Mt]);else s.base64=bt})(commonjsGlobal$1)})(base64$1,base64$1.exports);var base64Exports=base64$1.exports,base64=base64Exports,tokenCache={};function parseToken$2(i){if(tokenCache[i])return tokenCache[i];var o=i.split("."),s=o[0],$=o[1];if(!$)throw new Error("Invalid token");var tt=parsePaylod($),rt={usage:s,user:tt.u};return has(tt,"a")&&(rt.authorization=tt.a),has(tt,"exp")&&(rt.expires=tt.exp*1e3),has(tt,"iat")&&(rt.created=tt.iat*1e3),has(tt,"scopes")&&(rt.scopes=tt.scopes),has(tt,"client")&&(rt.client=tt.client),has(tt,"ll")&&(rt.lastLogin=tt.ll),has(tt,"iu")&&(rt.impersonator=tt.iu),tokenCache[i]=rt,rt}function parsePaylod(i){try{return JSON.parse(base64.decode(i))}catch(o){throw new Error("Invalid token")}}function has(i,o){return Object.prototype.hasOwnProperty.call(i,o)}var parseMapboxToken=parseToken$2,eventemitter3={exports:{}};(function(i){var o=Object.prototype.hasOwnProperty,s="~";function $(){}Object.create&&($.prototype=Object.create(null),new $().__proto__||(s=!1));function tt(ut,mt,vt){this.fn=ut,this.context=mt,this.once=vt||!1}function rt(ut,mt,vt,wt,bt){if(typeof vt!="function")throw new TypeError("The listener must be a function");var Mt=new tt(vt,wt||ut,bt),At=s?s+mt:mt;return ut._events[At]?ut._events[At].fn?ut._events[At]=[ut._events[At],Mt]:ut._events[At].push(Mt):(ut._events[At]=Mt,ut._eventsCount++),ut}function st(ut,mt){--ut._eventsCount===0?ut._events=new $:delete ut._events[mt]}function _(){this._events=new $,this._eventsCount=0}_.prototype.eventNames=function(){var mt=[],vt,wt;if(this._eventsCount===0)return mt;for(wt in vt=this._events)o.call(vt,wt)&&mt.push(s?wt.slice(1):wt);return Object.getOwnPropertySymbols?mt.concat(Object.getOwnPropertySymbols(vt)):mt},_.prototype.listeners=function(mt){var vt=s?s+mt:mt,wt=this._events[vt];if(!wt)return[];if(wt.fn)return[wt.fn];for(var bt=0,Mt=wt.length,At=new Array(Mt);bt<Mt;bt++)At[bt]=wt[bt].fn;return At},_.prototype.listenerCount=function(mt){var vt=s?s+mt:mt,wt=this._events[vt];return wt?wt.fn?1:wt.length:0},_.prototype.emit=function(mt,vt,wt,bt,Mt,At){var Lt=s?s+mt:mt;if(!this._events[Lt])return!1;var Ht=this._events[Lt],Tt=arguments.length,Ct,St;if(Ht.fn){switch(Ht.once&&this.removeListener(mt,Ht.fn,void 0,!0),Tt){case 1:return Ht.fn.call(Ht.context),!0;case 2:return Ht.fn.call(Ht.context,vt),!0;case 3:return Ht.fn.call(Ht.context,vt,wt),!0;case 4:return Ht.fn.call(Ht.context,vt,wt,bt),!0;case 5:return Ht.fn.call(Ht.context,vt,wt,bt,Mt),!0;case 6:return Ht.fn.call(Ht.context,vt,wt,bt,Mt,At),!0}for(St=1,Ct=new Array(Tt-1);St<Tt;St++)Ct[St-1]=arguments[St];Ht.fn.apply(Ht.context,Ct)}else{var It=Ht.length,Bt;for(St=0;St<It;St++)switch(Ht[St].once&&this.removeListener(mt,Ht[St].fn,void 0,!0),Tt){case 1:Ht[St].fn.call(Ht[St].context);break;case 2:Ht[St].fn.call(Ht[St].context,vt);break;case 3:Ht[St].fn.call(Ht[St].context,vt,wt);break;case 4:Ht[St].fn.call(Ht[St].context,vt,wt,bt);break;default:if(!Ct)for(Bt=1,Ct=new Array(Tt-1);Bt<Tt;Bt++)Ct[Bt-1]=arguments[Bt];Ht[St].fn.apply(Ht[St].context,Ct)}}return!0},_.prototype.on=function(mt,vt,wt){return rt(this,mt,vt,wt,!1)},_.prototype.once=function(mt,vt,wt){return rt(this,mt,vt,wt,!0)},_.prototype.removeListener=function(mt,vt,wt,bt){var Mt=s?s+mt:mt;if(!this._events[Mt])return this;if(!vt)return st(this,Mt),this;var At=this._events[Mt];if(At.fn)At.fn===vt&&(!bt||At.once)&&(!wt||At.context===wt)&&st(this,Mt);else{for(var Lt=0,Ht=[],Tt=At.length;Lt<Tt;Lt++)(At[Lt].fn!==vt||bt&&!At[Lt].once||wt&&At[Lt].context!==wt)&&Ht.push(At[Lt]);Ht.length?this._events[Mt]=Ht.length===1?Ht[0]:Ht:st(this,Mt)}return this},_.prototype.removeAllListeners=function(mt){var vt;return mt?(vt=s?s+mt:mt,this._events[vt]&&st(this,vt)):(this._events=new $,this._eventsCount=0),this},_.prototype.off=_.prototype.removeListener,_.prototype.addListener=_.prototype.on,_.prefixed=s,_.EventEmitter=_,i.exports=_})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;function encodeArray(i){return i.map(encodeURIComponent).join(",")}function encodeValue(i){return Array.isArray(i)?encodeArray(i):encodeURIComponent(String(i))}function appendQueryParam(i,o,s){if(s===!1||s===null)return i;var $=/\?/.test(i)?"&":"?",tt=encodeURIComponent(o);return s!==void 0&&s!==""&&s!==!0&&(tt+="="+encodeValue(s)),""+i+$+tt}function appendQueryObject(i,o){if(!o)return i;var s=i;return Object.keys(o).forEach(function($){var tt=o[$];tt!==void 0&&(Array.isArray(tt)&&(tt=tt.filter(function(rt){return rt!=null}).join(",")),s=appendQueryParam(s,$,tt))}),s}function prependOrigin(i,o){if(!o||i.slice(0,4)==="http")return i;var s=i[0]==="/"?"":"/";return""+o.replace(/\/$/,"")+s+i}function interpolateRouteParams(i,o){return o?i.replace(/\/:([a-zA-Z0-9]+)/g,function(s,$){var tt=o[$];if(tt===void 0)throw new Error("Unspecified route parameter "+$);var rt=encodeValue(tt);return"/"+rt}):i}var urlUtils$1={appendQueryObject,appendQueryParam,prependOrigin,interpolateRouteParams},parseToken$1=parseMapboxToken,xtend$3=immutable,EventEmitter$1=eventemitter3Exports,urlUtils=urlUtils$1,constants$1=constants$4,requestId=1;function MapiRequest$1(i,o){if(!i)throw new Error("MapiRequest requires a client");if(!o||!o.path||!o.method)throw new Error("MapiRequest requires an options object with path and method properties");var s={};o.body&&(s["content-type"]="application/json");var $=xtend$3(s,o.headers),tt=Object.keys($).reduce(function(rt,st){return rt[st.toLowerCase()]=$[st],rt},{});this.id=requestId++,this._options=o,this.emitter=new EventEmitter$1,this.client=i,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=o.path,this.method=o.method,this.origin=o.origin||i.origin,this.query=o.query||{},this.params=o.params||{},this.body=o.body||null,this.file=o.file||null,this.encoding=o.encoding||"utf8",this.sendFileAs=o.sendFileAs||null,this.headers=tt}MapiRequest$1.prototype.url=function(o){var s=urlUtils.prependOrigin(this.path,this.origin);s=urlUtils.appendQueryObject(s,this.query);var $=this.params,tt=o==null?this.client.accessToken:o;if(tt){s=urlUtils.appendQueryParam(s,"access_token",tt);var rt=parseToken$1(tt).user;$=xtend$3({ownerId:rt},$)}return s=urlUtils.interpolateRouteParams(s,$),s};MapiRequest$1.prototype.send=function(){var o=this;if(o.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return o.sent=!0,o.client.sendRequest(o).then(function(s){return o.response=s,o.emitter.emit(constants$1.EVENT_RESPONSE,s),s},function(s){throw o.error=s,o.emitter.emit(constants$1.EVENT_ERROR,s),s})};MapiRequest$1.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};MapiRequest$1.prototype.eachPage=function(o){var s=this;function $(st){function _(){delete s._nextPageRequest;var ut=st.nextPage();ut&&(s._nextPageRequest=ut,rt(ut))}o(null,st,_)}function tt(st){o(st,null,function(){})}function rt(st){st.send().then($,tt)}rt(this)};MapiRequest$1.prototype.clone=function(){return this._extend()};MapiRequest$1.prototype._extend=function(o){var s=xtend$3(this._options,o);return new MapiRequest$1(this.client,s)};var mapiRequest=MapiRequest$1,parseToken=parseMapboxToken,MapiRequest=mapiRequest,constants=constants$4;function MapiClient$2(i){if(!i||!i.accessToken)throw new Error("Cannot create a client without an access token");parseToken(i.accessToken),this.accessToken=i.accessToken,this.origin=i.origin||constants.API_ORIGIN}MapiClient$2.prototype.createRequest=function(o){return new MapiRequest(this,o)};var mapiClient=MapiClient$2,browser=browserLayer,MapiClient$1=mapiClient;function BrowserClient(i){MapiClient$1.call(this,i)}BrowserClient.prototype=Object.create(MapiClient$1.prototype);BrowserClient.prototype.constructor=BrowserClient;BrowserClient.prototype.sendRequest=browser.browserSend;BrowserClient.prototype.abortRequest=browser.browserAbort;function createBrowserClient(i){return new BrowserClient(i)}var browserClient=createBrowserClient,client=browserClient,mapboxSdk=client,toString=Object.prototype.toString,isPlainObj=function(i){var o;return toString.call(i)==="[object Object]"&&(o=Object.getPrototypeOf(i),o===null||o===Object.getPrototypeOf({}))},isPlainObject=isPlainObj,xtend$2=immutable,DEFAULT_ERROR_PATH="value",NEWLINE_INDENT=`
  `,v$2={};v$2.assert=function(i,o){return o=o||{},function(s){var $=validate(i,s);if($){var tt=processMessage($,o);throw o.apiName&&(tt=o.apiName+": "+tt),new Error(tt)}}};v$2.shape=function(o){var s=objectEntries(o);return function(tt){var rt=validate(v$2.plainObject,tt);if(rt)return rt;for(var st,_,ut=[],mt=0;mt<s.length;mt++)st=s[mt].key,_=s[mt].value,rt=validate(_,tt[st]),rt&&ut.push([st].concat(rt));return ut.length<2?ut[0]:function(vt){ut=ut.map(function(Mt){var At=Mt[0],Lt=processMessage(Mt,vt).split(`
`).join(NEWLINE_INDENT);return"- "+At+": "+Lt});var wt=vt.path.join("."),bt=wt===DEFAULT_ERROR_PATH?"":" of "+wt;return"The following properties"+bt+" have invalid values:"+NEWLINE_INDENT+ut.join(NEWLINE_INDENT)}}};v$2.strictShape=function(o){var s=v$2.shape(o);return function(tt){var rt=s(tt);if(rt)return rt;var st=Object.keys(tt).reduce(function(_,ut){return o[ut]===void 0&&_.push(ut),_},[]);if(st.length!==0)return function(){return"The following keys are invalid: "+st.join(", ")}}};v$2.arrayOf=function(o){return createArrayValidator(o)};v$2.tuple=function(){var o=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return createArrayValidator(o)};function createArrayValidator(i){var o=Array.isArray(i),s=function($){return o?i[$]:i};return function(tt){var rt=validate(v$2.plainArray,tt);if(rt)return rt;if(o&&tt.length!==i.length)return"an array with "+i.length+" items";for(var st=0;st<tt.length;st++)if(rt=validate(s(st),tt[st]),rt)return[st].concat(rt)}}v$2.required=function(o){function s($){return $==null?function(tt){return formatErrorMessage(tt,isArrayCulprit(tt.path)?"cannot be undefined/null.":"is required.")}:o.apply(this,arguments)}return s.__required=!0,s};v$2.oneOfType=function(){var o=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function($){var tt=o.map(function(rt){return validate(rt,$)}).filter(Boolean);if(tt.length===o.length)return tt.every(function(rt){return rt.length===1&&typeof rt[0]=="string"})?orList(tt.map(function(rt){return rt[0]})):tt.reduce(function(rt,st){return st.length>rt.length?st:rt})}};v$2.equal=function(o){return function($){if($!==o)return JSON.stringify(o)}};v$2.oneOf=function(){var o=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),s=o.map(function($){return v$2.equal($)});return v$2.oneOfType.apply(this,s)};v$2.range=function(o){var s=o[0],$=o[1];return function(rt){var st=validate(v$2.number,rt);if(st||rt<s||rt>$)return"number between "+s+" & "+$+" (inclusive)"}};v$2.any=function(){};v$2.boolean=function(o){if(typeof o!="boolean")return"boolean"};v$2.number=function(o){if(typeof o!="number")return"number"};v$2.plainArray=function(o){if(!Array.isArray(o))return"array"};v$2.plainObject=function(o){if(!isPlainObject(o))return"object"};v$2.string=function(o){if(typeof o!="string")return"string"};v$2.func=function(o){if(typeof o!="function")return"function"};function validate(i,o){if(!(o==null&&!i.hasOwnProperty("__required"))){var s=i(o);if(s)return Array.isArray(s)?s:[s]}}function processMessage(i,o){var s=i.length,$=i[s-1],tt=i.slice(0,s-1);return tt.length===0&&(tt=[DEFAULT_ERROR_PATH]),o=xtend$2(o,{path:tt}),typeof $=="function"?$(o):formatErrorMessage(o,prettifyResult($))}function orList(i){return i.length<2?i[0]:i.length===2?i.join(" or "):i.slice(0,-1).join(", ")+", or "+i.slice(-1)}function prettifyResult(i){return"must be "+addArticle(i)+"."}function addArticle(i){return/^an? /.test(i)?i:/^[aeiou]/i.test(i)?"an "+i:/^[a-z]/i.test(i)?"a "+i:i}function formatErrorMessage(i,o){var s=isArrayCulprit(i.path),$=i.path.join(".")+" "+o,tt=s?"Item at position ":"";return tt+$}function isArrayCulprit(i){return typeof i[i.length-1]=="number"||typeof i[0]=="number"}function objectEntries(i){return Object.keys(i||{}).map(function(o){return{key:o,value:i[o]}})}v$2.validate=validate;v$2.processMessage=processMessage;var lib$1=v$2,xtend$1=immutable,v$1=lib$1;function file(i){if(typeof window<"u")return i instanceof commonjsGlobal$1.Blob||i instanceof commonjsGlobal$1.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof i=="string"||i.pipe!==void 0))return"Filename or Readable stream"}function assertShape(i,o){return v$1.assert(v$1.strictShape(i),o)}function date(i){var o="date";if(typeof i=="boolean")return o;try{var s=new Date(i);if(s.getTime&&isNaN(s.getTime()))return o}catch($){return o}}function coordinates(i){return v$1.tuple(v$1.number,v$1.number)(i)}var validator=xtend$1(v$1,{file,date,coordinates,assertShape});function pick$1(i,o){var s=function($,tt){return o.indexOf($)!==-1&&tt!==void 0};return typeof o=="function"&&(s=o),Object.keys(i).filter(function($){return s($,i[$])}).reduce(function($,tt){return $[tt]=i[tt],$},{})}var pick_1=pick$1;function objectMap$1(i,o){return Object.keys(i).reduce(function(s,$){return s[$]=o($,i[$]),s},{})}var objectMap_1=objectMap$1,objectMap=objectMap_1;function stringifyBoolean(i){return objectMap(i,function(o,s){return typeof s=="boolean"?JSON.stringify(s):s})}var stringifyBooleans$1=stringifyBoolean,MapiClient=mapiClient,createClient=browserClient;function createServiceFactory$1(i){return function(o){var s;MapiClient.prototype.isPrototypeOf(o)?s=o:s=createClient(o);var $=Object.create(i);return $.client=s,$}}var createServiceFactory_1=createServiceFactory$1,xtend=immutable,v=validator,pick=pick_1,stringifyBooleans=stringifyBooleans$1,createServiceFactory=createServiceFactory_1,Geocoding={},featureTypes=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Geocoding.forwardGeocode=function(i){v.assertShape({query:v.required(v.string),mode:v.oneOf("mapbox.places","mapbox.places-permanent"),countries:v.arrayOf(v.string),proximity:v.oneOf(v.coordinates,"ip"),types:v.arrayOf(v.oneOf(featureTypes)),autocomplete:v.boolean,bbox:v.arrayOf(v.number),limit:v.number,language:v.arrayOf(v.string),routing:v.boolean,fuzzyMatch:v.boolean,worldview:v.string})(i),i.mode=i.mode||"mapbox.places";var o=stringifyBooleans(xtend({country:i.countries},pick(i,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:pick(i,["mode","query"]),query:o})};Geocoding.reverseGeocode=function(i){v.assertShape({query:v.required(v.coordinates),mode:v.oneOf("mapbox.places","mapbox.places-permanent"),countries:v.arrayOf(v.string),types:v.arrayOf(v.oneOf(featureTypes)),bbox:v.arrayOf(v.number),limit:v.number,language:v.arrayOf(v.string),reverseMode:v.oneOf("distance","score"),routing:v.boolean,worldview:v.string})(i),i.mode=i.mode||"mapbox.places";var o=stringifyBooleans(xtend({country:i.countries},pick(i,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:pick(i,["mode","query"]),query:o})};var geocoding=createServiceFactory(Geocoding);let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",random=i=>crypto.getRandomValues(new Uint8Array(i)),customRandom=(i,o,s)=>{let $=(2<<Math.log(i.length-1)/Math.LN2)-1,tt=-~(1.6*$*o/i.length);return(rt=o)=>{let st="";for(;;){let _=s(tt),ut=tt;for(;ut--;)if(st+=i[_[ut]&$]||"",st.length===rt)return st}}},customAlphabet=(i,o=21)=>customRandom(i,o,random),nanoid$1=(i=21)=>crypto.getRandomValues(new Uint8Array(i)).reduce((o,s)=>(s&=63,s<36?o+=s.toString(36):s<62?o+=(s-26).toString(36).toUpperCase():s>62?o+="-":o+="_",o),"");const index_browser=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet,customRandom,nanoid:nanoid$1,random,urlAlphabet},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(index_browser);var nanoid=require$$0.nanoid;function MapboxEventManager$1(i){this.origin=i.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=i.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=i,this.send=this.send.bind(this),this.countries=i.countries?i.countries.split(","):null,this.types=i.types?i.types.split(","):null,this.bbox=i.bbox?i.bbox:null,this.language=i.language?i.language.split(","):null,this.limit=i.limit?+i.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(i),this.eventQueue=new Array,this.flushInterval=i.flushInterval||1e3,this.maxQueueSize=i.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}MapboxEventManager$1.prototype={select:function(i,o){var s=this.getSelectedIndex(i,o),$=this.getEventPayload("search.select",o);if($.resultIndex=s,$.resultPlaceName=i.place_name,$.resultId=i.id,!(s===this.lastSentIndex&&$.queryString===this.lastSentInput||s==-1)&&(this.lastSentIndex=s,this.lastSentInput=$.queryString,!!$.queryString))return this.push($)},start:function(i){var o=this.getEventPayload("search.start",i);if(o.queryString)return this.push(o)},keyevent:function(i,o){if(i.key&&!(i.metaKey||[9,27,37,39,13,38,40].indexOf(i.keyCode)!==-1)){var s=this.getEventPayload("search.keystroke",o);if(s.lastAction=i.key,!!s.queryString)return this.push(s)}},send:function(i,o){if(!this.enableEventLogging)return o?o():void 0;var s=this.getRequestOptions(i);this.request(s,function($){if($)return this.handleError($,o);if(o)return o()}.bind(this))},getRequestOptions:function(i){Array.isArray(i)||(i=[i]);var o={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};return o},getEventPayload:function(i,o){var s;o.options.proximity?typeof o.options.proximity=="object"?s=[o.options.proximity.longitude,o.options.proximity.latitude]:o.options.proximity==="ip"?s=[999,999]:s=o.options.proximity:s=null;var $=o._map?o._map.getZoom():void 0,tt={event:i,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:o.options.autocomplete,fuzzyMatch:o.options.fuzzyMatch,proximity:s,limit:o.options.limit,routing:o.options.routing,worldview:o.options.worldview,mapZoom:$,keyboardLocale:this.locale};return i==="search.select"?tt.queryString=o.inputString:i!="search.select"&&o._inputEl?tt.queryString=o._inputEl.value:tt.queryString=o.inputString,tt},request:function(i,o){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(this.readyState==4)return this.status==204?o(null):o(this.statusText)},s.open(i.method,i.host+"/"+i.path,!0);for(var $ in i.headers){var tt=i.headers[$];s.setRequestHeader($,tt)}s.send(i.body)},handleError:function(i,o){if(o)return o(i)},generateSessionID:function(){return nanoid()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(i,o){if(o._typeahead){var s=o._typeahead.data,$=i.id,tt=s.map(function(st){return st.id}),rt=tt.indexOf($);return rt}},shouldEnableLogging:function(i){return!(i.enableEventLogging===!1||i.origin&&i.origin!=="https://api.mapbox.com"||i.localGeocoder||i.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(i,o){this.eventQueue.push(i),(this.eventQueue.length>=this.maxQueueSize||o)&&this.flush()},remove:function(){this.flush()}};var events=MapboxEventManager$1,placeholder={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},localization$1={placeholder},subtag$1={exports:{}};(function(i){(function(o,s,$){i.exports?i.exports=$():o[s]=$()})(commonjsGlobal$1,"subtag",function(){var o="",s=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function $(ut){return ut.match(s)||[]}function tt(ut){return $(ut).filter(function(mt,vt){return mt&&vt})}function rt(ut){return ut=$(ut),{language:ut[1]||o,extlang:ut[2]||o,script:ut[3]||o,region:ut[4]||o}}function st(ut,mt,vt){Object.defineProperty(ut,mt,{value:vt,enumerable:!0})}function _(ut,mt,vt){function wt(bt){return $(bt)[ut]||o}st(wt,"pattern",mt),st(rt,vt,wt)}return _(1,/^[a-zA-Z]{2,3}$/,"language"),_(2,/^[a-zA-Z]{3}$/,"extlang"),_(3,/^[a-zA-Z]{4}$/,"script"),_(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),st(rt,"split",tt),rt})})(subtag$1);var subtagExports=subtag$1.exports;function Geolocation$1(){}Geolocation$1.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const i={enableHighAccuracy:!0};return new Promise(function(o,s){window.navigator.geolocation.getCurrentPosition(o,s,i)})}};var geolocation=Geolocation$1;function transformFeatureToGeolocationText(i,o){const s=getAddressInfo(i),$=["address","street","place","country"];var tt;if(typeof o=="function")return o(s);const rt=$.indexOf(o);return rt===-1?tt=$:tt=$.slice(rt),tt.reduce(function(st,_){return s[_]?(st!==""&&(st=st+", "),st+s[_]):st},"")}function getAddressInfo(i){const o=i.address||"",s=i.text||"",$=i.place_name||"",rt={address:$.split(",")[0],houseNumber:o,street:s,placeName:$};return i.context.forEach(function(st){const _=st.id.split(".")[0];rt[_]=st.text}),rt}const REVERSE_GEOCODE_COORD_RGX=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var utils$1={transformFeatureToGeolocationText,getAddressInfo,REVERSE_GEOCODE_COORD_RGX},Typeahead=suggestions,debounce=lodash_debounce,extend=immutable,EventEmitter=eventsExports.EventEmitter,exceptions=exceptions$1,MapboxClient=mapboxSdk,mbxGeocoder=geocoding,MapboxEventManager=events,localization=localization$1,subtag=subtagExports,Geolocation=geolocation,utils=utils$1;const GEOCODE_REQUEST_TYPE={FORWARD:0,LOCAL:1,REVERSE:2};function getFooterNode(){var i=document.createElement("div");return i.className="mapboxgl-ctrl-geocoder--powered-by",i.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',i}function MapboxGeocoder(i){this._eventEmitter=new EventEmitter,this.options=extend({},this.options,i),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new Geolocation}MapboxGeocoder.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(i){return i.place_name},render:function(i){var o=i.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+o[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+o.splice(1,o.length).join(",")+"</div></div>"}},addTo:function(i){function o(s,$){if(!document.body.contains($))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const tt=s.onAdd();$.appendChild(tt)}if(i._controlContainer)i.addControl(this);else if(i instanceof HTMLElement)o(this,i);else if(typeof i=="string"){const s=document.querySelectorAll(i);if(s.length===0)throw new Error("Element ",i,"not found.");if(s.length>1)throw new Error("Geocoder can only be added to a single html element");o(this,s[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(i){if(i&&typeof i!="string"&&(this._map=i),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=mbxGeocoder(MapboxClient({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new MapboxEventManager(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var o=this.container=document.createElement("div");o.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var s=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",debounce(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(mt){this.eventManager.keyevent(mt,this)}.bind(this));var $=document.createElement("div");$.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var tt=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(tt),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),$.appendChild(this._clearEl),$.appendChild(this._loadingEl),o.appendChild(s),o.appendChild(this._inputEl),o.appendChild($),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var rt=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(rt),$.appendChild(this._geolocateEl),this._showGeolocateButton()}var st=this._typeahead=new Typeahead(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),st.getItemValue=this.options.getItemValue;var _=st.list.draw,ut=this._footerNode=getFooterNode();return st.list.draw=function(){_.call(this),ut.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),ut.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(ut)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),o},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(i){this._hideLoadingIcon();const o={geometry:{type:"Point",coordinates:[i.coords.longitude,i.coords.latitude]}};this._handleMarker(o),this._fly(o),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(o),this._showClearButton(),this.fresh=!1;const s={limit:1,language:[this.options.language],query:o.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const $=o.geometry.coordinates[0]+","+o.geometry.coordinates[1];this._setInputValue($),this._eventEmitter.emit("result",{result:o})}else this.geocoderService.reverseGeocode(s).send().then(function($){const tt=$.body.features[0];if(tt){const rt=utils.transformFeatureToGeolocationText(tt,this.options.addressAccuracy);this._setInputValue(rt),tt.user_coordinates=o.geometry.coordinates,this._eventEmitter.emit("result",{result:tt})}else this._eventEmitter.emit("result",{result:{user_coordinates:o.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(i){i.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(i,o){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+i),s.setAttribute("viewBox","0 0 18 18"),s.setAttribute("xml:space","preserve"),s.setAttribute("width",18),s.setAttribute("height",18),s.innerHTML=o,s},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(i){this._inputEl.value=i,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(i){var o=(i.clipboardData||window.clipboardData).getData("text");o.length>=this.options.minLength&&this._geocode(o)},_onKeyDown:function(i){var o=27,s=9;if(i.keyCode===o&&this.options.clearAndBlurOnEsc)return this._clear(i),this._inputEl.blur();var $=i.target&&i.target.shadowRoot?i.target.shadowRoot.activeElement:i.target,tt=$?$.value:"";if(!tt)return this.fresh=!0,i.keyCode!==s&&this.clear(i),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(i.metaKey||[s,o,37,39,13,38,40].indexOf(i.keyCode)!==-1)&&$.value.length>=this.options.minLength&&this._geocode($.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(i){this.options.clearOnBlur&&this._clearOnBlur(i),this.options.collapsed&&this._collapse()},_onChange:function(){var i=this._typeahead.selected;i&&JSON.stringify(i)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(i),this.options.marker&&this._mapboxgl&&this._handleMarker(i),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(i),this._eventEmitter.emit("result",{result:i}),this.eventManager.select(i,this))},_fly:function(i){var o;if(i.properties&&exceptions[i.properties.short_code])o=extend({},this.options.flyTo),this._map&&this._map.fitBounds(exceptions[i.properties.short_code].bbox,o);else if(i.bbox){var s=i.bbox;o=extend({},this.options.flyTo),this._map&&this._map.fitBounds([[s[0],s[1]],[s[2],s[3]]],o)}else{var $={zoom:this.options.zoom};o=extend({},$,this.options.flyTo),i.center?o.center=i.center:i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(o.center=i.geometry.coordinates),this._map&&this._map.flyTo(o)}},_requestType:function(i,o){var s;return i.localGeocoderOnly?s=GEOCODE_REQUEST_TYPE.LOCAL:i.reverseGeocode&&utils.REVERSE_GEOCODE_COORD_RGX.test(o)?s=GEOCODE_REQUEST_TYPE.REVERSE:s=GEOCODE_REQUEST_TYPE.FORWARD,s},_setupConfig:function(i,o){const s=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],$=/[\s,]+/;var tt=this,rt=s.reduce(function(_,ut){if(tt.options[ut]===void 0||tt.options[ut]===null)return _;["countries","types","language"].indexOf(ut)>-1?_[ut]=tt.options[ut].split($):_[ut]=tt.options[ut];const mt=typeof tt.options[ut].longitude=="number"&&typeof tt.options[ut].latitude=="number";if(ut==="proximity"&&mt){const vt=tt.options[ut].longitude,wt=tt.options[ut].latitude;_[ut]=[vt,wt]}return _},{});switch(i){case GEOCODE_REQUEST_TYPE.REVERSE:{var st=o.split($).map(function(_){return parseFloat(_,10)});tt.options.flipCoordinates||st.reverse(),rt.types&&rt.types[0],rt=extend(rt,{query:st,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(_){_ in rt&&delete rt[_]})}break;case GEOCODE_REQUEST_TYPE.FORWARD:{const _=o.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(_)&&(o=o.replace(/,/g," ")),rt=extend(rt,{query:o})}break}return rt},_geocode:function(i){this.inputString=i,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:i});const o=this._requestType(this.options,i),s=this._setupConfig(o,i);var $;switch(o){case GEOCODE_REQUEST_TYPE.LOCAL:$=Promise.resolve();break;case GEOCODE_REQUEST_TYPE.FORWARD:$=this.geocoderService.forwardGeocode(s).send();break;case GEOCODE_REQUEST_TYPE.REVERSE:$=this.geocoderService.reverseGeocode(s).send();break}var tt=this.options.localGeocoder?this.options.localGeocoder(i)||[]:[],rt=[],st=null;return $.catch(function(_){st=_}.bind(this)).then(function(_){this._hideLoadingIcon();var ut={};return _?_.statusCode=="200"&&(ut=_.body,ut.request=_.request,ut.headers=_.headers):ut={type:"FeatureCollection",features:[]},ut.config=s,this.fresh&&(this.eventManager.start(this),this.fresh=!1),ut.features=ut.features?tt.concat(ut.features):tt,this.options.externalGeocoder?(rt=this.options.externalGeocoder(i,ut.features)||Promise.resolve([]),rt.then(function(mt){return ut.features=ut.features?mt.concat(ut.features):mt,ut},function(){return ut})):ut}.bind(this)).then(function(_){if(st)throw st;this.options.filter&&_.features.length&&(_.features=_.features.filter(this.options.filter)),_.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",_),this._typeahead.update(_.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",_))}.bind(this)).catch(function(_){this._hideLoadingIcon(),this._hideAttribution(),tt.length&&this.options.localGeocoder||rt.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(tt)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:tt}),this._eventEmitter.emit("error",{error:_})}.bind(this)),$},_clear:function(i){i&&i.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(i){this._clear(i),this._inputEl.focus()},_clearOnBlur:function(i){var o=this;i.relatedTarget&&o._clear(i)},_onQueryResult:function(i){var o=i.body;if(o.features.length){var s=o.features[0];this._typeahead.selected=s,this._inputEl.value=s.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var i=this._map.getCenter().wrap();this.setProximity({longitude:i.lng,latitude:i.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(i){return this._geocode(i).then(this._onQueryResult),this},_renderError:function(){var i="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(i)},_renderLocationError:function(){var i="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(i)},_renderNoResults:function(){var i="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(i)},_renderUserDeniedGeolocationError:function(){var i="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(i)},_renderMessage:function(i){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(i)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var i=this.options.language.split(",")[0],o=subtag.language(i),s=localization.placeholder[o];if(s)return s}return"Search"},setInput:function(i){return this._inputEl.value=i,this._typeahead.selected=null,this._typeahead.clear(),i.length>=this.options.minLength&&this._geocode(i),this},setProximity:function(i,o=!0){return this.options.proximity=i,o&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(i){return i&&typeof i=="function"&&(this._typeahead.render=i),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(i){var o=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=i||this.options.language||o,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(i){return this.options.zoom=i,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(i){return this.options.flyTo=i,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(i){return this.placeholder=i||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(i){return this.options.bbox=i,this},getCountries:function(){return this.options.countries},setCountries:function(i){return this.options.countries=i,this},getTypes:function(){return this.options.types},setTypes:function(i){return this.options.types=i,this},getMinLength:function(){return this.options.minLength},setMinLength:function(i){return this.options.minLength=i,this._typeahead&&(this._typeahead.options.minLength=i),this},getLimit:function(){return this.options.limit},setLimit:function(i){return this.options.limit=i,this._typeahead&&(this._typeahead.options.limit=i),this},getFilter:function(){return this.options.filter},setFilter:function(i){return this.options.filter=i,this},setOrigin:function(i){return this.options.origin=i,this.geocoderService=mbxGeocoder(MapboxClient({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(i){return this.options.accessToken=i,this.geocoderService=mbxGeocoder(MapboxClient({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(i){return this.options.autocomplete=i,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(i){return this.options.fuzzyMatch=i,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(i){return this.options.routing=i,this},getRouting:function(){return this.options.routing},setWorldview:function(i){return this.options.worldview=i,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(i){if(this._map){this._removeMarker();var o={color:"#4668F2"},s=extend({},o,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(s),i.center?this.mapMarker.setLngLat(i.center).addTo(this._map):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&this.mapMarker.setLngLat(i.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(i,o){return this._eventEmitter.on(i,o),this},off:function(i,o){return this._eventEmitter.removeListener(i,o),this.eventManager.remove(),this}};var lib=MapboxGeocoder;const MapboxGeocoder$1=getDefaultExportFromCjs(lib);async function getHeatmap(){return(await CapacitorHttp.get({url:BASE_API_URL+"heatmap",headers:{"Content-Type":"application/json"}})).data}const MapView=({location:i,setLocation:o})=>{reactExports.useState(null);const[s,$]=reactExports.useState(null);useIonAlert();let tt=null,rt=i,st=!1;return Geolocation$2.getCurrentPosition(_=>{},_=>{console.error(_)},{}),reactExports.useEffect(()=>{if(!st&&s===null){st=!0;let _=new mapboxGlExports.Map({container:"mapbox",style:"mapbox://styles/mapbox/light-v10",center:[-122,47],zoom:2}),ut=new MapboxGeocoder$1({accessToken:mapboxGlExports.accessToken,mapboxgl,marker:!1});_.addControl(ut),ut.on("result",vt=>{let wt=vt.result.geometry.coordinates;o({lon:wt[0],lat:wt[1]});let bt={lng:wt[0],lat:wt[1]};tt?tt.setLngLat(bt):tt=new mapboxGlExports.Marker().setLngLat(bt).addTo(_)});let mt=new mapboxGlExports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserLocation:!0,showUserHeading:!0,showAccuracyCircle:!0});_.addControl(mt),mt.on("geolocate",vt=>{let wt=vt;if(!tt&&(Math.abs(rt.lat-wt.coords.latitude)>1||Math.abs(rt.lon-wt.coords.longitude)>1)){let bt={lat:wt.coords.latitude,lon:wt.coords.longitude};o(bt),rt=bt}}),_.on("click",vt=>{o({lon:vt.lngLat.lng,lat:vt.lngLat.lat}),tt?tt.setLngLat(vt.lngLat):tt=new mapboxGlExports.Marker().setLngLat(vt.lngLat).addTo(_)}),_.on("load",vt=>{_.resize(),mt.trigger()}),_.on("idle",function(){_.resize()}),$(_),_.on("load",vt=>{getHeatmap().then(wt=>{_.addSource("beaches",{type:"geojson",data:wt}),_.addLayer({id:"beach-circles",type:"circle",source:"beaches",paint:{"circle-radius":{property:"mag",type:"exponential",stops:[[{zoom:15,value:1},10],[{zoom:15,value:2},10],[{zoom:21,value:1},100],[{zoom:21,value:2},100],[{zoom:23,value:1},1e3],[{zoom:23,value:2},1e3]]},"circle-color":{property:"mag",type:"exponential",stops:[[1,"rgba(24,203,122,0.6)"],[2,"rgb(255,110,110)"]]},"circle-stroke-color":"white","circle-stroke-width":1}},"waterway-label")})})}},[]),jsx("div",{id:"mapbox"})};var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(i,o){module.exports=o()}(commonjsGlobal$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(o){_useWebWorker=!!o},getWebWorker=function(){return _useWebWorker},setLocationHref=function(o){locationHref=o},getLocationHref=function(){return locationHref};function createTag(i){return document.createElement(i)}function extendPrototype(i,o){var s,$=i.length,tt;for(s=0;s<$;s+=1){tt=i[s].prototype;for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(o.prototype[rt]=tt[rt])}}function getDescriptor(i,o){return Object.getOwnPropertyDescriptor(i,o)}function createProxyFunction(i){function o(){}return o.prototype=i,o}var audioControllerFactory=function(){function i(o){this.audios=[],this.audioFactory=o,this._volume=1,this._isMuted=!1}return i.prototype={addAudio:function(s){this.audios.push(s)},pause:function(){var s,$=this.audios.length;for(s=0;s<$;s+=1)this.audios[s].pause()},resume:function(){var s,$=this.audios.length;for(s=0;s<$;s+=1)this.audios[s].resume()},setRate:function(s){var $,tt=this.audios.length;for($=0;$<tt;$+=1)this.audios[$].setRate(s)},createAudio:function(s){return this.audioFactory?this.audioFactory(s):window.Howl?new window.Howl({src:[s]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(s){this.audioFactory=s},setVolume:function(s){this._volume=s,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var s,$=this.audios.length;for(s=0;s<$;s+=1)this.audios[s].volume(this._volume*(this._isMuted?0:1))}},function(){return new i}}(),createTypedArray=function(){function i(s,$){var tt=0,rt=[],st;switch(s){case"int16":case"uint8c":st=1;break;default:st=1.1;break}for(tt=0;tt<$;tt+=1)rt.push(st);return rt}function o(s,$){return s==="float32"?new Float32Array($):s==="int16"?new Int16Array($):s==="uint8c"?new Uint8ClampedArray($):i(s,$)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?o:i}();function createSizedArray(i){return Array.apply(null,{length:i})}function _typeof$6(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(s){return typeof s}:_typeof$6=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$6(i)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var i=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],o,s=i.length;for(o=0;o<s;o+=1)BMMath[i[o]]=Math[i[o]]})(),BMMath.random=Math.random,BMMath.abs=function(i){var o=_typeof$6(i);if(o==="object"&&i.length){var s=createSizedArray(i.length),$,tt=i.length;for($=0;$<tt;$+=1)s[$]=Math.abs(i[$]);return s}return Math.abs(i)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(i){i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.display="block",i.style.transformOrigin="0 0",i.style.webkitTransformOrigin="0 0",i.style.backfaceVisibility="visible",i.style.webkitBackfaceVisibility="visible",i.style.transformStyle="preserve-3d",i.style.webkitTransformStyle="preserve-3d",i.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(i,o,s,$){this.type=i,this.currentTime=o,this.totalTime=s,this.direction=$<0?-1:1}function BMCompleteEvent(i,o){this.type=i,this.direction=o<0?-1:1}function BMCompleteLoopEvent(i,o,s,$){this.type=i,this.currentLoop=s,this.totalLoops=o,this.direction=$<0?-1:1}function BMSegmentStartEvent(i,o,s){this.type=i,this.firstFrame=o,this.totalFrames=s}function BMDestroyEvent(i,o){this.type=i,this.target=o}function BMRenderFrameErrorEvent(i,o){this.type="renderFrameError",this.nativeError=i,this.currentTime=o}function BMConfigErrorEvent(i){this.type="configError",this.nativeError=i}var createElementID=function(){var i=0;return function(){return i+=1,idPrefix$1+"__lottie_element_"+i}}();function HSVtoRGB(i,o,s){var $,tt,rt,st,_,ut,mt,vt;switch(st=Math.floor(i*6),_=i*6-st,ut=s*(1-o),mt=s*(1-_*o),vt=s*(1-(1-_)*o),st%6){case 0:$=s,tt=vt,rt=ut;break;case 1:$=mt,tt=s,rt=ut;break;case 2:$=ut,tt=s,rt=vt;break;case 3:$=ut,tt=mt,rt=s;break;case 4:$=vt,tt=ut,rt=s;break;case 5:$=s,tt=ut,rt=mt;break}return[$,tt,rt]}function RGBtoHSV(i,o,s){var $=Math.max(i,o,s),tt=Math.min(i,o,s),rt=$-tt,st,_=$===0?0:rt/$,ut=$/255;switch($){case tt:st=0;break;case i:st=o-s+rt*(o<s?6:0),st/=6*rt;break;case o:st=s-i+rt*2,st/=6*rt;break;case s:st=i-o+rt*4,st/=6*rt;break}return[st,_,ut]}function addSaturationToRGB(i,o){var s=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return s[1]+=o,s[1]>1?s[1]=1:s[1]<=0&&(s[1]=0),HSVtoRGB(s[0],s[1],s[2])}function addBrightnessToRGB(i,o){var s=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return s[2]+=o,s[2]>1?s[2]=1:s[2]<0&&(s[2]=0),HSVtoRGB(s[0],s[1],s[2])}function addHueToRGB(i,o){var s=RGBtoHSV(i[0]*255,i[1]*255,i[2]*255);return s[0]+=o/360,s[0]>1?s[0]-=1:s[0]<0&&(s[0]+=1),HSVtoRGB(s[0],s[1],s[2])}var rgbToHex=function(){var i=[],o,s;for(o=0;o<256;o+=1)s=o.toString(16),i[o]=s.length===1?"0"+s:s;return function($,tt,rt){return $<0&&($=0),tt<0&&(tt=0),rt<0&&(rt=0),"#"+i[$]+i[tt]+i[rt]}}(),setSubframeEnabled=function(o){subframeEnabled=!!o},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(o){expressionsPlugin=o},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(o){expressionsInterfaces=o},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(o){defaultCurveSegments=o},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(o){idPrefix$1=o};function createNS(i){return document.createElementNS(svgNS,i)}function _typeof$5(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(s){return typeof s}:_typeof$5=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$5(i)}var dataManager=function(){var i=1,o=[],s,$,tt={onmessage:function(){},postMessage:function(Mt){s({data:Mt})}},rt={postMessage:function(Mt){tt.onmessage({data:Mt})}};function st(bt){if(window.Worker&&window.Blob&&getWebWorker()){var Mt=new Blob(["var _workerSelf = self; self.onmessage = ",bt.toString()],{type:"text/javascript"}),At=URL.createObjectURL(Mt);return new Worker(At)}return s=bt,tt}function _(){$||($=st(function(Mt){function At(){function Ht(zr,hr){var Er,Nt,Wt=zr.length,or,ar,Fr,Yr;for(Nt=0;Nt<Wt;Nt+=1)if(Er=zr[Nt],"ks"in Er&&!Er.completed){if(Er.completed=!0,Er.hasMask){var hn=Er.masksProperties;for(ar=hn.length,or=0;or<ar;or+=1)if(hn[or].pt.k.i)Bt(hn[or].pt.k);else for(Yr=hn[or].pt.k.length,Fr=0;Fr<Yr;Fr+=1)hn[or].pt.k[Fr].s&&Bt(hn[or].pt.k[Fr].s[0]),hn[or].pt.k[Fr].e&&Bt(hn[or].pt.k[Fr].e[0])}Er.ty===0?(Er.layers=St(Er.refId,hr),Ht(Er.layers,hr)):Er.ty===4?It(Er.shapes):Er.ty===5&&Xr(Er)}}function Tt(zr,hr){if(zr){var Er=0,Nt=zr.length;for(Er=0;Er<Nt;Er+=1)zr[Er].t===1&&(zr[Er].data.layers=St(zr[Er].data.refId,hr),Ht(zr[Er].data.layers,hr))}}function Ct(zr,hr){for(var Er=0,Nt=hr.length;Er<Nt;){if(hr[Er].id===zr)return hr[Er];Er+=1}return null}function St(zr,hr){var Er=Ct(zr,hr);return Er?Er.layers.__used?JSON.parse(JSON.stringify(Er.layers)):(Er.layers.__used=!0,Er.layers):null}function It(zr){var hr,Er=zr.length,Nt,Wt;for(hr=Er-1;hr>=0;hr-=1)if(zr[hr].ty==="sh")if(zr[hr].ks.k.i)Bt(zr[hr].ks.k);else for(Wt=zr[hr].ks.k.length,Nt=0;Nt<Wt;Nt+=1)zr[hr].ks.k[Nt].s&&Bt(zr[hr].ks.k[Nt].s[0]),zr[hr].ks.k[Nt].e&&Bt(zr[hr].ks.k[Nt].e[0]);else zr[hr].ty==="gr"&&It(zr[hr].it)}function Bt(zr){var hr,Er=zr.i.length;for(hr=0;hr<Er;hr+=1)zr.i[hr][0]+=zr.v[hr][0],zr.i[hr][1]+=zr.v[hr][1],zr.o[hr][0]+=zr.v[hr][0],zr.o[hr][1]+=zr.v[hr][1]}function Ft(zr,hr){var Er=hr?hr.split("."):[100,100,100];return zr[0]>Er[0]?!0:Er[0]>zr[0]?!1:zr[1]>Er[1]?!0:Er[1]>zr[1]?!1:zr[2]>Er[2]?!0:Er[2]>zr[2]?!1:null}var Gt=function(){var zr=[4,4,14];function hr(Nt){var Wt=Nt.t.d;Nt.t.d={k:[{s:Wt,t:0}]}}function Er(Nt){var Wt,or=Nt.length;for(Wt=0;Wt<or;Wt+=1)Nt[Wt].ty===5&&hr(Nt[Wt])}return function(Nt){if(Ft(zr,Nt.v)&&(Er(Nt.layers),Nt.assets)){var Wt,or=Nt.assets.length;for(Wt=0;Wt<or;Wt+=1)Nt.assets[Wt].layers&&Er(Nt.assets[Wt].layers)}}}(),Xt=function(){var zr=[4,7,99];return function(hr){if(hr.chars&&!Ft(zr,hr.v)){var Er,Nt=hr.chars.length;for(Er=0;Er<Nt;Er+=1){var Wt=hr.chars[Er];Wt.data&&Wt.data.shapes&&(It(Wt.data.shapes),Wt.data.ip=0,Wt.data.op=99999,Wt.data.st=0,Wt.data.sr=1,Wt.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},hr.chars[Er].t||(Wt.data.shapes.push({ty:"no"}),Wt.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),ir=function(){var zr=[5,7,15];function hr(Nt){var Wt=Nt.t.p;typeof Wt.a=="number"&&(Wt.a={a:0,k:Wt.a}),typeof Wt.p=="number"&&(Wt.p={a:0,k:Wt.p}),typeof Wt.r=="number"&&(Wt.r={a:0,k:Wt.r})}function Er(Nt){var Wt,or=Nt.length;for(Wt=0;Wt<or;Wt+=1)Nt[Wt].ty===5&&hr(Nt[Wt])}return function(Nt){if(Ft(zr,Nt.v)&&(Er(Nt.layers),Nt.assets)){var Wt,or=Nt.assets.length;for(Wt=0;Wt<or;Wt+=1)Nt.assets[Wt].layers&&Er(Nt.assets[Wt].layers)}}}(),$r=function(){var zr=[4,1,9];function hr(Nt){var Wt,or=Nt.length,ar,Fr;for(Wt=0;Wt<or;Wt+=1)if(Nt[Wt].ty==="gr")hr(Nt[Wt].it);else if(Nt[Wt].ty==="fl"||Nt[Wt].ty==="st")if(Nt[Wt].c.k&&Nt[Wt].c.k[0].i)for(Fr=Nt[Wt].c.k.length,ar=0;ar<Fr;ar+=1)Nt[Wt].c.k[ar].s&&(Nt[Wt].c.k[ar].s[0]/=255,Nt[Wt].c.k[ar].s[1]/=255,Nt[Wt].c.k[ar].s[2]/=255,Nt[Wt].c.k[ar].s[3]/=255),Nt[Wt].c.k[ar].e&&(Nt[Wt].c.k[ar].e[0]/=255,Nt[Wt].c.k[ar].e[1]/=255,Nt[Wt].c.k[ar].e[2]/=255,Nt[Wt].c.k[ar].e[3]/=255);else Nt[Wt].c.k[0]/=255,Nt[Wt].c.k[1]/=255,Nt[Wt].c.k[2]/=255,Nt[Wt].c.k[3]/=255}function Er(Nt){var Wt,or=Nt.length;for(Wt=0;Wt<or;Wt+=1)Nt[Wt].ty===4&&hr(Nt[Wt].shapes)}return function(Nt){if(Ft(zr,Nt.v)&&(Er(Nt.layers),Nt.assets)){var Wt,or=Nt.assets.length;for(Wt=0;Wt<or;Wt+=1)Nt.assets[Wt].layers&&Er(Nt.assets[Wt].layers)}}}(),Tr=function(){var zr=[4,4,18];function hr(Nt){var Wt,or=Nt.length,ar,Fr;for(Wt=or-1;Wt>=0;Wt-=1)if(Nt[Wt].ty==="sh")if(Nt[Wt].ks.k.i)Nt[Wt].ks.k.c=Nt[Wt].closed;else for(Fr=Nt[Wt].ks.k.length,ar=0;ar<Fr;ar+=1)Nt[Wt].ks.k[ar].s&&(Nt[Wt].ks.k[ar].s[0].c=Nt[Wt].closed),Nt[Wt].ks.k[ar].e&&(Nt[Wt].ks.k[ar].e[0].c=Nt[Wt].closed);else Nt[Wt].ty==="gr"&&hr(Nt[Wt].it)}function Er(Nt){var Wt,or,ar=Nt.length,Fr,Yr,hn,mn;for(or=0;or<ar;or+=1){if(Wt=Nt[or],Wt.hasMask){var En=Wt.masksProperties;for(Yr=En.length,Fr=0;Fr<Yr;Fr+=1)if(En[Fr].pt.k.i)En[Fr].pt.k.c=En[Fr].cl;else for(mn=En[Fr].pt.k.length,hn=0;hn<mn;hn+=1)En[Fr].pt.k[hn].s&&(En[Fr].pt.k[hn].s[0].c=En[Fr].cl),En[Fr].pt.k[hn].e&&(En[Fr].pt.k[hn].e[0].c=En[Fr].cl)}Wt.ty===4&&hr(Wt.shapes)}}return function(Nt){if(Ft(zr,Nt.v)&&(Er(Nt.layers),Nt.assets)){var Wt,or=Nt.assets.length;for(Wt=0;Wt<or;Wt+=1)Nt.assets[Wt].layers&&Er(Nt.assets[Wt].layers)}}}();function xr(zr){zr.__complete||($r(zr),Gt(zr),Xt(zr),ir(zr),Tr(zr),Ht(zr.layers,zr.assets),Tt(zr.chars,zr.assets),zr.__complete=!0)}function Xr(zr){zr.t.a.length===0&&"m"in zr.t.p}var ln={};return ln.completeData=xr,ln.checkColors=$r,ln.checkChars=Xt,ln.checkPathProperties=ir,ln.checkShapes=Tr,ln.completeLayers=Ht,ln}if(rt.dataManager||(rt.dataManager=At()),rt.assetLoader||(rt.assetLoader=function(){function Ht(Ct){var St=Ct.getResponseHeader("content-type");return St&&Ct.responseType==="json"&&St.indexOf("json")!==-1||Ct.response&&_typeof$5(Ct.response)==="object"?Ct.response:Ct.response&&typeof Ct.response=="string"?JSON.parse(Ct.response):Ct.responseText?JSON.parse(Ct.responseText):null}function Tt(Ct,St,It,Bt){var Ft,Gt=new XMLHttpRequest;try{Gt.responseType="json"}catch(Xt){}Gt.onreadystatechange=function(){if(Gt.readyState===4)if(Gt.status===200)Ft=Ht(Gt),It(Ft);else try{Ft=Ht(Gt),It(Ft)}catch(Xt){Bt&&Bt(Xt)}};try{Gt.open(["G","E","T"].join(""),Ct,!0)}catch(Xt){Gt.open(["G","E","T"].join(""),St+"/"+Ct,!0)}Gt.send()}return{load:Tt}}()),Mt.data.type==="loadAnimation")rt.assetLoader.load(Mt.data.path,Mt.data.fullPath,function(Ht){rt.dataManager.completeData(Ht),rt.postMessage({id:Mt.data.id,payload:Ht,status:"success"})},function(){rt.postMessage({id:Mt.data.id,status:"error"})});else if(Mt.data.type==="complete"){var Lt=Mt.data.animation;rt.dataManager.completeData(Lt),rt.postMessage({id:Mt.data.id,payload:Lt,status:"success"})}else Mt.data.type==="loadData"&&rt.assetLoader.load(Mt.data.path,Mt.data.fullPath,function(Ht){rt.postMessage({id:Mt.data.id,payload:Ht,status:"success"})},function(){rt.postMessage({id:Mt.data.id,status:"error"})})}),$.onmessage=function(bt){var Mt=bt.data,At=Mt.id,Lt=o[At];o[At]=null,Mt.status==="success"?Lt.onComplete(Mt.payload):Lt.onError&&Lt.onError()})}function ut(bt,Mt){i+=1;var At="processId_"+i;return o[At]={onComplete:bt,onError:Mt},At}function mt(bt,Mt,At){_();var Lt=ut(Mt,At);$.postMessage({type:"loadAnimation",path:bt,fullPath:window.location.origin+window.location.pathname,id:Lt})}function vt(bt,Mt,At){_();var Lt=ut(Mt,At);$.postMessage({type:"loadData",path:bt,fullPath:window.location.origin+window.location.pathname,id:Lt})}function wt(bt,Mt,At){_();var Lt=ut(Mt,At);$.postMessage({type:"complete",animation:bt,id:Lt})}return{loadAnimation:mt,loadData:vt,completeAnimation:wt}}(),ImagePreloader=function(){var i=function(){var Tt=createTag("canvas");Tt.width=1,Tt.height=1;var Ct=Tt.getContext("2d");return Ct.fillStyle="rgba(0,0,0,0)",Ct.fillRect(0,0,1,1),Tt}();function o(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function $(Tt,Ct,St){var It="";if(Tt.e)It=Tt.p;else if(Ct){var Bt=Tt.p;Bt.indexOf("images/")!==-1&&(Bt=Bt.split("/")[1]),It=Ct+Bt}else It=St,It+=Tt.u?Tt.u:"",It+=Tt.p;return It}function tt(Tt){var Ct=0,St=setInterval(function(){var It=Tt.getBBox();(It.width||Ct>500)&&(this._imageLoaded(),clearInterval(St)),Ct+=1}.bind(this),50)}function rt(Tt){var Ct=$(Tt,this.assetsPath,this.path),St=createNS("image");isSafari?this.testImageLoaded(St):St.addEventListener("load",this._imageLoaded,!1),St.addEventListener("error",function(){It.img=i,this._imageLoaded()}.bind(this),!1),St.setAttributeNS("http://www.w3.org/1999/xlink","href",Ct),this._elementHelper.append?this._elementHelper.append(St):this._elementHelper.appendChild(St);var It={img:St,assetData:Tt};return It}function st(Tt){var Ct=$(Tt,this.assetsPath,this.path),St=createTag("img");St.crossOrigin="anonymous",St.addEventListener("load",this._imageLoaded,!1),St.addEventListener("error",function(){It.img=i,this._imageLoaded()}.bind(this),!1),St.src=Ct;var It={img:St,assetData:Tt};return It}function _(Tt){var Ct={assetData:Tt},St=$(Tt,this.assetsPath,this.path);return dataManager.loadData(St,function(It){Ct.img=It,this._footageLoaded()}.bind(this),function(){Ct.img={},this._footageLoaded()}.bind(this)),Ct}function ut(Tt,Ct){this.imagesLoadedCb=Ct;var St,It=Tt.length;for(St=0;St<It;St+=1)Tt[St].layers||(!Tt[St].t||Tt[St].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Tt[St]))):Tt[St].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Tt[St]))))}function mt(Tt){this.path=Tt||""}function vt(Tt){this.assetsPath=Tt||""}function wt(Tt){for(var Ct=0,St=this.images.length;Ct<St;){if(this.images[Ct].assetData===Tt)return this.images[Ct].img;Ct+=1}return null}function bt(){this.imagesLoadedCb=null,this.images.length=0}function Mt(){return this.totalImages===this.loadedAssets}function At(){return this.totalFootages===this.loadedFootagesCount}function Lt(Tt,Ct){Tt==="svg"?(this._elementHelper=Ct,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ht(){this._imageLoaded=o.bind(this),this._footageLoaded=s.bind(this),this.testImageLoaded=tt.bind(this),this.createFootageData=_.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ht.prototype={loadAssets:ut,setAssetsPath:vt,setPath:mt,loadedImages:Mt,loadedFootages:At,destroy:bt,getAsset:wt,createImgData:st,createImageData:rt,imageLoaded:o,footageLoaded:s,setCacheType:Lt},Ht}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(o,s){if(this._cbs[o])for(var $=this._cbs[o],tt=0;tt<$.length;tt+=1)$[tt](s)},addEventListener:function(o,s){return this._cbs[o]||(this._cbs[o]=[]),this._cbs[o].push(s),function(){this.removeEventListener(o,s)}.bind(this)},removeEventListener:function(o,s){if(!s)this._cbs[o]=null;else if(this._cbs[o]){for(var $=0,tt=this._cbs[o].length;$<tt;)this._cbs[o][$]===s&&(this._cbs[o].splice($,1),$-=1,tt-=1),$+=1;this._cbs[o].length||(this._cbs[o]=null)}}};var markerParser=function(){function i(o){for(var s=o.split(`\r
`),$={},tt,rt=0,st=0;st<s.length;st+=1)tt=s[st].split(":"),tt.length===2&&($[tt[0]]=tt[1].trim(),rt+=1);if(rt===0)throw new Error;return $}return function(o){for(var s=[],$=0;$<o.length;$+=1){var tt=o[$],rt={time:tt.tm,duration:tt.dr};try{rt.payload=JSON.parse(o[$].cm)}catch(st){try{rt.payload=i(o[$].cm)}catch(_){rt.payload={name:o[$].cm}}}s.push(rt)}return s}}(),ProjectInterface=function(){function i(o){this.compositions.push(o)}return function(){function o(s){for(var $=0,tt=this.compositions.length;$<tt;){if(this.compositions[$].data&&this.compositions[$].data.nm===s)return this.compositions[$].prepareFrame&&this.compositions[$].data.xt&&this.compositions[$].prepareFrame(this.currentFrame),this.compositions[$].compInterface;$+=1}return null}return o.compositions=[],o.currentFrame=0,o.registerComposition=i,o}}(),renderers={},registerRenderer=function(o,s){renderers[o]=s};function getRenderer(i){return renderers[i]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var i in renderers)if(renderers[i])return i;return""}function _typeof$4(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(s){return typeof s}:_typeof$4=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$4(i)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(i){(i.wrapper||i.container)&&(this.wrapper=i.wrapper||i.container);var o="svg";i.animType?o=i.animType:i.renderer&&(o=i.renderer);var s=getRenderer(o);this.renderer=new s(this,i.rendererSettings),this.imagePreloader.setCacheType(o,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=o,i.loop===""||i.loop===null||i.loop===void 0||i.loop===!0?this.loop=!0:i.loop===!1?this.loop=!1:this.loop=parseInt(i.loop,10),this.autoplay="autoplay"in i?i.autoplay:!0,this.name=i.name?i.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(i,"autoloadSegments")?i.autoloadSegments:!0,this.assetsPath=i.assetsPath,this.initialSegment=i.initialSegment,i.audioFactory&&this.audioController.setAudioFactory(i.audioFactory),i.animationData?this.setupAnimation(i.animationData):i.path&&(i.path.lastIndexOf("\\")!==-1?this.path=i.path.substr(0,i.path.lastIndexOf("\\")+1):this.path=i.path.substr(0,i.path.lastIndexOf("/")+1),this.fileName=i.path.substr(i.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(i.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(i){dataManager.completeAnimation(i,this.configAnimation)},AnimationItem.prototype.setData=function(i,o){o&&_typeof$4(o)!=="object"&&(o=JSON.parse(o));var s={wrapper:i,animationData:o},$=i.attributes;s.path=$.getNamedItem("data-animation-path")?$.getNamedItem("data-animation-path").value:$.getNamedItem("data-bm-path")?$.getNamedItem("data-bm-path").value:$.getNamedItem("bm-path")?$.getNamedItem("bm-path").value:"",s.animType=$.getNamedItem("data-anim-type")?$.getNamedItem("data-anim-type").value:$.getNamedItem("data-bm-type")?$.getNamedItem("data-bm-type").value:$.getNamedItem("bm-type")?$.getNamedItem("bm-type").value:$.getNamedItem("data-bm-renderer")?$.getNamedItem("data-bm-renderer").value:$.getNamedItem("bm-renderer")?$.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var tt=$.getNamedItem("data-anim-loop")?$.getNamedItem("data-anim-loop").value:$.getNamedItem("data-bm-loop")?$.getNamedItem("data-bm-loop").value:$.getNamedItem("bm-loop")?$.getNamedItem("bm-loop").value:"";tt==="false"?s.loop=!1:tt==="true"?s.loop=!0:tt!==""&&(s.loop=parseInt(tt,10));var rt=$.getNamedItem("data-anim-autoplay")?$.getNamedItem("data-anim-autoplay").value:$.getNamedItem("data-bm-autoplay")?$.getNamedItem("data-bm-autoplay").value:$.getNamedItem("bm-autoplay")?$.getNamedItem("bm-autoplay").value:!0;s.autoplay=rt!=="false",s.name=$.getNamedItem("data-name")?$.getNamedItem("data-name").value:$.getNamedItem("data-bm-name")?$.getNamedItem("data-bm-name").value:$.getNamedItem("bm-name")?$.getNamedItem("bm-name").value:"";var st=$.getNamedItem("data-anim-prerender")?$.getNamedItem("data-anim-prerender").value:$.getNamedItem("data-bm-prerender")?$.getNamedItem("data-bm-prerender").value:$.getNamedItem("bm-prerender")?$.getNamedItem("bm-prerender").value:"";st==="false"&&(s.prerender=!1),s.path?this.setParams(s):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(i){i.op>this.animationData.op&&(this.animationData.op=i.op,this.totalFrames=Math.floor(i.op-this.animationData.ip));var o=this.animationData.layers,s,$=o.length,tt=i.layers,rt,st=tt.length;for(rt=0;rt<st;rt+=1)for(s=0;s<$;){if(o[s].id===tt[rt].id){o[s]=tt[rt];break}s+=1}if((i.chars||i.fonts)&&(this.renderer.globalData.fontManager.addChars(i.chars),this.renderer.globalData.fontManager.addFonts(i.fonts,this.renderer.globalData.defs)),i.assets)for($=i.assets.length,s=0;s<$;s+=1)this.animationData.assets.push(i.assets[s]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(i){this.animationData=i;var o=getExpressionsPlugin();o&&o.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var i=this.animationData.segments;if(!i||i.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var o=i.shift();this.timeCompleted=o.time*this.frameRate;var s=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(s,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var i=this.animationData.segments;i||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(i){if(this.renderer)try{this.animationData=i,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(i),i.assets||(i.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(i.assets),this.markers=markerParser(i.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(o){this.triggerConfigError(o)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var i=getExpressionsPlugin();i&&i.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(i,o){var s=typeof i=="number"?i:void 0,$=typeof o=="number"?o:void 0;this.renderer.updateContainerSize(s,$)},AnimationItem.prototype.setSubframe=function(i){this.isSubframeEnabled=!!i},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(i){this.triggerRenderFrameError(i)}},AnimationItem.prototype.play=function(i){i&&this.name!==i||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(i){i&&this.name!==i||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(i){i&&this.name!==i||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(i){i&&this.name!==i||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(i){for(var o,s=0;s<this.markers.length;s+=1)if(o=this.markers[s],o.payload&&o.payload.name===i)return o;return null},AnimationItem.prototype.goToAndStop=function(i,o,s){if(!(s&&this.name!==s)){var $=Number(i);if(isNaN($)){var tt=this.getMarkerData(i);tt&&this.goToAndStop(tt.time,!0)}else o?this.setCurrentRawFrameValue(i):this.setCurrentRawFrameValue(i*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(i,o,s){if(!(s&&this.name!==s)){var $=Number(i);if(isNaN($)){var tt=this.getMarkerData(i);tt&&(tt.duration?this.playSegments([tt.time,tt.time+tt.duration],!0):this.goToAndStop(tt.time,!0))}else this.goToAndStop($,o,s);this.play()}},AnimationItem.prototype.advanceTime=function(i){if(!(this.isPaused===!0||this.isLoaded===!1)){var o=this.currentRawFrame+i*this.frameModifier,s=!1;o>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(o>this.totalFrames?o%this.totalFrames:0)||(s=!0,o=this.totalFrames-1):o>=this.totalFrames?(this.playCount+=1,this.checkSegments(o%this.totalFrames)||(this.setCurrentRawFrameValue(o%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(o):o<0?this.checkSegments(o%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+o%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(s=!0,o=0)):this.setCurrentRawFrameValue(o),s&&(this.setCurrentRawFrameValue(o),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(i,o){this.playCount=0,i[1]<i[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=i[0]-i[1],this.timeCompleted=this.totalFrames,this.firstFrame=i[1],this.setCurrentRawFrameValue(this.totalFrames-.001-o)):i[1]>i[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=i[1]-i[0],this.timeCompleted=this.totalFrames,this.firstFrame=i[0],this.setCurrentRawFrameValue(.001+o)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(i,o){var s=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<i?s=i:this.currentRawFrame+this.firstFrame>o&&(s=o-i)),this.firstFrame=i,this.totalFrames=o-i,this.timeCompleted=this.totalFrames,s!==-1&&this.goToAndStop(s,!0)},AnimationItem.prototype.playSegments=function(i,o){if(o&&(this.segments.length=0),_typeof$4(i[0])==="object"){var s,$=i.length;for(s=0;s<$;s+=1)this.segments.push(i[s])}else this.segments.push(i);this.segments.length&&o&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(i){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),i&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(i){return this.segments.length?(this.adjustSegment(this.segments.shift(),i),!0):!1},AnimationItem.prototype.destroy=function(i){i&&this.name!==i||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(i){this.currentRawFrame=i,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(i){this.playSpeed=i,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(i){this.playDirection=i<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(i){this.loop=i},AnimationItem.prototype.setVolume=function(i,o){o&&this.name!==o||this.audioController.setVolume(i)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(i){i&&this.name!==i||this.audioController.mute()},AnimationItem.prototype.unmute=function(i){i&&this.name!==i||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(i){var o="";if(i.e)o=i.p;else if(this.assetsPath){var s=i.p;s.indexOf("images/")!==-1&&(s=s.split("/")[1]),o=this.assetsPath+s}else o=this.path,o+=i.u?i.u:"",o+=i.p;return o},AnimationItem.prototype.getAssetData=function(i){for(var o=0,s=this.assets.length;o<s;){if(i===this.assets[o].id)return this.assets[o];o+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(i){return i?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(i,o,s){try{var $=this.renderer.getElementByPath(i);$.updateDocumentData(o,s)}catch(tt){}},AnimationItem.prototype.trigger=function(i){if(this._cbs&&this._cbs[i])switch(i){case"enterFrame":this.triggerEvent(i,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(i,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(i,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(i,new BMCompleteEvent(i,this.frameMult));break;case"segmentStart":this.triggerEvent(i,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(i,new BMDestroyEvent(i,this));break;default:this.triggerEvent(i)}i==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameMult)),i==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult)),i==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(i,this.frameMult)),i==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames)),i==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(i,this))},AnimationItem.prototype.triggerRenderFrameError=function(i){var o=new BMRenderFrameErrorEvent(i,this.currentFrame);this.triggerEvent("error",o),this.onError&&this.onError.call(this,o)},AnimationItem.prototype.triggerConfigError=function(i){var o=new BMConfigErrorEvent(i,this.currentFrame);this.triggerEvent("error",o),this.onError&&this.onError.call(this,o)};var animationManager=function(){var i={},o=[],s=0,$=0,tt=0,rt=!0,st=!1;function _(hr){for(var Er=0,Nt=hr.target;Er<$;)o[Er].animation===Nt&&(o.splice(Er,1),Er-=1,$-=1,Nt.isPaused||wt()),Er+=1}function ut(hr,Er){if(!hr)return null;for(var Nt=0;Nt<$;){if(o[Nt].elem===hr&&o[Nt].elem!==null)return o[Nt].animation;Nt+=1}var Wt=new AnimationItem;return bt(Wt,hr),Wt.setData(hr,Er),Wt}function mt(){var hr,Er=o.length,Nt=[];for(hr=0;hr<Er;hr+=1)Nt.push(o[hr].animation);return Nt}function vt(){tt+=1,$r()}function wt(){tt-=1}function bt(hr,Er){hr.addEventListener("destroy",_),hr.addEventListener("_active",vt),hr.addEventListener("_idle",wt),o.push({elem:Er,animation:hr}),$+=1}function Mt(hr){var Er=new AnimationItem;return bt(Er,null),Er.setParams(hr),Er}function At(hr,Er){var Nt;for(Nt=0;Nt<$;Nt+=1)o[Nt].animation.setSpeed(hr,Er)}function Lt(hr,Er){var Nt;for(Nt=0;Nt<$;Nt+=1)o[Nt].animation.setDirection(hr,Er)}function Ht(hr){var Er;for(Er=0;Er<$;Er+=1)o[Er].animation.play(hr)}function Tt(hr){var Er=hr-s,Nt;for(Nt=0;Nt<$;Nt+=1)o[Nt].animation.advanceTime(Er);s=hr,tt&&!st?window.requestAnimationFrame(Tt):rt=!0}function Ct(hr){s=hr,window.requestAnimationFrame(Tt)}function St(hr){var Er;for(Er=0;Er<$;Er+=1)o[Er].animation.pause(hr)}function It(hr,Er,Nt){var Wt;for(Wt=0;Wt<$;Wt+=1)o[Wt].animation.goToAndStop(hr,Er,Nt)}function Bt(hr){var Er;for(Er=0;Er<$;Er+=1)o[Er].animation.stop(hr)}function Ft(hr){var Er;for(Er=0;Er<$;Er+=1)o[Er].animation.togglePause(hr)}function Gt(hr){var Er;for(Er=$-1;Er>=0;Er-=1)o[Er].animation.destroy(hr)}function Xt(hr,Er,Nt){var Wt=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),or,ar=Wt.length;for(or=0;or<ar;or+=1)Nt&&Wt[or].setAttribute("data-bm-type",Nt),ut(Wt[or],hr);if(Er&&ar===0){Nt||(Nt="svg");var Fr=document.getElementsByTagName("body")[0];Fr.innerText="";var Yr=createTag("div");Yr.style.width="100%",Yr.style.height="100%",Yr.setAttribute("data-bm-type",Nt),Fr.appendChild(Yr),ut(Yr,hr)}}function ir(){var hr;for(hr=0;hr<$;hr+=1)o[hr].animation.resize()}function $r(){!st&&tt&&rt&&(window.requestAnimationFrame(Ct),rt=!1)}function Tr(){st=!0}function xr(){st=!1,$r()}function Xr(hr,Er){var Nt;for(Nt=0;Nt<$;Nt+=1)o[Nt].animation.setVolume(hr,Er)}function ln(hr){var Er;for(Er=0;Er<$;Er+=1)o[Er].animation.mute(hr)}function zr(hr){var Er;for(Er=0;Er<$;Er+=1)o[Er].animation.unmute(hr)}return i.registerAnimation=ut,i.loadAnimation=Mt,i.setSpeed=At,i.setDirection=Lt,i.play=Ht,i.pause=St,i.stop=Bt,i.togglePause=Ft,i.searchAnimations=Xt,i.resize=ir,i.goToAndStop=It,i.destroy=Gt,i.freeze=Tr,i.unfreeze=xr,i.setVolume=Xr,i.mute=ln,i.unmute=zr,i.getRegisteredAnimations=mt,i}(),BezierFactory=function(){var i={};i.getBezierEasing=s;var o={};function s(Ct,St,It,Bt,Ft){var Gt=Ft||("bez_"+Ct+"_"+St+"_"+It+"_"+Bt).replace(/\./g,"p");if(o[Gt])return o[Gt];var Xt=new Tt([Ct,St,It,Bt]);return o[Gt]=Xt,Xt}var $=4,tt=.001,rt=1e-7,st=10,_=11,ut=1/(_-1),mt=typeof Float32Array=="function";function vt(Ct,St){return 1-3*St+3*Ct}function wt(Ct,St){return 3*St-6*Ct}function bt(Ct){return 3*Ct}function Mt(Ct,St,It){return((vt(St,It)*Ct+wt(St,It))*Ct+bt(St))*Ct}function At(Ct,St,It){return 3*vt(St,It)*Ct*Ct+2*wt(St,It)*Ct+bt(St)}function Lt(Ct,St,It,Bt,Ft){var Gt,Xt,ir=0;do Xt=St+(It-St)/2,Gt=Mt(Xt,Bt,Ft)-Ct,Gt>0?It=Xt:St=Xt;while(Math.abs(Gt)>rt&&++ir<st);return Xt}function Ht(Ct,St,It,Bt){for(var Ft=0;Ft<$;++Ft){var Gt=At(St,It,Bt);if(Gt===0)return St;var Xt=Mt(St,It,Bt)-Ct;St-=Xt/Gt}return St}function Tt(Ct){this._p=Ct,this._mSampleValues=mt?new Float32Array(_):new Array(_),this._precomputed=!1,this.get=this.get.bind(this)}return Tt.prototype={get:function(St){var It=this._p[0],Bt=this._p[1],Ft=this._p[2],Gt=this._p[3];return this._precomputed||this._precompute(),It===Bt&&Ft===Gt?St:St===0?0:St===1?1:Mt(this._getTForX(St),Bt,Gt)},_precompute:function(){var St=this._p[0],It=this._p[1],Bt=this._p[2],Ft=this._p[3];this._precomputed=!0,(St!==It||Bt!==Ft)&&this._calcSampleValues()},_calcSampleValues:function(){for(var St=this._p[0],It=this._p[2],Bt=0;Bt<_;++Bt)this._mSampleValues[Bt]=Mt(Bt*ut,St,It)},_getTForX:function(St){for(var It=this._p[0],Bt=this._p[2],Ft=this._mSampleValues,Gt=0,Xt=1,ir=_-1;Xt!==ir&&Ft[Xt]<=St;++Xt)Gt+=ut;--Xt;var $r=(St-Ft[Xt])/(Ft[Xt+1]-Ft[Xt]),Tr=Gt+$r*ut,xr=At(Tr,It,Bt);return xr>=tt?Ht(St,Tr,It,Bt):xr===0?Tr:Lt(St,Gt,Gt+ut,It,Bt)}},i}(),pooling=function(){function i(o){return o.concat(createSizedArray(o.length))}return{double:i}}(),poolFactory=function(){return function(i,o,s){var $=0,tt=i,rt=createSizedArray(tt),st={newElement:_,release:ut};function _(){var mt;return $?($-=1,mt=rt[$]):mt=o(),mt}function ut(mt){$===tt&&(rt=pooling.double(rt),tt*=2),s&&s(mt),rt[$]=mt,$+=1}return st}}(),bezierLengthPool=function(){function i(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,i)}(),segmentsLengthPool=function(){function i(){return{lengths:[],totalLength:0}}function o(s){var $,tt=s.lengths.length;for($=0;$<tt;$+=1)bezierLengthPool.release(s.lengths[$]);s.lengths.length=0}return poolFactory(8,i,o)}();function bezFunction(){var i=Math;function o(bt,Mt,At,Lt,Ht,Tt){var Ct=bt*Lt+Mt*Ht+At*Tt-Ht*Lt-Tt*bt-At*Mt;return Ct>-.001&&Ct<.001}function s(bt,Mt,At,Lt,Ht,Tt,Ct,St,It){if(At===0&&Tt===0&&It===0)return o(bt,Mt,Lt,Ht,Ct,St);var Bt=i.sqrt(i.pow(Lt-bt,2)+i.pow(Ht-Mt,2)+i.pow(Tt-At,2)),Ft=i.sqrt(i.pow(Ct-bt,2)+i.pow(St-Mt,2)+i.pow(It-At,2)),Gt=i.sqrt(i.pow(Ct-Lt,2)+i.pow(St-Ht,2)+i.pow(It-Tt,2)),Xt;return Bt>Ft?Bt>Gt?Xt=Bt-Ft-Gt:Xt=Gt-Ft-Bt:Gt>Ft?Xt=Gt-Ft-Bt:Xt=Ft-Bt-Gt,Xt>-1e-4&&Xt<1e-4}var $=function(){return function(bt,Mt,At,Lt){var Ht=getDefaultCurveSegments(),Tt,Ct,St,It,Bt,Ft=0,Gt,Xt=[],ir=[],$r=bezierLengthPool.newElement();for(St=At.length,Tt=0;Tt<Ht;Tt+=1){for(Bt=Tt/(Ht-1),Gt=0,Ct=0;Ct<St;Ct+=1)It=bmPow(1-Bt,3)*bt[Ct]+3*bmPow(1-Bt,2)*Bt*At[Ct]+3*(1-Bt)*bmPow(Bt,2)*Lt[Ct]+bmPow(Bt,3)*Mt[Ct],Xt[Ct]=It,ir[Ct]!==null&&(Gt+=bmPow(Xt[Ct]-ir[Ct],2)),ir[Ct]=Xt[Ct];Gt&&(Gt=bmSqrt(Gt),Ft+=Gt),$r.percents[Tt]=Bt,$r.lengths[Tt]=Ft}return $r.addedLength=Ft,$r}}();function tt(bt){var Mt=segmentsLengthPool.newElement(),At=bt.c,Lt=bt.v,Ht=bt.o,Tt=bt.i,Ct,St=bt._length,It=Mt.lengths,Bt=0;for(Ct=0;Ct<St-1;Ct+=1)It[Ct]=$(Lt[Ct],Lt[Ct+1],Ht[Ct],Tt[Ct+1]),Bt+=It[Ct].addedLength;return At&&St&&(It[Ct]=$(Lt[Ct],Lt[0],Ht[Ct],Tt[0]),Bt+=It[Ct].addedLength),Mt.totalLength=Bt,Mt}function rt(bt){this.segmentLength=0,this.points=new Array(bt)}function st(bt,Mt){this.partialLength=bt,this.point=Mt}var _=function(){var bt={};return function(Mt,At,Lt,Ht){var Tt=(Mt[0]+"_"+Mt[1]+"_"+At[0]+"_"+At[1]+"_"+Lt[0]+"_"+Lt[1]+"_"+Ht[0]+"_"+Ht[1]).replace(/\./g,"p");if(!bt[Tt]){var Ct=getDefaultCurveSegments(),St,It,Bt,Ft,Gt,Xt=0,ir,$r,Tr=null;Mt.length===2&&(Mt[0]!==At[0]||Mt[1]!==At[1])&&o(Mt[0],Mt[1],At[0],At[1],Mt[0]+Lt[0],Mt[1]+Lt[1])&&o(Mt[0],Mt[1],At[0],At[1],At[0]+Ht[0],At[1]+Ht[1])&&(Ct=2);var xr=new rt(Ct);for(Bt=Lt.length,St=0;St<Ct;St+=1){for($r=createSizedArray(Bt),Gt=St/(Ct-1),ir=0,It=0;It<Bt;It+=1)Ft=bmPow(1-Gt,3)*Mt[It]+3*bmPow(1-Gt,2)*Gt*(Mt[It]+Lt[It])+3*(1-Gt)*bmPow(Gt,2)*(At[It]+Ht[It])+bmPow(Gt,3)*At[It],$r[It]=Ft,Tr!==null&&(ir+=bmPow($r[It]-Tr[It],2));ir=bmSqrt(ir),Xt+=ir,xr.points[St]=new st(ir,$r),Tr=$r}xr.segmentLength=Xt,bt[Tt]=xr}return bt[Tt]}}();function ut(bt,Mt){var At=Mt.percents,Lt=Mt.lengths,Ht=At.length,Tt=bmFloor((Ht-1)*bt),Ct=bt*Mt.addedLength,St=0;if(Tt===Ht-1||Tt===0||Ct===Lt[Tt])return At[Tt];for(var It=Lt[Tt]>Ct?-1:1,Bt=!0;Bt;)if(Lt[Tt]<=Ct&&Lt[Tt+1]>Ct?(St=(Ct-Lt[Tt])/(Lt[Tt+1]-Lt[Tt]),Bt=!1):Tt+=It,Tt<0||Tt>=Ht-1){if(Tt===Ht-1)return At[Tt];Bt=!1}return At[Tt]+(At[Tt+1]-At[Tt])*St}function mt(bt,Mt,At,Lt,Ht,Tt){var Ct=ut(Ht,Tt),St=1-Ct,It=i.round((St*St*St*bt[0]+(Ct*St*St+St*Ct*St+St*St*Ct)*At[0]+(Ct*Ct*St+St*Ct*Ct+Ct*St*Ct)*Lt[0]+Ct*Ct*Ct*Mt[0])*1e3)/1e3,Bt=i.round((St*St*St*bt[1]+(Ct*St*St+St*Ct*St+St*St*Ct)*At[1]+(Ct*Ct*St+St*Ct*Ct+Ct*St*Ct)*Lt[1]+Ct*Ct*Ct*Mt[1])*1e3)/1e3;return[It,Bt]}var vt=createTypedArray("float32",8);function wt(bt,Mt,At,Lt,Ht,Tt,Ct){Ht<0?Ht=0:Ht>1&&(Ht=1);var St=ut(Ht,Ct);Tt=Tt>1?1:Tt;var It=ut(Tt,Ct),Bt,Ft=bt.length,Gt=1-St,Xt=1-It,ir=Gt*Gt*Gt,$r=St*Gt*Gt*3,Tr=St*St*Gt*3,xr=St*St*St,Xr=Gt*Gt*Xt,ln=St*Gt*Xt+Gt*St*Xt+Gt*Gt*It,zr=St*St*Xt+Gt*St*It+St*Gt*It,hr=St*St*It,Er=Gt*Xt*Xt,Nt=St*Xt*Xt+Gt*It*Xt+Gt*Xt*It,Wt=St*It*Xt+Gt*It*It+St*Xt*It,or=St*It*It,ar=Xt*Xt*Xt,Fr=It*Xt*Xt+Xt*It*Xt+Xt*Xt*It,Yr=It*It*Xt+Xt*It*It+It*Xt*It,hn=It*It*It;for(Bt=0;Bt<Ft;Bt+=1)vt[Bt*4]=i.round((ir*bt[Bt]+$r*At[Bt]+Tr*Lt[Bt]+xr*Mt[Bt])*1e3)/1e3,vt[Bt*4+1]=i.round((Xr*bt[Bt]+ln*At[Bt]+zr*Lt[Bt]+hr*Mt[Bt])*1e3)/1e3,vt[Bt*4+2]=i.round((Er*bt[Bt]+Nt*At[Bt]+Wt*Lt[Bt]+or*Mt[Bt])*1e3)/1e3,vt[Bt*4+3]=i.round((ar*bt[Bt]+Fr*At[Bt]+Yr*Lt[Bt]+hn*Mt[Bt])*1e3)/1e3;return vt}return{getSegmentsLength:tt,getNewSegment:wt,getPointInSegment:mt,buildBezierData:_,pointOnLine2D:o,pointOnLine3D:s}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(i,o){var s=this.offsetTime,$;this.propType==="multidimensional"&&($=createTypedArray("float32",this.pv.length));for(var tt=o.lastIndex,rt=tt,st=this.keyframes.length-1,_=!0,ut,mt,vt;_;){if(ut=this.keyframes[rt],mt=this.keyframes[rt+1],rt===st-1&&i>=mt.t-s){ut.h&&(ut=mt),tt=0;break}if(mt.t-s>i){tt=rt;break}rt<st-1?rt+=1:(tt=0,_=!1)}vt=this.keyframesMetadata[rt]||{};var wt,bt,Mt,At,Lt,Ht,Tt=mt.t-s,Ct=ut.t-s,St;if(ut.to){vt.bezierData||(vt.bezierData=bez.buildBezierData(ut.s,mt.s||ut.e,ut.to,ut.ti));var It=vt.bezierData;if(i>=Tt||i<Ct){var Bt=i>=Tt?It.points.length-1:0;for(bt=It.points[Bt].point.length,wt=0;wt<bt;wt+=1)$[wt]=It.points[Bt].point[wt]}else{vt.__fnct?Ht=vt.__fnct:(Ht=BezierFactory.getBezierEasing(ut.o.x,ut.o.y,ut.i.x,ut.i.y,ut.n).get,vt.__fnct=Ht),Mt=Ht((i-Ct)/(Tt-Ct));var Ft=It.segmentLength*Mt,Gt,Xt=o.lastFrame<i&&o._lastKeyframeIndex===rt?o._lastAddedLength:0;for(Lt=o.lastFrame<i&&o._lastKeyframeIndex===rt?o._lastPoint:0,_=!0,At=It.points.length;_;){if(Xt+=It.points[Lt].partialLength,Ft===0||Mt===0||Lt===It.points.length-1){for(bt=It.points[Lt].point.length,wt=0;wt<bt;wt+=1)$[wt]=It.points[Lt].point[wt];break}else if(Ft>=Xt&&Ft<Xt+It.points[Lt+1].partialLength){for(Gt=(Ft-Xt)/It.points[Lt+1].partialLength,bt=It.points[Lt].point.length,wt=0;wt<bt;wt+=1)$[wt]=It.points[Lt].point[wt]+(It.points[Lt+1].point[wt]-It.points[Lt].point[wt])*Gt;break}Lt<At-1?Lt+=1:_=!1}o._lastPoint=Lt,o._lastAddedLength=Xt-It.points[Lt].partialLength,o._lastKeyframeIndex=rt}}else{var ir,$r,Tr,xr,Xr;if(st=ut.s.length,St=mt.s||ut.e,this.sh&&ut.h!==1)if(i>=Tt)$[0]=St[0],$[1]=St[1],$[2]=St[2];else if(i<=Ct)$[0]=ut.s[0],$[1]=ut.s[1],$[2]=ut.s[2];else{var ln=createQuaternion(ut.s),zr=createQuaternion(St),hr=(i-Ct)/(Tt-Ct);quaternionToEuler($,slerp(ln,zr,hr))}else for(rt=0;rt<st;rt+=1)ut.h!==1&&(i>=Tt?Mt=1:i<Ct?Mt=0:(ut.o.x.constructor===Array?(vt.__fnct||(vt.__fnct=[]),vt.__fnct[rt]?Ht=vt.__fnct[rt]:(ir=ut.o.x[rt]===void 0?ut.o.x[0]:ut.o.x[rt],$r=ut.o.y[rt]===void 0?ut.o.y[0]:ut.o.y[rt],Tr=ut.i.x[rt]===void 0?ut.i.x[0]:ut.i.x[rt],xr=ut.i.y[rt]===void 0?ut.i.y[0]:ut.i.y[rt],Ht=BezierFactory.getBezierEasing(ir,$r,Tr,xr).get,vt.__fnct[rt]=Ht)):vt.__fnct?Ht=vt.__fnct:(ir=ut.o.x,$r=ut.o.y,Tr=ut.i.x,xr=ut.i.y,Ht=BezierFactory.getBezierEasing(ir,$r,Tr,xr).get,ut.keyframeMetadata=Ht),Mt=Ht((i-Ct)/(Tt-Ct)))),St=mt.s||ut.e,Xr=ut.h===1?ut.s[rt]:ut.s[rt]+(St[rt]-ut.s[rt])*Mt,this.propType==="multidimensional"?$[rt]=Xr:$=Xr}return o.lastIndex=tt,$}function slerp(i,o,s){var $=[],tt=i[0],rt=i[1],st=i[2],_=i[3],ut=o[0],mt=o[1],vt=o[2],wt=o[3],bt,Mt,At,Lt,Ht;return Mt=tt*ut+rt*mt+st*vt+_*wt,Mt<0&&(Mt=-Mt,ut=-ut,mt=-mt,vt=-vt,wt=-wt),1-Mt>1e-6?(bt=Math.acos(Mt),At=Math.sin(bt),Lt=Math.sin((1-s)*bt)/At,Ht=Math.sin(s*bt)/At):(Lt=1-s,Ht=s),$[0]=Lt*tt+Ht*ut,$[1]=Lt*rt+Ht*mt,$[2]=Lt*st+Ht*vt,$[3]=Lt*_+Ht*wt,$}function quaternionToEuler(i,o){var s=o[0],$=o[1],tt=o[2],rt=o[3],st=Math.atan2(2*$*rt-2*s*tt,1-2*$*$-2*tt*tt),_=Math.asin(2*s*$+2*tt*rt),ut=Math.atan2(2*s*rt-2*$*tt,1-2*s*s-2*tt*tt);i[0]=st/degToRads,i[1]=_/degToRads,i[2]=ut/degToRads}function createQuaternion(i){var o=i[0]*degToRads,s=i[1]*degToRads,$=i[2]*degToRads,tt=Math.cos(o/2),rt=Math.cos(s/2),st=Math.cos($/2),_=Math.sin(o/2),ut=Math.sin(s/2),mt=Math.sin($/2),vt=tt*rt*st-_*ut*mt,wt=_*ut*st+tt*rt*mt,bt=_*rt*st+tt*ut*mt,Mt=tt*ut*st-_*rt*mt;return[wt,bt,Mt,vt]}function getValueAtCurrentTime(){var i=this.comp.renderedFrame-this.offsetTime,o=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(i===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=s&&i>=s||this._caching.lastFrame<o&&i<o))){this._caching.lastFrame>=i&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var $=this.interpolateValue(i,this._caching);this.pv=$}return this._caching.lastFrame=i,this.pv}function setVValue(i){var o;if(this.propType==="unidimensional")o=i*this.mult,mathAbs(this.v-o)>1e-5&&(this.v=o,this._mdf=!0);else for(var s=0,$=this.v.length;s<$;)o=i[s]*this.mult,mathAbs(this.v[s]-o)>1e-5&&(this.v[s]=o,this._mdf=!0),s+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var i,o=this.effectsSequence.length,s=this.kf?this.pv:this.data.k;for(i=0;i<o;i+=1)s=this.effectsSequence[i](s);this.setVValue(s),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(i){this.effectsSequence.push(i),this.container.addDynamicProperty(this)}function ValueProperty(i,o,s,$){this.propType="unidimensional",this.mult=s||1,this.data=o,this.v=s?o.k*s:o.k,this.pv=o.k,this._mdf=!1,this.elem=i,this.container=$,this.comp=i.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(i,o,s,$){this.propType="multidimensional",this.mult=s||1,this.data=o,this._mdf=!1,this.elem=i,this.container=$,this.comp=i.comp,this.k=!1,this.kf=!1,this.frameId=-1;var tt,rt=o.k.length;for(this.v=createTypedArray("float32",rt),this.pv=createTypedArray("float32",rt),this.vel=createTypedArray("float32",rt),tt=0;tt<rt;tt+=1)this.v[tt]=o.k[tt]*this.mult,this.pv[tt]=o.k[tt];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(i,o,s,$){this.propType="unidimensional",this.keyframes=o.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=o,this.mult=s||1,this.elem=i,this.container=$,this.comp=i.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(i,o,s,$){this.propType="multidimensional";var tt,rt=o.k.length,st,_,ut,mt;for(tt=0;tt<rt-1;tt+=1)o.k[tt].to&&o.k[tt].s&&o.k[tt+1]&&o.k[tt+1].s&&(st=o.k[tt].s,_=o.k[tt+1].s,ut=o.k[tt].to,mt=o.k[tt].ti,(st.length===2&&!(st[0]===_[0]&&st[1]===_[1])&&bez.pointOnLine2D(st[0],st[1],_[0],_[1],st[0]+ut[0],st[1]+ut[1])&&bez.pointOnLine2D(st[0],st[1],_[0],_[1],_[0]+mt[0],_[1]+mt[1])||st.length===3&&!(st[0]===_[0]&&st[1]===_[1]&&st[2]===_[2])&&bez.pointOnLine3D(st[0],st[1],st[2],_[0],_[1],_[2],st[0]+ut[0],st[1]+ut[1],st[2]+ut[2])&&bez.pointOnLine3D(st[0],st[1],st[2],_[0],_[1],_[2],_[0]+mt[0],_[1]+mt[1],_[2]+mt[2]))&&(o.k[tt].to=null,o.k[tt].ti=null),st[0]===_[0]&&st[1]===_[1]&&ut[0]===0&&ut[1]===0&&mt[0]===0&&mt[1]===0&&(st.length===2||st[2]===_[2]&&ut[2]===0&&mt[2]===0)&&(o.k[tt].to=null,o.k[tt].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=o,this.keyframes=o.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=i,this.container=$,this.comp=i.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var vt=o.k[0].s.length;for(this.v=createTypedArray("float32",vt),this.pv=createTypedArray("float32",vt),tt=0;tt<vt;tt+=1)this.v[tt]=initFrame,this.pv[tt]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",vt)},this.addEffect=addEffect}var PropertyFactory=function(){function i(s,$,tt,rt,st){$.sid&&($=s.globalData.slotManager.getProp($));var _;if(!$.k.length)_=new ValueProperty(s,$,rt,st);else if(typeof $.k[0]=="number")_=new MultiDimensionalProperty(s,$,rt,st);else switch(tt){case 0:_=new KeyframedValueProperty(s,$,rt,st);break;case 1:_=new KeyframedMultidimensionalProperty(s,$,rt,st);break}return _.effectsSequence.length&&st.addDynamicProperty(_),_}var o={getProp:i};return o}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(o){this.dynamicProperties.indexOf(o)===-1&&(this.dynamicProperties.push(o),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var o,s=this.dynamicProperties.length;for(o=0;o<s;o+=1)this.dynamicProperties[o].getValue(),this.dynamicProperties[o]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(o){this.container=o,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function i(){return createTypedArray("float32",2)}return poolFactory(8,i)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(i,o){this.c=i,this.setLength(o);for(var s=0;s<o;)this.v[s]=pointPool.newElement(),this.o[s]=pointPool.newElement(),this.i[s]=pointPool.newElement(),s+=1},ShapePath.prototype.setLength=function(i){for(;this._maxLength<i;)this.doubleArrayLength();this._length=i},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(i,o,s,$,tt){var rt;switch(this._length=Math.max(this._length,$+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":rt=this.v;break;case"i":rt=this.i;break;case"o":rt=this.o;break;default:rt=[];break}(!rt[$]||rt[$]&&!tt)&&(rt[$]=pointPool.newElement()),rt[$][0]=i,rt[$][1]=o},ShapePath.prototype.setTripleAt=function(i,o,s,$,tt,rt,st,_){this.setXYAt(i,o,"v",st,_),this.setXYAt(s,$,"o",st,_),this.setXYAt(tt,rt,"i",st,_)},ShapePath.prototype.reverse=function(){var i=new ShapePath;i.setPathData(this.c,this._length);var o=this.v,s=this.o,$=this.i,tt=0;this.c&&(i.setTripleAt(o[0][0],o[0][1],$[0][0],$[0][1],s[0][0],s[0][1],0,!1),tt=1);var rt=this._length-1,st=this._length,_;for(_=tt;_<st;_+=1)i.setTripleAt(o[rt][0],o[rt][1],$[rt][0],$[rt][1],s[rt][0],s[rt][1],_,!1),rt-=1;return i},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function i(){return new ShapePath}function o(tt){var rt=tt._length,st;for(st=0;st<rt;st+=1)pointPool.release(tt.v[st]),pointPool.release(tt.i[st]),pointPool.release(tt.o[st]),tt.v[st]=null,tt.i[st]=null,tt.o[st]=null;tt._length=0,tt.c=!1}function s(tt){var rt=$.newElement(),st,_=tt._length===void 0?tt.v.length:tt._length;for(rt.setLength(_),rt.c=tt.c,st=0;st<_;st+=1)rt.setTripleAt(tt.v[st][0],tt.v[st][1],tt.o[st][0],tt.o[st][1],tt.i[st][0],tt.i[st][1],st);return rt}var $=poolFactory(4,i,o);return $.clone=s,$}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(i){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=i,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var i;for(i=0;i<this._length;i+=1)shapePool.release(this.shapes[i]);this._length=0};var shapeCollectionPool=function(){var i={newShapeCollection:tt,release:rt},o=0,s=4,$=createSizedArray(s);function tt(){var st;return o?(o-=1,st=$[o]):st=new ShapeCollection,st}function rt(st){var _,ut=st._length;for(_=0;_<ut;_+=1)shapePool.release(st.shapes[_]);st._length=0,o===s&&($=pooling.double($),s*=2),$[o]=st,o+=1}return i}(),ShapePropertyFactory=function(){var i=-999999;function o(Tt,Ct,St){var It=St.lastIndex,Bt,Ft,Gt,Xt,ir,$r,Tr,xr,Xr,ln=this.keyframes;if(Tt<ln[0].t-this.offsetTime)Bt=ln[0].s[0],Gt=!0,It=0;else if(Tt>=ln[ln.length-1].t-this.offsetTime)Bt=ln[ln.length-1].s?ln[ln.length-1].s[0]:ln[ln.length-2].e[0],Gt=!0;else{for(var zr=It,hr=ln.length-1,Er=!0,Nt,Wt,or;Er&&(Nt=ln[zr],Wt=ln[zr+1],!(Wt.t-this.offsetTime>Tt));)zr<hr-1?zr+=1:Er=!1;if(or=this.keyframesMetadata[zr]||{},Gt=Nt.h===1,It=zr,!Gt){if(Tt>=Wt.t-this.offsetTime)xr=1;else if(Tt<Nt.t-this.offsetTime)xr=0;else{var ar;or.__fnct?ar=or.__fnct:(ar=BezierFactory.getBezierEasing(Nt.o.x,Nt.o.y,Nt.i.x,Nt.i.y).get,or.__fnct=ar),xr=ar((Tt-(Nt.t-this.offsetTime))/(Wt.t-this.offsetTime-(Nt.t-this.offsetTime)))}Ft=Wt.s?Wt.s[0]:Nt.e[0]}Bt=Nt.s[0]}for($r=Ct._length,Tr=Bt.i[0].length,St.lastIndex=It,Xt=0;Xt<$r;Xt+=1)for(ir=0;ir<Tr;ir+=1)Xr=Gt?Bt.i[Xt][ir]:Bt.i[Xt][ir]+(Ft.i[Xt][ir]-Bt.i[Xt][ir])*xr,Ct.i[Xt][ir]=Xr,Xr=Gt?Bt.o[Xt][ir]:Bt.o[Xt][ir]+(Ft.o[Xt][ir]-Bt.o[Xt][ir])*xr,Ct.o[Xt][ir]=Xr,Xr=Gt?Bt.v[Xt][ir]:Bt.v[Xt][ir]+(Ft.v[Xt][ir]-Bt.v[Xt][ir])*xr,Ct.v[Xt][ir]=Xr}function s(){var Tt=this.comp.renderedFrame-this.offsetTime,Ct=this.keyframes[0].t-this.offsetTime,St=this.keyframes[this.keyframes.length-1].t-this.offsetTime,It=this._caching.lastFrame;return It!==i&&(It<Ct&&Tt<Ct||It>St&&Tt>St)||(this._caching.lastIndex=It<Tt?this._caching.lastIndex:0,this.interpolateShape(Tt,this.pv,this._caching)),this._caching.lastFrame=Tt,this.pv}function $(){this.paths=this.localShapeCollection}function tt(Tt,Ct){if(Tt._length!==Ct._length||Tt.c!==Ct.c)return!1;var St,It=Tt._length;for(St=0;St<It;St+=1)if(Tt.v[St][0]!==Ct.v[St][0]||Tt.v[St][1]!==Ct.v[St][1]||Tt.o[St][0]!==Ct.o[St][0]||Tt.o[St][1]!==Ct.o[St][1]||Tt.i[St][0]!==Ct.i[St][0]||Tt.i[St][1]!==Ct.i[St][1])return!1;return!0}function rt(Tt){tt(this.v,Tt)||(this.v=shapePool.clone(Tt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function st(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Tt;this.kf?Tt=this.pv:this.data.ks?Tt=this.data.ks.k:Tt=this.data.pt.k;var Ct,St=this.effectsSequence.length;for(Ct=0;Ct<St;Ct+=1)Tt=this.effectsSequence[Ct](Tt);this.setVValue(Tt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function _(Tt,Ct,St){this.propType="shape",this.comp=Tt.comp,this.container=Tt,this.elem=Tt,this.data=Ct,this.k=!1,this.kf=!1,this._mdf=!1;var It=St===3?Ct.pt.k:Ct.ks.k;this.v=shapePool.clone(It),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=$,this.effectsSequence=[]}function ut(Tt){this.effectsSequence.push(Tt),this.container.addDynamicProperty(this)}_.prototype.interpolateShape=o,_.prototype.getValue=st,_.prototype.setVValue=rt,_.prototype.addEffect=ut;function mt(Tt,Ct,St){this.propType="shape",this.comp=Tt.comp,this.elem=Tt,this.container=Tt,this.offsetTime=Tt.data.st,this.keyframes=St===3?Ct.pt.k:Ct.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var It=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,It),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=i,this.reset=$,this._caching={lastFrame:i,lastIndex:0},this.effectsSequence=[s.bind(this)]}mt.prototype.getValue=st,mt.prototype.interpolateShape=o,mt.prototype.setVValue=rt,mt.prototype.addEffect=ut;var vt=function(){var Tt=roundCorner;function Ct(St,It){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=It.d,this.elem=St,this.comp=St.comp,this.frameId=-1,this.initDynamicPropertyContainer(St),this.p=PropertyFactory.getProp(St,It.p,1,0,this),this.s=PropertyFactory.getProp(St,It.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ct.prototype={reset:$,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var It=this.p.v[0],Bt=this.p.v[1],Ft=this.s.v[0]/2,Gt=this.s.v[1]/2,Xt=this.d!==3,ir=this.v;ir.v[0][0]=It,ir.v[0][1]=Bt-Gt,ir.v[1][0]=Xt?It+Ft:It-Ft,ir.v[1][1]=Bt,ir.v[2][0]=It,ir.v[2][1]=Bt+Gt,ir.v[3][0]=Xt?It-Ft:It+Ft,ir.v[3][1]=Bt,ir.i[0][0]=Xt?It-Ft*Tt:It+Ft*Tt,ir.i[0][1]=Bt-Gt,ir.i[1][0]=Xt?It+Ft:It-Ft,ir.i[1][1]=Bt-Gt*Tt,ir.i[2][0]=Xt?It+Ft*Tt:It-Ft*Tt,ir.i[2][1]=Bt+Gt,ir.i[3][0]=Xt?It-Ft:It+Ft,ir.i[3][1]=Bt+Gt*Tt,ir.o[0][0]=Xt?It+Ft*Tt:It-Ft*Tt,ir.o[0][1]=Bt-Gt,ir.o[1][0]=Xt?It+Ft:It-Ft,ir.o[1][1]=Bt+Gt*Tt,ir.o[2][0]=Xt?It-Ft*Tt:It+Ft*Tt,ir.o[2][1]=Bt+Gt,ir.o[3][0]=Xt?It-Ft:It+Ft,ir.o[3][1]=Bt-Gt*Tt}},extendPrototype([DynamicPropertyContainer],Ct),Ct}(),wt=function(){function Tt(Ct,St){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ct,this.comp=Ct.comp,this.data=St,this.frameId=-1,this.d=St.d,this.initDynamicPropertyContainer(Ct),St.sy===1?(this.ir=PropertyFactory.getProp(Ct,St.ir,0,0,this),this.is=PropertyFactory.getProp(Ct,St.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ct,St.pt,0,0,this),this.p=PropertyFactory.getProp(Ct,St.p,1,0,this),this.r=PropertyFactory.getProp(Ct,St.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ct,St.or,0,0,this),this.os=PropertyFactory.getProp(Ct,St.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Tt.prototype={reset:$,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var St=Math.floor(this.pt.v)*2,It=Math.PI*2/St,Bt=!0,Ft=this.or.v,Gt=this.ir.v,Xt=this.os.v,ir=this.is.v,$r=2*Math.PI*Ft/(St*2),Tr=2*Math.PI*Gt/(St*2),xr,Xr,ln,zr,hr=-Math.PI/2;hr+=this.r.v;var Er=this.data.d===3?-1:1;for(this.v._length=0,xr=0;xr<St;xr+=1){Xr=Bt?Ft:Gt,ln=Bt?Xt:ir,zr=Bt?$r:Tr;var Nt=Xr*Math.cos(hr),Wt=Xr*Math.sin(hr),or=Nt===0&&Wt===0?0:Wt/Math.sqrt(Nt*Nt+Wt*Wt),ar=Nt===0&&Wt===0?0:-Nt/Math.sqrt(Nt*Nt+Wt*Wt);Nt+=+this.p.v[0],Wt+=+this.p.v[1],this.v.setTripleAt(Nt,Wt,Nt-or*zr*ln*Er,Wt-ar*zr*ln*Er,Nt+or*zr*ln*Er,Wt+ar*zr*ln*Er,xr,!0),Bt=!Bt,hr+=It*Er}},convertPolygonToPath:function(){var St=Math.floor(this.pt.v),It=Math.PI*2/St,Bt=this.or.v,Ft=this.os.v,Gt=2*Math.PI*Bt/(St*4),Xt,ir=-Math.PI*.5,$r=this.data.d===3?-1:1;for(ir+=this.r.v,this.v._length=0,Xt=0;Xt<St;Xt+=1){var Tr=Bt*Math.cos(ir),xr=Bt*Math.sin(ir),Xr=Tr===0&&xr===0?0:xr/Math.sqrt(Tr*Tr+xr*xr),ln=Tr===0&&xr===0?0:-Tr/Math.sqrt(Tr*Tr+xr*xr);Tr+=+this.p.v[0],xr+=+this.p.v[1],this.v.setTripleAt(Tr,xr,Tr-Xr*Gt*Ft*$r,xr-ln*Gt*Ft*$r,Tr+Xr*Gt*Ft*$r,xr+ln*Gt*Ft*$r,Xt,!0),ir+=It*$r}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Tt),Tt}(),bt=function(){function Tt(Ct,St){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ct,this.comp=Ct.comp,this.frameId=-1,this.d=St.d,this.initDynamicPropertyContainer(Ct),this.p=PropertyFactory.getProp(Ct,St.p,1,0,this),this.s=PropertyFactory.getProp(Ct,St.s,1,0,this),this.r=PropertyFactory.getProp(Ct,St.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Tt.prototype={convertRectToPath:function(){var St=this.p.v[0],It=this.p.v[1],Bt=this.s.v[0]/2,Ft=this.s.v[1]/2,Gt=bmMin(Bt,Ft,this.r.v),Xt=Gt*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(St+Bt,It-Ft+Gt,St+Bt,It-Ft+Gt,St+Bt,It-Ft+Xt,0,!0),this.v.setTripleAt(St+Bt,It+Ft-Gt,St+Bt,It+Ft-Xt,St+Bt,It+Ft-Gt,1,!0),Gt!==0?(this.v.setTripleAt(St+Bt-Gt,It+Ft,St+Bt-Gt,It+Ft,St+Bt-Xt,It+Ft,2,!0),this.v.setTripleAt(St-Bt+Gt,It+Ft,St-Bt+Xt,It+Ft,St-Bt+Gt,It+Ft,3,!0),this.v.setTripleAt(St-Bt,It+Ft-Gt,St-Bt,It+Ft-Gt,St-Bt,It+Ft-Xt,4,!0),this.v.setTripleAt(St-Bt,It-Ft+Gt,St-Bt,It-Ft+Xt,St-Bt,It-Ft+Gt,5,!0),this.v.setTripleAt(St-Bt+Gt,It-Ft,St-Bt+Gt,It-Ft,St-Bt+Xt,It-Ft,6,!0),this.v.setTripleAt(St+Bt-Gt,It-Ft,St+Bt-Xt,It-Ft,St+Bt-Gt,It-Ft,7,!0)):(this.v.setTripleAt(St-Bt,It+Ft,St-Bt+Xt,It+Ft,St-Bt,It+Ft,2),this.v.setTripleAt(St-Bt,It-Ft,St-Bt,It-Ft+Xt,St-Bt,It-Ft,3))):(this.v.setTripleAt(St+Bt,It-Ft+Gt,St+Bt,It-Ft+Xt,St+Bt,It-Ft+Gt,0,!0),Gt!==0?(this.v.setTripleAt(St+Bt-Gt,It-Ft,St+Bt-Gt,It-Ft,St+Bt-Xt,It-Ft,1,!0),this.v.setTripleAt(St-Bt+Gt,It-Ft,St-Bt+Xt,It-Ft,St-Bt+Gt,It-Ft,2,!0),this.v.setTripleAt(St-Bt,It-Ft+Gt,St-Bt,It-Ft+Gt,St-Bt,It-Ft+Xt,3,!0),this.v.setTripleAt(St-Bt,It+Ft-Gt,St-Bt,It+Ft-Xt,St-Bt,It+Ft-Gt,4,!0),this.v.setTripleAt(St-Bt+Gt,It+Ft,St-Bt+Gt,It+Ft,St-Bt+Xt,It+Ft,5,!0),this.v.setTripleAt(St+Bt-Gt,It+Ft,St+Bt-Xt,It+Ft,St+Bt-Gt,It+Ft,6,!0),this.v.setTripleAt(St+Bt,It+Ft-Gt,St+Bt,It+Ft-Gt,St+Bt,It+Ft-Xt,7,!0)):(this.v.setTripleAt(St-Bt,It-Ft,St-Bt+Xt,It-Ft,St-Bt,It-Ft,1,!0),this.v.setTripleAt(St-Bt,It+Ft,St-Bt,It+Ft-Xt,St-Bt,It+Ft,2,!0),this.v.setTripleAt(St+Bt,It+Ft,St+Bt-Xt,It+Ft,St+Bt,It+Ft,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:$},extendPrototype([DynamicPropertyContainer],Tt),Tt}();function Mt(Tt,Ct,St){var It;if(St===3||St===4){var Bt=St===3?Ct.pt:Ct.ks,Ft=Bt.k;Ft.length?It=new mt(Tt,Ct,St):It=new _(Tt,Ct,St)}else St===5?It=new bt(Tt,Ct):St===6?It=new vt(Tt,Ct):St===7&&(It=new wt(Tt,Ct));return It.k&&Tt.addDynamicProperty(It),It}function At(){return _}function Lt(){return mt}var Ht={};return Ht.getShapeProp=Mt,Ht.getConstructorFunction=At,Ht.getKeyframedConstructorFunction=Lt,Ht}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var i=Math.cos,o=Math.sin,s=Math.tan,$=Math.round;function tt(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function rt(Nt){if(Nt===0)return this;var Wt=i(Nt),or=o(Nt);return this._t(Wt,-or,0,0,or,Wt,0,0,0,0,1,0,0,0,0,1)}function st(Nt){if(Nt===0)return this;var Wt=i(Nt),or=o(Nt);return this._t(1,0,0,0,0,Wt,-or,0,0,or,Wt,0,0,0,0,1)}function _(Nt){if(Nt===0)return this;var Wt=i(Nt),or=o(Nt);return this._t(Wt,0,or,0,0,1,0,0,-or,0,Wt,0,0,0,0,1)}function ut(Nt){if(Nt===0)return this;var Wt=i(Nt),or=o(Nt);return this._t(Wt,-or,0,0,or,Wt,0,0,0,0,1,0,0,0,0,1)}function mt(Nt,Wt){return this._t(1,Wt,Nt,1,0,0)}function vt(Nt,Wt){return this.shear(s(Nt),s(Wt))}function wt(Nt,Wt){var or=i(Wt),ar=o(Wt);return this._t(or,ar,0,0,-ar,or,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,s(Nt),1,0,0,0,0,1,0,0,0,0,1)._t(or,-ar,0,0,ar,or,0,0,0,0,1,0,0,0,0,1)}function bt(Nt,Wt,or){return!or&&or!==0&&(or=1),Nt===1&&Wt===1&&or===1?this:this._t(Nt,0,0,0,0,Wt,0,0,0,0,or,0,0,0,0,1)}function Mt(Nt,Wt,or,ar,Fr,Yr,hn,mn,En,Ln,wo,Po,Ao,An,Eo,jn){return this.props[0]=Nt,this.props[1]=Wt,this.props[2]=or,this.props[3]=ar,this.props[4]=Fr,this.props[5]=Yr,this.props[6]=hn,this.props[7]=mn,this.props[8]=En,this.props[9]=Ln,this.props[10]=wo,this.props[11]=Po,this.props[12]=Ao,this.props[13]=An,this.props[14]=Eo,this.props[15]=jn,this}function At(Nt,Wt,or){return or=or||0,Nt!==0||Wt!==0||or!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Nt,Wt,or,1):this}function Lt(Nt,Wt,or,ar,Fr,Yr,hn,mn,En,Ln,wo,Po,Ao,An,Eo,jn){var bn=this.props;if(Nt===1&&Wt===0&&or===0&&ar===0&&Fr===0&&Yr===1&&hn===0&&mn===0&&En===0&&Ln===0&&wo===1&&Po===0)return bn[12]=bn[12]*Nt+bn[15]*Ao,bn[13]=bn[13]*Yr+bn[15]*An,bn[14]=bn[14]*wo+bn[15]*Eo,bn[15]*=jn,this._identityCalculated=!1,this;var Xn=bn[0],Io=bn[1],gs=bn[2],zo=bn[3],So=bn[4],hs=bn[5],Mo=bn[6],ys=bn[7],Jo=bn[8],Ko=bn[9],ws=bn[10],is=bn[11],Oo=bn[12],es=bn[13],us=bn[14],rs=bn[15];return bn[0]=Xn*Nt+Io*Fr+gs*En+zo*Ao,bn[1]=Xn*Wt+Io*Yr+gs*Ln+zo*An,bn[2]=Xn*or+Io*hn+gs*wo+zo*Eo,bn[3]=Xn*ar+Io*mn+gs*Po+zo*jn,bn[4]=So*Nt+hs*Fr+Mo*En+ys*Ao,bn[5]=So*Wt+hs*Yr+Mo*Ln+ys*An,bn[6]=So*or+hs*hn+Mo*wo+ys*Eo,bn[7]=So*ar+hs*mn+Mo*Po+ys*jn,bn[8]=Jo*Nt+Ko*Fr+ws*En+is*Ao,bn[9]=Jo*Wt+Ko*Yr+ws*Ln+is*An,bn[10]=Jo*or+Ko*hn+ws*wo+is*Eo,bn[11]=Jo*ar+Ko*mn+ws*Po+is*jn,bn[12]=Oo*Nt+es*Fr+us*En+rs*Ao,bn[13]=Oo*Wt+es*Yr+us*Ln+rs*An,bn[14]=Oo*or+es*hn+us*wo+rs*Eo,bn[15]=Oo*ar+es*mn+us*Po+rs*jn,this._identityCalculated=!1,this}function Ht(Nt){var Wt=Nt.props;return this.transform(Wt[0],Wt[1],Wt[2],Wt[3],Wt[4],Wt[5],Wt[6],Wt[7],Wt[8],Wt[9],Wt[10],Wt[11],Wt[12],Wt[13],Wt[14],Wt[15])}function Tt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ct(Nt){for(var Wt=0;Wt<16;){if(Nt.props[Wt]!==this.props[Wt])return!1;Wt+=1}return!0}function St(Nt){var Wt;for(Wt=0;Wt<16;Wt+=1)Nt.props[Wt]=this.props[Wt];return Nt}function It(Nt){var Wt;for(Wt=0;Wt<16;Wt+=1)this.props[Wt]=Nt[Wt]}function Bt(Nt,Wt,or){return{x:Nt*this.props[0]+Wt*this.props[4]+or*this.props[8]+this.props[12],y:Nt*this.props[1]+Wt*this.props[5]+or*this.props[9]+this.props[13],z:Nt*this.props[2]+Wt*this.props[6]+or*this.props[10]+this.props[14]}}function Ft(Nt,Wt,or){return Nt*this.props[0]+Wt*this.props[4]+or*this.props[8]+this.props[12]}function Gt(Nt,Wt,or){return Nt*this.props[1]+Wt*this.props[5]+or*this.props[9]+this.props[13]}function Xt(Nt,Wt,or){return Nt*this.props[2]+Wt*this.props[6]+or*this.props[10]+this.props[14]}function ir(){var Nt=this.props[0]*this.props[5]-this.props[1]*this.props[4],Wt=this.props[5]/Nt,or=-this.props[1]/Nt,ar=-this.props[4]/Nt,Fr=this.props[0]/Nt,Yr=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Nt,hn=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Nt,mn=new Matrix;return mn.props[0]=Wt,mn.props[1]=or,mn.props[4]=ar,mn.props[5]=Fr,mn.props[12]=Yr,mn.props[13]=hn,mn}function $r(Nt){var Wt=this.getInverseMatrix();return Wt.applyToPointArray(Nt[0],Nt[1],Nt[2]||0)}function Tr(Nt){var Wt,or=Nt.length,ar=[];for(Wt=0;Wt<or;Wt+=1)ar[Wt]=$r(Nt[Wt]);return ar}function xr(Nt,Wt,or){var ar=createTypedArray("float32",6);if(this.isIdentity())ar[0]=Nt[0],ar[1]=Nt[1],ar[2]=Wt[0],ar[3]=Wt[1],ar[4]=or[0],ar[5]=or[1];else{var Fr=this.props[0],Yr=this.props[1],hn=this.props[4],mn=this.props[5],En=this.props[12],Ln=this.props[13];ar[0]=Nt[0]*Fr+Nt[1]*hn+En,ar[1]=Nt[0]*Yr+Nt[1]*mn+Ln,ar[2]=Wt[0]*Fr+Wt[1]*hn+En,ar[3]=Wt[0]*Yr+Wt[1]*mn+Ln,ar[4]=or[0]*Fr+or[1]*hn+En,ar[5]=or[0]*Yr+or[1]*mn+Ln}return ar}function Xr(Nt,Wt,or){var ar;return this.isIdentity()?ar=[Nt,Wt,or]:ar=[Nt*this.props[0]+Wt*this.props[4]+or*this.props[8]+this.props[12],Nt*this.props[1]+Wt*this.props[5]+or*this.props[9]+this.props[13],Nt*this.props[2]+Wt*this.props[6]+or*this.props[10]+this.props[14]],ar}function ln(Nt,Wt){if(this.isIdentity())return Nt+","+Wt;var or=this.props;return Math.round((Nt*or[0]+Wt*or[4]+or[12])*100)/100+","+Math.round((Nt*or[1]+Wt*or[5]+or[13])*100)/100}function zr(){for(var Nt=0,Wt=this.props,or="matrix3d(",ar=1e4;Nt<16;)or+=$(Wt[Nt]*ar)/ar,or+=Nt===15?")":",",Nt+=1;return or}function hr(Nt){var Wt=1e4;return Nt<1e-6&&Nt>0||Nt>-1e-6&&Nt<0?$(Nt*Wt)/Wt:Nt}function Er(){var Nt=this.props,Wt=hr(Nt[0]),or=hr(Nt[1]),ar=hr(Nt[4]),Fr=hr(Nt[5]),Yr=hr(Nt[12]),hn=hr(Nt[13]);return"matrix("+Wt+","+or+","+ar+","+Fr+","+Yr+","+hn+")"}return function(){this.reset=tt,this.rotate=rt,this.rotateX=st,this.rotateY=_,this.rotateZ=ut,this.skew=vt,this.skewFromAxis=wt,this.shear=mt,this.scale=bt,this.setTransform=Mt,this.translate=At,this.transform=Lt,this.multiply=Ht,this.applyToPoint=Bt,this.applyToX=Ft,this.applyToY=Gt,this.applyToZ=Xt,this.applyToPointArray=Xr,this.applyToTriplePoints=xr,this.applyToPointStringified=ln,this.toCSS=zr,this.to2dCSS=Er,this.clone=St,this.cloneFromProps=It,this.equals=Ct,this.inversePoints=Tr,this.inversePoint=$r,this.getInverseMatrix=ir,this._t=this.transform,this.isIdentity=Tt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(s){return typeof s}:_typeof$3=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$3(i)}var lottie={};function setLocation(i){setLocationHref(i)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(i){setSubframeEnabled(i)}function setPrefix(i){setIdPrefix(i)}function loadAnimation(i){return animationManager.loadAnimation(i)}function setQuality(i){if(typeof i=="string")switch(i){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(i)&&i>1&&setDefaultCurveSegments(i)}function inBrowser(){return typeof navigator<"u"}function installPlugin(i,o){i==="expressions"&&setExpressionsPlugin(o)}function getFactory(i){switch(i){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(i){for(var o=queryString.split("&"),s=0;s<o.length;s+=1){var $=o[s].split("=");if(decodeURIComponent($[0])==i)return decodeURIComponent($[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(i){}var ShapeModifiers=function(){var i={},o={};i.registerModifier=s,i.getModifier=$;function s(tt,rt){o[tt]||(o[tt]=rt)}function $(tt,rt,st){return new o[tt](rt,st)}return i}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(i){if(!this.closed){i.sh.container.addDynamicProperty(i.sh);var o={shape:i.sh,data:i,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(o),this.addShapeToModifier(o),this._isAnimated&&i.setAsAnimated()}},ShapeModifier.prototype.init=function(i,o){this.shapes=[],this.elem=i,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,o),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(i,o){this.s=PropertyFactory.getProp(i,o.s,0,.01,this),this.e=PropertyFactory.getProp(i,o.e,0,.01,this),this.o=PropertyFactory.getProp(i,o.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=o.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(i){i.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(i,o,s,$,tt){var rt=[];o<=1?rt.push({s:i,e:o}):i>=1?rt.push({s:i-1,e:o-1}):(rt.push({s:i,e:1}),rt.push({s:0,e:o-1}));var st=[],_,ut=rt.length,mt;for(_=0;_<ut;_+=1)if(mt=rt[_],!(mt.e*tt<$||mt.s*tt>$+s)){var vt,wt;mt.s*tt<=$?vt=0:vt=(mt.s*tt-$)/s,mt.e*tt>=$+s?wt=1:wt=(mt.e*tt-$)/s,st.push([vt,wt])}return st.length||st.push([0,0]),st},TrimModifier.prototype.releasePathsData=function(i){var o,s=i.length;for(o=0;o<s;o+=1)segmentsLengthPool.release(i[o]);return i.length=0,i},TrimModifier.prototype.processShapes=function(i){var o,s;if(this._mdf||i){var $=this.o.v%360/360;if($<0&&($+=1),this.s.v>1?o=1+$:this.s.v<0?o=0+$:o=this.s.v+$,this.e.v>1?s=1+$:this.e.v<0?s=0+$:s=this.e.v+$,o>s){var tt=o;o=s,s=tt}o=Math.round(o*1e4)*1e-4,s=Math.round(s*1e4)*1e-4,this.sValue=o,this.eValue=s}else o=this.sValue,s=this.eValue;var rt,st,_=this.shapes.length,ut,mt,vt,wt,bt,Mt=0;if(s===o)for(st=0;st<_;st+=1)this.shapes[st].localShapeCollection.releaseShapes(),this.shapes[st].shape._mdf=!0,this.shapes[st].shape.paths=this.shapes[st].localShapeCollection,this._mdf&&(this.shapes[st].pathsData.length=0);else if(s===1&&o===0||s===0&&o===1){if(this._mdf)for(st=0;st<_;st+=1)this.shapes[st].pathsData.length=0,this.shapes[st].shape._mdf=!0}else{var At=[],Lt,Ht;for(st=0;st<_;st+=1)if(Lt=this.shapes[st],!Lt.shape._mdf&&!this._mdf&&!i&&this.m!==2)Lt.shape.paths=Lt.localShapeCollection;else{if(rt=Lt.shape.paths,mt=rt._length,bt=0,!Lt.shape._mdf&&Lt.pathsData.length)bt=Lt.totalShapeLength;else{for(vt=this.releasePathsData(Lt.pathsData),ut=0;ut<mt;ut+=1)wt=bez.getSegmentsLength(rt.shapes[ut]),vt.push(wt),bt+=wt.totalLength;Lt.totalShapeLength=bt,Lt.pathsData=vt}Mt+=bt,Lt.shape._mdf=!0}var Tt=o,Ct=s,St=0,It;for(st=_-1;st>=0;st-=1)if(Lt=this.shapes[st],Lt.shape._mdf){for(Ht=Lt.localShapeCollection,Ht.releaseShapes(),this.m===2&&_>1?(It=this.calculateShapeEdges(o,s,Lt.totalShapeLength,St,Mt),St+=Lt.totalShapeLength):It=[[Tt,Ct]],mt=It.length,ut=0;ut<mt;ut+=1){Tt=It[ut][0],Ct=It[ut][1],At.length=0,Ct<=1?At.push({s:Lt.totalShapeLength*Tt,e:Lt.totalShapeLength*Ct}):Tt>=1?At.push({s:Lt.totalShapeLength*(Tt-1),e:Lt.totalShapeLength*(Ct-1)}):(At.push({s:Lt.totalShapeLength*Tt,e:Lt.totalShapeLength}),At.push({s:0,e:Lt.totalShapeLength*(Ct-1)}));var Bt=this.addShapes(Lt,At[0]);if(At[0].s!==At[0].e){if(At.length>1){var Ft=Lt.shape.paths.shapes[Lt.shape.paths._length-1];if(Ft.c){var Gt=Bt.pop();this.addPaths(Bt,Ht),Bt=this.addShapes(Lt,At[1],Gt)}else this.addPaths(Bt,Ht),Bt=this.addShapes(Lt,At[1])}this.addPaths(Bt,Ht)}}Lt.shape.paths=Ht}}},TrimModifier.prototype.addPaths=function(i,o){var s,$=i.length;for(s=0;s<$;s+=1)o.addShape(i[s])},TrimModifier.prototype.addSegment=function(i,o,s,$,tt,rt,st){tt.setXYAt(o[0],o[1],"o",rt),tt.setXYAt(s[0],s[1],"i",rt+1),st&&tt.setXYAt(i[0],i[1],"v",rt),tt.setXYAt($[0],$[1],"v",rt+1)},TrimModifier.prototype.addSegmentFromArray=function(i,o,s,$){o.setXYAt(i[1],i[5],"o",s),o.setXYAt(i[2],i[6],"i",s+1),$&&o.setXYAt(i[0],i[4],"v",s),o.setXYAt(i[3],i[7],"v",s+1)},TrimModifier.prototype.addShapes=function(i,o,s){var $=i.pathsData,tt=i.shape.paths.shapes,rt,st=i.shape.paths._length,_,ut,mt=0,vt,wt,bt,Mt,At=[],Lt,Ht=!0;for(s?(wt=s._length,Lt=s._length):(s=shapePool.newElement(),wt=0,Lt=0),At.push(s),rt=0;rt<st;rt+=1){for(bt=$[rt].lengths,s.c=tt[rt].c,ut=tt[rt].c?bt.length:bt.length+1,_=1;_<ut;_+=1)if(vt=bt[_-1],mt+vt.addedLength<o.s)mt+=vt.addedLength,s.c=!1;else if(mt>o.e){s.c=!1;break}else o.s<=mt&&o.e>=mt+vt.addedLength?(this.addSegment(tt[rt].v[_-1],tt[rt].o[_-1],tt[rt].i[_],tt[rt].v[_],s,wt,Ht),Ht=!1):(Mt=bez.getNewSegment(tt[rt].v[_-1],tt[rt].v[_],tt[rt].o[_-1],tt[rt].i[_],(o.s-mt)/vt.addedLength,(o.e-mt)/vt.addedLength,bt[_-1]),this.addSegmentFromArray(Mt,s,wt,Ht),Ht=!1,s.c=!1),mt+=vt.addedLength,wt+=1;if(tt[rt].c&&bt.length){if(vt=bt[_-1],mt<=o.e){var Tt=bt[_-1].addedLength;o.s<=mt&&o.e>=mt+Tt?(this.addSegment(tt[rt].v[_-1],tt[rt].o[_-1],tt[rt].i[0],tt[rt].v[0],s,wt,Ht),Ht=!1):(Mt=bez.getNewSegment(tt[rt].v[_-1],tt[rt].v[0],tt[rt].o[_-1],tt[rt].i[0],(o.s-mt)/Tt,(o.e-mt)/Tt,bt[_-1]),this.addSegmentFromArray(Mt,s,wt,Ht),Ht=!1,s.c=!1)}else s.c=!1;mt+=vt.addedLength,wt+=1}if(s._length&&(s.setXYAt(s.v[Lt][0],s.v[Lt][1],"i",Lt),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),mt>o.e)break;rt<st-1&&(s=shapePool.newElement(),Ht=!0,At.push(s),wt=0)}return At};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(i,o){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,o.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(i,o){var s=o/100,$=[0,0],tt=i._length,rt=0;for(rt=0;rt<tt;rt+=1)$[0]+=i.v[rt][0],$[1]+=i.v[rt][1];$[0]/=tt,$[1]/=tt;var st=shapePool.newElement();st.c=i.c;var _,ut,mt,vt,wt,bt;for(rt=0;rt<tt;rt+=1)_=i.v[rt][0]+($[0]-i.v[rt][0])*s,ut=i.v[rt][1]+($[1]-i.v[rt][1])*s,mt=i.o[rt][0]+($[0]-i.o[rt][0])*-s,vt=i.o[rt][1]+($[1]-i.o[rt][1])*-s,wt=i.i[rt][0]+($[0]-i.i[rt][0])*-s,bt=i.i[rt][1]+($[1]-i.i[rt][1])*-s,st.setTripleAt(_,ut,mt,vt,wt,bt,rt);return st},PuckerAndBloatModifier.prototype.processShapes=function(i){var o,s,$=this.shapes.length,tt,rt,st=this.amount.v;if(st!==0){var _,ut;for(s=0;s<$;s+=1){if(_=this.shapes[s],ut=_.localShapeCollection,!(!_.shape._mdf&&!this._mdf&&!i))for(ut.releaseShapes(),_.shape._mdf=!0,o=_.shape.paths.shapes,rt=_.shape.paths._length,tt=0;tt<rt;tt+=1)ut.addShape(this.processPath(o[tt],st));_.shape.paths=_.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var i=[0,0];function o(ut){var mt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||mt,this.a&&ut.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&ut.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&ut.skewFromAxis(-this.sk.v,this.sa.v),this.r?ut.rotate(-this.r.v):ut.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?ut.translate(this.px.v,this.py.v,-this.pz.v):ut.translate(this.px.v,this.py.v,0):ut.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function s(ut){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||ut){var mt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var vt,wt;if(mt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(vt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/mt,0),wt=this.p.getValueAtTime(this.p.keyframes[0].t/mt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(vt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/mt,0),wt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/mt,0)):(vt=this.p.pv,wt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/mt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){vt=[],wt=[];var bt=this.px,Mt=this.py;bt._caching.lastFrame+bt.offsetTime<=bt.keyframes[0].t?(vt[0]=bt.getValueAtTime((bt.keyframes[0].t+.01)/mt,0),vt[1]=Mt.getValueAtTime((Mt.keyframes[0].t+.01)/mt,0),wt[0]=bt.getValueAtTime(bt.keyframes[0].t/mt,0),wt[1]=Mt.getValueAtTime(Mt.keyframes[0].t/mt,0)):bt._caching.lastFrame+bt.offsetTime>=bt.keyframes[bt.keyframes.length-1].t?(vt[0]=bt.getValueAtTime(bt.keyframes[bt.keyframes.length-1].t/mt,0),vt[1]=Mt.getValueAtTime(Mt.keyframes[Mt.keyframes.length-1].t/mt,0),wt[0]=bt.getValueAtTime((bt.keyframes[bt.keyframes.length-1].t-.01)/mt,0),wt[1]=Mt.getValueAtTime((Mt.keyframes[Mt.keyframes.length-1].t-.01)/mt,0)):(vt=[bt.pv,Mt.pv],wt[0]=bt.getValueAtTime((bt._caching.lastFrame+bt.offsetTime-.01)/mt,bt.offsetTime),wt[1]=Mt.getValueAtTime((Mt._caching.lastFrame+Mt.offsetTime-.01)/mt,Mt.offsetTime))}else wt=i,vt=wt;this.v.rotate(-Math.atan2(vt[1]-wt[1],vt[0]-wt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function $(){if(!this.a.k)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function tt(){}function rt(ut){this._addDynamicProperty(ut),this.elem.addDynamicProperty(ut),this._isDirty=!0}function st(ut,mt,vt){if(this.elem=ut,this.frameId=-1,this.propType="transform",this.data=mt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(vt||ut),mt.p&&mt.p.s?(this.px=PropertyFactory.getProp(ut,mt.p.x,0,0,this),this.py=PropertyFactory.getProp(ut,mt.p.y,0,0,this),mt.p.z&&(this.pz=PropertyFactory.getProp(ut,mt.p.z,0,0,this))):this.p=PropertyFactory.getProp(ut,mt.p||{k:[0,0,0]},1,0,this),mt.rx){if(this.rx=PropertyFactory.getProp(ut,mt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(ut,mt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(ut,mt.rz,0,degToRads,this),mt.or.k[0].ti){var wt,bt=mt.or.k.length;for(wt=0;wt<bt;wt+=1)mt.or.k[wt].to=null,mt.or.k[wt].ti=null}this.or=PropertyFactory.getProp(ut,mt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(ut,mt.r||{k:0},0,degToRads,this);mt.sk&&(this.sk=PropertyFactory.getProp(ut,mt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(ut,mt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(ut,mt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(ut,mt.s||{k:[100,100,100]},1,.01,this),mt.o?this.o=PropertyFactory.getProp(ut,mt.o,0,.01,ut):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}st.prototype={applyToMatrix:o,getValue:s,precalculateMatrix:$,autoOrient:tt},extendPrototype([DynamicPropertyContainer],st),st.prototype.addDynamicProperty=rt,st.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function _(ut,mt,vt){return new st(ut,mt,vt)}return{getTransformProperty:_}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(i,o){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(i,o.c,0,null,this),this.o=PropertyFactory.getProp(i,o.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(i,o.tr,this),this.so=PropertyFactory.getProp(i,o.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(i,o.tr.eo,0,.01,this),this.data=o,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(i,o,s,$,tt,rt){var st=rt?-1:1,_=$.s.v[0]+(1-$.s.v[0])*(1-tt),ut=$.s.v[1]+(1-$.s.v[1])*(1-tt);i.translate($.p.v[0]*st*tt,$.p.v[1]*st*tt,$.p.v[2]),o.translate(-$.a.v[0],-$.a.v[1],$.a.v[2]),o.rotate(-$.r.v*st*tt),o.translate($.a.v[0],$.a.v[1],$.a.v[2]),s.translate(-$.a.v[0],-$.a.v[1],$.a.v[2]),s.scale(rt?1/_:_,rt?1/ut:ut),s.translate($.a.v[0],$.a.v[1],$.a.v[2])},RepeaterModifier.prototype.init=function(i,o,s,$){for(this.elem=i,this.arr=o,this.pos=s,this.elemsData=$,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,o[s]);s>0;)s-=1,this._elements.unshift(o[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(i){var o,s=i.length;for(o=0;o<s;o+=1)i[o]._processed=!1,i[o].ty==="gr"&&this.resetElements(i[o].it)},RepeaterModifier.prototype.cloneElements=function(i){var o=JSON.parse(JSON.stringify(i));return this.resetElements(o),o},RepeaterModifier.prototype.changeGroupRender=function(i,o){var s,$=i.length;for(s=0;s<$;s+=1)i[s]._render=o,i[s].ty==="gr"&&this.changeGroupRender(i[s].it,o)},RepeaterModifier.prototype.processShapes=function(i){var o,s,$,tt,rt,st=!1;if(this._mdf||i){var _=Math.ceil(this.c.v);if(this._groups.length<_){for(;this._groups.length<_;){var ut={it:this.cloneElements(this._elements),ty:"gr"};ut.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,ut),this._groups.splice(0,0,ut),this._currentCopies+=1}this.elem.reloadShapes(),st=!0}rt=0;var mt;for($=0;$<=this._groups.length-1;$+=1){if(mt=rt<_,this._groups[$]._render=mt,this.changeGroupRender(this._groups[$].it,mt),!mt){var vt=this.elemsData[$].it,wt=vt[vt.length-1];wt.transform.op.v!==0?(wt.transform.op._mdf=!0,wt.transform.op.v=0):wt.transform.op._mdf=!1}rt+=1}this._currentCopies=_;var bt=this.o.v,Mt=bt%1,At=bt>0?Math.floor(bt):Math.ceil(bt),Lt=this.pMatrix.props,Ht=this.rMatrix.props,Tt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ct=0;if(bt>0){for(;Ct<At;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ct+=1;Mt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Mt,!1),Ct+=Mt)}else if(bt<0){for(;Ct>At;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ct-=1;Mt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Mt,!0),Ct-=Mt)}$=this.data.m===1?0:this._currentCopies-1,tt=this.data.m===1?1:-1,rt=this._currentCopies;for(var St,It;rt;){if(o=this.elemsData[$].it,s=o[o.length-1].transform.mProps.v.props,It=s.length,o[o.length-1].transform.mProps._mdf=!0,o[o.length-1].transform.op._mdf=!0,o[o.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*($/(this._currentCopies-1)),Ct!==0){for(($!==0&&tt===1||$!==this._currentCopies-1&&tt===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Ht[8],Ht[9],Ht[10],Ht[11],Ht[12],Ht[13],Ht[14],Ht[15]),this.matrix.transform(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4],Tt[5],Tt[6],Tt[7],Tt[8],Tt[9],Tt[10],Tt[11],Tt[12],Tt[13],Tt[14],Tt[15]),this.matrix.transform(Lt[0],Lt[1],Lt[2],Lt[3],Lt[4],Lt[5],Lt[6],Lt[7],Lt[8],Lt[9],Lt[10],Lt[11],Lt[12],Lt[13],Lt[14],Lt[15]),St=0;St<It;St+=1)s[St]=this.matrix.props[St];this.matrix.reset()}else for(this.matrix.reset(),St=0;St<It;St+=1)s[St]=this.matrix.props[St];Ct+=1,rt-=1,$+=tt}}else for(rt=this._currentCopies,$=0,tt=1;rt;)o=this.elemsData[$].it,s=o[o.length-1].transform.mProps.v.props,o[o.length-1].transform.mProps._mdf=!1,o[o.length-1].transform.op._mdf=!1,rt-=1,$+=tt;return st},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(i,o){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(i,o.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(i,o){var s=shapePool.newElement();s.c=i.c;var $,tt=i._length,rt,st,_,ut,mt,vt,wt=0,bt,Mt,At,Lt,Ht,Tt;for($=0;$<tt;$+=1)rt=i.v[$],_=i.o[$],st=i.i[$],rt[0]===_[0]&&rt[1]===_[1]&&rt[0]===st[0]&&rt[1]===st[1]?($===0||$===tt-1)&&!i.c?(s.setTripleAt(rt[0],rt[1],_[0],_[1],st[0],st[1],wt),wt+=1):($===0?ut=i.v[tt-1]:ut=i.v[$-1],mt=Math.sqrt(Math.pow(rt[0]-ut[0],2)+Math.pow(rt[1]-ut[1],2)),vt=mt?Math.min(mt/2,o)/mt:0,Ht=rt[0]+(ut[0]-rt[0])*vt,bt=Ht,Tt=rt[1]-(rt[1]-ut[1])*vt,Mt=Tt,At=bt-(bt-rt[0])*roundCorner,Lt=Mt-(Mt-rt[1])*roundCorner,s.setTripleAt(bt,Mt,At,Lt,Ht,Tt,wt),wt+=1,$===tt-1?ut=i.v[0]:ut=i.v[$+1],mt=Math.sqrt(Math.pow(rt[0]-ut[0],2)+Math.pow(rt[1]-ut[1],2)),vt=mt?Math.min(mt/2,o)/mt:0,At=rt[0]+(ut[0]-rt[0])*vt,bt=At,Lt=rt[1]+(ut[1]-rt[1])*vt,Mt=Lt,Ht=bt-(bt-rt[0])*roundCorner,Tt=Mt-(Mt-rt[1])*roundCorner,s.setTripleAt(bt,Mt,At,Lt,Ht,Tt,wt),wt+=1):(s.setTripleAt(i.v[$][0],i.v[$][1],i.o[$][0],i.o[$][1],i.i[$][0],i.i[$][1],wt),wt+=1);return s},RoundCornersModifier.prototype.processShapes=function(i){var o,s,$=this.shapes.length,tt,rt,st=this.rd.v;if(st!==0){var _,ut;for(s=0;s<$;s+=1){if(_=this.shapes[s],ut=_.localShapeCollection,!(!_.shape._mdf&&!this._mdf&&!i))for(ut.releaseShapes(),_.shape._mdf=!0,o=_.shape.paths.shapes,rt=_.shape.paths._length,tt=0;tt<rt;tt+=1)ut.addShape(this.processPath(o[tt],st));_.shape.paths=_.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(i,o){return Math.abs(i-o)*1e5<=Math.min(Math.abs(i),Math.abs(o))}function floatZero(i){return Math.abs(i)<=1e-5}function lerp(i,o,s){return i*(1-s)+o*s}function lerpPoint(i,o,s){return[lerp(i[0],o[0],s),lerp(i[1],o[1],s)]}function quadRoots(i,o,s){if(i===0)return[];var $=o*o-4*i*s;if($<0)return[];var tt=-o/(2*i);if($===0)return[tt];var rt=Math.sqrt($)/(2*i);return[tt-rt,tt+rt]}function polynomialCoefficients(i,o,s,$){return[-i+3*o-3*s+$,3*i-6*o+3*s,-3*i+3*o,i]}function singlePoint(i){return new PolynomialBezier(i,i,i,i,!1)}function PolynomialBezier(i,o,s,$,tt){tt&&pointEqual(i,o)&&(o=lerpPoint(i,$,1/3)),tt&&pointEqual(s,$)&&(s=lerpPoint(i,$,2/3));var rt=polynomialCoefficients(i[0],o[0],s[0],$[0]),st=polynomialCoefficients(i[1],o[1],s[1],$[1]);this.a=[rt[0],st[0]],this.b=[rt[1],st[1]],this.c=[rt[2],st[2]],this.d=[rt[3],st[3]],this.points=[i,o,s,$]}PolynomialBezier.prototype.point=function(i){return[((this.a[0]*i+this.b[0])*i+this.c[0])*i+this.d[0],((this.a[1]*i+this.b[1])*i+this.c[1])*i+this.d[1]]},PolynomialBezier.prototype.derivative=function(i){return[(3*i*this.a[0]+2*this.b[0])*i+this.c[0],(3*i*this.a[1]+2*this.b[1])*i+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(i){var o=this.derivative(i);return Math.atan2(o[1],o[0])},PolynomialBezier.prototype.normalAngle=function(i){var o=this.derivative(i);return Math.atan2(o[0],o[1])},PolynomialBezier.prototype.inflectionPoints=function(){var i=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(i))return[];var o=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/i,s=o*o-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/i;if(s<0)return[];var $=Math.sqrt(s);return floatZero($)?$>0&&$<1?[o]:[]:[o-$,o+$].filter(function(tt){return tt>0&&tt<1})},PolynomialBezier.prototype.split=function(i){if(i<=0)return[singlePoint(this.points[0]),this];if(i>=1)return[this,singlePoint(this.points[this.points.length-1])];var o=lerpPoint(this.points[0],this.points[1],i),s=lerpPoint(this.points[1],this.points[2],i),$=lerpPoint(this.points[2],this.points[3],i),tt=lerpPoint(o,s,i),rt=lerpPoint(s,$,i),st=lerpPoint(tt,rt,i);return[new PolynomialBezier(this.points[0],o,tt,st,!0),new PolynomialBezier(st,rt,$,this.points[3],!0)]};function extrema(i,o){var s=i.points[0][o],$=i.points[i.points.length-1][o];if(s>$){var tt=$;$=s,s=tt}for(var rt=quadRoots(3*i.a[o],2*i.b[o],i.c[o]),st=0;st<rt.length;st+=1)if(rt[st]>0&&rt[st]<1){var _=i.point(rt[st])[o];_<s?s=_:_>$&&($=_)}return{min:s,max:$}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var i=this.bounds();return{left:i.x.min,right:i.x.max,top:i.y.min,bottom:i.y.max,width:i.x.max-i.x.min,height:i.y.max-i.y.min,cx:(i.x.max+i.x.min)/2,cy:(i.y.max+i.y.min)/2}};function intersectData(i,o,s){var $=i.boundingBox();return{cx:$.cx,cy:$.cy,width:$.width,height:$.height,bez:i,t:(o+s)/2,t1:o,t2:s}}function splitData(i){var o=i.bez.split(.5);return[intersectData(o[0],i.t1,i.t),intersectData(o[1],i.t,i.t2)]}function boxIntersect(i,o){return Math.abs(i.cx-o.cx)*2<i.width+o.width&&Math.abs(i.cy-o.cy)*2<i.height+o.height}function intersectsImpl(i,o,s,$,tt,rt){if(boxIntersect(i,o)){if(s>=rt||i.width<=$&&i.height<=$&&o.width<=$&&o.height<=$){tt.push([i.t,o.t]);return}var st=splitData(i),_=splitData(o);intersectsImpl(st[0],_[0],s+1,$,tt,rt),intersectsImpl(st[0],_[1],s+1,$,tt,rt),intersectsImpl(st[1],_[0],s+1,$,tt,rt),intersectsImpl(st[1],_[1],s+1,$,tt,rt)}}PolynomialBezier.prototype.intersections=function(i,o,s){o===void 0&&(o=2),s===void 0&&(s=7);var $=[];return intersectsImpl(intersectData(this,0,1),intersectData(i,0,1),0,o,$,s),$},PolynomialBezier.shapeSegment=function(i,o){var s=(o+1)%i.length();return new PolynomialBezier(i.v[o],i.o[o],i.i[s],i.v[s],!0)},PolynomialBezier.shapeSegmentInverted=function(i,o){var s=(o+1)%i.length();return new PolynomialBezier(i.v[s],i.i[s],i.o[o],i.v[o],!0)};function crossProduct(i,o){return[i[1]*o[2]-i[2]*o[1],i[2]*o[0]-i[0]*o[2],i[0]*o[1]-i[1]*o[0]]}function lineIntersection(i,o,s,$){var tt=[i[0],i[1],1],rt=[o[0],o[1],1],st=[s[0],s[1],1],_=[$[0],$[1],1],ut=crossProduct(crossProduct(tt,rt),crossProduct(st,_));return floatZero(ut[2])?null:[ut[0]/ut[2],ut[1]/ut[2]]}function polarOffset(i,o,s){return[i[0]+Math.cos(o)*s,i[1]-Math.sin(o)*s]}function pointDistance(i,o){return Math.hypot(i[0]-o[0],i[1]-o[1])}function pointEqual(i,o){return floatEqual(i[0],o[0])&&floatEqual(i[1],o[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(i,o){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(i,o.s,0,null,this),this.frequency=PropertyFactory.getProp(i,o.r,0,null,this),this.pointsType=PropertyFactory.getProp(i,o.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(i,o,s,$,tt,rt,st){var _=s-Math.PI/2,ut=s+Math.PI/2,mt=o[0]+Math.cos(s)*$*tt,vt=o[1]-Math.sin(s)*$*tt;i.setTripleAt(mt,vt,mt+Math.cos(_)*rt,vt-Math.sin(_)*rt,mt+Math.cos(ut)*st,vt-Math.sin(ut)*st,i.length())}function getPerpendicularVector(i,o){var s=[o[0]-i[0],o[1]-i[1]],$=-Math.PI*.5,tt=[Math.cos($)*s[0]-Math.sin($)*s[1],Math.sin($)*s[0]+Math.cos($)*s[1]];return tt}function getProjectingAngle(i,o){var s=o===0?i.length()-1:o-1,$=(o+1)%i.length(),tt=i.v[s],rt=i.v[$],st=getPerpendicularVector(tt,rt);return Math.atan2(0,1)-Math.atan2(st[1],st[0])}function zigZagCorner(i,o,s,$,tt,rt,st){var _=getProjectingAngle(o,s),ut=o.v[s%o._length],mt=o.v[s===0?o._length-1:s-1],vt=o.v[(s+1)%o._length],wt=rt===2?Math.sqrt(Math.pow(ut[0]-mt[0],2)+Math.pow(ut[1]-mt[1],2)):0,bt=rt===2?Math.sqrt(Math.pow(ut[0]-vt[0],2)+Math.pow(ut[1]-vt[1],2)):0;setPoint(i,o.v[s%o._length],_,st,$,bt/((tt+1)*2),wt/((tt+1)*2))}function zigZagSegment(i,o,s,$,tt,rt){for(var st=0;st<$;st+=1){var _=(st+1)/($+1),ut=tt===2?Math.sqrt(Math.pow(o.points[3][0]-o.points[0][0],2)+Math.pow(o.points[3][1]-o.points[0][1],2)):0,mt=o.normalAngle(_),vt=o.point(_);setPoint(i,vt,mt,rt,s,ut/(($+1)*2),ut/(($+1)*2)),rt=-rt}return rt}ZigZagModifier.prototype.processPath=function(i,o,s,$){var tt=i._length,rt=shapePool.newElement();if(rt.c=i.c,i.c||(tt-=1),tt===0)return rt;var st=-1,_=PolynomialBezier.shapeSegment(i,0);zigZagCorner(rt,i,0,o,s,$,st);for(var ut=0;ut<tt;ut+=1)st=zigZagSegment(rt,_,o,s,$,-st),ut===tt-1&&!i.c?_=null:_=PolynomialBezier.shapeSegment(i,(ut+1)%tt),zigZagCorner(rt,i,ut+1,o,s,$,st);return rt},ZigZagModifier.prototype.processShapes=function(i){var o,s,$=this.shapes.length,tt,rt,st=this.amplitude.v,_=Math.max(0,Math.round(this.frequency.v)),ut=this.pointsType.v;if(st!==0){var mt,vt;for(s=0;s<$;s+=1){if(mt=this.shapes[s],vt=mt.localShapeCollection,!(!mt.shape._mdf&&!this._mdf&&!i))for(vt.releaseShapes(),mt.shape._mdf=!0,o=mt.shape.paths.shapes,rt=mt.shape.paths._length,tt=0;tt<rt;tt+=1)vt.addShape(this.processPath(o[tt],st,_,ut));mt.shape.paths=mt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(i,o,s){var $=Math.atan2(o[0]-i[0],o[1]-i[1]);return[polarOffset(i,$,s),polarOffset(o,$,s)]}function offsetSegment(i,o){var s,$,tt,rt,st,_,ut;ut=linearOffset(i.points[0],i.points[1],o),s=ut[0],$=ut[1],ut=linearOffset(i.points[1],i.points[2],o),tt=ut[0],rt=ut[1],ut=linearOffset(i.points[2],i.points[3],o),st=ut[0],_=ut[1];var mt=lineIntersection(s,$,tt,rt);mt===null&&(mt=$);var vt=lineIntersection(st,_,tt,rt);return vt===null&&(vt=st),new PolynomialBezier(s,mt,vt,_)}function joinLines(i,o,s,$,tt){var rt=o.points[3],st=s.points[0];if($===3||pointEqual(rt,st))return rt;if($===2){var _=-o.tangentAngle(1),ut=-s.tangentAngle(0)+Math.PI,mt=lineIntersection(rt,polarOffset(rt,_+Math.PI/2,100),st,polarOffset(st,_+Math.PI/2,100)),vt=mt?pointDistance(mt,rt):pointDistance(rt,st)/2,wt=polarOffset(rt,_,2*vt*roundCorner);return i.setXYAt(wt[0],wt[1],"o",i.length()-1),wt=polarOffset(st,ut,2*vt*roundCorner),i.setTripleAt(st[0],st[1],st[0],st[1],wt[0],wt[1],i.length()),st}var bt=pointEqual(rt,o.points[2])?o.points[0]:o.points[2],Mt=pointEqual(st,s.points[1])?s.points[3]:s.points[1],At=lineIntersection(bt,rt,st,Mt);return At&&pointDistance(At,rt)<tt?(i.setTripleAt(At[0],At[1],At[0],At[1],At[0],At[1],i.length()),At):rt}function getIntersection(i,o){var s=i.intersections(o);return s.length&&floatEqual(s[0][0],1)&&s.shift(),s.length?s[0]:null}function pruneSegmentIntersection(i,o){var s=i.slice(),$=o.slice(),tt=getIntersection(i[i.length-1],o[0]);return tt&&(s[i.length-1]=i[i.length-1].split(tt[0])[0],$[0]=o[0].split(tt[1])[1]),i.length>1&&o.length>1&&(tt=getIntersection(i[0],o[o.length-1]),tt)?[[i[0].split(tt[0])[0]],[o[o.length-1].split(tt[1])[1]]]:[s,$]}function pruneIntersections(i){for(var o,s=1;s<i.length;s+=1)o=pruneSegmentIntersection(i[s-1],i[s]),i[s-1]=o[0],i[s]=o[1];return i.length>1&&(o=pruneSegmentIntersection(i[i.length-1],i[0]),i[i.length-1]=o[0],i[0]=o[1]),i}function offsetSegmentSplit(i,o){var s=i.inflectionPoints(),$,tt,rt,st;if(s.length===0)return[offsetSegment(i,o)];if(s.length===1||floatEqual(s[1],1))return rt=i.split(s[0]),$=rt[0],tt=rt[1],[offsetSegment($,o),offsetSegment(tt,o)];rt=i.split(s[0]),$=rt[0];var _=(s[1]-s[0])/(1-s[0]);return rt=rt[1].split(_),st=rt[0],tt=rt[1],[offsetSegment($,o),offsetSegment(st,o),offsetSegment(tt,o)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(i,o){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,o.a,0,null,this),this.miterLimit=PropertyFactory.getProp(i,o.ml,0,null,this),this.lineJoin=o.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(i,o,s,$){var tt=shapePool.newElement();tt.c=i.c;var rt=i.length();i.c||(rt-=1);var st,_,ut,mt=[];for(st=0;st<rt;st+=1)ut=PolynomialBezier.shapeSegment(i,st),mt.push(offsetSegmentSplit(ut,o));if(!i.c)for(st=rt-1;st>=0;st-=1)ut=PolynomialBezier.shapeSegmentInverted(i,st),mt.push(offsetSegmentSplit(ut,o));mt=pruneIntersections(mt);var vt=null,wt=null;for(st=0;st<mt.length;st+=1){var bt=mt[st];for(wt&&(vt=joinLines(tt,wt,bt[0],s,$)),wt=bt[bt.length-1],_=0;_<bt.length;_+=1)ut=bt[_],vt&&pointEqual(ut.points[0],vt)?tt.setXYAt(ut.points[1][0],ut.points[1][1],"o",tt.length()-1):tt.setTripleAt(ut.points[0][0],ut.points[0][1],ut.points[1][0],ut.points[1][1],ut.points[0][0],ut.points[0][1],tt.length()),tt.setTripleAt(ut.points[3][0],ut.points[3][1],ut.points[3][0],ut.points[3][1],ut.points[2][0],ut.points[2][1],tt.length()),vt=ut.points[3]}return mt.length&&joinLines(tt,wt,mt[0][0],s,$),tt},OffsetPathModifier.prototype.processShapes=function(i){var o,s,$=this.shapes.length,tt,rt,st=this.amount.v,_=this.miterLimit.v,ut=this.lineJoin;if(st!==0){var mt,vt;for(s=0;s<$;s+=1){if(mt=this.shapes[s],vt=mt.localShapeCollection,!(!mt.shape._mdf&&!this._mdf&&!i))for(vt.releaseShapes(),mt.shape._mdf=!0,o=mt.shape.paths.shapes,rt=mt.shape.paths._length,tt=0;tt<rt;tt+=1)vt.addShape(this.processPath(o[tt],st,ut,_));mt.shape.paths=mt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(i){for(var o=i.fStyle?i.fStyle.split(" "):[],s="normal",$="normal",tt=o.length,rt,st=0;st<tt;st+=1)switch(rt=o[st].toLowerCase(),rt){case"italic":$="italic";break;case"bold":s="700";break;case"black":s="900";break;case"medium":s="500";break;case"regular":case"normal":s="400";break;case"light":case"thin":s="200";break}return{style:$,weight:i.fWeight||s}}var FontManager=function(){var i=5e3,o={w:0,size:0,shapes:[],data:{shapes:[]}},s=[];s=s.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var $=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],tt=[65039,8205];function rt(It){var Bt=It.split(","),Ft,Gt=Bt.length,Xt=[];for(Ft=0;Ft<Gt;Ft+=1)Bt[Ft]!=="sans-serif"&&Bt[Ft]!=="monospace"&&Xt.push(Bt[Ft]);return Xt.join(",")}function st(It,Bt){var Ft=createTag("span");Ft.setAttribute("aria-hidden",!0),Ft.style.fontFamily=Bt;var Gt=createTag("span");Gt.innerText="giItT1WQy@!-/#",Ft.style.position="absolute",Ft.style.left="-10000px",Ft.style.top="-10000px",Ft.style.fontSize="300px",Ft.style.fontVariant="normal",Ft.style.fontStyle="normal",Ft.style.fontWeight="normal",Ft.style.letterSpacing="0",Ft.appendChild(Gt),document.body.appendChild(Ft);var Xt=Gt.offsetWidth;return Gt.style.fontFamily=rt(It)+", "+Bt,{node:Gt,w:Xt,parent:Ft}}function _(){var It,Bt=this.fonts.length,Ft,Gt,Xt=Bt;for(It=0;It<Bt;It+=1)this.fonts[It].loaded?Xt-=1:this.fonts[It].fOrigin==="n"||this.fonts[It].origin===0?this.fonts[It].loaded=!0:(Ft=this.fonts[It].monoCase.node,Gt=this.fonts[It].monoCase.w,Ft.offsetWidth!==Gt?(Xt-=1,this.fonts[It].loaded=!0):(Ft=this.fonts[It].sansCase.node,Gt=this.fonts[It].sansCase.w,Ft.offsetWidth!==Gt&&(Xt-=1,this.fonts[It].loaded=!0)),this.fonts[It].loaded&&(this.fonts[It].sansCase.parent.parentNode.removeChild(this.fonts[It].sansCase.parent),this.fonts[It].monoCase.parent.parentNode.removeChild(this.fonts[It].monoCase.parent)));Xt!==0&&Date.now()-this.initTime<i?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function ut(It,Bt){var Ft=document.body&&Bt?"svg":"canvas",Gt,Xt=getFontProperties(It);if(Ft==="svg"){var ir=createNS("text");ir.style.fontSize="100px",ir.setAttribute("font-family",It.fFamily),ir.setAttribute("font-style",Xt.style),ir.setAttribute("font-weight",Xt.weight),ir.textContent="1",It.fClass?(ir.style.fontFamily="inherit",ir.setAttribute("class",It.fClass)):ir.style.fontFamily=It.fFamily,Bt.appendChild(ir),Gt=ir}else{var $r=new OffscreenCanvas(500,500).getContext("2d");$r.font=Xt.style+" "+Xt.weight+" 100px "+It.fFamily,Gt=$r}function Tr(xr){return Ft==="svg"?(Gt.textContent=xr,Gt.getComputedTextLength()):Gt.measureText(xr).width}return{measureText:Tr}}function mt(It,Bt){if(!It){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=It.list;return}if(!document.body){this.isLoaded=!0,It.list.forEach(function(hr){hr.helper=ut(hr),hr.cache={}}),this.fonts=It.list;return}var Ft=It.list,Gt,Xt=Ft.length,ir=Xt;for(Gt=0;Gt<Xt;Gt+=1){var $r=!0,Tr,xr;if(Ft[Gt].loaded=!1,Ft[Gt].monoCase=st(Ft[Gt].fFamily,"monospace"),Ft[Gt].sansCase=st(Ft[Gt].fFamily,"sans-serif"),!Ft[Gt].fPath)Ft[Gt].loaded=!0,ir-=1;else if(Ft[Gt].fOrigin==="p"||Ft[Gt].origin===3){if(Tr=document.querySelectorAll('style[f-forigin="p"][f-family="'+Ft[Gt].fFamily+'"], style[f-origin="3"][f-family="'+Ft[Gt].fFamily+'"]'),Tr.length>0&&($r=!1),$r){var Xr=createTag("style");Xr.setAttribute("f-forigin",Ft[Gt].fOrigin),Xr.setAttribute("f-origin",Ft[Gt].origin),Xr.setAttribute("f-family",Ft[Gt].fFamily),Xr.type="text/css",Xr.innerText="@font-face {font-family: "+Ft[Gt].fFamily+"; font-style: normal; src: url('"+Ft[Gt].fPath+"');}",Bt.appendChild(Xr)}}else if(Ft[Gt].fOrigin==="g"||Ft[Gt].origin===1){for(Tr=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),xr=0;xr<Tr.length;xr+=1)Tr[xr].href.indexOf(Ft[Gt].fPath)!==-1&&($r=!1);if($r){var ln=createTag("link");ln.setAttribute("f-forigin",Ft[Gt].fOrigin),ln.setAttribute("f-origin",Ft[Gt].origin),ln.type="text/css",ln.rel="stylesheet",ln.href=Ft[Gt].fPath,document.body.appendChild(ln)}}else if(Ft[Gt].fOrigin==="t"||Ft[Gt].origin===2){for(Tr=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),xr=0;xr<Tr.length;xr+=1)Ft[Gt].fPath===Tr[xr].src&&($r=!1);if($r){var zr=createTag("link");zr.setAttribute("f-forigin",Ft[Gt].fOrigin),zr.setAttribute("f-origin",Ft[Gt].origin),zr.setAttribute("rel","stylesheet"),zr.setAttribute("href",Ft[Gt].fPath),Bt.appendChild(zr)}}Ft[Gt].helper=ut(Ft[Gt],Bt),Ft[Gt].cache={},this.fonts.push(Ft[Gt])}ir===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function vt(It){if(It){this.chars||(this.chars=[]);var Bt,Ft=It.length,Gt,Xt=this.chars.length,ir;for(Bt=0;Bt<Ft;Bt+=1){for(Gt=0,ir=!1;Gt<Xt;)this.chars[Gt].style===It[Bt].style&&this.chars[Gt].fFamily===It[Bt].fFamily&&this.chars[Gt].ch===It[Bt].ch&&(ir=!0),Gt+=1;ir||(this.chars.push(It[Bt]),Xt+=1)}}}function wt(It,Bt,Ft){for(var Gt=0,Xt=this.chars.length;Gt<Xt;){if(this.chars[Gt].ch===It&&this.chars[Gt].style===Bt&&this.chars[Gt].fFamily===Ft)return this.chars[Gt];Gt+=1}return(typeof It=="string"&&It.charCodeAt(0)!==13||!It)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",It,Bt,Ft)),o}function bt(It,Bt,Ft){var Gt=this.getFontByName(Bt),Xt=It.charCodeAt(0);if(!Gt.cache[Xt+1]){var ir=Gt.helper;if(It===" "){var $r=ir.measureText("|"+It+"|"),Tr=ir.measureText("||");Gt.cache[Xt+1]=($r-Tr)/100}else Gt.cache[Xt+1]=ir.measureText(It)/100}return Gt.cache[Xt+1]*Ft}function Mt(It){for(var Bt=0,Ft=this.fonts.length;Bt<Ft;){if(this.fonts[Bt].fName===It)return this.fonts[Bt];Bt+=1}return this.fonts[0]}function At(It,Bt){var Ft=It.toString(16)+Bt.toString(16);return $.indexOf(Ft)!==-1}function Lt(It,Bt){return Bt?It===tt[0]&&Bt===tt[1]:It===tt[1]}function Ht(It){return s.indexOf(It)!==-1}function Tt(){this.isLoaded=!0}var Ct=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Ct.isModifier=At,Ct.isZeroWidthJoiner=Lt,Ct.isCombinedCharacter=Ht;var St={addChars:vt,addFonts:mt,getCharData:wt,getFontByName:Mt,measureText:bt,checkLoadedFonts:_,setIsLoaded:Tt};return Ct.prototype=St,Ct}();function SlotManager(i){this.animationData=i}SlotManager.prototype.getProp=function(i){return this.animationData.slots&&this.animationData.slots[i.sid]?Object.assign(i,this.animationData.slots[i.sid].p):i};function slotFactory(i){return new SlotManager(i)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(o){this.renderableComponents.indexOf(o)===-1&&this.renderableComponents.push(o)},removeRenderableComponent:function(o){this.renderableComponents.indexOf(o)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(o),1)},prepareRenderableFrame:function(o){this.checkLayerLimits(o)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(o){this.data.ip-this.data.st<=o&&this.data.op-this.data.st>o?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var o,s=this.renderableComponents.length;for(o=0;o<s;o+=1)this.renderableComponents[o].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var i={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(o){return i[o]||""}}();function SliderEffect(i,o,s){this.p=PropertyFactory.getProp(o,i.v,0,0,s)}function AngleEffect(i,o,s){this.p=PropertyFactory.getProp(o,i.v,0,0,s)}function ColorEffect(i,o,s){this.p=PropertyFactory.getProp(o,i.v,1,0,s)}function PointEffect(i,o,s){this.p=PropertyFactory.getProp(o,i.v,1,0,s)}function LayerIndexEffect(i,o,s){this.p=PropertyFactory.getProp(o,i.v,0,0,s)}function MaskIndexEffect(i,o,s){this.p=PropertyFactory.getProp(o,i.v,0,0,s)}function CheckboxEffect(i,o,s){this.p=PropertyFactory.getProp(o,i.v,0,0,s)}function NoValueEffect(){this.p={}}function EffectsManager(i,o){var s=i.ef||[];this.effectElements=[];var $,tt=s.length,rt;for($=0;$<tt;$+=1)rt=new GroupEffect(s[$],o),this.effectElements.push(rt)}function GroupEffect(i,o){this.init(i,o)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(i,o){this.data=i,this.effectElements=[],this.initDynamicPropertyContainer(o);var s,$=this.data.ef.length,tt,rt=this.data.ef;for(s=0;s<$;s+=1){switch(tt=null,rt[s].ty){case 0:tt=new SliderEffect(rt[s],o,this);break;case 1:tt=new AngleEffect(rt[s],o,this);break;case 2:tt=new ColorEffect(rt[s],o,this);break;case 3:tt=new PointEffect(rt[s],o,this);break;case 4:case 7:tt=new CheckboxEffect(rt[s],o,this);break;case 10:tt=new LayerIndexEffect(rt[s],o,this);break;case 11:tt=new MaskIndexEffect(rt[s],o,this);break;case 5:tt=new EffectsManager(rt[s],o);break;default:tt=new NoValueEffect(rt[s]);break}tt&&this.effectElements.push(tt)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var o=0,s=this.data.masksProperties.length;o<s;){if(this.data.masksProperties[o].mode!=="n"&&this.data.masksProperties[o].cl!==!1)return!0;o+=1}return!1},initExpressions:function(){var o=getExpressionInterfaces();if(o){var s=o("layer"),$=o("effects"),tt=o("shape"),rt=o("text"),st=o("comp");this.layerInterface=s(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var _=$.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(_),this.data.ty===0||this.data.xt?this.compInterface=st(this):this.data.ty===4?(this.layerInterface.shapeInterface=tt(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=rt(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var o=getBlendMode(this.data.bm),s=this.baseElement||this.layerElement;s.style["mix-blend-mode"]=o},initBaseData:function(o,s,$){this.globalData=s,this.comp=$,this.data=o,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(o,s){var $,tt=this.dynamicProperties.length;for($=0;$<tt;$+=1)(s||this._isParent&&this.dynamicProperties[$].propType==="transform")&&(this.dynamicProperties[$].getValue(),this.dynamicProperties[$]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(o){this.dynamicProperties.indexOf(o)===-1&&this.dynamicProperties.push(o)}};function FootageElement(i,o,s){this.initFrame(),this.initRenderable(),this.assetData=o.getAssetData(i.refId),this.footageData=o.imageLoader.getAsset(this.assetData),this.initBaseData(i,o,s)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var i=getExpressionInterfaces();if(i){var o=i("footage");this.layerInterface=o(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(i,o,s){this.initFrame(),this.initRenderable(),this.assetData=o.getAssetData(i.refId),this.initBaseData(i,o,s),this._isPlaying=!1,this._canPlay=!1;var $=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio($),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,o.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,i.au&&i.au.lv?i.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(i){if(this.prepareRenderableFrame(i,!0),this.prepareProperties(i,!0),this.tm._placeholder)this._currentTime=i/this.data.sr;else{var o=this.tm.v;this._currentTime=o}this._volume=this.lv.v[0];var s=this._volume*this._volumeMultiplier;this._previousVolume!==s&&(this._previousVolume=s,this.audio.volume(s))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(i){this.audio.rate(i)},AudioElement.prototype.volume=function(i){this._volumeMultiplier=i,this._previousVolume=i*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(i){var o,s=this.layers.length,$;for(this.completeLayers=!0,o=s-1;o>=0;o-=1)this.elements[o]||($=this.layers[o],$.ip-$.st<=i-this.layers[o].st&&$.op-$.st>i-this.layers[o].st&&this.buildItem(o)),this.completeLayers=this.elements[o]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(i){switch(i.ty){case 2:return this.createImage(i);case 0:return this.createComp(i);case 1:return this.createSolid(i);case 3:return this.createNull(i);case 4:return this.createShape(i);case 5:return this.createText(i);case 6:return this.createAudio(i);case 13:return this.createCamera(i);case 15:return this.createFootage(i);default:return this.createNull(i)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(i){return new AudioElement(i,this.globalData,this)},BaseRenderer.prototype.createFootage=function(i){return new FootageElement(i,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var i,o=this.layers.length;for(i=0;i<o;i+=1)this.buildItem(i);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(i){this.completeLayers=!1;var o,s=i.length,$,tt=this.layers.length;for(o=0;o<s;o+=1)for($=0;$<tt;){if(this.layers[$].id===i[o].id){this.layers[$]=i[o];break}$+=1}},BaseRenderer.prototype.setProjectInterface=function(i){this.globalData.projectInterface=i},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(i,o,s){for(var $=this.elements,tt=this.layers,rt=0,st=tt.length;rt<st;)tt[rt].ind==o&&(!$[rt]||$[rt]===!0?(this.buildItem(rt),this.addPendingElement(i)):(s.push($[rt]),$[rt].setAsParent(),tt[rt].parent!==void 0?this.buildElementParenting(i,tt[rt].parent,s):i.setHierarchy(s))),rt+=1},BaseRenderer.prototype.addPendingElement=function(i){this.pendingElements.push(i)},BaseRenderer.prototype.searchExtraCompositions=function(i){var o,s=i.length;for(o=0;o<s;o+=1)if(i[o].xt){var $=this.createComp(i[o]);$.initExpressions(),this.globalData.projectInterface.registerComposition($)}},BaseRenderer.prototype.getElementById=function(i){var o,s=this.elements.length;for(o=0;o<s;o+=1)if(this.elements[o].data.ind===i)return this.elements[o];return null},BaseRenderer.prototype.getElementByPath=function(i){var o=i.shift(),s;if(typeof o=="number")s=this.elements[o];else{var $,tt=this.elements.length;for($=0;$<tt;$+=1)if(this.elements[$].data.nm===o){s=this.elements[$];break}}return i.length===0?s:s.getElementByPath(i)},BaseRenderer.prototype.setupGlobalData=function(i,o){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(i),this.globalData.fontManager.addChars(i.chars),this.globalData.fontManager.addFonts(i.fonts,o),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=i.fr,this.globalData.nm=i.nm,this.globalData.compSize={w:i.w,h:i.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var o=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:o,localMat:o,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var o,s=this.finalTransform.mat,$=0,tt=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;$<tt;){if(this.hierarchy[$].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}$+=1}if(this.finalTransform._matMdf)for(o=this.finalTransform.mProp.v.props,s.cloneFromProps(o),$=0;$<tt;$+=1)s.multiply(this.hierarchy[$].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var o=0,s=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;o<s;)this.localTransforms[o]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[o]._opMdf&&(this.finalTransform._opMdf=!0),o+=1;if(this.finalTransform._localMatMdf){var $=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone($),o=1;o<s;o+=1){var tt=this.localTransforms[o].matrix;$.multiply(tt)}$.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var rt=this.finalTransform.localOpacity;for(o=0;o<s;o+=1)rt*=this.localTransforms[o].opacity*.01;this.finalTransform.localOpacity=rt}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var o=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(o.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var s=0,$=o.length;for(s=0;s<$;s+=1)this.localTransforms.push(o[s])}}},globalToLocal:function(o){var s=[];s.push(this.finalTransform);for(var $=!0,tt=this.comp;$;)tt.finalTransform?(tt.data.hasMask&&s.splice(0,0,tt.finalTransform),tt=tt.comp):$=!1;var rt,st=s.length,_;for(rt=0;rt<st;rt+=1)_=s[rt].mat.applyToPointArray(0,0,0),o=[o[0]-_[0],o[1]-_[1],0];return o},mHelper:new Matrix};function MaskElement(i,o,s){this.data=i,this.element=o,this.globalData=s,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var $=this.globalData.defs,tt,rt=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(rt),this.solidPath="";var st,_=this.masksProperties,ut=0,mt=[],vt,wt,bt=createElementID(),Mt,At,Lt,Ht,Tt="clipPath",Ct="clip-path";for(tt=0;tt<rt;tt+=1)if((_[tt].mode!=="a"&&_[tt].mode!=="n"||_[tt].inv||_[tt].o.k!==100||_[tt].o.x)&&(Tt="mask",Ct="mask"),(_[tt].mode==="s"||_[tt].mode==="i")&&ut===0?(Mt=createNS("rect"),Mt.setAttribute("fill","#ffffff"),Mt.setAttribute("width",this.element.comp.data.w||0),Mt.setAttribute("height",this.element.comp.data.h||0),mt.push(Mt)):Mt=null,st=createNS("path"),_[tt].mode==="n")this.viewData[tt]={op:PropertyFactory.getProp(this.element,_[tt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,_[tt],3),elem:st,lastPath:""},$.appendChild(st);else{ut+=1,st.setAttribute("fill",_[tt].mode==="s"?"#000000":"#ffffff"),st.setAttribute("clip-rule","nonzero");var St;if(_[tt].x.k!==0?(Tt="mask",Ct="mask",Ht=PropertyFactory.getProp(this.element,_[tt].x,0,null,this.element),St=createElementID(),At=createNS("filter"),At.setAttribute("id",St),Lt=createNS("feMorphology"),Lt.setAttribute("operator","erode"),Lt.setAttribute("in","SourceGraphic"),Lt.setAttribute("radius","0"),At.appendChild(Lt),$.appendChild(At),st.setAttribute("stroke",_[tt].mode==="s"?"#000000":"#ffffff")):(Lt=null,Ht=null),this.storedData[tt]={elem:st,x:Ht,expan:Lt,lastPath:"",lastOperator:"",filterId:St,lastRadius:0},_[tt].mode==="i"){wt=mt.length;var It=createNS("g");for(vt=0;vt<wt;vt+=1)It.appendChild(mt[vt]);var Bt=createNS("mask");Bt.setAttribute("mask-type","alpha"),Bt.setAttribute("id",bt+"_"+ut),Bt.appendChild(st),$.appendChild(Bt),It.setAttribute("mask","url("+getLocationHref()+"#"+bt+"_"+ut+")"),mt.length=0,mt.push(It)}else mt.push(st);_[tt].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[tt]={elem:st,lastPath:"",op:PropertyFactory.getProp(this.element,_[tt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,_[tt],3),invRect:Mt},this.viewData[tt].prop.k||this.drawPath(_[tt],this.viewData[tt].prop.v,this.viewData[tt])}for(this.maskElement=createNS(Tt),rt=mt.length,tt=0;tt<rt;tt+=1)this.maskElement.appendChild(mt[tt]);ut>0&&(this.maskElement.setAttribute("id",bt),this.element.maskedElement.setAttribute(Ct,"url("+getLocationHref()+"#"+bt+")"),$.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(i){return this.viewData[i].prop},MaskElement.prototype.renderFrame=function(i){var o=this.element.finalTransform.mat,s,$=this.masksProperties.length;for(s=0;s<$;s+=1)if((this.viewData[s].prop._mdf||i)&&this.drawPath(this.masksProperties[s],this.viewData[s].prop.v,this.viewData[s]),(this.viewData[s].op._mdf||i)&&this.viewData[s].elem.setAttribute("fill-opacity",this.viewData[s].op.v),this.masksProperties[s].mode!=="n"&&(this.viewData[s].invRect&&(this.element.finalTransform.mProp._mdf||i)&&this.viewData[s].invRect.setAttribute("transform",o.getInverseMatrix().to2dCSS()),this.storedData[s].x&&(this.storedData[s].x._mdf||i))){var tt=this.storedData[s].expan;this.storedData[s].x.v<0?(this.storedData[s].lastOperator!=="erode"&&(this.storedData[s].lastOperator="erode",this.storedData[s].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[s].filterId+")")),tt.setAttribute("radius",-this.storedData[s].x.v)):(this.storedData[s].lastOperator!=="dilate"&&(this.storedData[s].lastOperator="dilate",this.storedData[s].elem.setAttribute("filter",null)),this.storedData[s].elem.setAttribute("stroke-width",this.storedData[s].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var i="M0,0 ";return i+=" h"+this.globalData.compSize.w,i+=" v"+this.globalData.compSize.h,i+=" h-"+this.globalData.compSize.w,i+=" v-"+this.globalData.compSize.h+" ",i},MaskElement.prototype.drawPath=function(i,o,s){var $=" M"+o.v[0][0]+","+o.v[0][1],tt,rt;for(rt=o._length,tt=1;tt<rt;tt+=1)$+=" C"+o.o[tt-1][0]+","+o.o[tt-1][1]+" "+o.i[tt][0]+","+o.i[tt][1]+" "+o.v[tt][0]+","+o.v[tt][1];if(o.c&&rt>1&&($+=" C"+o.o[tt-1][0]+","+o.o[tt-1][1]+" "+o.i[0][0]+","+o.i[0][1]+" "+o.v[0][0]+","+o.v[0][1]),s.lastPath!==$){var st="";s.elem&&(o.c&&(st=i.inv?this.solidPath+$:$),s.elem.setAttribute("d",st)),s.lastPath=$}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var i={};i.createFilter=o,i.createAlphaToLuminanceFilter=s;function o($,tt){var rt=createNS("filter");return rt.setAttribute("id",$),tt!==!0&&(rt.setAttribute("filterUnits","objectBoundingBox"),rt.setAttribute("x","0%"),rt.setAttribute("y","0%"),rt.setAttribute("width","100%"),rt.setAttribute("height","100%")),rt}function s(){var $=createNS("feColorMatrix");return $.setAttribute("type","matrix"),$.setAttribute("color-interpolation-filters","sRGB"),$.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),$}return i}(),featureSupport=function(){var i={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(i.maskType=!1),/firefox/i.test(navigator.userAgent)&&(i.svgLumaHidden=!1),i}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(i){var o,s="SourceGraphic",$=i.data.ef?i.data.ef.length:0,tt=createElementID(),rt=filtersFactory.createFilter(tt,!0),st=0;this.filters=[];var _;for(o=0;o<$;o+=1){_=null;var ut=i.data.ef[o].ty;if(registeredEffects$1[ut]){var mt=registeredEffects$1[ut].effect;_=new mt(rt,i.effectsManager.effectElements[o],i,idPrefix+st,s),s=idPrefix+st,registeredEffects$1[ut].countsAsEffect&&(st+=1)}_&&this.filters.push(_)}st&&(i.globalData.defs.appendChild(rt),i.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+tt+")")),this.filters.length&&i.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(i){var o,s=this.filters.length;for(o=0;o<s;o+=1)this.filters[o].renderFrame(i)},SVGEffects.prototype.getEffects=function(i){var o,s=this.filters.length,$=[];for(o=0;o<s;o+=1)this.filters[o].type===i&&$.push(this.filters[o]);return $};function registerEffect$1(i,o,s){registeredEffects$1[i]={effect:o,countsAsEffect:s}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var o=null;if(this.data.td){this.matteMasks={};var s=createNS("g");s.setAttribute("id",this.layerId),s.appendChild(this.layerElement),o=s,this.globalData.defs.appendChild(s)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),o=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var $=createNS("clipPath"),tt=createNS("path");tt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var rt=createElementID();if($.setAttribute("id",rt),$.appendChild(tt),this.globalData.defs.appendChild($),this.checkMasks()){var st=createNS("g");st.setAttribute("clip-path","url("+getLocationHref()+"#"+rt+")"),st.appendChild(this.layerElement),this.transformedElement=st,o?o.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+rt+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(o){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[o]){var s=this.layerId+"_"+o,$,tt,rt,st;if(o===1||o===3){var _=createNS("mask");_.setAttribute("id",s),_.setAttribute("mask-type",o===3?"luminance":"alpha"),rt=createNS("use"),rt.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),_.appendChild(rt),this.globalData.defs.appendChild(_),!featureSupport.maskType&&o===1&&(_.setAttribute("mask-type","luminance"),$=createElementID(),tt=filtersFactory.createFilter($),this.globalData.defs.appendChild(tt),tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),st=createNS("g"),st.appendChild(rt),_.appendChild(st),st.setAttribute("filter","url("+getLocationHref()+"#"+$+")"))}else if(o===2){var ut=createNS("mask");ut.setAttribute("id",s),ut.setAttribute("mask-type","alpha");var mt=createNS("g");ut.appendChild(mt),$=createElementID(),tt=filtersFactory.createFilter($);var vt=createNS("feComponentTransfer");vt.setAttribute("in","SourceGraphic"),tt.appendChild(vt);var wt=createNS("feFuncA");wt.setAttribute("type","table"),wt.setAttribute("tableValues","1.0 0.0"),vt.appendChild(wt),this.globalData.defs.appendChild(tt);var bt=createNS("rect");bt.setAttribute("width",this.comp.data.w),bt.setAttribute("height",this.comp.data.h),bt.setAttribute("x","0"),bt.setAttribute("y","0"),bt.setAttribute("fill","#ffffff"),bt.setAttribute("opacity","0"),mt.setAttribute("filter","url("+getLocationHref()+"#"+$+")"),mt.appendChild(bt),rt=createNS("use"),rt.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),mt.appendChild(rt),featureSupport.maskType||(ut.setAttribute("mask-type","luminance"),tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),st=createNS("g"),mt.appendChild(bt),st.appendChild(this.layerElement),mt.appendChild(st)),this.globalData.defs.appendChild(ut)}this.matteMasks[o]=s}return this.matteMasks[o]},setMatte:function(o){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+o+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(o){this.hierarchy=o},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var i={initElement:function(s,$,tt){this.initFrame(),this.initBaseData(s,$,tt),this.initTransform(s,$,tt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var s=this.baseElement||this.layerElement;s.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var s=this.baseElement||this.layerElement;s.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(i)],RenderableDOMElement)})();function IImageElement(i,o,s){this.assetData=o.getAssetData(i.refId),this.assetData&&this.assetData.sid&&(this.assetData=o.slotManager.getProp(this.assetData)),this.initElement(i,o,s),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(i,o){this.elem=i,this.pos=o}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(o){var s,$=this.shapeModifiers.length;for(s=0;s<$;s+=1)this.shapeModifiers[s].addShape(o)},isShapeInAnimatedModifiers:function(o){for(var s=0,$=this.shapeModifiers.length;s<$;)if(this.shapeModifiers[s].isAnimatedWithShape(o))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var o,s=this.shapes.length;for(o=0;o<s;o+=1)this.shapes[o].sh.reset();s=this.shapeModifiers.length;var $;for(o=s-1;o>=0&&($=this.shapeModifiers[o].processShapes(this._isFirstFrame),!$);o-=1);}},searchProcessedElement:function(o){for(var s=this.processedElements,$=0,tt=s.length;$<tt;){if(s[$].elem===o)return s[$].pos;$+=1}return 0},addProcessedElement:function(o,s){for(var $=this.processedElements,tt=$.length;tt;)if(tt-=1,$[tt].elem===o){$[tt].pos=s;return}$.push(new ProcessedElement(o,s))},prepareFrame:function(o){this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(i,o,s){this.caches=[],this.styles=[],this.transformers=i,this.lStr="",this.sh=s,this.lvl=o,this._isAnimated=!!s.k;for(var $=0,tt=i.length;$<tt;){if(i[$].mProps.dynamicProperties.length){this._isAnimated=!0;break}$+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(i,o){this.data=i,this.type=i.ty,this.d="",this.lvl=o,this._mdf=!1,this.closed=i.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(i,o,s,$){this.elem=i,this.frameId=-1,this.dataProps=createSizedArray(o.length),this.renderer=s,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",o.length?o.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer($);var tt,rt=o.length||0,st;for(tt=0;tt<rt;tt+=1)st=PropertyFactory.getProp(i,o[tt].v,0,0,this),this.k=st.k||this.k,this.dataProps[tt]={n:o[tt].n,p:st};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(i){if(!(this.elem.globalData.frameId===this.frameId&&!i)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||i,this._mdf)){var o=0,s=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),o=0;o<s;o+=1)this.dataProps[o].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[o].p.v:this.dashArray[o]=this.dataProps[o].p.v:this.dashoffset[0]=this.dataProps[o].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(i,o,s){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,o.o,0,.01,this),this.w=PropertyFactory.getProp(i,o.w,0,null,this),this.d=new DashProperty(i,o.d||{},"svg",this),this.c=PropertyFactory.getProp(i,o.c,1,255,this),this.style=s,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(i,o,s){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,o.o,0,.01,this),this.c=PropertyFactory.getProp(i,o.c,1,255,this),this.style=s}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(i,o,s){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.style=s}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(i,o,s){this.data=o,this.c=createTypedArray("uint8c",o.p*4);var $=o.k.k[0].s?o.k.k[0].s.length-o.p*4:o.k.k.length-o.p*4;this.o=createTypedArray("float32",$),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=$,this.initDynamicPropertyContainer(s),this.prop=PropertyFactory.getProp(i,o.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(i,o){for(var s=0,$=this.o.length/2,tt;s<$;){if(tt=Math.abs(i[s*4]-i[o*4+s*2]),tt>.01)return!1;s+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var i=0,o=this.data.k.k.length;i<o;){if(!this.comparePoints(this.data.k.k[i].s,this.data.p))return!1;i+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(i){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||i){var o,s=this.data.p*4,$,tt;for(o=0;o<s;o+=1)$=o%4===0?100:255,tt=Math.round(this.prop.v[o]*$),this.c[o]!==tt&&(this.c[o]=tt,this._cmdf=!i);if(this.o.length)for(s=this.prop.v.length,o=this.data.p*4;o<s;o+=1)$=o%2===0?100:1,tt=o%2===0?Math.round(this.prop.v[o]*100):this.prop.v[o],this.o[o-this.data.p*4]!==tt&&(this.o[o-this.data.p*4]=tt,this._omdf=!i);this._mdf=!i}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(i,o,s){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.initGradientData(i,o,s)}SVGGradientFillStyleData.prototype.initGradientData=function(i,o,s){this.o=PropertyFactory.getProp(i,o.o,0,.01,this),this.s=PropertyFactory.getProp(i,o.s,1,null,this),this.e=PropertyFactory.getProp(i,o.e,1,null,this),this.h=PropertyFactory.getProp(i,o.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(i,o.a||{k:0},0,degToRads,this),this.g=new GradientProperty(i,o.g,this),this.style=s,this.stops=[],this.setGradientData(s.pElem,o),this.setGradientOpacity(o,s),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(i,o){var s=createElementID(),$=createNS(o.t===1?"linearGradient":"radialGradient");$.setAttribute("id",s),$.setAttribute("spreadMethod","pad"),$.setAttribute("gradientUnits","userSpaceOnUse");var tt=[],rt,st,_;for(_=o.g.p*4,st=0;st<_;st+=4)rt=createNS("stop"),$.appendChild(rt),tt.push(rt);i.setAttribute(o.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),this.gf=$,this.cst=tt},SVGGradientFillStyleData.prototype.setGradientOpacity=function(i,o){if(this.g._hasOpacity&&!this.g._collapsable){var s,$,tt,rt=createNS("mask"),st=createNS("path");rt.appendChild(st);var _=createElementID(),ut=createElementID();rt.setAttribute("id",ut);var mt=createNS(i.t===1?"linearGradient":"radialGradient");mt.setAttribute("id",_),mt.setAttribute("spreadMethod","pad"),mt.setAttribute("gradientUnits","userSpaceOnUse"),tt=i.g.k.k[0].s?i.g.k.k[0].s.length:i.g.k.k.length;var vt=this.stops;for($=i.g.p*4;$<tt;$+=2)s=createNS("stop"),s.setAttribute("stop-color","rgb(255,255,255)"),mt.appendChild(s),vt.push(s);st.setAttribute(i.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+_+")"),i.ty==="gs"&&(st.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),st.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),i.lj===1&&st.setAttribute("stroke-miterlimit",i.ml)),this.of=mt,this.ms=rt,this.ost=vt,this.maskId=ut,o.msElem=st}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(i,o,s){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(i,o.w,0,null,this),this.d=new DashProperty(i,o.d||{},"svg",this),this.initGradientData(i,o,s),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(i,o,s){this.transform={mProps:i,op:o,container:s},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(o,s,$,tt){if(s===0)return"";var rt=o.o,st=o.i,_=o.v,ut,mt=" M"+tt.applyToPointStringified(_[0][0],_[0][1]);for(ut=1;ut<s;ut+=1)mt+=" C"+tt.applyToPointStringified(rt[ut-1][0],rt[ut-1][1])+" "+tt.applyToPointStringified(st[ut][0],st[ut][1])+" "+tt.applyToPointStringified(_[ut][0],_[ut][1]);return $&&s&&(mt+=" C"+tt.applyToPointStringified(rt[ut-1][0],rt[ut-1][1])+" "+tt.applyToPointStringified(st[0][0],st[0][1])+" "+tt.applyToPointStringified(_[0][0],_[0][1]),mt+="z"),mt},SVGElementsRenderer=function(){var i=new Matrix,o=new Matrix,s={createRenderFunction:$};function $(wt){switch(wt.ty){case"fl":return _;case"gf":return mt;case"gs":return ut;case"st":return vt;case"sh":case"el":case"rc":case"sr":return st;case"tr":return tt;case"no":return rt;default:return null}}function tt(wt,bt,Mt){(Mt||bt.transform.op._mdf)&&bt.transform.container.setAttribute("opacity",bt.transform.op.v),(Mt||bt.transform.mProps._mdf)&&bt.transform.container.setAttribute("transform",bt.transform.mProps.v.to2dCSS())}function rt(){}function st(wt,bt,Mt){var At,Lt,Ht,Tt,Ct,St,It=bt.styles.length,Bt=bt.lvl,Ft,Gt,Xt,ir;for(St=0;St<It;St+=1){if(Tt=bt.sh._mdf||Mt,bt.styles[St].lvl<Bt){for(Gt=o.reset(),Xt=Bt-bt.styles[St].lvl,ir=bt.transformers.length-1;!Tt&&Xt>0;)Tt=bt.transformers[ir].mProps._mdf||Tt,Xt-=1,ir-=1;if(Tt)for(Xt=Bt-bt.styles[St].lvl,ir=bt.transformers.length-1;Xt>0;)Gt.multiply(bt.transformers[ir].mProps.v),Xt-=1,ir-=1}else Gt=i;if(Ft=bt.sh.paths,Lt=Ft._length,Tt){for(Ht="",At=0;At<Lt;At+=1)Ct=Ft.shapes[At],Ct&&Ct._length&&(Ht+=buildShapeString(Ct,Ct._length,Ct.c,Gt));bt.caches[St]=Ht}else Ht=bt.caches[St];bt.styles[St].d+=wt.hd===!0?"":Ht,bt.styles[St]._mdf=Tt||bt.styles[St]._mdf}}function _(wt,bt,Mt){var At=bt.style;(bt.c._mdf||Mt)&&At.pElem.setAttribute("fill","rgb("+bmFloor(bt.c.v[0])+","+bmFloor(bt.c.v[1])+","+bmFloor(bt.c.v[2])+")"),(bt.o._mdf||Mt)&&At.pElem.setAttribute("fill-opacity",bt.o.v)}function ut(wt,bt,Mt){mt(wt,bt,Mt),vt(wt,bt,Mt)}function mt(wt,bt,Mt){var At=bt.gf,Lt=bt.g._hasOpacity,Ht=bt.s.v,Tt=bt.e.v;if(bt.o._mdf||Mt){var Ct=wt.ty==="gf"?"fill-opacity":"stroke-opacity";bt.style.pElem.setAttribute(Ct,bt.o.v)}if(bt.s._mdf||Mt){var St=wt.t===1?"x1":"cx",It=St==="x1"?"y1":"cy";At.setAttribute(St,Ht[0]),At.setAttribute(It,Ht[1]),Lt&&!bt.g._collapsable&&(bt.of.setAttribute(St,Ht[0]),bt.of.setAttribute(It,Ht[1]))}var Bt,Ft,Gt,Xt;if(bt.g._cmdf||Mt){Bt=bt.cst;var ir=bt.g.c;for(Gt=Bt.length,Ft=0;Ft<Gt;Ft+=1)Xt=Bt[Ft],Xt.setAttribute("offset",ir[Ft*4]+"%"),Xt.setAttribute("stop-color","rgb("+ir[Ft*4+1]+","+ir[Ft*4+2]+","+ir[Ft*4+3]+")")}if(Lt&&(bt.g._omdf||Mt)){var $r=bt.g.o;for(bt.g._collapsable?Bt=bt.cst:Bt=bt.ost,Gt=Bt.length,Ft=0;Ft<Gt;Ft+=1)Xt=Bt[Ft],bt.g._collapsable||Xt.setAttribute("offset",$r[Ft*2]+"%"),Xt.setAttribute("stop-opacity",$r[Ft*2+1])}if(wt.t===1)(bt.e._mdf||Mt)&&(At.setAttribute("x2",Tt[0]),At.setAttribute("y2",Tt[1]),Lt&&!bt.g._collapsable&&(bt.of.setAttribute("x2",Tt[0]),bt.of.setAttribute("y2",Tt[1])));else{var Tr;if((bt.s._mdf||bt.e._mdf||Mt)&&(Tr=Math.sqrt(Math.pow(Ht[0]-Tt[0],2)+Math.pow(Ht[1]-Tt[1],2)),At.setAttribute("r",Tr),Lt&&!bt.g._collapsable&&bt.of.setAttribute("r",Tr)),bt.e._mdf||bt.h._mdf||bt.a._mdf||Mt){Tr||(Tr=Math.sqrt(Math.pow(Ht[0]-Tt[0],2)+Math.pow(Ht[1]-Tt[1],2)));var xr=Math.atan2(Tt[1]-Ht[1],Tt[0]-Ht[0]),Xr=bt.h.v;Xr>=1?Xr=.99:Xr<=-1&&(Xr=-.99);var ln=Tr*Xr,zr=Math.cos(xr+bt.a.v)*ln+Ht[0],hr=Math.sin(xr+bt.a.v)*ln+Ht[1];At.setAttribute("fx",zr),At.setAttribute("fy",hr),Lt&&!bt.g._collapsable&&(bt.of.setAttribute("fx",zr),bt.of.setAttribute("fy",hr))}}}function vt(wt,bt,Mt){var At=bt.style,Lt=bt.d;Lt&&(Lt._mdf||Mt)&&Lt.dashStr&&(At.pElem.setAttribute("stroke-dasharray",Lt.dashStr),At.pElem.setAttribute("stroke-dashoffset",Lt.dashoffset[0])),bt.c&&(bt.c._mdf||Mt)&&At.pElem.setAttribute("stroke","rgb("+bmFloor(bt.c.v[0])+","+bmFloor(bt.c.v[1])+","+bmFloor(bt.c.v[2])+")"),(bt.o._mdf||Mt)&&At.pElem.setAttribute("stroke-opacity",bt.o.v),(bt.w._mdf||Mt)&&(At.pElem.setAttribute("stroke-width",bt.w.v),At.msElem&&At.msElem.setAttribute("stroke-width",bt.w.v))}return s}();function SVGShapeElement(i,o,s){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(i,o,s),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var i,o=this.shapes.length,s,$,tt=this.stylesList.length,rt,st=[],_=!1;for($=0;$<tt;$+=1){for(rt=this.stylesList[$],_=!1,st.length=0,i=0;i<o;i+=1)s=this.shapes[i],s.styles.indexOf(rt)!==-1&&(st.push(s),_=s._isAnimated||_);st.length>1&&_&&this.setShapesAsAnimated(st)}},SVGShapeElement.prototype.setShapesAsAnimated=function(i){var o,s=i.length;for(o=0;o<s;o+=1)i[o].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(i,o){var s,$=new SVGStyleData(i,o),tt=$.pElem;if(i.ty==="st")s=new SVGStrokeStyleData(this,i,$);else if(i.ty==="fl")s=new SVGFillStyleData(this,i,$);else if(i.ty==="gf"||i.ty==="gs"){var rt=i.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;s=new rt(this,i,$),this.globalData.defs.appendChild(s.gf),s.maskId&&(this.globalData.defs.appendChild(s.ms),this.globalData.defs.appendChild(s.of),tt.setAttribute("mask","url("+getLocationHref()+"#"+s.maskId+")"))}else i.ty==="no"&&(s=new SVGNoStyleData(this,i,$));return(i.ty==="st"||i.ty==="gs")&&(tt.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),tt.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),tt.setAttribute("fill-opacity","0"),i.lj===1&&tt.setAttribute("stroke-miterlimit",i.ml)),i.r===2&&tt.setAttribute("fill-rule","evenodd"),i.ln&&tt.setAttribute("id",i.ln),i.cl&&tt.setAttribute("class",i.cl),i.bm&&(tt.style["mix-blend-mode"]=getBlendMode(i.bm)),this.stylesList.push($),this.addToAnimatedContents(i,s),s},SVGShapeElement.prototype.createGroupElement=function(i){var o=new ShapeGroupData;return i.ln&&o.gr.setAttribute("id",i.ln),i.cl&&o.gr.setAttribute("class",i.cl),i.bm&&(o.gr.style["mix-blend-mode"]=getBlendMode(i.bm)),o},SVGShapeElement.prototype.createTransformElement=function(i,o){var s=TransformPropertyFactory.getTransformProperty(this,i,this),$=new SVGTransformData(s,s.o,o);return this.addToAnimatedContents(i,$),$},SVGShapeElement.prototype.createShapeElement=function(i,o,s){var $=4;i.ty==="rc"?$=5:i.ty==="el"?$=6:i.ty==="sr"&&($=7);var tt=ShapePropertyFactory.getShapeProp(this,i,$,this),rt=new SVGShapeData(o,s,tt);return this.shapes.push(rt),this.addShapeToModifiers(rt),this.addToAnimatedContents(i,rt),rt},SVGShapeElement.prototype.addToAnimatedContents=function(i,o){for(var s=0,$=this.animatedContents.length;s<$;){if(this.animatedContents[s].element===o)return;s+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(i),element:o,data:i})},SVGShapeElement.prototype.setElementStyles=function(i){var o=i.styles,s,$=this.stylesList.length;for(s=0;s<$;s+=1)this.stylesList[s].closed||o.push(this.stylesList[s])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,o=this.itemsData.length;for(i=0;i<o;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),o=this.dynamicProperties.length,i=0;i<o;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(i,o,s,$,tt,rt,st){var _=[].concat(rt),ut,mt=i.length-1,vt,wt,bt=[],Mt=[],At,Lt,Ht;for(ut=mt;ut>=0;ut-=1){if(Ht=this.searchProcessedElement(i[ut]),Ht?o[ut]=s[Ht-1]:i[ut]._render=st,i[ut].ty==="fl"||i[ut].ty==="st"||i[ut].ty==="gf"||i[ut].ty==="gs"||i[ut].ty==="no")Ht?o[ut].style.closed=!1:o[ut]=this.createStyleElement(i[ut],tt),i[ut]._render&&o[ut].style.pElem.parentNode!==$&&$.appendChild(o[ut].style.pElem),bt.push(o[ut].style);else if(i[ut].ty==="gr"){if(!Ht)o[ut]=this.createGroupElement(i[ut]);else for(wt=o[ut].it.length,vt=0;vt<wt;vt+=1)o[ut].prevViewData[vt]=o[ut].it[vt];this.searchShapes(i[ut].it,o[ut].it,o[ut].prevViewData,o[ut].gr,tt+1,_,st),i[ut]._render&&o[ut].gr.parentNode!==$&&$.appendChild(o[ut].gr)}else i[ut].ty==="tr"?(Ht||(o[ut]=this.createTransformElement(i[ut],$)),At=o[ut].transform,_.push(At)):i[ut].ty==="sh"||i[ut].ty==="rc"||i[ut].ty==="el"||i[ut].ty==="sr"?(Ht||(o[ut]=this.createShapeElement(i[ut],_,tt)),this.setElementStyles(o[ut])):i[ut].ty==="tm"||i[ut].ty==="rd"||i[ut].ty==="ms"||i[ut].ty==="pb"||i[ut].ty==="zz"||i[ut].ty==="op"?(Ht?(Lt=o[ut],Lt.closed=!1):(Lt=ShapeModifiers.getModifier(i[ut].ty),Lt.init(this,i[ut]),o[ut]=Lt,this.shapeModifiers.push(Lt)),Mt.push(Lt)):i[ut].ty==="rp"&&(Ht?(Lt=o[ut],Lt.closed=!0):(Lt=ShapeModifiers.getModifier(i[ut].ty),o[ut]=Lt,Lt.init(this,i,ut,o),this.shapeModifiers.push(Lt),st=!1),Mt.push(Lt));this.addProcessedElement(i[ut],ut+1)}for(mt=bt.length,ut=0;ut<mt;ut+=1)bt[ut].closed=!0;for(mt=Mt.length,ut=0;ut<mt;ut+=1)Mt[ut].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var i,o=this.stylesList.length;for(i=0;i<o;i+=1)this.stylesList[i].reset();for(this.renderShape(),i=0;i<o;i+=1)(this.stylesList[i]._mdf||this._isFirstFrame)&&(this.stylesList[i].msElem&&(this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].d="M0 0"+this.stylesList[i].d),this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var i,o=this.animatedContents.length,s;for(i=0;i<o;i+=1)s=this.animatedContents[i],(this._isFirstFrame||s.element._isAnimated)&&s.data!==!0&&s.fn(s.data,s.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(i,o,s,$,tt,rt){this.o=i,this.sw=o,this.sc=s,this.fc=$,this.m=tt,this.p=rt,this._mdf={o:!0,sw:!!o,sc:!!s,fc:!!$,m:!0,p:!0}}LetterProps.prototype.update=function(i,o,s,$,tt,rt){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var st=!1;return this.o!==i&&(this.o=i,this._mdf.o=!0,st=!0),this.sw!==o&&(this.sw=o,this._mdf.sw=!0,st=!0),this.sc!==s&&(this.sc=s,this._mdf.sc=!0,st=!0),this.fc!==$&&(this.fc=$,this._mdf.fc=!0,st=!0),this.m!==tt&&(this.m=tt,this._mdf.m=!0,st=!0),rt.length&&(this.p[0]!==rt[0]||this.p[1]!==rt[1]||this.p[4]!==rt[4]||this.p[5]!==rt[5]||this.p[12]!==rt[12]||this.p[13]!==rt[13])&&(this.p=rt,this._mdf.p=!0,st=!0),st};function TextProperty(i,o){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,o.d&&o.d.sid&&(o.d=i.globalData.slotManager.getProp(o.d)),this.data=o,this.elem=i,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s]);return i},TextProperty.prototype.setCurrentData=function(i){i.__complete||this.completeTextData(i),this.currentData=i,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(i){this.effectsSequence.push(i),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(i){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!i)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var o=this.currentData,s=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var $,tt=this.effectsSequence.length,rt=i||this.data.d.k[this.keysIndex].s;for($=0;$<tt;$+=1)s!==this.keysIndex?rt=this.effectsSequence[$](rt,rt.t):rt=this.effectsSequence[$](this.currentData,rt.t);o!==rt&&this.setCurrentData(rt),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var i=this.data.d.k,o=this.elem.comp.renderedFrame,s=0,$=i.length;s<=$-1&&!(s===$-1||i[s+1].t>o);)s+=1;return this.keysIndex!==s&&(this.keysIndex=s),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(i){for(var o=[],s=0,$=i.length,tt,rt,st=!1;s<$;)tt=i.charCodeAt(s),FontManager.isCombinedCharacter(tt)?o[o.length-1]+=i.charAt(s):tt>=55296&&tt<=56319?(rt=i.charCodeAt(s+1),rt>=56320&&rt<=57343?(st||FontManager.isModifier(tt,rt)?(o[o.length-1]+=i.substr(s,2),st=!1):o.push(i.substr(s,2)),s+=1):o.push(i.charAt(s))):tt>56319?(rt=i.charCodeAt(s+1),FontManager.isZeroWidthJoiner(tt,rt)?(st=!0,o[o.length-1]+=i.substr(s,2),s+=1):o.push(i.charAt(s))):FontManager.isZeroWidthJoiner(tt)?(o[o.length-1]+=i.charAt(s),st=!0):o.push(i.charAt(s)),s+=1;return o},TextProperty.prototype.completeTextData=function(i){i.__complete=!0;var o=this.elem.globalData.fontManager,s=this.data,$=[],tt,rt,st,_=0,ut,mt=s.m.g,vt=0,wt=0,bt=0,Mt=[],At=0,Lt=0,Ht,Tt,Ct=o.getFontByName(i.f),St,It=0,Bt=getFontProperties(Ct);i.fWeight=Bt.weight,i.fStyle=Bt.style,i.finalSize=i.s,i.finalText=this.buildFinalText(i.t),rt=i.finalText.length,i.finalLineHeight=i.lh;var Ft=i.tr/1e3*i.finalSize,Gt;if(i.sz)for(var Xt=!0,ir=i.sz[0],$r=i.sz[1],Tr,xr;Xt;){xr=this.buildFinalText(i.t),Tr=0,At=0,rt=xr.length,Ft=i.tr/1e3*i.finalSize;var Xr=-1;for(tt=0;tt<rt;tt+=1)Gt=xr[tt].charCodeAt(0),st=!1,xr[tt]===" "?Xr=tt:(Gt===13||Gt===3)&&(At=0,st=!0,Tr+=i.finalLineHeight||i.finalSize*1.2),o.chars?(St=o.getCharData(xr[tt],Ct.fStyle,Ct.fFamily),It=st?0:St.w*i.finalSize/100):It=o.measureText(xr[tt],i.f,i.finalSize),At+It>ir&&xr[tt]!==" "?(Xr===-1?rt+=1:tt=Xr,Tr+=i.finalLineHeight||i.finalSize*1.2,xr.splice(tt,Xr===tt?1:0,"\r"),Xr=-1,At=0):(At+=It,At+=Ft);Tr+=Ct.ascent*i.finalSize/100,this.canResize&&i.finalSize>this.minimumFontSize&&$r<Tr?(i.finalSize-=1,i.finalLineHeight=i.finalSize*i.lh/i.s):(i.finalText=xr,rt=i.finalText.length,Xt=!1)}At=-Ft,It=0;var ln=0,zr;for(tt=0;tt<rt;tt+=1)if(st=!1,zr=i.finalText[tt],Gt=zr.charCodeAt(0),Gt===13||Gt===3?(ln=0,Mt.push(At),Lt=At>Lt?At:Lt,At=-2*Ft,ut="",st=!0,bt+=1):ut=zr,o.chars?(St=o.getCharData(zr,Ct.fStyle,o.getFontByName(i.f).fFamily),It=st?0:St.w*i.finalSize/100):It=o.measureText(ut,i.f,i.finalSize),zr===" "?ln+=It+Ft:(At+=It+Ft+ln,ln=0),$.push({l:It,an:It,add:vt,n:st,anIndexes:[],val:ut,line:bt,animatorJustifyOffset:0}),mt==2){if(vt+=It,ut===""||ut===" "||tt===rt-1){for((ut===""||ut===" ")&&(vt-=It);wt<=tt;)$[wt].an=vt,$[wt].ind=_,$[wt].extra=It,wt+=1;_+=1,vt=0}}else if(mt==3){if(vt+=It,ut===""||tt===rt-1){for(ut===""&&(vt-=It);wt<=tt;)$[wt].an=vt,$[wt].ind=_,$[wt].extra=It,wt+=1;vt=0,_+=1}}else $[_].ind=_,$[_].extra=0,_+=1;if(i.l=$,Lt=At>Lt?At:Lt,Mt.push(At),i.sz)i.boxWidth=i.sz[0],i.justifyOffset=0;else switch(i.boxWidth=Lt,i.j){case 1:i.justifyOffset=-i.boxWidth;break;case 2:i.justifyOffset=-i.boxWidth/2;break;default:i.justifyOffset=0}i.lineWidths=Mt;var hr=s.a,Er,Nt;Tt=hr.length;var Wt,or,ar=[];for(Ht=0;Ht<Tt;Ht+=1){for(Er=hr[Ht],Er.a.sc&&(i.strokeColorAnim=!0),Er.a.sw&&(i.strokeWidthAnim=!0),(Er.a.fc||Er.a.fh||Er.a.fs||Er.a.fb)&&(i.fillColorAnim=!0),or=0,Wt=Er.s.b,tt=0;tt<rt;tt+=1)Nt=$[tt],Nt.anIndexes[Ht]=or,(Wt==1&&Nt.val!==""||Wt==2&&Nt.val!==""&&Nt.val!==" "||Wt==3&&(Nt.n||Nt.val==" "||tt==rt-1)||Wt==4&&(Nt.n||tt==rt-1))&&(Er.s.rn===1&&ar.push(or),or+=1);s.a[Ht].s.totalChars=or;var Fr=-1,Yr;if(Er.s.rn===1)for(tt=0;tt<rt;tt+=1)Nt=$[tt],Fr!=Nt.anIndexes[Ht]&&(Fr=Nt.anIndexes[Ht],Yr=ar.splice(Math.floor(Math.random()*ar.length),1)[0]),Nt.anIndexes[Ht]=Yr}i.yOffset=i.finalLineHeight||i.finalSize*1.2,i.ls=i.ls||0,i.ascent=Ct.ascent*i.finalSize/100},TextProperty.prototype.updateDocumentData=function(i,o){o=o===void 0?this.keysIndex:o;var s=this.copyData({},this.data.d.k[o].s);s=this.copyData(s,i),this.data.d.k[o].s=s,this.recalculate(o),this.setCurrentData(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(i){var o=this.data.d.k[i].s;o.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(o)},TextProperty.prototype.canResizeFont=function(i){this.canResize=i,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(i){this.minimumFontSize=Math.floor(i)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var i=Math.max,o=Math.min,s=Math.floor;function $(rt,st){this._currentTextLength=-1,this.k=!1,this.data=st,this.elem=rt,this.comp=rt.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(rt),this.s=PropertyFactory.getProp(rt,st.s||{k:0},0,0,this),"e"in st?this.e=PropertyFactory.getProp(rt,st.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(rt,st.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(rt,st.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(rt,st.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(rt,st.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(rt,st.a,0,.01,this),this.dynamicProperties.length||this.getValue()}$.prototype={getMult:function(st){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var _=0,ut=0,mt=1,vt=1;this.ne.v>0?_=this.ne.v/100:ut=-this.ne.v/100,this.xe.v>0?mt=1-this.xe.v/100:vt=1+this.xe.v/100;var wt=BezierFactory.getBezierEasing(_,ut,mt,vt).get,bt=0,Mt=this.finalS,At=this.finalE,Lt=this.data.sh;if(Lt===2)At===Mt?bt=st>=At?1:0:bt=i(0,o(.5/(At-Mt)+(st-Mt)/(At-Mt),1)),bt=wt(bt);else if(Lt===3)At===Mt?bt=st>=At?0:1:bt=1-i(0,o(.5/(At-Mt)+(st-Mt)/(At-Mt),1)),bt=wt(bt);else if(Lt===4)At===Mt?bt=0:(bt=i(0,o(.5/(At-Mt)+(st-Mt)/(At-Mt),1)),bt<.5?bt*=2:bt=1-2*(bt-.5)),bt=wt(bt);else if(Lt===5){if(At===Mt)bt=0;else{var Ht=At-Mt;st=o(i(0,st+.5-Mt),At-Mt);var Tt=-Ht/2+st,Ct=Ht/2;bt=Math.sqrt(1-Tt*Tt/(Ct*Ct))}bt=wt(bt)}else Lt===6?(At===Mt?bt=0:(st=o(i(0,st+.5-Mt),At-Mt),bt=(1+Math.cos(Math.PI+Math.PI*2*st/(At-Mt)))/2),bt=wt(bt)):(st>=s(Mt)&&(st-Mt<0?bt=i(0,o(o(At,1)-(Mt-st),1)):bt=i(0,o(At-st,1))),bt=wt(bt));if(this.sm.v!==100){var St=this.sm.v*.01;St===0&&(St=1e-8);var It=.5-St*.5;bt<It?bt=0:(bt=(bt-It)/St,bt>1&&(bt=1))}return bt*this.a.v},getValue:function(st){this.iterateDynamicProperties(),this._mdf=st||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,st&&this.data.r===2&&(this.e.v=this._currentTextLength);var _=this.data.r===2?1:100/this.data.totalChars,ut=this.o.v/_,mt=this.s.v/_+ut,vt=this.e.v/_+ut;if(mt>vt){var wt=mt;mt=vt,vt=wt}this.finalS=mt,this.finalE=vt}},extendPrototype([DynamicPropertyContainer],$);function tt(rt,st,_){return new $(rt,st)}return{getTextSelectorProp:tt}}();function TextAnimatorDataProperty(i,o,s){var $={propType:!1},tt=PropertyFactory.getProp,rt=o.a;this.a={r:rt.r?tt(i,rt.r,0,degToRads,s):$,rx:rt.rx?tt(i,rt.rx,0,degToRads,s):$,ry:rt.ry?tt(i,rt.ry,0,degToRads,s):$,sk:rt.sk?tt(i,rt.sk,0,degToRads,s):$,sa:rt.sa?tt(i,rt.sa,0,degToRads,s):$,s:rt.s?tt(i,rt.s,1,.01,s):$,a:rt.a?tt(i,rt.a,1,0,s):$,o:rt.o?tt(i,rt.o,0,.01,s):$,p:rt.p?tt(i,rt.p,1,0,s):$,sw:rt.sw?tt(i,rt.sw,0,0,s):$,sc:rt.sc?tt(i,rt.sc,1,0,s):$,fc:rt.fc?tt(i,rt.fc,1,0,s):$,fh:rt.fh?tt(i,rt.fh,0,0,s):$,fs:rt.fs?tt(i,rt.fs,0,.01,s):$,fb:rt.fb?tt(i,rt.fb,0,.01,s):$,t:rt.t?tt(i,rt.t,0,0,s):$},this.s=TextSelectorProp.getTextSelectorProp(i,o.s,s),this.s.t=o.s.t}function TextAnimatorProperty(i,o,s){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=i,this._renderType=o,this._elem=s,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(s)}TextAnimatorProperty.prototype.searchProperties=function(){var i,o=this._textData.a.length,s,$=PropertyFactory.getProp;for(i=0;i<o;i+=1)s=this._textData.a[i],this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,s,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:$(this._elem,this._textData.p.a,0,0,this),f:$(this._elem,this._textData.p.f,0,0,this),l:$(this._elem,this._textData.p.l,0,0,this),r:$(this._elem,this._textData.p.r,0,0,this),p:$(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=$(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(i,o){if(this.lettersChangedFlag=o,!(!this._mdf&&!this._isFirstFrame&&!o&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var s=this._moreOptions.alignment.v,$=this._animatorsData,tt=this._textData,rt=this.mHelper,st=this._renderType,_=this.renderedLetters.length,ut,mt,vt,wt,bt=i.l,Mt,At,Lt,Ht,Tt,Ct,St,It,Bt,Ft,Gt,Xt,ir,$r,Tr;if(this._hasMaskedPath){if(Tr=this._pathData.m,!this._pathData.n||this._pathData._mdf){var xr=Tr.v;this._pathData.r.v&&(xr=xr.reverse()),Mt={tLength:0,segments:[]},wt=xr._length-1;var Xr;for(Xt=0,vt=0;vt<wt;vt+=1)Xr=bez.buildBezierData(xr.v[vt],xr.v[vt+1],[xr.o[vt][0]-xr.v[vt][0],xr.o[vt][1]-xr.v[vt][1]],[xr.i[vt+1][0]-xr.v[vt+1][0],xr.i[vt+1][1]-xr.v[vt+1][1]]),Mt.tLength+=Xr.segmentLength,Mt.segments.push(Xr),Xt+=Xr.segmentLength;vt=wt,Tr.v.c&&(Xr=bez.buildBezierData(xr.v[vt],xr.v[0],[xr.o[vt][0]-xr.v[vt][0],xr.o[vt][1]-xr.v[vt][1]],[xr.i[0][0]-xr.v[0][0],xr.i[0][1]-xr.v[0][1]]),Mt.tLength+=Xr.segmentLength,Mt.segments.push(Xr),Xt+=Xr.segmentLength),this._pathData.pi=Mt}if(Mt=this._pathData.pi,At=this._pathData.f.v,St=0,Ct=1,Ht=0,Tt=!0,Ft=Mt.segments,At<0&&Tr.v.c)for(Mt.tLength<Math.abs(At)&&(At=-Math.abs(At)%Mt.tLength),St=Ft.length-1,Bt=Ft[St].points,Ct=Bt.length-1;At<0;)At+=Bt[Ct].partialLength,Ct-=1,Ct<0&&(St-=1,Bt=Ft[St].points,Ct=Bt.length-1);Bt=Ft[St].points,It=Bt[Ct-1],Lt=Bt[Ct],Gt=Lt.partialLength}wt=bt.length,ut=0,mt=0;var ln=i.finalSize*1.2*.714,zr=!0,hr,Er,Nt,Wt,or;Wt=$.length;var ar,Fr=-1,Yr,hn,mn,En=At,Ln=St,wo=Ct,Po=-1,Ao,An,Eo,jn,bn,Xn,Io,gs,zo="",So=this.defaultPropsArray,hs;if(i.j===2||i.j===1){var Mo=0,ys=0,Jo=i.j===2?-.5:-1,Ko=0,ws=!0;for(vt=0;vt<wt;vt+=1)if(bt[vt].n){for(Mo&&(Mo+=ys);Ko<vt;)bt[Ko].animatorJustifyOffset=Mo,Ko+=1;Mo=0,ws=!0}else{for(Nt=0;Nt<Wt;Nt+=1)hr=$[Nt].a,hr.t.propType&&(ws&&i.j===2&&(ys+=hr.t.v*Jo),Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),ar.length?Mo+=hr.t.v*ar[0]*Jo:Mo+=hr.t.v*ar*Jo);ws=!1}for(Mo&&(Mo+=ys);Ko<vt;)bt[Ko].animatorJustifyOffset=Mo,Ko+=1}for(vt=0;vt<wt;vt+=1){if(rt.reset(),Ao=1,bt[vt].n)ut=0,mt+=i.yOffset,mt+=zr?1:0,At=En,zr=!1,this._hasMaskedPath&&(St=Ln,Ct=wo,Bt=Ft[St].points,It=Bt[Ct-1],Lt=Bt[Ct],Gt=Lt.partialLength,Ht=0),zo="",gs="",Xn="",hs="",So=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Po!==bt[vt].line){switch(i.j){case 1:At+=Xt-i.lineWidths[bt[vt].line];break;case 2:At+=(Xt-i.lineWidths[bt[vt].line])/2;break}Po=bt[vt].line}Fr!==bt[vt].ind&&(bt[Fr]&&(At+=bt[Fr].extra),At+=bt[vt].an/2,Fr=bt[vt].ind),At+=s[0]*bt[vt].an*.005;var is=0;for(Nt=0;Nt<Wt;Nt+=1)hr=$[Nt].a,hr.p.propType&&(Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),ar.length?is+=hr.p.v[0]*ar[0]:is+=hr.p.v[0]*ar),hr.a.propType&&(Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),ar.length?is+=hr.a.v[0]*ar[0]:is+=hr.a.v[0]*ar);for(Tt=!0,this._pathData.a.v&&(At=bt[0].an*.5+(Xt-this._pathData.f.v-bt[0].an*.5-bt[bt.length-1].an*.5)*Fr/(wt-1),At+=this._pathData.f.v);Tt;)Ht+Gt>=At+is||!Bt?(ir=(At+is-Ht)/Lt.partialLength,hn=It.point[0]+(Lt.point[0]-It.point[0])*ir,mn=It.point[1]+(Lt.point[1]-It.point[1])*ir,rt.translate(-s[0]*bt[vt].an*.005,-(s[1]*ln)*.01),Tt=!1):Bt&&(Ht+=Lt.partialLength,Ct+=1,Ct>=Bt.length&&(Ct=0,St+=1,Ft[St]?Bt=Ft[St].points:Tr.v.c?(Ct=0,St=0,Bt=Ft[St].points):(Ht-=Lt.partialLength,Bt=null)),Bt&&(It=Lt,Lt=Bt[Ct],Gt=Lt.partialLength));Yr=bt[vt].an/2-bt[vt].add,rt.translate(-Yr,0,0)}else Yr=bt[vt].an/2-bt[vt].add,rt.translate(-Yr,0,0),rt.translate(-s[0]*bt[vt].an*.005,-s[1]*ln*.01,0);for(Nt=0;Nt<Wt;Nt+=1)hr=$[Nt].a,hr.t.propType&&(Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),(ut!==0||i.j!==0)&&(this._hasMaskedPath?ar.length?At+=hr.t.v*ar[0]:At+=hr.t.v*ar:ar.length?ut+=hr.t.v*ar[0]:ut+=hr.t.v*ar));for(i.strokeWidthAnim&&(Eo=i.sw||0),i.strokeColorAnim&&(i.sc?An=[i.sc[0],i.sc[1],i.sc[2]]:An=[0,0,0]),i.fillColorAnim&&i.fc&&(jn=[i.fc[0],i.fc[1],i.fc[2]]),Nt=0;Nt<Wt;Nt+=1)hr=$[Nt].a,hr.a.propType&&(Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),ar.length?rt.translate(-hr.a.v[0]*ar[0],-hr.a.v[1]*ar[1],hr.a.v[2]*ar[2]):rt.translate(-hr.a.v[0]*ar,-hr.a.v[1]*ar,hr.a.v[2]*ar));for(Nt=0;Nt<Wt;Nt+=1)hr=$[Nt].a,hr.s.propType&&(Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),ar.length?rt.scale(1+(hr.s.v[0]-1)*ar[0],1+(hr.s.v[1]-1)*ar[1],1):rt.scale(1+(hr.s.v[0]-1)*ar,1+(hr.s.v[1]-1)*ar,1));for(Nt=0;Nt<Wt;Nt+=1){if(hr=$[Nt].a,Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),hr.sk.propType&&(ar.length?rt.skewFromAxis(-hr.sk.v*ar[0],hr.sa.v*ar[1]):rt.skewFromAxis(-hr.sk.v*ar,hr.sa.v*ar)),hr.r.propType&&(ar.length?rt.rotateZ(-hr.r.v*ar[2]):rt.rotateZ(-hr.r.v*ar)),hr.ry.propType&&(ar.length?rt.rotateY(hr.ry.v*ar[1]):rt.rotateY(hr.ry.v*ar)),hr.rx.propType&&(ar.length?rt.rotateX(hr.rx.v*ar[0]):rt.rotateX(hr.rx.v*ar)),hr.o.propType&&(ar.length?Ao+=(hr.o.v*ar[0]-Ao)*ar[0]:Ao+=(hr.o.v*ar-Ao)*ar),i.strokeWidthAnim&&hr.sw.propType&&(ar.length?Eo+=hr.sw.v*ar[0]:Eo+=hr.sw.v*ar),i.strokeColorAnim&&hr.sc.propType)for(bn=0;bn<3;bn+=1)ar.length?An[bn]+=(hr.sc.v[bn]-An[bn])*ar[0]:An[bn]+=(hr.sc.v[bn]-An[bn])*ar;if(i.fillColorAnim&&i.fc){if(hr.fc.propType)for(bn=0;bn<3;bn+=1)ar.length?jn[bn]+=(hr.fc.v[bn]-jn[bn])*ar[0]:jn[bn]+=(hr.fc.v[bn]-jn[bn])*ar;hr.fh.propType&&(ar.length?jn=addHueToRGB(jn,hr.fh.v*ar[0]):jn=addHueToRGB(jn,hr.fh.v*ar)),hr.fs.propType&&(ar.length?jn=addSaturationToRGB(jn,hr.fs.v*ar[0]):jn=addSaturationToRGB(jn,hr.fs.v*ar)),hr.fb.propType&&(ar.length?jn=addBrightnessToRGB(jn,hr.fb.v*ar[0]):jn=addBrightnessToRGB(jn,hr.fb.v*ar))}}for(Nt=0;Nt<Wt;Nt+=1)hr=$[Nt].a,hr.p.propType&&(Er=$[Nt].s,ar=Er.getMult(bt[vt].anIndexes[Nt],tt.a[Nt].s.totalChars),this._hasMaskedPath?ar.length?rt.translate(0,hr.p.v[1]*ar[0],-hr.p.v[2]*ar[1]):rt.translate(0,hr.p.v[1]*ar,-hr.p.v[2]*ar):ar.length?rt.translate(hr.p.v[0]*ar[0],hr.p.v[1]*ar[1],-hr.p.v[2]*ar[2]):rt.translate(hr.p.v[0]*ar,hr.p.v[1]*ar,-hr.p.v[2]*ar));if(i.strokeWidthAnim&&(Xn=Eo<0?0:Eo),i.strokeColorAnim&&(Io="rgb("+Math.round(An[0]*255)+","+Math.round(An[1]*255)+","+Math.round(An[2]*255)+")"),i.fillColorAnim&&i.fc&&(gs="rgb("+Math.round(jn[0]*255)+","+Math.round(jn[1]*255)+","+Math.round(jn[2]*255)+")"),this._hasMaskedPath){if(rt.translate(0,-i.ls),rt.translate(0,s[1]*ln*.01+mt,0),this._pathData.p.v){$r=(Lt.point[1]-It.point[1])/(Lt.point[0]-It.point[0]);var Oo=Math.atan($r)*180/Math.PI;Lt.point[0]<It.point[0]&&(Oo+=180),rt.rotate(-Oo*Math.PI/180)}rt.translate(hn,mn,0),At-=s[0]*bt[vt].an*.005,bt[vt+1]&&Fr!==bt[vt+1].ind&&(At+=bt[vt].an/2,At+=i.tr*.001*i.finalSize)}else{switch(rt.translate(ut,mt,0),i.ps&&rt.translate(i.ps[0],i.ps[1]+i.ascent,0),i.j){case 1:rt.translate(bt[vt].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[bt[vt].line]),0,0);break;case 2:rt.translate(bt[vt].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[bt[vt].line])/2,0,0);break}rt.translate(0,-i.ls),rt.translate(Yr,0,0),rt.translate(s[0]*bt[vt].an*.005,s[1]*ln*.01,0),ut+=bt[vt].l+i.tr*.001*i.finalSize}st==="html"?zo=rt.toCSS():st==="svg"?zo=rt.to2dCSS():So=[rt.props[0],rt.props[1],rt.props[2],rt.props[3],rt.props[4],rt.props[5],rt.props[6],rt.props[7],rt.props[8],rt.props[9],rt.props[10],rt.props[11],rt.props[12],rt.props[13],rt.props[14],rt.props[15]],hs=Ao}_<=vt?(or=new LetterProps(hs,Xn,Io,gs,zo,So),this.renderedLetters.push(or),_+=1,this.lettersChangedFlag=!0):(or=this.renderedLetters[vt],this.lettersChangedFlag=or.update(hs,Xn,Io,gs,zo,So)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(i,o,s){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(i,o,s),this.textProperty=new TextProperty(this,i.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(i.t,this.renderType,this),this.initTransform(i,o,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(i){this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange)},ITextElement.prototype.createPathShape=function(i,o){var s,$=o.length,tt,rt="";for(s=0;s<$;s+=1)o[s].ty==="sh"&&(tt=o[s].ks.k,rt+=buildShapeString(tt,tt.i.length,!0,i));return rt},ITextElement.prototype.updateDocumentData=function(i,o){this.textProperty.updateDocumentData(i,o)},ITextElement.prototype.canResizeFont=function(i){this.textProperty.canResizeFont(i)},ITextElement.prototype.setMinimumFontSize=function(i){this.textProperty.setMinimumFontSize(i)},ITextElement.prototype.applyTextPropertiesToMatrix=function(i,o,s,$,tt){switch(i.ps&&o.translate(i.ps[0],i.ps[1]+i.ascent,0),o.translate(0,-i.ls,0),i.j){case 1:o.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[s]),0,0);break;case 2:o.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[s])/2,0,0);break}o.translate($,tt,0)},ITextElement.prototype.buildColor=function(i){return"rgb("+Math.round(i[0]*255)+","+Math.round(i[1]*255)+","+Math.round(i[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(i,o,s){this.textSpans=[],this.renderType="svg",this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(i){for(var o=0,s=i.length,$=[],tt="";o<s;)i[o]===String.fromCharCode(13)||i[o]===String.fromCharCode(3)?($.push(tt),tt=""):tt+=i[o],o+=1;return $.push(tt),$},SVGTextLottieElement.prototype.buildShapeData=function(i,o){if(i.shapes&&i.shapes.length){var s=i.shapes[0];if(s.it){var $=s.it[s.it.length-1];$.s&&($.s.k[0]=o,$.s.k[1]=o)}}return i},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var i,o,s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s?s.l.length:0),s.fc?this.layerElement.setAttribute("fill",this.buildColor(s.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(s.sc)),this.layerElement.setAttribute("stroke-width",s.sw)),this.layerElement.setAttribute("font-size",s.finalSize);var $=this.globalData.fontManager.getFontByName(s.f);if($.fClass)this.layerElement.setAttribute("class",$.fClass);else{this.layerElement.setAttribute("font-family",$.fFamily);var tt=s.fWeight,rt=s.fStyle;this.layerElement.setAttribute("font-style",rt),this.layerElement.setAttribute("font-weight",tt)}this.layerElement.setAttribute("aria-label",s.t);var st=s.l||[],_=!!this.globalData.fontManager.chars;o=st.length;var ut,mt=this.mHelper,vt="",wt=this.data.singleShape,bt=0,Mt=0,At=!0,Lt=s.tr*.001*s.finalSize;if(wt&&!_&&!s.sz){var Ht=this.textContainer,Tt="start";switch(s.j){case 1:Tt="end";break;case 2:Tt="middle";break;default:Tt="start";break}Ht.setAttribute("text-anchor",Tt),Ht.setAttribute("letter-spacing",Lt);var Ct=this.buildTextContents(s.finalText);for(o=Ct.length,Mt=s.ps?s.ps[1]+s.ascent:0,i=0;i<o;i+=1)ut=this.textSpans[i].span||createNS("tspan"),ut.textContent=Ct[i],ut.setAttribute("x",0),ut.setAttribute("y",Mt),ut.style.display="inherit",Ht.appendChild(ut),this.textSpans[i]||(this.textSpans[i]={span:null,glyph:null}),this.textSpans[i].span=ut,Mt+=s.finalLineHeight;this.layerElement.appendChild(Ht)}else{var St=this.textSpans.length,It;for(i=0;i<o;i+=1){if(this.textSpans[i]||(this.textSpans[i]={span:null,childSpan:null,glyph:null}),!_||!wt||i===0){if(ut=St>i?this.textSpans[i].span:createNS(_?"g":"text"),St<=i){if(ut.setAttribute("stroke-linecap","butt"),ut.setAttribute("stroke-linejoin","round"),ut.setAttribute("stroke-miterlimit","4"),this.textSpans[i].span=ut,_){var Bt=createNS("g");ut.appendChild(Bt),this.textSpans[i].childSpan=Bt}this.textSpans[i].span=ut,this.layerElement.appendChild(ut)}ut.style.display="inherit"}if(mt.reset(),wt&&(st[i].n&&(bt=-Lt,Mt+=s.yOffset,Mt+=At?1:0,At=!1),this.applyTextPropertiesToMatrix(s,mt,st[i].line,bt,Mt),bt+=st[i].l||0,bt+=Lt),_){It=this.globalData.fontManager.getCharData(s.finalText[i],$.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily);var Ft;if(It.t===1)Ft=new SVGCompElement(It.data,this.globalData,this);else{var Gt=emptyShapeData;It.data&&It.data.shapes&&(Gt=this.buildShapeData(It.data,s.finalSize)),Ft=new SVGShapeElement(Gt,this.globalData,this)}if(this.textSpans[i].glyph){var Xt=this.textSpans[i].glyph;this.textSpans[i].childSpan.removeChild(Xt.layerElement),Xt.destroy()}this.textSpans[i].glyph=Ft,Ft._debug=!0,Ft.prepareFrame(0),Ft.renderFrame(),this.textSpans[i].childSpan.appendChild(Ft.layerElement),It.t===1&&this.textSpans[i].childSpan.setAttribute("transform","scale("+s.finalSize/100+","+s.finalSize/100+")")}else wt&&ut.setAttribute("transform","translate("+mt.props[12]+","+mt.props[13]+")"),ut.textContent=st[i].val,ut.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}wt&&ut&&ut.setAttribute("d",vt)}for(;i<this.textSpans.length;)this.textSpans[i].span.style.display="none",i+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var i=this.layerElement.getBBox();this.bbox={top:i.y,left:i.x,width:i.width,height:i.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var i,o=this.textSpans.length,s;for(this.renderedFrame=this.comp.renderedFrame,i=0;i<o;i+=1)s=this.textSpans[i].glyph,s&&(s.prepareFrame(this.comp.renderedFrame-this.data.st),s._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var i,o,s=this.textAnimator.renderedLetters,$=this.textProperty.currentData.l;o=$.length;var tt,rt,st;for(i=0;i<o;i+=1)$[i].n||(tt=s[i],rt=this.textSpans[i].span,st=this.textSpans[i].glyph,st&&st.renderFrame(),tt._mdf.m&&rt.setAttribute("transform",tt.m),tt._mdf.o&&rt.setAttribute("opacity",tt.o),tt._mdf.sw&&rt.setAttribute("stroke-width",tt.sw),tt._mdf.sc&&rt.setAttribute("stroke",tt.sc),tt._mdf.fc&&rt.setAttribute("fill",tt.fc))}};function ISolidElement(i,o,s){this.initElement(i,o,s)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var i=createNS("rect");i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.layerElement.appendChild(i)};function NullElement(i,o,s){this.initFrame(),this.initBaseData(i,o,s),this.initFrame(),this.initTransform(i,o,s),this.initHierarchy()}NullElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(i){return new NullElement(i,this.globalData,this)},SVGRendererBase.prototype.createShape=function(i){return new SVGShapeElement(i,this.globalData,this)},SVGRendererBase.prototype.createText=function(i){return new SVGTextLottieElement(i,this.globalData,this)},SVGRendererBase.prototype.createImage=function(i){return new IImageElement(i,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(i){return new ISolidElement(i,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(i){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+i.w+" "+i.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",i.w),this.svgElement.setAttribute("height",i.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var o=this.globalData.defs;this.setupGlobalData(i,o),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=i;var s=createNS("clipPath"),$=createNS("rect");$.setAttribute("width",i.w),$.setAttribute("height",i.h),$.setAttribute("x",0),$.setAttribute("y",0);var tt=createElementID();s.setAttribute("id",tt),s.appendChild($),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+tt+")"),o.appendChild(s),this.layers=i.layers,this.elements=createSizedArray(i.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var i,o=this.layers?this.layers.length:0;for(i=0;i<o;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(i){var o=0,s=this.layers.length;for(o=0;o<s;o+=1)if(this.layers[o].ind===i)return o;return-1},SVGRendererBase.prototype.buildItem=function(i){var o=this.elements;if(!(o[i]||this.layers[i].ty===99)){o[i]=!0;var s=this.createItem(this.layers[i]);if(o[i]=s,getExpressionsPlugin()&&(this.layers[i].ty===0&&this.globalData.projectInterface.registerComposition(s),s.initExpressions()),this.appendElementInPos(s,i),this.layers[i].tt){var $="tp"in this.layers[i]?this.findIndexByInd(this.layers[i].tp):i-1;if($===-1)return;if(!this.elements[$]||this.elements[$]===!0)this.buildItem($),this.addPendingElement(s);else{var tt=o[$],rt=tt.getMatte(this.layers[i].tt);s.setMatte(rt)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();if(i.checkParenting(),i.data.tt)for(var o=0,s=this.elements.length;o<s;){if(this.elements[o]===i){var $="tp"in i.data?this.findIndexByInd(i.data.tp):o-1,tt=this.elements[$],rt=tt.getMatte(this.layers[o].tt);i.setMatte(rt);break}o+=1}}},SVGRendererBase.prototype.renderFrame=function(i){if(!(this.renderedFrame===i||this.destroyed)){i===null?i=this.renderedFrame:this.renderedFrame=i,this.globalData.frameNum=i,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=i,this.globalData._mdf=!1;var o,s=this.layers.length;for(this.completeLayers||this.checkLayers(i),o=s-1;o>=0;o-=1)(this.completeLayers||this.elements[o])&&this.elements[o].prepareFrame(i-this.layers[o].st);if(this.globalData._mdf)for(o=0;o<s;o+=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(i,o){var s=i.getBaseElement();if(s){for(var $=0,tt;$<o;)this.elements[$]&&this.elements[$]!==!0&&this.elements[$].getBaseElement()&&(tt=this.elements[$].getBaseElement()),$+=1;tt?this.layerElement.insertBefore(s,tt):this.layerElement.appendChild(s)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(i,o,s){this.initFrame(),this.initBaseData(i,o,s),this.initTransform(i,o,s),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!o.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(i){if(this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=i/this.data.sr;else{var o=this.tm.v;o===this.data.op&&(o=this.data.op-1),this.renderedFrame=o}var s,$=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),s=$-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&(this.elements[s].prepareFrame(this.renderedFrame-this.layers[s].st),this.elements[s]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var i,o=this.layers.length;for(i=0;i<o;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},ICompElement.prototype.setElements=function(i){this.elements=i},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var i,o=this.layers.length;for(i=0;i<o;i+=1)this.elements[i]&&this.elements[i].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(i,o,s){this.layers=i.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,o,s),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,o.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)};function SVGRenderer(i,o){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var s="";if(o&&o.title){var $=createNS("title"),tt=createElementID();$.setAttribute("id",tt),$.textContent=o.title,this.svgElement.appendChild($),s+=tt}if(o&&o.description){var rt=createNS("desc"),st=createElementID();rt.setAttribute("id",st),rt.textContent=o.description,this.svgElement.appendChild(rt),s+=" "+st}s&&this.svgElement.setAttribute("aria-labelledby",s);var _=createNS("defs");this.svgElement.appendChild(_);var ut=createNS("g");this.svgElement.appendChild(ut),this.layerElement=ut,this.renderConfig={preserveAspectRatio:o&&o.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:o&&o.contentVisibility||"visible",progressiveLoad:o&&o.progressiveLoad||!1,hideOnTransparent:!(o&&o.hideOnTransparent===!1),viewBoxOnly:o&&o.viewBoxOnly||!1,viewBoxSize:o&&o.viewBoxSize||!1,className:o&&o.className||"",id:o&&o.id||"",focusable:o&&o.focusable,filterSize:{width:o&&o.filterSize&&o.filterSize.width||"100%",height:o&&o.filterSize&&o.filterSize.height||"100%",x:o&&o.filterSize&&o.filterSize.x||"0%",y:o&&o.filterSize&&o.filterSize.y||"0%"},width:o&&o.width,height:o&&o.height,runExpressions:!o||o.runExpressions===void 0||o.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:_,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)};function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var i,o=15;for(this.savedOp=createTypedArray("float32",o),i=0;i<o;i+=1)this.saved[i]=createTypedArray("float32",16);this._length=o}CVContextData.prototype.duplicate=function(){var i=this._length*2,o=this.savedOp;this.savedOp=createTypedArray("float32",i),this.savedOp.set(o);var s=0;for(s=this._length;s<i;s+=1)this.saved[s]=createTypedArray("float32",16);this._length=i},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVContextData.prototype.popTransform=function(){var i=this.saved[this.cArrPos],o,s=this.cTr.props;for(o=0;o<16;o+=1)s[o]=i[o];return i},CVContextData.prototype.popOpacity=function(){var i=this.savedOp[this.cArrPos];return this.cO=i,i},CVContextData.prototype.pop=function(){this.cArrPos-=1;var i=this.popTransform(),o=this.popOpacity();return{transform:i,opacity:o}},CVContextData.prototype.push=function(){var i=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var o,s=this.saved[this.cArrPos];for(o=0;o<16;o+=1)s[o]=i[o];this.savedOp[this.cArrPos]=this.cO,this.cArrPos+=1},CVContextData.prototype.getTransform=function(){return this.cTr},CVContextData.prototype.getOpacity=function(){return this.cO},CVContextData.prototype.setOpacity=function(i){this.cO=i};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(o){var s,$=o.length,tt="_";for(s=0;s<$;s+=1)tt+=o[s].transform.key+"_";var rt=this.sequences[tt];return rt||(rt={transforms:[].concat(o),finalTransform:new Matrix,_mdf:!1},this.sequences[tt]=rt,this.sequenceList.push(rt)),rt},processSequence:function(o,s){for(var $=0,tt=o.transforms.length,rt=s;$<tt&&!s;){if(o.transforms[$].transform.mProps._mdf){rt=!0;break}$+=1}if(rt)for(o.finalTransform.reset(),$=tt-1;$>=0;$-=1)o.finalTransform.multiply(o.transforms[$].transform.mProps.v);o._mdf=rt},processSequences:function(o){var s,$=this.sequenceList.length;for(s=0;s<$;s+=1)this.processSequence(this.sequenceList[s],o)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var o="__lottie_element_luma_buffer",s=null,$=null,tt=null;function rt(){var ut=createNS("svg"),mt=createNS("filter"),vt=createNS("feColorMatrix");return mt.setAttribute("id",o),vt.setAttribute("type","matrix"),vt.setAttribute("color-interpolation-filters","sRGB"),vt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),mt.appendChild(vt),ut.appendChild(mt),ut.setAttribute("id",o+"_svg"),featureSupport.svgLumaHidden&&(ut.style.display="none"),ut}function st(){s||(tt=rt(),document.body.appendChild(tt),s=createTag("canvas"),$=s.getContext("2d"),$.filter="url(#"+o+")",$.fillStyle="rgba(0,0,0,0)",$.fillRect(0,0,1,1))}function _(ut){return s||st(),s.width=ut.width,s.height=ut.height,$.filter="url(#"+o+")",s}return{load:st,get:_}};function createCanvas(i,o){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(i,o);var s=createTag("canvas");return s.width=i,s.height=o,s}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(i){var o,s=i.data.ef?i.data.ef.length:0;this.filters=[];var $;for(o=0;o<s;o+=1){$=null;var tt=i.data.ef[o].ty;if(registeredEffects[tt]){var rt=registeredEffects[tt].effect;$=new rt(i.effectsManager.effectElements[o],i)}$&&this.filters.push($)}this.filters.length&&i.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(i){var o,s=this.filters.length;for(o=0;o<s;o+=1)this.filters[o].renderFrame(i)},CVEffects.prototype.getEffects=function(i){var o,s=this.filters.length,$=[];for(o=0;o<s;o+=1)this.filters[o].type===i&&$.push(this.filters[o]);return $};function registerEffect(i,o){registeredEffects[i]={effect:o}}function CVMaskElement(i,o){this.data=i,this.element=o,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var s,$=this.masksProperties.length,tt=!1;for(s=0;s<$;s+=1)this.masksProperties[s].mode!=="n"&&(tt=!0),this.viewData[s]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[s],3);this.hasMasks=tt,tt&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var i=this.element.finalTransform.mat,o=this.element.canvasContext,s,$=this.masksProperties.length,tt,rt,st;for(o.beginPath(),s=0;s<$;s+=1)if(this.masksProperties[s].mode!=="n"){this.masksProperties[s].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),st=this.viewData[s].v,tt=i.applyToPointArray(st.v[0][0],st.v[0][1],0),o.moveTo(tt[0],tt[1]);var _,ut=st._length;for(_=1;_<ut;_+=1)rt=i.applyToTriplePoints(st.o[_-1],st.i[_],st.v[_]),o.bezierCurveTo(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5]);rt=i.applyToTriplePoints(st.o[_-1],st.i[0],st.v[0]),o.bezierCurveTo(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var o=this.globalData.canvasContext,s=assetLoader.createCanvas(o.canvas.width,o.canvas.height);this.buffers.push(s);var $=assetLoader.createCanvas(o.canvas.width,o.canvas.height);this.buffers.push($),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var o=this.globalData;if(o.blendMode!==this.data.bm){o.blendMode=this.data.bm;var s=getBlendMode(this.data.bm);o.canvasContext.globalCompositeOperation=s}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(o){o.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var o=this.buffers[0],s=o.getContext("2d");this.clearCanvas(s),s.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var o=this.buffers[1],s=o.getContext("2d");this.clearCanvas(s),s.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var $=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if($.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var tt=assetLoader.getLumaCanvas(this.canvasContext.canvas),rt=tt.getContext("2d");rt.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(tt,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(o,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(o){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!o)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var s=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(s),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(s),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(i,o,s,$){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var tt=4;o.ty==="rc"?tt=5:o.ty==="el"?tt=6:o.ty==="sr"&&(tt=7),this.sh=ShapePropertyFactory.getShapeProp(i,o,tt,i);var rt,st=s.length,_;for(rt=0;rt<st;rt+=1)s[rt].closed||(_={transforms:$.addTransformSequence(s[rt].transforms),trNodes:[]},this.styledShapes.push(_),s[rt].elements.push(_))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(i,o,s){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(i,o){var s={data:i,type:i.ty,preTransforms:this.transformsManager.addTransformSequence(o),transforms:[],elements:[],closed:i.hd===!0},$={};if(i.ty==="fl"||i.ty==="st"?($.c=PropertyFactory.getProp(this,i.c,1,255,this),$.c.k||(s.co="rgb("+bmFloor($.c.v[0])+","+bmFloor($.c.v[1])+","+bmFloor($.c.v[2])+")")):(i.ty==="gf"||i.ty==="gs")&&($.s=PropertyFactory.getProp(this,i.s,1,null,this),$.e=PropertyFactory.getProp(this,i.e,1,null,this),$.h=PropertyFactory.getProp(this,i.h||{k:0},0,.01,this),$.a=PropertyFactory.getProp(this,i.a||{k:0},0,degToRads,this),$.g=new GradientProperty(this,i.g,this)),$.o=PropertyFactory.getProp(this,i.o,0,.01,this),i.ty==="st"||i.ty==="gs"){if(s.lc=lineCapEnum[i.lc||2],s.lj=lineJoinEnum[i.lj||2],i.lj==1&&(s.ml=i.ml),$.w=PropertyFactory.getProp(this,i.w,0,null,this),$.w.k||(s.wi=$.w.v),i.d){var tt=new DashProperty(this,i.d,"canvas",this);$.d=tt,$.d.k||(s.da=$.d.dashArray,s.do=$.d.dashoffset[0])}}else s.r=i.r===2?"evenodd":"nonzero";return this.stylesList.push(s),$.style=s,$},CVShapeElement.prototype.createGroupElement=function(){var i={it:[],prevViewData:[]};return i},CVShapeElement.prototype.createTransformElement=function(i){var o={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,i.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,i,this)}};return o},CVShapeElement.prototype.createShapeElement=function(i){var o=new CVShapeData(this,i,this.stylesList,this.transformsManager);return this.shapes.push(o),this.addShapeToModifiers(o),o},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var i,o=this.itemsData.length;for(i=0;i<o;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),o=this.dynamicProperties.length,i=0;i<o;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(i){var o,s=this.stylesList.length;for(o=0;o<s;o+=1)this.stylesList[o].closed||this.stylesList[o].transforms.push(i)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var i,o=this.stylesList.length;for(i=0;i<o;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.pop()},CVShapeElement.prototype.closeStyles=function(i){var o,s=i.length;for(o=0;o<s;o+=1)i[o].closed=!0},CVShapeElement.prototype.searchShapes=function(i,o,s,$,tt){var rt,st=i.length-1,_,ut,mt=[],vt=[],wt,bt,Mt,At=[].concat(tt);for(rt=st;rt>=0;rt-=1){if(wt=this.searchProcessedElement(i[rt]),wt?o[rt]=s[wt-1]:i[rt]._shouldRender=$,i[rt].ty==="fl"||i[rt].ty==="st"||i[rt].ty==="gf"||i[rt].ty==="gs")wt?o[rt].style.closed=!1:o[rt]=this.createStyleElement(i[rt],At),mt.push(o[rt].style);else if(i[rt].ty==="gr"){if(!wt)o[rt]=this.createGroupElement(i[rt]);else for(ut=o[rt].it.length,_=0;_<ut;_+=1)o[rt].prevViewData[_]=o[rt].it[_];this.searchShapes(i[rt].it,o[rt].it,o[rt].prevViewData,$,At)}else i[rt].ty==="tr"?(wt||(Mt=this.createTransformElement(i[rt]),o[rt]=Mt),At.push(o[rt]),this.addTransformToStyleList(o[rt])):i[rt].ty==="sh"||i[rt].ty==="rc"||i[rt].ty==="el"||i[rt].ty==="sr"?wt||(o[rt]=this.createShapeElement(i[rt])):i[rt].ty==="tm"||i[rt].ty==="rd"||i[rt].ty==="pb"||i[rt].ty==="zz"||i[rt].ty==="op"?(wt?(bt=o[rt],bt.closed=!1):(bt=ShapeModifiers.getModifier(i[rt].ty),bt.init(this,i[rt]),o[rt]=bt,this.shapeModifiers.push(bt)),vt.push(bt)):i[rt].ty==="rp"&&(wt?(bt=o[rt],bt.closed=!0):(bt=ShapeModifiers.getModifier(i[rt].ty),o[rt]=bt,bt.init(this,i,rt,o),this.shapeModifiers.push(bt),$=!1),vt.push(bt));this.addProcessedElement(i[rt],rt+1)}for(this.removeTransformFromStyleList(),this.closeStyles(mt),st=vt.length,rt=0;rt<st;rt+=1)vt[rt].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(i,o){(i._opMdf||o.op._mdf||this._isFirstFrame)&&(o.opacity=i.opacity,o.opacity*=o.op.v,o._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var i,o=this.stylesList.length,s,$,tt,rt,st,_,ut=this.globalData.renderer,mt=this.globalData.canvasContext,vt,wt;for(i=0;i<o;i+=1)if(wt=this.stylesList[i],vt=wt.type,!((vt==="st"||vt==="gs")&&wt.wi===0||!wt.data._shouldRender||wt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(ut.save(),st=wt.elements,vt==="st"||vt==="gs"?(mt.strokeStyle=vt==="st"?wt.co:wt.grd,mt.lineWidth=wt.wi,mt.lineCap=wt.lc,mt.lineJoin=wt.lj,mt.miterLimit=wt.ml||0):mt.fillStyle=vt==="fl"?wt.co:wt.grd,ut.ctxOpacity(wt.coOp),vt!=="st"&&vt!=="gs"&&mt.beginPath(),ut.ctxTransform(wt.preTransforms.finalTransform.props),$=st.length,s=0;s<$;s+=1){for((vt==="st"||vt==="gs")&&(mt.beginPath(),wt.da&&(mt.setLineDash(wt.da),mt.lineDashOffset=wt.do)),_=st[s].trNodes,rt=_.length,tt=0;tt<rt;tt+=1)_[tt].t==="m"?mt.moveTo(_[tt].p[0],_[tt].p[1]):_[tt].t==="c"?mt.bezierCurveTo(_[tt].pts[0],_[tt].pts[1],_[tt].pts[2],_[tt].pts[3],_[tt].pts[4],_[tt].pts[5]):mt.closePath();(vt==="st"||vt==="gs")&&(mt.stroke(),wt.da&&mt.setLineDash(this.dashResetter))}vt!=="st"&&vt!=="gs"&&mt.fill(wt.r),ut.restore()}},CVShapeElement.prototype.renderShape=function(i,o,s,$){var tt,rt=o.length-1,st;for(st=i,tt=rt;tt>=0;tt-=1)o[tt].ty==="tr"?(st=s[tt].transform,this.renderShapeTransform(i,st)):o[tt].ty==="sh"||o[tt].ty==="el"||o[tt].ty==="rc"||o[tt].ty==="sr"?this.renderPath(o[tt],s[tt]):o[tt].ty==="fl"?this.renderFill(o[tt],s[tt],st):o[tt].ty==="st"?this.renderStroke(o[tt],s[tt],st):o[tt].ty==="gf"||o[tt].ty==="gs"?this.renderGradientFill(o[tt],s[tt],st):o[tt].ty==="gr"?this.renderShape(st,o[tt].it,s[tt].it):o[tt].ty;$&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(i,o){if(this._isFirstFrame||o._mdf||i.transforms._mdf){var s=i.trNodes,$=o.paths,tt,rt,st,_=$._length;s.length=0;var ut=i.transforms.finalTransform;for(st=0;st<_;st+=1){var mt=$.shapes[st];if(mt&&mt.v){for(rt=mt._length,tt=1;tt<rt;tt+=1)tt===1&&s.push({t:"m",p:ut.applyToPointArray(mt.v[0][0],mt.v[0][1],0)}),s.push({t:"c",pts:ut.applyToTriplePoints(mt.o[tt-1],mt.i[tt],mt.v[tt])});rt===1&&s.push({t:"m",p:ut.applyToPointArray(mt.v[0][0],mt.v[0][1],0)}),mt.c&&rt&&(s.push({t:"c",pts:ut.applyToTriplePoints(mt.o[tt-1],mt.i[0],mt.v[0])}),s.push({t:"z"}))}}i.trNodes=s}},CVShapeElement.prototype.renderPath=function(i,o){if(i.hd!==!0&&i._shouldRender){var s,$=o.styledShapes.length;for(s=0;s<$;s+=1)this.renderStyledShape(o.styledShapes[s],o.sh)}},CVShapeElement.prototype.renderFill=function(i,o,s){var $=o.style;(o.c._mdf||this._isFirstFrame)&&($.co="rgb("+bmFloor(o.c.v[0])+","+bmFloor(o.c.v[1])+","+bmFloor(o.c.v[2])+")"),(o.o._mdf||s._opMdf||this._isFirstFrame)&&($.coOp=o.o.v*s.opacity)},CVShapeElement.prototype.renderGradientFill=function(i,o,s){var $=o.style,tt;if(!$.grd||o.g._mdf||o.s._mdf||o.e._mdf||i.t!==1&&(o.h._mdf||o.a._mdf)){var rt=this.globalData.canvasContext,st=o.s.v,_=o.e.v;if(i.t===1)tt=rt.createLinearGradient(st[0],st[1],_[0],_[1]);else{var ut=Math.sqrt(Math.pow(st[0]-_[0],2)+Math.pow(st[1]-_[1],2)),mt=Math.atan2(_[1]-st[1],_[0]-st[0]),vt=o.h.v;vt>=1?vt=.99:vt<=-1&&(vt=-.99);var wt=ut*vt,bt=Math.cos(mt+o.a.v)*wt+st[0],Mt=Math.sin(mt+o.a.v)*wt+st[1];tt=rt.createRadialGradient(bt,Mt,0,st[0],st[1],ut)}var At,Lt=i.g.p,Ht=o.g.c,Tt=1;for(At=0;At<Lt;At+=1)o.g._hasOpacity&&o.g._collapsable&&(Tt=o.g.o[At*2+1]),tt.addColorStop(Ht[At*4]/100,"rgba("+Ht[At*4+1]+","+Ht[At*4+2]+","+Ht[At*4+3]+","+Tt+")");$.grd=tt}$.coOp=o.o.v*s.opacity},CVShapeElement.prototype.renderStroke=function(i,o,s){var $=o.style,tt=o.d;tt&&(tt._mdf||this._isFirstFrame)&&($.da=tt.dashArray,$.do=tt.dashoffset[0]),(o.c._mdf||this._isFirstFrame)&&($.co="rgb("+bmFloor(o.c.v[0])+","+bmFloor(o.c.v[1])+","+bmFloor(o.c.v[2])+")"),(o.o._mdf||s._opMdf||this._isFirstFrame)&&($.coOp=o.o.v*s.opacity),(o.w._mdf||this._isFirstFrame)&&($.wi=o.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(i,o,s){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var o=!1;i.fc?(o=!0,this.values.fill=this.buildColor(i.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=o;var s=!1;i.sc&&(s=!0,this.values.stroke=this.buildColor(i.sc),this.values.sWidth=i.sw);var $=this.globalData.fontManager.getFontByName(i.f),tt,rt,st=i.l,_=this.mHelper;this.stroke=s,this.values.fValue=i.finalSize+"px "+this.globalData.fontManager.getFontByName(i.f).fFamily,rt=i.finalText.length;var ut,mt,vt,wt,bt,Mt,At,Lt,Ht,Tt,Ct=this.data.singleShape,St=i.tr*.001*i.finalSize,It=0,Bt=0,Ft=!0,Gt=0;for(tt=0;tt<rt;tt+=1){ut=this.globalData.fontManager.getCharData(i.finalText[tt],$.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),mt=ut&&ut.data||{},_.reset(),Ct&&st[tt].n&&(It=-St,Bt+=i.yOffset,Bt+=Ft?1:0,Ft=!1),bt=mt.shapes?mt.shapes[0].it:[],At=bt.length,_.scale(i.finalSize/100,i.finalSize/100),Ct&&this.applyTextPropertiesToMatrix(i,_,st[tt].line,It,Bt),Ht=createSizedArray(At-1);var Xt=0;for(Mt=0;Mt<At;Mt+=1)if(bt[Mt].ty==="sh"){for(wt=bt[Mt].ks.k.i.length,Lt=bt[Mt].ks.k,Tt=[],vt=1;vt<wt;vt+=1)vt===1&&Tt.push(_.applyToX(Lt.v[0][0],Lt.v[0][1],0),_.applyToY(Lt.v[0][0],Lt.v[0][1],0)),Tt.push(_.applyToX(Lt.o[vt-1][0],Lt.o[vt-1][1],0),_.applyToY(Lt.o[vt-1][0],Lt.o[vt-1][1],0),_.applyToX(Lt.i[vt][0],Lt.i[vt][1],0),_.applyToY(Lt.i[vt][0],Lt.i[vt][1],0),_.applyToX(Lt.v[vt][0],Lt.v[vt][1],0),_.applyToY(Lt.v[vt][0],Lt.v[vt][1],0));Tt.push(_.applyToX(Lt.o[vt-1][0],Lt.o[vt-1][1],0),_.applyToY(Lt.o[vt-1][0],Lt.o[vt-1][1],0),_.applyToX(Lt.i[0][0],Lt.i[0][1],0),_.applyToY(Lt.i[0][0],Lt.i[0][1],0),_.applyToX(Lt.v[0][0],Lt.v[0][1],0),_.applyToY(Lt.v[0][0],Lt.v[0][1],0)),Ht[Xt]=Tt,Xt+=1}Ct&&(It+=st[tt].l,It+=St),this.textSpans[Gt]?this.textSpans[Gt].elem=Ht:this.textSpans[Gt]={elem:Ht},Gt+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var i=this.canvasContext;i.font=this.values.fValue,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var o,s,$,tt,rt,st,_=this.textAnimator.renderedLetters,ut=this.textProperty.currentData.l;s=ut.length;var mt,vt=null,wt=null,bt=null,Mt,At;for(o=0;o<s;o+=1)if(!ut[o].n){if(mt=_[o],mt&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(mt.p),this.globalData.renderer.ctxOpacity(mt.o)),this.fill){for(mt&&mt.fc?vt!==mt.fc&&(vt=mt.fc,i.fillStyle=mt.fc):vt!==this.values.fill&&(vt=this.values.fill,i.fillStyle=this.values.fill),Mt=this.textSpans[o].elem,tt=Mt.length,this.globalData.canvasContext.beginPath(),$=0;$<tt;$+=1)for(At=Mt[$],st=At.length,this.globalData.canvasContext.moveTo(At[0],At[1]),rt=2;rt<st;rt+=6)this.globalData.canvasContext.bezierCurveTo(At[rt],At[rt+1],At[rt+2],At[rt+3],At[rt+4],At[rt+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(mt&&mt.sw?bt!==mt.sw&&(bt=mt.sw,i.lineWidth=mt.sw):bt!==this.values.sWidth&&(bt=this.values.sWidth,i.lineWidth=this.values.sWidth),mt&&mt.sc?wt!==mt.sc&&(wt=mt.sc,i.strokeStyle=mt.sc):wt!==this.values.stroke&&(wt=this.values.stroke,i.strokeStyle=this.values.stroke),Mt=this.textSpans[o].elem,tt=Mt.length,this.globalData.canvasContext.beginPath(),$=0;$<tt;$+=1)for(At=Mt[$],st=At.length,this.globalData.canvasContext.moveTo(At[0],At[1]),rt=2;rt<st;rt+=6)this.globalData.canvasContext.bezierCurveTo(At[rt],At[rt+1],At[rt+2],At[rt+3],At[rt+4],At[rt+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}mt&&this.globalData.renderer.restore()}};function CVImageElement(i,o,s){this.assetData=o.getAssetData(i.refId),this.img=o.imageLoader.getAsset(this.assetData),this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var i=createTag("canvas");i.width=this.assetData.w,i.height=this.assetData.h;var o=i.getContext("2d"),s=this.img.width,$=this.img.height,tt=s/$,rt=this.assetData.w/this.assetData.h,st,_,ut=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;tt>rt&&ut==="xMidYMid slice"||tt<rt&&ut!=="xMidYMid slice"?(_=$,st=_*rt):(st=s,_=st/rt),o.drawImage(this.img,(s-st)/2,($-_)/2,st,_,0,0,this.assetData.w,this.assetData.h),this.img=i}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(i,o,s){this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var i=this.canvasContext;i.fillStyle=this.data.sc,i.fillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(i,o){this.animationItem=i,this.renderConfig={clearCanvas:o&&o.clearCanvas!==void 0?o.clearCanvas:!0,context:o&&o.context||null,progressiveLoad:o&&o.progressiveLoad||!1,preserveAspectRatio:o&&o.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:o&&o.contentVisibility||"visible",className:o&&o.className||"",id:o&&o.id||""},this.renderConfig.dpr=o&&o.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=o&&o.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(i){return new CVShapeElement(i,this.globalData,this)},CanvasRendererBase.prototype.createText=function(i){return new CVTextElement(i,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(i){return new CVImageElement(i,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(i){return new CVSolidElement(i,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(i){if(!(i[0]===1&&i[1]===0&&i[4]===0&&i[5]===1&&i[12]===0&&i[13]===0)){if(!this.renderConfig.clearCanvas){this.canvasContext.transform(i[0],i[1],i[4],i[5],i[12],i[13]);return}this.transformMat.cloneFromProps(i);var o=this.contextData.getTransform();this.transformMat.multiply(o),o.cloneFromProps(this.transformMat.props);var s=o.props;this.canvasContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13])}},CanvasRendererBase.prototype.ctxOpacity=function(i){var o=this.contextData.getOpacity();if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=i<0?0:i,this.globalData.currentGlobalAlpha=o;return}o*=i<0?0:i,this.contextData.setOpacity(o),this.globalData.currentGlobalAlpha!==o&&(this.canvasContext.globalAlpha=o,this.globalData.currentGlobalAlpha=o)},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(i){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}i&&this.canvasContext.save(),this.contextData.push()},CanvasRendererBase.prototype.restore=function(i){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}i&&(this.canvasContext.restore(),this.globalData.blendMode="source-over");var o=this.contextData.pop(),s=o.transform,$=o.opacity;this.canvasContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),this.globalData.currentGlobalAlpha!==$&&(this.canvasContext.globalAlpha=$,this.globalData.currentGlobalAlpha=$)},CanvasRendererBase.prototype.configAnimation=function(i){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var o=this.animationItem.container.style;o.width="100%",o.height="100%";var s="0px 0px 0px";o.transformOrigin=s,o.mozTransformOrigin=s,o.webkitTransformOrigin=s,o["-webkit-transform"]=s,o.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=i,this.layers=i.layers,this.transformCanvas={w:i.w,h:i.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(i,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(i.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(i,o){this.reset();var s,$;i?(s=i,$=o,this.canvasContext.canvas.width=s,this.canvasContext.canvas.height=$):(this.animationItem.wrapper&&this.animationItem.container?(s=this.animationItem.wrapper.offsetWidth,$=this.animationItem.wrapper.offsetHeight):(s=this.canvasContext.canvas.width,$=this.canvasContext.canvas.height),this.canvasContext.canvas.width=s*this.renderConfig.dpr,this.canvasContext.canvas.height=$*this.renderConfig.dpr);var tt,rt;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var st=this.renderConfig.preserveAspectRatio.split(" "),_=st[1]||"meet",ut=st[0]||"xMidYMid",mt=ut.substr(0,4),vt=ut.substr(4);tt=s/$,rt=this.transformCanvas.w/this.transformCanvas.h,rt>tt&&_==="meet"||rt<tt&&_==="slice"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=$/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=$/(this.transformCanvas.h/this.renderConfig.dpr)),mt==="xMid"&&(rt<tt&&_==="meet"||rt>tt&&_==="slice")?this.transformCanvas.tx=(s-this.transformCanvas.w*($/this.transformCanvas.h))/2*this.renderConfig.dpr:mt==="xMax"&&(rt<tt&&_==="meet"||rt>tt&&_==="slice")?this.transformCanvas.tx=(s-this.transformCanvas.w*($/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,vt==="YMid"&&(rt>tt&&_==="meet"||rt<tt&&_==="slice")?this.transformCanvas.ty=($-this.transformCanvas.h*(s/this.transformCanvas.w))/2*this.renderConfig.dpr:vt==="YMax"&&(rt>tt&&_==="meet"||rt<tt&&_==="slice")?this.transformCanvas.ty=($-this.transformCanvas.h*(s/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=$/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var i,o=this.layers?this.layers.length:0;for(i=o-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(i,o){if(!(this.renderedFrame===i&&this.renderConfig.clearCanvas===!0&&!o||this.destroyed||i===-1)){this.renderedFrame=i,this.globalData.frameNum=i-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||o,this.globalData.projectInterface.currentFrame=i;var s,$=this.layers.length;for(this.completeLayers||this.checkLayers(i),s=0;s<$;s+=1)(this.completeLayers||this.elements[s])&&this.elements[s].prepareFrame(i-this.layers[s].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),s=$-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(i){var o=this.elements;if(!(o[i]||this.layers[i].ty===99)){var s=this.createItem(this.layers[i],this,this.globalData);o[i]=s,s.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();i.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CVCompElement(i,o,s){this.completeLayers=!1,this.layers=i.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(i,o,s),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,o.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var i=this.canvasContext;i.beginPath(),i.moveTo(0,0),i.lineTo(this.data.w,0),i.lineTo(this.data.w,this.data.h),i.lineTo(0,this.data.h),i.lineTo(0,0),i.clip();var o,s=this.layers.length;for(o=s-1;o>=0;o-=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame()},CVCompElement.prototype.destroy=function(){var i,o=this.layers.length;for(i=o-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)};function CanvasRenderer(i,o){this.animationItem=i,this.renderConfig={clearCanvas:o&&o.clearCanvas!==void 0?o.clearCanvas:!0,context:o&&o.context||null,progressiveLoad:o&&o.progressiveLoad||!1,preserveAspectRatio:o&&o.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:o&&o.contentVisibility||"visible",className:o&&o.className||"",id:o&&o.id||"",runExpressions:!o||o.runExpressions===void 0||o.runExpressions},this.renderConfig.dpr=o&&o.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=o&&o.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var o=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var s=this.finalTransform.mat.toCSS();o.transform=s,o.webkitTransform=s}this.finalTransform._opMdf&&(o.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(i,o,s){this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var i;this.data.hasMask?(i=createNS("rect"),i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(i=createTag("div"),i.style.width=this.data.sw+"px",i.style.height=this.data.sh+"px",i.style.backgroundColor=this.data.sc),this.layerElement.appendChild(i)};function HShapeElement(i,o,s){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(i,o,s),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var i;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),i=this.svgElement;else{i=createNS("svg");var o=this.comp.data?this.comp.data:this.globalData.compSize;i.setAttribute("width",o.w),i.setAttribute("height",o.h),i.appendChild(this.shapesContainer),this.layerElement.appendChild(i)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=i},HShapeElement.prototype.getTransformedPoint=function(i,o){var s,$=i.length;for(s=0;s<$;s+=1)o=i[s].mProps.v.applyToPointArray(o[0],o[1],0);return o},HShapeElement.prototype.calculateShapeBoundingBox=function(i,o){var s=i.sh.v,$=i.transformers,tt,rt=s._length,st,_,ut,mt;if(!(rt<=1)){for(tt=0;tt<rt-1;tt+=1)st=this.getTransformedPoint($,s.v[tt]),_=this.getTransformedPoint($,s.o[tt]),ut=this.getTransformedPoint($,s.i[tt+1]),mt=this.getTransformedPoint($,s.v[tt+1]),this.checkBounds(st,_,ut,mt,o);s.c&&(st=this.getTransformedPoint($,s.v[tt]),_=this.getTransformedPoint($,s.o[tt]),ut=this.getTransformedPoint($,s.i[0]),mt=this.getTransformedPoint($,s.v[0]),this.checkBounds(st,_,ut,mt,o))}},HShapeElement.prototype.checkBounds=function(i,o,s,$,tt){this.getBoundsOfCurve(i,o,s,$);var rt=this.shapeBoundingBox;tt.x=bmMin(rt.left,tt.x),tt.xMax=bmMax(rt.right,tt.xMax),tt.y=bmMin(rt.top,tt.y),tt.yMax=bmMax(rt.bottom,tt.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(i,o,s,$){for(var tt=[[i[0],$[0]],[i[1],$[1]]],rt,st,_,ut,mt,vt,wt,bt=0;bt<2;++bt)st=6*i[bt]-12*o[bt]+6*s[bt],rt=-3*i[bt]+9*o[bt]-9*s[bt]+3*$[bt],_=3*o[bt]-3*i[bt],st|=0,rt|=0,_|=0,rt===0&&st===0||(rt===0?(ut=-_/st,ut>0&&ut<1&&tt[bt].push(this.calculateF(ut,i,o,s,$,bt))):(mt=st*st-4*_*rt,mt>=0&&(vt=(-st+bmSqrt(mt))/(2*rt),vt>0&&vt<1&&tt[bt].push(this.calculateF(vt,i,o,s,$,bt)),wt=(-st-bmSqrt(mt))/(2*rt),wt>0&&wt<1&&tt[bt].push(this.calculateF(wt,i,o,s,$,bt)))));this.shapeBoundingBox.left=bmMin.apply(null,tt[0]),this.shapeBoundingBox.top=bmMin.apply(null,tt[1]),this.shapeBoundingBox.right=bmMax.apply(null,tt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,tt[1])},HShapeElement.prototype.calculateF=function(i,o,s,$,tt,rt){return bmPow(1-i,3)*o[rt]+3*bmPow(1-i,2)*i*s[rt]+3*(1-i)*bmPow(i,2)*$[rt]+bmPow(i,3)*tt[rt]},HShapeElement.prototype.calculateBoundingBox=function(i,o){var s,$=i.length;for(s=0;s<$;s+=1)i[s]&&i[s].sh?this.calculateShapeBoundingBox(i[s],o):i[s]&&i[s].it?this.calculateBoundingBox(i[s].it,o):i[s]&&i[s].style&&i[s].w&&this.expandStrokeBoundingBox(i[s].w,o)},HShapeElement.prototype.expandStrokeBoundingBox=function(i,o){var s=0;if(i.keyframes){for(var $=0;$<i.keyframes.length;$+=1){var tt=i.keyframes[$].s;tt>s&&(s=tt)}s*=i.mult}else s=i.v*i.mult;o.x-=s,o.xMax+=s,o.y-=s,o.yMax+=s},HShapeElement.prototype.currentBoxContains=function(i){return this.currentBBox.x<=i.x&&this.currentBBox.y<=i.y&&this.currentBBox.width+this.currentBBox.x>=i.x+i.width&&this.currentBBox.height+this.currentBBox.y>=i.y+i.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var i=this.tempBoundingBox,o=999999;if(i.x=o,i.xMax=-o,i.y=o,i.yMax=-o,this.calculateBoundingBox(this.itemsData,i),i.width=i.xMax<i.x?0:i.xMax-i.x,i.height=i.yMax<i.y?0:i.yMax-i.y,this.currentBoxContains(i))return;var s=!1;if(this.currentBBox.w!==i.width&&(this.currentBBox.w=i.width,this.shapeCont.setAttribute("width",i.width),s=!0),this.currentBBox.h!==i.height&&(this.currentBBox.h=i.height,this.shapeCont.setAttribute("height",i.height),s=!0),s||this.currentBBox.x!==i.x||this.currentBBox.y!==i.y){this.currentBBox.w=i.width,this.currentBBox.h=i.height,this.currentBBox.x=i.x,this.currentBBox.y=i.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var $=this.shapeCont.style,tt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";$.transform=tt,$.webkitTransform=tt}}};function HTextElement(i,o,s){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var i=createNS("g");this.maskedElement.appendChild(i),this.innerElem=i}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var o=this.innerElem.style,s=i.fc?this.buildColor(i.fc):"rgba(0,0,0,0)";o.fill=s,o.color=s,i.sc&&(o.stroke=this.buildColor(i.sc),o.strokeWidth=i.sw+"px");var $=this.globalData.fontManager.getFontByName(i.f);if(!this.globalData.fontManager.chars)if(o.fontSize=i.finalSize+"px",o.lineHeight=i.finalSize+"px",$.fClass)this.innerElem.className=$.fClass;else{o.fontFamily=$.fFamily;var tt=i.fWeight,rt=i.fStyle;o.fontStyle=rt,o.fontWeight=tt}var st,_,ut=i.l;_=ut.length;var mt,vt,wt,bt=this.mHelper,Mt,At="",Lt=0;for(st=0;st<_;st+=1){if(this.globalData.fontManager.chars?(this.textPaths[Lt]?mt=this.textPaths[Lt]:(mt=createNS("path"),mt.setAttribute("stroke-linecap",lineCapEnum[1]),mt.setAttribute("stroke-linejoin",lineJoinEnum[2]),mt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[Lt]?(vt=this.textSpans[Lt],wt=vt.children[0]):(vt=createTag("div"),vt.style.lineHeight=0,wt=createNS("svg"),wt.appendChild(mt),styleDiv(vt)))):this.isMasked?mt=this.textPaths[Lt]?this.textPaths[Lt]:createNS("text"):this.textSpans[Lt]?(vt=this.textSpans[Lt],mt=this.textPaths[Lt]):(vt=createTag("span"),styleDiv(vt),mt=createTag("span"),styleDiv(mt),vt.appendChild(mt)),this.globalData.fontManager.chars){var Ht=this.globalData.fontManager.getCharData(i.finalText[st],$.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),Tt;if(Ht?Tt=Ht.data:Tt=null,bt.reset(),Tt&&Tt.shapes&&Tt.shapes.length&&(Mt=Tt.shapes[0].it,bt.scale(i.finalSize/100,i.finalSize/100),At=this.createPathShape(bt,Mt),mt.setAttribute("d",At)),this.isMasked)this.innerElem.appendChild(mt);else{if(this.innerElem.appendChild(vt),Tt&&Tt.shapes){document.body.appendChild(wt);var Ct=wt.getBBox();wt.setAttribute("width",Ct.width+2),wt.setAttribute("height",Ct.height+2),wt.setAttribute("viewBox",Ct.x-1+" "+(Ct.y-1)+" "+(Ct.width+2)+" "+(Ct.height+2));var St=wt.style,It="translate("+(Ct.x-1)+"px,"+(Ct.y-1)+"px)";St.transform=It,St.webkitTransform=It,ut[st].yOffset=Ct.y-1}else wt.setAttribute("width",1),wt.setAttribute("height",1);vt.appendChild(wt)}}else if(mt.textContent=ut[st].val,mt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(mt);else{this.innerElem.appendChild(vt);var Bt=mt.style,Ft="translate3d(0,"+-i.finalSize/1.2+"px,0)";Bt.transform=Ft,Bt.webkitTransform=Ft}this.isMasked?this.textSpans[Lt]=mt:this.textSpans[Lt]=vt,this.textSpans[Lt].style.display="block",this.textPaths[Lt]=mt,Lt+=1}for(;Lt<this.textSpans.length;)this.textSpans[Lt].style.display="none",Lt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var i;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),i=this.svgElement.style;var o="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";i.transform=o,i.webkitTransform=o}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var s,$,tt=0,rt=this.textAnimator.renderedLetters,st=this.textProperty.currentData.l;$=st.length;var _,ut,mt;for(s=0;s<$;s+=1)st[s].n?tt+=1:(ut=this.textSpans[s],mt=this.textPaths[s],_=rt[tt],tt+=1,_._mdf.m&&(this.isMasked?ut.setAttribute("transform",_.m):(ut.style.webkitTransform=_.m,ut.style.transform=_.m)),ut.style.opacity=_.o,_.sw&&_._mdf.sw&&mt.setAttribute("stroke-width",_.sw),_.sc&&_._mdf.sc&&mt.setAttribute("stroke",_.sc),_.fc&&_._mdf.fc&&(mt.setAttribute("fill",_.fc),mt.style.color=_.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var vt=this.innerElem.getBBox();this.currentBBox.w!==vt.width&&(this.currentBBox.w=vt.width,this.svgElement.setAttribute("width",vt.width)),this.currentBBox.h!==vt.height&&(this.currentBBox.h=vt.height,this.svgElement.setAttribute("height",vt.height));var wt=1;if(this.currentBBox.w!==vt.width+wt*2||this.currentBBox.h!==vt.height+wt*2||this.currentBBox.x!==vt.x-wt||this.currentBBox.y!==vt.y-wt){this.currentBBox.w=vt.width+wt*2,this.currentBBox.h=vt.height+wt*2,this.currentBBox.x=vt.x-wt,this.currentBBox.y=vt.y-wt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),i=this.svgElement.style;var bt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=bt,i.webkitTransform=bt}}}};function HCameraElement(i,o,s){this.initFrame(),this.initBaseData(i,o,s),this.initHierarchy();var $=PropertyFactory.getProp;if(this.pe=$(this,i.pe,0,0,this),i.ks.p.s?(this.px=$(this,i.ks.p.x,1,0,this),this.py=$(this,i.ks.p.y,1,0,this),this.pz=$(this,i.ks.p.z,1,0,this)):this.p=$(this,i.ks.p,1,0,this),i.ks.a&&(this.a=$(this,i.ks.a,1,0,this)),i.ks.or.k.length&&i.ks.or.k[0].to){var tt,rt=i.ks.or.k.length;for(tt=0;tt<rt;tt+=1)i.ks.or.k[tt].to=null,i.ks.or.k[tt].ti=null}this.or=$(this,i.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=$(this,i.ks.rx,0,degToRads,this),this.ry=$(this,i.ks.ry,0,degToRads,this),this.rz=$(this,i.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var i,o=this.comp.threeDElements.length,s,$,tt;for(i=0;i<o;i+=1)if(s=this.comp.threeDElements[i],s.type==="3d"){$=s.perspectiveElem.style,tt=s.container.style;var rt=this.pe.v+"px",st="0px 0px 0px",_="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";$.perspective=rt,$.webkitPerspective=rt,tt.transformOrigin=st,tt.mozTransformOrigin=st,tt.webkitTransformOrigin=st,$.transform=_,$.webkitTransform=_}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var i=this._isFirstFrame,o,s;if(this.hierarchy)for(s=this.hierarchy.length,o=0;o<s;o+=1)i=this.hierarchy[o].finalTransform.mProp._mdf||i;if(i||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(s=this.hierarchy.length-1,o=s;o>=0;o-=1){var $=this.hierarchy[o].finalTransform.mProp;this.mat.translate(-$.p.v[0],-$.p.v[1],$.p.v[2]),this.mat.rotateX(-$.or.v[0]).rotateY(-$.or.v[1]).rotateZ($.or.v[2]),this.mat.rotateX(-$.rx.v).rotateY(-$.ry.v).rotateZ($.rz.v),this.mat.scale(1/$.s.v[0],1/$.s.v[1],1/$.s.v[2]),this.mat.translate($.a.v[0],$.a.v[1],$.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var tt;this.p?tt=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:tt=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var rt=Math.sqrt(Math.pow(tt[0],2)+Math.pow(tt[1],2)+Math.pow(tt[2],2)),st=[tt[0]/rt,tt[1]/rt,tt[2]/rt],_=Math.sqrt(st[2]*st[2]+st[0]*st[0]),ut=Math.atan2(st[1],_),mt=Math.atan2(st[0],-st[2]);this.mat.rotateY(mt).rotateX(-ut)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var vt=!this._prevMat.equals(this.mat);if((vt||this.pe._mdf)&&this.comp.threeDElements){s=this.comp.threeDElements.length;var wt,bt,Mt;for(o=0;o<s;o+=1)if(wt=this.comp.threeDElements[o],wt.type==="3d"){if(vt){var At=this.mat.toCSS();Mt=wt.container.style,Mt.transform=At,Mt.webkitTransform=At}this.pe._mdf&&(bt=wt.perspectiveElem.style,bt.perspective=this.pe.v+"px",bt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(i,o,s){this.assetData=o.getAssetData(i.refId),this.initElement(i,o,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData),o=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(o),o.crossOrigin="anonymous",o.src=i,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(i,o){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:o&&o.className||"",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(o&&o.hideOnTransparent===!1),filterSize:{width:o&&o.filterSize&&o.filterSize.width||"400%",height:o&&o.filterSize&&o.filterSize.height||"400%",x:o&&o.filterSize&&o.filterSize.x||"-100%",y:o&&o.filterSize&&o.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();i.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(i,o){var s=i.getBaseElement();if(s){var $=this.layers[o];if(!$.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(s,o);else{for(var tt=0,rt,st,_;tt<o;)this.elements[tt]&&this.elements[tt]!==!0&&this.elements[tt].getBaseElement&&(st=this.elements[tt],_=this.layers[tt].ddd?this.getThreeDContainerByPos(tt):st.getBaseElement(),rt=_||rt),tt+=1;rt?(!$.ddd||!this.supports3d)&&this.layerElement.insertBefore(s,rt):(!$.ddd||!this.supports3d)&&this.layerElement.appendChild(s)}else this.addTo3dContainer(s,o)}},HybridRendererBase.prototype.createShape=function(i){return this.supports3d?new HShapeElement(i,this.globalData,this):new SVGShapeElement(i,this.globalData,this)},HybridRendererBase.prototype.createText=function(i){return this.supports3d?new HTextElement(i,this.globalData,this):new SVGTextLottieElement(i,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(i){return this.camera=new HCameraElement(i,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(i){return this.supports3d?new HImageElement(i,this.globalData,this):new IImageElement(i,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(i){return this.supports3d?new HSolidElement(i,this.globalData,this):new ISolidElement(i,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(i){for(var o=0,s=this.threeDElements.length;o<s;){if(this.threeDElements[o].startPos<=i&&this.threeDElements[o].endPos>=i)return this.threeDElements[o].perspectiveElem;o+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(i,o){var s=createTag("div"),$,tt;styleDiv(s);var rt=createTag("div");if(styleDiv(rt),o==="3d"){$=s.style,$.width=this.globalData.compSize.w+"px",$.height=this.globalData.compSize.h+"px";var st="50% 50%";$.webkitTransformOrigin=st,$.mozTransformOrigin=st,$.transformOrigin=st,tt=rt.style;var _="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";tt.transform=_,tt.webkitTransform=_}s.appendChild(rt);var ut={container:rt,perspectiveElem:s,startPos:i,endPos:i,type:o};return this.threeDElements.push(ut),ut},HybridRendererBase.prototype.build3dContainers=function(){var i,o=this.layers.length,s,$="";for(i=0;i<o;i+=1)this.layers[i].ddd&&this.layers[i].ty!==3?($!=="3d"&&($="3d",s=this.createThreeDContainer(i,"3d")),s.endPos=Math.max(s.endPos,i)):($!=="2d"&&($="2d",s=this.createThreeDContainer(i,"2d")),s.endPos=Math.max(s.endPos,i));for(o=this.threeDElements.length,i=o-1;i>=0;i-=1)this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(i,o){for(var s=0,$=this.threeDElements.length;s<$;){if(o<=this.threeDElements[s].endPos){for(var tt=this.threeDElements[s].startPos,rt;tt<o;)this.elements[tt]&&this.elements[tt].getBaseElement&&(rt=this.elements[tt].getBaseElement()),tt+=1;rt?this.threeDElements[s].container.insertBefore(i,rt):this.threeDElements[s].container.appendChild(i);break}s+=1}},HybridRendererBase.prototype.configAnimation=function(i){var o=createTag("div"),s=this.animationItem.wrapper,$=o.style;$.width=i.w+"px",$.height=i.h+"px",this.resizerElem=o,styleDiv(o),$.transformStyle="flat",$.mozTransformStyle="flat",$.webkitTransformStyle="flat",this.renderConfig.className&&o.setAttribute("class",this.renderConfig.className),s.appendChild(o),$.overflow="hidden";var tt=createNS("svg");tt.setAttribute("width","1"),tt.setAttribute("height","1"),styleDiv(tt),this.resizerElem.appendChild(tt);var rt=createNS("defs");tt.appendChild(rt),this.data=i,this.setupGlobalData(i,tt),this.globalData.defs=rt,this.layers=i.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var i,o=this.layers?this.layers.length:0;for(i=0;i<o;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var i=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight,s=i/o,$=this.globalData.compSize.w/this.globalData.compSize.h,tt,rt,st,_;$>s?(tt=i/this.globalData.compSize.w,rt=i/this.globalData.compSize.w,st=0,_=(o-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(tt=o/this.globalData.compSize.h,rt=o/this.globalData.compSize.h,st=(i-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,_=0);var ut=this.resizerElem.style;ut.webkitTransform="matrix3d("+tt+",0,0,0,0,"+rt+",0,0,0,0,1,0,"+st+","+_+",0,1)",ut.transform=ut.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var i=this.globalData.compSize.w,o=this.globalData.compSize.h,s,$=this.threeDElements.length;for(s=0;s<$;s+=1){var tt=this.threeDElements[s].perspectiveElem.style;tt.webkitPerspective=Math.sqrt(Math.pow(i,2)+Math.pow(o,2))+"px",tt.perspective=tt.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(i){var o,s=i.length,$=createTag("div");for(o=0;o<s;o+=1)if(i[o].xt){var tt=this.createComp(i[o],$,this.globalData.comp,null);tt.initExpressions(),this.globalData.projectInterface.registerComposition(tt)}};function HCompElement(i,o,s){this.layers=i.layers,this.supports3d=!i.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,o,s),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,o.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(i,o){for(var s=0,$;s<o;)this.elements[s]&&this.elements[s].getBaseElement&&($=this.elements[s].getBaseElement()),s+=1;$?this.layerElement.insertBefore(i,$):this.layerElement.appendChild(i)},HCompElement.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)};function HybridRenderer(i,o){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:o&&o.className||"",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(o&&o.hideOnTransparent===!1),filterSize:{width:o&&o.filterSize&&o.filterSize.width||"400%",height:o&&o.filterSize&&o.filterSize.height||"400%",x:o&&o.filterSize&&o.filterSize.x||"-100%",y:o&&o.filterSize&&o.filterSize.y||"-100%"},runExpressions:!o||o.runExpressions===void 0||o.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)};var CompExpressionInterface=function(){return function(i){function o(s){for(var $=0,tt=i.layers.length;$<tt;){if(i.layers[$].nm===s||i.layers[$].ind===s)return i.elements[$].layerInterface;$+=1}return null}return Object.defineProperty(o,"_name",{value:i.data.nm}),o.layer=o,o.pixelAspect=1,o.height=i.data.h||i.globalData.compSize.h,o.width=i.data.w||i.globalData.compSize.w,o.pixelAspect=1,o.frameDuration=1/i.globalData.frameRate,o.displayStartTime=0,o.numLayers=i.layers.length,o}}();function _typeof$2(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(s){return typeof s}:_typeof$2=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$2(i)}function seedRandom(i,o){var s=this,$=256,tt=6,rt=52,st="random",_=o.pow($,tt),ut=o.pow(2,rt),mt=ut*2,vt=$-1,wt;function bt(St,It,Bt){var Ft=[];It=It===!0?{entropy:!0}:It||{};var Gt=Ht(Lt(It.entropy?[St,Ct(i)]:St===null?Tt():St,3),Ft),Xt=new Mt(Ft),ir=function(){for(var Tr=Xt.g(tt),xr=_,Xr=0;Tr<ut;)Tr=(Tr+Xr)*$,xr*=$,Xr=Xt.g(1);for(;Tr>=mt;)Tr/=2,xr/=2,Xr>>>=1;return(Tr+Xr)/xr};return ir.int32=function(){return Xt.g(4)|0},ir.quick=function(){return Xt.g(4)/4294967296},ir.double=ir,Ht(Ct(Xt.S),i),(It.pass||Bt||function($r,Tr,xr,Xr){return Xr&&(Xr.S&&At(Xr,Xt),$r.state=function(){return At(Xt,{})}),xr?(o[st]=$r,Tr):$r})(ir,Gt,"global"in It?It.global:this==o,It.state)}o["seed"+st]=bt;function Mt(St){var It,Bt=St.length,Ft=this,Gt=0,Xt=Ft.i=Ft.j=0,ir=Ft.S=[];for(Bt||(St=[Bt++]);Gt<$;)ir[Gt]=Gt++;for(Gt=0;Gt<$;Gt++)ir[Gt]=ir[Xt=vt&Xt+St[Gt%Bt]+(It=ir[Gt])],ir[Xt]=It;Ft.g=function($r){for(var Tr,xr=0,Xr=Ft.i,ln=Ft.j,zr=Ft.S;$r--;)Tr=zr[Xr=vt&Xr+1],xr=xr*$+zr[vt&(zr[Xr]=zr[ln=vt&ln+Tr])+(zr[ln]=Tr)];return Ft.i=Xr,Ft.j=ln,xr}}function At(St,It){return It.i=St.i,It.j=St.j,It.S=St.S.slice(),It}function Lt(St,It){var Bt=[],Ft=_typeof$2(St),Gt;if(It&&Ft=="object")for(Gt in St)try{Bt.push(Lt(St[Gt],It-1))}catch(Xt){}return Bt.length?Bt:Ft=="string"?St:St+"\0"}function Ht(St,It){for(var Bt=St+"",Ft,Gt=0;Gt<Bt.length;)It[vt&Gt]=vt&(Ft^=It[vt&Gt]*19)+Bt.charCodeAt(Gt++);return Ct(It)}function Tt(){try{var St=new Uint8Array($);return(s.crypto||s.msCrypto).getRandomValues(St),Ct(St)}catch(Ft){var It=s.navigator,Bt=It&&It.plugins;return[+new Date,s,Bt,s.screen,Ct(i)]}}function Ct(St){return String.fromCharCode.apply(0,St)}Ht(o.random(),i)}function initialize$2(i){seedRandom([],i)}var propTypes={SHAPE:"shape"};function _typeof$1(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(s){return typeof s}:_typeof$1=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$1(i)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(i){return i.constructor===Array||i.constructor===Float32Array}function isNumerable(i,o){return i==="number"||i==="boolean"||i==="string"||o instanceof Number}function $bm_neg(i){var o=_typeof$1(i);if(o==="number"||o==="boolean"||i instanceof Number)return-i;if($bm_isInstanceOfArray(i)){var s,$=i.length,tt=[];for(s=0;s<$;s+=1)tt[s]=-i[s];return tt}return i.propType?i.v:-i}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(i,o){var s=_typeof$1(i),$=_typeof$1(o);if(s==="string"||$==="string"||isNumerable(s,i)&&isNumerable($,o))return i+o;if($bm_isInstanceOfArray(i)&&isNumerable($,o))return i=i.slice(0),i[0]+=o,i;if(isNumerable(s,i)&&$bm_isInstanceOfArray(o))return o=o.slice(0),o[0]=i+o[0],o;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(o)){for(var tt=0,rt=i.length,st=o.length,_=[];tt<rt||tt<st;)(typeof i[tt]=="number"||i[tt]instanceof Number)&&(typeof o[tt]=="number"||o[tt]instanceof Number)?_[tt]=i[tt]+o[tt]:_[tt]=o[tt]===void 0?i[tt]:i[tt]||o[tt],tt+=1;return _}return 0}var add=sum;function sub(i,o){var s=_typeof$1(i),$=_typeof$1(o);if(isNumerable(s,i)&&isNumerable($,o))return s==="string"&&(i=parseInt(i,10)),$==="string"&&(o=parseInt(o,10)),i-o;if($bm_isInstanceOfArray(i)&&isNumerable($,o))return i=i.slice(0),i[0]-=o,i;if(isNumerable(s,i)&&$bm_isInstanceOfArray(o))return o=o.slice(0),o[0]=i-o[0],o;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(o)){for(var tt=0,rt=i.length,st=o.length,_=[];tt<rt||tt<st;)(typeof i[tt]=="number"||i[tt]instanceof Number)&&(typeof o[tt]=="number"||o[tt]instanceof Number)?_[tt]=i[tt]-o[tt]:_[tt]=o[tt]===void 0?i[tt]:i[tt]||o[tt],tt+=1;return _}return 0}function mul(i,o){var s=_typeof$1(i),$=_typeof$1(o),tt;if(isNumerable(s,i)&&isNumerable($,o))return i*o;var rt,st;if($bm_isInstanceOfArray(i)&&isNumerable($,o)){for(st=i.length,tt=createTypedArray("float32",st),rt=0;rt<st;rt+=1)tt[rt]=i[rt]*o;return tt}if(isNumerable(s,i)&&$bm_isInstanceOfArray(o)){for(st=o.length,tt=createTypedArray("float32",st),rt=0;rt<st;rt+=1)tt[rt]=i*o[rt];return tt}return 0}function div(i,o){var s=_typeof$1(i),$=_typeof$1(o),tt;if(isNumerable(s,i)&&isNumerable($,o))return i/o;var rt,st;if($bm_isInstanceOfArray(i)&&isNumerable($,o)){for(st=i.length,tt=createTypedArray("float32",st),rt=0;rt<st;rt+=1)tt[rt]=i[rt]/o;return tt}if(isNumerable(s,i)&&$bm_isInstanceOfArray(o)){for(st=o.length,tt=createTypedArray("float32",st),rt=0;rt<st;rt+=1)tt[rt]=i/o[rt];return tt}return 0}function mod(i,o){return typeof i=="string"&&(i=parseInt(i,10)),typeof o=="string"&&(o=parseInt(o,10)),i%o}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(i,o,s){if(o>s){var $=s;s=o,o=$}return Math.min(Math.max(i,o),s)}function radiansToDegrees(i){return i/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(i){return i*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(i,o){if(typeof i=="number"||i instanceof Number)return o=o||0,Math.abs(i-o);o||(o=helperLengthArray);var s,$=Math.min(i.length,o.length),tt=0;for(s=0;s<$;s+=1)tt+=Math.pow(o[s]-i[s],2);return Math.sqrt(tt)}function normalize(i){return div(i,length(i))}function rgbToHsl(i){var o=i[0],s=i[1],$=i[2],tt=Math.max(o,s,$),rt=Math.min(o,s,$),st,_,ut=(tt+rt)/2;if(tt===rt)st=0,_=0;else{var mt=tt-rt;switch(_=ut>.5?mt/(2-tt-rt):mt/(tt+rt),tt){case o:st=(s-$)/mt+(s<$?6:0);break;case s:st=($-o)/mt+2;break;case $:st=(o-s)/mt+4;break}st/=6}return[st,_,ut,i[3]]}function hue2rgb(i,o,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?i+(o-i)*6*s:s<1/2?o:s<2/3?i+(o-i)*(2/3-s)*6:i}function hslToRgb(i){var o=i[0],s=i[1],$=i[2],tt,rt,st;if(s===0)tt=$,st=$,rt=$;else{var _=$<.5?$*(1+s):$+s-$*s,ut=2*$-_;tt=hue2rgb(ut,_,o+1/3),rt=hue2rgb(ut,_,o),st=hue2rgb(ut,_,o-1/3)}return[tt,rt,st,i[3]]}function linear(i,o,s,$,tt){if(($===void 0||tt===void 0)&&($=o,tt=s,o=0,s=1),s<o){var rt=s;s=o,o=rt}if(i<=o)return $;if(i>=s)return tt;var st=s===o?0:(i-o)/(s-o);if(!$.length)return $+(tt-$)*st;var _,ut=$.length,mt=createTypedArray("float32",ut);for(_=0;_<ut;_+=1)mt[_]=$[_]+(tt[_]-$[_])*st;return mt}function random(i,o){if(o===void 0&&(i===void 0?(i=0,o=1):(o=i,i=void 0)),o.length){var s,$=o.length;i||(i=createTypedArray("float32",$));var tt=createTypedArray("float32",$),rt=BMMath.random();for(s=0;s<$;s+=1)tt[s]=i[s]+rt*(o[s]-i[s]);return tt}i===void 0&&(i=0);var st=BMMath.random();return i+st*(o-i)}function createPath(i,o,s,$){var tt,rt=i.length,st=shapePool.newElement();st.setPathData(!!$,rt);var _=[0,0],ut,mt;for(tt=0;tt<rt;tt+=1)ut=o&&o[tt]?o[tt]:_,mt=s&&s[tt]?s[tt]:_,st.setTripleAt(i[tt][0],i[tt][1],mt[0]+i[tt][0],mt[1]+i[tt][1],ut[0]+i[tt][0],ut[1]+i[tt][1],tt,!0);return st}function initiateExpression(elem,data,property){function noOp(i){return i}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function i(o,s){var $,tt,rt=this.pv.length?this.pv.length:1,st=createTypedArray("float32",rt);o=5;var _=Math.floor(time*o);for($=0,tt=0;$<_;){for(tt=0;tt<rt;tt+=1)st[tt]+=-s+s*2*BMMath.random();$+=1}var ut=time*o,mt=ut-Math.floor(ut),vt=createTypedArray("float32",rt);if(rt>1){for(tt=0;tt<rt;tt+=1)vt[tt]=this.pv[tt]+st[tt]+(-s+s*2*BMMath.random())*mt;return vt}return this.pv+st[0]+(-s+s*2*BMMath.random())*mt}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(i,o){return loopIn(i,o,!0)}function loopOutDuration(i,o){return loopOut(i,o,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(i,o){var s=[o[0]-i[0],o[1]-i[1],o[2]-i[2]],$=Math.atan2(s[0],Math.sqrt(s[1]*s[1]+s[2]*s[2]))/degToRads,tt=-Math.atan2(s[1],s[2])/degToRads;return[tt,$,0]}function easeOut(i,o,s,$,tt){return applyEase(easeOutBez,i,o,s,$,tt)}function easeIn(i,o,s,$,tt){return applyEase(easeInBez,i,o,s,$,tt)}function ease(i,o,s,$,tt){return applyEase(easeInOutBez,i,o,s,$,tt)}function applyEase(i,o,s,$,tt,rt){tt===void 0?(tt=s,rt=$):o=(o-s)/($-s),o>1?o=1:o<0&&(o=0);var st=i(o);if($bm_isInstanceOfArray(tt)){var _,ut=tt.length,mt=createTypedArray("float32",ut);for(_=0;_<ut;_+=1)mt[_]=(rt[_]-tt[_])*st+tt[_];return mt}return(rt-tt)*st+tt}function nearestKey(i){var o,s=data.k.length,$,tt;if(!data.k.length||typeof data.k[0]=="number")$=0,tt=0;else if($=-1,i*=elem.comp.globalData.frameRate,i<data.k[0].t)$=1,tt=data.k[0].t;else{for(o=0;o<s-1;o+=1)if(i===data.k[o].t){$=o+1,tt=data.k[o].t;break}else if(i>data.k[o].t&&i<data.k[o+1].t){i-data.k[o].t>data.k[o+1].t-i?($=o+2,tt=data.k[o+1].t):($=o+1,tt=data.k[o].t);break}$===-1&&($=o+1,tt=data.k[o].t)}var rt={};return rt.index=$,rt.time=tt/elem.comp.globalData.frameRate,rt}function key(i){var o,s,$;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+i);i-=1,o={time:data.k[i].t/elem.comp.globalData.frameRate,value:[]};var tt=Object.prototype.hasOwnProperty.call(data.k[i],"s")?data.k[i].s:data.k[i-1].e;for($=tt.length,s=0;s<$;s+=1)o[s]=tt[s],o.value[s]=tt[s];return o}function framesToTime(i,o){return o||(o=elem.comp.globalData.frameRate),i/o}function timeToFrames(i,o){return!i&&i!==0&&(i=time),o||(o=elem.comp.globalData.frameRate),i*o}function seedRandom(i){BMMath.seedrandom(randSeed+i)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(i,o){return typeof value=="string"?o===void 0?value.substring(i):value.substring(i,o):""}function substr(i,o){return typeof value=="string"?o===void 0?value.substr(i):value.substr(i,o):""}function posterizeTime(i){time=i===0?0:Math.floor(time*i)/i,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(i){return value=i,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var i={};i.initExpressions=o,i.resetFrame=ExpressionManager.resetFrame;function o(s){var $=0,tt=[];function rt(){$+=1}function st(){$-=1,$===0&&ut()}function _(mt){tt.indexOf(mt)===-1&&tt.push(mt)}function ut(){var mt,vt=tt.length;for(mt=0;mt<vt;mt+=1)tt[mt].release();tt.length=0}s.renderer.compInterface=CompExpressionInterface(s.renderer),s.renderer.globalData.projectInterface.registerComposition(s.renderer),s.renderer.globalData.pushExpression=rt,s.renderer.globalData.popExpression=st,s.renderer.globalData.registerExpressionProperty=_}return i}(),MaskManagerInterface=function(){function i(s,$){this._mask=s,this._data=$}Object.defineProperty(i.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(i.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var o=function($){var tt=createSizedArray($.viewData.length),rt,st=$.viewData.length;for(rt=0;rt<st;rt+=1)tt[rt]=new i($.viewData[rt],$.masksProperties[rt]);var _=function(mt){for(rt=0;rt<st;){if($.masksProperties[rt].nm===mt)return tt[rt];rt+=1}return null};return _};return o}(),ExpressionPropertyInterface=function(){var i={pv:0,v:0,mult:1},o={pv:[0,0,0],v:[0,0,0],mult:1};function s(st,_,ut){Object.defineProperty(st,"velocity",{get:function(){return _.getVelocityAtTime(_.comp.currentFrame)}}),st.numKeys=_.keyframes?_.keyframes.length:0,st.key=function(mt){if(!st.numKeys)return 0;var vt="";"s"in _.keyframes[mt-1]?vt=_.keyframes[mt-1].s:"e"in _.keyframes[mt-2]?vt=_.keyframes[mt-2].e:vt=_.keyframes[mt-2].s;var wt=ut==="unidimensional"?new Number(vt):Object.assign({},vt);return wt.time=_.keyframes[mt-1].t/_.elem.comp.globalData.frameRate,wt.value=ut==="unidimensional"?vt[0]:vt,wt},st.valueAtTime=_.getValueAtTime,st.speedAtTime=_.getSpeedAtTime,st.velocityAtTime=_.getVelocityAtTime,st.propertyGroup=_.propertyGroup}function $(st){(!st||!("pv"in st))&&(st=i);var _=1/st.mult,ut=st.pv*_,mt=new Number(ut);return mt.value=ut,s(mt,st,"unidimensional"),function(){return st.k&&st.getValue(),ut=st.v*_,mt.value!==ut&&(mt=new Number(ut),mt.value=ut,s(mt,st,"unidimensional")),mt}}function tt(st){(!st||!("pv"in st))&&(st=o);var _=1/st.mult,ut=st.data&&st.data.l||st.pv.length,mt=createTypedArray("float32",ut),vt=createTypedArray("float32",ut);return mt.value=vt,s(mt,st,"multidimensional"),function(){st.k&&st.getValue();for(var wt=0;wt<ut;wt+=1)vt[wt]=st.v[wt]*_,mt[wt]=vt[wt];return mt}}function rt(){return i}return function(st){return st?st.propType==="unidimensional"?$(st):tt(st):rt}}(),TransformExpressionInterface=function(){return function(i){function o(st){switch(st){case"scale":case"Scale":case"ADBE Scale":case 6:return o.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return o.rotation;case"ADBE Rotate X":return o.xRotation;case"ADBE Rotate Y":return o.yRotation;case"position":case"Position":case"ADBE Position":case 2:return o.position;case"ADBE Position_0":return o.xPosition;case"ADBE Position_1":return o.yPosition;case"ADBE Position_2":return o.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return o.anchorPoint;case"opacity":case"Opacity":case 11:return o.opacity;default:return null}}Object.defineProperty(o,"rotation",{get:ExpressionPropertyInterface(i.r||i.rz)}),Object.defineProperty(o,"zRotation",{get:ExpressionPropertyInterface(i.rz||i.r)}),Object.defineProperty(o,"xRotation",{get:ExpressionPropertyInterface(i.rx)}),Object.defineProperty(o,"yRotation",{get:ExpressionPropertyInterface(i.ry)}),Object.defineProperty(o,"scale",{get:ExpressionPropertyInterface(i.s)});var s,$,tt,rt;return i.p?rt=ExpressionPropertyInterface(i.p):(s=ExpressionPropertyInterface(i.px),$=ExpressionPropertyInterface(i.py),i.pz&&(tt=ExpressionPropertyInterface(i.pz))),Object.defineProperty(o,"position",{get:function(){return i.p?rt():[s(),$(),tt?tt():0]}}),Object.defineProperty(o,"xPosition",{get:ExpressionPropertyInterface(i.px)}),Object.defineProperty(o,"yPosition",{get:ExpressionPropertyInterface(i.py)}),Object.defineProperty(o,"zPosition",{get:ExpressionPropertyInterface(i.pz)}),Object.defineProperty(o,"anchorPoint",{get:ExpressionPropertyInterface(i.a)}),Object.defineProperty(o,"opacity",{get:ExpressionPropertyInterface(i.o)}),Object.defineProperty(o,"skew",{get:ExpressionPropertyInterface(i.sk)}),Object.defineProperty(o,"skewAxis",{get:ExpressionPropertyInterface(i.sa)}),Object.defineProperty(o,"orientation",{get:ExpressionPropertyInterface(i.or)}),o}}(),LayerExpressionInterface=function(){function i(mt){var vt=new Matrix;if(mt!==void 0){var wt=this._elem.finalTransform.mProp.getValueAtTime(mt);wt.clone(vt)}else{var bt=this._elem.finalTransform.mProp;bt.applyToMatrix(vt)}return vt}function o(mt,vt){var wt=this.getMatrix(vt);return wt.props[12]=0,wt.props[13]=0,wt.props[14]=0,this.applyPoint(wt,mt)}function s(mt,vt){var wt=this.getMatrix(vt);return this.applyPoint(wt,mt)}function $(mt,vt){var wt=this.getMatrix(vt);return wt.props[12]=0,wt.props[13]=0,wt.props[14]=0,this.invertPoint(wt,mt)}function tt(mt,vt){var wt=this.getMatrix(vt);return this.invertPoint(wt,mt)}function rt(mt,vt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var wt,bt=this._elem.hierarchy.length;for(wt=0;wt<bt;wt+=1)this._elem.hierarchy[wt].finalTransform.mProp.applyToMatrix(mt)}return mt.applyToPointArray(vt[0],vt[1],vt[2]||0)}function st(mt,vt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var wt,bt=this._elem.hierarchy.length;for(wt=0;wt<bt;wt+=1)this._elem.hierarchy[wt].finalTransform.mProp.applyToMatrix(mt)}return mt.inversePoint(vt)}function _(mt){var vt=new Matrix;if(vt.reset(),this._elem.finalTransform.mProp.applyToMatrix(vt),this._elem.hierarchy&&this._elem.hierarchy.length){var wt,bt=this._elem.hierarchy.length;for(wt=0;wt<bt;wt+=1)this._elem.hierarchy[wt].finalTransform.mProp.applyToMatrix(vt);return vt.inversePoint(mt)}return vt.inversePoint(mt)}function ut(){return[1,1,1,1]}return function(mt){var vt;function wt(Lt){Mt.mask=new MaskManagerInterface(Lt,mt)}function bt(Lt){Mt.effect=Lt}function Mt(Lt){switch(Lt){case"ADBE Root Vectors Group":case"Contents":case 2:return Mt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return vt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Mt.effect;case"ADBE Text Properties":return Mt.textInterface;default:return null}}Mt.getMatrix=i,Mt.invertPoint=st,Mt.applyPoint=rt,Mt.toWorld=s,Mt.toWorldVec=o,Mt.fromWorld=tt,Mt.fromWorldVec=$,Mt.toComp=s,Mt.fromComp=_,Mt.sampleImage=ut,Mt.sourceRectAtTime=mt.sourceRectAtTime.bind(mt),Mt._elem=mt,vt=TransformExpressionInterface(mt.finalTransform.mProp);var At=getDescriptor(vt,"anchorPoint");return Object.defineProperties(Mt,{hasParent:{get:function(){return mt.hierarchy.length}},parent:{get:function(){return mt.hierarchy[0].layerInterface}},rotation:getDescriptor(vt,"rotation"),scale:getDescriptor(vt,"scale"),position:getDescriptor(vt,"position"),opacity:getDescriptor(vt,"opacity"),anchorPoint:At,anchor_point:At,transform:{get:function(){return vt}},active:{get:function(){return mt.isInRange}}}),Mt.startTime=mt.data.st,Mt.index=mt.data.ind,Mt.source=mt.data.refId,Mt.height=mt.data.ty===0?mt.data.h:100,Mt.width=mt.data.ty===0?mt.data.w:100,Mt.inPoint=mt.data.ip/mt.comp.globalData.frameRate,Mt.outPoint=mt.data.op/mt.comp.globalData.frameRate,Mt._name=mt.data.nm,Mt.registerMaskInterface=wt,Mt.registerEffectsInterface=bt,Mt}}(),propertyGroupFactory=function(){return function(i,o){return function(s){return s=s===void 0?1:s,s<=0?i:o(s-1)}}}(),PropertyInterface=function(){return function(i,o){var s={_name:i};function $(tt){return tt=tt===void 0?1:tt,tt<=0?s:o(tt-1)}return $}}(),EffectsExpressionInterface=function(){var i={createEffectsInterface:o};function o(tt,rt){if(tt.effectsManager){var st=[],_=tt.data.ef,ut,mt=tt.effectsManager.effectElements.length;for(ut=0;ut<mt;ut+=1)st.push(s(_[ut],tt.effectsManager.effectElements[ut],rt,tt));var vt=tt.data.ef||[],wt=function(Mt){for(ut=0,mt=vt.length;ut<mt;){if(Mt===vt[ut].nm||Mt===vt[ut].mn||Mt===vt[ut].ix)return st[ut];ut+=1}return null};return Object.defineProperty(wt,"numProperties",{get:function(){return vt.length}}),wt}return null}function s(tt,rt,st,_){function ut(Mt){for(var At=tt.ef,Lt=0,Ht=At.length;Lt<Ht;){if(Mt===At[Lt].nm||Mt===At[Lt].mn||Mt===At[Lt].ix)return At[Lt].ty===5?vt[Lt]:vt[Lt]();Lt+=1}throw new Error}var mt=propertyGroupFactory(ut,st),vt=[],wt,bt=tt.ef.length;for(wt=0;wt<bt;wt+=1)tt.ef[wt].ty===5?vt.push(s(tt.ef[wt],rt.effectElements[wt],rt.effectElements[wt].propertyGroup,_)):vt.push($(rt.effectElements[wt],tt.ef[wt].ty,_,mt));return tt.mn==="ADBE Color Control"&&Object.defineProperty(ut,"color",{get:function(){return vt[0]()}}),Object.defineProperties(ut,{numProperties:{get:function(){return tt.np}},_name:{value:tt.nm},propertyGroup:{value:mt}}),ut.enabled=tt.en!==0,ut.active=ut.enabled,ut}function $(tt,rt,st,_){var ut=ExpressionPropertyInterface(tt.p);function mt(){return rt===10?st.comp.compInterface(tt.p.v):ut()}return tt.p.setGroupProperty&&tt.p.setGroupProperty(PropertyInterface("",_)),mt}return i}(),ShapePathInterface=function(){return function(o,s,$){var tt=s.sh;function rt(_){return _==="Shape"||_==="shape"||_==="Path"||_==="path"||_==="ADBE Vector Shape"||_===2?rt.path:null}var st=propertyGroupFactory(rt,$);return tt.setGroupProperty(PropertyInterface("Path",st)),Object.defineProperties(rt,{path:{get:function(){return tt.k&&tt.getValue(),tt}},shape:{get:function(){return tt.k&&tt.getValue(),tt}},_name:{value:o.nm},ix:{value:o.ix},propertyIndex:{value:o.ix},mn:{value:o.mn},propertyGroup:{value:$}}),rt}}(),ShapeExpressionInterface=function(){function i(At,Lt,Ht){var Tt=[],Ct,St=At?At.length:0;for(Ct=0;Ct<St;Ct+=1)At[Ct].ty==="gr"?Tt.push(s(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="fl"?Tt.push($(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="st"?Tt.push(st(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="tm"?Tt.push(_(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="tr"||(At[Ct].ty==="el"?Tt.push(mt(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="sr"?Tt.push(vt(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="sh"?Tt.push(ShapePathInterface(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="rc"?Tt.push(wt(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="rd"?Tt.push(bt(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="rp"?Tt.push(Mt(At[Ct],Lt[Ct],Ht)):At[Ct].ty==="gf"?Tt.push(tt(At[Ct],Lt[Ct],Ht)):Tt.push(rt(At[Ct],Lt[Ct])));return Tt}function o(At,Lt,Ht){var Tt,Ct=function(Bt){for(var Ft=0,Gt=Tt.length;Ft<Gt;){if(Tt[Ft]._name===Bt||Tt[Ft].mn===Bt||Tt[Ft].propertyIndex===Bt||Tt[Ft].ix===Bt||Tt[Ft].ind===Bt)return Tt[Ft];Ft+=1}return typeof Bt=="number"?Tt[Bt-1]:null};Ct.propertyGroup=propertyGroupFactory(Ct,Ht),Tt=i(At.it,Lt.it,Ct.propertyGroup),Ct.numProperties=Tt.length;var St=ut(At.it[At.it.length-1],Lt.it[Lt.it.length-1],Ct.propertyGroup);return Ct.transform=St,Ct.propertyIndex=At.cix,Ct._name=At.nm,Ct}function s(At,Lt,Ht){var Tt=function(Bt){switch(Bt){case"ADBE Vectors Group":case"Contents":case 2:return Tt.content;default:return Tt.transform}};Tt.propertyGroup=propertyGroupFactory(Tt,Ht);var Ct=o(At,Lt,Tt.propertyGroup),St=ut(At.it[At.it.length-1],Lt.it[Lt.it.length-1],Tt.propertyGroup);return Tt.content=Ct,Tt.transform=St,Object.defineProperty(Tt,"_name",{get:function(){return At.nm}}),Tt.numProperties=At.np,Tt.propertyIndex=At.ix,Tt.nm=At.nm,Tt.mn=At.mn,Tt}function $(At,Lt,Ht){function Tt(Ct){return Ct==="Color"||Ct==="color"?Tt.color:Ct==="Opacity"||Ct==="opacity"?Tt.opacity:null}return Object.defineProperties(Tt,{color:{get:ExpressionPropertyInterface(Lt.c)},opacity:{get:ExpressionPropertyInterface(Lt.o)},_name:{value:At.nm},mn:{value:At.mn}}),Lt.c.setGroupProperty(PropertyInterface("Color",Ht)),Lt.o.setGroupProperty(PropertyInterface("Opacity",Ht)),Tt}function tt(At,Lt,Ht){function Tt(Ct){return Ct==="Start Point"||Ct==="start point"?Tt.startPoint:Ct==="End Point"||Ct==="end point"?Tt.endPoint:Ct==="Opacity"||Ct==="opacity"?Tt.opacity:null}return Object.defineProperties(Tt,{startPoint:{get:ExpressionPropertyInterface(Lt.s)},endPoint:{get:ExpressionPropertyInterface(Lt.e)},opacity:{get:ExpressionPropertyInterface(Lt.o)},type:{get:function(){return"a"}},_name:{value:At.nm},mn:{value:At.mn}}),Lt.s.setGroupProperty(PropertyInterface("Start Point",Ht)),Lt.e.setGroupProperty(PropertyInterface("End Point",Ht)),Lt.o.setGroupProperty(PropertyInterface("Opacity",Ht)),Tt}function rt(){function At(){return null}return At}function st(At,Lt,Ht){var Tt=propertyGroupFactory(Gt,Ht),Ct=propertyGroupFactory(Ft,Tt);function St(Xt){Object.defineProperty(Ft,At.d[Xt].nm,{get:ExpressionPropertyInterface(Lt.d.dataProps[Xt].p)})}var It,Bt=At.d?At.d.length:0,Ft={};for(It=0;It<Bt;It+=1)St(It),Lt.d.dataProps[It].p.setGroupProperty(Ct);function Gt(Xt){return Xt==="Color"||Xt==="color"?Gt.color:Xt==="Opacity"||Xt==="opacity"?Gt.opacity:Xt==="Stroke Width"||Xt==="stroke width"?Gt.strokeWidth:null}return Object.defineProperties(Gt,{color:{get:ExpressionPropertyInterface(Lt.c)},opacity:{get:ExpressionPropertyInterface(Lt.o)},strokeWidth:{get:ExpressionPropertyInterface(Lt.w)},dash:{get:function(){return Ft}},_name:{value:At.nm},mn:{value:At.mn}}),Lt.c.setGroupProperty(PropertyInterface("Color",Tt)),Lt.o.setGroupProperty(PropertyInterface("Opacity",Tt)),Lt.w.setGroupProperty(PropertyInterface("Stroke Width",Tt)),Gt}function _(At,Lt,Ht){function Tt(St){return St===At.e.ix||St==="End"||St==="end"?Tt.end:St===At.s.ix?Tt.start:St===At.o.ix?Tt.offset:null}var Ct=propertyGroupFactory(Tt,Ht);return Tt.propertyIndex=At.ix,Lt.s.setGroupProperty(PropertyInterface("Start",Ct)),Lt.e.setGroupProperty(PropertyInterface("End",Ct)),Lt.o.setGroupProperty(PropertyInterface("Offset",Ct)),Tt.propertyIndex=At.ix,Tt.propertyGroup=Ht,Object.defineProperties(Tt,{start:{get:ExpressionPropertyInterface(Lt.s)},end:{get:ExpressionPropertyInterface(Lt.e)},offset:{get:ExpressionPropertyInterface(Lt.o)},_name:{value:At.nm}}),Tt.mn=At.mn,Tt}function ut(At,Lt,Ht){function Tt(St){return At.a.ix===St||St==="Anchor Point"?Tt.anchorPoint:At.o.ix===St||St==="Opacity"?Tt.opacity:At.p.ix===St||St==="Position"?Tt.position:At.r.ix===St||St==="Rotation"||St==="ADBE Vector Rotation"?Tt.rotation:At.s.ix===St||St==="Scale"?Tt.scale:At.sk&&At.sk.ix===St||St==="Skew"?Tt.skew:At.sa&&At.sa.ix===St||St==="Skew Axis"?Tt.skewAxis:null}var Ct=propertyGroupFactory(Tt,Ht);return Lt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ct)),Lt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ct)),Lt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ct)),Lt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ct)),Lt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ct)),Lt.transform.mProps.sk&&(Lt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ct)),Lt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ct))),Lt.transform.op.setGroupProperty(PropertyInterface("Opacity",Ct)),Object.defineProperties(Tt,{opacity:{get:ExpressionPropertyInterface(Lt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(Lt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(Lt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(Lt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(Lt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(Lt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(Lt.transform.mProps.sa)},_name:{value:At.nm}}),Tt.ty="tr",Tt.mn=At.mn,Tt.propertyGroup=Ht,Tt}function mt(At,Lt,Ht){function Tt(It){return At.p.ix===It?Tt.position:At.s.ix===It?Tt.size:null}var Ct=propertyGroupFactory(Tt,Ht);Tt.propertyIndex=At.ix;var St=Lt.sh.ty==="tm"?Lt.sh.prop:Lt.sh;return St.s.setGroupProperty(PropertyInterface("Size",Ct)),St.p.setGroupProperty(PropertyInterface("Position",Ct)),Object.defineProperties(Tt,{size:{get:ExpressionPropertyInterface(St.s)},position:{get:ExpressionPropertyInterface(St.p)},_name:{value:At.nm}}),Tt.mn=At.mn,Tt}function vt(At,Lt,Ht){function Tt(It){return At.p.ix===It?Tt.position:At.r.ix===It?Tt.rotation:At.pt.ix===It?Tt.points:At.or.ix===It||It==="ADBE Vector Star Outer Radius"?Tt.outerRadius:At.os.ix===It?Tt.outerRoundness:At.ir&&(At.ir.ix===It||It==="ADBE Vector Star Inner Radius")?Tt.innerRadius:At.is&&At.is.ix===It?Tt.innerRoundness:null}var Ct=propertyGroupFactory(Tt,Ht),St=Lt.sh.ty==="tm"?Lt.sh.prop:Lt.sh;return Tt.propertyIndex=At.ix,St.or.setGroupProperty(PropertyInterface("Outer Radius",Ct)),St.os.setGroupProperty(PropertyInterface("Outer Roundness",Ct)),St.pt.setGroupProperty(PropertyInterface("Points",Ct)),St.p.setGroupProperty(PropertyInterface("Position",Ct)),St.r.setGroupProperty(PropertyInterface("Rotation",Ct)),At.ir&&(St.ir.setGroupProperty(PropertyInterface("Inner Radius",Ct)),St.is.setGroupProperty(PropertyInterface("Inner Roundness",Ct))),Object.defineProperties(Tt,{position:{get:ExpressionPropertyInterface(St.p)},rotation:{get:ExpressionPropertyInterface(St.r)},points:{get:ExpressionPropertyInterface(St.pt)},outerRadius:{get:ExpressionPropertyInterface(St.or)},outerRoundness:{get:ExpressionPropertyInterface(St.os)},innerRadius:{get:ExpressionPropertyInterface(St.ir)},innerRoundness:{get:ExpressionPropertyInterface(St.is)},_name:{value:At.nm}}),Tt.mn=At.mn,Tt}function wt(At,Lt,Ht){function Tt(It){return At.p.ix===It?Tt.position:At.r.ix===It?Tt.roundness:At.s.ix===It||It==="Size"||It==="ADBE Vector Rect Size"?Tt.size:null}var Ct=propertyGroupFactory(Tt,Ht),St=Lt.sh.ty==="tm"?Lt.sh.prop:Lt.sh;return Tt.propertyIndex=At.ix,St.p.setGroupProperty(PropertyInterface("Position",Ct)),St.s.setGroupProperty(PropertyInterface("Size",Ct)),St.r.setGroupProperty(PropertyInterface("Rotation",Ct)),Object.defineProperties(Tt,{position:{get:ExpressionPropertyInterface(St.p)},roundness:{get:ExpressionPropertyInterface(St.r)},size:{get:ExpressionPropertyInterface(St.s)},_name:{value:At.nm}}),Tt.mn=At.mn,Tt}function bt(At,Lt,Ht){function Tt(It){return At.r.ix===It||It==="Round Corners 1"?Tt.radius:null}var Ct=propertyGroupFactory(Tt,Ht),St=Lt;return Tt.propertyIndex=At.ix,St.rd.setGroupProperty(PropertyInterface("Radius",Ct)),Object.defineProperties(Tt,{radius:{get:ExpressionPropertyInterface(St.rd)},_name:{value:At.nm}}),Tt.mn=At.mn,Tt}function Mt(At,Lt,Ht){function Tt(It){return At.c.ix===It||It==="Copies"?Tt.copies:At.o.ix===It||It==="Offset"?Tt.offset:null}var Ct=propertyGroupFactory(Tt,Ht),St=Lt;return Tt.propertyIndex=At.ix,St.c.setGroupProperty(PropertyInterface("Copies",Ct)),St.o.setGroupProperty(PropertyInterface("Offset",Ct)),Object.defineProperties(Tt,{copies:{get:ExpressionPropertyInterface(St.c)},offset:{get:ExpressionPropertyInterface(St.o)},_name:{value:At.nm}}),Tt.mn=At.mn,Tt}return function(At,Lt,Ht){var Tt;function Ct(It){if(typeof It=="number")return It=It===void 0?1:It,It===0?Ht:Tt[It-1];for(var Bt=0,Ft=Tt.length;Bt<Ft;){if(Tt[Bt]._name===It)return Tt[Bt];Bt+=1}return null}function St(){return Ht}return Ct.propertyGroup=propertyGroupFactory(Ct,St),Tt=i(At,Lt,Ct.propertyGroup),Ct.numProperties=Tt.length,Ct._name="Contents",Ct}}(),TextExpressionInterface=function(){return function(i){var o;function s($){switch($){case"ADBE Text Document":return s.sourceText;default:return null}}return Object.defineProperty(s,"sourceText",{get:function(){i.textProperty.getValue();var tt=i.textProperty.currentData.t;return(!o||tt!==o.value)&&(o=new String(tt),o.value=tt||new String(tt),Object.defineProperty(o,"style",{get:function(){return{fillColor:i.textProperty.currentData.fc}}})),o}}),s}}();function _typeof(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(s){return typeof s}:_typeof=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(i)}var FootageInterface=function(){var i=function($){var tt="",rt=$.getFootageData();function st(){return tt="",rt=$.getFootageData(),_}function _(ut){if(rt[ut])return tt=ut,rt=rt[ut],_typeof(rt)==="object"?_:rt;var mt=ut.indexOf(tt);if(mt!==-1){var vt=parseInt(ut.substr(mt+tt.length),10);return rt=rt[vt],_typeof(rt)==="object"?_:rt}return""}return st},o=function($){function tt(rt){return rt==="Outline"?tt.outlineInterface():null}return tt._name="Outline",tt.outlineInterface=i($),tt};return function(s){function $(tt){return tt==="Data"?$.dataInterface:null}return $._name="Data",$.dataInterface=o(s),$}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(i){return interfaces[i]||null}var expressionHelpers=function(){function i(st,_,ut){_.x&&(ut.k=!0,ut.x=!0,ut.initiateExpression=ExpressionManager.initiateExpression,ut.effectsSequence.push(ut.initiateExpression(st,_,ut).bind(ut)))}function o(st){return st*=this.elem.globalData.frameRate,st-=this.offsetTime,st!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<st?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(st,this._cachingAtTime),this._cachingAtTime.lastFrame=st),this._cachingAtTime.value}function s(st){var _=-.01,ut=this.getValueAtTime(st),mt=this.getValueAtTime(st+_),vt=0;if(ut.length){var wt;for(wt=0;wt<ut.length;wt+=1)vt+=Math.pow(mt[wt]-ut[wt],2);vt=Math.sqrt(vt)*100}else vt=0;return vt}function $(st){if(this.vel!==void 0)return this.vel;var _=-.001,ut=this.getValueAtTime(st),mt=this.getValueAtTime(st+_),vt;if(ut.length){vt=createTypedArray("float32",ut.length);var wt;for(wt=0;wt<ut.length;wt+=1)vt[wt]=(mt[wt]-ut[wt])/_}else vt=(mt-ut)/_;return vt}function tt(){return this.pv}function rt(st){this.propertyGroup=st}return{searchExpressions:i,getSpeedAtTime:s,getVelocityAtTime:$,getValueAtTime:o,getStaticValueAtTime:tt,setGroupProperty:rt}}();function addPropertyDecorator(){function i(bt,Mt,At){if(!this.k||!this.keyframes)return this.pv;bt=bt?bt.toLowerCase():"";var Lt=this.comp.renderedFrame,Ht=this.keyframes,Tt=Ht[Ht.length-1].t;if(Lt<=Tt)return this.pv;var Ct,St;At?(Mt?Ct=Math.abs(Tt-this.elem.comp.globalData.frameRate*Mt):Ct=Math.max(0,Tt-this.elem.data.ip),St=Tt-Ct):((!Mt||Mt>Ht.length-1)&&(Mt=Ht.length-1),St=Ht[Ht.length-1-Mt].t,Ct=Tt-St);var It,Bt,Ft;if(bt==="pingpong"){var Gt=Math.floor((Lt-St)/Ct);if(Gt%2!==0)return this.getValueAtTime((Ct-(Lt-St)%Ct+St)/this.comp.globalData.frameRate,0)}else if(bt==="offset"){var Xt=this.getValueAtTime(St/this.comp.globalData.frameRate,0),ir=this.getValueAtTime(Tt/this.comp.globalData.frameRate,0),$r=this.getValueAtTime(((Lt-St)%Ct+St)/this.comp.globalData.frameRate,0),Tr=Math.floor((Lt-St)/Ct);if(this.pv.length){for(Ft=new Array(Xt.length),Bt=Ft.length,It=0;It<Bt;It+=1)Ft[It]=(ir[It]-Xt[It])*Tr+$r[It];return Ft}return(ir-Xt)*Tr+$r}else if(bt==="continue"){var xr=this.getValueAtTime(Tt/this.comp.globalData.frameRate,0),Xr=this.getValueAtTime((Tt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ft=new Array(xr.length),Bt=Ft.length,It=0;It<Bt;It+=1)Ft[It]=xr[It]+(xr[It]-Xr[It])*((Lt-Tt)/this.comp.globalData.frameRate)/5e-4;return Ft}return xr+(xr-Xr)*((Lt-Tt)/.001)}return this.getValueAtTime(((Lt-St)%Ct+St)/this.comp.globalData.frameRate,0)}function o(bt,Mt,At){if(!this.k)return this.pv;bt=bt?bt.toLowerCase():"";var Lt=this.comp.renderedFrame,Ht=this.keyframes,Tt=Ht[0].t;if(Lt>=Tt)return this.pv;var Ct,St;At?(Mt?Ct=Math.abs(this.elem.comp.globalData.frameRate*Mt):Ct=Math.max(0,this.elem.data.op-Tt),St=Tt+Ct):((!Mt||Mt>Ht.length-1)&&(Mt=Ht.length-1),St=Ht[Mt].t,Ct=St-Tt);var It,Bt,Ft;if(bt==="pingpong"){var Gt=Math.floor((Tt-Lt)/Ct);if(Gt%2===0)return this.getValueAtTime(((Tt-Lt)%Ct+Tt)/this.comp.globalData.frameRate,0)}else if(bt==="offset"){var Xt=this.getValueAtTime(Tt/this.comp.globalData.frameRate,0),ir=this.getValueAtTime(St/this.comp.globalData.frameRate,0),$r=this.getValueAtTime((Ct-(Tt-Lt)%Ct+Tt)/this.comp.globalData.frameRate,0),Tr=Math.floor((Tt-Lt)/Ct)+1;if(this.pv.length){for(Ft=new Array(Xt.length),Bt=Ft.length,It=0;It<Bt;It+=1)Ft[It]=$r[It]-(ir[It]-Xt[It])*Tr;return Ft}return $r-(ir-Xt)*Tr}else if(bt==="continue"){var xr=this.getValueAtTime(Tt/this.comp.globalData.frameRate,0),Xr=this.getValueAtTime((Tt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ft=new Array(xr.length),Bt=Ft.length,It=0;It<Bt;It+=1)Ft[It]=xr[It]+(xr[It]-Xr[It])*(Tt-Lt)/.001;return Ft}return xr+(xr-Xr)*(Tt-Lt)/.001}return this.getValueAtTime((Ct-((Tt-Lt)%Ct+Tt))/this.comp.globalData.frameRate,0)}function s(bt,Mt){if(!this.k)return this.pv;if(bt=(bt||.4)*.5,Mt=Math.floor(Mt||5),Mt<=1)return this.pv;var At=this.comp.renderedFrame/this.comp.globalData.frameRate,Lt=At-bt,Ht=At+bt,Tt=Mt>1?(Ht-Lt)/(Mt-1):1,Ct=0,St=0,It;this.pv.length?It=createTypedArray("float32",this.pv.length):It=0;for(var Bt;Ct<Mt;){if(Bt=this.getValueAtTime(Lt+Ct*Tt),this.pv.length)for(St=0;St<this.pv.length;St+=1)It[St]+=Bt[St];else It+=Bt;Ct+=1}if(this.pv.length)for(St=0;St<this.pv.length;St+=1)It[St]/=Mt;else It/=Mt;return It}function $(bt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Mt=this._transformCachingAtTime.v;if(Mt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var At=this.a.getValueAtTime(bt);Mt.translate(-At[0]*this.a.mult,-At[1]*this.a.mult,At[2]*this.a.mult)}if(this.appliedTransformations<2){var Lt=this.s.getValueAtTime(bt);Mt.scale(Lt[0]*this.s.mult,Lt[1]*this.s.mult,Lt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ht=this.sk.getValueAtTime(bt),Tt=this.sa.getValueAtTime(bt);Mt.skewFromAxis(-Ht*this.sk.mult,Tt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ct=this.r.getValueAtTime(bt);Mt.rotate(-Ct*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var St=this.rz.getValueAtTime(bt),It=this.ry.getValueAtTime(bt),Bt=this.rx.getValueAtTime(bt),Ft=this.or.getValueAtTime(bt);Mt.rotateZ(-St*this.rz.mult).rotateY(It*this.ry.mult).rotateX(Bt*this.rx.mult).rotateZ(-Ft[2]*this.or.mult).rotateY(Ft[1]*this.or.mult).rotateX(Ft[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Gt=this.px.getValueAtTime(bt),Xt=this.py.getValueAtTime(bt);if(this.data.p.z){var ir=this.pz.getValueAtTime(bt);Mt.translate(Gt*this.px.mult,Xt*this.py.mult,-ir*this.pz.mult)}else Mt.translate(Gt*this.px.mult,Xt*this.py.mult,0)}else{var $r=this.p.getValueAtTime(bt);Mt.translate($r[0]*this.p.mult,$r[1]*this.p.mult,-$r[2]*this.p.mult)}return Mt}function tt(){return this.v.clone(new Matrix)}var rt=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(bt,Mt,At){var Lt=rt(bt,Mt,At);return Lt.dynamicProperties.length?Lt.getValueAtTime=$.bind(Lt):Lt.getValueAtTime=tt.bind(Lt),Lt.setGroupProperty=expressionHelpers.setGroupProperty,Lt};var st=PropertyFactory.getProp;PropertyFactory.getProp=function(bt,Mt,At,Lt,Ht){var Tt=st(bt,Mt,At,Lt,Ht);Tt.kf?Tt.getValueAtTime=expressionHelpers.getValueAtTime.bind(Tt):Tt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Tt),Tt.setGroupProperty=expressionHelpers.setGroupProperty,Tt.loopOut=i,Tt.loopIn=o,Tt.smooth=s,Tt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Tt),Tt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Tt),Tt.numKeys=Mt.a===1?Mt.k.length:0,Tt.propertyIndex=Mt.ix;var Ct=0;return At!==0&&(Ct=createTypedArray("float32",Mt.a===1?Mt.k[0].s.length:Mt.k.length)),Tt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ct},expressionHelpers.searchExpressions(bt,Mt,Tt),Tt.k&&Ht.addDynamicProperty(Tt),Tt};function _(bt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),bt*=this.elem.globalData.frameRate,bt-=this.offsetTime,bt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<bt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=bt,this.interpolateShape(bt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var ut=ShapePropertyFactory.getConstructorFunction(),mt=ShapePropertyFactory.getKeyframedConstructorFunction();function vt(){}vt.prototype={vertices:function(Mt,At){this.k&&this.getValue();var Lt=this.v;At!==void 0&&(Lt=this.getValueAtTime(At,0));var Ht,Tt=Lt._length,Ct=Lt[Mt],St=Lt.v,It=createSizedArray(Tt);for(Ht=0;Ht<Tt;Ht+=1)Mt==="i"||Mt==="o"?It[Ht]=[Ct[Ht][0]-St[Ht][0],Ct[Ht][1]-St[Ht][1]]:It[Ht]=[Ct[Ht][0],Ct[Ht][1]];return It},points:function(Mt){return this.vertices("v",Mt)},inTangents:function(Mt){return this.vertices("i",Mt)},outTangents:function(Mt){return this.vertices("o",Mt)},isClosed:function(){return this.v.c},pointOnPath:function(Mt,At){var Lt=this.v;At!==void 0&&(Lt=this.getValueAtTime(At,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(Lt));for(var Ht=this._segmentsLength,Tt=Ht.lengths,Ct=Ht.totalLength*Mt,St=0,It=Tt.length,Bt=0,Ft;St<It;){if(Bt+Tt[St].addedLength>Ct){var Gt=St,Xt=Lt.c&&St===It-1?0:St+1,ir=(Ct-Bt)/Tt[St].addedLength;Ft=bez.getPointInSegment(Lt.v[Gt],Lt.v[Xt],Lt.o[Gt],Lt.i[Xt],ir,Tt[St]);break}else Bt+=Tt[St].addedLength;St+=1}return Ft||(Ft=Lt.c?[Lt.v[0][0],Lt.v[0][1]]:[Lt.v[Lt._length-1][0],Lt.v[Lt._length-1][1]]),Ft},vectorOnPath:function(Mt,At,Lt){Mt==1?Mt=this.v.c:Mt==0&&(Mt=.999);var Ht=this.pointOnPath(Mt,At),Tt=this.pointOnPath(Mt+.001,At),Ct=Tt[0]-Ht[0],St=Tt[1]-Ht[1],It=Math.sqrt(Math.pow(Ct,2)+Math.pow(St,2));if(It===0)return[0,0];var Bt=Lt==="tangent"?[Ct/It,St/It]:[-St/It,Ct/It];return Bt},tangentOnPath:function(Mt,At){return this.vectorOnPath(Mt,At,"tangent")},normalOnPath:function(Mt,At){return this.vectorOnPath(Mt,At,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([vt],ut),extendPrototype([vt],mt),mt.prototype.getValueAtTime=_,mt.prototype.initiateExpression=ExpressionManager.initiateExpression;var wt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(bt,Mt,At,Lt,Ht){var Tt=wt(bt,Mt,At,Lt,Ht);return Tt.propertyIndex=Mt.ix,Tt.lock=!1,At===3?expressionHelpers.searchExpressions(bt,Mt.pt,Tt):At===4&&expressionHelpers.searchExpressions(bt,Mt.ks,Tt),Tt.k&&bt.addDynamicProperty(Tt),Tt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function i(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(o,s){var $=this.calculateExpression(s);if(o.t!==$){var tt={};return this.copyData(tt,o),tt.t=$.toString(),tt.__complete=!1,tt}return o},TextProperty.prototype.searchProperty=function(){var o=this.searchKeyframes(),s=this.searchExpressions();return this.kf=o||s,this.kf},TextProperty.prototype.searchExpressions=i}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function i(o,s){var $=createNS("feMerge");$.setAttribute("result",o);var tt,rt;for(rt=0;rt<s.length;rt+=1)tt=createNS("feMergeNode"),tt.setAttribute("in",s[rt]),$.appendChild(tt),$.appendChild(tt);return $}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(i,o,s,$,tt){this.filterManager=o;var rt=createNS("feColorMatrix");rt.setAttribute("type","matrix"),rt.setAttribute("color-interpolation-filters","linearRGB"),rt.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=rt,rt.setAttribute("result",$+"_tint_1"),i.appendChild(rt),rt=createNS("feColorMatrix"),rt.setAttribute("type","matrix"),rt.setAttribute("color-interpolation-filters","sRGB"),rt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),rt.setAttribute("result",$+"_tint_2"),i.appendChild(rt),this.matrixFilter=rt;var st=this.createMergeNode($,[tt,$+"_tint_1",$+"_tint_2"]);i.appendChild(st)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var o=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,$=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+$+" 0"),this.matrixFilter.setAttribute("values",s[0]-o[0]+" 0 0 0 "+o[0]+" "+(s[1]-o[1])+" 0 0 0 "+o[1]+" "+(s[2]-o[2])+" 0 0 0 "+o[2]+" 0 0 0 1 0")}};function SVGFillFilter(i,o,s,$){this.filterManager=o;var tt=createNS("feColorMatrix");tt.setAttribute("type","matrix"),tt.setAttribute("color-interpolation-filters","sRGB"),tt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),tt.setAttribute("result",$),i.appendChild(tt),this.matrixFilter=tt}SVGFillFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var o=this.filterManager.effectElements[2].p.v,s=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+o[0]+" 0 0 0 0 "+o[1]+" 0 0 0 0 "+o[2]+" 0 0 0 "+s+" 0")}};function SVGStrokeEffect(i,o,s){this.initialized=!1,this.filterManager=o,this.elem=s,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var i=this.elem.layerElement.children||this.elem.layerElement.childNodes,o,s,$,tt;for(this.filterManager.effectElements[1].p.v===1?(tt=this.elem.maskManager.masksProperties.length,$=0):($=this.filterManager.effectElements[0].p.v-1,tt=$+1),s=createNS("g"),s.setAttribute("fill","none"),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-dashoffset",1),$;$<tt;$+=1)o=createNS("path"),s.appendChild(o),this.paths.push({p:o,m:$});if(this.filterManager.effectElements[10].p.v===3){var rt=createNS("mask"),st=createElementID();rt.setAttribute("id",st),rt.setAttribute("mask-type","alpha"),rt.appendChild(s),this.elem.globalData.defs.appendChild(rt);var _=createNS("g");for(_.setAttribute("mask","url("+getLocationHref()+"#"+st+")");i[0];)_.appendChild(i[0]);this.elem.layerElement.appendChild(_),this.masker=rt,s.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(s),this.elem.layerElement.removeAttribute("mask"),s.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=s},SVGStrokeEffect.prototype.renderFrame=function(i){this.initialized||this.initialize();var o,s=this.paths.length,$,tt;for(o=0;o<s;o+=1)if(this.paths[o].m!==-1&&($=this.elem.maskManager.viewData[this.paths[o].m],tt=this.paths[o].p,(i||this.filterManager._mdf||$.prop._mdf)&&tt.setAttribute("d",$.lastPath),i||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||$.prop._mdf)){var rt;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var st=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,_=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ut=tt.getTotalLength();rt="0 0 0 "+ut*st+" ";var mt=ut*(_-st),vt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,wt=Math.floor(mt/vt),bt;for(bt=0;bt<wt;bt+=1)rt+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";rt+="0 "+ut*10+" 0 0"}else rt="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;tt.setAttribute("stroke-dasharray",rt)}if((i||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(i||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(i||this.filterManager.effectElements[3].p._mdf)){var Mt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Mt[0]*255)+","+bmFloor(Mt[1]*255)+","+bmFloor(Mt[2]*255)+")")}};function SVGTritoneFilter(i,o,s,$){this.filterManager=o;var tt=createNS("feColorMatrix");tt.setAttribute("type","matrix"),tt.setAttribute("color-interpolation-filters","linearRGB"),tt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.appendChild(tt);var rt=createNS("feComponentTransfer");rt.setAttribute("color-interpolation-filters","sRGB"),rt.setAttribute("result",$),this.matrixFilter=rt;var st=createNS("feFuncR");st.setAttribute("type","table"),rt.appendChild(st),this.feFuncR=st;var _=createNS("feFuncG");_.setAttribute("type","table"),rt.appendChild(_),this.feFuncG=_;var ut=createNS("feFuncB");ut.setAttribute("type","table"),rt.appendChild(ut),this.feFuncB=ut,i.appendChild(rt)}SVGTritoneFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var o=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,$=this.filterManager.effectElements[2].p.v,tt=$[0]+" "+s[0]+" "+o[0],rt=$[1]+" "+s[1]+" "+o[1],st=$[2]+" "+s[2]+" "+o[2];this.feFuncR.setAttribute("tableValues",tt),this.feFuncG.setAttribute("tableValues",rt),this.feFuncB.setAttribute("tableValues",st)}};function SVGProLevelsFilter(i,o,s,$){this.filterManager=o;var tt=this.filterManager.effectElements,rt=createNS("feComponentTransfer");(tt[10].p.k||tt[10].p.v!==0||tt[11].p.k||tt[11].p.v!==1||tt[12].p.k||tt[12].p.v!==1||tt[13].p.k||tt[13].p.v!==0||tt[14].p.k||tt[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",rt)),(tt[17].p.k||tt[17].p.v!==0||tt[18].p.k||tt[18].p.v!==1||tt[19].p.k||tt[19].p.v!==1||tt[20].p.k||tt[20].p.v!==0||tt[21].p.k||tt[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",rt)),(tt[24].p.k||tt[24].p.v!==0||tt[25].p.k||tt[25].p.v!==1||tt[26].p.k||tt[26].p.v!==1||tt[27].p.k||tt[27].p.v!==0||tt[28].p.k||tt[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",rt)),(tt[31].p.k||tt[31].p.v!==0||tt[32].p.k||tt[32].p.v!==1||tt[33].p.k||tt[33].p.v!==1||tt[34].p.k||tt[34].p.v!==0||tt[35].p.k||tt[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",rt)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(rt.setAttribute("color-interpolation-filters","sRGB"),i.appendChild(rt)),(tt[3].p.k||tt[3].p.v!==0||tt[4].p.k||tt[4].p.v!==1||tt[5].p.k||tt[5].p.v!==1||tt[6].p.k||tt[6].p.v!==0||tt[7].p.k||tt[7].p.v!==1)&&(rt=createNS("feComponentTransfer"),rt.setAttribute("color-interpolation-filters","sRGB"),rt.setAttribute("result",$),i.appendChild(rt),this.feFuncRComposed=this.createFeFunc("feFuncR",rt),this.feFuncGComposed=this.createFeFunc("feFuncG",rt),this.feFuncBComposed=this.createFeFunc("feFuncB",rt))}SVGProLevelsFilter.prototype.createFeFunc=function(i,o){var s=createNS(i);return s.setAttribute("type","table"),o.appendChild(s),s},SVGProLevelsFilter.prototype.getTableValue=function(i,o,s,$,tt){for(var rt=0,st=256,_,ut=Math.min(i,o),mt=Math.max(i,o),vt=Array.call(null,{length:st}),wt,bt=0,Mt=tt-$,At=o-i;rt<=256;)_=rt/256,_<=ut?wt=At<0?tt:$:_>=mt?wt=At<0?$:tt:wt=$+Mt*Math.pow((_-i)/At,1/s),vt[bt]=wt,bt+=1,rt+=256/(st-1);return vt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var o,s=this.filterManager.effectElements;this.feFuncRComposed&&(i||s[3].p._mdf||s[4].p._mdf||s[5].p._mdf||s[6].p._mdf||s[7].p._mdf)&&(o=this.getTableValue(s[3].p.v,s[4].p.v,s[5].p.v,s[6].p.v,s[7].p.v),this.feFuncRComposed.setAttribute("tableValues",o),this.feFuncGComposed.setAttribute("tableValues",o),this.feFuncBComposed.setAttribute("tableValues",o)),this.feFuncR&&(i||s[10].p._mdf||s[11].p._mdf||s[12].p._mdf||s[13].p._mdf||s[14].p._mdf)&&(o=this.getTableValue(s[10].p.v,s[11].p.v,s[12].p.v,s[13].p.v,s[14].p.v),this.feFuncR.setAttribute("tableValues",o)),this.feFuncG&&(i||s[17].p._mdf||s[18].p._mdf||s[19].p._mdf||s[20].p._mdf||s[21].p._mdf)&&(o=this.getTableValue(s[17].p.v,s[18].p.v,s[19].p.v,s[20].p.v,s[21].p.v),this.feFuncG.setAttribute("tableValues",o)),this.feFuncB&&(i||s[24].p._mdf||s[25].p._mdf||s[26].p._mdf||s[27].p._mdf||s[28].p._mdf)&&(o=this.getTableValue(s[24].p.v,s[25].p.v,s[26].p.v,s[27].p.v,s[28].p.v),this.feFuncB.setAttribute("tableValues",o)),this.feFuncA&&(i||s[31].p._mdf||s[32].p._mdf||s[33].p._mdf||s[34].p._mdf||s[35].p._mdf)&&(o=this.getTableValue(s[31].p.v,s[32].p.v,s[33].p.v,s[34].p.v,s[35].p.v),this.feFuncA.setAttribute("tableValues",o))}};function SVGDropShadowEffect(i,o,s,$,tt){var rt=o.container.globalData.renderConfig.filterSize,st=o.data.fs||rt;i.setAttribute("x",st.x||rt.x),i.setAttribute("y",st.y||rt.y),i.setAttribute("width",st.width||rt.width),i.setAttribute("height",st.height||rt.height),this.filterManager=o;var _=createNS("feGaussianBlur");_.setAttribute("in","SourceAlpha"),_.setAttribute("result",$+"_drop_shadow_1"),_.setAttribute("stdDeviation","0"),this.feGaussianBlur=_,i.appendChild(_);var ut=createNS("feOffset");ut.setAttribute("dx","25"),ut.setAttribute("dy","0"),ut.setAttribute("in",$+"_drop_shadow_1"),ut.setAttribute("result",$+"_drop_shadow_2"),this.feOffset=ut,i.appendChild(ut);var mt=createNS("feFlood");mt.setAttribute("flood-color","#00ff00"),mt.setAttribute("flood-opacity","1"),mt.setAttribute("result",$+"_drop_shadow_3"),this.feFlood=mt,i.appendChild(mt);var vt=createNS("feComposite");vt.setAttribute("in",$+"_drop_shadow_3"),vt.setAttribute("in2",$+"_drop_shadow_2"),vt.setAttribute("operator","in"),vt.setAttribute("result",$+"_drop_shadow_4"),i.appendChild(vt);var wt=this.createMergeNode($,[$+"_drop_shadow_4",tt]);i.appendChild(wt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){if((i||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),i||this.filterManager.effectElements[0].p._mdf){var o=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)))}if((i||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),i||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var s=this.filterManager.effectElements[3].p.v,$=(this.filterManager.effectElements[2].p.v-90)*degToRads,tt=s*Math.cos($),rt=s*Math.sin($);this.feOffset.setAttribute("dx",tt),this.feOffset.setAttribute("dy",rt)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(i,o,s){this.initialized=!1,this.filterManager=o,this.filterElem=i,this.elem=s,s.matteElement=createNS("g"),s.matteElement.appendChild(s.layerElement),s.matteElement.appendChild(s.transformedElement),s.baseElement=s.matteElement}SVGMatte3Effect.prototype.findSymbol=function(i){for(var o=0,s=_svgMatteSymbols.length;o<s;){if(_svgMatteSymbols[o]===i)return _svgMatteSymbols[o];o+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(i,o){var s=i.layerElement.parentNode;if(s){for(var $=s.children,tt=0,rt=$.length;tt<rt&&$[tt]!==i.layerElement;)tt+=1;var st;tt<=rt-2&&(st=$[tt+1]);var _=createNS("use");_.setAttribute("href","#"+o),st?s.insertBefore(_,st):s.appendChild(_)}},SVGMatte3Effect.prototype.setElementAsMask=function(i,o){if(!this.findSymbol(o)){var s=createElementID(),$=createNS("mask");$.setAttribute("id",o.layerId),$.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(o);var tt=i.globalData.defs;tt.appendChild($);var rt=createNS("symbol");rt.setAttribute("id",s),this.replaceInParent(o,s),rt.appendChild(o.layerElement),tt.appendChild(rt);var st=createNS("use");st.setAttribute("href","#"+s),$.appendChild(st),o.data.hd=!1,o.show()}i.setMatte(o.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var i=this.filterManager.effectElements[0].p.v,o=this.elem.comp.elements,s=0,$=o.length;s<$;)o[s]&&o[s].data.ind===i&&this.setElementAsMask(this.elem,o[s]),s+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(i,o,s,$){i.setAttribute("x","-100%"),i.setAttribute("y","-100%"),i.setAttribute("width","300%"),i.setAttribute("height","300%"),this.filterManager=o;var tt=createNS("feGaussianBlur");tt.setAttribute("result",$),i.appendChild(tt),this.feGaussianBlur=tt}SVGGaussianBlurEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var o=.3,s=this.filterManager.effectElements[0].p.v*o,$=this.filterManager.effectElements[1].p.v,tt=$==3?0:s,rt=$==2?0:s;this.feGaussianBlur.setAttribute("stdDeviation",tt+" "+rt);var st=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",st)}};function TransformEffect(){}TransformEffect.prototype.init=function(i){this.effectsManager=i,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(i){if(this._opMdf=!1,this._mdf=!1,i||this.effectsManager._mdf){var o=this.effectsManager.effectElements,s=o[0].p.v,$=o[1].p.v,tt=o[3].p.v,rt=o[4].p.v,st=o[5].p.v,_=o[6].p.v,ut=o[7].p.v;this.matrix.reset(),this.matrix.translate(-s[0],-s[1],s[2]),this.matrix.scale(rt*.01,tt*.01,1),this.matrix.rotate(-ut*degToRads),this.matrix.skewFromAxis(-st*degToRads,(_+90)*degToRads),this.matrix.translate($[0],$[1],0),this._mdf=!0,this.opacity!==o[8].p.v&&(this.opacity=o[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(i,o){this.init(o)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(i){this.init(i)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports),data$1={v:"5.9.0",fr:29.9700012207031,ip:0,op:100.000004073084,w:256,h:256,nm:"beach",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Front Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[122.352,161.22,0],ix:2,l:2},a:{a:0,k:[3.85,1.25,0],ix:1,l:2},s:{a:0,k:[387.667,387.667,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.5,.6],[-.7,.3],[-.6,-.2],[-.6,-.1],[.2,-.3],[1.3,0]],o:[[.5,-.4],[.7,-.3],[.6,.2],[.6,.1],[-.2,.3],[-1.3,0]],v:[[-3.1,.2],[-.6,-.4],[1.2,-.8],[2.6,-.1],[3.4,.6],[-.1,1]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.976470648074,.850980451995,.109803929048,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.85,1.25],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Umbrella Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:48,s:[15]},{t:105.000004276738,s:[0]}],ix:10},p:{a:0,k:[123.1,158.855,0],ix:2,l:2},a:{a:0,k:[11.9,27.6,0],ix:1,l:2},s:{a:0,k:[387.667,387.667,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[3,.7],[1.3,-6],[-1.7,-.4],[0,0],[0,0]],o:[[-3,-.7],[0,0],[0,0],[1.7,.4],[1.4,-6]],v:[[1.75,-6.2],[-5.25,3.7],[-1.45,6.3],[-.65,6.5],[3.85,5.7]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.36862745098,.36862745098,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[15.1,8.15],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[5.7,1.3],[1.3,-6],[-1.7,-.3],[0,0],[0,0],[-1.7,-.4],[0,0]],o:[[-5.8,-1.3],[0,0],[1.7,.4],[0,0],[0,0],[1.7,.4],[1.4,-5.9]],v:[[1.9,-6.75],[-10.9,1.85],[-9.6,3.85],[-5.1,3.05],[4.1,5.05],[7.9,7.65],[9.9,6.35]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.976470648074,.850980451995,.109803929048,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[14.95,8.7],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[7.6,1.7],[1.3,-6],[-.9,-.2],[0,0],[0,0],[-.8,-.2],[0,0]],o:[[-7.7,-1.6],[0,0],[.8,.2],[0,0],[0,0],[.8,.2],[1.3,-6]],v:[[2.5,-7],[-13.7,.9],[-13.2,2.8],[-10.3,1.7],[10.6,6.2],[12.7,8.4],[13.9,6.9]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.917647118662,.36862745098,.36862745098,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[14.35,8.95],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[.7,.1],[-.1,.7],[0,0],[-.7,-.1],[.1,-.7]],o:[[-.1,.7],[-.7,-.1],[0,0],[.1,-.7],[.7,.2],[0,0]],v:[[-1.3,13.25],[-2.8,14.25],[-3.8,12.75],[1.3,-13.25],[2.8,-14.25],[3.8,-12.75]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.501960784314,.545098039216,.627450980392,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[14.35,14.6],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Land Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[126.617,157.344,0],ix:2,l:2},a:{a:0,k:[13.25,3.75,0],ix:1,l:2},s:{a:0,k:[387.667,387.667,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,1],[-10,0],[0,-1],[14,0]],o:[[0,-1],[12,0],[0,1],[-12,0]],v:[[-13,1.5],[-2,-3.5],[13,1.5],[-1,3.5]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.956862804936,.733333333333,.023529413635,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[13.25,3.75],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Water Tide 2 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:103.000004195276,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[125.647,163.74,0],ix:2,l:2},a:{a:0,k:[14.3,3,0],ix:1,l:2},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:0,s:[428.7,428.7,100]},{t:103.000004195276,s:[387.667,387.667,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-1.6],[12,0],[0,1.6],[-7.9,0]],o:[[0,1.6],[-10.9,0],[0,-1.6],[7.9,0]],v:[[14.05,.15],[-.45,2.75],[-14.05,.15],[-.45,-2.75]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.662745098039,.870588295133,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[14.3,3],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"Water Tide Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[100]},{t:105.000004276738,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[125.647,163.74,0],to:[0,0,0],ti:[0,0,0]},{t:105.000004276738,s:[118.6,166.7,0]}],ix:2,l:2},a:{a:0,k:[14.3,3,0],ix:1,l:2},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:0,s:[387.667,387.667,100]},{t:105.000004276738,s:[464.7,464.7,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-1.6],[12,0],[0,1.6],[-7.9,0]],o:[[0,1.6],[-10.9,0],[0,-1.6],[7.9,0]],v:[[14.05,.15],[-.45,2.75],[-14.05,.15],[-.45,-2.75]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.662745098039,.870588295133,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[14.3,3],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"Water Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[118.863,172.075,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:1},o:{x:.333,y:0},t:48,s:[118.9,173.1,0],to:[0,0,0],ti:[0,0,0]},{t:105.000004276738,s:[118.863,172.075,0]}],ix:2,l:2},a:{a:0,k:[18.25,5.65,0],ix:1,l:2},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:0,s:[387.667,387.667,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:48,s:[448.7,448.7,100]},{t:105.000004276738,s:[387.667,387.667,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-9.941,0],[0,-2.982],[9.941,0],[0,2.982]],o:[[9.941,0],[0,2.982],[-9.941,0],[0,-2.982]],v:[[0,-5.4],[18,0],[0,5.4],[-18,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.101960791794,.690196078431,.847058883368,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[18.25,5.65],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0}],markers:[]},BeachIcon=()=>{const i=React.useRef(null);let o=!1;return reactExports.useEffect(()=>{o||(lottie.loadAnimation({container:i.current,renderer:"svg",loop:!0,autoplay:!0,animationData:data$1}),o=!0)},[]),jsx("div",{ref:i,className:"beach-icon"})},MapInfoModal$1="",data={v:"5.4.4",fr:29.9700012207031,ip:0,op:80.0000032584668,w:500,h:500,nm:"Comp 1",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:3,nm:"Adjustment Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[250,250,0],ix:2},a:{a:0,k:[250,250,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:0,s:[0,0,100],e:[130,130,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:6.333,s:[130,130,100],e:[100,100,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:11.833,s:[100,100,100],e:[120,120,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:16.418,s:[120,120,100],e:[110,110,100]},{t:19.1675007807083}],ix:6}},ao:0,ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"stroke",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:48,s:[0],e:[-4]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:50.25,s:[-4],e:[3]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:52.5,s:[3],e:[-2]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:54.75,s:[-2],e:[4]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:57,s:[4],e:[0]},{t:60.0000024438501}],ix:10},p:{a:0,k:[258.75,237,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[110,110,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[-7.104,12.304],[0,0],[0,0],[-7.104,-12.304],[0,0],[0,0],[14.207,0]],o:[[0,0],[-14.207,0],[0,0],[0,0],[7.104,-12.304],[0,0],[0,0],[7.104,12.304],[0,0]],v:[[0,105.676],[-98.937,105.676],[-114.92,77.992],[-65.452,-7.69],[-15.983,-93.372],[15.983,-93.372],[65.452,-7.69],[114.921,77.992],[98.937,105.676]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:14,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 3",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:12,s:[258.75,268.805,0],e:[258.75,283.75,0],to:[0,2.491,0],ti:[0,-2.491,0]},{t:23.0000009368092}],ix:2},a:{a:0,k:[16,38,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:16,s:[91.667,0,100],e:[91.667,99,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:23.555,s:[91.667,99,100],e:[91.667,93.5,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:29.223,s:[91.667,93.5,100],e:[91.667,91.63,100]},{t:33.0000013441176}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-8.284,0],[0,-8.284],[8.284,0],[0,8.284]],o:[[8.284,0],[0,8.284],[-8.284,0],[0,-8.284]],v:[[0,-15],[15,0],[0,15],[-15,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[16,53],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 2",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[258.75,271.1,0],ix:2},a:{a:0,k:[0,76.865,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:18,s:[50.417,0,100],e:[50.417,55,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:22,s:[50.417,55,100],e:[50.417,47.3,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:26,s:[50.417,47.3,100],e:[50.417,50.38,100]},{t:30.0000012219251}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.327,29.458],[0,0],[2.522,-56],[-6.482,-25.766],[-4.199,16.689]],o:[[-2.522,-56],[0,0],[-1.327,29.458],[4.199,16.689],[6.482,-25.766]],v:[[23.327,-25.037],[0,-78.037],[-23.327,-25.037],[-11.647,64.349],[11.647,64.349]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"body",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:27,s:[0],e:[5]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:29.728,s:[5],e:[-3]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:32.455,s:[-3],e:[2]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:35.183,s:[2],e:[-5]},{i:{x:[.4],y:[.4]},o:{x:[.333],y:[0]},t:37.91,s:[-5],e:[0]},{t:42.0000017106951}],ix:10},p:{a:0,k:[249.583,248.917,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[110,110,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[-7.104,12.304],[0,0],[0,0],[-7.104,-12.304],[0,0],[0,0],[14.207,0]],o:[[0,0],[-14.207,0],[0,0],[0,0],[7.104,-12.304],[0,0],[0,0],[7.104,12.304],[0,0]],v:[[0,105.676],[-98.937,105.676],[-114.92,77.992],[-65.452,-7.69],[-15.983,-93.372],[15.983,-93.372],[65.452,-7.69],[114.921,77.992],[98.937,105.676]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,.78394464231,.125490188599,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:900.000036657751,st:0,bm:0}],markers:[]},WarningIcon=()=>{const i=React.useRef(null);let o=!1;return reactExports.useEffect(()=>{o||(lottie.loadAnimation({container:i.current,renderer:"svg",loop:!1,autoplay:!0,animationData:data}),o=!0)},[]),jsx("div",{ref:i,className:"warning-icon"})},compassOutline="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M350.67 150.93l-117.2 46.88a64 64 0 00-35.66 35.66l-46.88 117.2a8 8 0 0010.4 10.4l117.2-46.88a64 64 0 0035.66-35.66l46.88-117.2a8 8 0 00-10.4-10.4zM256 280a24 24 0 1124-24 24 24 0 01-24 24z'/></svg>",medkitOutline="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='32' y='112' width='448' height='352' rx='48' ry='48' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M144 112V80a32 32 0 0132-32h160a32 32 0 0132 32v32M256 208v160M336 288H176' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";async function getScores(i,o){const $=(await CapacitorHttp.get({url:BASE_API_URL+"location?lon="+i+"&lat="+o,headers:{"Content-Type":"application/json"}})).data;return $.beachesNearby=$.beachesNearby.sort((tt,rt)=>tt.distance-rt.distance),$}const MapInfoModal=({lat:i,long:o})=>{let[s,$]=reactExports.useState(null);(s==null?void 0:s.safetyLevel)=="safe";let[tt,rt]=reactExports.useState(!1),[st,_]=reactExports.useState(!0),ut=reactExports.useRef(null);reactExports.useEffect(()=>{$(null),!(i===null||o===null)&&(getScores(o,i).then($),ut.current.setCurrentBreakpoint(.35))},[i,o]);function mt(Mt){console.log(Mt),Mt.detail.breakpoint===1?rt(!0):rt(!1)}function vt(Mt){Mt.target.scrollTop===0?(_(!0),console.log("at top")):_(!1)}function wt(Mt){Mt.target.scrollTop!==0&&tt&&Mt.stopPropagation()}function bt(Mt){ut.current.setCurrentBreakpoint(1)}return jsx(Fragment,{children:jsx(IonModal,{isOpen:i!==null&&o!==null,handle:!1,ref:ut,onClick:bt,onIonBreakpointDidChange:mt,initialBreakpoint:.35,breakpoints:[st?.35:1,1],animated:!st,backdropBreakpoint:.35,backdropDismiss:!1,style:{"--height":"80%"},className:"map-modal",children:jsx("div",{className:"scroll-container "+(tt?"can-scroll":""),onScroll:vt,onTouchMove:wt,children:s?jsxs(Fragment,{children:[jsx("h1",{className:"modal-header",children:s.beachesNearby[0].name}),jsxs(IonList,{children:[s.safetyLevel==="safe"?jsxs("div",{className:"status-card status-safe",children:[jsxs("div",{children:[jsx("h2",{children:"Safe to Swim"}),jsx("p",{children:"No current toxins. Enjoy your swim!"})]}),jsx("div",{children:jsx(BeachIcon,{})})]}):jsxs("div",{className:"status-card status-unsafe",children:[jsxs("div",{children:[jsx("h2",{children:"Swimming is Unsafe!"}),jsxs("p",{children:["Due to high amounts of ",s.primaryToxin,", swimming in this area is unsafe."]})]}),jsx("div",{children:jsx(WarningIcon,{})})]}),jsx("h2",{className:"nearby-header",children:"Nearby beaches"}),s.beachesNearby.slice(1).filter(Mt=>Mt.distance<10).map(Mt=>jsxs("div",{style:{"border-radius":"1rem","margin-right":"1rem","margin-left":"1rem","margin-bottom":"1rem","box-shadow":"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px"},className:"nearby-card",children:[jsxs(IonCardHeader,{children:[jsx(IonCardTitle,{children:Mt.name}),jsx(IonCardSubtitle,{style:{color:Mt.safetyLevel=="safe"?"#3a3":"#a33"},children:Mt.safetyLevel=="safe"?"Safe to swim":"Unsafe to swim"})]}),jsx(IonCardContent,{children:jsxs(IonList,{children:[jsxs(IonItem,{children:[jsx(IonIcon,{icon:compassOutline,style:{"margin-left":"-1rem",color:"#ccc"},slot:"start"}),jsx(IonLabel,{children:"Distance"}),jsxs(IonLabel,{slot:"end",children:[Math.round(Mt.distance*100)/100," miles"]})]}),Mt.safetyLevel=="unsafe"?jsxs(IonItem,{children:[jsx(IonIcon,{icon:medkitOutline,style:{"margin-left":"-1rem",color:"#ccc"},slot:"start"}),jsx(IonLabel,{children:"Primary Toxin"}),jsx(IonLabel,{slot:"end",children:Mt.primaryToxin})]}):null]})})]}))]})]}):jsxs(Fragment,{children:[jsx("h1",{className:"modal-header",children:jsx(IonSkeletonText,{animated:!0,className:"skeletontext skeletonheader"})}),jsxs("div",{className:"status-card skeletoncard",children:[jsxs("div",{style:{width:"65%"},children:[jsx("h2",{children:jsx(IonSkeletonText,{animated:!0,className:"skeletontext"})}),jsx("p",{children:jsx(IonSkeletonText,{animated:!0,className:"skeletontext",style:{width:"80%"}})}),jsx("p",{children:jsx(IonSkeletonText,{animated:!0,className:"skeletontext",style:{width:"80%"}})})]}),jsx(IonThumbnail,{slot:"end",style:{width:"5rem",height:"5rem","margin-right":"0.5rem"},className:"skeletonthumb",children:jsx(IonSkeletonText,{animated:!0})})]}),jsx(IonList,{})]})})})})},Map$1=()=>{reactExports.useState(0);const[i,o]=reactExports.useState({lat:0,lon:0});return jsxs(IonPage,{children:[jsx(IonHeader,{translucent:!0,className:"map-header",children:jsx(IonToolbar,{children:jsx(IonTitle,{children:"Beach Alert"})})}),jsxs(IonContent,{fullscreen:!0,children:[jsx(MapView,{location:i,setLocation:o}),jsx(MapInfoModal,{lat:i.lat,long:i.lon})]})]})};setupIonicReact();const App=()=>jsx(IonApp,{children:jsx(IonReactRouter,{children:jsx(IonSplitPane,{contentId:"main",children:jsx(IonRouterOutlet,{id:"main",children:jsx(Route,{path:"/",exact:!0,children:jsx(Map$1,{})})})})})}),BASE_API_URL="https://http-javascript-introduces-minolta.trycloudflare.com/";mapboxGlExports.accessToken="pk.eyJ1IjoiZXZhbmc4MTciLCJhIjoiY2t3anh1aDVuMW1mYjJwbXVxbWFlOTZyaSJ9.I_9eR_o-mDV98FzI4YgLQg";const container=document.getElementById("root"),root=createRoot(container);root.render(jsx(React.StrictMode,{children:jsx(App,{})}));export{Keyboard as K,WebPlugin$1 as W,__vite_legacy_guard,clamp$1 as a,componentOnReady as b,createGesture as c,addEventListener$1 as d,removeEventListener as e,findClosestIonContent as f,KeyboardResize as g,raf as h,isRTL$1 as i,getScrollElement as j,scrollByPoint as k,createAnimation as l,getIonPageElement as m,now$2 as n,pointerCoord as p,readTask as r,scrollToTop as s,writeTask$1 as w};
